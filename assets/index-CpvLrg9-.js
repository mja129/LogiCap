const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-DqfqkHbk.js","./Icon-DMAtN4XQ.js","./DrawerController-BuRKVG6D.js","./DrawerController-BWMAhFSr.css"])))=>i.map(i=>d[i]);
var Aee=Object.defineProperty;var tI=e=>{throw TypeError(e)};var Tee=(e,t,r)=>t in e?Aee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var sa=(e,t,r)=>Tee(e,typeof t!="symbol"?t+"":t,r),X0=(e,t,r)=>t.has(e)||tI("Cannot "+r);var je=(e,t,r)=>(X0(e,t,"read from private field"),r?r.call(e):t.get(e)),Or=(e,t,r)=>t.has(e)?tI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ar=(e,t,r,n)=>(X0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ci=(e,t,r)=>(X0(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const x2=!1;var Ud=Array.isArray,Pee=Array.prototype.indexOf,Gf=Array.prototype.includes,Tg=Array.from,PV=Object.defineProperty,qu=Object.getOwnPropertyDescriptor,CV=Object.getOwnPropertyDescriptors,Cee=Object.prototype,Oee=Array.prototype,xA=Object.getPrototypeOf,rI=Object.isExtensible;function Xh(e){return typeof e=="function"}const Fs=()=>{};function Iee(e){return e()}function eg(e){for(var t=0;t<e.length;t++)e[t]()}function OV(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}function nI(e,t,r=!1){return e===void 0?r?t():t:e}function _c(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}function Ree(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);for(var i of Object.getOwnPropertySymbols(e))Object.propertyIsEnumerable.call(e,i)&&!t.includes(i)&&(r[i]=e[i]);return r}const Xi=2,jd=4,Hd=8,SA=1<<24,$u=16,xa=32,Tl=64,S2=128,Do=512,Ii=1024,Yi=2048,Vo=4096,so=8192,Du=16384,yl=32768,_l=65536,iI=1<<17,IV=1<<18,rh=1<<19,RV=1<<20,Ru=1<<25,Ed=65536,E2=1<<21,EA=1<<22,bc=1<<23,tu=Symbol("$state"),kV=Symbol("legacy props"),kee=Symbol(""),nl=new class extends Error{constructor(){super(...arguments);sa(this,"name","StaleReactionError");sa(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var EV;const MV=!!((EV=globalThis.document)!=null&&EV.contentType)&&globalThis.document.contentType.includes("xml");function Pg(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function nh(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Mee(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Lee(e,t,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Nee(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qee(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Dee(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Fee(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function LV(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Bee(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function zee(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vee(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $ee(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Gee(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Uee=1,jee=2,NV=4,Hee=8,Wee=16,Xee=1,Yee=2,qV=4,Kee=8,Jee=16,DV=1,Zee=2,qi=Symbol(),FV="http://www.w3.org/1999/xhtml",Qee="@attach";function ete(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function tte(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function BV(e){return e===this.v}function AA(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function zV(e){return!AA(e,this.v)}let ih=!1,rte=!1;function nte(){ih=!0}let Xr=null;function Uf(e){Xr=e}function mr(e){return VV().get(e)}function jr(e,t){return VV().set(e,t),t}function er(e,t=!1,r){Xr={p:Xr,i:!1,c:null,e:null,s:e,x:null,l:ih&&!t?{s:null,u:null,$:[]}:null}}function tr(e){var t=Xr,r=t.e;if(r!==null){t.e=null;for(var n of r)a$(n)}return e!==void 0&&(t.x=e),t.i=!0,Xr=t.p,e??{}}function sh(){return!ih||Xr!==null&&Xr.l===null}function VV(e){return Xr===null&&nh(),Xr.c??(Xr.c=new Map(ite(Xr)||void 0))}function ite(e){let t=e.p;for(;t!==null;){const r=t.c;if(r!==null)return r;t=t.p}return null}let il=[];function $V(){var e=il;il=[],eg(e)}function ru(e){if(il.length===0&&!gd){var t=il;queueMicrotask(()=>{t===il&&$V()})}il.push(e)}function ste(){for(;il.length>0;)$V()}function GV(e){var t=Qr;if(t===null)return Hr.f|=bc,e;if((t.f&yl)===0&&(t.f&jd)===0)throw e;gc(e,t)}function gc(e,t){for(;t!==null;){if((t.f&S2)!==0){if((t.f&yl)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw e}const ote=-7169;function ni(e,t){e.f=e.f&ote|t}function TA(e){(e.f&Do)!==0||e.deps===null?ni(e,Ii):ni(e,Vo)}function UV(e){if(e!==null)for(const t of e)(t.f&Xi)===0||(t.f&Ed)===0||(t.f^=Ed,UV(t.deps))}function jV(e,t,r){(e.f&Yi)!==0?t.add(e):(e.f&Vo)!==0&&r.add(e),UV(e.deps),ni(e,Ii)}const vv=new Set;let _r=null,tg=null,Ui=null,Is=[],Cg=null,A2=!1,gd=!1;var Lf,Nf,cl,qf,zd,Df,dc,Xa,Ff,uo,T2,P2,C2,HV;const fC=class fC{constructor(){Or(this,uo);sa(this,"current",new Map);sa(this,"previous",new Map);Or(this,Lf,new Set);Or(this,Nf,new Set);Or(this,cl,0);Or(this,qf,0);Or(this,zd,null);Or(this,Df,new Set);Or(this,dc,new Set);Or(this,Xa,new Map);sa(this,"is_fork",!1);Or(this,Ff,!1)}skip_effect(t){je(this,Xa).has(t)||je(this,Xa).set(t,{d:[],m:[]})}unskip_effect(t){var r=je(this,Xa).get(t);if(r){je(this,Xa).delete(t);for(var n of r.d)ni(n,Yi),da(n);for(n of r.m)ni(n,Vo),da(n)}}process(t){var i;Is=[],this.apply();var r=[],n=[];for(const s of t)Ci(this,uo,P2).call(this,s,r,n);if(Ci(this,uo,T2).call(this)){Ci(this,uo,C2).call(this,n),Ci(this,uo,C2).call(this,r);for(const[s,o]of je(this,Xa))KV(s,o)}else{for(const s of je(this,Lf))s();je(this,Lf).clear(),je(this,cl)===0&&Ci(this,uo,HV).call(this),tg=this,_r=null,sI(n),sI(r),je(this,Df).clear(),je(this,dc).clear(),tg=null,(i=je(this,zd))==null||i.resolve()}Ui=null}capture(t,r){r!==qi&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&bc)===0&&(this.current.set(t,t.v),Ui==null||Ui.set(t,t.v))}activate(){_r=this,this.apply()}deactivate(){_r===this&&(_r=null,Ui=null)}flush(){if(this.activate(),Is.length>0){if(WV(),_r!==null&&_r!==this)return}else je(this,cl)===0&&this.process([]);this.deactivate()}discard(){for(const t of je(this,Nf))t(this);je(this,Nf).clear()}increment(t){Ar(this,cl,je(this,cl)+1),t&&Ar(this,qf,je(this,qf)+1)}decrement(t){Ar(this,cl,je(this,cl)-1),t&&Ar(this,qf,je(this,qf)-1),!je(this,Ff)&&(Ar(this,Ff,!0),ru(()=>{Ar(this,Ff,!1),Ci(this,uo,T2).call(this)?Is.length>0&&this.flush():this.revive()}))}revive(){for(const t of je(this,Df))je(this,dc).delete(t),ni(t,Yi),da(t);for(const t of je(this,dc))ni(t,Vo),da(t);this.flush()}oncommit(t){je(this,Lf).add(t)}ondiscard(t){je(this,Nf).add(t)}settled(){return(je(this,zd)??Ar(this,zd,OV())).promise}static ensure(){if(_r===null){const t=_r=new fC;vv.add(_r),gd||ru(()=>{_r===t&&t.flush()})}return _r}apply(){}};Lf=new WeakMap,Nf=new WeakMap,cl=new WeakMap,qf=new WeakMap,zd=new WeakMap,Df=new WeakMap,dc=new WeakMap,Xa=new WeakMap,Ff=new WeakMap,uo=new WeakSet,T2=function(){return this.is_fork||je(this,qf)>0},P2=function(t,r,n){t.f^=Ii;for(var i=t.first;i!==null;){var s=i.f,o=(s&(xa|Tl))!==0,a=o&&(s&Ii)!==0,u=a||(s&so)!==0||je(this,Xa).has(i);if(!u&&i.fn!==null){o?i.f^=Ii:(s&jd)!==0?r.push(i):oh(i)&&((s&$u)!==0&&je(this,dc).add(i),bl(i));var c=i.first;if(c!==null){i=c;continue}}for(;i!==null;){var l=i.next;if(l!==null){i=l;break}i=i.parent}}},C2=function(t){for(var r=0;r<t.length;r+=1)jV(t[r],je(this,Df),je(this,dc))},HV=function(){var i;if(vv.size>1){this.previous.clear();var t=Ui,r=!0;for(const s of vv){if(s===this){r=!1;continue}const o=[];for(const[u,c]of this.current){if(s.current.has(u))if(r&&c!==s.current.get(u))s.current.set(u,c);else continue;o.push(u)}if(o.length===0)continue;const a=[...s.current.keys()].filter(u=>!this.current.has(u));if(a.length>0){var n=Is;Is=[];const u=new Set,c=new Map;for(const l of o)XV(l,a,u,c);if(Is.length>0){_r=s,s.apply();for(const l of Is)Ci(i=s,uo,P2).call(i,l,[],[]);s.deactivate()}Is=n}}_r=null,Ui=t}je(this,Xa).clear(),vv.delete(this)};let wc=fC;function ate(e){var t=gd;gd=!0;try{for(var r;;){if(ste(),Is.length===0&&(_r==null||_r.flush(),Is.length===0))return Cg=null,r;WV()}}finally{gd=t}}function WV(){A2=!0;var e=null;try{for(var t=0;Is.length>0;){var r=wc.ensure();if(t++>1e3){var n,i;ute()}r.process(Is),xc.clear()}}finally{Is=[],A2=!1,Cg=null}}function ute(){try{Fee()}catch(e){gc(e,Cg)}}let oa=null;function sI(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Du|so))===0&&oh(n)&&(oa=new Set,bl(n),n.deps===null&&n.first===null&&n.nodes===null&&n.teardown===null&&n.ac===null&&l$(n),(oa==null?void 0:oa.size)>0)){xc.clear();for(const i of oa){if((i.f&(Du|so))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)oa.has(o)&&(oa.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const u=s[a];(u.f&(Du|so))===0&&bl(u)}}oa.clear()}}oa=null}}function XV(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&Xi)!==0?XV(i,t,r,n):(s&(EA|$u))!==0&&(s&Yi)===0&&YV(i,t,n)&&(ni(i,Yi),da(i))}}function YV(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(Gf.call(t,i))return!0;if((i.f&Xi)!==0&&YV(i,t,r))return r.set(i,!0),!0}return r.set(e,!1),!1}function da(e){var t=Cg=e,r=t.b;if(r!=null&&r.is_pending&&(e.f&(jd|Hd|SA))!==0&&(e.f&yl)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var n=t.f;if(A2&&t===Qr&&(n&$u)!==0&&(n&IV)===0&&(n&yl)!==0)return;if((n&(Tl|xa))!==0){if((n&Ii)===0)return;t.f^=Ii}}Is.push(t)}function KV(e,t){if(!((e.f&xa)!==0&&(e.f&Ii)!==0)){(e.f&Yi)!==0?t.d.push(e):(e.f&Vo)!==0&&t.m.push(e),ni(e,Ii);for(var r=e.first;r!==null;)KV(r,t),r=r.next}}function cte(e){let t=0,r=Ac(0),n;return()=>{OA()&&(E(r),Pl(()=>(t===0&&(n=et(()=>e(()=>md(r)))),t+=1,()=>{ru(()=>{t-=1,t===0&&(n==null||n(),n=void 0,md(r))})})))}}var lte=_l|rh;function fte(e,t,r,n){new hte(e,t,r,n)}var Po,wA,Ya,ll,Os,Ka,Qs,aa,Cu,fl,pc,Bf,zf,Vf,Ou,xg,Ri,dte,pte,vte,O2,$v,Gv,I2;class hte{constructor(t,r,n,i){Or(this,Ri);sa(this,"parent");sa(this,"is_pending",!1);sa(this,"transform_error");Or(this,Po);Or(this,wA,null);Or(this,Ya);Or(this,ll);Or(this,Os);Or(this,Ka,null);Or(this,Qs,null);Or(this,aa,null);Or(this,Cu,null);Or(this,fl,0);Or(this,pc,0);Or(this,Bf,!1);Or(this,zf,new Set);Or(this,Vf,new Set);Or(this,Ou,null);Or(this,xg,cte(()=>(Ar(this,Ou,Ac(je(this,fl))),()=>{Ar(this,Ou,null)})));var s;Ar(this,Po,t),Ar(this,Ya,r),Ar(this,ll,o=>{var a=Qr;a.b=this,a.f|=S2,n(o)}),this.parent=Qr.b,this.transform_error=i??((s=this.parent)==null?void 0:s.transform_error)??(o=>o),Ar(this,Os,Kd(()=>{Ci(this,Ri,O2).call(this)},lte))}defer_effect(t){jV(t,je(this,zf),je(this,Vf))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!je(this,Ya).pending}update_pending_count(t){Ci(this,Ri,I2).call(this,t),Ar(this,fl,je(this,fl)+t),!(!je(this,Ou)||je(this,Bf))&&(Ar(this,Bf,!0),ru(()=>{Ar(this,Bf,!1),je(this,Ou)&&jf(je(this,Ou),je(this,fl))}))}get_effect_pending(){return je(this,xg).call(this),E(je(this,Ou))}error(t){var r=je(this,Ya).onerror;let n=je(this,Ya).failed;if(!r&&!n)throw t;je(this,Ka)&&(Hi(je(this,Ka)),Ar(this,Ka,null)),je(this,Qs)&&(Hi(je(this,Qs)),Ar(this,Qs,null)),je(this,aa)&&(Hi(je(this,aa)),Ar(this,aa,null));var i=!1,s=!1;const o=()=>{if(i){tte();return}i=!0,s&&Gee(),je(this,aa)!==null&&dl(je(this,aa),()=>{Ar(this,aa,null)}),Ci(this,Ri,Gv).call(this,()=>{wc.ensure(),Ci(this,Ri,O2).call(this)})},a=u=>{try{s=!0,r==null||r(u,o),s=!1}catch(c){gc(c,je(this,Os)&&je(this,Os).parent)}n&&Ar(this,aa,Ci(this,Ri,Gv).call(this,()=>{wc.ensure();try{return Ms(()=>{var c=Qr;c.b=this,c.f|=S2,n(je(this,Po),()=>u,()=>o)})}catch(c){return gc(c,je(this,Os).parent),null}}))};ru(()=>{var u;try{u=this.transform_error(t)}catch(c){gc(c,je(this,Os)&&je(this,Os).parent);return}u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(a,c=>gc(c,je(this,Os)&&je(this,Os).parent)):a(u)})}}Po=new WeakMap,wA=new WeakMap,Ya=new WeakMap,ll=new WeakMap,Os=new WeakMap,Ka=new WeakMap,Qs=new WeakMap,aa=new WeakMap,Cu=new WeakMap,fl=new WeakMap,pc=new WeakMap,Bf=new WeakMap,zf=new WeakMap,Vf=new WeakMap,Ou=new WeakMap,xg=new WeakMap,Ri=new WeakSet,dte=function(){try{Ar(this,Ka,Ms(()=>je(this,ll).call(this,je(this,Po))))}catch(t){this.error(t)}},pte=function(t){const r=je(this,Ya).failed;r&&Ar(this,aa,Ms(()=>{r(je(this,Po),()=>t,()=>()=>{})}))},vte=function(){const t=je(this,Ya).pending;t&&(this.is_pending=!0,Ar(this,Qs,Ms(()=>t(je(this,Po)))),ru(()=>{var r=Ar(this,Cu,document.createDocumentFragment()),n=Fu();r.append(n),Ar(this,Ka,Ci(this,Ri,Gv).call(this,()=>(wc.ensure(),Ms(()=>je(this,ll).call(this,n))))),je(this,pc)===0&&(je(this,Po).before(r),Ar(this,Cu,null),dl(je(this,Qs),()=>{Ar(this,Qs,null)}),Ci(this,Ri,$v).call(this))}))},O2=function(){try{if(this.is_pending=this.has_pending_snippet(),Ar(this,pc,0),Ar(this,fl,0),Ar(this,Ka,Ms(()=>{je(this,ll).call(this,je(this,Po))})),je(this,pc)>0){var t=Ar(this,Cu,document.createDocumentFragment());d$(je(this,Ka),t);const r=je(this,Ya).pending;Ar(this,Qs,Ms(()=>r(je(this,Po))))}else Ci(this,Ri,$v).call(this)}catch(r){this.error(r)}},$v=function(){this.is_pending=!1;for(const t of je(this,zf))ni(t,Yi),da(t);for(const t of je(this,Vf))ni(t,Vo),da(t);je(this,zf).clear(),je(this,Vf).clear()},Gv=function(t){var r=Qr,n=Hr,i=Xr;Go(je(this,Os)),$o(je(this,Os)),Uf(je(this,Os).ctx);try{return t()}catch(s){return GV(s),null}finally{Go(r),$o(n),Uf(i)}},I2=function(t){var r;if(!this.has_pending_snippet()){this.parent&&Ci(r=this.parent,Ri,I2).call(r,t);return}Ar(this,pc,je(this,pc)+t),je(this,pc)===0&&(Ci(this,Ri,$v).call(this),je(this,Qs)&&dl(je(this,Qs),()=>{Ar(this,Qs,null)}),je(this,Cu)&&(je(this,Po).before(je(this,Cu)),Ar(this,Cu,null)))};function JV(e,t,r,n){const i=sh()?Wd:Oi;var s=e.filter(h=>!h.settled);if(r.length===0&&s.length===0){n(t.map(i));return}var o=Qr,a=gte(),u=s.length===1?s[0].promise:s.length>1?Promise.all(s.map(h=>h.promise)):null;function c(h){a();try{n(h)}catch(v){(o.f&Du)===0&&gc(v,o)}R2()}if(r.length===0){u.then(()=>c(t.map(i)));return}function l(){a(),Promise.all(r.map(h=>yte(h))).then(h=>c([...t.map(i),...h])).catch(h=>gc(h,o))}u?u.then(l):l()}function gte(){var e=Qr,t=Hr,r=Xr,n=_r;return function(s=!0){Go(e),$o(t),Uf(r),s&&(n==null||n.activate())}}function R2(e=!0){Go(null),$o(null),Uf(null),e&&(_r==null||_r.deactivate())}function mte(){var e=Qr.b,t=_r,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}function Wd(e){var t=Xi|Yi,r=Hr!==null&&(Hr.f&Xi)!==0?Hr:null;return Qr!==null&&(Qr.f|=rh),{ctx:Xr,deps:null,effects:null,equals:BV,f:t,fn:e,reactions:null,rv:0,v:qi,wv:0,parent:r??Qr,ac:null}}function yte(e,t,r){Qr===null&&Mee();var i=void 0,s=Ac(qi),o=!Hr,a=new Map;return kte(()=>{var v;var u=OV();i=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).finally(R2)}catch(_){u.reject(_),R2()}var c=_r;if(o){var l=mte();(v=a.get(c))==null||v.reject(nl),a.delete(c),a.set(c,u)}const h=(_,m=void 0)=>{if(c.activate(),m)m!==nl&&(s.f|=bc,jf(s,m));else{(s.f&bc)!==0&&(s.f^=bc),jf(s,_);for(const[b,y]of a){if(a.delete(b),b===c)break;y.reject(nl)}}l&&l()};u.promise.then(h,_=>h(null,_||"unknown"))}),Yd(()=>{for(const u of a.values())u.reject(nl)}),new Promise(u=>{function c(l){function h(){l===i?u(s):c(i)}l.then(h,h)}c(i)})}function Rr(e){const t=Wd(e);return p$(t),t}function Oi(e){const t=Wd(e);return t.equals=zV,t}function _te(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Hi(t[r])}}function bte(e){for(var t=e.parent;t!==null;){if((t.f&Xi)===0)return(t.f&Du)===0?t:null;t=t.parent}return null}function PA(e){var t,r=Qr;Go(bte(e));try{e.f&=~Ed,_te(e),t=y$(e)}finally{Go(r)}return t}function ZV(e){var t=PA(e);if(!e.equals(t)&&(e.wv=g$(),(!(_r!=null&&_r.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){ni(e,Ii);return}Pc||(Ui!==null?(OA()||_r!=null&&_r.is_fork)&&Ui.set(e,t):TA(e))}function wte(e){var t,r;if(e.effects!==null)for(const n of e.effects)(n.teardown||n.ac)&&((t=n.teardown)==null||t.call(n),(r=n.ac)==null||r.abort(nl),n.teardown=Fs,n.ac=null,Ad(n,0),IA(n))}function QV(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&bl(t)}let k2=new Set;const xc=new Map;let e$=!1;function Ac(e,t){var r={f:0,v:e,reactions:null,equals:BV,rv:0,wv:0};return r}function fn(e,t){const r=Ac(e);return p$(r),r}function qe(e,t=!1,r=!0){var i;const n=Ac(e);return t||(n.equals=zV),ih&&r&&Xr!==null&&Xr.l!==null&&((i=Xr.l).s??(i.s=[])).push(n),n}function ff(e,t){return pe(e,et(()=>E(e))),t}function pe(e,t,r=!1){Hr!==null&&(!pa||(Hr.f&iI)!==0)&&sh()&&(Hr.f&(Xi|$u|EA|iI))!==0&&(Fo===null||!Gf.call(Fo,e))&&$ee();let n=r?No(t):t;return jf(e,n)}function jf(e,t){if(!e.equals(t)){var r=e.v;Pc?xc.set(e,t):xc.set(e,r),e.v=t;var n=wc.ensure();if(n.capture(e,r),(e.f&Xi)!==0){const i=e;(e.f&Yi)!==0&&PA(i),TA(i)}e.wv=g$(),t$(e,Yi),sh()&&Qr!==null&&(Qr.f&Ii)!==0&&(Qr.f&(xa|Tl))===0&&(Ao===null?Nte([e]):Ao.push(e)),!n.is_fork&&k2.size>0&&!e$&&xte()}return t}function xte(){e$=!1;for(const e of k2)(e.f&Ii)!==0&&ni(e,Vo),oh(e)&&bl(e);k2.clear()}function oI(e,t=1){var r=E(e),n=t===1?r++:r--;return pe(e,r),n}function md(e){pe(e,e.v+1)}function t$(e,t){var r=e.reactions;if(r!==null)for(var n=sh(),i=r.length,s=0;s<i;s++){var o=r[s],a=o.f;if(!(!n&&o===Qr)){var u=(a&Yi)===0;if(u&&ni(o,t),(a&Xi)!==0){var c=o;Ui==null||Ui.delete(c),(a&Ed)===0&&(a&Do&&(o.f|=Ed),t$(c,Vo))}else u&&((a&$u)!==0&&oa!==null&&oa.add(o),da(o))}}}function No(e){if(typeof e!="object"||e===null||tu in e)return e;const t=xA(e);if(t!==Cee&&t!==Oee)return e;var r=new Map,n=Ud(e),i=fn(0),s=pl,o=a=>{if(pl===s)return a();var u=Hr,c=pl;$o(null),lI(s);var l=a();return $o(u),lI(c),l};return n&&r.set("length",fn(e.length)),new Proxy(e,{defineProperty(a,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&zee();var l=r.get(u);return l===void 0?o(()=>{var h=fn(c.value);return r.set(u,h),h}):pe(l,c.value,!0),!0},deleteProperty(a,u){var c=r.get(u);if(c===void 0){if(u in a){const l=o(()=>fn(qi));r.set(u,l),md(i)}}else pe(c,qi),md(i);return!0},get(a,u,c){var _;if(u===tu)return e;var l=r.get(u),h=u in a;if(l===void 0&&(!h||(_=qu(a,u))!=null&&_.writable)&&(l=o(()=>{var m=No(h?a[u]:qi),b=fn(m);return b}),r.set(u,l)),l!==void 0){var v=E(l);return v===qi?void 0:v}return Reflect.get(a,u,c)},getOwnPropertyDescriptor(a,u){var c=Reflect.getOwnPropertyDescriptor(a,u);if(c&&"value"in c){var l=r.get(u);l&&(c.value=E(l))}else if(c===void 0){var h=r.get(u),v=h==null?void 0:h.v;if(h!==void 0&&v!==qi)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(a,u){var v;if(u===tu)return!0;var c=r.get(u),l=c!==void 0&&c.v!==qi||Reflect.has(a,u);if(c!==void 0||Qr!==null&&(!l||(v=qu(a,u))!=null&&v.writable)){c===void 0&&(c=o(()=>{var _=l?No(a[u]):qi,m=fn(_);return m}),r.set(u,c));var h=E(c);if(h===qi)return!1}return l},set(a,u,c,l){var P;var h=r.get(u),v=u in a;if(n&&u==="length")for(var _=c;_<h.v;_+=1){var m=r.get(_+"");m!==void 0?pe(m,qi):_ in a&&(m=o(()=>fn(qi)),r.set(_+"",m))}if(h===void 0)(!v||(P=qu(a,u))!=null&&P.writable)&&(h=o(()=>fn(void 0)),pe(h,No(c)),r.set(u,h));else{v=h.v!==qi;var b=o(()=>No(c));pe(h,b)}var y=Reflect.getOwnPropertyDescriptor(a,u);if(y!=null&&y.set&&y.set.call(l,c),!v){if(n&&typeof u=="string"){var w=r.get("length"),T=Number(u);Number.isInteger(T)&&T>=w.v&&pe(w,T+1)}md(i)}return!0},ownKeys(a){E(i);var u=Reflect.ownKeys(a).filter(h=>{var v=r.get(h);return v===void 0||v.v!==qi});for(var[c,l]of r)l.v!==qi&&!(c in a)&&u.push(c);return u},setPrototypeOf(){Vee()}})}function aI(e){try{if(e!==null&&typeof e=="object"&&tu in e)return e[tu]}catch{}return e}function Ste(e,t){return Object.is(aI(e),aI(t))}var bf,r$,n$,i$;function Ete(){if(bf===void 0){bf=window,r$=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;n$=qu(t,"firstChild").get,i$=qu(t,"nextSibling").get,rI(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),rI(r)&&(r.__t=void 0)}}function Fu(e=""){return document.createTextNode(e)}function Iu(e){return n$.call(e)}function Xd(e){return i$.call(e)}function gt(e,t){return Iu(e)}function _t(e,t=!1){{var r=Iu(e);return r instanceof Comment&&r.data===""?Xd(r):r}}function nt(e,t=1,r=!1){let n=e;for(;t--;)n=Xd(n);return n}function Ate(e){e.textContent=""}function s$(){return!1}function Tte(e,t,r){return document.createElementNS(FV,e,void 0)}function Pte(e,t){if(t){const r=document.body;e.autofocus=!0,ru(()=>{document.activeElement===r&&e.focus()})}}let uI=!1;function Cte(){uI||(uI=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Og(e){var t=Hr,r=Qr;$o(null),Go(null);try{return e()}finally{$o(t),Go(r)}}function CA(e,t,r,n=r){e.addEventListener(t,()=>Og(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),Cte()}function o$(e){Qr===null&&(Hr===null&&Dee(),qee()),Pc&&Nee()}function Ote(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Sa(e,t,r){var n=Qr;n!==null&&(n.f&so)!==0&&(e|=so);var i={ctx:Xr,deps:null,nodes:null,f:e|Yi|Do,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{bl(i)}catch(a){throw Hi(i),a}else t!==null&&da(i);var s=i;if(r&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&rh)===0&&(s=s.first,(e&$u)!==0&&(e&_l)!==0&&s!==null&&(s.f|=_l)),s!==null&&(s.parent=n,n!==null&&Ote(s,n),Hr!==null&&(Hr.f&Xi)!==0&&(e&Tl)===0)){var o=Hr;(o.effects??(o.effects=[])).push(s)}return i}function OA(){return Hr!==null&&!pa}function Yd(e){const t=Sa(Hd,null,!1);return ni(t,Ii),t.teardown=e,t}function Tc(e){o$();var t=Qr.f,r=!Hr&&(t&xa)!==0&&(t&yl)===0;if(r){var n=Xr;(n.e??(n.e=[])).push(e)}else return a$(e)}function a$(e){return Sa(jd|RV,e,!1)}function Ite(e){return o$(),Sa(Hd|RV,e,!0)}function Rte(e){wc.ensure();const t=Sa(Tl|rh,e,!0);return(r={})=>new Promise(n=>{r.outro?dl(t,()=>{Hi(t),n(void 0)}):(Hi(t),n(void 0))})}function Ns(e){return Sa(jd,e,!1)}function Fe(e,t){var r=Xr,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=Pl(()=>{e(),!n.ran&&(n.ran=!0,et(t))})}function _i(){var e=Xr;Pl(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Ii)!==0&&r.deps!==null&&ni(r,Vo),oh(r)&&bl(r),t.ran=!1}})}function kte(e){return Sa(EA|rh,e,!0)}function Pl(e,t=0){return Sa(Hd|t,e,!0)}function Wt(e,t=[],r=[],n=[]){JV(n,t,r,i=>{Sa(Hd,()=>e(...i.map(E)),!0)})}function Kd(e,t=0){var r=Sa($u|t,e,!0);return r}function u$(e,t=0){var r=Sa(SA|t,e,!0);return r}function Ms(e){return Sa(xa|rh,e,!0)}function c$(e){var t=e.teardown;if(t!==null){const r=Pc,n=Hr;cI(!0),$o(null);try{t.call(null)}finally{cI(r),$o(n)}}}function IA(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&Og(()=>{i.abort(nl)});var n=r.next;(r.f&Tl)!==0?r.parent=null:Hi(r,t),r=n}}function Mte(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&xa)===0&&Hi(t),t=r}}function Hi(e,t=!0){var r=!1;(t||(e.f&IV)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Lte(e.nodes.start,e.nodes.end),r=!0),IA(e,t&&!r),Ad(e,0),ni(e,Du);var n=e.nodes&&e.nodes.t;if(n!==null)for(const s of n)s.stop();c$(e);var i=e.parent;i!==null&&i.first!==null&&l$(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Lte(e,t){for(;e!==null;){var r=e===t?null:Xd(e);e.remove(),e=r}}function l$(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function dl(e,t,r=!0){var n=[];f$(e,n,!0);var i=()=>{r&&Hi(e),t&&t()},s=n.length;if(s>0){var o=()=>--s||i();for(var a of n)a.out(o)}else i()}function f$(e,t,r){if((e.f&so)===0){e.f^=so;var n=e.nodes&&e.nodes.t;if(n!==null)for(const a of n)(a.is_global||r)&&t.push(a);for(var i=e.first;i!==null;){var s=i.next,o=(i.f&_l)!==0||(i.f&xa)!==0&&(e.f&$u)!==0;f$(i,t,o?r:!1),i=s}}}function RA(e){h$(e,!0)}function h$(e,t){if((e.f&so)!==0){e.f^=so,(e.f&Ii)===0&&(ni(e,Yi),da(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&_l)!==0||(r.f&xa)!==0;h$(r,i?t:!1),r=n}var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||t)&&o.in()}}function d$(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var i=r===n?null:Xd(r);t.append(r),r=i}}let Uv=!1,Pc=!1;function cI(e){Pc=e}let Hr=null,pa=!1;function $o(e){Hr=e}let Qr=null;function Go(e){Qr=e}let Fo=null;function p$(e){Hr!==null&&(Fo===null?Fo=[e]:Fo.push(e))}let Rs=null,Zs=0,Ao=null;function Nte(e){Ao=e}let v$=1,sl=0,pl=sl;function lI(e){pl=e}function g$(){return++v$}function oh(e){var t=e.f;if((t&Yi)!==0)return!0;if(t&Xi&&(e.f&=-65537),(t&Vo)!==0){for(var r=e.deps,n=r.length,i=0;i<n;i++){var s=r[i];if(oh(s)&&ZV(s),s.wv>e.wv)return!0}(t&Do)!==0&&Ui===null&&ni(e,Ii)}return!1}function m$(e,t,r=!0){var n=e.reactions;if(n!==null&&!(Fo!==null&&Gf.call(Fo,e)))for(var i=0;i<n.length;i++){var s=n[i];(s.f&Xi)!==0?m$(s,t,!1):t===s&&(r?ni(s,Yi):(s.f&Ii)!==0&&ni(s,Vo),da(s))}}function y$(e){var b;var t=Rs,r=Zs,n=Ao,i=Hr,s=Fo,o=Xr,a=pa,u=pl,c=e.f;Rs=null,Zs=0,Ao=null,Hr=(c&(xa|Tl))===0?e:null,Fo=null,Uf(e.ctx),pa=!1,pl=++sl,e.ac!==null&&(Og(()=>{e.ac.abort(nl)}),e.ac=null);try{e.f|=E2;var l=e.fn,h=l();e.f|=yl;var v=e.deps,_=_r==null?void 0:_r.is_fork;if(Rs!==null){var m;if(_||Ad(e,Zs),v!==null&&Zs>0)for(v.length=Zs+Rs.length,m=0;m<Rs.length;m++)v[Zs+m]=Rs[m];else e.deps=v=Rs;if(OA()&&(e.f&Do)!==0)for(m=Zs;m<v.length;m++)((b=v[m]).reactions??(b.reactions=[])).push(e)}else!_&&v!==null&&Zs<v.length&&(Ad(e,Zs),v.length=Zs);if(sh()&&Ao!==null&&!pa&&v!==null&&(e.f&(Xi|Vo|Yi))===0)for(m=0;m<Ao.length;m++)m$(Ao[m],e);if(i!==null&&i!==e){if(sl++,i.deps!==null)for(let y=0;y<r;y+=1)i.deps[y].rv=sl;if(t!==null)for(const y of t)y.rv=sl;Ao!==null&&(n===null?n=Ao:n.push(...Ao))}return(e.f&bc)!==0&&(e.f^=bc),h}catch(y){return GV(y)}finally{e.f^=E2,Rs=t,Zs=r,Ao=n,Hr=i,Fo=s,Uf(o),pa=a,pl=u}}function qte(e,t){let r=t.reactions;if(r!==null){var n=Pee.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}if(r===null&&(t.f&Xi)!==0&&(Rs===null||!Gf.call(Rs,t))){var s=t;(s.f&Do)!==0&&(s.f^=Do,s.f&=-65537),TA(s),wte(s),Ad(s,0)}}function Ad(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)qte(e,r[n])}function bl(e){var t=e.f;if((t&Du)===0){ni(e,Ii);var r=Qr,n=Uv;Qr=e,Uv=!0;try{(t&($u|SA))!==0?Mte(e):IA(e),c$(e);var i=y$(e);e.teardown=typeof i=="function"?i:null,e.wv=v$;var s;x2&&rte&&(e.f&Yi)!==0&&e.deps}finally{Uv=n,Qr=r}}}async function wf(){await Promise.resolve(),ate()}function E(e){var t=e.f,r=(t&Xi)!==0;if(Hr!==null&&!pa){var n=Qr!==null&&(Qr.f&Du)!==0;if(!n&&(Fo===null||!Gf.call(Fo,e))){var i=Hr.deps;if((Hr.f&E2)!==0)e.rv<sl&&(e.rv=sl,Rs===null&&i!==null&&i[Zs]===e?Zs++:Rs===null?Rs=[e]:Rs.push(e));else{(Hr.deps??(Hr.deps=[])).push(e);var s=e.reactions;s===null?e.reactions=[Hr]:Gf.call(s,Hr)||s.push(Hr)}}}if(Pc&&xc.has(e))return xc.get(e);if(r){var o=e;if(Pc){var a=o.v;return((o.f&Ii)===0&&o.reactions!==null||b$(o))&&(a=PA(o)),xc.set(o,a),a}var u=(o.f&Do)===0&&!pa&&Hr!==null&&(Uv||(Hr.f&Do)!==0),c=(o.f&yl)===0;oh(o)&&(u&&(o.f|=Do),ZV(o)),u&&!c&&(QV(o),_$(o))}if(Ui!=null&&Ui.has(e))return Ui.get(e);if((e.f&bc)!==0)throw e.v;return e.v}function _$(e){if(e.f|=Do,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&Xi)!==0&&(t.f&Do)===0&&(QV(t),_$(t))}function b$(e){if(e.v===qi)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(xc.has(t)||(t.f&Xi)!==0&&b$(t))return!0;return!1}function et(e){var t=pa;try{return pa=!0,e()}finally{pa=t}}function St(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(tu in e)M2(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&tu in r&&M2(r)}}}function M2(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{M2(e[n],t)}catch{}const r=xA(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=CV(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}function Dte(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Fte=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Bte(e){return Fte.includes(e)}const zte={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Vte(e){return e=e.toLowerCase(),zte[e]??e}const $te=["touchstart","touchmove"];function Gte(e){return $te.includes(e)}const ol=Symbol("events"),w$=new Set,L2=new Set;function x$(e,t,r,n={}){function i(s){if(n.capture||N2.call(t,s),!s.cancelBubble)return Og(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ru(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function cr(e,t,r,n,i){var s={capture:n,passive:i},o=x$(e,t,r,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Yd(()=>{t.removeEventListener(e,o,s)})}function ri(e,t,r){(t[ol]??(t[ol]={}))[e]=r}function Gu(e){for(var t=0;t<e.length;t++)w$.add(e[t]);for(var r of L2)r(e)}let fI=null;function N2(e){var y,w;var t=this,r=t.ownerDocument,n=e.type,i=((y=e.composedPath)==null?void 0:y.call(e))||[],s=i[0]||e.target;fI=e;var o=0,a=fI===e&&e[ol];if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e[ol]=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(o=u)}if(s=i[o]||e.target,s!==t){PV(e,"currentTarget",{configurable:!0,get(){return s||r}});var l=Hr,h=Qr;$o(null),Go(null);try{for(var v,_=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var b=(w=s[ol])==null?void 0:w[n];b!=null&&(!s.disabled||e.target===s)&&b.call(s,e)}catch(T){v?_.push(T):v=T}if(e.cancelBubble||m===t||m===null)break;s=m}if(v){for(let T of _)queueMicrotask(()=>{throw T});throw v}}finally{e[ol]=t,delete e.currentTarget,$o(l),Go(h)}}}var AV;const Y0=((AV=globalThis==null?void 0:globalThis.window)==null?void 0:AV.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Ute(e){return(Y0==null?void 0:Y0.createHTML(e))??e}function S$(e){var t=Tte("template");return t.innerHTML=Ute(e.replaceAll("<!>","<!---->")),t.content}function Hf(e,t){var r=Qr;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function Bt(e,t){var r=(t&DV)!==0,n=(t&Zee)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=S$(s?e:"<!>"+e),r||(i=Iu(i)));var o=n||r$?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Iu(o),u=o.lastChild;Hf(a,u)}else Hf(o,o);return o}}function jte(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&DV)!==0,s=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var a=S$(s),u=Iu(a);if(i)for(o=document.createDocumentFragment();Iu(u);)o.appendChild(Iu(u));else o=Iu(u)}var c=o.cloneNode(!0);if(i){var l=Iu(c),h=c.lastChild;Hf(l,h)}else Hf(c,c);return c}}function mn(e,t){return jte(e,t,"svg")}function hI(e=""){{var t=Fu(e+"");return Hf(t,t),t}}function Ut(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Fu();return e.append(t,r),Hf(t,r),e}function Ne(e,t){e!==null&&e.before(t)}function is(e,t){var r=t==null?"":typeof t=="object"?`${t}`:t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=`${r}`)}function Hte(e,t){return Wte(e,t)}const gv=new Map;function Wte(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:o=!0,transformError:a}){Ete();var u=void 0,c=Rte(()=>{var l=r??t.appendChild(Fu());fte(l,{pending:()=>{}},_=>{er({});var m=Xr;s&&(m.c=s),i&&(n.$$events=i),u=e(_,n)||{},tr()},a);var h=new Set,v=_=>{for(var m=0;m<_.length;m++){var b=_[m];if(!h.has(b)){h.add(b);var y=Gte(b);for(const P of[t,document]){var w=gv.get(P);w===void 0&&(w=new Map,gv.set(P,w));var T=w.get(b);T===void 0?(P.addEventListener(b,N2,{passive:y}),w.set(b,1)):w.set(b,T+1)}}}};return v(Tg(w$)),L2.add(v),()=>{var y;for(var _ of h)for(const w of[t,document]){var m=gv.get(w),b=m.get(_);--b==0?(w.removeEventListener(_,N2),m.delete(_),m.size===0&&gv.delete(w)):m.set(_,b)}L2.delete(v),l!==r&&((y=l.parentNode)==null||y.removeChild(l))}});return Xte.set(u,c),u}let Xte=new WeakMap;var ua,Ja,eo,hl,Vd,$d,Sg;class kA{constructor(t,r=!0){sa(this,"anchor");Or(this,ua,new Map);Or(this,Ja,new Map);Or(this,eo,new Map);Or(this,hl,new Set);Or(this,Vd,!0);Or(this,$d,()=>{var t=_r;if(je(this,ua).has(t)){var r=je(this,ua).get(t),n=je(this,Ja).get(r);if(n)RA(n),je(this,hl).delete(r);else{var i=je(this,eo).get(r);i&&(je(this,Ja).set(r,i.effect),je(this,eo).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[s,o]of je(this,ua)){if(je(this,ua).delete(s),s===t)break;const a=je(this,eo).get(o);a&&(Hi(a.effect),je(this,eo).delete(o))}for(const[s,o]of je(this,Ja)){if(s===r||je(this,hl).has(s))continue;const a=()=>{if(Array.from(je(this,ua).values()).includes(s)){var c=document.createDocumentFragment();d$(o,c),c.append(Fu()),je(this,eo).set(s,{effect:o,fragment:c})}else Hi(o);je(this,hl).delete(s),je(this,Ja).delete(s)};je(this,Vd)||!n?(je(this,hl).add(s),dl(o,a,!1)):a()}}});Or(this,Sg,t=>{je(this,ua).delete(t);const r=Array.from(je(this,ua).values());for(const[n,i]of je(this,eo))r.includes(n)||(Hi(i.effect),je(this,eo).delete(n))});this.anchor=t,Ar(this,Vd,r)}ensure(t,r){var n=_r,i=s$();if(r&&!je(this,Ja).has(t)&&!je(this,eo).has(t))if(i){var s=document.createDocumentFragment(),o=Fu();s.append(o),je(this,eo).set(t,{effect:Ms(()=>r(o)),fragment:s})}else je(this,Ja).set(t,Ms(()=>r(this.anchor)));if(je(this,ua).set(n,t),i){for(const[a,u]of je(this,Ja))a===t?n.unskip_effect(u):n.skip_effect(u);for(const[a,u]of je(this,eo))a===t?n.unskip_effect(u.effect):n.skip_effect(u.effect);n.oncommit(je(this,$d)),n.ondiscard(je(this,Sg))}else je(this,$d).call(this)}}ua=new WeakMap,Ja=new WeakMap,eo=new WeakMap,hl=new WeakMap,Vd=new WeakMap,$d=new WeakMap,Sg=new WeakMap;function Kt(e,t,r=!1){var n=new kA(e),i=r?_l:0;function s(o,a){n.ensure(o,a)}Kd(()=>{var o=!1;t((a,u=0)=>{o=!0,s(u,a)}),o||s(!1,null)},i)}const Yte=Symbol("NaN");function Td(e,t,r){var n=new kA(e),i=!sh();Kd(()=>{var s=t();s!==s&&(s=Yte),i&&s!==null&&typeof s=="object"&&(s={}),n.ensure(s,r)})}function ku(e,t){return t}function Kte(e,t,r){for(var n=[],i=t.length,s,o=t.length,a=0;a<i;a++){let h=t[a];dl(h,()=>{if(s){if(s.pending.delete(h),s.done.add(h),s.pending.size===0){var v=e.outrogroups;q2(Tg(s.done)),v.delete(s),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=n.length===0&&r!==null;if(u){var c=r,l=c.parentNode;Ate(l),l.append(c),e.items.clear()}q2(t,!u)}else s={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function q2(e,t=!0){for(var r=0;r<e.length;r++)Hi(e[r],t)}var dI;function Bi(e,t,r,n,i,s=null){var o=e,a=new Map,u=(t&NV)!==0;if(u){var c=e;o=c.appendChild(Fu())}var l=null,h=Oi(()=>{var w=r();return Ud(w)?w:w==null?[]:Tg(w)}),v,_=!0;function m(){y.fallback=l,Jte(y,v,o,t,n),l!==null&&(v.length===0?(l.f&Ru)===0?RA(l):(l.f^=Ru,ad(l,null,o)):dl(l,()=>{l=null}))}var b=Kd(()=>{v=E(h);for(var w=v.length,T=new Set,P=_r,A=s$(),I=0;I<w;I+=1){var N=v[I],d=n(N,I),C=_?null:a.get(d);C?(C.v&&jf(C.v,N),C.i&&jf(C.i,I),A&&P.unskip_effect(C.e)):(C=Zte(a,_?o:dI??(dI=Fu()),N,d,I,i,t,r),_||(C.e.f|=Ru),a.set(d,C)),T.add(d)}if(w===0&&s&&!l&&(_?l=Ms(()=>s(o)):(l=Ms(()=>s(dI??(dI=Fu()))),l.f|=Ru)),w>T.size&&Lee(),!_)if(A){for(const[O,k]of a)T.has(O)||P.skip_effect(k.e);P.oncommit(m),P.ondiscard(()=>{})}else m();E(h)}),y={effect:b,items:a,outrogroups:null,fallback:l};_=!1}function Yh(e){for(;e!==null&&(e.f&xa)===0;)e=e.next;return e}function Jte(e,t,r,n,i){var k,F,z,j,J,oe,W,D,B;var s=(n&Hee)!==0,o=t.length,a=e.items,u=Yh(e.effect.first),c,l=null,h,v=[],_=[],m,b,y,w;if(s)for(w=0;w<o;w+=1)m=t[w],b=i(m,w),y=a.get(b).e,(y.f&Ru)===0&&((F=(k=y.nodes)==null?void 0:k.a)==null||F.measure(),(h??(h=new Set)).add(y));for(w=0;w<o;w+=1){if(m=t[w],b=i(m,w),y=a.get(b).e,e.outrogroups!==null)for(const U of e.outrogroups)U.pending.delete(y),U.done.delete(y);if((y.f&Ru)!==0)if(y.f^=Ru,y===u)ad(y,null,r);else{var T=l?l.next:u;y===e.effect.last&&(e.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),sc(e,l,y),sc(e,y,T),ad(y,T,r),l=y,v=[],_=[],u=Yh(l.next);continue}if((y.f&so)!==0&&(RA(y),s&&((j=(z=y.nodes)==null?void 0:z.a)==null||j.unfix(),(h??(h=new Set)).delete(y))),y!==u){if(c!==void 0&&c.has(y)){if(v.length<_.length){var P=_[0],A;l=P.prev;var I=v[0],N=v[v.length-1];for(A=0;A<v.length;A+=1)ad(v[A],P,r);for(A=0;A<_.length;A+=1)c.delete(_[A]);sc(e,I.prev,N.next),sc(e,l,I),sc(e,N,P),u=P,l=N,w-=1,v=[],_=[]}else c.delete(y),ad(y,u,r),sc(e,y.prev,y.next),sc(e,y,l===null?e.effect.first:l.next),sc(e,l,y),l=y;continue}for(v=[],_=[];u!==null&&u!==y;)(c??(c=new Set)).add(u),_.push(u),u=Yh(u.next);if(u===null)continue}(y.f&Ru)===0&&v.push(y),l=y,u=Yh(y.next)}if(e.outrogroups!==null){for(const U of e.outrogroups)U.pending.size===0&&(q2(Tg(U.done)),(J=e.outrogroups)==null||J.delete(U));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||c!==void 0){var d=[];if(c!==void 0)for(y of c)(y.f&so)===0&&d.push(y);for(;u!==null;)(u.f&so)===0&&u!==e.fallback&&d.push(u),u=Yh(u.next);var C=d.length;if(C>0){var O=(n&NV)!==0&&o===0?r:null;if(s){for(w=0;w<C;w+=1)(W=(oe=d[w].nodes)==null?void 0:oe.a)==null||W.measure();for(w=0;w<C;w+=1)(B=(D=d[w].nodes)==null?void 0:D.a)==null||B.fix()}Kte(e,d,O)}}s&&ru(()=>{var U,ie;if(h!==void 0)for(y of h)(ie=(U=y.nodes)==null?void 0:U.a)==null||ie.apply()})}function Zte(e,t,r,n,i,s,o,a){var u=(o&Uee)!==0?(o&Wee)===0?qe(r,!1,!1):Ac(r):null,c=(o&jee)!==0?Ac(i):null;return{v:u,i:c,e:Ms(()=>(s(t,u??r,c??i,a),()=>{e.delete(n)}))}}function ad(e,t,r){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,s=t&&(t.f&Ru)===0?t.nodes.start:r;n!==null;){var o=Xd(n);if(s.before(n),n===i)return;n=o}}function sc(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function br(e,t,r,n,i){var a;var s=(a=t.$$slots)==null?void 0:a[r],o=!1;s===!0&&(s=t[r==="default"?"children":r],o=!0),s===void 0?i!==null&&i(e):s(e,o?()=>n:n)}function MA(e){const t={};e.children&&(t.default=!0);for(const r in e.$$slots)t[r]=!0;return t}function el(e,t,r){var n=new kA(e);Kd(()=>{var i=t()??null;n.ensure(i,i&&(s=>r(s,i)))},_l)}function ro(e,t,r){Ns(()=>{var n=et(()=>t(e,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var i=!1,s={};Pl(()=>{var o=r();St(o),i&&AA(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function Qte(e,t){var r=void 0,n;u$(()=>{r!==(r=t())&&(n&&(Hi(n),n=null),r&&(n=Ms(()=>{Ns(()=>r(e))})))})}function E$(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=E$(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ere(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=E$(e))&&(n&&(n+=" "),n+=t);return n}function LA(e){return typeof e=="object"?ere(e):e??""}const pI=[...` 	
\r\fÂ \v\uFEFF`];function tre(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i of Object.keys(r))if(r[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var a=o+s;(o===0||pI.includes(n[o-1]))&&(a===n.length||pI.includes(n[a]))?n=(o===0?"":n.substring(0,o))+n.substring(a+1):o=a}}return n===""?null:n}function vI(e,t=!1){var r=t?" !important;":";",n="";for(var i of Object.keys(e)){var s=e[i];s!=null&&s!==""&&(n+=" "+i+": "+s+r)}return n}function K0(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function rre(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,u=[];n&&u.push(...Object.keys(n).map(K0)),i&&u.push(...Object.keys(i).map(K0));var c=0,l=-1;const b=e.length;for(var h=0;h<b;h++){var v=e[h];if(a?v==="/"&&e[h-1]==="*"&&(a=!1):s?s===v&&(s=!1):v==="/"&&e[h+1]==="*"?a=!0:v==='"'||v==="'"?s=v:v==="("?o++:v===")"&&o--,!a&&s===!1&&o===0){if(v===":"&&l===-1)l=h;else if(v===";"||h===b-1){if(l!==-1){var _=K0(e.substring(c,l).trim());if(!u.includes(_)){v!==";"&&h++;var m=e.substring(c,h).trim();r+=" "+m+";"}}c=h+1,l=-1}}}}return n&&(r+=vI(n)),i&&(r+=vI(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function xn(e,t,r,n,i,s){var o=e.__className;if(o!==r||o===void 0){var a=tre(r,n,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=r}else if(s&&i!==s)for(var u in s){var c=!!s[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return s}function J0(e,t={},r,n){for(var i in r){var s=r[i];t[i]!==s&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,s,n))}}function $r(e,t,r,n){var i=e.__style;if(i!==t){var s=rre(t,n);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}else n&&(Array.isArray(n)?(J0(e,r==null?void 0:r[0],n[0]),J0(e,r==null?void 0:r[1],n[1],"important")):J0(e,r,n));return n}function rg(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ud(t))return ete();for(var n of e.options)n.selected=t.includes(yd(n));return}for(n of e.options){var i=yd(n);if(Ste(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function A$(e){var t=new MutationObserver(()=>{rg(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Yd(()=>{t.disconnect()})}function gI(e,t,r=t){var n=new WeakSet,i=!0;CA(e,"change",s=>{var o=s?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(o),yd);else{var u=e.querySelector(o)??e.querySelector("option:not([disabled])");a=u&&yd(u)}r(a),_r!==null&&n.add(_r)}),Ns(()=>{var s=t();if(e===document.activeElement){var o=tg??_r;if(n.has(o))return}if(rg(e,s,i),i&&s===void 0){var a=e.querySelector(":checked");a!==null&&(s=yd(a),r(s))}e.__value=s,i=!1}),A$(e)}function yd(e){return"__value"in e?e.__value:e.value}const Kh=Symbol("class"),Jh=Symbol("style"),T$=Symbol("is custom element"),P$=Symbol("is html"),nre=MV?"option":"OPTION",ire=MV?"select":"SELECT";function sre(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ct(e,t,r,n){var i=C$(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[kee]=r),r==null?e.removeAttribute(t):typeof r!="string"&&O$(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ore(e,t,r,n,i=!1,s=!1){var o=C$(e),a=o[T$],u=!o[P$],c=t||{},l=e.nodeName===nre;for(var h in t)h in r||(r[h]=null);r.class?r.class=LA(r.class):r[Kh]&&(r.class=null),r[Jh]&&(r.style??(r.style=null));var v=O$(e);for(const P in r){let A=r[P];if(l&&P==="value"&&A==null){e.value=e.__value="",c[P]=A;continue}if(P==="class"){var _=e.namespaceURI==="http://www.w3.org/1999/xhtml";xn(e,_,A,n,t==null?void 0:t[Kh],r[Kh]),c[P]=A,c[Kh]=r[Kh];continue}if(P==="style"){$r(e,A,t==null?void 0:t[Jh],r[Jh]),c[P]=A,c[Jh]=r[Jh];continue}var m=c[P];if(!(A===m&&!(A===void 0&&e.hasAttribute(P)))){c[P]=A;var b=P[0]+P[1];if(b!=="$$")if(b==="on"){const I={},N="$$"+P;let d=P.slice(2);var y=Bte(d);if(Dte(d)&&(d=d.slice(0,-7),I.capture=!0),!y&&m){if(A!=null)continue;e.removeEventListener(d,c[N],I),c[N]=null}if(y)ri(d,e,A),Gu([d]);else if(A!=null){let C=function(O){c[P].call(this,O)};c[N]=x$(d,e,C,I)}}else if(P==="style")ct(e,P,A);else if(P==="autofocus")Pte(e,!!A);else if(!a&&(P==="__value"||P==="value"&&A!=null))e.value=e.__value=A;else if(P==="selected"&&l)sre(e,A);else{var w=P;u||(w=Vte(w));var T=w==="defaultValue"||w==="defaultChecked";if(A==null&&!a&&!T)if(o[P]=null,w==="value"||w==="checked"){let I=e;const N=t===void 0;if(w==="value"){let d=I.defaultValue;I.removeAttribute(w),I.defaultValue=d,I.value=I.__value=N?d:null}else{let d=I.defaultChecked;I.removeAttribute(w),I.defaultChecked=d,I.checked=N?d:!1}}else e.removeAttribute(P);else T||v.includes(w)&&(a||typeof A!="string")?(e[w]=A,w in o&&(o[w]=qi)):typeof A!="function"&&ct(e,w,A)}}}return c}function yi(e,t,r=[],n=[],i=[],s,o=!1,a=!1){JV(i,r,n,u=>{var c=void 0,l={},h=e.nodeName===ire,v=!1;if(u$(()=>{var m=t(...u.map(E)),b=ore(e,c,m,s,o,a);v&&h&&"value"in m&&rg(e,m.value);for(let w of Object.getOwnPropertySymbols(l))m[w]||Hi(l[w]);for(let w of Object.getOwnPropertySymbols(m)){var y=m[w];w.description===Qee&&(!c||y!==c[w])&&(l[w]&&Hi(l[w]),l[w]=Ms(()=>Qte(e,()=>y))),b[w]=y}c=b}),h){var _=e;Ns(()=>{rg(_,c.value,!0),A$(_)})}v=!0})}function C$(e){return e.__attributes??(e.__attributes={[T$]:e.nodeName.includes("-"),[P$]:e.namespaceURI===FV})}var mI=new Map;function O$(e){var t=e.getAttribute("is")||e.nodeName,r=mI.get(t);if(r)return r;mI.set(t,r=[]);for(var n,i=e,s=Element.prototype;s!==i;){n=CV(i);for(var o in n)n[o].set&&r.push(o);i=xA(i)}return r}function Ig(e,t,r=t){var n=new WeakSet;CA(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=Z0(e)?Q0(s):s,r(s),_r!==null&&n.add(_r),await wf(),s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd,u=e.value.length;if(e.value=s??"",a!==null){var c=e.value.length;o===a&&a===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(a,c))}}}),et(t)==null&&e.value&&(r(Z0(e)?Q0(e.value):e.value),_r!==null&&n.add(_r)),Pl(()=>{var i=t();if(e===document.activeElement){var s=tg??_r;if(n.has(s))return}Z0(e)&&i===Q0(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function yI(e,t,r=t){CA(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),et(t)==null&&r(e.checked),Pl(()=>{var n=t();e.checked=!!n})}function Z0(e){var t=e.type;return t==="number"||t==="range"}function Q0(e){return e===""?null:+e}function NA(e,t,r){var n=qu(e,t);n&&n.set&&(e[t]=r,Yd(()=>{e[t]=null}))}var vc,$f,Gd,Eg,I$;const Ag=class Ag{constructor(t){Or(this,Eg);Or(this,vc,new WeakMap);Or(this,$f);Or(this,Gd);Ar(this,Gd,t)}observe(t,r){var n=je(this,vc).get(t)||new Set;return n.add(r),je(this,vc).set(t,n),Ci(this,Eg,I$).call(this).observe(t,je(this,Gd)),()=>{var i=je(this,vc).get(t);i.delete(r),i.size===0&&(je(this,vc).delete(t),je(this,$f).unobserve(t))}}};vc=new WeakMap,$f=new WeakMap,Gd=new WeakMap,Eg=new WeakSet,I$=function(){return je(this,$f)??Ar(this,$f,new ResizeObserver(t=>{for(var r of t){Ag.entries.set(r.target,r);for(var n of je(this,vc).get(r.target)||[])n(r)}}))},sa(Ag,"entries",new WeakMap);let D2=Ag;var are=new D2({box:"border-box"});function _I(e,t,r){var n=are.observe(e,()=>r(e[t]));Ns(()=>(et(()=>r(e[t])),n))}function bI(e,t){return e===t||(e==null?void 0:e[tu])===t}function ao(e={},t,r,n){return Ns(()=>{var i,s;return Pl(()=>{i=s,s=[],et(()=>{e!==r(...s)&&(t(e,...s),i&&bI(r(...i),e)&&t(null,...i))})}),()=>{ru(()=>{s&&bI(r(...s),e)&&t(null,...s)})}}),e}function _d(e){return function(...t){var r=t[0];r.target===this&&(e==null||e.apply(this,t))}}function qo(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function io(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function Sn(e=!1){const t=Xr,r=t.l.u;if(!r)return;let n=()=>St(t.s);if(e){let i=0,s={};const o=Wd(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],a=!0);return a&&i++,i});n=()=>E(o)}r.b.length&&Ite(()=>{wI(t,n),eg(r.b)}),Tc(()=>{const i=et(()=>r.m.map(Iee));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&Tc(()=>{wI(t,n),eg(r.a)})}function wI(e,t){if(e.l.s)for(const r of e.l.s)E(r);t()}function bn(e,t){var s;var r=(s=e.$$events)==null?void 0:s[t.type],n=Ud(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function qA(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Fs;const n=et(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const hf=[];function Bu(e,t){return{subscribe:Ve(e,t).subscribe}}function Ve(e,t=Fs){let r=null;const n=new Set;function i(a){if(AA(e,a)&&(e=a,r)){const u=!hf.length;for(const c of n)c[1](),hf.push(c,e);if(u){for(let c=0;c<hf.length;c+=2)hf[c][0](hf[c+1]);hf.length=0}}}function s(a){i(a(e))}function o(a,u=Fs){const c=[a,u];return n.add(c),n.size===1&&(r=t(i,s)||Fs),a(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function oo(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Bu(r,(o,a)=>{let u=!1;const c=[];let l=0,h=Fs;const v=()=>{if(l)return;h();const m=t(n?c[0]:c,o,a);s?o(m):h=typeof m=="function"?m:Fs},_=i.map((m,b)=>qA(m,y=>{c[b]=y,l&=~(1<<b),u&&v()},()=>{l|=1<<b}));return u=!0,v(),function(){eg(_),h(),u=!1}})}function Qe(e){let t;return qA(e,r=>t=r)(),t}let mv=!1,F2=Symbol();function Be(e,t,r){const n=r[t]??(r[t]={store:null,source:qe(void 0),unsubscribe:Fs});if(n.store!==e&&!(F2 in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Fs;else{var i=!0;n.unsubscribe=qA(e,s=>{i?n.source.v=s:pe(n.source,s)}),i=!1}return e&&F2 in r?Qe(e):E(n.source)}function Mu(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=Fs),e}function Ot(e,t){return e.set(t),t}function nn(){const e={};function t(){Yd(()=>{for(var r in e)e[r].unsubscribe();PV(e,F2,{enumerable:!1,value:!0})})}return[e,t]}function wn(e,t,r){return e.set(r),t}function ure(e,t,r=1){return e.set(t+r),t}function cre(e,t,r=1){const n=t+r;return e.set(n),n}function lre(e){var t=mv;try{return mv=!1,[e(),mv]}finally{mv=t}}const fre={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ea(e,t,r){return new Proxy({props:e,exclude:t},fre)}const hre={get(e,t){if(!e.exclude.includes(t))return E(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){if(!(t in e.special)){var n=Qr;try{Go(e.parent_effect),e.special[t]=fe({get[t](){return e.props[t]}},t,qV)}finally{Go(n)}}return e.special[t](r),oI(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),oI(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function su(e,t){return new Proxy({props:e,exclude:t,special:{},version:Ac(0),parent_effect:Qr},hre)}const dre={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Xh(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];Xh(i)&&(i=i());const s=qu(i,t);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Xh(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=qu(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===tu||t===kV)return!1;for(let r of e.props)if(Xh(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(Xh(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function Wf(...e){return new Proxy({props:e},dre)}function fe(e,t,r,n){var P;var i=!ih||(r&Yee)!==0,s=(r&Kee)!==0,o=(r&Jee)!==0,a=n,u=!0,c=()=>(u&&(u=!1,a=o?et(n):n),a),l;if(s){var h=tu in e||kV in e;l=((P=qu(e,t))==null?void 0:P.set)??(h&&t in e?A=>e[t]=A:void 0)}var v,_=!1;s?[v,_]=lre(()=>e[t]):v=e[t],v===void 0&&n!==void 0&&(v=c(),l&&(i&&Bee(),l(v)));var m;if(i?m=()=>{var A=e[t];return A===void 0?c():(u=!0,A)}:m=()=>{var A=e[t];return A!==void 0&&(a=void 0),A===void 0?a:A},i&&(r&qV)===0)return m;if(l){var b=e.$$legacy;return function(A,I){return arguments.length>0?((!i||!I||b||_)&&l(I?m():A),A):m()}}var y=!1,w=((r&Xee)!==0?Wd:Oi)(()=>(y=!1,m()));s&&E(w);var T=Qr;return function(A,I){if(arguments.length>0){const N=I?E(w):i&&s?No(A):A;return pe(w,N),y=!0,a!==void 0&&(a=N),A}return Pc&&y||(T.f&Du)!==0?w.v:E(w)}}function Nn(e){Xr===null&&nh(),ih&&Xr.l!==null?FA(Xr).m.push(e):Tc(()=>{const t=et(e);if(typeof t=="function")return t})}function co(e){Xr===null&&nh(),Nn(()=>()=>et(e))}function pre(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Xf(){const e=Xr;return e===null&&nh(),(t,r,n)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const o=Ud(i)?i.slice():[i],a=pre(t,r,n);for(const u of o)u.call(e.x,a);return!a.defaultPrevented}return!0}}function vre(e){Xr===null&&nh(),Xr.l===null&&LV(),FA(Xr).b.push(e)}function DA(e){Xr===null&&nh(),Xr.l===null&&LV(),FA(Xr).a.push(e)}function FA(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const gre="5";var TV;typeof window<"u"&&((TV=window.__svelte??(window.__svelte={})).v??(TV.v=new Set)).add(gre);function mre(e,t){return{type:"Lamp",net:e,inputs:(t==null?void 0:t.inputs)||1,outputs:(t==null?void 0:t.outputs)||0,order:(t==null?void 0:t.order)||0,bits:(t==null?void 0:t.bits)||1,label:(t==null?void 0:t.label)||e,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}},...(t==null?void 0:t.rotation)&&{rotation:t.rotation}}}function yre(e,t){return{type:"Button",label:(t==null?void 0:t.label)||e,net:(t==null?void 0:t.net)||e,bits:(t==null?void 0:t.bits)||1,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}},...(t==null?void 0:t.rotation)&&{rotation:t.rotation}}}function oc(e,t,r){return{type:e,label:t,inputs:2,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y},...(r==null?void 0:r.rotation)&&{rotation:r.rotation}}}}function _re(e,t){var r,n;return{type:"Mux",label:e,bits:{in:((r=t==null?void 0:t.bits)==null?void 0:r.in)||1,sel:((n=t==null?void 0:t.bits)==null?void 0:n.sel)||1},...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}},...(t==null?void 0:t.rotation)&&{rotation:t.rotation}}}function bre(e,t,r,n,i){return{type:"Subcircuit",label:e,inputs:r,outputs:n,celltype:t,...(i==null?void 0:i.position)&&{position:{x:i.position.x,y:i.position.y},...(i==null?void 0:i.rotation)&&{rotation:i.rotation}}}}function wre(e,t,r){return{type:"TunnelInput",label:e,celltype:t,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y},...(r==null?void 0:r.rotation)&&{rotation:r.rotation}}}}function xre(e,t,r){return{type:"TunnelOutput",label:e,celltype:t,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y},...(r==null?void 0:r.rotation)&&{rotation:r.rotation}}}}function Sre(e,t){return{type:"Clock",label:(t==null?void 0:t.label)||e,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}},...(t==null?void 0:t.rotation)&&{rotation:t.rotation}}}const xI={Button:yre,Lamp:mre,And:(e,t)=>oc("And",e,...t?[t]:[]),Nand:(e,t)=>oc("Nand",e,...t?[t]:[]),Or:(e,t)=>oc("Or",e,...t?[t]:[]),Nor:(e,t)=>oc("Nor",e,...t?[t]:[]),Xor:(e,t)=>oc("Xor",e,...t?[t]:[]),Xnor:(e,t)=>oc("Xnor",e,...t?[t]:[]),Not:(e,t)=>oc("Not",e,...t?[t]:[]),Repeater:(e,t)=>oc("Repeater",e,...t?[t]:[]),Mux:_re,Subcircuit:(e,t)=>bre(e,t.celltype,t.inputs,t.outputs,...t?[t]:[]),TunnelInput:(e,t)=>wre(e,t.celltype,...t?[t]:[]),TunnelOutput:(e,t)=>xre(e,t.celltype,...t?[t]:[]),Clock:(e,t)=>Sre(e,...t?[t]:[])};function R$(){return{devices:{},connectors:{},subcircuits:[],wireManipulations:{}}}const Ere=()=>{const e=R$(),{subscribe:t,set:r,update:n}=Ve(e);return{subscribe:t,set:r,update:n,reset:()=>n(()=>({devices:{},connectors:{},subcircuits:[],wireManipulations:{}})),addConnection:(i,s)=>{const o=s.substring(s.indexOf("_")+1);n(a=>(i in a.connectors||(a.connectors[i]=[]),a.connectors[i]=[...a.connectors[i],[o,s]],console.log(a.connectors),a))},removeConnection:i=>{n(s=>{const o={};for(const a in s.connectors)o[a]=[...s.connectors[a].filter(([,u])=>u!==i)];return s.connectors=o,s})},addCircuitDevice:(i,s,o)=>{const a=`${i}_${s}`;let u=null,c=o==null?void 0:o.celltype;if(n(l=>{var v;const h=o===void 0?xI[i](a):xI[i](a,o);if(i=="Subcircuit"){l.subcircuits.indexOf(c)==-1&&l.subcircuits.push(c);let _=[[Qe(Lo)]];for(;_.length>0;){let m=_.pop();if(!m)continue;let b=m[m.length-1],y=(v=ln.getCircuit(b))==null?void 0:v.circuit;if(!y){console.warn("subcircut not defined!"),ln.createSubcomponent(b);continue}y.subcircuits.forEach(w=>{if(m.indexOf(w)!=-1)throw console.error("recursive subcir"),l.subcircuits.pop(),alert(`Recursive subcircuitry!
`+m.join(" -> ")),Error;_.push(m.concat([w]))})}}return l.devices[a]=h,u=l.devices,l}),u===null)throw new Error("devices null after setting devices");return u},removeCircuitDevice(i){let s=null;if(n(o=>{if(o.devices[i].type==="Subcircuit"){const a=o.devices[i];let u=!1;for(const c in o.devices){if(c===i)continue;let l=o.devices[c];if(l.type==="Subcircuit"&&l.celltype===a.celltype){u=!0;break}}u||o.subcircuits.splice(o.subcircuits.indexOf(a.celltype),1)}for(const a in o.connectors)a.endsWith(i)?delete o.connectors[a]:o.connectors[a]=o.connectors[a].filter(([u,c])=>u!==i);for(const a in o.wireManipulations)a.indexOf(i)!=-1&&delete o.wireManipulations[a];return delete o.devices[i],s=o.devices,o}),s===null)throw new Error("devices null after setting devices");return s}}},vn=Ere();function Are(e){let t;for(const r in Qe(vn).connectors)Qe(vn).connectors[r].forEach(([n,i])=>{i===e&&(t=r)});return t}function Tre(e){const t=JSON.parse(e);return t.nodes.length===0?(console.warn("save json exists but there are no nodes"),null):t.nodes.map(n=>{let[i,s]=n.id.substring(2).split("_");return{nodeType:i,uuid:s,position:n.position}})}function Pre(e){return localStorage.getItem(e)||(console.warn(`No saved "${e}" found in localStorage.`),null)}function Cre(){const t=Pre("state");if(!t)return console.warn("svelvet save unsucessful"),null;const r=Tre(t);if(r===null)return null;vn.update(n=>(r.forEach(({nodeType:i,uuid:s,position:o})=>{const a=`${i}_${s}`;a in n.devices&&(n.devices[a].position=o)}),n))}function Ore(){const e=document.querySelector(".save-button"),t=new MouseEvent("click",{bubbles:!0,cancelable:!0});e==null||e.dispatchEvent(t)}function Ire(){ln.updateSubcomponenUsages(Qe(Lo)),Ore(),Cre()}function Rre(e){if(!(e!=null&&e.devices)||!(e!=null&&e.connectors)||!(e!=null&&e.subcircuits)){let t="";throw e!=null&&e.devices||(t+="[Devices]"),e!=null&&e.devices||(t+="[Connectors]"),e!=null&&e.devices||(t+="[Subciruits]"),new Error("Parsed circuit object is missing required properties "+t)}else Object.keys(e.devices).length===0&&console.log("Loaded in a valid circuit with empty devices")}function kre(e){Rre(e),vn.set({devices:e.devices,connectors:e.connectors,subcircuits:e.subcircuits,wireManipulations:e.wireManipulations})}function SI(){return{circuit:R$(),zoom:1,translation:{x:0,y:0}}}function EI(e){let t=JSON.parse(e);const r=[...Object.keys(t.subcircuits).map(n=>t.subcircuits[n]),t.main_circuit];for(const n of r){if(n.circuit===void 0)throw Error("Save missing circuit entry!");n.zoom===void 0&&(n.zoom=1),n.translation===void 0&&(n.translation={x:0,y:0})}return t}function Mre(e){let t;e!=null?t=EI(e):t={main_circuit:{...SI(),display_name:"Main Circuit"},subcircuits:{}};let r=Ve(Object.keys(t.subcircuits));return{setMainCircuitName(n){t.main_circuit.display_name=n},getMainCircuitName(){return t.main_circuit.display_name},setCircuit(n,i){n===t.main_circuit.display_name?t.main_circuit={...i,display_name:t.main_circuit.display_name}:n in t.subcircuits&&(t.subcircuits[n]=i)},getCircuit(n){if(n===t.main_circuit.display_name)return t.main_circuit;const i=t.subcircuits[n];return i??null},createSubcomponent(n){Qe(r).indexOf(n)==-1&&(t.subcircuits[n]=SI(),r.update(i=>(i.push(n),i)))},deleteSubcomponent(n){const i=Qe(r).indexOf(n);i!=-1&&(delete t.subcircuits[n],r.update(s=>(s.splice(i,1),s)))},renameSubcomponent(n,i){const s=Qe(r).indexOf(n);s!=-1&&(this.updateSubcomponenUsages(n,i),t.subcircuits[i]=t.subcircuits[n],delete t.subcircuits[n],r.update(o=>(o[s]=i,o)))},getSubcomponents(){return r},updateSubcomponenUsages(n,i){if(n===t.main_circuit.display_name)return;let s=this.getCircuit(n);if(!s)return;let o=s.circuit,a=0,u=0;for(const l in o.devices)if(l in o.devices){let h=o.devices[l];h.type=="Button"&&a++,h.type=="Lamp"&&u++}let c=[this.getMainCircuitName(),...Qe(this.getSubcomponents())];for(let l of c){if(l==n)continue;let h=this.getCircuit(l);if(!h)continue;let v=h.circuit;const _=v.subcircuits.indexOf(n);if(_!=-1){i&&(v.subcircuits[_]=i);for(const m in v.devices)if(m in v.devices&&v.devices[m].type=="Subcircuit"&&v.devices[m].celltype==n){let b=v.devices[m];b.inputs=a,b.outputs=u,i&&(b.celltype=i),v.devices[m]=b;for(let y in v.connectors)if(y.split("_")[2]==b.label.split("_")[1]&&parseInt(y.split("_")[0][3])>u)delete v.connectors[y];else{let w=[];for(const[T,P]of v.connectors[y].entries())P[0]==b.label&&parseInt(P[1].split("_")[0][2])>a&&w.push(T);w.sort((T,P)=>P-T);for(let T of w)v.connectors[y].splice(T,1)}}}}},setSaveJson(n){t=EI(n),r.set(Object.keys(t.subcircuits))},getSaveJson(){return JSON.stringify(t)}}}nte();const AI=1,Lre=.9,Nre=.8,qre=.17,ey=.1,ty=.999,Dre=.9999,Fre=.99,Bre=/[\\/_+.#"@[({&]/,zre=/[\\/_+.#"@[({&]/g,Vre=/[\s-]/,k$=/[\s-]/g;function B2(e,t,r,n,i,s,o){if(s===t.length)return i===e.length?AI:Fre;const a=`${i},${s}`;if(o[a]!==void 0)return o[a];const u=n.charAt(s);let c=r.indexOf(u,i),l=0,h,v,_,m;for(;c>=0;)h=B2(e,t,r,n,c+1,s+1,o),h>l&&(c===i?h*=AI:Bre.test(e.charAt(c-1))?(h*=Nre,_=e.slice(i,c-1).match(zre),_&&i>0&&(h*=Math.pow(ty,_.length))):Vre.test(e.charAt(c-1))?(h*=Lre,m=e.slice(i,c-1).match(k$),m&&i>0&&(h*=Math.pow(ty,m.length))):(h*=qre,i>0&&(h*=Math.pow(ty,c-i))),e.charAt(c)!==t.charAt(s)&&(h*=Dre)),(h<ey&&r.charAt(c-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(c-1)!==n.charAt(s))&&(v=B2(e,t,r,n,c+1,s+2,o),v*ey>h&&(h=v*ey)),h>l&&(l=h),c=r.indexOf(u,c+1);return o[a]=l,l}function TI(e){return e.toLowerCase().replace(k$," ")}function $re(e,t){return B2(e,t,TI(e),TI(t),0,0,{})}const Gre=typeof document<"u";function Ure(e){return e instanceof HTMLElement}function BA(e){return e===void 0}let jre="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Hre=(e=21)=>{let t="",r=e|0;for(;r--;)t+=jre[Math.random()*64|0];return t};function va(){return Hre(10)}const Zh={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",END:"End",ENTER:"Enter",HOME:"Home"};function Wre(e,...t){const r={};for(const n of Object.keys(e))t.includes(n)||(r[n]=e[n]);return r}function M$(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=n)}return t}function Xre(e){const t={};return Object.keys(e).forEach(r=>{const n=r,i=e[n];t[n]=Ve(i)}),t}function Qc(e,t){const r=Yre(e,(n,i)=>({stores:n,onUnsubscribe:i})).subscribe(({stores:n,onUnsubscribe:i})=>{const s=t(n);s&&i(s)});return co(r),r}function Yre(e,t){let r=[];const n=a=>{r.push(a)},i=()=>{r.forEach(a=>a()),r=[]},s=oo(e,a=>(i(),t(a,n)));return co(i),{...s,subscribe:(...a)=>{const u=s.subscribe(...a);return()=>{u(),i()}}}}function Kre(e){return Object.keys(e).reduce((t,r)=>e[r]===void 0?t:t+`${r}:${e[r]};`,"")}const Jre={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function ng(e,t,r,n){const i=Array.isArray(t)?t:[t];return i.forEach(s=>e.addEventListener(s,r,n)),()=>{i.forEach(s=>e.removeEventListener(s,r,n))}}function L$(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const N$="Command",q$="CommandState",D$="CommandGroup",Zre="[data-cmdk-list-sizer]",Qh="[data-cmdk-group]",PI="[data-cmdk-group-items]",Qre="[data-cmdk-group-heading]",F$="[data-cmdk-item]",ry=`${F$}:not([aria-disabled="true"])`,ca="data-value",B$=(e,t)=>$re(e,t);function Rg(){return mr(N$)}function kg(){return mr(q$)}function ene(e){const t=va();return jr(D$,{id:t,alwaysRender:BA(e)?!1:e}),{id:t}}function tne(){const e=mr(D$);if(e)return e}function rne(e){const t={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return Ve(e?{...t,...M$(e)}:t)}const nne={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:B$,ids:{root:va(),list:va(),label:va(),input:va()}};function ine(e){const t={root:va(),list:va(),label:va(),input:va(),...e.ids},r={...nne,...M$(e)},n=e.state??rne({value:r.value}),i=Ve(new Set),s=Ve(new Map),o=Ve(new Map),a=Ve(null),u=Xre(Wre(r,"value","ids"));let c=Qe(i),l=Qe(s),h=Qe(o),v=Qe(u.shouldFilter),_=Qe(u.loop),m=Qe(u.label),b=Qe(u.filter);Qc(u.shouldFilter,D=>{v=D}),Qc(u.loop,D=>{_=D}),Qc(u.filter,D=>{b=D}),Qc(u.label,D=>{m=D}),Qc(i,D=>{c=D}),Qc(s,D=>{l=D}),Qc(o,D=>{h=D});const y={value:(D,B)=>{B!==h.get(D)&&(o.update(U=>(U.set(D,B),U)),n.update(U=>(U.filtered.items.set(D,I(B,U.search)),U)))},item:(D,B)=>(i.update(U=>U.add(D)),B&&s.update(U=>{var ie;return U.has(B)?(ie=U.get(B))==null||ie.add(D):U.set(B,new Set([D])),U}),n.update(U=>{const ie=T(U,v);if(!ie.value){const se=A();ie.value=se??""}return ie}),()=>{o.update(U=>(U.delete(D),U)),i.update(U=>(U.delete(D),U)),n.update(U=>{U.filtered.items.delete(D);const ie=C(),se=T(U);return(ie==null?void 0:ie.getAttribute("id"))===D&&(se.value=A()??""),U})}),group:D=>(s.update(B=>(B.has(D)||B.set(D,new Set),B)),()=>{o.update(B=>(B.delete(D),B)),s.update(B=>(B.delete(D),B))}),filter:()=>v,label:m||e["aria-label"]||"",commandEl:a,ids:t,updateState:w};function w(D,B,U){n.update(ie=>{var se;return Object.is(ie[D],B)||(ie[D]=B,D==="search"?(ie=T(ie,v),ie=P(ie,v),wf().then(()=>n.update(ee=>{var ce;return ee.value=A()??"",(ce=e.onValueChange)==null||ce.call(e,ee.value),ee}))):D==="value"&&((se=e.onValueChange)==null||se.call(e,ie.value),U||wf().then(()=>N()))),ie})}function T(D,B){const U=B??v;if(!D.search||!U)return D.filtered.count=c.size,D;D.filtered.groups=new Set;let ie=0;for(const se of c){const xe=h.get(se),me=I(xe,D.search);D.filtered.items.set(se,me),me>0&&ie++}for(const[se,xe]of l)for(const me of xe){const ee=D.filtered.items.get(me);ee&&ee>0&&D.filtered.groups.add(se)}return D.filtered.count=ie,D}function P(D,B){var ce;const U=B??v;if(!D.search||!U)return D;const ie=D.filtered.items,se=[];for(const re of D.filtered.groups){const te=l.get(re);if(!te)continue;let le=0;for(const Me of te){const Ge=ie.get(Me);BA(Ge)||(le=Math.max(Ge,le))}se.push([re,le])}const xe=document.getElementById(t.root);if(!xe)return D;const me=xe.querySelector(Zre),ee=d(xe).sort((re,te)=>{const le=re.getAttribute(ca)??"",Me=te.getAttribute(ca)??"";return(ie.get(le)??0)-(ie.get(Me)??0)});for(const re of ee){const te=re.closest(PI),le=re.closest(`${PI} > *`);if(te)if(re.parentElement===te)te.appendChild(re);else{if(!le)continue;te.appendChild(le)}else if(re.parentElement===me)me==null||me.appendChild(re);else{if(!le)continue;me==null||me.appendChild(le)}}se.sort((re,te)=>te[1]-re[1]);for(const re of se){const te=xe.querySelector(`${Qh}[${ca}="${re[0]}"]`);(ce=te==null?void 0:te.parentElement)==null||ce.appendChild(te)}return D}function A(){const D=d().find(U=>!U.ariaDisabled);if(!D)return;const B=D.getAttribute(ca);if(B)return B}function I(D,B){const U=D==null?void 0:D.toLowerCase().trim(),ie=b;return ie?U?ie(U,B):0:U?B$(U,B):0}function N(){var B;const D=C();D&&(((B=D.parentElement)==null?void 0:B.firstChild)===D&&wf().then(()=>{var U,ie;return(ie=(U=D.closest(Qh))==null?void 0:U.querySelector(Qre))==null?void 0:ie.scrollIntoView({block:"nearest"})}),wf().then(()=>D.scrollIntoView({block:"nearest"})))}function d(D){const B=D??document.getElementById(t.root);return B?Array.from(B.querySelectorAll(ry)).filter(U=>!!U):[]}function C(D){const B=document.getElementById(t.root);if(!B)return;const U=B.querySelector(`${ry}[aria-selected="true"]`);if(U)return U}function O(D){const B=document.getElementById(t.root);if(!B)return;const ie=d(B)[D];ie&&w("value",ie.getAttribute(ca)??"")}function k(D){const B=C(),U=d(),ie=U.findIndex(xe=>xe===B);let se=U[ie+D];_&&(ie+D<0?se=U[U.length-1]:ie+D===U.length?se=U[0]:se=U[ie+D]),se&&w("value",se.getAttribute(ca)??"")}function F(D){const B=C();let U=B==null?void 0:B.closest(Qh),ie;for(;U&&!ie;)U=D>0?sne(U,Qh):one(U,Qh),ie=U==null?void 0:U.querySelector(ry);ie?w("value",ie.getAttribute(ca)??""):k(D)}function z(){return O(d().length-1)}function j(D){D.preventDefault(),D.metaKey?z():D.altKey?F(1):k(1)}function J(D){D.preventDefault(),D.metaKey?O(0):D.altKey?F(-1):k(-1)}function oe(D){switch(D.key){case Zh.ARROW_DOWN:j(D);break;case Zh.ARROW_UP:J(D);break;case Zh.HOME:D.preventDefault(),O(0);break;case Zh.END:D.preventDefault(),z();break;case Zh.ENTER:{D.preventDefault();const B=C();B&&(B==null||B.click())}}}jr(N$,y);const W={subscribe:n.subscribe,update:n.update,set:n.set,updateState:w};return jr(q$,W),{state:W,handleRootKeydown:oe,commandEl:a,ids:t}}function sne(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function one(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}var ane=Bt("<div><label> </label> <!></div>");function une(e,t){const r=su(t,["children","$$slots","$$events","$$legacy"]),n=su(r,["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"]);er(t,!1);const i=()=>Be(I,"$stateStore",s),[s,o]=nn(),a=qe();let u=fe(t,"label",24,()=>{}),c=fe(t,"shouldFilter",8,!0),l=fe(t,"filter",24,()=>{}),h=fe(t,"value",28,()=>{}),v=fe(t,"onValueChange",24,()=>{}),_=fe(t,"loop",24,()=>{}),m=fe(t,"onKeydown",24,()=>{}),b=fe(t,"state",24,()=>{}),y=fe(t,"ids",24,()=>{}),w=fe(t,"asChild",8,!1);const{commandEl:T,handleRootKeydown:P,ids:A,state:I}=ine({label:u(),shouldFilter:c(),filter:l(),value:h(),onValueChange:W=>{var D;W!==h()&&(h(W),(D=v())==null||D(W))},loop:_(),state:b(),ids:y()});function N(W){W&&W!==i().value&&wn(I,et(i).value=W,et(i))}function d(W){return T.set(W),{destroy:L$(ng(W,"keydown",k))}}const C={role:"application",id:A.root,"data-cmdk-root":""},O={"data-cmdk-label":"",for:A.input,id:A.label,style:Kre(Jre)};function k(W){var D;(D=m())==null||D(W),!W.defaultPrevented&&P(W)}const F={action:d,attrs:C};Fe(()=>St(h()),()=>{N(h())}),Fe(()=>i(),()=>{pe(a,{root:F,label:{attrs:O},stateStore:I,state:i()})}),_i(),Sn();var z=Ut(),j=_t(z);{var J=W=>{var D=Ut(),B=_t(D);br(B,t,"default",Wf({},()=>E(a)),null),Ne(W,D)},oe=W=>{var D=ane();yi(D,()=>({...C,...n}));var B=gt(D);yi(B,()=>({...O}));var U=gt(B),ie=nt(B,2);br(ie,t,"default",Wf({},()=>E(a)),null),ro(D,se=>d==null?void 0:d(se)),Wt(()=>is(U,u()??"")),Ne(W,D)};Kt(j,W=>{w()?W(J):W(oe,!1)})}Ne(e,z),tr(),o()}function cne(e){return Object.keys(e).reduce((t,r)=>e[r]===void 0?t:t+`${r}:${e[r]};`,"")}cne({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function CI(e){function t(r){return r(e),()=>{}}return{subscribe:t}}const yv=e=>new Proxy(e,{get(t,r,n){return Reflect.get(t,r,n)},ownKeys(t){return Reflect.ownKeys(t).filter(r=>r!=="action")}}),OI=e=>typeof e=="function";lne("empty");function lne(e,t){const{stores:r,action:n,returned:i}={},s=(()=>{if(r&&i)return oo(r,a=>{const u=i(a);if(OI(u)){const c=(...l)=>yv({...u(...l),[`data-melt-${e}`]:"",action:n??df});return c.action=n??df,c}return yv({...u,[`data-melt-${e}`]:"",action:n??df})});{const a=i,u=a==null?void 0:a();if(OI(u)){const c=(...l)=>yv({...u(...l),[`data-melt-${e}`]:"",action:n??df});return c.action=n??df,CI(c)}return CI(yv({...u,[`data-melt-${e}`]:"",action:n??df}))}})(),o=n??(()=>{});return o.subscribe=s.subscribe,o}function df(){}function z$(e,t,r,n){const i=Array.isArray(t)?t:[t];return i.forEach(s=>e.addEventListener(s,r,n)),()=>{i.forEach(s=>e.removeEventListener(s,r,n))}}function fne(e,...t){const r={};for(const n of Object.keys(e))t.includes(n)||(r[n]=e[n]);return r}const hne={ESCAPE:"Escape"};Bu(void 0,e=>{function t(n){e(n),e(void 0)}return z$(document,"pointerup",t,{passive:!1,capture:!0})});Bu(void 0,e=>{function t(n){n&&n.key===hne.ESCAPE&&e(n),e(void 0)}return z$(document,"keydown",t,{passive:!1})});Bu(!1),Bu(!1),Bu(void 0);const dne={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...fne(dne,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});var pne=Bt("<div> </div>"),vne=Bt("<div><!> <div><!></div></div>");function gne(e,t){const r=su(t,["children","$$slots","$$events","$$legacy"]),n=su(r,["heading","value","alwaysRender","asChild"]);er(t,!1);const i=()=>Be(P,"$render",s),[s,o]=nn(),a=qe(),u=qe(),c=qe(),l=qe();let h=fe(t,"heading",24,()=>{}),v=fe(t,"value",12,""),_=fe(t,"alwaysRender",8,!1),m=fe(t,"asChild",8,!1);const{id:b}=ene(_()),y=Rg(),w=kg(),T=va(),P=oo(w,k=>_()||y.filter()===!1||!k.search?!0:k.filtered.groups.has(b));Nn(()=>y.group(b));function A(k){if(v()){y.value(b,v()),k.setAttribute(ca,v());return}h()?v(h().trim().toLowerCase()):k.textContent&&v(k.textContent.trim().toLowerCase()),y.value(b,v()),k.setAttribute(ca,v())}const I={"data-cmdk-group-heading":"","aria-hidden":!0,id:T};Fe(()=>(i(),St(v())),()=>{pe(a,{"data-cmdk-group":"",role:"presentation",hidden:i()?void 0:!0,"data-value":v()})}),Fe(()=>St(h()),()=>{pe(u,{"data-cmdk-group-items":"",role:"group","aria-labelledby":h()?T:void 0})}),Fe(()=>E(a),()=>{pe(c,{action:A,attrs:E(a)})}),Fe(()=>E(u),()=>{pe(l,{attrs:E(u)})}),_i(),Sn();var N=Ut(),d=_t(N);{var C=k=>{var F=Ut(),z=_t(F);br(z,t,"default",{get container(){return E(c)},get group(){return E(l)},get heading(){return{attrs:I}}},null),Ne(k,F)},O=k=>{var F=vne();yi(F,()=>({...E(a),...n}));var z=gt(F);{var j=W=>{var D=pne();yi(D,()=>({...I}));var B=gt(D);Wt(()=>is(B,h())),Ne(W,D)};Kt(z,W=>{h()&&W(j)})}var J=nt(z,2);yi(J,()=>({...E(u)}));var oe=gt(J);br(oe,t,"default",{get container(){return E(c)},get group(){return E(l)},get heading(){return{attrs:I}}},null),ro(F,W=>A==null?void 0:A(W)),Ne(k,F)};Kt(d,k=>{m()?k(C):k(O,!1)})}Ne(e,N),tr(),o()}function mne(e){return new Promise(t=>setTimeout(t,e))}var yne=Bt("<input/>");function _ne(e,t){const r=su(t,["children","$$slots","$$events","$$legacy"]),n=su(r,["autofocus","value","asChild","el"]);er(t,!1);const i=()=>Be(y,"$selectedItemId",s),[s,o]=nn(),{ids:a,commandEl:u}=Rg(),c=kg(),l=oo(c,C=>C.search),h=oo(c,C=>C.value);let v=fe(t,"autofocus",24,()=>{}),_=fe(t,"value",28,()=>Qe(l)),m=fe(t,"asChild",8,!1),b=fe(t,"el",28,()=>{});const y=oo([h,u],([C,O])=>{if(!Gre)return;const k=O==null?void 0:O.querySelector(`${F$}[${ca}="${CSS.escape(C)}"]`);return k==null?void 0:k.getAttribute("id")});function w(C){c.updateState("search",C)}function T(C){if(v()&&mne(10).then(()=>C.focus()),m())return{destroy:ng(C,"change",k=>{const F=k.currentTarget;c.updateState("search",F.value)})}}let P=qe();Fe(()=>St(_()),()=>{w(_())}),Fe(()=>i(),()=>{pe(P,{type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.list,"aria-labelledby":a.label,"aria-activedescendant":i()??void 0,id:a.input})}),_i(),Sn();var A=Ut(),I=_t(A);{var N=C=>{var O=Ut(),k=_t(O);br(k,t,"default",{action:T,get attrs(){return E(P)}},null),Ne(C,O)},d=C=>{var O=yne();yi(O,()=>({...E(P),...n}),void 0,void 0,void 0,void 0,!0),ao(O,k=>b(k),()=>b()),Ns(()=>Ig(O,_)),ro(O,k=>T==null?void 0:T(k)),Ns(()=>cr("keydown",O,function(k){bn.call(this,t,k)})),Ns(()=>cr("input",O,function(k){bn.call(this,t,k)})),Ns(()=>cr("focus",O,function(k){bn.call(this,t,k)})),Ns(()=>cr("blur",O,function(k){bn.call(this,t,k)})),Ns(()=>cr("change",O,function(k){bn.call(this,t,k)})),Ne(C,O)};Kt(I,C=>{m()?C(N):C(d,!1)})}Ne(e,A),tr(),o()}var bne=Bt("<div><!></div>");function ny(e,t){const r=su(t,["children","$$slots","$$events","$$legacy"]),n=su(r,["disabled","value","onSelect","alwaysRender","asChild","id"]);er(t,!1);const i=()=>Be(I,"$selected",o),s=()=>Be(P,"$render",o),[o,a]=nn(),u=qe();let c=fe(t,"disabled",8,!1),l=fe(t,"value",12,""),h=fe(t,"onSelect",24,()=>{}),v=fe(t,"alwaysRender",8,!1),_=fe(t,"asChild",8,!1),m=fe(t,"id",24,va);const b=tne(),y=Rg(),w=kg(),T=v()??(b==null?void 0:b.alwaysRender),P=oo(w,z=>{if(T||y.filter()===!1||!z.search)return!0;const j=z.filtered.items.get(m());return BA(j)?!1:j>0});let A=qe(!0);Nn(()=>(pe(A,!1),y.item(m(),b==null?void 0:b.id)));const I=oo(w,z=>z.value===l());function N(z){!l()&&z.textContent&&l(z.textContent.trim().toLowerCase()),y.value(m(),l()),z.setAttribute(ca,l());const j=L$(ng(z,"pointermove",()=>{c()||C()}),ng(z,"click",()=>{c()||d()}));return{destroy(){j()}}}function d(){var z;C(),(z=h())==null||z(l())}function C(){w.updateState("value",l(),!0)}Fe(()=>(St(c()),i(),St(l()),St(m())),()=>{pe(u,{"aria-disabled":c()?!0:void 0,"aria-selected":i()?!0:void 0,"data-disabled":c()?!0:void 0,"data-selected":i()?!0:void 0,"data-cmdk-item":"","data-value":l(),role:"option",id:m()})}),_i(),Sn();var O=Ut(),k=_t(O);{var F=z=>{var j=Ut(),J=_t(j);{var oe=D=>{var B=Ut(),U=_t(B);br(U,t,"default",{action:N,get attrs(){return E(u)}},null),Ne(D,B)},W=D=>{var B=bne();yi(B,()=>({...E(u),...n}));var U=gt(B);br(U,t,"default",{action:N,get attrs(){return E(u)}},null),ro(B,ie=>N==null?void 0:N(ie)),Ne(D,B)};Kt(J,D=>{_()?D(oe):D(W,!1)})}Ne(z,j)};Kt(k,z=>{(s()||E(A))&&z(F)})}Ne(e,O),tr(),a()}var wne=Bt("<div><div><!></div></div>");function iy(e,t){const r=su(t,["children","$$slots","$$events","$$legacy"]),n=su(r,["el","asChild"]);er(t,!1);const i=()=>Be(u,"$state",s),[s,o]=nn(),{ids:a}=Rg(),u=kg();let c=fe(t,"el",28,()=>{}),l=fe(t,"asChild",8,!1);function h(A){let I;const N=A.closest("[data-cmdk-list]");if(!Ure(N))return;const d=new ResizeObserver(()=>{I=requestAnimationFrame(()=>{const C=A.offsetHeight;N.style.setProperty("--cmdk-list-height",C.toFixed(1)+"px")})});return d.observe(A),{destroy(){cancelAnimationFrame(I),d.unobserve(A)}}}const v={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:a.list,"aria-labelledby":a.input},_={"data-cmdk-list-sizer":""},m={attrs:v},b={attrs:_,action:h};Sn();var y=Ut(),w=_t(y);{var T=A=>{var I=Ut(),N=_t(I);Td(N,()=>(i(),et(()=>i().search==="")),d=>{var C=Ut(),O=_t(C);br(O,t,"default",{get list(){return m},get sizer(){return b}},null),Ne(d,C)}),Ne(A,I)},P=A=>{var I=wne();yi(I,()=>({...v,...n}));var N=gt(I);yi(N,()=>({..._}));var d=gt(N);Td(d,()=>(i(),et(()=>i().search==="")),C=>{var O=Ut(),k=_t(O);br(k,t,"default",{},null),Ne(C,O)}),ro(N,C=>h==null?void 0:h(C)),ao(I,C=>c(C),()=>c()),Ne(A,I)};Kt(w,A=>{l()?A(T):A(P,!1)})}Ne(e,y),tr(),o()}const xne=""+new URL("And-vPRNnjli.webp",import.meta.url).href,Sne=""+new URL("Buffer-B3Uvsw-c.webp",import.meta.url).href,Ene=""+new URL("Or-D6Cm5Ena.webp",import.meta.url).href,Ane=""+new URL("Nor-CgPoSiw3.webp",import.meta.url).href,Tne=""+new URL("Xor-FwkKBC7T.webp",import.meta.url).href,Pne=""+new URL("Xnor-D92Hxo_S.webp",import.meta.url).href,Cne=""+new URL("Nand-CeX_LhnV.webp",import.meta.url).href,One=""+new URL("Not-CKmu_FXd.webp",import.meta.url).href,jv=""+new URL("outputIcon-C9FYfgf8.png",import.meta.url).href,Ine=""+new URL("inputIcon-6hipRhQs.png",import.meta.url).href,Rne=""+new URL("Clock-Bpt_Gfcs.png",import.meta.url).href,kne=""+new URL("Mux-Cct_jvwn.png",import.meta.url).href,Mne="modulepreload",Lne=function(e,t){return new URL(e,t).href},II={},ed=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){let o=function(l){return Promise.all(l.map(h=>Promise.resolve(h).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const a=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=o(r.map(l=>{if(l=Lne(l,n),l in II)return;II[l]=!0;const h=l.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(!!n)for(let b=a.length-1;b>=0;b--){const y=a[b];if(y.href===l&&(!h||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${v}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Mne,h||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((b,y)=>{m.addEventListener("load",b),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function Nne(e,t){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function qne(){const e=()=>Math.floor(Math.random()*256),t=e(),r=e(),n=e();return`rgb(${t},${r},${n})`}const Dne={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},RI={"-":"straight","~":"bezier"},V$={"(":")","[":"]","{":"}"},Fne=/[-=~]*>(?:\s*\|(.+?)\|)?/g,Bne=e=>{const t=e.split(`
`),r={parentNodes:[],nodeList:{}};for(const n of t){const{parentNodes:i,childNodes:s,edge:o}=zne(n);for(const a of i){r.nodeList[a.id]||r.parentNodes.push(a);for(const u of s){if(r.nodeList[a.id]){if(r.nodeList[u.id]&&r.nodeList[u.id].children.some(({node:c})=>c.id===a.id))throw new Error("Circular reference detected");r.nodeList[a.id].children.push({node:r.nodeList[u.id]||u,...o})}else a.children.push({node:r.nodeList[u.id]||u,...o}),r.nodeList[a.id]=a;r.nodeList[u.id]?r.nodeList[u.id].parents.push({node:r.nodeList[a.id]||a}):(u.parents.push({node:r.nodeList[a.id]||a}),r.nodeList[u.id]=u),r.parentNodes=r.parentNodes.filter(c=>c.id!==u.id)}}}return r},zne=e=>{const t=[],r=[],n=e.trim();let i="";const s=n.match(Fne);if(s)i=s[0];else throw new Error("Invalid edge");const[o,a]=n.split(i);for(const c of o.split("&"))t.push(kI(c));for(const c of a.split("&"))r.push(kI(c));const u=Vne(i);return{parentNodes:t,childNodes:r,edge:u}},kI=e=>{e=e.trim();const t=e[0],r=e.slice(1);let n="",i="";const s="Default",o={shape:""},a=[];for(let u=0;u<r.length;u++)if($ne(r[u]))a.push(r[u]);else if(V$[a[a.length-1]]===r[u]){i=Dne[a.join("")];break}else n+=r[u];return o.shape=i,o.content=n,{id:t,data:o,type:s,children:[],parents:[],depth:0,nesting:0}},Vne=e=>{e=e.trim();let t="";const[r,n]=e.split("|"),i=r[0];if(i in RI)t=RI[i];else throw new Error("Not a valid edge type");return n?{shape:t,content:n.trim(),length:Math.floor((r.trim().length-1)/2)}:{shape:t,length:Math.floor((r.trim().length-1)/2)}};function $ne(e){return e in V$}function Gne(){return Math.random().toString(36).substring(7)}function Une(e,t){const r=Math.sign(e.x).toString(),n=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${r}${n}${i}${s}`}function jne(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function MI(e,t){const r=t*(Math.PI/180),n=e.x*Math.cos(r)-e.y*Math.sin(r),i=e.x*Math.sin(r)+e.y*Math.cos(r);return{x:n,y:i}}const LI=(e,t,r,n)=>e+` l ${t} ${r} `+n,qs=Ve({x:0,y:0}),z2=Ve(0),Bo=Ve(!1),V2=Ve(!1),$$=Bu({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},r=s=>{if(s.touches.length===2){const o=Nne(s.touches[0],s.touches[1]);z2.set(o);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const o=s.touches[0].clientX,a=s.touches[0].clientY;e({x:o,y:a}),Bo.set(!0)}},n=s=>{r(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",r)},i=()=>{Bo.set(!1),z2.set(0),window.removeEventListener("touchmove",r)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",n,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",i)}});var Hne=Bt("<div><div></div></div>");function Wne(e,t){er(t,!1);const r=()=>Be(I,"$groups",s),n=()=>Be($$,"$cursorPositionRaw",s),i=()=>Be(E(a),"$selectedNodes",s),[s,o]=nn(),a=qe(),u=qe(),c=qe(),l=qe(),h=qe(),v=qe(),_=qe(),m=qe(),b=qe();let y=fe(t,"graph",8),w=fe(t,"anchor",8),T=fe(t,"adding",8,!1),P=fe(t,"creating",8,!1),A=fe(t,"color",8,null);const{groups:I}=y();let N,d=qe();Nn(C);function C(){N=Array.from(document.querySelectorAll(".svelvet-node")).map(W=>{const{top:D,left:B,width:U,height:ie}=W.getBoundingClientRect();return{id:W.id,top:D,left:B,width:U,height:ie}})}function O(){if(!N)return;const oe=N.reduce((W,D)=>{if(E(h)+w().left<=D.left&&E(l)+w().top<=D.top&&E(h)+w().left+Math.abs(E(c))>=D.left+D.width&&E(l)+w().top+Math.abs(E(u))>=D.top+D.height){const B=D.id,U=y().nodes.get(B);if(!U)return W;W.push(U)}return W},[]);T()?oe.forEach(W=>{i().add(W)}):Ot(E(a),new Set(oe)),Ot(E(a),i())}Fe(()=>r(),()=>{Mu(pe(a,r().selected.nodes),"$selectedNodes",s)}),Fe(()=>(n(),St(w())),()=>{pe(u,n().y-w().y-w().top)}),Fe(()=>(n(),St(w())),()=>{pe(c,n().x-w().x-w().left)}),Fe(()=>(St(w()),E(u)),()=>{pe(l,Math.min(w().y,w().y+E(u)))}),Fe(()=>(St(w()),E(c)),()=>{pe(h,Math.min(w().x,w().x+E(c)))}),Fe(()=>E(l),()=>{pe(v,`${E(l)}px`)}),Fe(()=>E(h),()=>{pe(_,`${E(h)}px`)}),Fe(()=>E(u),()=>{pe(m,`${Math.abs(E(u))}px`)}),Fe(()=>E(c),()=>{pe(b,`${Math.abs(E(c))}px`)}),Fe(()=>(E(c),E(u)),()=>{(E(c)||E(u))&&O()}),_i(),Sn();var k=Hne();let F,z;var j=gt(k);let J;ao(j,oe=>pe(d,oe),()=>E(d)),Wt(()=>{F=xn(k,1,"selection-border svelte-6l7s44",null,F,{creating:P()}),z=$r(k,"",z,{"--prop-selection-box-color":A(),height:E(m),width:E(b),top:E(v),left:E(_)}),J=xn(j,1,"selection-box svelte-6l7s44",null,J,{creating:P()})}),Ne(e,k),tr(),o()}const Xne=3,Yne=.1,Kne=10,Jne=100,Zne=50,Qne="#000",eie="#fff",tie="12px",rie=22,nie=1.4,iie=40,ud={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var sie=mn('<circle class="background-dot svelte-1yijewe"></circle>'),oie=mn('<line class="background-line svelte-1yijewe"></line><line class="background-line svelte-1yijewe"></line>',1),aie=mn('<circle class="background-dot svelte-1yijewe"></circle>'),uie=mn('<line class="background-line svelte-1yijewe"></line><line class="background-line svelte-1yijewe"></line>',1),cie=mn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),lie=mn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),fie=Bt('<div id="background-wrapper" class="svelte-1yijewe"><svg class="svelte-1yijewe"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function hie(e,t){er(t,!1);const r=()=>Be(N,"$translationStore",i),n=()=>Be(I,"$scaleStore",i),[i,s]=nn(),o=qe(),a=qe(),u=qe(),c=qe(),l=qe(),h=mr("graph");let v=fe(t,"style",8,"dots"),_=fe(t,"gridWidth",8,rie),m=fe(t,"dotSize",8,nie),b=fe(t,"bgColor",8,null),y=fe(t,"dotColor",8,null),w=fe(t,"opacityThreshold",8,3),T=fe(t,"majorGrid",8,0),P=fe(t,"minOpacity",8,.4);const A=h.transforms,I=A.scale,N=A.translation;let d=qe(),C=qe(),O=qe(),k=qe(),F=qe(),z=qe(1),j=qe(1);Fe(()=>r(),()=>{pe(o,r())}),Fe(()=>n(),()=>{pe(a,n())}),Fe(()=>(E(a),St(_())),()=>{pe(u,E(a)*_())}),Fe(()=>(E(a),St(m())),()=>{pe(c,E(a)*m()/2)}),Fe(()=>E(u),()=>{pe(l,E(u)/2)}),Fe(()=>(E(C),E(d),E(O),E(c),E(a),E(o),St(w()),St(P())),()=>{var te,le;pe(C,((te=E(d))==null?void 0:te.offsetWidth)||0),pe(O,((le=E(d))==null?void 0:le.offsetHeight)||0),pe(k,(E(C)+E(c))*(1-E(a))/2+E(o).x),pe(F,(E(O)+E(c))*(1-E(a))/2+E(o).y),pe(z,E(a)>w()?1:E(a)/w()+P()),pe(j,E(a)>w()/3?1:E(a)/(w()/3)+P())}),_i(),Sn();var J=fie();let oe;var W=gt(J),D=gt(W),B=gt(D),U=gt(B);{var ie=te=>{var le=sie();let Me;Wt(()=>{ct(le,"r",E(c)),ct(le,"cx",E(l)),ct(le,"cy",E(l)),Me=$r(le,"",Me,{"--calculated-dot-color":y()})}),Ne(te,le)},se=te=>{var le=oie(),Me=_t(le);ct(Me,"y1",0);let Ge;var Ie=nt(Me);ct(Ie,"x1",0);let Ue;Wt(()=>{ct(Me,"x1",E(l)),ct(Me,"x2",E(l)),ct(Me,"y2",E(u)),ct(Me,"stroke-width",E(c)),Ge=$r(Me,"",Ge,{"--calculated-dot-color":y()}),ct(Ie,"y1",E(l)),ct(Ie,"y2",E(l)),ct(Ie,"x2",E(u)),ct(Ie,"stroke-width",E(c)),Ue=$r(Ie,"",Ue,{"--calculated-dot-color":y()})}),Ne(te,le)};Kt(U,te=>{v()==="dots"?te(ie):v()==="lines"&&te(se,1)})}var xe=nt(B);{var me=te=>{var le=cie(),Me=gt(le);{var Ge=Ue=>{var We=aie();let q;Wt(()=>{ct(We,"r",E(c)*2),ct(We,"cx",E(l)),ct(We,"cy",E(l)),q=$r(We,"",q,{"--calculated-dot-color":y()})}),Ne(Ue,We)},Ie=Ue=>{var We=uie(),q=_t(We);ct(q,"y1",0);let $;var Y=nt(q);ct(Y,"x1",0);let K;Wt(()=>{ct(q,"x1",E(l)),ct(q,"x2",E(l)),ct(q,"y2",E(u)*T()),ct(q,"stroke-width",E(c)*1.2),$=$r(q,"",$,{"--calculated-dot-color":y()}),ct(Y,"y1",E(l)),ct(Y,"y2",E(l)),ct(Y,"x2",E(u)*T()),ct(Y,"stroke-width",E(c)*1.2),K=$r(Y,"",K,{"--calculated-dot-color":y()})}),Ne(Ue,We)};Kt(Me,Ue=>{v()==="dots"?Ue(Ge):v()==="lines"&&Ue(Ie,1)})}Wt(()=>{ct(le,"x",E(k)),ct(le,"y",E(F)),ct(le,"width",E(u)*T()),ct(le,"height",E(u)*T())}),Ne(te,le)};Kt(xe,te=>{T()>0&&te(me)})}var ee=nt(D),ce=nt(ee);{var re=te=>{var le=lie();Wt(()=>ct(le,"opacity",E(j))),Ne(te,le)};Kt(ce,te=>{T()>0&&te(re)})}ao(J,te=>pe(d,te),()=>E(d)),Wt(()=>{oe=$r(J,"",oe,{"--calculated-background-color":b()}),ct(B,"x",E(k)),ct(B,"y",E(F)),ct(B,"width",E(u)),ct(B,"height",E(u)),ct(ee,"opacity",E(z))}),Ne(e,J),tr(),s()}var die=Bt('<div role="button" tabindex="0" class="bounding-box-border svelte-12feptf"><div class="bounding-box svelte-12feptf"></div></div>');function pie(e,t){er(t,!1);const r=()=>Be(l(),"$position",o),n=()=>Be(_,"$width",o),i=()=>Be(m,"$height",o),s=()=>Be(h(),"$color",o),[o,a]=nn(),u=qe();let c=fe(t,"dimensions",8),l=fe(t,"position",8),h=fe(t,"color",8),v=fe(t,"groupName",8);const{width:_,height:m}=c(),b=Xf();function y(){b("groupClick",{groupName:v()})}Fe(()=>St(v()),()=>{pe(u,`${v()}-bounding-box`)}),_i(),Sn();var w=die();let T;var P=gt(w);let A;Wt(()=>{ct(w,"id",E(u)),T=$r(w,`border: solid 4px ${s()??""};`,T,{top:(r(),et(()=>`${r().y}px`)),left:(r(),et(()=>`${r().x}px`)),width:`${n()}px`,height:`${i()}px`}),A=$r(P,"",A,{"background-color":s()})}),cr("contextmenu",w,io(qo(function(I){bn.call(this,t,I)}))),cr("mousedown",w,io(qo(y))),Ne(e,w),tr(),a()}function vie(e,t){er(t,!1);const r=()=>Be(o,"$groupBoxes",n),[n,i]=nn(),o=mr("graph").groupBoxes;Sn();var a=Ut(),u=_t(a);Bi(u,1,()=>Array.from(r()),([c,l])=>c,(c,l)=>{var h=Rr(()=>_c(E(l),2));let v=()=>E(h)[0];pie(c,Wf(()=>E(h)[1],{get groupName(){return v()},$$events:{groupClick(m){bn.call(this,t,m)}}}))}),Ne(e,a),tr(),i()}function sy(e){const t=e.style.width,r=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const n=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=r,[n,i]}function G$(e,t,r,n,i){const s={x:0,y:0},o=n.x-i.left-i.width/2,a=n.y-i.top-i.height/2,u=(o-r.x)/e,c=(a-r.y)/e;return s.x=o-u*t,s.y=a-c*t,s}function U$(e,t,r){const n=t*r,i=e-n;return Number(Math.max(Yne,Math.min(Xne,i)).toFixed(9))}const Jd=(e,t,r,n,i,s,o)=>{const{clientX:a,clientY:u}=e,c=s,l=a-r,h=u-t,v=o.x,_=o.y,m=n*(1-s)/2,b=i*(1-s)/2,y=l-v-m,w=h-_-b,T=y/c,P=w/c;return{x:T,y:P}};function gie(e,t,r){const{top:n,left:i,width:s,height:o}=Qe(e),a=Qe(t.scale),u=Qe(t.translation);return{scaled:Jd({clientX:r.x,clientY:r.y},n,i,s,o,a,u),scale:a}}function mie(e,t,r){const{scale:n,translation:i}=r,s=Qe(n),o=Qe(i),a=t.x-e.x,u=t.y-e.y,c=o.x+a*s,l=o.y+u*s;return{x:c,y:l}}function yie(e,t){return e.x*t.x+e.y*t.y}function _ie(e,t,r){const n=[],i=t.x-e.x,s=t.y-e.y,o=wie(e.direction,t.direction),a=yie(e.direction,t.direction)===0,u=bie(e,t),c=Dn(e.direction,-1,-1),l=Dn(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},v=Dn(e.direction,i-r*e.direction.x*(a?1:o?0:2),s-r*e.direction.y*(a?1:o?0:2)),_=Dn(t.direction,i+r*t.direction.x*(a?1:o?0:2),s+r*t.direction.y*(a?1:o?0:2)),m=Math.sign(v.x)===-1||Math.sign(v.y)===-1,b=Math.sign(_.x)===1||Math.sign(_.y)===1,y=Math.abs(i),w=Math.abs(s),T=Dn(e.direction,r,r),P=Dn(l,r,r),A=Dn(t.direction,r,r),I=Dn(e.direction,y,w),N=Dn(l,y,w),d=Dn(e.direction,y/2,w/2),C=Dn(l,y/2,w/2),O=Dn(h,i,s),k=!u&&!b&&!m,F=e.x+T.x,z=e.y+T.y,j=t.x+A.x,J=t.y+A.y;if(m&&n.push(T),u&&!b&&!m)n.push(I),n.push(N);else if(o)m||n.push(Dn(e.direction,r+y,r+w)),n.push(O),b||n.push(Dn(l,r+y,r+w));else if(k)n.push(d),n.push(O),n.push(C);else if(m&&b)if(a){const oe=Math.abs(F-j),W=Math.abs(z-J);n.push(Dn(t.direction,y<r*2?t.direction.x*(i+t.direction.x*r):y+r,w<r*2?t.direction.y*(s+t.direction.y*r):w+r)),n.push(Dn(c,oe,W))}else{const oe=Math.abs(F-j),W=Math.abs(z-J);n.push(Dn(h,i/2,s/2)),n.push(Dn(t.direction,oe,W)),n.push(Dn(h,i/2,s/2))}else if(m){const oe=Math.abs(F-t.x),W=Math.abs(z-t.y);n.push(Dn(l,y<r*2?y-r:y/2,w<r*2?w-r:w/2)),n.push(Dn(c,oe,W)),n.push(Dn(l,Math.max(r,y/2),Math.max(r,w/2)))}else if(b){const oe=Math.abs(j-e.x),W=Math.abs(J-e.y);n.push(Dn(e.direction,Math.max(r,y/2),Math.max(r,w/2))),n.push(Dn(t.direction,oe,W)),n.push(Dn(e.direction,y<r*2?y-r:y/2,w<r*2?w-r:w/2))}return b&&n.push(P),n}function bie(e,t){const{x:r,y:n}=e.direction,{x:i,y:s}=t.direction,o=t.x-e.x,a=t.y-e.y;return r*s===i*n?!1:Math.sign(a)===Math.sign(n+s)!=(Math.sign(o)===Math.sign(r+i))}function Dn(e,t,r){return{x:e.x*t,y:e.y*r}}function wie(e,t){return e.x===t.x&&e.y===t.y}function xie(e,t){const{width:r,height:n}=e,{top:i,left:s,right:o,bottom:a}=t,u=o-s,c=a-i;if(!u||!c)return{x:null,y:null,scale:null};const l=s+u/2,h=i+c/2,v=Math.min(r/u,n/c)*.8,_=r/2,m=n/2,b=_-l,y=m-h;return{x:b*v,y:y*v,scale:v}}const _v=(e,t,r)=>Math.min(Math.abs(e||t)/2,r);function oy(e,t){const n=e.getTotalLength()*t;return e.getPointAtLength(n)}function ig(){const e=new Map,{subscribe:t,set:r,update:n}=Ve(e);return{subscribe:t,set:r,update:n,add:(s,o)=>(n(a=>(a.set(o,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let o=!1;return n(a=>(a.delete(s),o=!0,a)),o},count:()=>e.size}}function Sie(e){const{id:t,inputs:r,outputs:n,resizable:i,dimensions:s,editable:o,direction:a,zIndex:u,position:c,selectionColor:l,borderWidth:h,edge:v}=e,{bgColor:_,borderColor:m,rotation:b,borderRadius:y,connections:w,textColor:T,locked:P,group:A}=e,I=ig(),N=(O="self")=>{Qe(I).forEach(k=>{(O==="self"||Qe(k.direction)===O)&&k.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:Ve({x:(c==null?void 0:c.x)||0,y:(c==null?void 0:c.y)||0}),dimensions:{width:Ve((s==null?void 0:s.width)||0),height:Ve((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:Ve(A||null),locked:Ve(P||!1),inputs:Ve(r),outputs:Ve(n),recalculateAnchors:N,rotation:Ve(b||0),moving:Ve(!1),resizingWidth:Ve(!1),resizingHeight:Ve(!1),rotating:Ve(!1),editable:Ve(o||!1),resizable:Ve(i),anchors:I,zIndex:Ve(u||2),collapsed:Ve(!1),edge:v||null,borderRadius:Ve(y),bgColor:Ve(_||null),direction:Ve(a),label:Ve(e.label||""),borderColor:Ve(m||null),borderWidth:Ve(h),selectionColor:Ve(l||null),textColor:Ve(T||null),connections:Ve(w)}}function Eie(e,t){const r=[e,t].sort();return`${r[0]}+${r[1]}`}function NI(e,t,r){var a,u,c,l,h;const{source:n,target:i}=e,o={id:n.id&&i.id?Eie(n.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:Ve((r==null?void 0:r.type)||null),color:(r==null?void 0:r.color)||Ve(null),width:Ve((r==null?void 0:r.width)||0),animated:Ve((r==null?void 0:r.animated)||!1),rendered:Ve(!1),start:(r==null?void 0:r.start)||null,end:(r==null?void 0:r.end)||null};if(r!=null&&r.disconnect&&(o.disconnect=!0),r!=null&&r.label){const v={text:Ve(r==null?void 0:r.label.text),color:Ve(((a=r==null?void 0:r.label)==null?void 0:a.color)||Qne),textColor:Ve(((u=r==null?void 0:r.label)==null?void 0:u.textColor)||eie),fontSize:Ve(((c=r==null?void 0:r.label)==null?void 0:c.fontSize)||tie),dimensions:{width:Ve(((l=r==null?void 0:r.label.dimensions)==null?void 0:l.width)||Jne),height:Ve(((h=r==null?void 0:r.label.dimensions)==null?void 0:h.height)||Zne)},borderRadius:Ve((r==null?void 0:r.label.borderRadius)||Kne)};o.label=v}return o}function Aie(){const e=new Map,t=new Set,{subscribe:r,set:n,update:i}=Ve(e),s={subscribe:r,set:n,update:i,add:(o,a)=>{if(typeof a!="string"){const u=Array.from(a),c=u[0],l=u[1];if(c.connected.update(h=>h.add(l)),l.connected.update(h=>h.add(c)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(o,"connection"))}i(u=>(u.set(a,o),u))},getAll:()=>Array.from(e.values()),get:o=>e.get(o)||null,match:(...o)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:o.every(u=>u?a.has(u):!0)),fetch:(o,a)=>{const u=Array.from(e.keys()).filter(c=>c==="cursor"?!1:[o,a].every(l=>l?c.has(l):!0))[0];return e.get(u)||null},delete:o=>{if(typeof o!="string"){const u=Array.from(o),c=u[0],l=u[1];c.connected.update(h=>(h.delete(l),h)),l.connected.update(h=>(h.delete(c),h))}let a=!1;return i(u=>{const c=u.get(o);return c&&(u.delete(o),a=!0,typeof o!="string"&&t.forEach(l=>l(c,"disconnection"))),u}),a},onEdgeChange:o=>(t.add(o),()=>t.delete(o)),count:()=>e.size};return s}function Tie(e,t,r,n){return oo([e,t,r,n],([s,o,a,u])=>{const c={clientX:s.x,clientY:s.y};return Jd(c,o.top,o.left,o.width,o.height,u,a)})}function Pie(e,t,r,n){const i=Ve({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=Ve({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let o,a=Qe(t),u=Qe(r),c=Qe(n),l=a.width/u,h=a.height/u;function v(){const{x:m,y:b}=Jd({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,u,c),y=Qe(s);i.set({top:Math.min(y.top,b),left:Math.min(y.left,m),right:Math.max(y.right,m+l),bottom:Math.max(y.bottom,h+b)})}function _(m=!1){let b=1/0,y=1/0,w=-1/0,T=-1/0;for(const P of e.getAll()){console.log("dentro del for, este es e node:",P);const{x:A,y:I}=Qe(P.position),N=Qe(P.dimensions.width),d=Qe(P.dimensions.height);y=Math.min(y,A),b=Math.min(b,I),w=Math.max(w,A+N),T=Math.max(T,I+d)}s.set({top:b,left:y,right:w,bottom:T}),v(),m&&(o=requestAnimationFrame(()=>_(m)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),_()}),V2.subscribe(m=>{m&&_(m),m||cancelAnimationFrame(o)}),Bo.subscribe(m=>{m&&_(m),m||cancelAnimationFrame(o)}),t.subscribe(()=>{a=Qe(t),l=a.width/u,h=a.height/u,v()}),r.subscribe(()=>{u=Qe(r),l=a.width/u,h=a.height/u,v()}),n.subscribe(()=>{c=Qe(n),v()}),{graphBounds:i,nodeBounds:s}}function Cie(e,t,r){const{width:n,height:i,top:s,left:o}=e,a={clientX:n/2,clientY:i/2};return Jd(a,s,o,n,i,r,t)}function j$(e,t){const{zoom:r,editable:n,translation:i,direction:s,locked:o,edge:a,nodes:u}=t,c=Ve({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),l=Ve({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=Ve(r),v=Ve(!1),_=ig(),m=Pie(_,l,h,c),b=oo([l,c,h],([w,T,P])=>Cie(w,T,P));return{id:e,nodes:_,edges:Aie(),transforms:{translation:c,scale:h},maxZIndex:Ve(2),dimensions:l,bounds:m,center:b,mounted:v,direction:s||"LR",editable:n||!1,edge:a||null,editing:Ve(null),cursor:Tie($$,l,c,h),locked:Ve(o||!1),groups:Ve({selected:{parent:Ve(null),nodes:Ve(new Set)},hidden:{parent:Ve(null),nodes:Ve(new Set)}}),groupBoxes:ig(),activeGroup:Ve(null),initialNodePositions:Ve([])}}function Oie(e,t,r,n,i,s,o,a,u,c,l,h){const{width:v,height:_}=i,{x:m,y:b}=n,y=Qe(t.position),w=Ve({x:m-y.x+v/2,y:b-y.y+_/2}),T=oo([t.position,w],([O,k])=>({x:O.x+k.x,y:O.y+k.y})),P=e.transforms,A=e.dimensions,I=Ve(u||"self"),N=()=>{const O=document.getElementById(r),k=Qe(I),F=ud[k];if(!O)return;const{x:z,y:j,width:J,height:oe}=O.getBoundingClientRect(),W=Qe(w),D=Qe(T),{scaled:B,scale:U}=gie(A,P,{x:z,y:j}),ie=B.x-D.x,se=B.y-D.y;w.set({x:W.x+ie+J/U/2+F.x*J/U/2,y:W.y+se+oe/U/2+F.y*oe/U/2})},d=oo([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([O,k,F,z])=>O||k||F||z),C=oo([t.rotation],([O])=>O);return{id:r,position:T,offset:w,direction:I,dynamic:Ve(c||!1),type:a,edge:o,moving:d,mounted:Ve(!1),recalculatePosition:N,connected:Ve(new Set),store:s||null,inputKey:l||null,edgeColor:h||Ve(null),rotation:C,node:t}}const bd=ig(),bv={width:200,height:100};function Hv(e,t){return{x:Math.round(e/bv.width)*bv.width,y:Math.round(t/bv.height)*bv.height}}const wv=10;function H$(e){const t=Qe(e);return Array.from(t).map(n=>Qe(n.position))}function qI(e,t){console.log("moveNodes called");let r;const n=Qe(e.groups),i=Qe(e.activeGroup);if(console.log("Graph Groups:",n),console.log("Active Group:",i),!i)return;const s=n[i].nodes;if(!s)return;const o=Qe(e.initialNodePositions),{x:a,y:u}=Qe(qs),c=Array.from(Qe(s)),l=Qe(e.groupBoxes);console.log("Group Boxes:",l),c.forEach(v=>v.moving.set(!0)),h();function h(){const v=Qe(e.cursor);let _=v.x-a,m=v.y-u;if(t){const y=Hv(_,m);_=y.x,m=y.y}const b={x:_,y:m};c.forEach((y,w)=>{const{group:T,position:P}=y,A=o[w];let I;if(i==="selected"){const N=Qe(T);N&&(I=l.get(N))}if(!I)Iie(A,b,P);else{const N=Qe(y.dimensions.width),d=Qe(y.dimensions.height),C=X$(I,N,d);W$(A,b,P,C)}}),Qe(Bo)?r=requestAnimationFrame(h):cancelAnimationFrame(r)}}function Iie(e,t,r){r.set({x:e.x+t.x,y:e.y+t.y})}function W$(e,t,r,n){r.set({x:Math.min(Math.max(n.left,e.x+t.x),n.right),y:Math.min(Math.max(n.top,e.y+t.y),n.bottom)})}function X$(e,t,r){const{x:n,y:i}=Qe(e.position);return console.log("Group Box Position:",{x:n,y:i}),{left:n+wv,right:n+Qe(e.dimensions.width)-t-wv,top:i+wv,bottom:i+Qe(e.dimensions.height)-r-wv}}function DI(e=1,t,r,n=.1){const i=Qe(t),{width:s,height:o,top:a,left:u}=i,c=r.scale,l=Qe(r.translation),h=Qe(c),v=U$(h,e,n),_=G$(h,v,l,{x:s/2+u,y:o/2+a},i);c.set(v),r.translation.set(_)}var Rie=Bt('<div class="svelvet-graph-wrapper svelte-1xkcrm0" role="presentation"><!></div>');function kie(e,t){er(t,!1);const r=()=>Be(v,"$translation",s),n=()=>Be(h,"$scale",s),i=()=>Be(_,"$cursor",s),[s,o]=nn(),a=qe(),u=qe(),c=mr("graph"),l=c.transforms,h=l.scale,v=l.translation,_=c.cursor;let m=fe(t,"isMovable",8),b=qe(),y=qe(!1);function w(){Ot(v,mie(Qe(qs),i(),l)),pe(b,requestAnimationFrame(w))}Fe(()=>r(),()=>{pe(a,r())}),Fe(()=>(E(a),n()),()=>{pe(u,`translate(${E(a).x}px, ${E(a).y}px) scale(${n()})`)}),Fe(()=>(St(m()),E(y),E(b)),()=>{m()&&!E(y)?(pe(y,!0),pe(b,requestAnimationFrame(w))):(!m()||!E(y))&&(pe(y,!1),cancelAnimationFrame(E(b)))}),_i(),Sn();var T=Rie();let P;var A=gt(T);br(A,t,"default",{},null),Wt(()=>P=$r(T,"",P,{transform:E(u)})),cr("contextmenu",T,_d(io(function(I){bn.call(this,t,I)}))),cr("click",T,_d(io(function(I){bn.call(this,t,I)}))),cr("touchstart",T,_d(io(function(I){bn.call(this,t,I)}))),Ne(e,T),tr(),o()}var Mie=Bt("<!> <!>",1);function Lie(e,t){er(t,!1);const r=()=>Be(h,"$activeGroup",o),n=()=>Be(Bo,"$tracking",o),i=()=>Be(m,"$cursor",o),s=()=>Be(v,"$groups",o),[o,a]=nn();console.log("Componente GraphRenderer.svelte");const u=mr("graph"),c=mr("snapTo");let l=fe(t,"isMovable",8);const h=u.activeGroup,v=u.groups,_=u.initialNodePositions,m=u.cursor;function b(y){Ot(Bo,!0);const{groupName:w}=y.detail;Ot(h,w),Ot(qs,i()),Ot(_,H$(s()[w].nodes))}Fe(()=>(r(),n(),qI),()=>{r()&&n()&&qI(u,c)}),_i(),Sn(),kie(e,{get isMovable(){return l()},children:(y,w)=>{var T=Mie(),P=_t(T);br(P,t,"default",{},null);var A=nt(P,2);vie(A,{$$events:{groupClick:b}}),Ne(y,T)},$$slots:{default:!0}}),tr(),a()}const Nie=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],qie=new Set(Nie),FI=e=>qie.has(e);var Die=Bt('<input type="text"/>');function Fie(e,t){er(t,!1);const r=()=>Be(o,"$textStore",n),[n,i]=nn();let s=fe(t,"placeholder",8);const o=mr("textStore");Sn();var a=Die();Wt(()=>ct(a,"placeholder",s())),cr("keydown",a,qo(function(u){bn.call(this,t,u)})),cr("click",a,qo(function(u){bn.call(this,t,u)})),cr("mousedown",a,qo(function(u){bn.call(this,t,u)})),Ig(a,r,u=>Ot(o,u)),Ne(e,a),tr(),i()}const Bie=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var zie=Bt("<div><!></div>"),Vie=Bt('<div role="button"><!> <div class="anchors left svelte-18odr7b"><!></div> <div class="anchors right svelte-18odr7b"><!></div> <div class="anchors top svelte-18odr7b"><!></div> <div class="anchors bottom svelte-18odr7b"><!></div></div>');function $ie(e,t){er(t,!1);const r=()=>Be(re(),"$groups",k),n=()=>Be(we,"$position",k),i=()=>Be(Zr,"$selectedNodes",k),s=()=>Be(yr,"$hiddenNodes",k),o=()=>Be(Nr,"$resized",k),a=()=>Be(D,"$duplicate",k),u=()=>Be(le(),"$centerPoint",k),c=()=>Be(he,"$widthStore",k),l=()=>Be(Te,"$heightStore",k),h=()=>Be(qs,"$initialClickPosition",k),v=()=>Be(B,"$graphDOMElement",k),_=()=>Be(Oe,"$zIndex",k),m=()=>Be(te(),"$maxZIndex",k),b=()=>Be(ce(),"$locked",k),y=()=>Be(Le,"$nodeLock",k),w=()=>Be(ze,"$editable",k),T=()=>Be(Et,"$group",k),P=()=>Be(Jt,"$rotation",k),A=()=>Be(Ee,"$bgColor",k),I=()=>Be(dt,"$textColor",k),N=()=>Be(vt,"$borderColor",k),d=()=>Be(Ce,"$selectionColor",k),C=()=>Be(Je,"$borderRadius",k),O=()=>Be(ut,"$borderWidth",k),[k,F]=nn(),z=qe(),j=qe(),J=qe(),oe=qe(),W=mr("mounted"),D=mr("duplicate"),B=mr("graphDOMElement"),U=Xf();let ie=fe(t,"node",8),se=fe(t,"isDefault",8),xe=fe(t,"useDefaults",8),me=fe(t,"center",8),ee=fe(t,"nodeStore",8),ce=fe(t,"locked",8),re=fe(t,"groups",8),te=fe(t,"maxZIndex",8),le=fe(t,"centerPoint",8),Me=fe(t,"cursor",8),Ge=fe(t,"initialNodePositions",8),Ie=fe(t,"activeGroup",8),Ue=fe(t,"editing",8),We=fe(t,"dimensionsProvided",8,!1),q=fe(t,"title",8);const $=Ve(0),Y=Ve(null),K=ie().id,we=ie().position,he=ie().dimensions.width,Te=ie().dimensions.height,Ce=ie().selectionColor,ze=ie().editable,Le=ie().locked,Oe=ie().zIndex,Ee=ie().bgColor,Je=ie().borderRadius,dt=ie().textColor,Et=ie().group,vt=ie().borderColor,ut=ie().borderWidth,Jt=ie().rotation,{selected:pr,hidden:sr}=r(),yr=sr.nodes,Zr=pr.nodes,Nr=Ve(!1);jr("node",ie()),jr("anchorsMounted",$),jr("resized",Nr),jr("nodeConnectEvent",Y),Nn(()=>{if(me()){const jt={x:u().x-c()/2,y:u().y-l()/2};ie().position.set(jt),Bo.set(!0),Bo.set(!1)}W.update(jt=>jt+1)}),co(()=>{E(j)&&(i().delete(ie()),Ot(Zr,i())),W.update(jt=>jt-1)});function Pn(){E(j)?(ie()&&i().delete(ie()),Ot(Zr,i())):(ie()&&i().add(ie()),Ot(Zr,i()))}function lr(jt){Ot(qs,Qe(Me())),v().focus(),_()!==m()&&_()!==1/0&&Ot(Oe,cre(te(),m()));const Yr=jt.target;if(!Bie.has(Yr.tagName)&&(jt.preventDefault(),U("nodeClicked",{node:ie(),e:jt}),!(b()||y()))){if("touches"in jt){if(jt.touches&&jt.touches.length>1)return}else jt.button===2&&w()&&Ot(Ue(),ie());Ot(Bo,!0),qr(jt)}}function qr(jt){let Yr,Kn,Bn=!1;const Un=T();Un&&(Yr=r()[Un],Kn=Qe(Yr.parent),Bn=Kn===ie()),Bn?Ot(Ie(),Un):Ot(Ie(),"selected"),!jt.shiftKey&&E(j)?Ot(Ie(),"selected"):(!jt.shiftKey&&!E(j)&&!jt.shiftKey&&(i().clear(),Ot(Zr,i())),Pn()),Ot(Ge(),H$(r().selected.nodes))}function In(){ee().delete(K)}function Rn(jt){const Yr=Qe(Me()),Kn=Yr.x-h().x,Bn=Yr.y-h().y;Math.abs(Kn)+Math.abs(Bn)<4&&U("nodeReleased",{e:jt,node:ie()}),Ot(Y,jt)}function Cn(jt){return jt.addEventListener("mousedown",lr),jt.addEventListener("touchstart",lr),{destroy(){jt.removeEventListener("mousedown",lr),jt.removeEventListener("touchstart",lr)}}}Fe(()=>n(),()=>{pe(z,n())}),Fe(()=>(i(),St(ie())),()=>{pe(j,i().has(ie()))}),Fe(()=>(s(),St(ie())),()=>{pe(J,s().has(ie()))}),Fe(()=>(St(We()),o()),()=>{pe(oe,We()||o())}),Fe(()=>(E(j),a(),St(ie())),()=>{E(j)&&a()&&U("duplicate",ie())}),_i(),Sn();var ii=Ut(),di=_t(ii);{var Ht=jt=>{var Yr=Vie();let Kn;ct(Yr,"tabindex",0);let Bn;var Un=gt(Yr);{var cn=xt=>{var at=zie();$r(at,"",{},{width:"fit-content",height:"fit-content"});var Ze=gt(at);br(Ze,t,"default",{grabHandle:Cn,get selected(){return E(j)},destroy:In},null),_I(at,"clientHeight",bt=>Ot(Te,bt)),_I(at,"clientWidth",bt=>Ot(he,bt)),Ne(xt,at)},xi=xt=>{var at=Ut(),Ze=_t(at);br(Ze,t,"default",{grabHandle:Cn,get selected(){return E(j)},destroy:In},null),Ne(xt,at)};Kt(Un,xt=>{E(oe)?xt(xi,!1):xt(cn)})}var hn=nt(Un,2),Jn=gt(hn);br(Jn,t,"anchorWest",{},null);var jn=nt(hn,2),pi=gt(jn);br(pi,t,"anchorEast",{},null);var Dr=nt(jn,2),ht=gt(Dr);br(ht,t,"anchorNorth",{},null);var Tt=nt(Dr,2),Ft=gt(Tt);br(Ft,t,"anchorSouth",{},null),Ns(()=>cr("contextmenu",Yr,io(qo(function(xt){bn.call(this,t,xt)})))),Ns(()=>cr("mouseup",Yr,Rn)),ro(Yr,xt=>Cn==null?void 0:Cn(xt)),Wt(()=>{ct(Yr,"id",K),Kn=xn(Yr,1,"svelvet-node svelte-18odr7b",null,Kn,{selected:E(j),locked:b()||y()}),ct(Yr,"title",q()),Bn=$r(Yr,"",Bn,{top:`${E(z),et(()=>E(z).y)??""}px`,left:`${E(z),et(()=>E(z).x)??""}px`,"z-index":_(),width:E(oe)?c()+"px":"fit-content",height:E(oe)?l()+"px":"fit-content",transform:`rotate(${P()??""}deg)`,"--prop-background-color":A()||(se()||xe()?null:"transparent"),"--prop-text-color":I(),"--prop-border-color":N(),"--prop-selection-color":d(),"--prop-border-radius":C()?`${C()}px`:se()||xe()?null:"0px","--prop-border-width":O()||(se()||xe()?null:"0px")}),ct(hn,"id",(St(ie()),et(()=>`anchors-west-${ie().id}`))),ct(jn,"id",(St(ie()),et(()=>`anchors-east-${ie().id}`))),ct(Dr,"id",(St(ie()),et(()=>`anchors-north-${ie().id}`))),ct(Tt,"id",(St(ie()),et(()=>`anchors-south-${ie().id}`)))}),Ne(jt,Yr)};Kt(di,jt=>{E(J)||jt(Ht)})}Ne(e,ii),tr(),F()}var Gie=Bt("<div></div> <div></div>",1),Uie=Bt("<div></div> <div></div>",1),jie=Bt("<div></div>"),Hie=Bt("<div></div>"),Wie=Bt("<!> <!> <!> <!>",1);function Xie(e,t){er(t,!1);const r=()=>Be(D,"$position",h),n=()=>Be(me,"$widthStore",h),i=()=>Be(xe,"$heightStore",h),s=()=>Be(U,"$resizingHeight",h),o=()=>Be(ee,"$cursor",h),a=()=>Be(se,"$nodeRotation",h),u=()=>Be(B,"$resizingWidth",h),c=()=>Be(ie,"$rotating",h),l=()=>Be(qs,"$initialClickPosition",h),[h,v]=nn(),_=qe(),m=qe(),b=qe(),y=mr("graph"),w=mr("node"),T=mr("resized");let P=fe(t,"width",8,!1),A=fe(t,"height",8,!1),I=fe(t,"rotation",8,!1),N=fe(t,"minHeight",12,0),d=fe(t,"minWidth",12,0),C,O=P(),k=P(),F=A(),z=A(),j=P()&&A(),J=0,oe=0,W=qe(Qe(w.position));const D=w.position,B=w.resizingWidth,U=w.resizingHeight,ie=w.rotating,se=w.rotation,xe=w.dimensions.height,me=w.dimensions.width,ee=y.cursor;let ce=qe(),re=qe(),te=qe(1);Nn(()=>{try{C=document.querySelector(`#${w.id}`),C&&(Ce=>{var ze=_c(Ce,2);d(ze[0]),N(ze[1])})(sy(C))}catch(Ce){console.error(Ce)}});function le(Ce,ze){const Le=Ee=>{Ee.stopPropagation(),Ee.preventDefault(),ze.left||ze.top?pe(te,-1):pe(te,1),V2.set(!0),Ot(qs,Qe(ee)),pe(ce,n()),pe(re,i()),pe(W,r()),ze.both?Ot(B,!0):Ot(B,!1),Ot(B,ze.left||ze.right||ze.both||!1),Ot(U,ze.top||ze.bottom||ze.both||!1),C&&(Je=>{var dt=_c(Je,2);d(dt[0]),N(dt[1])})(sy(C)),window.addEventListener("mouseup",Oe)},Oe=()=>{Ot(B,!1),Ot(U,!1),V2.set(!1),window.removeEventListener("mouseup",Oe)};return Ce.addEventListener("mousedown",Le),{destroy(){Ce.removeEventListener("mousedown",Le)}}}function Me(Ce){const ze=Oe=>{Oe.stopPropagation(),Oe.preventDefault(),J=a(),Ot(qs,Qe(ee));const Ee=l().x-E(b).x,Je=l().y-E(b).y;oe=Math.atan2(Je,Ee),Ot(ie,!0),window.addEventListener("mouseup",Le)},Le=()=>{Ot(ie,!1),window.removeEventListener("mouseup",Le)};return Ce.addEventListener("mousedown",ze),{destroy(){Ce.removeEventListener("mousedown",ze)}}}function Ge(){const Ce=Qe(ee),ze=Ce.x-E(b).x,Le=Ce.y-E(b).y,Oe=Math.atan2(Le,ze),Ee=oe-Oe;return J-Ie(Ee)}function Ie(Ce){return Ce*(180/Math.PI)}vre(()=>{C&&(Ce=>{var ze=_c(Ce,2);d(ze[0]),N(ze[1])})(sy(C)),n()<d()&&T.set(!1),i()<N()&&T.set(!1)}),Fe(()=>(c(),o()),()=>{c()&&(o(),Ot(se,Ge()))}),Fe(()=>(s(),o(),St(N()),E(re),E(te),E(W),a()),()=>{if(s()){const Ce=Qe(qs),ze=o(),Le=Math.max(N(),E(re)+(ze.y-Ce.y)*E(te));Le>N()?(T.set(!0),Ot(xe,Le)):T.set(!1),E(te)===-1&&Ot(D,{x:E(W).x,y:E(W).y+ze.y-Ce.y}),a()!==0&&w.position.update(Oe=>({y:E(W).y-(Le-E(re))/2,x:Oe.x}))}}),Fe(()=>(u(),o(),St(d()),E(ce),E(te),E(W),a()),()=>{if(u()){const Ce=Qe(qs),ze=o(),Le=Math.max(d(),E(ce)+(ze.x-Ce.x)*E(te));Le>d()?(T.set(!0),Ot(me,Le)):T.set(!1),E(te)===-1&&Ot(D,{x:E(W).x+ze.x-Ce.x,y:E(W).y}),a()!==0&&w.position.update(Oe=>({x:E(W).x-(Le-E(ce))/2,y:Oe.y}))}}),Fe(()=>r(),()=>{pe(_,r().x)}),Fe(()=>r(),()=>{pe(m,r().y)}),Fe(()=>(E(_),n(),E(m),i()),()=>{pe(b,{x:E(_)+n()/2,y:E(m)+i()/2})}),_i(),Sn();var Ue=Wie(),We=_t(Ue);{var q=Ce=>{var ze=Gie(),Le=_t(ze);let Oe;ro(Le,(dt,Et)=>le==null?void 0:le(dt,Et),()=>({left:O}));var Ee=nt(Le,2);let Je;ro(Ee,(dt,Et)=>le==null?void 0:le(dt,Et),()=>({right:k})),Wt(()=>{Oe=xn(Le,1,"left svelte-5wklws",null,Oe,{width:P()}),Je=xn(Ee,1,"right svelte-5wklws",null,Je,{width:P()})}),Ne(Ce,ze)};Kt(We,Ce=>{P()&&Ce(q)})}var $=nt(We,2);{var Y=Ce=>{var ze=Uie(),Le=_t(ze);let Oe;ro(Le,(dt,Et)=>le==null?void 0:le(dt,Et),()=>({top:F}));var Ee=nt(Le,2);let Je;ro(Ee,(dt,Et)=>le==null?void 0:le(dt,Et),()=>({bottom:z})),Wt(()=>{Oe=xn(Le,1,"top svelte-5wklws",null,Oe,{height:A()}),Je=xn(Ee,1,"bottom svelte-5wklws",null,Je,{height:A()})}),Ne(Ce,ze)};Kt($,Ce=>{A()&&Ce(Y)})}var K=nt($,2);{var we=Ce=>{var ze=jie();let Le;ro(ze,(Oe,Ee)=>le==null?void 0:le(Oe,Ee),()=>({both:j})),Wt(()=>Le=xn(ze,1,"svelte-5wklws",null,Le,{both:j})),Ne(Ce,ze)};Kt(K,Ce=>{j&&Ce(we)})}var he=nt(K,2);{var Te=Ce=>{var ze=Hie();let Le;ro(ze,Oe=>Me==null?void 0:Me(Oe)),Wt(()=>Le=xn(ze,1,"svelte-5wklws",null,Le,{rotation:I()})),Ne(Ce,ze)};Kt(he,Ce=>{I()&&Ce(Te)})}Ne(e,Ue),tr(),v()}var Yie=Bt("<div></div>");function Kie(e,t){let r=fe(t,"output",8),n=fe(t,"input",8),i=fe(t,"connecting",8),s=fe(t,"connected",8),o=fe(t,"hovering",8),a=fe(t,"bgColor",8);var u=Yie();let c,l;Wt(()=>{c=xn(u,1,"svelvet-anchor svelte-17b6oid",null,c,{output:r(),input:n(),connected:s(),connecting:i(),hovering:o()}),l=$r(u,"",l,{"--prop-anchor-color":a()})}),Ne(e,u)}let ay;function Jie(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const r=document.querySelector(".svelvet-graph-wrapper");r&&r.appendChild(e)}var Zie=mn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-17x1tg8" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-17x1tg8" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),Qie=mn("<path></path>"),ese=Bt('<div class="default-label svelte-17x1tg8"> </div>'),tse=mn('<foreignObject width="100%" height="100%" class="svelte-17x1tg8"><span class="label-wrapper svelte-17x1tg8"><!></span></foreignObject>'),rse=mn('<svg class="edges-wrapper svelte-17x1tg8"><!><path role="presentation"></path><!><!></svg>');function $2(e,t){var sn,zn;const r=MA(t);er(t,!1);const n=()=>Be(jt,"$sourceDynamic",A),i=()=>Be(Yr,"$targetDynamic",A),s=()=>Be(E(d),"$edgeColor",A),o=()=>Be(E(C),"$edgeLabel",A),a=()=>Be(di,"$sourcePositionStore",A),u=()=>Be(Ht,"$targetPositionStore",A),c=()=>Be(Un,"$sourceNodePositionStore",A),l=()=>Be(cn,"$targetNodePositionStore",A),h=()=>Be(In,"$sourceDirection",A),v=()=>Be(Cn,"$sourceRotation",A),_=()=>Be(Rn,"$targetDirection",A),m=()=>Be(ii,"$targetRotation",A),b=()=>Be(xi,"$edgeType",A),y=()=>Be(Kn,"$sourceMoving",A),w=()=>Be(Bn,"$targetMoving",A),T=()=>Be(E(We),"$sourceZIndex",A),P=()=>Be(E(q),"$targetZIndex",A),[A,I]=nn(),N=qe(),d=qe(),C=qe(),O=qe(),k=qe(),F=qe(),z=qe(),j=qe(),J=qe(),oe=qe(),W=qe(),D=qe(),B=qe(),U=qe(),ie=qe(),se=qe(),xe=qe(),me=qe(),ee=qe(),ce=qe(),re=qe(),te=qe(),le=qe(),Me=qe(),Ge=qe(),Ie=qe(),Ue=qe(),We=qe(),q=qe(),$=qe(),Y=qe(),K=mr("edgeStore"),we=mr("edgeStyle"),he=mr("endStyles"),Te=mr("raiseEdgesOnSelect"),Ce=mr("edgesAboveNode");let ze=fe(t,"edge",24,()=>mr("edge")),Le=fe(t,"straight",8,we==="straight"),Oe=fe(t,"step",8,we==="step"),Ee=fe(t,"start",24,()=>he[0]),Je=fe(t,"end",24,()=>he[1]),dt=fe(t,"animate",8,!1),Et=fe(t,"label",8,""),vt=fe(t,"enableHover",8,!1),ut=fe(t,"edgeClick",8,null),Jt=fe(t,"labelPosition",8,.5),pr=fe(t,"width",8,null),sr=fe(t,"color",8,null),yr=fe(t,"labelColor",8,null),Zr=fe(t,"textColor",8,null),Nr=fe(t,"cornerRadius",8,8),Pn=fe(t,"targetColor",8,null);const lr=ze().source,qr=ze().target,In=lr.direction,Rn=qr.direction,Cn=lr.rotation,ii=qr.rotation,di=lr.position,Ht=qr.position,jt=lr.dynamic,Yr=qr.dynamic,Kn=lr.moving,Bn=qr.moving,Un=(sn=lr.node)==null?void 0:sn.position,cn=(zn=qr.node)==null?void 0:zn.position,xi=ze().type,hn=ze().id;let Jn=qe(),jn=qe(),pi=qe({x:0,y:0}),Dr=qe(!1),ht=qe(!1),Tt=qe(!1),Ft=qe(!1),xt=qe(!1),at=qe();ze().rendered.set(!0),Nn(()=>{setTimeout(()=>{E(jn)&&pe(pi,oy(E(jn),Jt()))},0),Jie(E(at))}),DA(()=>{E(jn)&&pe(pi,oy(E(jn),Jt()))}),co(()=>{E(at).remove(),cancelAnimationFrame(ay)});function Ze(){E(Dr)&&(E(jn)&&pe(pi,oy(E(jn),Jt())),ay=requestAnimationFrame(Ze))}function bt(){if(lr.id===null||qr.id===null)return;const en=K.match(lr,qr);K.delete(en[0]),lr==null||lr.connected.update(Br=>(qr&&Br.delete(qr),Br)),qr==null||qr.connected.update(Br=>(lr&&Br.delete(lr),Br))}Fe(()=>(n(),i()),()=>{pe(N,n()||i())}),Fe(()=>{},()=>{Mu(pe(d,(lr==null?void 0:lr.edgeColor)||(qr==null?void 0:qr.edgeColor)||null),"$edgeColor",A)}),Fe(()=>St(ze()),()=>{var en;Mu(pe(C,(en=ze().label)==null?void 0:en.text),"$edgeLabel",A)}),Fe(()=>(St(sr()),s()),()=>{pe(O,sr()||s()||null)}),Fe(()=>(St(Et()),o()),()=>{pe(k,Et()||o()||"")}),Fe(()=>E(k),()=>{pe(F,E(k)||r.label)}),Fe(()=>a(),()=>{pe(z,a())}),Fe(()=>u(),()=>{pe(j,u())}),Fe(()=>c(),()=>{pe(J,c())}),Fe(()=>l(),()=>{pe(oe,l())}),Fe(()=>E(z),()=>{pe(W,E(z).x)}),Fe(()=>E(z),()=>{pe(D,E(z).y)}),Fe(()=>E(j),()=>{pe(B,E(j).x)}),Fe(()=>E(j),()=>{pe(U,E(j).y)}),Fe(()=>(E(B),E(W)),()=>{pe(ie,E(B)-E(W))}),Fe(()=>(E(U),E(D)),()=>{pe(se,E(U)-E(D))}),Fe(()=>E(ie),()=>{pe(xe,Math.abs(E(ie)))}),Fe(()=>E(se),()=>{pe(me,Math.abs(E(se)))}),Fe(()=>E(xe),()=>{pe(ee,Math.max(30,Math.min(600,E(xe)/2)))}),Fe(()=>E(me),()=>{pe(ce,Math.max(30,Math.min(600,E(me)/2)))}),Fe(()=>(E(N),E(oe),E(J),E(Tt),E(Ft),Qe),()=>{if(E(N)&&lr.node&&qr.node){const en=E(oe).x-E(J).x,Br=E(oe).y-E(J).y;pe(Tt,Br>0),pe(Ft,en>0);let or,vi;if(E(Tt)){const On=Qe(lr.node.dimensions.height),rr=E(J).y+On;or=E(oe).y-rr}else{const On=Qe(qr.node.dimensions.height),rr=E(oe).y+On;or=E(J).y-rr}if(E(Ft)){const On=Qe(lr.node.dimensions.width),rr=E(J).x+On;vi=E(oe).x-rr}else{const On=Qe(qr.node.dimensions.width),rr=E(oe).x+On;vi=E(J).x-rr}pe(ht,or>vi)}}),Fe(()=>(E(N),E(ht),E(Tt),E(Ft),n(),i()),()=>{if(E(N)){let en,Br;E(ht)?(en=E(Tt)?"south":"north",Br=E(Tt)?"north":"south"):(en=E(Ft)?"east":"west",Br=E(Ft)?"west":"east"),n()&&Ot(In,en),i()&&Ot(Rn,Br)}}),Fe(()=>(h(),v()),()=>{pe(re,MI(ud[h()],v()||0))}),Fe(()=>(_(),m()),()=>{pe(te,MI(ud[_()],m()||0))}),Fe(()=>(E(W),E(re),E(ee)),()=>{pe(le,E(W)+E(re).x*E(ee))}),Fe(()=>(E(D),E(re),E(ce)),()=>{pe(Me,E(D)+E(re).y*E(ce))}),Fe(()=>(E(B),E(te),E(ee)),()=>{pe(Ge,E(B)+E(te).x*E(ee))}),Fe(()=>(E(U),E(te),E(ce)),()=>{pe(Ie,E(U)+E(te).y*E(ce))}),Fe(()=>(E(le),E(Me),E(Ge),E(Ie)),()=>{pe(Ue,`C ${E(le)}, ${E(Me)} ${E(Ge)}, ${E(Ie)}`)}),Fe(()=>(St(Oe()),b(),E(W),E(D),St(Le()),E(Ue),E(B),E(U)),()=>{(!Oe()||hn==="cursor"||b()==="bezier")&&pe(Jn,`M ${E(W)}, ${E(D)} ${Le()?"":E(Ue)} ${E(B)}, ${E(U)}`)}),Fe(()=>(E(F),E(Dr),y(),w()),()=>{E(F)&&!E(Dr)&&(y()||w()||hn==="cursor")?(pe(Dr,!0),Ze()):E(Dr)&&!y()&&!w()&&hn!=="cursor"&&(pe(Dr,!1),cancelAnimationFrame(ay))}),Fe(()=>(St(Oe()),b(),E(W),E(D),h(),E(B),E(U),_(),St(Nr()),LI),()=>{if(Oe()&&hn!=="cursor"&&!(b()&&b()==="bezier")){const en={x:E(W),y:E(D),direction:ud[h()]},Br={x:E(B),y:E(U),direction:ud[_()]},or=_ie(en,Br,iie),vi=(On,rr,Si)=>{if(rr<or.length-1){const Vi=Une(On,or[rr+1]);return jne(Si,Vi)}return""};pe(Jn,or.reduce((On,rr,Si)=>{const Vi=Math.sign(rr.x),tt=Math.sign(rr.y);let mt=rr.x,It=rr.y,yt="";if(Nr()){const At=or[Si+1]||{x:0,y:0},ar=or[Si-1]||{x:0,y:0},tn=_v(rr.x,At.x,Nr()),kn=_v(At.y,rr.y,Nr()),zr=_v(ar.x,rr.x,Nr()),qn=_v(ar.y,rr.y,Nr()),Mn=Math.min(zr,qn),Qn=Math.min(tn,kn);rr.x?mt=rr.x-(Qn+Mn)*Vi:It=rr.y-(Qn+Mn)*tt,yt=vi(rr,Si,Qn)}return LI(On,mt,It,yt)},`M ${E(W)}, ${E(D)}`))}}),Fe(()=>{},()=>{Mu(pe(We,lr.node.zIndex||0),"$sourceZIndex",A)}),Fe(()=>{},()=>{Mu(pe(q,qr.node.zIndex||0),"$targetZIndex",A)}),Fe(()=>(T(),P()),()=>{pe($,Math.max(T(),P()))}),Fe(()=>(E($),T(),P()),()=>{pe(Y,Ce==="all"?1e5:Ce?E($):Te===!0?E($)-1:Te==="source"?T()-1:Te==="target"?P()-1:0)}),_i();var Dt={destroy:bt};Sn();var Nt=Ut(),Fr=_t(Nt);{var Zn=en=>{var Br=rse();let or;var vi=gt(Br);{var On=yt=>{var At=Zie(),ar=gt(At),tn=gt(ar);let kn;var zr=nt(ar),qn=gt(zr);let Mn;Wt(()=>{ct(ar,"id",hn+"-end-arrow"),kn=$r(tn,"",kn,{"--prop-edge-color":E(O)}),ct(zr,"id",hn+"-start-arrow"),Mn=$r(qn,"",Mn,{"--prop-edge-color":E(O)})}),Ne(yt,At)};Kt(vi,yt=>{(Ee()||Je())&&yt(On)})}var rr=nt(vi);let Si,Vi;ao(rr,yt=>pe(jn,yt),()=>E(jn));var tt=nt(rr);br(tt,t,"default",{get path(){return E(Jn)},destroy:bt,get hovering(){return E(xt)}},yt=>{var At=Qie();let ar,tn;Wt(()=>{ct(At,"id",hn),ar=xn(At,0,"edge svelte-17x1tg8",null,ar,{animate:dt()}),ct(At,"d",E(Jn)),ct(At,"marker-end",Je()==="arrow"?`url(#${hn+"-end-arrow"})`:""),ct(At,"marker-start",Ee()==="arrow"?`url(#${hn+"-start-arrow"})`:""),tn=$r(At,"",tn,{"--prop-edge-color":E(O),"--prop-stroke-width":pr()?pr()+"px":null})}),Ne(yt,At)});var mt=nt(tt);{var It=yt=>{var At=tse(),ar=gt(At),tn=gt(ar);br(tn,t,"label",{destroy:bt,get hovering(){return E(xt)}},kn=>{var zr=ese();let qn;var Mn=gt(zr);Wt(()=>{qn=$r(zr,"",qn,{"--prop-label-color":yr(),"--prop-label-text-color":Zr()}),is(Mn,E(k))}),Ne(kn,zr)}),Wt(()=>{ct(At,"x",(E(pi),et(()=>E(pi).x))),ct(At,"y",(E(pi),et(()=>E(pi).y)))}),Ne(yt,At)};Kt(mt,yt=>{E(F)&&yt(It)})}ao(Br,yt=>pe(at,yt),()=>E(at)),Wt(()=>{or=$r(Br,"",or,{"z-index":E(Y)}),ct(rr,"id",hn+"-target"),Si=xn(rr,0,"target svelte-17x1tg8",null,Si,{cursor:hn==="cursor"||!ut()&&!vt()}),ct(rr,"d",E(Jn)),Vi=$r(rr,"",Vi,{cursor:ut()||E(xt)?"pointer":"move","--prop-target-edge-color":ut()||E(xt)?Pn()||null:"transparent"})}),cr("mousedown",rr,function(...yt){var At;(At=ut())==null||At.apply(this,yt)}),cr("mouseenter",rr,()=>pe(xt,!0)),cr("mouseleave",rr,()=>pe(xt,!1)),Ne(en,Br)};Kt(Fr,en=>{lr&&qr&&en(Zn)})}Ne(e,Nt),NA(t,"destroy",bt);var $t=tr(Dt);return I(),$t}function BI(e,t){er(t,!1);let r=fe(t,"edge",8);jr("edge",r()),Sn();var n=Ut(),i=_t(n);br(i,t,"default",{},null),Ne(e,n),tr()}let uy;const ja=Ve(null);function nse(e,t,r){if(t==="self")return;const n=e.parentNode;if(!n)return;n.removeChild(e);const i=document.querySelector(`#anchors-${t}-${r.id}`);i&&(i.appendChild(e),e&&r.recalculateAnchors())}var ise=Bt('<div role="button" tabindex="0"><!></div> <!> <!>',1);function cd(e,t){er(t,!1);const r=()=>Be(ja,"$connectingFrom",m),n=()=>Be(Et,"$nodeLevelConnections",m),i=()=>Be(j,"$anchorsMounted",m),s=()=>Be(E(T),"$dynamicDirection",m),o=()=>Be(C,"$mounted",m),a=()=>Be(z,"$nodeConnectEvent",m),u=()=>Be(Oe,"$anchors",m),c=()=>Be(E(w),"$connectedAnchors",m),l=()=>Be(Ee,"$resizingWidth",m),h=()=>Be(Je,"$resizingHeight",m),v=()=>Be(dt,"$rotating",m),_=()=>Be(xe(),"$inputsStore",m),[m,b]=nn(),y=qe(),w=qe(),T=qe(),P=mr("dynamic"),A=mr("node"),I=mr("edgeStore"),N=mr("cursorAnchor"),d=mr("direction"),C=mr("mounted"),O=mr("graph"),k=mr("nodeStore"),F=mr("graphEdge"),z=mr("nodeConnectEvent"),j=mr("anchorsMounted"),J=mr("flowchart")||void 0;let oe=fe(t,"bgColor",8,null),W=fe(t,"id",8,0),D=fe(t,"input",8,!1),B=fe(t,"output",8,!1),U=fe(t,"multiple",24,()=>B()?!0:!D()),ie=fe(t,"dynamic",8,P||!1),se=fe(t,"edge",8,null),xe=fe(t,"inputsStore",8,null),me=fe(t,"key",8,null),ee=fe(t,"outputStore",8,null),ce=fe(t,"connections",28,()=>[]),re=fe(t,"edgeColor",24,()=>Ve(null)),te=fe(t,"edgeLabel",8,""),le=fe(t,"locked",8,!1),Me=fe(t,"nodeConnect",8,!1),Ge=fe(t,"edgeStyle",8,null),Ie=fe(t,"endStyles",24,()=>[null,null]),Ue=fe(t,"invisible",8,!1),We=fe(t,"direction",24,()=>d==="TD"?D()?"north":"south":D()?"west":"east"),q=fe(t,"title",8,"");const $=Xf(),Y=Xf();let K=qe(),we=qe(!1),he=qe(!1),Te=qe(0),Ce=D()===B()?null:D()?"input":"output",ze=qe([]);const Le=A.edge,Oe=A.anchors,Ee=A.resizingWidth,Je=A.resizingHeight,dt=A.rotating,Et=A.connections,vt=`A-${W()||Oe.count()+1}/${A.id}`,ut=Oie(O,A,vt,{x:0,y:0},{width:0,height:0},xe()||ee()||null,se()||Le||F||null,Ce,We(),ie(),me(),re());Oe.add(ut,ut.id),Nn(()=>{var Tt;E(K)&&ut.recalculatePosition();const ht=Array.from(Qe(A.anchors)).reduce((Ft,[,xt])=>(xt.type==="output"&&Ft++,Ft),0);if((Tt=n())!=null&&Tt.length&&!D()){const Ft=[];let xt=null;n().forEach((at,Ze)=>{at&&(xt===null&&(xt=Ze),(Ze-xt)%ht===0?(E(ze).push(at),Ft.push(null)):Ft.push(at))}),Ot(Et,Ft)}ure(j,i())}),DA(()=>{E(K)&&ut.recalculatePosition()}),co(()=>{ii(),cancelAnimationFrame(uy)});function Jt(ht){var Dt;I.delete("cursor");const Tt={x:ht.changedTouches[0].clientX,y:ht.changedTouches[0].clientY},Ft=document.elementFromPoint(Tt.x,Tt.y);if(!Ft)return;const xt=Ft.parentElement;if(!xt)return;const at=xt.id,Ze=at.split("/")[1],bt=(Dt=k.get(Ze))==null?void 0:Dt.anchors.get(at);bt&&(I.delete("cursor"),pr(ut,bt,ht))}function pr(ht,Tt,Ft){const xt=lr(ht,Tt);xt&&qr(),Ft.shiftKey||Rn(xt)}function sr(ht){var Tt;if("changedTouches"in ht&&E(y)){Jt(ht);return}if(!E(y)){if((Tt=c())!=null&&Tt.size&&!U()){I.delete("cursor"),ht.shiftKey||Rn(!1);return}r()&&Pn(ht)}}function yr(ht){var Tt;if(!le()){if((Tt=c())!=null&&Tt.size&&!U()&&!r())return di();if(!r())return Zr();Pn(ht)}}function Zr(){D()===B()?(Ot(ja,{anchor:ut,store:null,key:null}),Nr(ut,N)):D()?(Ot(ja,{anchor:ut,store:xe(),key:me()}),Nr(N,ut)):B()&&(Ot(ja,{anchor:ut,store:ee(),key:null}),Nr(ut,N))}function Nr(ht,Tt,Ft=!1){const xt={color:re(),label:{text:te()}};Ft&&(xt.disconnect=!0),Ge()&&(xt.type=Ge()),Ie()[0]&&(xt.start=Ie()[0]),Ie()[1]&&(xt.start=Ie()[1]);const at=NI({source:ht,target:Tt},(ht==null?void 0:ht.edge)||null,xt);I.add(at,"cursor")}function Pn(ht){if(I.delete("cursor"),!r())return;const Tt=r().anchor.type;if(r().anchor===ut||Tt===ut.type&&Tt){Rn(!1);return}ut.recalculatePosition();let Ft,xt;D()===B()?Tt==="input"?(Ft=ut,xt=r().anchor):(Ft=r().anchor,xt=ut):D()?(Ft=r().anchor,xt=ut):(Ft=ut,xt=r().anchor),pr(Ft,xt,ht)}function lr(ht,Tt){if(ht===Tt||Qe(ht.connected).has(ut))return!1;const Ft={color:re(),label:{text:te()}};if(J){const at=ht.node.id.slice(2),Ze=J.nodeList[at];if(Ze){const bt=Tt.node.id.slice(2),Dt=Ze.children.filter(Nt=>Nt.node.id===bt)[0];if(Dt){const Nt=Dt;Ft.label={text:Nt.content}}}}Ge()&&(Ft.type=Ge()),Ie()[0]&&(Ft.start=Ie()[0]),Ie()[1]&&(Ft.start=Ie()[1]);const xt=NI({source:ht,target:Tt},(ht==null?void 0:ht.edge)||null,Ft);return!ht.node||!Tt.node?!1:(I.add(xt,new Set([ht,Tt,ht.node,Tt.node])),!0)}function qr(){if(D()&&r()&&r().store)_()&&me()&&xe()&&typeof xe().set=="function"&&typeof xe().update=="function"&&wn(xe(),et(_)[me()]=r().store,et(_));else if(B()&&r()&&r().store){const{store:ht,key:Tt}=r();ht&&Tt&&typeof ht.update=="function"&&ht.update(Ft=>(ee()&&(Ft[Tt]=ee()),Ft))}}function In(){_()&&me()&&_()[me()]&&wn(xe(),et(_)[me()]=Ve(Qe(_()[me()])),et(_))}function Rn(ht){(ht||!a())&&(Ot(ja,null),Ot(z,null))}function Cn(){E(we)&&(E(K)&&ut.recalculatePosition(),uy=requestAnimationFrame(Cn))}function ii(){I.delete("cursor"),I.match(ut).forEach(Tt=>I.delete(Tt)),Rn(!1),In()}function di(){if(Qe(ut.connected).size>1)return;const ht=Array.from(Qe(ut.connected))[0];if(ht.type!=="input")if(ii(),ht.type==="output"){Nr(ht,N,!0),In();const Tt=ht.store;Ot(ja,{anchor:ht,store:Tt,key:null})}else Nr(ht,N,!0),Ot(ja,{anchor:ht,store:null,key:null})}function Ht(){E(ze).forEach((ht,Tt)=>{if(!ht)return;Kn(ht)&&ce(ce()[Tt]=null,!0)}),pe(ze,E(ze).filter(ht=>ht!==null))}function jt(){ce().forEach(ht=>{ht&&Kn(ht)})}function Yr(ht){const Tt=`N-${ht[0]}`,Ft=k.get(Tt);if(!Ft)return;const xt=Ft.anchors.get(`A-${ht[1]}/N-${ht[0]}`);if(!xt)return;const at=I.match(ut,xt);at&&I.delete(at[0])}const Kn=ht=>{let Tt,Ft,xt=null;Array.isArray(ht)?(Tt=ht[0].toString(),Ft=ht[1].toString()):(Tt=ht.toString(),Ft=null);const at=`N-${Tt}`,Ze=k.get(at);if(!Ze)return!1;if(Ft){const bt=`A-${Ft}/${at}`;xt=Ze.anchors.get(bt)||null}else{const bt=Qe(Ze.anchors),Dt=Array.from(bt.values());if(!Dt.length)return!1;xt=Dt.reduce((Nt,Fr)=>!Nt&&Fr.type==="output"?null:Fr.type==="output"?Nt:!Nt||Qe(Fr.connected).size<Qe(Nt.connected).size?Fr:Nt,null)}if(!xt)return!1;if(lr(ut,xt),xt.store&&(xe()||ee())){if(D()&&xt.type==="output")_()&&me()&&xe()&&typeof xe().set=="function"&&typeof xe().update=="function"&&wn(xe(),et(_)[me()]=xt.store,et(_));else if(B()&&xt.type==="input"){const{store:bt,inputKey:Dt}=xt;bt&&Dt&&typeof bt.update=="function"&&bt.update(Nt=>(ee()&&(Nt[Dt]=ee()),Nt))}}return!0};Fe(()=>r(),()=>{var ht;pe(y,((ht=r())==null?void 0:ht.anchor)===ut)}),Fe(()=>{},()=>{Mu(pe(w,ut&&ut.connected),"$connectedAnchors",m)}),Fe(()=>{},()=>{Mu(pe(T,ut==null?void 0:ut.direction),"$dynamicDirection",m)}),Fe(()=>(St(ie()),E(K),s()),()=>{ie()&&E(K)&&nse(E(K),s(),A)}),Fe(()=>(o(),St(ce())),()=>{o()===k.count()&&ce().length&&jt()}),Fe(()=>(St(Me()),a()),()=>{Me()&&a()&&sr(a())}),Fe(()=>(o(),E(ze)),()=>{o()===k.count()&&E(ze).length&&Ht()}),Fe(()=>(E(K),u(),c(),s()),()=>{E(K)&&(u(),c(),s(),ut.recalculatePosition())}),Fe(()=>(E(we),l(),h(),v()),()=>{!E(we)&&(l()||h()||v())?(pe(we,!0),Cn()):!l()&&!h()&&E(we)&&!v()&&(pe(we,!1),cancelAnimationFrame(uy))}),Fe(()=>(c(),E(Te)),()=>{if(c()){if(c().size<E(Te))Y("disconnection",{node:A,anchor:ut});else if(c().size>E(Te)){const ht=Array.from(c()),Tt=ht[ht.length-1];$("connection",{node:A,anchor:ut,connectedNode:Tt.node,connectedAnchor:Tt})}pe(Te,c().size)}}),_i();var Bn={disconnect:Yr};Sn();var Un=ise(),cn=_t(Un);let xi;var hn=gt(cn);br(hn,t,"default",{get linked(){return c(),et(()=>{var ht;return((ht=c())==null?void 0:ht.size)>=1})},get hovering(){return E(he)},get connecting(){return E(y)}},ht=>{var Tt=Ut(),Ft=_t(Tt);{var xt=at=>{{let Ze=Oi(()=>(c(),et(()=>{var bt;return((bt=c())==null?void 0:bt.size)>=1})));Kie(at,{get output(){return B()},get input(){return D()},get connecting(){return E(y)},get hovering(){return E(he)},get bgColor(){return oe()},get connected(){return E(Ze)}})}};Kt(Ft,at=>{Ue()||at(xt)})}Ne(ht,Tt)}),ao(cn,ht=>pe(K,ht),()=>E(K));var Jn=nt(cn,2);Bi(Jn,1,()=>(c(),et(()=>Array.from(c()))),ht=>ht.id,(ht,Tt,Ft,xt)=>{const at=Oi(()=>(E(Tt),et(()=>I.fetch(ut,E(Tt)))));var Ze=Ut(),bt=_t(Ze);{var Dt=Nt=>{const Fr=Oi(()=>(St(E(at)),et(()=>E(at).component)));BI(Nt,{get edge(){return E(at)},children:(Zn,$t)=>{var sn=Ut(),zn=_t(sn);br(zn,t,"edge",{},en=>{var Br=Ut(),or=_t(Br);{var vi=rr=>{E(Fr)(rr,{})},On=rr=>{$2(rr,{})};Kt(or,rr=>{E(Fr)?rr(vi):rr(On,!1)})}Ne(en,Br)}),Ne(Zn,sn)},$$slots:{default:!0}})};Kt(bt,Nt=>{St(E(at)),et(()=>E(at)&&E(at).source===ut)&&Nt(Dt)})}Ne(ht,Ze)});var jn=nt(Jn,2);{var pi=ht=>{const Tt=Oi(()=>et(()=>I.get("cursor")));var Ft=Ut(),xt=_t(Ft);{var at=Ze=>{const bt=Oi(()=>(St(E(Tt)),et(()=>E(Tt).component)));BI(Ze,{get edge(){return E(Tt)},children:(Dt,Nt)=>{var Fr=Ut(),Zn=_t(Fr);br(Zn,t,"edge",{},$t=>{var sn=Ut(),zn=_t(sn);{var en=or=>{E(bt)(or,{})},Br=or=>{$2(or,{})};Kt(zn,or=>{E(bt)?or(en):or(Br,!1)})}Ne($t,sn)}),Ne(Dt,Fr)},$$slots:{default:!0}})};Kt(xt,Ze=>{E(Tt)&&Ze(at)})}Ne(ht,Ft)};Kt(jn,ht=>{E(y)&&ht(pi)})}Wt(()=>{ct(cn,"id",et(()=>ut==null?void 0:ut.id)),xi=xn(cn,1,"anchor-wrapper svelte-e15nhc",null,xi,{locked:le()}),ct(cn,"title",q()||"")}),cr("mouseenter",cn,()=>pe(he,!0)),cr("mouseleave",cn,()=>pe(he,!1)),cr("mousedown",cn,io(qo(yr))),cr("mouseup",cn,qo(sr)),cr("touchstart",cn,io(qo(yr))),cr("touchend",cn,qo(sr)),Ne(e,Un),NA(t,"disconnect",Yr);var Dr=tr(Bn);return b(),Dr}var sse=Bt("<!> <!>",1),ose=Bt("<div></div> <div></div>",1),ase=Bt('<div><!> <p class="svelte-1wyp3cl"> </p> <!></div>');function use(e,t){er(t,!1);const r=()=>Be(m,"$borderRadius",u),n=()=>Be(y,"$inputs",u),i=()=>Be(w,"$outputs",u),s=()=>Be(b,"$textColor",u),o=()=>Be(_,"$label",u),a=()=>Be(T,"$resizable",u),[u,c]=nn(),l=mr("dynamic"),h=mr("node");let v=fe(t,"selected",8);const _=h.label,m=h.borderRadius,b=h.textColor,y=h.inputs,w=h.outputs,T=h.resizable,P=Qe(h.direction);let A=P==="TD",I=P==="TD",N=P!=="TD",d=P!=="TD";Sn();var C=ase();let O,k;var F=gt(C);{var z=U=>{var ie=sse(),se=_t(ie);Bi(se,1,()=>({length:n()}),ku,(me,ee)=>{cd(me,{$$events:{connection(ce){bn.call(this,t,ce)},disconnection(ce){bn.call(this,t,ce)}}})});var xe=nt(se,2);Bi(xe,1,()=>({length:i()}),ku,(me,ee)=>{cd(me,{$$events:{connection(ce){bn.call(this,t,ce)},disconnection(ce){bn.call(this,t,ce)}}})}),Ne(U,ie)},j=U=>{var ie=ose(),se=_t(ie);let xe;Bi(se,5,()=>({length:n()}),ku,(ce,re)=>{{let te=Oi(()=>A?"north":"west");cd(ce,{input:!0,get direction(){return E(te)},$$events:{connection(le){bn.call(this,t,le)},disconnection(le){bn.call(this,t,le)}}})}});var me=nt(se,2);let ee;Bi(me,5,()=>({length:i()}),ku,(ce,re)=>{{let te=Oi(()=>A?"south":"east");cd(ce,{output:!0,get direction(){return E(te)},$$events:{connection(le){bn.call(this,t,le)},disconnection(le){bn.call(this,t,le)}}})}}),Wt(()=>{xe=xn(se,1,"input-anchors svelte-1wyp3cl",null,xe,{top:A,left:N}),ee=xn(me,1,"output-anchors svelte-1wyp3cl",null,ee,{bottom:I,right:d})}),Ne(U,ie)};Kt(F,U=>{l?U(z):U(j,!1)})}var J=nt(F,2);let oe;var W=gt(J),D=nt(J,2);{var B=U=>{Xie(U,{width:!0,height:!0,rotation:!0})};Kt(D,U=>{a()&&U(B)})}Wt(()=>{O=xn(C,1,"default-node svelte-1wyp3cl",null,O,{selected:v()}),k=$r(C,"",k,{"border-radius":`${r()??""}px`}),oe=$r(J,"",oe,{color:s()}),is(W,o())}),Ne(e,C),tr(),c()}function zA(e,t){const r=MA(t);er(t,!1);const n=()=>Be(E(a),"$nodePosition",s),i=()=>Be(xe,"$nodes",s),[s,o]=nn(),a=qe(),u=mr("graph"),c=mr("group");let l=fe(t,"position",28,()=>({x:0,y:0})),h=fe(t,"drop",8,!1),v=fe(t,"dimensions",8,null),_=fe(t,"id",8,0),m=fe(t,"bgColor",8,null),b=fe(t,"borderRadius",8,null),y=fe(t,"borderColor",8,null),w=fe(t,"borderWidth",8,null),T=fe(t,"selectionColor",8,null),P=fe(t,"textColor",8,null),A=fe(t,"resizable",8,!1),I=fe(t,"label",8,""),N=fe(t,"inputs",8,1),d=fe(t,"outputs",8,1),C=fe(t,"width",8,null),O=fe(t,"height",8,null),k=fe(t,"TD",8,!1),F=fe(t,"LR",8,!1),z=fe(t,"zIndex",8,1),j=fe(t,"editable",8,!0),J=fe(t,"locked",8,!1),oe=fe(t,"rotation",8,0),W=fe(t,"edge",8,null),D=fe(t,"connections",24,()=>[]),B=fe(t,"useDefaults",8,!1),U=fe(t,"center",8,!1),ie=fe(t,"dynamic",8,!1),se=fe(t,"title",8,"");const xe=u.nodes;jr("dynamic",ie());let me=qe(),ee=qe(!0);Nn(()=>{const Ue=k()?"TD":F()?"LR":u.direction,We=u.groupBoxes.get(c),q=u.nodes.count()+1;pe(ee,!r.default),(r.anchorWest||r.anchorEast||r.anchorNorth||r.anchorSouth)&&pe(ee,!1);const $=v()?v():C()||O()?{width:C()||O()||200,height:O()||C()||100}:E(ee)?{width:200,height:100}:{width:0,height:0},Y={id:_()||q,position:h()==="cursor"?{x:Qe(u.cursor).x,y:Qe(u.cursor).y}:We?{x:Qe(We.position).x+l().x,y:Qe(We.position).y+l().y}:l(),dimensions:$,editable:j()||u.editable,label:I(),group:c,resizable:A(),inputs:N(),outputs:d(),zIndex:z(),direction:Ue,locked:J(),rotation:oe()};D().length&&(Y.connections=D()),w()&&(Y.borderWidth=w()),b()&&(Y.borderRadius=b()),y()&&(Y.borderColor=y()),T()&&(Y.selectionColor=T()),P()&&(Y.textColor=P()),m()&&(Y.bgColor=m()),W()&&(Y.edge=W()),pe(me,Sie(Y)),We&&u.groups.update(K=>{const we=Qe(K[c].nodes);return K[c].nodes.set(new Set([...we,E(me)])),K}),u.nodes.add(E(me),E(me).id)}),co(()=>{u.nodes.delete(E(me).id)});function ce(Ue){E(me)&&E(me).connections.set([Ue])}function re(Ue){if(!E(me))return;(Array.isArray(Ue)?Ue:[Ue]).forEach(q=>{const[$,Y]=Array.isArray(q)?q:[q,null],K=`N-${$}`,we=u.nodes.get(K);if(!we)return;let he=null;const Te=Y?`A-${Y}/${K}`:null;Te&&(he=we.anchors.get(Te));const Ce=u.edges.match(E(me),we,he);Ce.length&&u.edges.delete(Ce[Ce.length-1])})}jr("connect",ce),jr("disconnect",re);let te=qe(l());Fe(()=>(E(me),St(D())),()=>{E(me)&&E(me).connections.set(D())}),Fe(()=>(E(me),St(m())),()=>{E(me)&&E(me).bgColor.set(m())}),Fe(()=>(E(me),St(I())),()=>{E(me)&&E(me).label.set(I())}),Fe(()=>(E(me),St(P())),()=>{E(me)&&E(me).textColor.set(P())}),Fe(()=>(E(me),St(y())),()=>{E(me)&&E(me).borderColor.set(y())}),Fe(()=>(E(me),St(T())),()=>{E(me)&&E(me).selectionColor.set(T())}),Fe(()=>(E(me),St(A())),()=>{E(me)&&E(me).resizable.set(A())}),Fe(()=>(E(me),St(j())),()=>{E(me)&&E(me).editable.set(j())}),Fe(()=>(E(me),St(J())),()=>{E(me)&&E(me).locked.set(J())}),Fe(()=>(E(me),St(N())),()=>{E(me)&&E(me).inputs.set(N())}),Fe(()=>(E(me),St(d())),()=>{E(me)&&E(me).outputs.set(d())}),Fe(()=>(E(me),St(z())),()=>{E(me)&&E(me).zIndex.set(z())}),Fe(()=>E(me),()=>{var Ue;Mu(pe(a,E(me)&&((Ue=E(me))==null?void 0:Ue.position)),"$nodePosition",s)}),Fe(()=>(E(me),E(te),n(),St(l())),()=>{if(E(me)){const{x:Ue,y:We}=E(te),{x:q,y:$}=n(),{x:Y,y:K}=l();(Y!==q||K!==$)&&(Y!==Ue||K!==We?(pe(te,l()),E(me).position.set(l())):(pe(te,n()),l(n())))}}),Fe(()=>(E(me),St(N())),()=>{E(me)&&E(me).inputs.set(N())}),Fe(()=>(E(me),St(d())),()=>{E(me)&&E(me).outputs.set(d())}),_i(),Sn();var le=Ut(),Me=_t(le);{var Ge=Ue=>{{let We=Oi(()=>U()||h()==="center"),q=Oi(()=>!!v()||!!C()||!!O()||E(ee)||!1);$ie(Ue,{get node(){return E(me)},get center(){return E(We)},get isDefault(){return E(ee)},get useDefaults(){return B()},get dimensionsProvided(){return E(q)},get nodeStore(){return et(()=>u.nodes)},get locked(){return et(()=>u.locked)},get groups(){return et(()=>u.groups)},get title(){return se()},get maxZIndex(){return et(()=>u.maxZIndex)},get centerPoint(){return et(()=>u.center)},get cursor(){return et(()=>u.cursor)},get activeGroup(){return et(()=>u.activeGroup)},get editing(){return et(()=>u.editing)},get initialNodePositions(){return et(()=>u.initialNodePositions)},$$events:{nodeClicked($){bn.call(this,t,$)},nodeMount($){bn.call(this,t,$)},nodeReleased($){bn.call(this,t,$)},duplicate($){bn.call(this,t,$)}},children:Pg,$$slots:{default:($,Y)=>{const K=Oi(()=>Y.destroy),we=Oi(()=>Y.selected),he=Oi(()=>Y.grabHandle);var Te=Ut(),Ce=_t(Te);br(Ce,t,"default",{get selected(){return E(we)},get grabHandle(){return E(he)},disconnect:re,connect:ce,get node(){return E(me)},get destroy(){return E(K)}},ze=>{var Le=Ut(),Oe=_t(Le);{var Ee=Je=>{use(Je,{get selected(){return E(we)},$$events:{connection(dt){bn.call(this,t,dt)},disconnection(dt){bn.call(this,t,dt)}}})};Kt(Oe,Je=>{E(ee)&&Je(Ee)})}Ne(ze,Le)}),Ne($,Te)},anchorWest:($,Y)=>{var K=Ut(),we=_t(K);br(we,t,"anchorWest",{},null),Ne($,K)},anchorEast:($,Y)=>{var K=Ut(),we=_t(K);br(we,t,"anchorEast",{},null),Ne($,K)},anchorNorth:($,Y)=>{var K=Ut(),we=_t(K);br(we,t,"anchorNorth",{},null),Ne($,K)},anchorSouth:($,Y)=>{var K=Ut(),we=_t(K);br(we,t,"anchorSouth",{},null),Ne($,K)}}})}},Ie=Rr(()=>(E(me),i(),et(()=>E(me)&&i().get(E(me).id))));Kt(Me,Ue=>{E(Ie)&&Ue(Ge)})}Ne(e,le),tr(),o()}var cse=Bt('<div class="editor svelte-f9m2u0"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function lse(e,t){er(t,!1);const r=qe();let n=fe(t,"editing",8);const i=mr("graph");jr("graph",i),jr("textStore",n().label),jr("colorStore",n().bgColor);let s=qe({x:150,y:50});function o(c){c.preventDefault(),pe(s,{x:c.clientX,y:c.clientY}),i.editing.set(n())}function a(){i.nodes.delete(n().id),i.editing.set(null)}function u(){const c=n().id,l=i.nodes.get(c);if(l){const h=l.dimensions.width,v=l.dimensions.height,_=prompt("Enter new width (for example:250):",h?h.toString():""),m=prompt("Enter new height (for example:200):",v?v.toString():"");if(_===null||m===null)return;l.dimensions.width.set(parseInt(_,10)||0),l.dimensions.height.set(parseInt(m,10)||0),l.resizingWidth.set(!0),l.resizingHeight.set(!0)}}Fe(()=>{},()=>{pe(r,i.cursor)}),_i(),Sn(),zA(e,{zIndex:1/0,get position(){return E(s)},bgColor:"white",id:"editor",children:(c,l)=>{var h=cse(),v=nt(gt(h),2),_=nt(v,2);Fie(_,{placeholder:"Node Label"});var m=nt(_,2),b=nt(m,2);cr("click",v,()=>i.editing.set(null)),cr("click",m,a),cr("click",b,u),cr("contextmenu",h,o),Ne(c,h)},$$slots:{default:!0}}),tr()}var fse=Bt("<!> <!>",1),hse=Bt('<section role="presentation" class="svelvet-wrapper svelte-1sraks"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function dse(e,t){er(t,!1);const r=()=>Be(q,"$groups",m),n=()=>Be(Ue,"$dimensionsStore",m),i=()=>Be(Te,"$nodeBounds",m),s=()=>Be(Me,"$graphDOMElement",m),o=()=>Be(qs,"$initialClickPosition",m),a=()=>Be(Y,"$selected",m),u=()=>Be(K,"$activeGroup",m),c=()=>Be(ja,"$connectingFrom",m),l=()=>Be(z2,"$touchDistance",m),h=()=>Be(Ie,"$scale",m),v=()=>Be(We,"$translation",m),_=()=>Be(he,"$editing",m),[m,b]=nn(),y=qe();let w=fe(t,"graph",8),T=fe(t,"width",8),P=fe(t,"height",8),A=fe(t,"minimap",12,!1),I=fe(t,"controls",12,!1),N=fe(t,"toggle",8,!1),d=fe(t,"fixedZoom",8,!1),C=fe(t,"pannable",8,!0),O=fe(t,"disableSelection",8,!1),k=fe(t,"ZOOM_INCREMENT",8,.1),F=fe(t,"PAN_INCREMENT",8,50),z=fe(t,"PAN_TIME",8,250),j=fe(t,"MAX_SCALE",8,3),J=fe(t,"MIN_SCALE",8,.2),oe=fe(t,"selectionColor",8),W=fe(t,"backgroundExists",8),D=fe(t,"fitView",8,!1),B=fe(t,"trackpadPan",8),U=fe(t,"modifier",8),ie=fe(t,"theme",12,"light"),se=fe(t,"title",8),xe=fe(t,"drawer",12,!1),me=fe(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",xe());let ee;const ce=Xf(),re={},te=Ve(!1),le=Ve(0),Me=Ve(null),Ge=w().cursor,Ie=w().transforms.scale,Ue=w().dimensions,We=w().transforms.translation,q=w().groups,$=w().groupBoxes,Y=r().selected.nodes,K=w().activeGroup,we=w().initialNodePositions,he=w().editing,Te=w().bounds.nodeBounds;let Ce=0,ze=1,Le=qe({x:0,y:0,top:0,left:0}),Oe=qe(!1),Ee=qe(!1),Je=qe(!1),dt=qe(!1),Et=!1,vt=qe(!1),ut,Jt=qe(null),pr=qe(null),sr=qe(null),yr=qe(null),Zr=qe(null);const Nr={id:null,position:w().cursor,offset:Ve({x:0,y:0}),connected:Ve(new Set),dynamic:Ve(!1),edge:null,edgeColor:Ve(null),direction:Ve("self"),inputKey:null,type:"output",moving:Bu(!1),store:null,mounted:Ve(!0),rotation:Bu(0),node:{zIndex:Ve(1/0),rotating:Ve(!1),position:w().cursor,dimensions:{width:Ve(0),height:Ve(0)}}};jr("graphDOMElement",Me),jr("cursorAnchor",Nr),jr("duplicate",te),jr("graph",w()),jr("transforms",w().transforms),jr("dimensions",w().dimensions),jr("locked",w().locked),jr("groups",w().groups),jr("bounds",w().bounds),jr("edgeStore",w().edges),jr("nodeStore",w().nodes),jr("mounted",le),Nn(()=>{console.log("Graph component mounted with drawer1:",xe()),ii()});async function Pn(){await wf(),Bo.set(!0);const{x:tt,y:mt,scale:It}=xie(ut,i());tt!==null&&mt!==null&&It!==null&&(w().transforms.scale.set(It),We.set({x:tt,y:mt})),Bo.set(!1),pe(vt,!0)}async function lr(){pe(pr,(await ed(async()=>{const{default:tt}=await Promise.resolve().then(()=>Mse);return{default:tt}},void 0,import.meta.url)).default)}async function qr(){pe(Jt,(await ed(async()=>{const{default:tt}=await Promise.resolve().then(()=>Fse);return{default:tt}},void 0,import.meta.url)).default)}async function In(){pe(sr,(await ed(async()=>{const{default:tt}=await import("./Controls-DqfqkHbk.js");return{default:tt}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function Rn(){pe(yr,(await ed(async()=>{const{default:tt}=await import("./DrawerController-BuRKVG6D.js");return{default:tt}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function Cn(){pe(Zr,(await ed(async()=>{const{default:tt}=await import("./ContrastTheme-DHWBAnVg.js");return{default:tt}},[],import.meta.url)).default)}function ii(){if(!s())return;const tt=s().getBoundingClientRect();ut={top:tt.top,left:tt.left,bottom:tt.bottom,right:tt.right,width:tt.width,height:tt.height},w().dimensions.set(ut),D()==="resize"&&Pn()}function di(tt){var It,yt;if(E(Ee)){const ar=`${Gne()}/${w().id}`,tn=Qe(Ge),kn=tn.x-o().x,zr=tn.y-o().y,qn=Math.min(o().y,o().y+zr),Mn=Math.min(o().x,o().x+kn),Qn={width:Ve(Math.abs(kn)),height:Ve(Math.abs(zr))},Ra=Ve({x:Mn,y:qn}),Us={group:Ve(ar),dimensions:Qn,position:Ra,color:Ve(qne()),moving:Ve(!1)};$.add(Us,ar),Array.from(a()).forEach(si=>{si.group.set(ar)}),q.update(si=>{const hu={parent:Ve(Us),nodes:Ve(new Set([...a(),Us]))};return si[ar]=hu,si}),Ot(Y,new Set),pe(Ee,!1),pe(Oe,!1)}u()&&Array.from(Qe(r()[u()].nodes)).forEach(ar=>{const tn=Hv(Qe(ar.position).x,Qe(ar.position).y);ar.position.set(tn),ar.moving.set(!1)});const mt=w().edges.get("cursor");mt&&(w().edges.delete("cursor"),mt.disconnect||ce("edgeDrop",{cursor:Qe(Ge),source:{node:(It=c())==null?void 0:It.anchor.node.id.slice(2),anchor:(yt=c())==null?void 0:yt.anchor.id.split("/")[0].slice(2)}})),Ot(K,null),Ot(qs,{x:0,y:0}),Ot(we,[]),pe(Oe,!1),pe(dt,!1),Ot(Bo,!1),tt.shiftKey||ja.set(null),ff(Le,E(Le).y=0),ff(Le,E(Le).x=0)}function Ht(tt){if(!C()&&!(tt.shiftKey||tt.metaKey)||tt.button===2)return;s()&&s().focus();const{clientX:mt,clientY:It}=tt;if(Ot(qs,Qe(Ge)),tt.shiftKey||tt.metaKey){tt.preventDefault(),pe(Oe,!0);const{top:yt,left:At}=E(y);ff(Le,E(Le).y=It-yt),ff(Le,E(Le).x=mt-At),ff(Le,E(Le).top=yt),ff(Le,E(Le).left=At),tt.shiftKey&&tt.metaKey?pe(Ee,!0):pe(Ee,!1),tt.metaKey&&!tt.shiftKey?pe(Je,!0):pe(Je,!1)}else pe(dt,!0),Ot(Y,new Set),Ot(Y,a())}function jt(tt){Ot(Y,new Set),Ot(Y,a()),Ot(qs,Qe(Ge)),pe(dt,!0),tt.touches.length===2&&(Kn(),Ce=l(),ze=h())}function Yr(){pe(dt,!1),Et=!1}function Kn(){Et||(Et=!0,ee=requestAnimationFrame(Bn))}function Bn(){if(!Et){cancelAnimationFrame(ee);return}const mt=l()/Ce;Ot(Ie,ze*mt),ee=requestAnimationFrame(Bn)}function Un(tt){const{key:mt,code:It}=tt,yt=tt.target;if(!(yt.tagName=="INPUT"||yt.tagName=="TEXTAREA")){if(It==="KeyA"&&tt[`${U()}Key`]){const At=w().nodes.getAll().filter(ar=>!Qe(ar.locked));Ot(Y,new Set(At))}else if(FI(mt))pi(mt,tt);else if(mt==="=")DI(-1,w().dimensions,w().transforms,k());else if(mt==="-")DI(1,w().dimensions,w().transforms,k());else if(mt==="0")Pn();else if(mt==="Control")r().selected.nodes.set(new Set);else if(It==="KeyD"&&tt[`${U()}Key`])te.set(!0),setTimeout(()=>{te.set(!1)},100);else if(mt==="Tab"&&(tt.altKey||tt.ctrlKey))xi();else if(mt==="l")ie(ie()==="light"?"dark":"light");else if(mt==="d")xe(!xe());else if(mt==="m")A(!A());else if(mt==="c")I(!I());else if(mt==="e"){const At=Array.from(a())[0];w().editing.set(At)}else return;tt.preventDefault()}}function cn(tt){var zr;tt.preventDefault();const mt=(zr=s())==null?void 0:zr.getBoundingClientRect();if(!mt)return;const It=tt.clientX-mt.left,yt=tt.clientY-mt.top,{x:At,y:ar}=Hv(It,yt);if(console.log(`Dropped Node at Snapped Position: (${At}, ${ar})`),!kn)return;const tn={id:`node-${Date.now()}`,rotation:Ve(0),position:Ve({x:At,y:ar}),moving:Ve(!1),label:Ve("New Node"),dimensions:{width:Ve(200),height:Ve(100)},inputs:Ve(2),outputs:Ve(2),anchors:Ve([]),group:Ve(null),collapsed:Ve(!1),resizingWidth:Ve(!1),resizingHeight:Ve(!1),rotating:Ve(!1),editable:Ve(!0),locked:Ve(!1),recalculateAnchors:qn=>{},resizable:Ve(!0),zIndex:Ve(1),edge:null,direction:Ve("TD"),borderRadius:Ve(5),borderWidth:Ve(1),connections:Ve([]),bgColor:Ve("#007bff"),borderColor:Ve("#000"),selectionColor:Ve("#ff0000"),textColor:Ve("#fff")};let kn=null;w().nodes.add(tn,tn.id),kn=null}function xi(){const tt=w().nodes.getAll(),mt=tt.findIndex(yt=>a().has(yt)),It=mt+1;a().delete(tt[mt]),a().add(tt[It])}function hn(tt){const{key:mt}=tt;FI(mt)?(clearInterval(re[mt]),delete re[mt]):mt==="Shift"&&ja.set(null)}function Jn(tt){if(d())return;const mt=tt.shiftKey?.15:1,{clientX:It,clientY:yt,deltaY:At}=tt,ar=v(),tn={x:It,y:yt};if((B()||tt.metaKey)&&At%1===0){Ot(We,{x:wn(We,et(v).x-=tt.deltaX,et(v)),y:wn(We,et(v).y-=tt.deltaY,et(v))});return}if(h()>=j()&&At<0||h()<=J()&&At>0)return;const kn=Math.min(.009*mt*Math.abs(At),.08),zr=U$(h(),Math.sign(At),kn),qn=G$(h(),zr,ar,tn,ut);Ie.set(zr),We.set(qn)}function jn(tt){tt.preventDefault()}function pi(tt,mt){const It=mt.shiftKey?2:1,yt=tt==="ArrowLeft"||tt==="ArrowUp"?1:-1,At=tt==="ArrowLeft"||tt==="ArrowRight",ar=At?v().x:v().y,tn=ar+yt*F()*It;if(!re[tt]){const kn=performance.now();let zr=setInterval(()=>{const qn=performance.now()-kn;if(a().size===0){const Mn=ar+(tn-ar)*(qn/z());We.set({x:At?Mn:v().x,y:At?v().y:Mn})}else{const Mn={x:At?-yt*2:0,y:At?0:-yt*2};Array.from(a()).forEach(Qn=>{const Ra=Qe(Qn.position);let Us;const si=Qe(Qn.group),hu=Qe(w().groupBoxes);if(si&&(Us=hu.get(si)),Us){const ws=Qe(Qn.dimensions.width),du=Qe(Qn.dimensions.height),ka=X$(Us,ws,du);W$(Ra,Mn,Qn.position,ka)}else{const ws={x:Ra.x+Mn.x,y:Ra.y+Mn.y},du=Hv(ws.x,ws.y);Qn.position.set(du)}})}},2);re[tt]=zr}}Fe(()=>n(),()=>{pe(y,n())}),Fe(()=>St(ie()),()=>{ie()&&document.documentElement.setAttribute("svelvet-theme",ie())}),Fe(()=>(E(vt),St(D())),()=>{!E(vt)&&D()&&Pn()}),Fe(()=>(St(N()),E(Jt)),()=>{N()&&!E(Jt)&&qr()}),Fe(()=>(St(A()),E(pr)),()=>{A()&&!E(pr)&&lr()}),Fe(()=>(St(I()),E(sr)),()=>{I()&&!E(sr)&&In()}),Fe(()=>(St(xe()),E(yr)),()=>{xe()&&!E(yr)&&Rn()}),Fe(()=>(St(me()),E(Zr)),()=>{me()&&!E(Zr)&&Cn()}),Fe(()=>St(xe()),()=>{console.log("Reactive Graph drawer prop:",xe())}),_i(),Sn();var Dr=hse();cr("touchend",bf,di),cr("mouseup",bf,di),cr("resize",bf,ii),cr("scroll",bf,ii),ct(Dr,"tabindex",0);let ht;var Tt=gt(Dr);Lie(Tt,{get isMovable(){return E(dt)},children:(tt,mt)=>{var It=fse(),yt=_t(It);{var At=tn=>{lse(tn,{get editing(){return _()}})};Kt(yt,tn=>{_()&&tn(At)})}var ar=nt(yt,2);br(ar,t,"default",{},null),Ne(tt,It)},$$slots:{default:!0}});var Ft=nt(Tt,2);{var xt=tt=>{var mt=Ut(),It=_t(mt);br(It,t,"background",{},null),Ne(tt,mt)},at=tt=>{hie(tt,{})};Kt(Ft,tt=>{W()?tt(xt):tt(at,!1)})}var Ze=nt(Ft,2);{var bt=tt=>{var mt=Ut(),It=_t(mt);el(It,()=>E(pr),(yt,At)=>{At(yt,{})}),Ne(tt,mt)};Kt(Ze,tt=>{A()&&tt(bt)})}var Dt=nt(Ze,2);{var Nt=tt=>{var mt=Ut(),It=_t(mt);el(It,()=>E(sr),(yt,At)=>{At(yt,{})}),Ne(tt,mt)};Kt(Dt,tt=>{I()&&tt(Nt)})}var Fr=nt(Dt,2);{var Zn=tt=>{var mt=Ut(),It=_t(mt);el(It,()=>E(Jt),(yt,At)=>{At(yt,{})}),Ne(tt,mt)};Kt(Fr,tt=>{N()&&tt(Zn)})}var $t=nt(Fr,2);{var sn=tt=>{var mt=Ut(),It=_t(mt);el(It,()=>E(yr),(yt,At)=>{At(yt,{})}),Ne(tt,mt)};Kt($t,tt=>{xe()&&tt(sn)})}var zn=nt($t,2);{var en=tt=>{var mt=Ut(),It=_t(mt);el(It,()=>E(Zr),(yt,At)=>{At(yt,{})}),Ne(tt,mt)};Kt(zn,tt=>{me()&&tt(en)})}var Br=nt(zn,2);br(Br,t,"minimap",{},null);var or=nt(Br,2);br(or,t,"drawer",{},null);var vi=nt(or,2);br(vi,t,"controls",{},null);var On=nt(vi,2);br(On,t,"toggle",{},null);var rr=nt(On,2);br(rr,t,"contrast",{},null);var Si=nt(rr,2);{var Vi=tt=>{Wne(tt,{get creating(){return E(Ee)},get anchor(){return E(Le)},get graph(){return w()},get adding(){return E(Je)},get color(){return oe()}})};Kt(Si,tt=>{E(Oe)&&!O()&&tt(Vi)})}ao(Dr,tt=>Ot(Me,tt),()=>s()),Wt(()=>{ct(Dr,"id",(St(w()),et(()=>w().id))),ct(Dr,"title",se()),ht=$r(Dr,"",ht,{width:T()?T()+"px":"100%",height:P()?P()+"px":"100%",cursor:C()?"move":"default"})}),cr("wheel",Dr,io(Jn)),cr("mousedown",Dr,_d(io(Ht))),cr("touchend",Dr,io(Yr)),cr("touchstart",Dr,_d(io(jt))),cr("keydown",Dr,Un),cr("keyup",Dr,hn),cr("dragover",Dr,io(jn)),cr("drop",Dr,cn),Ne(e,Dr),tr(),b()}function pse(e){e.parentNodes.forEach(s=>vse(s));const[t,r]=gse(e);mse(t,e),yse(t);for(let s=0;s<10;s++){let o=!1;for(let a=0;a<=r;a++)if(t[a])for(let u=0;u<t[a].length;u++){const c=t[a][u],l=bse(t,c,u);l&&(vl(t[a],u,l),o=!0)}if(!o)break}const n=wse(t);for(let s=0;s<10&&xse(t,n);s++);for(let s=0;s<2;s++){let o=!1;for(let a=0;a<=r;a++)for(let u=0;u<t[a].length;u++){const c=t[a][u],l=_se(t,c,u);l&&(vl(t[a],u,l),o=!0)}if(!o)break}const i=[];for(let s=0;s<=r;s++)i.push(t[s]);return i}function vse(e,t=0,r=0){const n=[],i=(s,o=0,a=0)=>{s.depth=Math.max(s.depth,o),s.nesting=Math.max(s.nesting,a),n.push(s);for(const u of s.children){const{node:c,length:l}=u;i(c,l+o,a+1)}};i(e,t,r);for(const s of n)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const o of s.children)s.nesting=Math.min(s.nesting,o.node.nesting-1),s.depth=Math.min(s.depth,o.node.depth-o.length)}}function gse(e){let t=0;const r={};for(const n in e.nodeList){const{depth:i,parents:s,children:o,type:a,data:u}=e.nodeList[n];t=Math.max(t,i),r[i]||(r[i]=[]);const c={id:n,label:u.content,children:[],parents:[],layer:i,type:a.trim()};u.props&&(c.propsId=u.props.trim());for(const l of s)c.parents.push(l.node.id);for(const l of o)c.children.push(l.node.id);r[i].push(c)}return[r,t]}function mse(e,t){for(const r in t.nodeList)for(const n of t.nodeList[r].children)if(n.node.depth-1>t.nodeList[r].depth){const i=t.nodeList[r].depth+1,s=n.node.depth-1,o=[];let a=0;for(let u=i;u<=s;u++){const c={id:`GHOST_${n.node.id}_${a}`,label:"",children:[],parents:[],layer:u,ignore:!0};o.push(c),a++}for(const u of n.node.parents)o[0].parents.push(u.node.id);o[o.length-1].children.push(n.node.id);for(let u=0;u<o.length-1;u++)o[u].children.push(`GHOST_${n.node.id}_${u+1}`);for(let u=s;u>=i;u--)o.length>0&&e[u].push(o[0]);for(const u of e[t.nodeList[r].depth])u.id===r&&(u.children.push(o[0].id),u.children=u.children.filter(c=>c!==n.node.id))}}function yse(e){let t=0;for(const r in e)t=Math.max(e[r].length,t);for(const r in e)if(e[r].length<t){const n=Array.from({length:t-e[r].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(r),ignore:!0}));e[r]=e[r].concat(n)}}function zI(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function VI(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function $I(e,t,r){let n=0,i=0;for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function _se(e,t,r){const n=G2(e,t.layer);let i=0;t.layer===0?i=$I(e,t,r):i=VI(e,t,r);let s=i,o=r;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){vl(e[t.layer],r,a);const c=G2(e,t.layer);let l=0;t.layer===0?l=$I(e,t,a):l=VI(e,t,a),c<=n&&l<s&&(s=l,o=a),vl(e[t.layer],a,r)}return o===r?null:o}function bse(e,t,r){const n={};let i=1/0,s=0;for(let o=0;o<e[t.layer].length;o++){const a=zI(e,t,o),u=zI(e,e[t.layer][o],r);n[o]=a+u}for(const o in n)n[o]<i&&(i=n[o],s=parseInt(o));return s===r?null:s}function vl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function wse(e){const t=[];for(const r in e)for(const n of e[r])t.push(n);return t.sort((r,n)=>n.parents.length+n.children.length-(r.parents.length+r.children.length))}function G2(e,t){let r=0;for(let n=0;n<e[t].length;n++){const i=e[t][n],s=[],o=[];if(e[t-1])for(let a=n+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=n+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&o.push(a);for(let a=n+1;a<e[t].length;a++){const u=e[t][a];if(s.length)for(let c=0;c<e[t-1].length;c++)u.parents.includes(e[t-1][c].id)&&s.forEach(l=>{c<l&&r++});if(o.length)for(let c=0;c<e[t+1].length;c++)u.children.includes(e[t+1][c].id)&&o.forEach(l=>{c<l&&r++})}}return r}function xse(e,t){let r=!1;for(const n of t){if(n.children.length+n.parents.length===0)return r;let i=0;for(let a=0;a<e[n.layer].length;a++)if(e[n.layer][a].id===n.id){i=a;break}let s=1/0,o=i;for(let a=0;a<e[n.layer].length;a++){vl(e[n.layer],i,a);const u=G2(e,n.layer);u<s&&(s=u,o=a),vl(e[n.layer],a,i)}o!==i&&(vl(e[n.layer],i,o),r=!0)}return r}function Sse(e,t){er(t,!1);let r=fe(t,"mermaid",8,""),n=fe(t,"mermaidConfig",24,()=>({}));const i=Bne(r());jr("flowchart",i);const s=pse(i),o=mr("graph"),a=100,u=100;let c;Nn(()=>{o.nodes.subscribe(_=>c=Object.fromEntries(_));let v=0;for(const _ of s){let m=0,b=-1/0;for(const y of _)y.ignore||(c[`N-${y.id}`].position.update(()=>({x:m,y:v})),c[`N-${y.id}`].dimensions.width.subscribe(w=>m+=w),c[`N-${y.id}`].dimensions.height.subscribe(w=>b=Math.max(b,w))),m+=a;v+=b+u}}),Sn();var l=Ut(),h=_t(l);Bi(h,1,()=>s,ku,(v,_)=>{var m=Ut(),b=_t(m);Bi(b,1,()=>E(_),ku,(y,w)=>{var T=Ut(),P=_t(T);{var A=I=>{{let N=Oi(()=>(E(w),et(()=>E(w).children.map(d=>[d,"1"]))));zA(I,Wf({get label(){return E(w),et(()=>E(w).label)},get id(){return E(w),et(()=>E(w).id)},TD:!0},()=>n()[E(w).id],{get connections(){return E(N)}}))}};Kt(P,I=>{E(w),et(()=>!E(w).ignore)&&I(A)})}Ne(y,T)}),Ne(v,m)}),Ne(e,l),tr()}function Ese(e){var n,i;const t=JSON.parse(e);return j$(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((n=t.transforms)==null?void 0:n.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Ase=Bt("<!> <!>",1),Tse=Bt('<div class="svelvet-temp svelte-1hlbl48"></div>');function Pse(e,t){const r=MA(t);er(t,!1);const n=qe(),i=qe();let s=fe(t,"mermaid",8,""),o=fe(t,"theme",8,"light"),a=fe(t,"id",8,0),u=fe(t,"snapTo",8,0),c=fe(t,"zoom",8,1),l=fe(t,"TD",8,!1),h=fe(t,"editable",8,!0),v=fe(t,"locked",8,!1),_=fe(t,"width",8,0),m=fe(t,"height",8,0),b=fe(t,"minimap",8,!1),y=fe(t,"controls",8,!1),w=fe(t,"toggle",8,!1),T=fe(t,"drawer",8,!1),P=fe(t,"contrast",8,!1),A=fe(t,"fitView",8,!1),I=fe(t,"selectionColor",8,"lightblue"),N=fe(t,"edgeStyle",8,"bezier"),d=fe(t,"endStyles",24,()=>[null,null]),C=fe(t,"edge",8,null),O=fe(t,"disableSelection",8,!1),k=fe(t,"mermaidConfig",24,()=>({})),F=fe(t,"translation",24,()=>({x:0,y:0})),z=fe(t,"trackpadPan",8,!1),j=fe(t,"modifier",8,"meta"),J=fe(t,"raiseEdgesOnSelect",8,!1),oe=fe(t,"edgesAboveNode",8,!1),W=fe(t,"title",8,""),D=fe(t,"fixedZoom",8,!1),B=fe(t,"pannable",8,!0);const U=Xf();let ie=qe(null),se=l()?"TD":"LR";jr("snapTo",u()),jr("edgeStyle",N()),jr("endStyles",d()),jr("graphEdge",C()),jr("raiseEdgesOnSelect",J()),jr("edgesAboveNode",oe()),jr("graph",E(ie)),Nn(()=>{console.log("Graph component mounted with drawer:",T());const le=localStorage.getItem("state");if(console.log("stateObject during onMount:",le),le)pe(ie,Ese(le)),console.log("This is the graph set using reloadStore",E(ie)),bd.add(E(ie),E(ie).id),console.log("graphStore updated",E(ie));else{let Me=`G-${a()||bd.count()+1}`;pe(ie,j$(Me,{zoom:c(),direction:se,editable:h(),locked:v(),translation:F()})),bd.add(E(ie),Me)}});function xe(le,Me){if(!E(ie))return;const Ge=`N-${le[0]}`,Ie=E(ie).nodes.get(Ge);if(!Ie)return;const Ue=Ie.anchors.get(`A-${le[1]}/N-${le[0]}`);if(!Ue)return;const We=`N-${Me[0]}`,q=E(ie).nodes.get(We);if(!q)return;const $=q.anchors.get(`A-${Me[1]}/N-${Me[0]}`);if(!$)return;const Y=E(ie).edges.match(Ue,$);Y&&E(ie).edges.delete(Y[0])}Fe(()=>{},()=>{pe(n,r.background)}),Fe(()=>E(ie),()=>{pe(i,E(ie)&&E(ie).edges)}),Fe(()=>(E(ie),St(c())),()=>{E(ie)&&E(ie).transforms.scale.set(c())}),Fe(()=>E(i),()=>{E(i)&&E(i).onEdgeChange((le,Me)=>{U(Me,{sourceAnchor:le.source,targetAnchor:le.target,sourceNode:le.source.node,targetNode:le.target.node})})}),_i();var me={disconnect:xe};Sn();var ee=Ut(),ce=_t(ee);{var re=le=>{dse(le,{get width(){return _()},get height(){return m()},get toggle(){return w()},get backgroundExists(){return E(n)},get minimap(){return b()},get graph(){return E(ie)},get fitView(){return A()},get fixedZoom(){return D()},get pannable(){return B()},get theme(){return o()},get drawer(){return T()},get controls(){return y()},get selectionColor(){return I()},get disableSelection(){return O()},get trackpadPan(){return z()},get modifier(){return j()},get title(){return W()},get contrast(){return P()},$$events:{edgeDrop(Me){bn.call(this,t,Me)}},children:(Me,Ge)=>{var Ie=Ase(),Ue=_t(Ie);{var We=$=>{Sse($,{get mermaid(){return s()},get mermaidConfig(){return k()}})};Kt(Ue,$=>{St(s()),et(()=>s().length)&&$(We)})}var q=nt(Ue,2);br(q,t,"default",{},null),Ne(Me,Ie)},$$slots:{default:!0,minimap:(Me,Ge)=>{var Ie=Ut(),Ue=_t(Ie);br(Ue,t,"minimap",{},null),Ne(Me,Ie)},controls:(Me,Ge)=>{var Ie=Ut(),Ue=_t(Ie);br(Ue,t,"controls",{},null),Ne(Me,Ie)},background:(Me,Ge)=>{var Ie=Ut(),Ue=_t(Ie);br(Ue,t,"background",{},null),Ne(Me,Ie)},toggle:(Me,Ge)=>{var Ie=Ut(),Ue=_t(Ie);br(Ue,t,"toggle",{},null),Ne(Me,Ie)},drawer:(Me,Ge)=>{var Ie=Ut(),Ue=_t(Ie);br(Ue,t,"drawer",{},null),Ne(Me,Ie)},contrast:(Me,Ge)=>{var Ie=Ut(),Ue=_t(Ie);br(Ue,t,"contrast",{},null),Ne(Me,Ie)}}})},te=le=>{var Me=Tse();let Ge;Wt(()=>Ge=$r(Me,"",Ge,{width:_()?_()+"px":"100%",height:m()?m()+"px":"100%"})),Ne(le,Me)};Kt(ce,le=>{E(ie)?le(re):le(te,!1)})}return Ne(e,ee),NA(t,"disconnect",xe),tr(me)}var Cse=Bt("<button></button>");function Ose(e,t){er(t,!1);const r=()=>Be(N,"$position",c),n=()=>Be(k,"$rotation",c),i=()=>Be(E(_),"$zIndex",c),s=()=>Be(O,"$borderRadius",c),o=()=>Be(C,"$bgColor",c),a=()=>Be(F,"$width",c),u=()=>Be(z,"$height",c),[c,l]=nn(),h=qe(),v=qe(),_=qe(),m=qe();let b=fe(t,"node",8),y=fe(t,"hidden",8,!1),w=fe(t,"toggleHidden",8),T=fe(t,"top",8),P=fe(t,"left",8),A=fe(t,"nodeColor",8,null),I=fe(t,"hideable",8);const{position:N,dimensions:d,bgColor:C,borderRadius:O,rotation:k}=b(),{width:F,height:z}=d;let j=qe(null);Nn(()=>{var D;try{const B=(D=document.querySelector(`#${b().id}`))==null?void 0:D.firstChild;B&&pe(j,window.getComputedStyle(B).backgroundColor)}catch(B){console.error(B)}}),Fe(()=>r(),()=>{pe(h,r())}),Fe(()=>n(),()=>{pe(v,n())}),Fe(()=>St(b()),()=>{Mu(pe(_,b().zIndex),"$zIndex",c)}),Fe(()=>E(j),()=>{pe(m,E(j)==="rgba(0, 0, 0, 0)")}),_i(),Sn();var J=Cse();let oe,W;Wt(()=>{oe=xn(J,1,"minimap-node svelte-15i4o52",null,oe,{hidden:y(),hideable:I()}),W=$r(J,"",W,{"z-index":i(),"border-radius":`${s()??""}px`,"--prop-background-color":A()||o()||!E(m)&&E(j)||null,width:`${a()??""}px`,height:`${u()??""}px`,transform:`rotate(${E(v)??""}deg)`,top:`${E(h),St(T()),et(()=>E(h).y-T())??""}px`,left:`${E(h),St(P()),et(()=>E(h).x-P())??""}px`})}),cr("click",J,()=>{I()&&w()(b())}),Ne(e,J),tr(),l()}var Ise=Bt('<div class="mini-bounding-box svelte-19o9d1m"></div>');function Rse(e,t){er(t,!1);const r=()=>Be(c(),"$position",o),n=()=>Be(m,"$width",o),i=()=>Be(b,"$height",o),s=()=>Be(l(),"$color",o),[o,a]=nn();let u=fe(t,"dimensions",8),c=fe(t,"position",8),l=fe(t,"color",8),h=fe(t,"groupName",8),v=fe(t,"top",8),_=fe(t,"left",8);const{width:m,height:b}=u();Sn();var y=Ise();let w;Wt(()=>{ct(y,"id",`mini-${h()}-bounding-box`),w=$r(y,`border: solid 4px ${s()??""};`,w,{top:(r(),St(v()),et(()=>`${r().y-v()}px`)),left:(r(),St(_()),et(()=>`${r().x-_()}px`)),width:`${n()}px`,height:`${i()}px`,"background-color":s()})}),Ne(e,y),tr(),a()}var kse=Bt('<div><div class="node-wrapper svelte-1n32qjc"><!> <!></div> <div class="overlay svelte-1n32qjc"></div></div>');function Y$(e,t){er(t,!1);const r=()=>Be(Ge,"$graphBounds",l),n=()=>Be(Ue,"$groups",l),i=()=>Be(q,"$dimensions",l),s=()=>Be(Y,"$scale",l),o=()=>Be(K,"$translation",l),a=()=>Be($,"$hidden",l),u=()=>Be(Ie,"$nodes",l),c=()=>Be(we,"$groupBoxes",l),[l,h]=nn(),v=qe(),_=qe(),m=qe(),b=qe(),y=qe(),w=qe(),T=qe(),P=qe(),A=qe(),I=qe(),N=qe(),d=qe(),C=qe(),O=qe(),k=qe(),F=qe(),z=qe(),j=qe(),J=qe(),oe=qe(),W=qe(),D=qe(),B=qe();let U=mr("graph"),ie=fe(t,"width",8,100),se=fe(t,"height",24,ie),xe=fe(t,"mapColor",8,null),me=fe(t,"nodeColor",8,null),ee=fe(t,"borderColor",8,null),ce=fe(t,"corner",8,"SE"),re=fe(t,"hideable",8,!1);const te=.9,le=ie()*te,Me=se()*te,Ge=U.bounds.graphBounds,Ie=U.nodes,Ue=U.groups,We=U.transforms,q=U.dimensions,$=n().hidden.nodes,Y=We.scale,K=We.translation,we=U.groupBoxes,he={clientX:0,clientY:0};function Te(vt){a().has(vt)?a().delete(vt):a().add(vt),Ot($,a())}Fe(()=>r(),()=>{pe(v,r())}),Fe(()=>E(v),()=>{pe(_,E(v).top)}),Fe(()=>E(v),()=>{pe(m,E(v).left)}),Fe(()=>E(v),()=>{pe(b,E(v).right)}),Fe(()=>E(v),()=>{pe(y,E(v).bottom)}),Fe(()=>i(),()=>{pe(w,i().width)}),Fe(()=>i(),()=>{pe(T,i().height)}),Fe(()=>(E(b),E(m)),()=>{pe(P,E(b)-E(m))}),Fe(()=>(E(y),E(_)),()=>{pe(A,E(y)-E(_))}),Fe(()=>(E(P),E(A)),()=>{pe(I,E(P)/E(A))}),Fe(()=>(St(ie()),St(se())),()=>{pe(N,ie()/se())}),Fe(()=>(E(w),E(T),s(),o()),()=>{pe(d,Jd(he,0,0,E(w),E(T),s(),o()))}),Fe(()=>(E(w),E(P),s()),()=>{pe(C,E(w)/E(P)/s())}),Fe(()=>(E(T),E(A),s()),()=>{pe(O,E(T)/E(A)/s())}),Fe(()=>(E(d),E(_),E(A)),()=>{pe(k,(E(d).y-E(_))/E(A))}),Fe(()=>(E(d),E(m),E(P)),()=>{pe(F,(E(d).x-E(m))/E(P))}),Fe(()=>(E(I),E(N)),()=>{pe(j,E(I)>=E(N))}),Fe(()=>(E(j),E(P),E(A)),()=>{pe(J,E(j)?le/E(P):Me/E(A))}),Fe(()=>(E(A),E(J)),()=>{pe(B,E(A)*E(J))}),Fe(()=>(St(se()),E(B)),()=>{pe(W,(se()-E(B))/2)}),Fe(()=>(E(P),E(J)),()=>{pe(D,E(P)*E(J))}),Fe(()=>(St(ie()),E(D)),()=>{pe(oe,(ie()-E(D))/2)}),Fe(()=>(E(W),E(k),E(B),E(oe),E(F),E(D),E(C),E(O)),()=>{pe(z,`
		top: ${E(W)+E(k)*E(B)}px;
		left: ${E(oe)+E(F)*E(D)}px;
		width: ${E(C)*E(D)}px;
		height: ${E(O)*E(B)}px;`)}),_i(),Sn();var Ce=kse();let ze,Le;var Oe=gt(Ce);let Ee;var Je=gt(Oe);Bi(Je,1,()=>(u(),et(()=>Array.from(u().entries()))),([vt,ut])=>vt,(vt,ut)=>{var Jt=Rr(()=>_c(E(ut),2));let pr=()=>E(Jt)[1];var sr=Ut(),yr=_t(sr);{var Zr=Nr=>{{let Pn=Oi(()=>(a(),pr(),et(()=>a().has(pr()))));Ose(Nr,{get node(){return pr()},get top(){return E(_)},get left(){return E(m)},get nodeColor(){return me()},get hidden(){return E(Pn)},toggleHidden:Te,get hideable(){return re()}})}};Kt(yr,Nr=>{pr(),et(()=>pr().id!=="N-editor")&&Nr(Zr)})}Ne(vt,sr)});var dt=nt(Je,2);Bi(dt,1,()=>(c(),et(()=>Array.from(c().entries()))),([vt,ut])=>vt,(vt,ut)=>{var Jt=Rr(()=>_c(E(ut),2));let pr=()=>E(Jt)[0];Rse(vt,Wf(()=>E(Jt)[1],{get top(){return E(_)},get left(){return E(m)},get groupName(){return pr()}}))});var Et=nt(Oe,2);Wt(()=>{ze=xn(Ce,1,"minimap-wrapper svelte-1n32qjc",null,ze,{SW:ce()==="SW",NE:ce()==="NE",SE:ce()==="SE",NW:ce()==="NW"}),Le=$r(Ce,"",Le,{width:`${ie()??""}px`,height:`${(se()?se():ie())??""}px`,"--prop-minimap-border-color":ee(),"--prop-minimap-background-color":xe()}),Ee=$r(Oe,"",Ee,{width:`${E(P)??""}px`,height:`${E(A)??""}px`,transform:`scale(${E(J)??""})`}),$r(Et,E(z))}),Ne(e,Ce),tr(),h()}const Mse=Object.freeze(Object.defineProperty({__proto__:null,default:Y$},Symbol.toStringTag,{value:"Module"}));function Lse(e){return e&&typeof e.subscribe=="function"}function Wv(e){const t={};for(const r in e){const n=e[r];if(r==="nodes"&&typeof n=="object"&&typeof n.getAll=="function"){const i=n.getAll();t[r]=i.map(s=>Wv(s))}else if(Lse(n)){const i=Qe(n);t[r]=typeof i=="object"&&i!==null?Wv(i):i}else typeof n=="object"&&n!==null?t[r]=Wv(n):t[r]=n}return t}function Nse(e,t){return t instanceof DOMRectReadOnly?{x:t.x,y:t.y,width:t.width,height:t.height}:t}function qse(e){console.log("graph state object:",e);const t=Wv(e),r=JSON.stringify(t,Nse);return localStorage.setItem("state",r),r}var Dse=Bt('<div><button class="svelte-g9u6j8"><span class="material-symbols-outlined svelte-g9u6j8"> </span></button> <button class="save-button NW svelte-g9u6j8">Save</button></div>');function K$(e,t){er(t,!1),console.log("Componente ThemeToggle.svelte");let r=fe(t,"main",8,"light"),n=fe(t,"alt",8,"dark"),i=fe(t,"mainIcon",8,"light_mode"),s=fe(t,"altIcon",8,"dark_mode"),o=fe(t,"corner",8,"NE"),a=fe(t,"bgColor",8,null),u=fe(t,"iconColor",8,null),c=qe(r());function l(){const P=document.documentElement.getAttribute("svelvet-theme");let A;!P||P===r()?A=n():A=r(),pe(c,A),document.documentElement.setAttribute("svelvet-theme",A),localStorage.setItem("currentTheme",A)}Nn(()=>{const P=localStorage.getItem("currentTheme");P?(document.documentElement.setAttribute("svelvet-theme",P),pe(c,P)):(document.documentElement.setAttribute("svelvet-theme",r()),pe(c,r()));const A=localStorage.getItem("state");if(A){console.log("Al renderizar la aplicacion este componente se ejecuta en este orden");const I=JSON.parse(A);if(I&&I.nodes){const N=Qe(bd);console.log(N),N.set("G-1",I),console.log("Restaurando nodos:",I.nodes)}}});let h=qe();bd.subscribe(P=>{pe(h,P.get("G-1")),console.log("Graph from store:",E(h))}),Sn();var v=Dse();let _,m;var b=gt(v),y=gt(b),w=gt(y),T=nt(b,2);Wt(()=>{_=xn(v,1,"controls-wrapper svelte-g9u6j8",null,_,{SW:o()==="SW",NE:o()==="NE",SE:o()==="SE",NW:o()==="NW"}),m=$r(v,"",m,{"--prop-theme-toggle-color":a(),"--prop-theme-toggle-text-color":u()}),is(w,E(c)===r()?s():i())}),cr("mousedown",b,qo(l)),cr("touchstart",b,qo(l)),cr("click",T,()=>{qse(E(h))}),Ne(e,v),tr()}const Fse=Object.freeze(Object.defineProperty({__proto__:null,default:K$},Symbol.toStringTag,{value:"Module"}));function So(e,t,r){return t.map((n,i)=>e(n,r[i]))}function xv(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function $a(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function Bse(e){return e>>5}function Ha(e){return e&31}function xf(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&Ha(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function VA(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const zse=VA(1,8),Vse=VA(3,3),$se=VA(4,8);function Gse(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function Use(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function jse(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const l=e.slice(Math.max(0,c-2),c);c-=l.length;const h=$se[l];Ha(a)==0&&u++;const v=(1<<4*l.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=4*l.length}a<r&&xf(a,u,o,n,i)}function Hse(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const l=e.slice(Math.max(0,c-8),c);c-=l.length;const h=zse[l];Ha(a)==0&&u++;const v=(1<<1*l.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=1*l.length}a<r&&xf(a,u,o,n,i)}let Wse=class J$ extends Error{constructor(t){super(t),Object.setPrototypeOf(this,J$.prototype)}};function Qi(e,t){if(!e)throw new Wse("Assertion failed: "+t)}let ou=class Lr{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:Qi(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Lr(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Lr.make(t,-1)}static ones(t){return Lr.make(t,1)}static xes(t){return Lr.make(t,0)}static fromBool(t,r=1){return Lr.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),Ha(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Lr(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Lr.fromIteratorPow2(t,r,n):Lr.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const l of t)Ha(s)==0&&o++,a[o]|=(l>>>r&c)<<s,u[o]|=(l&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(l>>>r&c)>>>-s,u[o]=(l&c)>>>-s),s+=r;return s<n&&xf(s,o,i,a,u),new Lr(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const l of t)Ha(s)==0&&o++,a[o]|=(l>>>r&c)<<s,u[o]|=(l&c)<<s,s+=r;return s<n&&xf(s,o,i,a,u),new Lr(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const l of t){const h=l+1+ +(l>0);Ha(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&xf(s,o,i,a,u),new Lr(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return Hse(t,0,r,i,s),new Lr(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let l=t.length-1;l>=0;l--){const h=Vse[t[l]];Ha(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&xf(s,o,i,a,u),new Lr(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return jse(t,0,r,i,s),new Lr(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);Qi(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Lr.fromBin(s,i);case"o":return Lr.fromOct(s,i);case"h":return Lr.fromHex(s,i);case"d":return Lr.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Lr(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Lr.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Lr.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=Ha(t),n=Bse(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=So((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=So((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return Qi(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Lr(this._bits,So((r,n)=>r&n,t._avec,this._avec),So((r,n)=>r&n,t._bvec,this._bvec))}or(t){return Qi(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Lr(this._bits,So((r,n)=>r|n,t._avec,this._avec),So((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return Qi(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Lr(this._bits,xv((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),xv((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return Qi(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Lr(this._bits,So((r,n)=>~(r&n),t._bvec,this._bvec),So((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return Qi(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Lr(this._bits,So((r,n)=>~(r|n),t._bvec,this._bvec),So((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return Qi(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Lr(this._bits,xv((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),xv((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Lr(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=So((r,n)=>r^n,this._avec,this._bvec);return new Lr(this._bits,t,t)}reduceAnd(){return new Lr(1,Uint32Array.of($a((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of($a((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Lr(1,Uint32Array.of($a((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of($a((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Lr(1,Uint32Array.of(~$a((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~$a((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Lr(1,Uint32Array.of(~$a((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~$a((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=So((i,s)=>~i&s,this._avec,this._bvec),r=$a((i,s)=>i|s,t,this._lastmask,0),n=$a((i,s)=>i^s,this._avec,this._lastmask,0);return new Lr(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Lr.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),Ha(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Lr(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Lr(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return Use(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const l=r>>-n;a|=(this._avec[i+1]&l)<<-n,u|=(this._bvec[i+1]&l)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),Gse(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(Qi(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),Qi(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return Qi(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),Qi(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),Qi(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(Qi(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return Qi(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),Qi(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}};ou.empty=ou.zeros(0);ou.one=ou.ones(1);ou.zero=ou.zeros(1);ou.x=ou.xes(1);var es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ah(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xse(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var GI={},UI={},cy={exports:{}},jI;function Jr(){if(jI)return cy.exports;jI=1;var e=cy.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();return typeof __g=="number"&&(__g=e),cy.exports}var ly,HI;function jo(){if(HI)return ly;HI=1;var e={}.hasOwnProperty;return ly=function(t,r){return e.call(t,r)},ly}var fy,WI;function un(){return WI||(WI=1,fy=function(e){try{return!!e()}catch{return!0}}),fy}var hy,XI;function Yn(){return XI||(XI=1,hy=!un()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),hy}var dy={exports:{}},YI;function Aa(){if(YI)return dy.exports;YI=1;var e=dy.exports={version:"2.6.12"};return typeof __e=="number"&&(__e=e),dy.exports}var py={},vy,KI;function yn(){return KI||(KI=1,vy=function(e){return typeof e=="object"?e!==null:typeof e=="function"}),vy}var gy,JI;function Tr(){if(JI)return gy;JI=1;var e=yn();return gy=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},gy}var my,ZI;function $A(){if(ZI)return my;ZI=1;var e=yn(),t=Jr().document,r=e(t)&&e(t.createElement);return my=function(n){return r?t.createElement(n):{}},my}var yy,QI;function Z$(){return QI||(QI=1,yy=!Yn()&&!un()(function(){return Object.defineProperty($A()("div"),"a",{get:function(){return 7}}).a!=7})),yy}var _y,eR;function au(){if(eR)return _y;eR=1;var e=yn();return _y=function(t,r){if(!e(t))return t;var n,i;if(r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t))||typeof(n=t.valueOf)=="function"&&!e(i=n.call(t))||!r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},_y}var tR;function hi(){if(tR)return py;tR=1;var e=Tr(),t=Z$(),r=au(),n=Object.defineProperty;return py.f=Yn()?Object.defineProperty:function(s,o,a){if(e(s),o=r(o,!0),e(a),t)try{return n(s,o,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(s[o]=a.value),s},py}var by,rR;function Cl(){return rR||(rR=1,by=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),by}var wy,nR;function lo(){if(nR)return wy;nR=1;var e=hi(),t=Cl();return wy=Yn()?function(r,n,i){return e.f(r,n,t(1,i))}:function(r,n,i){return r[n]=i,r},wy}var xy={exports:{}},Sy,iR;function Ol(){if(iR)return Sy;iR=1;var e=0,t=Math.random();return Sy=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++e+t).toString(36))},Sy}var Ey={exports:{}},Ay,sR;function Ic(){return sR||(sR=1,Ay=!1),Ay}var oR;function Zd(){if(oR)return Ey.exports;oR=1;var e=Aa(),t=Jr(),r="__core-js_shared__",n=t[r]||(t[r]={});return(Ey.exports=function(i,s){return n[i]||(n[i]=s!==void 0?s:{})})("versions",[]).push({version:e.version,mode:Ic()?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"}),Ey.exports}var Ty,aR;function Yse(){return aR||(aR=1,Ty=Zd()("native-function-to-string",Function.toString)),Ty}var uR;function fo(){if(uR)return xy.exports;uR=1;var e=Jr(),t=lo(),r=jo(),n=Ol()("src"),i=Yse(),s="toString",o=(""+i).split(s);return Aa().inspectSource=function(a){return i.call(a)},(xy.exports=function(a,u,c,l){var h=typeof c=="function";h&&(r(c,"name")||t(c,"name",u)),a[u]!==c&&(h&&(r(c,n)||t(c,n,a[u]?""+a[u]:o.join(String(u)))),a===e?a[u]=c:l?a[u]?a[u]=c:t(a,u,c):(delete a[u],t(a,u,c)))})(Function.prototype,s,function(){return typeof this=="function"&&this[n]||i.call(this)}),xy.exports}var Py,cR;function bs(){return cR||(cR=1,Py=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}),Py}var Cy,lR;function Ta(){if(lR)return Cy;lR=1;var e=bs();return Cy=function(t,r,n){if(e(t),r===void 0)return t;switch(n){case 1:return function(i){return t.call(r,i)};case 2:return function(i,s){return t.call(r,i,s)};case 3:return function(i,s,o){return t.call(r,i,s,o)}}return function(){return t.apply(r,arguments)}},Cy}var Oy,fR;function He(){if(fR)return Oy;fR=1;var e=Jr(),t=Aa(),r=lo(),n=fo(),i=Ta(),s="prototype",o=function(a,u,c){var l=a&o.F,h=a&o.G,v=a&o.S,_=a&o.P,m=a&o.B,b=h?e:v?e[u]||(e[u]={}):(e[u]||{})[s],y=h?t:t[u]||(t[u]={}),w=y[s]||(y[s]={}),T,P,A,I;h&&(c=u);for(T in c)P=!l&&b&&b[T]!==void 0,A=(P?b:c)[T],I=m&&P?i(A,e):_&&typeof A=="function"?i(Function.call,A):A,b&&n(b,T,A,a&o.U),y[T]!=A&&r(y,T,I),_&&w[T]!=A&&(w[T]=A)};return e.core=t,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,Oy=o,Oy}var Iy={exports:{}},hR;function Rc(){if(hR)return Iy.exports;hR=1;var e=Ol()("meta"),t=yn(),r=jo(),n=hi().f,i=0,s=Object.isExtensible||function(){return!0},o=!un()(function(){return s(Object.preventExtensions({}))}),a=function(v){n(v,e,{value:{i:"O"+ ++i,w:{}}})},u=function(v,_){if(!t(v))return typeof v=="symbol"?v:(typeof v=="string"?"S":"P")+v;if(!r(v,e)){if(!s(v))return"F";if(!_)return"E";a(v)}return v[e].i},c=function(v,_){if(!r(v,e)){if(!s(v))return!0;if(!_)return!1;a(v)}return v[e].w},l=function(v){return o&&h.NEED&&s(v)&&!r(v,e)&&a(v),v},h=Iy.exports={KEY:e,NEED:!1,fastKey:u,getWeak:c,onFreeze:l};return Iy.exports}var Ry={exports:{}},dR;function Fn(){if(dR)return Ry.exports;dR=1;var e=Zd()("wks"),t=Ol(),r=Jr().Symbol,n=typeof r=="function",i=Ry.exports=function(s){return e[s]||(e[s]=n&&r[s]||(n?r:t)("Symbol."+s))};return i.store=e,Ry.exports}var ky,pR;function uh(){if(pR)return ky;pR=1;var e=hi().f,t=jo(),r=Fn()("toStringTag");return ky=function(n,i,s){n&&!t(n=s?n:n.prototype,r)&&e(n,r,{configurable:!0,value:i})},ky}var My={},vR;function Q$(){return vR||(vR=1,My.f=Fn()),My}var Ly,gR;function GA(){if(gR)return Ly;gR=1;var e=Jr(),t=Aa(),r=Ic(),n=Q$(),i=hi().f;return Ly=function(s){var o=t.Symbol||(t.Symbol=r?{}:e.Symbol||{});s.charAt(0)!="_"&&!(s in o)&&i(o,s,{value:n.f(s)})},Ly}var Ny,mR;function Pa(){if(mR)return Ny;mR=1;var e={}.toString;return Ny=function(t){return e.call(t).slice(8,-1)},Ny}var qy,yR;function Qd(){if(yR)return qy;yR=1;var e=Pa();return qy=Object("z").propertyIsEnumerable(0)?Object:function(t){return e(t)=="String"?t.split(""):Object(t)},qy}var Dy,_R;function uu(){return _R||(_R=1,Dy=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}),Dy}var Fy,bR;function Ho(){if(bR)return Fy;bR=1;var e=Qd(),t=uu();return Fy=function(r){return e(t(r))},Fy}var By,wR;function Ca(){if(wR)return By;wR=1;var e=Math.ceil,t=Math.floor;return By=function(r){return isNaN(r=+r)?0:(r>0?t:e)(r)},By}var zy,xR;function $n(){if(xR)return zy;xR=1;var e=Ca(),t=Math.min;return zy=function(r){return r>0?t(e(r),9007199254740991):0},zy}var Vy,SR;function Il(){if(SR)return Vy;SR=1;var e=Ca(),t=Math.max,r=Math.min;return Vy=function(n,i){return n=e(n),n<0?t(n+i,0):r(n,i)},Vy}var $y,ER;function Mg(){if(ER)return $y;ER=1;var e=Ho(),t=$n(),r=Il();return $y=function(n){return function(i,s,o){var a=e(i),u=t(a.length),c=r(o,u),l;if(n&&s!=s){for(;u>c;)if(l=a[c++],l!=l)return!0}else for(;u>c;c++)if((n||c in a)&&a[c]===s)return n||c||0;return!n&&-1}},$y}var Gy,AR;function UA(){if(AR)return Gy;AR=1;var e=Zd()("keys"),t=Ol();return Gy=function(r){return e[r]||(e[r]=t(r))},Gy}var Uy,TR;function eG(){if(TR)return Uy;TR=1;var e=jo(),t=Ho(),r=Mg()(!1),n=UA()("IE_PROTO");return Uy=function(i,s){var o=t(i),a=0,u=[],c;for(c in o)c!=n&&e(o,c)&&u.push(c);for(;s.length>a;)e(o,c=s[a++])&&(~r(u,c)||u.push(c));return u},Uy}var jy,PR;function jA(){return PR||(PR=1,jy="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")),jy}var Hy,CR;function Rl(){if(CR)return Hy;CR=1;var e=eG(),t=jA();return Hy=Object.keys||function(n){return e(n,t)},Hy}var Wy={},OR;function Lg(){return OR||(OR=1,Wy.f=Object.getOwnPropertySymbols),Wy}var Xy={},IR;function ep(){return IR||(IR=1,Xy.f={}.propertyIsEnumerable),Xy}var Yy,RR;function Kse(){if(RR)return Yy;RR=1;var e=Rl(),t=Lg(),r=ep();return Yy=function(n){var i=e(n),s=t.f;if(s)for(var o=s(n),a=r.f,u=0,c;o.length>u;)a.call(n,c=o[u++])&&i.push(c);return i},Yy}var Ky,kR;function Ng(){if(kR)return Ky;kR=1;var e=Pa();return Ky=Array.isArray||function(r){return e(r)=="Array"},Ky}var Jy,MR;function bi(){if(MR)return Jy;MR=1;var e=uu();return Jy=function(t){return Object(e(t))},Jy}var Zy,LR;function tG(){if(LR)return Zy;LR=1;var e=hi(),t=Tr(),r=Rl();return Zy=Yn()?Object.defineProperties:function(i,s){t(i);for(var o=r(s),a=o.length,u=0,c;a>u;)e.f(i,c=o[u++],s[c]);return i},Zy}var Qy,NR;function HA(){if(NR)return Qy;NR=1;var e=Jr().document;return Qy=e&&e.documentElement,Qy}var e_,qR;function kl(){if(qR)return e_;qR=1;var e=Tr(),t=tG(),r=jA(),n=UA()("IE_PROTO"),i=function(){},s="prototype",o=function(){var a=$A()("iframe"),u=r.length,c="<",l=">",h;for(a.style.display="none",HA().appendChild(a),a.src="javascript:",h=a.contentWindow.document,h.open(),h.write(c+"script"+l+"document.F=Object"+c+"/script"+l),h.close(),o=h.F;u--;)delete o[s][r[u]];return o()};return e_=Object.create||function(u,c){var l;return u!==null?(i[s]=e(u),l=new i,i[s]=null,l[n]=u):l=o(),c===void 0?l:t(l,c)},e_}var t_={},r_={},DR;function Ml(){if(DR)return r_;DR=1;var e=eG(),t=jA().concat("length","prototype");return r_.f=Object.getOwnPropertyNames||function(n){return e(n,t)},r_}var FR;function rG(){if(FR)return t_;FR=1;var e=Ho(),t=Ml().f,r={}.toString,n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(s){try{return t(s)}catch{return n.slice()}};return t_.f=function(o){return n&&r.call(o)=="[object Window]"?i(o):t(e(o))},t_}var n_={},BR;function Wo(){if(BR)return n_;BR=1;var e=ep(),t=Cl(),r=Ho(),n=au(),i=jo(),s=Z$(),o=Object.getOwnPropertyDescriptor;return n_.f=Yn()?o:function(u,c){if(u=r(u),c=n(c,!0),s)try{return o(u,c)}catch{}if(i(u,c))return t(!e.f.call(u,c),u[c])},n_}var zR;function Jse(){if(zR)return UI;zR=1;var e=Jr(),t=jo(),r=Yn(),n=He(),i=fo(),s=Rc().KEY,o=un(),a=Zd(),u=uh(),c=Ol(),l=Fn(),h=Q$(),v=GA(),_=Kse(),m=Ng(),b=Tr(),y=yn(),w=bi(),T=Ho(),P=au(),A=Cl(),I=kl(),N=rG(),d=Wo(),C=Lg(),O=hi(),k=Rl(),F=d.f,z=O.f,j=N.f,J=e.Symbol,oe=e.JSON,W=oe&&oe.stringify,D="prototype",B=l("_hidden"),U=l("toPrimitive"),ie={}.propertyIsEnumerable,se=a("symbol-registry"),xe=a("symbols"),me=a("op-symbols"),ee=Object[D],ce=typeof J=="function"&&!!C.f,re=e.QObject,te=!re||!re[D]||!re[D].findChild,le=r&&o(function(){return I(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a!=7})?function(Le,Oe,Ee){var Je=F(ee,Oe);Je&&delete ee[Oe],z(Le,Oe,Ee),Je&&Le!==ee&&z(ee,Oe,Je)}:z,Me=function(Le){var Oe=xe[Le]=I(J[D]);return Oe._k=Le,Oe},Ge=ce&&typeof J.iterator=="symbol"?function(Le){return typeof Le=="symbol"}:function(Le){return Le instanceof J},Ie=function(Oe,Ee,Je){return Oe===ee&&Ie(me,Ee,Je),b(Oe),Ee=P(Ee,!0),b(Je),t(xe,Ee)?(Je.enumerable?(t(Oe,B)&&Oe[B][Ee]&&(Oe[B][Ee]=!1),Je=I(Je,{enumerable:A(0,!1)})):(t(Oe,B)||z(Oe,B,A(1,{})),Oe[B][Ee]=!0),le(Oe,Ee,Je)):z(Oe,Ee,Je)},Ue=function(Oe,Ee){b(Oe);for(var Je=_(Ee=T(Ee)),dt=0,Et=Je.length,vt;Et>dt;)Ie(Oe,vt=Je[dt++],Ee[vt]);return Oe},We=function(Oe,Ee){return Ee===void 0?I(Oe):Ue(I(Oe),Ee)},q=function(Oe){var Ee=ie.call(this,Oe=P(Oe,!0));return this===ee&&t(xe,Oe)&&!t(me,Oe)?!1:Ee||!t(this,Oe)||!t(xe,Oe)||t(this,B)&&this[B][Oe]?Ee:!0},$=function(Oe,Ee){if(Oe=T(Oe),Ee=P(Ee,!0),!(Oe===ee&&t(xe,Ee)&&!t(me,Ee))){var Je=F(Oe,Ee);return Je&&t(xe,Ee)&&!(t(Oe,B)&&Oe[B][Ee])&&(Je.enumerable=!0),Je}},Y=function(Oe){for(var Ee=j(T(Oe)),Je=[],dt=0,Et;Ee.length>dt;)!t(xe,Et=Ee[dt++])&&Et!=B&&Et!=s&&Je.push(Et);return Je},K=function(Oe){for(var Ee=Oe===ee,Je=j(Ee?me:T(Oe)),dt=[],Et=0,vt;Je.length>Et;)t(xe,vt=Je[Et++])&&(!Ee||t(ee,vt))&&dt.push(xe[vt]);return dt};ce||(J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor!");var Oe=c(arguments.length>0?arguments[0]:void 0),Ee=function(Je){this===ee&&Ee.call(me,Je),t(this,B)&&t(this[B],Oe)&&(this[B][Oe]=!1),le(this,Oe,A(1,Je))};return r&&te&&le(ee,Oe,{configurable:!0,set:Ee}),Me(Oe)},i(J[D],"toString",function(){return this._k}),d.f=$,O.f=Ie,Ml().f=N.f=Y,ep().f=q,C.f=K,r&&!Ic()&&i(ee,"propertyIsEnumerable",q,!0),h.f=function(Le){return Me(l(Le))}),n(n.G+n.W+n.F*!ce,{Symbol:J});for(var we="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),he=0;we.length>he;)l(we[he++]);for(var Te=k(l.store),Ce=0;Te.length>Ce;)v(Te[Ce++]);n(n.S+n.F*!ce,"Symbol",{for:function(Le){return t(se,Le+="")?se[Le]:se[Le]=J(Le)},keyFor:function(Oe){if(!Ge(Oe))throw TypeError(Oe+" is not a symbol!");for(var Ee in se)if(se[Ee]===Oe)return Ee},useSetter:function(){te=!0},useSimple:function(){te=!1}}),n(n.S+n.F*!ce,"Object",{create:We,defineProperty:Ie,defineProperties:Ue,getOwnPropertyDescriptor:$,getOwnPropertyNames:Y,getOwnPropertySymbols:K});var ze=o(function(){C.f(1)});return n(n.S+n.F*ze,"Object",{getOwnPropertySymbols:function(Oe){return C.f(w(Oe))}}),oe&&n(n.S+n.F*(!ce||o(function(){var Le=J();return W([Le])!="[null]"||W({a:Le})!="{}"||W(Object(Le))!="{}"})),"JSON",{stringify:function(Oe){for(var Ee=[Oe],Je=1,dt,Et;arguments.length>Je;)Ee.push(arguments[Je++]);if(Et=dt=Ee[1],!(!y(dt)&&Oe===void 0||Ge(Oe)))return m(dt)||(dt=function(vt,ut){if(typeof Et=="function"&&(ut=Et.call(this,vt,ut)),!Ge(ut))return ut}),Ee[1]=dt,W.apply(oe,Ee)}}),J[D][U]||lo()(J[D],U,J[D].valueOf),u(J,"Symbol"),u(Math,"Math",!0),u(e.JSON,"JSON",!0),UI}var VR={},$R;function Zse(){if($R)return VR;$R=1;var e=He();return e(e.S,"Object",{create:kl()}),VR}var GR={},UR;function Qse(){if(UR)return GR;UR=1;var e=He();return e(e.S+e.F*!Yn(),"Object",{defineProperty:hi().f}),GR}var jR={},HR;function eoe(){if(HR)return jR;HR=1;var e=He();return e(e.S+e.F*!Yn(),"Object",{defineProperties:tG()}),jR}var WR={},i_,XR;function cu(){if(XR)return i_;XR=1;var e=He(),t=Aa(),r=un();return i_=function(n,i){var s=(t.Object||{})[n]||Object[n],o={};o[n]=i(s),e(e.S+e.F*r(function(){s(1)}),"Object",o)},i_}var YR;function toe(){if(YR)return WR;YR=1;var e=Ho(),t=Wo().f;return cu()("getOwnPropertyDescriptor",function(){return function(n,i){return t(e(n),i)}}),WR}var KR={},s_,JR;function Xo(){if(JR)return s_;JR=1;var e=jo(),t=bi(),r=UA()("IE_PROTO"),n=Object.prototype;return s_=Object.getPrototypeOf||function(i){return i=t(i),e(i,r)?i[r]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?n:null},s_}var ZR;function roe(){if(ZR)return KR;ZR=1;var e=bi(),t=Xo();return cu()("getPrototypeOf",function(){return function(n){return t(e(n))}}),KR}var QR={},ek;function noe(){if(ek)return QR;ek=1;var e=bi(),t=Rl();return cu()("keys",function(){return function(n){return t(e(n))}}),QR}var tk={},rk;function ioe(){return rk||(rk=1,cu()("getOwnPropertyNames",function(){return rG().f})),tk}var nk={},ik;function soe(){if(ik)return nk;ik=1;var e=yn(),t=Rc().onFreeze;return cu()("freeze",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),nk}var sk={},ok;function ooe(){if(ok)return sk;ok=1;var e=yn(),t=Rc().onFreeze;return cu()("seal",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),sk}var ak={},uk;function aoe(){if(uk)return ak;uk=1;var e=yn(),t=Rc().onFreeze;return cu()("preventExtensions",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),ak}var ck={},lk;function uoe(){if(lk)return ck;lk=1;var e=yn();return cu()("isFrozen",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),ck}var fk={},hk;function coe(){if(hk)return fk;hk=1;var e=yn();return cu()("isSealed",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),fk}var dk={},pk;function loe(){if(pk)return dk;pk=1;var e=yn();return cu()("isExtensible",function(t){return function(n){return e(n)?t?t(n):!0:!1}}),dk}var vk={},o_,gk;function nG(){if(gk)return o_;gk=1;var e=Yn(),t=Rl(),r=Lg(),n=ep(),i=bi(),s=Qd(),o=Object.assign;return o_=!o||un()(function(){var a={},u={},c=Symbol(),l="abcdefghijklmnopqrst";return a[c]=7,l.split("").forEach(function(h){u[h]=h}),o({},a)[c]!=7||Object.keys(o({},u)).join("")!=l})?function(u,c){for(var l=i(u),h=arguments.length,v=1,_=r.f,m=n.f;h>v;)for(var b=s(arguments[v++]),y=_?t(b).concat(_(b)):t(b),w=y.length,T=0,P;w>T;)P=y[T++],(!e||m.call(b,P))&&(l[P]=b[P]);return l}:o,o_}var mk;function foe(){if(mk)return vk;mk=1;var e=He();return e(e.S+e.F,"Object",{assign:nG()}),vk}var yk={},a_,_k;function iG(){return _k||(_k=1,a_=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!=t&&r!=r}),a_}var bk;function hoe(){if(bk)return yk;bk=1;var e=He();return e(e.S,"Object",{is:iG()}),yk}var wk={},u_,xk;function WA(){if(xk)return u_;xk=1;var e=yn(),t=Tr(),r=function(n,i){if(t(n),!e(i)&&i!==null)throw TypeError(i+": can't set as prototype!")};return u_={set:Object.setPrototypeOf||("__proto__"in{}?function(n,i,s){try{s=Ta()(Function.call,Wo().f(Object.prototype,"__proto__").set,2),s(n,[]),i=!(n instanceof Array)}catch{i=!0}return function(a,u){return r(a,u),i?a.__proto__=u:s(a,u),a}}({},!1):void 0),check:r},u_}var Sk;function doe(){if(Sk)return wk;Sk=1;var e=He();return e(e.S,"Object",{setPrototypeOf:WA().set}),wk}var Ek={},c_,Ak;function ch(){if(Ak)return c_;Ak=1;var e=Pa(),t=Fn()("toStringTag"),r=e(function(){return arguments}())=="Arguments",n=function(i,s){try{return i[s]}catch{}};return c_=function(i){var s,o,a;return i===void 0?"Undefined":i===null?"Null":typeof(o=n(s=Object(i),t))=="string"?o:r?e(s):(a=e(s))=="Object"&&typeof s.callee=="function"?"Arguments":a},c_}var Tk;function poe(){if(Tk)return Ek;Tk=1;var e=ch(),t={};return t[Fn()("toStringTag")]="z",t+""!="[object z]"&&fo()(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0),Ek}var Pk={},l_,Ck;function sG(){return Ck||(Ck=1,l_=function(e,t,r){var n=r===void 0;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}),l_}var f_,Ok;function oG(){if(Ok)return f_;Ok=1;var e=bs(),t=yn(),r=sG(),n=[].slice,i={},s=function(o,a,u){if(!(a in i)){for(var c=[],l=0;l<a;l++)c[l]="a["+l+"]";i[a]=Function("F,a","return new F("+c.join(",")+")")}return i[a](o,u)};return f_=Function.bind||function(a){var u=e(this),c=n.call(arguments,1),l=function(){var h=c.concat(n.call(arguments));return this instanceof l?s(u,h.length,h):r(u,h,a)};return t(u.prototype)&&(l.prototype=u.prototype),l},f_}var Ik;function voe(){if(Ik)return Pk;Ik=1;var e=He();return e(e.P,"Function",{bind:oG()}),Pk}var Rk={},kk;function goe(){if(kk)return Rk;kk=1;var e=hi().f,t=Function.prototype,r=/^\s*function ([^ (]*)/,n="name";return n in t||Yn()&&e(t,n,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch{return""}}}),Rk}var Mk={},Lk;function moe(){if(Lk)return Mk;Lk=1;var e=yn(),t=Xo(),r=Fn()("hasInstance"),n=Function.prototype;return r in n||hi().f(n,r,{value:function(i){if(typeof this!="function"||!e(i))return!1;if(!e(this.prototype))return i instanceof this;for(;i=t(i);)if(this.prototype===i)return!0;return!1}}),Mk}var Nk={},h_,qk;function XA(){return qk||(qk=1,h_=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\uFEFF`),h_}var d_,Dk;function lh(){if(Dk)return d_;Dk=1;var e=He(),t=uu(),r=un(),n=XA(),i="["+n+"]",s="âÂ",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),u=function(l,h,v){var _={},m=r(function(){return!!n[l]()||s[l]()!=s}),b=_[l]=m?h(c):n[l];v&&(_[v]=b),e(e.P+e.F*m,"String",_)},c=u.trim=function(l,h){return l=String(t(l)),h&1&&(l=l.replace(o,"")),h&2&&(l=l.replace(a,"")),l};return d_=u,d_}var p_,Fk;function aG(){if(Fk)return p_;Fk=1;var e=Jr().parseInt,t=lh().trim,r=XA(),n=/^[-+]?0[xX]/;return p_=e(r+"08")!==8||e(r+"0x16")!==22?function(s,o){var a=t(String(s),3);return e(a,o>>>0||(n.test(a)?16:10))}:e,p_}var Bk;function yoe(){if(Bk)return Nk;Bk=1;var e=He(),t=aG();return e(e.G+e.F*(parseInt!=t),{parseInt:t}),Nk}var zk={},v_,Vk;function uG(){if(Vk)return v_;Vk=1;var e=Jr().parseFloat,t=lh().trim;return v_=1/e(XA()+"-0")!==-1/0?function(n){var i=t(String(n),3),s=e(i);return s===0&&i.charAt(0)=="-"?-0:s}:e,v_}var $k;function _oe(){if($k)return zk;$k=1;var e=He(),t=uG();return e(e.G+e.F*(parseFloat!=t),{parseFloat:t}),zk}var Gk={},g_,Uk;function YA(){if(Uk)return g_;Uk=1;var e=yn(),t=WA().set;return g_=function(r,n,i){var s=n.constructor,o;return s!==i&&typeof s=="function"&&(o=s.prototype)!==i.prototype&&e(o)&&t&&t(r,o),r},g_}var jk;function boe(){if(jk)return Gk;jk=1;var e=Jr(),t=jo(),r=Pa(),n=YA(),i=au(),s=un(),o=Ml().f,a=Wo().f,u=hi().f,c=lh().trim,l="Number",h=e[l],v=h,_=h.prototype,m=r(kl()(_))==l,b="trim"in String.prototype,y=function(A){var I=i(A,!1);if(typeof I=="string"&&I.length>2){I=b?I.trim():c(I,3);var N=I.charCodeAt(0),d,C,O;if(N===43||N===45){if(d=I.charCodeAt(2),d===88||d===120)return NaN}else if(N===48){switch(I.charCodeAt(1)){case 66:case 98:C=2,O=49;break;case 79:case 111:C=8,O=55;break;default:return+I}for(var k=I.slice(2),F=0,z=k.length,j;F<z;F++)if(j=k.charCodeAt(F),j<48||j>O)return NaN;return parseInt(k,C)}}return+I};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(I){var N=arguments.length<1?0:I,d=this;return d instanceof h&&(m?s(function(){_.valueOf.call(d)}):r(d)!=l)?n(new v(y(N)),d,h):y(N)};for(var w=Yn()?o(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0,P;w.length>T;T++)t(v,P=w[T])&&!t(h,P)&&u(h,P,a(v,P));h.prototype=_,_.constructor=h,fo()(e,l,h)}return Gk}var Hk={},m_,Wk;function cG(){if(Wk)return m_;Wk=1;var e=Pa();return m_=function(t,r){if(typeof t!="number"&&e(t)!="Number")throw TypeError(r);return+t},m_}var y_,Xk;function KA(){if(Xk)return y_;Xk=1;var e=Ca(),t=uu();return y_=function(n){var i=String(t(this)),s="",o=e(n);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))o&1&&(s+=i);return s},y_}var Yk;function woe(){if(Yk)return Hk;Yk=1;var e=He(),t=Ca(),r=cG(),n=KA(),i=1 .toFixed,s=Math.floor,o=[0,0,0,0,0,0],a="Number.toFixed: incorrect invocation!",u="0",c=function(m,b){for(var y=-1,w=b;++y<6;)w+=m*o[y],o[y]=w%1e7,w=s(w/1e7)},l=function(m){for(var b=6,y=0;--b>=0;)y+=o[b],o[b]=s(y/m),y=y%m*1e7},h=function(){for(var m=6,b="";--m>=0;)if(b!==""||m===0||o[m]!==0){var y=String(o[m]);b=b===""?y:b+n.call(u,7-y.length)+y}return b},v=function(m,b,y){return b===0?y:b%2===1?v(m,b-1,y*m):v(m*m,b/2,y)},_=function(m){for(var b=0,y=m;y>=4096;)b+=12,y/=4096;for(;y>=2;)b+=1,y/=2;return b};return e(e.P+e.F*(!!i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!un()(function(){i.call({})})),"Number",{toFixed:function(b){var y=r(this,a),w=t(b),T="",P=u,A,I,N,d;if(w<0||w>20)throw RangeError(a);if(y!=y)return"NaN";if(y<=-1e21||y>=1e21)return String(y);if(y<0&&(T="-",y=-y),y>1e-21)if(A=_(y*v(2,69,1))-69,I=A<0?y*v(2,-A,1):y/v(2,A,1),I*=4503599627370496,A=52-A,A>0){for(c(0,I),N=w;N>=7;)c(1e7,0),N-=7;for(c(v(10,N,1),0),N=A-1;N>=23;)l(1<<23),N-=23;l(1<<N),c(1,1),l(2),P=h()}else c(0,I),c(1<<-A,0),P=h()+n.call(u,w);return w>0?(d=P.length,P=T+(d<=w?"0."+n.call(u,w-d)+P:P.slice(0,d-w)+"."+P.slice(d-w))):P=T+P,P}}),Hk}var Kk={},Jk;function xoe(){if(Jk)return Kk;Jk=1;var e=He(),t=un(),r=cG(),n=1 .toPrecision;return e(e.P+e.F*(t(function(){return n.call(1,void 0)!=="1"})||!t(function(){n.call({})})),"Number",{toPrecision:function(s){var o=r(this,"Number#toPrecision: incorrect invocation!");return s===void 0?n.call(o):n.call(o,s)}}),Kk}var Zk={},Qk;function Soe(){if(Qk)return Zk;Qk=1;var e=He();return e(e.S,"Number",{EPSILON:Math.pow(2,-52)}),Zk}var eM={},tM;function Eoe(){if(tM)return eM;tM=1;var e=He(),t=Jr().isFinite;return e(e.S,"Number",{isFinite:function(n){return typeof n=="number"&&t(n)}}),eM}var rM={},__,nM;function lG(){if(nM)return __;nM=1;var e=yn(),t=Math.floor;return __=function(n){return!e(n)&&isFinite(n)&&t(n)===n},__}var iM;function Aoe(){if(iM)return rM;iM=1;var e=He();return e(e.S,"Number",{isInteger:lG()}),rM}var sM={},oM;function Toe(){if(oM)return sM;oM=1;var e=He();return e(e.S,"Number",{isNaN:function(r){return r!=r}}),sM}var aM={},uM;function Poe(){if(uM)return aM;uM=1;var e=He(),t=lG(),r=Math.abs;return e(e.S,"Number",{isSafeInteger:function(i){return t(i)&&r(i)<=9007199254740991}}),aM}var cM={},lM;function Coe(){if(lM)return cM;lM=1;var e=He();return e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),cM}var fM={},hM;function Ooe(){if(hM)return fM;hM=1;var e=He();return e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),fM}var dM={},pM;function Ioe(){if(pM)return dM;pM=1;var e=He(),t=uG();return e(e.S+e.F*(Number.parseFloat!=t),"Number",{parseFloat:t}),dM}var vM={},gM;function Roe(){if(gM)return vM;gM=1;var e=He(),t=aG();return e(e.S+e.F*(Number.parseInt!=t),"Number",{parseInt:t}),vM}var mM={},b_,yM;function fG(){return yM||(yM=1,b_=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),b_}var _M;function koe(){if(_M)return mM;_M=1;var e=He(),t=fG(),r=Math.sqrt,n=Math.acosh;return e(e.S+e.F*!(n&&Math.floor(n(Number.MAX_VALUE))==710&&n(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:t(s-1+r(s-1)*r(s+1))}}),mM}var bM={},wM;function Moe(){if(wM)return bM;wM=1;var e=He(),t=Math.asinh;function r(n){return!isFinite(n=+n)||n==0?n:n<0?-r(-n):Math.log(n+Math.sqrt(n*n+1))}return e(e.S+e.F*!(t&&1/t(0)>0),"Math",{asinh:r}),bM}var xM={},SM;function Loe(){if(SM)return xM;SM=1;var e=He(),t=Math.atanh;return e(e.S+e.F*!(t&&1/t(-0)<0),"Math",{atanh:function(n){return(n=+n)==0?n:Math.log((1+n)/(1-n))/2}}),xM}var EM={},w_,AM;function JA(){return AM||(AM=1,w_=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}),w_}var TM;function Noe(){if(TM)return EM;TM=1;var e=He(),t=JA();return e(e.S,"Math",{cbrt:function(n){return t(n=+n)*Math.pow(Math.abs(n),1/3)}}),EM}var PM={},CM;function qoe(){if(CM)return PM;CM=1;var e=He();return e(e.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}}),PM}var OM={},IM;function Doe(){if(IM)return OM;IM=1;var e=He(),t=Math.exp;return e(e.S,"Math",{cosh:function(n){return(t(n=+n)+t(-n))/2}}),OM}var RM={},x_,kM;function ZA(){if(kM)return x_;kM=1;var e=Math.expm1;return x_=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(r){return(r=+r)==0?r:r>-1e-6&&r<1e-6?r+r*r/2:Math.exp(r)-1}:e,x_}var MM;function Foe(){if(MM)return RM;MM=1;var e=He(),t=ZA();return e(e.S+e.F*(t!=Math.expm1),"Math",{expm1:t}),RM}var LM={},S_,NM;function hG(){if(NM)return S_;NM=1;var e=JA(),t=Math.pow,r=t(2,-52),n=t(2,-23),i=t(2,127)*(2-n),s=t(2,-126),o=function(a){return a+1/r-1/r};return S_=Math.fround||function(u){var c=Math.abs(u),l=e(u),h,v;return c<s?l*o(c/s/n)*s*n:(h=(1+n/r)*c,v=h-(h-c),v>i||v!=v?l*(1/0):l*v)},S_}var qM;function Boe(){if(qM)return LM;qM=1;var e=He();return e(e.S,"Math",{fround:hG()}),LM}var DM={},FM;function zoe(){if(FM)return DM;FM=1;var e=He(),t=Math.abs;return e(e.S,"Math",{hypot:function(n,i){for(var s=0,o=0,a=arguments.length,u=0,c,l;o<a;)c=t(arguments[o++]),u<c?(l=u/c,s=s*l*l+1,u=c):c>0?(l=c/u,s+=l*l):s+=c;return u===1/0?1/0:u*Math.sqrt(s)}}),DM}var BM={},zM;function Voe(){if(zM)return BM;zM=1;var e=He(),t=Math.imul;return e(e.S+e.F*un()(function(){return t(4294967295,5)!=-5||t.length!=2}),"Math",{imul:function(n,i){var s=65535,o=+n,a=+i,u=s&o,c=s&a;return 0|u*c+((s&o>>>16)*c+u*(s&a>>>16)<<16>>>0)}}),BM}var VM={},$M;function $oe(){if($M)return VM;$M=1;var e=He();return e(e.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}}),VM}var GM={},UM;function Goe(){if(UM)return GM;UM=1;var e=He();return e(e.S,"Math",{log1p:fG()}),GM}var jM={},HM;function Uoe(){if(HM)return jM;HM=1;var e=He();return e(e.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}}),jM}var WM={},XM;function joe(){if(XM)return WM;XM=1;var e=He();return e(e.S,"Math",{sign:JA()}),WM}var YM={},KM;function Hoe(){if(KM)return YM;KM=1;var e=He(),t=ZA(),r=Math.exp;return e(e.S+e.F*un()(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(i){return Math.abs(i=+i)<1?(t(i)-t(-i))/2:(r(i-1)-r(-i-1))*(Math.E/2)}}),YM}var JM={},ZM;function Woe(){if(ZM)return JM;ZM=1;var e=He(),t=ZA(),r=Math.exp;return e(e.S,"Math",{tanh:function(i){var s=t(i=+i),o=t(-i);return s==1/0?1:o==1/0?-1:(s-o)/(r(i)+r(-i))}}),JM}var QM={},eL;function Xoe(){if(eL)return QM;eL=1;var e=He();return e(e.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}}),QM}var tL={},rL;function Yoe(){if(rL)return tL;rL=1;var e=He(),t=Il(),r=String.fromCharCode,n=String.fromCodePoint;return e(e.S+e.F*(!!n&&n.length!=1),"String",{fromCodePoint:function(s){for(var o=[],a=arguments.length,u=0,c;a>u;){if(c=+arguments[u++],t(c,1114111)!==c)throw RangeError(c+" is not a valid code point");o.push(c<65536?r(c):r(((c-=65536)>>10)+55296,c%1024+56320))}return o.join("")}}),tL}var nL={},iL;function Koe(){if(iL)return nL;iL=1;var e=He(),t=Ho(),r=$n();return e(e.S,"String",{raw:function(i){for(var s=t(i.raw),o=r(s.length),a=arguments.length,u=[],c=0;o>c;)u.push(String(s[c++])),c<a&&u.push(String(arguments[c]));return u.join("")}}),nL}var sL={},oL;function Joe(){return oL||(oL=1,lh()("trim",function(e){return function(){return e(this,3)}})),sL}var aL={},E_,uL;function qg(){if(uL)return E_;uL=1;var e=Ca(),t=uu();return E_=function(r){return function(n,i){var s=String(t(n)),o=e(i),a=s.length,u,c;return o<0||o>=a?r?"":void 0:(u=s.charCodeAt(o),u<55296||u>56319||o+1===a||(c=s.charCodeAt(o+1))<56320||c>57343?r?s.charAt(o):u:r?s.slice(o,o+2):(u-55296<<10)+(c-56320)+65536)}},E_}var A_,cL;function fh(){return cL||(cL=1,A_={}),A_}var T_,lL;function QA(){if(lL)return T_;lL=1;var e=kl(),t=Cl(),r=uh(),n={};return lo()(n,Fn()("iterator"),function(){return this}),T_=function(i,s,o){i.prototype=e(n,{next:t(1,o)}),r(i,s+" Iterator")},T_}var P_,fL;function eT(){if(fL)return P_;fL=1;var e=Ic(),t=He(),r=fo(),n=lo(),i=fh(),s=QA(),o=uh(),a=Xo(),u=Fn()("iterator"),c=!([].keys&&"next"in[].keys()),l="@@iterator",h="keys",v="values",_=function(){return this};return P_=function(m,b,y,w,T,P,A){s(y,b,w);var I=function(D){if(!c&&D in O)return O[D];switch(D){case h:return function(){return new y(this,D)};case v:return function(){return new y(this,D)}}return function(){return new y(this,D)}},N=b+" Iterator",d=T==v,C=!1,O=m.prototype,k=O[u]||O[l]||T&&O[T],F=k||I(T),z=T?d?I("entries"):F:void 0,j=b=="Array"&&O.entries||k,J,oe,W;if(j&&(W=a(j.call(new m)),W!==Object.prototype&&W.next&&(o(W,N,!0),!e&&typeof W[u]!="function"&&n(W,u,_))),d&&k&&k.name!==v&&(C=!0,F=function(){return k.call(this)}),(!e||A)&&(c||C||!O[u])&&n(O,u,F),i[b]=F,i[N]=_,T)if(J={values:d?F:I(v),keys:P?F:I(h),entries:z},A)for(oe in J)oe in O||r(O,oe,J[oe]);else t(t.P+t.F*(c||C),b,J);return J},P_}var hL;function Zoe(){if(hL)return aL;hL=1;var e=qg()(!0);return eT()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,r=this._i,n;return r>=t.length?{value:void 0,done:!0}:(n=e(t,r),this._i+=n.length,{value:n,done:!1})}),aL}var dL={},pL;function Qoe(){if(pL)return dL;pL=1;var e=He(),t=qg()(!1);return e(e.P,"String",{codePointAt:function(n){return t(this,n)}}),dL}var vL={},C_,gL;function Dg(){if(gL)return C_;gL=1;var e=yn(),t=Pa(),r=Fn()("match");return C_=function(n){var i;return e(n)&&((i=n[r])!==void 0?!!i:t(n)=="RegExp")},C_}var O_,mL;function tT(){if(mL)return O_;mL=1;var e=Dg(),t=uu();return O_=function(r,n,i){if(e(n))throw TypeError("String#"+i+" doesn't accept regex!");return String(t(r))},O_}var I_,yL;function rT(){if(yL)return I_;yL=1;var e=Fn()("match");return I_=function(t){var r=/./;try{"/./"[t](r)}catch{try{return r[e]=!1,!"/./"[t](r)}catch{}}return!0},I_}var _L;function eae(){if(_L)return vL;_L=1;var e=He(),t=$n(),r=tT(),n="endsWith",i=""[n];return e(e.P+e.F*rT()(n),"String",{endsWith:function(o){var a=r(this,o,n),u=arguments.length>1?arguments[1]:void 0,c=t(a.length),l=u===void 0?c:Math.min(t(u),c),h=String(o);return i?i.call(a,h,l):a.slice(l-h.length,l)===h}}),vL}var bL={},wL;function tae(){if(wL)return bL;wL=1;var e=He(),t=tT(),r="includes";return e(e.P+e.F*rT()(r),"String",{includes:function(i){return!!~t(this,i,r).indexOf(i,arguments.length>1?arguments[1]:void 0)}}),bL}var xL={},SL;function rae(){if(SL)return xL;SL=1;var e=He();return e(e.P,"String",{repeat:KA()}),xL}var EL={},AL;function nae(){if(AL)return EL;AL=1;var e=He(),t=$n(),r=tT(),n="startsWith",i=""[n];return e(e.P+e.F*rT()(n),"String",{startsWith:function(o){var a=r(this,o,n),u=t(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),c=String(o);return i?i.call(a,c,u):a.slice(u,u+c.length)===c}}),EL}var TL={},R_,PL;function ho(){if(PL)return R_;PL=1;var e=He(),t=un(),r=uu(),n=/"/g,i=function(s,o,a,u){var c=String(r(s)),l="<"+o;return a!==""&&(l+=" "+a+'="'+String(u).replace(n,"&quot;")+'"'),l+">"+c+"</"+o+">"};return R_=function(s,o){var a={};a[s]=o(i),e(e.P+e.F*t(function(){var u=""[s]('"');return u!==u.toLowerCase()||u.split('"').length>3}),"String",a)},R_}var CL;function iae(){return CL||(CL=1,ho()("anchor",function(e){return function(r){return e(this,"a","name",r)}})),TL}var OL={},IL;function sae(){return IL||(IL=1,ho()("big",function(e){return function(){return e(this,"big","","")}})),OL}var RL={},kL;function oae(){return kL||(kL=1,ho()("blink",function(e){return function(){return e(this,"blink","","")}})),RL}var ML={},LL;function aae(){return LL||(LL=1,ho()("bold",function(e){return function(){return e(this,"b","","")}})),ML}var NL={},qL;function uae(){return qL||(qL=1,ho()("fixed",function(e){return function(){return e(this,"tt","","")}})),NL}var DL={},FL;function cae(){return FL||(FL=1,ho()("fontcolor",function(e){return function(r){return e(this,"font","color",r)}})),DL}var BL={},zL;function lae(){return zL||(zL=1,ho()("fontsize",function(e){return function(r){return e(this,"font","size",r)}})),BL}var VL={},$L;function fae(){return $L||($L=1,ho()("italics",function(e){return function(){return e(this,"i","","")}})),VL}var GL={},UL;function hae(){return UL||(UL=1,ho()("link",function(e){return function(r){return e(this,"a","href",r)}})),GL}var jL={},HL;function dae(){return HL||(HL=1,ho()("small",function(e){return function(){return e(this,"small","","")}})),jL}var WL={},XL;function pae(){return XL||(XL=1,ho()("strike",function(e){return function(){return e(this,"strike","","")}})),WL}var YL={},KL;function vae(){return KL||(KL=1,ho()("sub",function(e){return function(){return e(this,"sub","","")}})),YL}var JL={},ZL;function gae(){return ZL||(ZL=1,ho()("sup",function(e){return function(){return e(this,"sup","","")}})),JL}var QL={},eN;function mae(){if(eN)return QL;eN=1;var e=He();return e(e.S,"Date",{now:function(){return new Date().getTime()}}),QL}var tN={},rN;function yae(){if(rN)return tN;rN=1;var e=He(),t=bi(),r=au();return e(e.P+e.F*un()(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(i){var s=t(this),o=r(s);return typeof o=="number"&&!isFinite(o)?null:s.toISOString()}}),tN}var nN={},k_,iN;function _ae(){if(iN)return k_;iN=1;var e=un(),t=Date.prototype.getTime,r=Date.prototype.toISOString,n=function(i){return i>9?i:"0"+i};return k_=e(function(){return r.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!e(function(){r.call(new Date(NaN))})?function(){if(!isFinite(t.call(this)))throw RangeError("Invalid time value");var s=this,o=s.getUTCFullYear(),a=s.getUTCMilliseconds(),u=o<0?"-":o>9999?"+":"";return u+("00000"+Math.abs(o)).slice(u?-6:-4)+"-"+n(s.getUTCMonth()+1)+"-"+n(s.getUTCDate())+"T"+n(s.getUTCHours())+":"+n(s.getUTCMinutes())+":"+n(s.getUTCSeconds())+"."+(a>99?a:"0"+n(a))+"Z"}:r,k_}var sN;function bae(){if(sN)return nN;sN=1;var e=He(),t=_ae();return e(e.P+e.F*(Date.prototype.toISOString!==t),"Date",{toISOString:t}),nN}var oN={},aN;function wae(){if(aN)return oN;aN=1;var e=Date.prototype,t="Invalid Date",r="toString",n=e[r],i=e.getTime;return new Date(NaN)+""!=t&&fo()(e,r,function(){var o=i.call(this);return o===o?n.call(this):t}),oN}var uN={},M_,cN;function xae(){if(cN)return M_;cN=1;var e=Tr(),t=au(),r="number";return M_=function(n){if(n!=="string"&&n!==r&&n!=="default")throw TypeError("Incorrect hint");return t(e(this),n!=r)},M_}var lN;function Sae(){if(lN)return uN;lN=1;var e=Fn()("toPrimitive"),t=Date.prototype;return e in t||lo()(t,e,xae()),uN}var fN={},hN;function Eae(){if(hN)return fN;hN=1;var e=He();return e(e.S,"Array",{isArray:Ng()}),fN}var dN={},L_,pN;function dG(){if(pN)return L_;pN=1;var e=Tr();return L_=function(t,r,n,i){try{return i?r(e(n)[0],n[1]):r(n)}catch(o){var s=t.return;throw s!==void 0&&e(s.call(t)),o}},L_}var N_,vN;function nT(){if(vN)return N_;vN=1;var e=fh(),t=Fn()("iterator"),r=Array.prototype;return N_=function(n){return n!==void 0&&(e.Array===n||r[t]===n)},N_}var q_,gN;function iT(){if(gN)return q_;gN=1;var e=hi(),t=Cl();return q_=function(r,n,i){n in r?e.f(r,n,t(0,i)):r[n]=i},q_}var D_,mN;function sT(){if(mN)return D_;mN=1;var e=ch(),t=Fn()("iterator"),r=fh();return D_=Aa().getIteratorMethod=function(n){if(n!=null)return n[t]||n["@@iterator"]||r[e(n)]},D_}var F_,yN;function Fg(){if(yN)return F_;yN=1;var e=Fn()("iterator"),t=!1;try{var r=[7][e]();r.return=function(){t=!0},Array.from(r,function(){throw 2})}catch{}return F_=function(n,i){if(!i&&!t)return!1;var s=!1;try{var o=[7],a=o[e]();a.next=function(){return{done:s=!0}},o[e]=function(){return a},n(o)}catch{}return s},F_}var _N;function Aae(){if(_N)return dN;_N=1;var e=Ta(),t=He(),r=bi(),n=dG(),i=nT(),s=$n(),o=iT(),a=sT();return t(t.S+t.F*!Fg()(function(u){Array.from(u)}),"Array",{from:function(c){var l=r(c),h=typeof this=="function"?this:Array,v=arguments.length,_=v>1?arguments[1]:void 0,m=_!==void 0,b=0,y=a(l),w,T,P,A;if(m&&(_=e(_,v>2?arguments[2]:void 0,2)),y!=null&&!(h==Array&&i(y)))for(A=y.call(l),T=new h;!(P=A.next()).done;b++)o(T,b,m?n(A,_,[P.value,b],!0):P.value);else for(w=s(l.length),T=new h(w);w>b;b++)o(T,b,m?_(l[b],b):l[b]);return T.length=b,T}}),dN}var bN={},wN;function Tae(){if(wN)return bN;wN=1;var e=He(),t=iT();return e(e.S+e.F*un()(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var n=0,i=arguments.length,s=new(typeof this=="function"?this:Array)(i);i>n;)t(s,n,arguments[n++]);return s.length=i,s}}),bN}var xN={},B_,SN;function Oa(){if(SN)return B_;SN=1;var e=un();return B_=function(t,r){return!!t&&e(function(){r?t.call(null,function(){},1):t.call(null)})},B_}var EN;function Pae(){if(EN)return xN;EN=1;var e=He(),t=Ho(),r=[].join;return e(e.P+e.F*(Qd()!=Object||!Oa()(r)),"Array",{join:function(i){return r.call(t(this),i===void 0?",":i)}}),xN}var AN={},TN;function Cae(){if(TN)return AN;TN=1;var e=He(),t=HA(),r=Pa(),n=Il(),i=$n(),s=[].slice;return e(e.P+e.F*un()(function(){t&&s.call(t)}),"Array",{slice:function(a,u){var c=i(this.length),l=r(this);if(u=u===void 0?c:u,l=="Array")return s.call(this,a,u);for(var h=n(a,c),v=n(u,c),_=i(v-h),m=new Array(_),b=0;b<_;b++)m[b]=l=="String"?this.charAt(h+b):this[h+b];return m}}),AN}var PN={},CN;function Oae(){if(CN)return PN;CN=1;var e=He(),t=bs(),r=bi(),n=un(),i=[].sort,s=[1,2,3];return e(e.P+e.F*(n(function(){s.sort(void 0)})||!n(function(){s.sort(null)})||!Oa()(i)),"Array",{sort:function(a){return a===void 0?i.call(r(this)):i.call(r(this),t(a))}}),PN}var ON={},z_,IN;function Iae(){if(IN)return z_;IN=1;var e=yn(),t=Ng(),r=Fn()("species");return z_=function(n){var i;return t(n)&&(i=n.constructor,typeof i=="function"&&(i===Array||t(i.prototype))&&(i=void 0),e(i)&&(i=i[r],i===null&&(i=void 0))),i===void 0?Array:i},z_}var V_,RN;function oT(){if(RN)return V_;RN=1;var e=Iae();return V_=function(t,r){return new(e(t))(r)},V_}var $_,kN;function lu(){if(kN)return $_;kN=1;var e=Ta(),t=Qd(),r=bi(),n=$n(),i=oT();return $_=function(s,o){var a=s==1,u=s==2,c=s==3,l=s==4,h=s==6,v=s==5||h,_=o||i;return function(m,b,y){for(var w=r(m),T=t(w),P=e(b,y,3),A=n(T.length),I=0,N=a?_(m,A):u?_(m,0):void 0,d,C;A>I;I++)if((v||I in T)&&(d=T[I],C=P(d,I,w),s)){if(a)N[I]=C;else if(C)switch(s){case 3:return!0;case 5:return d;case 6:return I;case 2:N.push(d)}else if(l)return!1}return h?-1:c||l?l:N}},$_}var MN;function Rae(){if(MN)return ON;MN=1;var e=He(),t=lu()(0),r=Oa()([].forEach,!0);return e(e.P+e.F*!r,"Array",{forEach:function(i){return t(this,i,arguments[1])}}),ON}var LN={},NN;function kae(){if(NN)return LN;NN=1;var e=He(),t=lu()(1);return e(e.P+e.F*!Oa()([].map,!0),"Array",{map:function(n){return t(this,n,arguments[1])}}),LN}var qN={},DN;function Mae(){if(DN)return qN;DN=1;var e=He(),t=lu()(2);return e(e.P+e.F*!Oa()([].filter,!0),"Array",{filter:function(n){return t(this,n,arguments[1])}}),qN}var FN={},BN;function Lae(){if(BN)return FN;BN=1;var e=He(),t=lu()(3);return e(e.P+e.F*!Oa()([].some,!0),"Array",{some:function(n){return t(this,n,arguments[1])}}),FN}var zN={},VN;function Nae(){if(VN)return zN;VN=1;var e=He(),t=lu()(4);return e(e.P+e.F*!Oa()([].every,!0),"Array",{every:function(n){return t(this,n,arguments[1])}}),zN}var $N={},G_,GN;function pG(){if(GN)return G_;GN=1;var e=bs(),t=bi(),r=Qd(),n=$n();return G_=function(i,s,o,a,u){e(s);var c=t(i),l=r(c),h=n(c.length),v=u?h-1:0,_=u?-1:1;if(o<2)for(;;){if(v in l){a=l[v],v+=_;break}if(v+=_,u?v<0:h<=v)throw TypeError("Reduce of empty array with no initial value")}for(;u?v>=0:h>v;v+=_)v in l&&(a=s(a,l[v],v,c));return a},G_}var UN;function qae(){if(UN)return $N;UN=1;var e=He(),t=pG();return e(e.P+e.F*!Oa()([].reduce,!0),"Array",{reduce:function(n){return t(this,n,arguments.length,arguments[1],!1)}}),$N}var jN={},HN;function Dae(){if(HN)return jN;HN=1;var e=He(),t=pG();return e(e.P+e.F*!Oa()([].reduceRight,!0),"Array",{reduceRight:function(n){return t(this,n,arguments.length,arguments[1],!0)}}),jN}var WN={},XN;function Fae(){if(XN)return WN;XN=1;var e=He(),t=Mg()(!1),r=[].indexOf,n=!!r&&1/[1].indexOf(1,-0)<0;return e(e.P+e.F*(n||!Oa()(r)),"Array",{indexOf:function(s){return n?r.apply(this,arguments)||0:t(this,s,arguments[1])}}),WN}var YN={},KN;function Bae(){if(KN)return YN;KN=1;var e=He(),t=Ho(),r=Ca(),n=$n(),i=[].lastIndexOf,s=!!i&&1/[1].lastIndexOf(1,-0)<0;return e(e.P+e.F*(s||!Oa()(i)),"Array",{lastIndexOf:function(a){if(s)return i.apply(this,arguments)||0;var u=t(this),c=n(u.length),l=c-1;for(arguments.length>1&&(l=Math.min(l,r(arguments[1]))),l<0&&(l=c+l);l>=0;l--)if(l in u&&u[l]===a)return l||0;return-1}}),YN}var JN={},U_,ZN;function vG(){if(ZN)return U_;ZN=1;var e=bi(),t=Il(),r=$n();return U_=[].copyWithin||function(i,s){var o=e(this),a=r(o.length),u=t(i,a),c=t(s,a),l=arguments.length>2?arguments[2]:void 0,h=Math.min((l===void 0?a:t(l,a))-c,a-u),v=1;for(c<u&&u<c+h&&(v=-1,c+=h-1,u+=h-1);h-- >0;)c in o?o[u]=o[c]:delete o[u],u+=v,c+=v;return o},U_}var j_,QN;function kc(){if(QN)return j_;QN=1;var e=Fn()("unscopables"),t=Array.prototype;return t[e]==null&&lo()(t,e,{}),j_=function(r){t[e][r]=!0},j_}var e3;function zae(){if(e3)return JN;e3=1;var e=He();return e(e.P,"Array",{copyWithin:vG()}),kc()("copyWithin"),JN}var t3={},H_,r3;function aT(){if(r3)return H_;r3=1;var e=bi(),t=Il(),r=$n();return H_=function(i){for(var s=e(this),o=r(s.length),a=arguments.length,u=t(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,l=c===void 0?o:t(c,o);l>u;)s[u++]=i;return s},H_}var n3;function Vae(){if(n3)return t3;n3=1;var e=He();return e(e.P,"Array",{fill:aT()}),kc()("fill"),t3}var i3={},s3;function $ae(){if(s3)return i3;s3=1;var e=He(),t=lu()(5),r="find",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{find:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),kc()(r),i3}var o3={},a3;function Gae(){if(a3)return o3;a3=1;var e=He(),t=lu()(6),r="findIndex",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{findIndex:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),kc()(r),o3}var u3={},W_,c3;function Ll(){if(c3)return W_;c3=1;var e=Jr(),t=hi(),r=Yn(),n=Fn()("species");return W_=function(i){var s=e[i];r&&s&&!s[n]&&t.f(s,n,{configurable:!0,get:function(){return this}})},W_}var l3;function Uae(){return l3||(l3=1,Ll()("Array")),u3}var X_,f3;function gG(){return f3||(f3=1,X_=function(e,t){return{value:t,done:!!e}}),X_}var Y_,h3;function uT(){if(h3)return Y_;h3=1;var e=kc(),t=gG(),r=fh(),n=Ho();return Y_=eT()(Array,"Array",function(i,s){this._t=n(i),this._i=0,this._k=s},function(){var i=this._t,s=this._k,o=this._i++;return!i||o>=i.length?(this._t=void 0,t(1)):s=="keys"?t(0,o):s=="values"?t(0,i[o]):t(0,[o,i[o]])},"values"),r.Arguments=r.Array,e("keys"),e("values"),e("entries"),Y_}var d3={},K_,p3;function tp(){if(p3)return K_;p3=1;var e=Tr();return K_=function(){var t=e(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},K_}var v3;function jae(){if(v3)return d3;v3=1;var e=Jr(),t=YA(),r=hi().f,n=Ml().f,i=Dg(),s=tp(),o=e.RegExp,a=o,u=o.prototype,c=/a/g,l=/a/g,h=new o(c)!==c;if(Yn()&&(!h||un()(function(){return l[Fn()("match")]=!1,o(c)!=c||o(l)==l||o(c,"i")!="/a/i"}))){o=function(y,w){var T=this instanceof o,P=i(y),A=w===void 0;return!T&&P&&y.constructor===o&&A?y:t(h?new a(P&&!A?y.source:y,w):a((P=y instanceof o)?y.source:y,P&&A?s.call(y):w),T?this:u,o)};for(var v=function(b){b in o||r(o,b,{configurable:!0,get:function(){return a[b]},set:function(y){a[b]=y}})},_=n(a),m=0;_.length>m;)v(_[m++]);u.constructor=o,o.prototype=u,fo()(e,"RegExp",o)}return Ll()("RegExp"),d3}var g3={},J_,m3;function cT(){if(m3)return J_;m3=1;var e=tp(),t=RegExp.prototype.exec,r=String.prototype.replace,n=t,i="lastIndex",s=function(){var u=/a/,c=/b*/g;return t.call(u,"a"),t.call(c,"a"),u[i]!==0||c[i]!==0}(),o=/()??/.exec("")[1]!==void 0,a=s||o;return a&&(n=function(c){var l=this,h,v,_,m;return o&&(v=new RegExp("^"+l.source+"$(?!\\s)",e.call(l))),s&&(h=l[i]),_=t.call(l,c),s&&_&&(l[i]=l.global?_.index+_[0].length:h),o&&_&&_.length>1&&r.call(_[0],v,function(){for(m=1;m<arguments.length-2;m++)arguments[m]===void 0&&(_[m]=void 0)}),_}),J_=n,J_}var y3;function mG(){if(y3)return g3;y3=1;var e=cT();return He()({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e}),g3}var _3={},b3={},w3;function yG(){return w3||(w3=1,Yn()&&/./g.flags!="g"&&hi().f(RegExp.prototype,"flags",{configurable:!0,get:tp()})),b3}var x3;function Hae(){if(x3)return _3;x3=1,yG();var e=Tr(),t=tp(),r=Yn(),n="toString",i=/./[n],s=function(o){fo()(RegExp.prototype,n,o,!0)};return un()(function(){return i.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var a=e(this);return"/".concat(a.source,"/","flags"in a?a.flags:!r&&a instanceof RegExp?t.call(a):void 0)}):i.name!=n&&s(function(){return i.call(this)}),_3}var S3={},Z_,E3;function lT(){if(E3)return Z_;E3=1;var e=qg()(!0);return Z_=function(t,r,n){return r+(n?e(t,r).length:1)},Z_}var Q_,A3;function Bg(){if(A3)return Q_;A3=1;var e=ch(),t=RegExp.prototype.exec;return Q_=function(r,n){var i=r.exec;if(typeof i=="function"){var s=i.call(r,n);if(typeof s!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if(e(r)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return t.call(r,n)},Q_}var eb,T3;function zg(){if(T3)return eb;T3=1,mG();var e=fo(),t=lo(),r=un(),n=uu(),i=Fn(),s=cT(),o=i("species"),a=!r(function(){var c=/./;return c.exec=function(){var l=[];return l.groups={a:"7"},l},"".replace(c,"$<a>")!=="7"}),u=function(){var c=/(?:)/,l=c.exec;c.exec=function(){return l.apply(this,arguments)};var h="ab".split(c);return h.length===2&&h[0]==="a"&&h[1]==="b"}();return eb=function(c,l,h){var v=i(c),_=!r(function(){var P={};return P[v]=function(){return 7},""[c](P)!=7}),m=_?!r(function(){var P=!1,A=/a/;return A.exec=function(){return P=!0,null},c==="split"&&(A.constructor={},A.constructor[o]=function(){return A}),A[v](""),!P}):void 0;if(!_||!m||c==="replace"&&!a||c==="split"&&!u){var b=/./[v],y=h(n,v,""[c],function(A,I,N,d,C){return I.exec===s?_&&!C?{done:!0,value:b.call(I,N,d)}:{done:!0,value:A.call(N,I,d)}:{done:!1}}),w=y[0],T=y[1];e(String.prototype,c,w),t(RegExp.prototype,v,l==2?function(P,A){return T.call(P,this,A)}:function(P){return T.call(P,this)})}},eb}var P3;function Wae(){if(P3)return S3;P3=1;var e=Tr(),t=$n(),r=lT(),n=Bg();return zg()("match",1,function(i,s,o,a){return[function(c){var l=i(this),h=c==null?void 0:c[s];return h!==void 0?h.call(c,l):new RegExp(c)[s](String(l))},function(u){var c=a(o,u,this);if(c.done)return c.value;var l=e(u),h=String(this);if(!l.global)return n(l,h);var v=l.unicode;l.lastIndex=0;for(var _=[],m=0,b;(b=n(l,h))!==null;){var y=String(b[0]);_[m]=y,y===""&&(l.lastIndex=r(h,t(l.lastIndex),v)),m++}return m===0?null:_}]}),S3}var C3={},O3;function Xae(){if(O3)return C3;O3=1;var e=Tr(),t=bi(),r=$n(),n=Ca(),i=lT(),s=Bg(),o=Math.max,a=Math.min,u=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,l=/\$([$&`']|\d\d?)/g,h=function(v){return v===void 0?v:String(v)};return zg()("replace",2,function(v,_,m,b){return[function(T,P){var A=v(this),I=T==null?void 0:T[_];return I!==void 0?I.call(T,A,P):m.call(String(A),T,P)},function(w,T){var P=b(m,w,this,T);if(P.done)return P.value;var A=e(w),I=String(this),N=typeof T=="function";N||(T=String(T));var d=A.global;if(d){var C=A.unicode;A.lastIndex=0}for(var O=[];;){var k=s(A,I);if(k===null||(O.push(k),!d))break;var F=String(k[0]);F===""&&(A.lastIndex=i(I,r(A.lastIndex),C))}for(var z="",j=0,J=0;J<O.length;J++){k=O[J];for(var oe=String(k[0]),W=o(a(n(k.index),I.length),0),D=[],B=1;B<k.length;B++)D.push(h(k[B]));var U=k.groups;if(N){var ie=[oe].concat(D,W,I);U!==void 0&&ie.push(U);var se=String(T.apply(void 0,ie))}else se=y(oe,I,W,D,U,T);W>=j&&(z+=I.slice(j,W)+se,j=W+oe.length)}return z+I.slice(j)}];function y(w,T,P,A,I,N){var d=P+w.length,C=A.length,O=l;return I!==void 0&&(I=t(I),O=c),m.call(N,O,function(k,F){var z;switch(F.charAt(0)){case"$":return"$";case"&":return w;case"`":return T.slice(0,P);case"'":return T.slice(d);case"<":z=I[F.slice(1,-1)];break;default:var j=+F;if(j===0)return k;if(j>C){var J=u(j/10);return J===0?k:J<=C?A[J-1]===void 0?F.charAt(1):A[J-1]+F.charAt(1):k}z=A[j-1]}return z===void 0?"":z})}}),C3}var I3={},R3;function Yae(){if(R3)return I3;R3=1;var e=Tr(),t=iG(),r=Bg();return zg()("search",1,function(n,i,s,o){return[function(u){var c=n(this),l=u==null?void 0:u[i];return l!==void 0?l.call(u,c):new RegExp(u)[i](String(c))},function(a){var u=o(s,a,this);if(u.done)return u.value;var c=e(a),l=String(this),h=c.lastIndex;t(h,0)||(c.lastIndex=0);var v=r(c,l);return t(c.lastIndex,h)||(c.lastIndex=h),v===null?-1:v.index}]}),I3}var k3={},tb,M3;function rp(){if(M3)return tb;M3=1;var e=Tr(),t=bs(),r=Fn()("species");return tb=function(n,i){var s=e(n).constructor,o;return s===void 0||(o=e(s)[r])==null?i:t(o)},tb}var L3;function Kae(){if(L3)return k3;L3=1;var e=Dg(),t=Tr(),r=rp(),n=lT(),i=$n(),s=Bg(),o=cT(),a=un(),u=Math.min,c=[].push,l="split",h="length",v="lastIndex",_=4294967295,m=!a(function(){});return zg()("split",2,function(b,y,w,T){var P;return"abbc"[l](/(b)*/)[1]=="c"||"test"[l](/(?:)/,-1)[h]!=4||"ab"[l](/(?:ab)*/)[h]!=2||"."[l](/(.?)(.?)/)[h]!=4||"."[l](/()()/)[h]>1||""[l](/.?/)[h]?P=function(A,I){var N=String(this);if(A===void 0&&I===0)return[];if(!e(A))return w.call(N,A,I);for(var d=[],C=(A.ignoreCase?"i":"")+(A.multiline?"m":"")+(A.unicode?"u":"")+(A.sticky?"y":""),O=0,k=I===void 0?_:I>>>0,F=new RegExp(A.source,C+"g"),z,j,J;(z=o.call(F,N))&&(j=F[v],!(j>O&&(d.push(N.slice(O,z.index)),z[h]>1&&z.index<N[h]&&c.apply(d,z.slice(1)),J=z[0][h],O=j,d[h]>=k)));)F[v]===z.index&&F[v]++;return O===N[h]?(J||!F.test(""))&&d.push(""):d.push(N.slice(O)),d[h]>k?d.slice(0,k):d}:"0"[l](void 0,0)[h]?P=function(A,I){return A===void 0&&I===0?[]:w.call(this,A,I)}:P=w,[function(I,N){var d=b(this),C=I==null?void 0:I[y];return C!==void 0?C.call(I,d,N):P.call(String(d),I,N)},function(A,I){var N=T(P,A,this,I,P!==w);if(N.done)return N.value;var d=t(A),C=String(this),O=r(d,RegExp),k=d.unicode,F=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),z=new O(m?d:"^(?:"+d.source+")",F),j=I===void 0?_:I>>>0;if(j===0)return[];if(C.length===0)return s(z,C)===null?[C]:[];for(var J=0,oe=0,W=[];oe<C.length;){z.lastIndex=m?oe:0;var D=s(z,m?C:C.slice(oe)),B;if(D===null||(B=u(i(z.lastIndex+(m?0:oe)),C.length))===J)oe=n(C,oe,k);else{if(W.push(C.slice(J,oe)),W.length===j)return W;for(var U=1;U<=D.length-1;U++)if(W.push(D[U]),W.length===j)return W;oe=J=B}}return W.push(C.slice(J)),W}]}),k3}var N3={},rb,q3;function Nl(){return q3||(q3=1,rb=function(e,t,r,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(r+": incorrect invocation!");return e}),rb}var nb={exports:{}},D3;function ql(){if(D3)return nb.exports;D3=1;var e=Ta(),t=dG(),r=nT(),n=Tr(),i=$n(),s=sT(),o={},a={},u=nb.exports=function(c,l,h,v,_){var m=_?function(){return c}:s(c),b=e(h,v,l?2:1),y=0,w,T,P,A;if(typeof m!="function")throw TypeError(c+" is not iterable!");if(r(m)){for(w=i(c.length);w>y;y++)if(A=l?b(n(T=c[y])[0],T[1]):b(c[y]),A===o||A===a)return A}else for(P=m.call(c);!(T=P.next()).done;)if(A=t(P,b,T.value,l),A===o||A===a)return A};return u.BREAK=o,u.RETURN=a,nb.exports}var ib,F3;function fT(){if(F3)return ib;F3=1;var e=Ta(),t=sG(),r=HA(),n=$A(),i=Jr(),s=i.process,o=i.setImmediate,a=i.clearImmediate,u=i.MessageChannel,c=i.Dispatch,l=0,h={},v="onreadystatechange",_,m,b,y=function(){var T=+this;if(h.hasOwnProperty(T)){var P=h[T];delete h[T],P()}},w=function(T){y.call(T.data)};return(!o||!a)&&(o=function(P){for(var A=[],I=1;arguments.length>I;)A.push(arguments[I++]);return h[++l]=function(){t(typeof P=="function"?P:Function(P),A)},_(l),l},a=function(P){delete h[P]},Pa()(s)=="process"?_=function(T){s.nextTick(e(y,T,1))}:c&&c.now?_=function(T){c.now(e(y,T,1))}:u?(m=new u,b=m.port2,m.port1.onmessage=w,_=e(b.postMessage,b,1)):i.addEventListener&&typeof postMessage=="function"&&!i.importScripts?(_=function(T){i.postMessage(T+"","*")},i.addEventListener("message",w,!1)):v in n("script")?_=function(T){r.appendChild(n("script"))[v]=function(){r.removeChild(this),y.call(T)}}:_=function(T){setTimeout(e(y,T,1),0)}),ib={set:o,clear:a},ib}var sb,B3;function hT(){if(B3)return sb;B3=1;var e=Jr(),t=fT().set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,i=e.Promise,s=Pa()(n)=="process";return sb=function(){var o,a,u,c=function(){var _,m;for(s&&(_=n.domain)&&_.exit();o;){m=o.fn,o=o.next;try{m()}catch(b){throw o?u():a=void 0,b}}a=void 0,_&&_.enter()};if(s)u=function(){n.nextTick(c)};else if(r&&!(e.navigator&&e.navigator.standalone)){var l=!0,h=document.createTextNode("");new r(c).observe(h,{characterData:!0}),u=function(){h.data=l=!l}}else if(i&&i.resolve){var v=i.resolve(void 0);u=function(){v.then(c)}}else u=function(){t.call(e,c)};return function(_){var m={fn:_,next:void 0};a&&(a.next=m),o||(o=m,u()),a=m}},sb}var ob={},z3;function dT(){if(z3)return ob;z3=1;var e=bs();function t(r){var n,i;this.promise=new r(function(s,o){if(n!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");n=s,i=o}),this.resolve=e(n),this.reject=e(i)}return ob.f=function(r){return new t(r)},ob}var ab,V3;function _G(){return V3||(V3=1,ab=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}),ab}var ub,$3;function Vg(){if($3)return ub;$3=1;var e=Jr(),t=e.navigator;return ub=t&&t.userAgent||"",ub}var cb,G3;function bG(){if(G3)return cb;G3=1;var e=Tr(),t=yn(),r=dT();return cb=function(n,i){if(e(n),t(i)&&i.constructor===n)return i;var s=r.f(n),o=s.resolve;return o(i),s.promise},cb}var lb,U3;function Dl(){if(U3)return lb;U3=1;var e=fo();return lb=function(t,r,n){for(var i in r)e(t,i,r[i],n);return t},lb}var j3;function Jae(){if(j3)return N3;j3=1;var e=Ic(),t=Jr(),r=Ta(),n=ch(),i=He(),s=yn(),o=bs(),a=Nl(),u=ql(),c=rp(),l=fT().set,h=hT()(),v=dT(),_=_G(),m=Vg(),b=bG(),y="Promise",w=t.TypeError,T=t.process,P=T&&T.versions,A=P&&P.v8||"",I=t[y],N=n(T)=="process",d=function(){},C,O,k,F,z=O=v.f,j=!!function(){try{var se=I.resolve(1),xe=(se.constructor={})[Fn()("species")]=function(me){me(d,d)};return(N||typeof PromiseRejectionEvent=="function")&&se.then(d)instanceof xe&&A.indexOf("6.6")!==0&&m.indexOf("Chrome/66")===-1}catch{}}(),J=function(se){var xe;return s(se)&&typeof(xe=se.then)=="function"?xe:!1},oe=function(se,xe){if(!se._n){se._n=!0;var me=se._c;h(function(){for(var ee=se._v,ce=se._s==1,re=0,te=function(le){var Me=ce?le.ok:le.fail,Ge=le.resolve,Ie=le.reject,Ue=le.domain,We,q,$;try{Me?(ce||(se._h==2&&B(se),se._h=1),Me===!0?We=ee:(Ue&&Ue.enter(),We=Me(ee),Ue&&(Ue.exit(),$=!0)),We===le.promise?Ie(w("Promise-chain cycle")):(q=J(We))?q.call(We,Ge,Ie):Ge(We)):Ie(ee)}catch(Y){Ue&&!$&&Ue.exit(),Ie(Y)}};me.length>re;)te(me[re++]);se._c=[],se._n=!1,xe&&!se._h&&W(se)})}},W=function(se){l.call(t,function(){var xe=se._v,me=D(se),ee,ce,re;if(me&&(ee=_(function(){N?T.emit("unhandledRejection",xe,se):(ce=t.onunhandledrejection)?ce({promise:se,reason:xe}):(re=t.console)&&re.error&&re.error("Unhandled promise rejection",xe)}),se._h=N||D(se)?2:1),se._a=void 0,me&&ee.e)throw ee.v})},D=function(se){return se._h!==1&&(se._a||se._c).length===0},B=function(se){l.call(t,function(){var xe;N?T.emit("rejectionHandled",se):(xe=t.onrejectionhandled)&&xe({promise:se,reason:se._v})})},U=function(se){var xe=this;xe._d||(xe._d=!0,xe=xe._w||xe,xe._v=se,xe._s=2,xe._a||(xe._a=xe._c.slice()),oe(xe,!0))},ie=function(se){var xe=this,me;if(!xe._d){xe._d=!0,xe=xe._w||xe;try{if(xe===se)throw w("Promise can't be resolved itself");(me=J(se))?h(function(){var ee={_w:xe,_d:!1};try{me.call(se,r(ie,ee,1),r(U,ee,1))}catch(ce){U.call(ee,ce)}}):(xe._v=se,xe._s=1,oe(xe,!1))}catch(ee){U.call({_w:xe,_d:!1},ee)}}};return j||(I=function(xe){a(this,I,y,"_h"),o(xe),C.call(this);try{xe(r(ie,this,1),r(U,this,1))}catch(me){U.call(this,me)}},C=function(xe){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},C.prototype=Dl()(I.prototype,{then:function(xe,me){var ee=z(c(this,I));return ee.ok=typeof xe=="function"?xe:!0,ee.fail=typeof me=="function"&&me,ee.domain=N?T.domain:void 0,this._c.push(ee),this._a&&this._a.push(ee),this._s&&oe(this,!1),ee.promise},catch:function(se){return this.then(void 0,se)}}),k=function(){var se=new C;this.promise=se,this.resolve=r(ie,se,1),this.reject=r(U,se,1)},v.f=z=function(se){return se===I||se===F?new k(se):O(se)}),i(i.G+i.W+i.F*!j,{Promise:I}),uh()(I,y),Ll()(y),F=Aa()[y],i(i.S+i.F*!j,y,{reject:function(xe){var me=z(this),ee=me.reject;return ee(xe),me.promise}}),i(i.S+i.F*(e||!j),y,{resolve:function(xe){return b(e&&this===F?I:this,xe)}}),i(i.S+i.F*!(j&&Fg()(function(se){I.all(se).catch(d)})),y,{all:function(xe){var me=this,ee=z(me),ce=ee.resolve,re=ee.reject,te=_(function(){var le=[],Me=0,Ge=1;u(xe,!1,function(Ie){var Ue=Me++,We=!1;le.push(void 0),Ge++,me.resolve(Ie).then(function(q){We||(We=!0,le[Ue]=q,--Ge||ce(le))},re)}),--Ge||ce(le)});return te.e&&re(te.v),ee.promise},race:function(xe){var me=this,ee=z(me),ce=ee.reject,re=_(function(){u(xe,!1,function(te){me.resolve(te).then(ee.resolve,ce)})});return re.e&&ce(re.v),ee.promise}}),N3}var fb,H3;function wl(){if(H3)return fb;H3=1;var e=yn();return fb=function(t,r){if(!e(t)||t._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return t},fb}var hb,W3;function wG(){if(W3)return hb;W3=1;var e=hi().f,t=kl(),r=Dl(),n=Ta(),i=Nl(),s=ql(),o=eT(),a=gG(),u=Ll(),c=Yn(),l=Rc().fastKey,h=wl(),v=c?"_s":"size",_=function(m,b){var y=l(b),w;if(y!=="F")return m._i[y];for(w=m._f;w;w=w.n)if(w.k==b)return w};return hb={getConstructor:function(m,b,y,w){var T=m(function(P,A){i(P,T,b,"_i"),P._t=b,P._i=t(null),P._f=void 0,P._l=void 0,P[v]=0,A!=null&&s(A,y,P[w],P)});return r(T.prototype,{clear:function(){for(var A=h(this,b),I=A._i,N=A._f;N;N=N.n)N.r=!0,N.p&&(N.p=N.p.n=void 0),delete I[N.i];A._f=A._l=void 0,A[v]=0},delete:function(P){var A=h(this,b),I=_(A,P);if(I){var N=I.n,d=I.p;delete A._i[I.i],I.r=!0,d&&(d.n=N),N&&(N.p=d),A._f==I&&(A._f=N),A._l==I&&(A._l=d),A[v]--}return!!I},forEach:function(A){h(this,b);for(var I=n(A,arguments.length>1?arguments[1]:void 0,3),N;N=N?N.n:this._f;)for(I(N.v,N.k,this);N&&N.r;)N=N.p},has:function(A){return!!_(h(this,b),A)}}),c&&e(T.prototype,"size",{get:function(){return h(this,b)[v]}}),T},def:function(m,b,y){var w=_(m,b),T,P;return w?w.v=y:(m._l=w={i:P=l(b,!0),k:b,v:y,p:T=m._l,n:void 0,r:!1},m._f||(m._f=w),T&&(T.n=w),m[v]++,P!=="F"&&(m._i[P]=w)),m},getEntry:_,setStrong:function(m,b,y){o(m,b,function(w,T){this._t=h(w,b),this._k=T,this._l=void 0},function(){for(var w=this,T=w._k,P=w._l;P&&P.r;)P=P.p;return!w._t||!(w._l=P=P?P.n:w._t._f)?(w._t=void 0,a(1)):T=="keys"?a(0,P.k):T=="values"?a(0,P.v):a(0,[P.k,P.v])},y?"entries":"values",!y,!0),u(b)}},hb}var db,X3;function $g(){if(X3)return db;X3=1;var e=Jr(),t=He(),r=fo(),n=Dl(),i=Rc(),s=ql(),o=Nl(),a=yn(),u=un(),c=Fg(),l=uh(),h=YA();return db=function(v,_,m,b,y,w){var T=e[v],P=T,A=y?"set":"add",I=P&&P.prototype,N={},d=function(j){var J=I[j];r(I,j,j=="delete"?function(oe){return w&&!a(oe)?!1:J.call(this,oe===0?0:oe)}:j=="has"?function(W){return w&&!a(W)?!1:J.call(this,W===0?0:W)}:j=="get"?function(W){return w&&!a(W)?void 0:J.call(this,W===0?0:W)}:j=="add"?function(W){return J.call(this,W===0?0:W),this}:function(W,D){return J.call(this,W===0?0:W,D),this})};if(typeof P!="function"||!(w||I.forEach&&!u(function(){new P().entries().next()})))P=b.getConstructor(_,v,y,A),n(P.prototype,m),i.NEED=!0;else{var C=new P,O=C[A](w?{}:-0,1)!=C,k=u(function(){C.has(1)}),F=c(function(j){new P(j)}),z=!w&&u(function(){for(var j=new P,J=5;J--;)j[A](J,J);return!j.has(-0)});F||(P=_(function(j,J){o(j,P,v);var oe=h(new T,j,P);return J!=null&&s(J,y,oe[A],oe),oe}),P.prototype=I,I.constructor=P),(k||z)&&(d("delete"),d("has"),y&&d("get")),(z||O)&&d(A),w&&I.clear&&delete I.clear}return l(P,v),N[v]=P,t(t.G+t.W+t.F*(P!=T),N),w||b.setStrong(P,v,y),P},db}var pb,Y3;function xG(){if(Y3)return pb;Y3=1;var e=wG(),t=wl(),r="Map";return pb=$g()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{get:function(i){var s=e.getEntry(t(this,r),i);return s&&s.v},set:function(i,s){return e.def(t(this,r),i===0?0:i,s)}},e,!0),pb}var vb,K3;function SG(){if(K3)return vb;K3=1;var e=wG(),t=wl(),r="Set";return vb=$g()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=i===0?0:i,i)}},e),vb}var gb={exports:{}},mb,J3;function EG(){if(J3)return mb;J3=1;var e=Dl(),t=Rc().getWeak,r=Tr(),n=yn(),i=Nl(),s=ql(),o=lu(),a=jo(),u=wl(),c=o(5),l=o(6),h=0,v=function(b){return b._l||(b._l=new _)},_=function(){this.a=[]},m=function(b,y){return c(b.a,function(w){return w[0]===y})};return _.prototype={get:function(b){var y=m(this,b);if(y)return y[1]},has:function(b){return!!m(this,b)},set:function(b,y){var w=m(this,b);w?w[1]=y:this.a.push([b,y])},delete:function(b){var y=l(this.a,function(w){return w[0]===b});return~y&&this.a.splice(y,1),!!~y}},mb={getConstructor:function(b,y,w,T){var P=b(function(A,I){i(A,P,y,"_i"),A._t=y,A._i=h++,A._l=void 0,I!=null&&s(I,w,A[T],A)});return e(P.prototype,{delete:function(A){if(!n(A))return!1;var I=t(A);return I===!0?v(u(this,y)).delete(A):I&&a(I,this._i)&&delete I[this._i]},has:function(I){if(!n(I))return!1;var N=t(I);return N===!0?v(u(this,y)).has(I):N&&a(N,this._i)}}),P},def:function(b,y,w){var T=t(r(y),!0);return T===!0?v(b).set(y,w):T[b._i]=w,b},ufstore:v},mb}var Z3;function AG(){if(Z3)return gb.exports;Z3=1;var e=Jr(),t=lu()(0),r=fo(),n=Rc(),i=nG(),s=EG(),o=yn(),a=wl(),u=wl(),c=!e.ActiveXObject&&"ActiveXObject"in e,l="WeakMap",h=n.getWeak,v=Object.isExtensible,_=s.ufstore,m,b=function(T){return function(){return T(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(P){if(o(P)){var A=h(P);return A===!0?_(a(this,l)).get(P):A?A[this._i]:void 0}},set:function(P,A){return s.def(a(this,l),P,A)}},w=gb.exports=$g()(l,b,y,s,!0,!0);return u&&c&&(m=s.getConstructor(b,l),i(m.prototype,y),n.NEED=!0,t(["delete","has","get","set"],function(T){var P=w.prototype,A=P[T];r(P,T,function(I,N){if(o(I)&&!v(I)){this._f||(this._f=new m);var d=this._f[T](I,N);return T=="set"?this:d}return A.call(this,I,N)})})),gb.exports}var Q3={},eq;function Zae(){if(eq)return Q3;eq=1;var e=EG(),t=wl(),r="WeakSet";return $g()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i,!0)}},e,!1,!0),Q3}var tq={},yb,rq;function Gg(){if(rq)return yb;rq=1;for(var e=Jr(),t=lo(),r=Ol(),n=r("typed_array"),i=r("view"),s=!!(e.ArrayBuffer&&e.DataView),o=s,a=0,u=9,c,l="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");a<u;)(c=e[l[a++]])?(t(c.prototype,n,!0),t(c.prototype,i,!0)):o=!1;return yb={ABV:s,CONSTR:o,TYPED:n,VIEW:i},yb}var _b={},bb,nq;function TG(){if(nq)return bb;nq=1;var e=Ca(),t=$n();return bb=function(r){if(r===void 0)return 0;var n=e(r),i=t(n);if(n!==i)throw RangeError("Wrong length!");return i},bb}var iq;function pT(){return iq||(iq=1,function(e){var t=Jr(),r=Yn(),n=Ic(),i=Gg(),s=lo(),o=Dl(),a=un(),u=Nl(),c=Ca(),l=$n(),h=TG(),v=Ml().f,_=hi().f,m=aT(),b=uh(),y="ArrayBuffer",w="DataView",T="prototype",P="Wrong length!",A="Wrong index!",I=t[y],N=t[w],d=t.Math,C=t.RangeError,O=t.Infinity,k=I,F=d.abs,z=d.pow,j=d.floor,J=d.log,oe=d.LN2,W="buffer",D="byteLength",B="byteOffset",U=r?"_b":W,ie=r?"_l":D,se=r?"_o":B;function xe(he,Te,Ce){var ze=new Array(Ce),Le=Ce*8-Te-1,Oe=(1<<Le)-1,Ee=Oe>>1,Je=Te===23?z(2,-24)-z(2,-77):0,dt=0,Et=he<0||he===0&&1/he<0?1:0,vt,ut,Jt;for(he=F(he),he!=he||he===O?(ut=he!=he?1:0,vt=Oe):(vt=j(J(he)/oe),he*(Jt=z(2,-vt))<1&&(vt--,Jt*=2),vt+Ee>=1?he+=Je/Jt:he+=Je*z(2,1-Ee),he*Jt>=2&&(vt++,Jt/=2),vt+Ee>=Oe?(ut=0,vt=Oe):vt+Ee>=1?(ut=(he*Jt-1)*z(2,Te),vt=vt+Ee):(ut=he*z(2,Ee-1)*z(2,Te),vt=0));Te>=8;ze[dt++]=ut&255,ut/=256,Te-=8);for(vt=vt<<Te|ut,Le+=Te;Le>0;ze[dt++]=vt&255,vt/=256,Le-=8);return ze[--dt]|=Et*128,ze}function me(he,Te,Ce){var ze=Ce*8-Te-1,Le=(1<<ze)-1,Oe=Le>>1,Ee=ze-7,Je=Ce-1,dt=he[Je--],Et=dt&127,vt;for(dt>>=7;Ee>0;Et=Et*256+he[Je],Je--,Ee-=8);for(vt=Et&(1<<-Ee)-1,Et>>=-Ee,Ee+=Te;Ee>0;vt=vt*256+he[Je],Je--,Ee-=8);if(Et===0)Et=1-Oe;else{if(Et===Le)return vt?NaN:dt?-O:O;vt=vt+z(2,Te),Et=Et-Oe}return(dt?-1:1)*vt*z(2,Et-Te)}function ee(he){return he[3]<<24|he[2]<<16|he[1]<<8|he[0]}function ce(he){return[he&255]}function re(he){return[he&255,he>>8&255]}function te(he){return[he&255,he>>8&255,he>>16&255,he>>24&255]}function le(he){return xe(he,52,8)}function Me(he){return xe(he,23,4)}function Ge(he,Te,Ce){_(he[T],Te,{get:function(){return this[Ce]}})}function Ie(he,Te,Ce,ze){var Le=+Ce,Oe=h(Le);if(Oe+Te>he[ie])throw C(A);var Ee=he[U]._b,Je=Oe+he[se],dt=Ee.slice(Je,Je+Te);return ze?dt:dt.reverse()}function Ue(he,Te,Ce,ze,Le,Oe){var Ee=+Ce,Je=h(Ee);if(Je+Te>he[ie])throw C(A);for(var dt=he[U]._b,Et=Je+he[se],vt=ze(+Le),ut=0;ut<Te;ut++)dt[Et+ut]=vt[Oe?ut:Te-ut-1]}if(!i.ABV)I=function(Te){u(this,I,y);var Ce=h(Te);this._b=m.call(new Array(Ce),0),this[ie]=Ce},N=function(Te,Ce,ze){u(this,N,w),u(Te,I,w);var Le=Te[ie],Oe=c(Ce);if(Oe<0||Oe>Le)throw C("Wrong offset!");if(ze=ze===void 0?Le-Oe:l(ze),Oe+ze>Le)throw C(P);this[U]=Te,this[se]=Oe,this[ie]=ze},r&&(Ge(I,D,"_l"),Ge(N,W,"_b"),Ge(N,D,"_l"),Ge(N,B,"_o")),o(N[T],{getInt8:function(Te){return Ie(this,1,Te)[0]<<24>>24},getUint8:function(Te){return Ie(this,1,Te)[0]},getInt16:function(Te){var Ce=Ie(this,2,Te,arguments[1]);return(Ce[1]<<8|Ce[0])<<16>>16},getUint16:function(Te){var Ce=Ie(this,2,Te,arguments[1]);return Ce[1]<<8|Ce[0]},getInt32:function(Te){return ee(Ie(this,4,Te,arguments[1]))},getUint32:function(Te){return ee(Ie(this,4,Te,arguments[1]))>>>0},getFloat32:function(Te){return me(Ie(this,4,Te,arguments[1]),23,4)},getFloat64:function(Te){return me(Ie(this,8,Te,arguments[1]),52,8)},setInt8:function(Te,Ce){Ue(this,1,Te,ce,Ce)},setUint8:function(Te,Ce){Ue(this,1,Te,ce,Ce)},setInt16:function(Te,Ce){Ue(this,2,Te,re,Ce,arguments[2])},setUint16:function(Te,Ce){Ue(this,2,Te,re,Ce,arguments[2])},setInt32:function(Te,Ce){Ue(this,4,Te,te,Ce,arguments[2])},setUint32:function(Te,Ce){Ue(this,4,Te,te,Ce,arguments[2])},setFloat32:function(Te,Ce){Ue(this,4,Te,Me,Ce,arguments[2])},setFloat64:function(Te,Ce){Ue(this,8,Te,le,Ce,arguments[2])}});else{if(!a(function(){I(1)})||!a(function(){new I(-1)})||a(function(){return new I,new I(1.5),new I(NaN),I.name!=y})){I=function(Te){return u(this,I),new k(h(Te))};for(var We=I[T]=k[T],q=v(k),$=0,Y;q.length>$;)(Y=q[$++])in I||s(I,Y,k[Y]);n||(We.constructor=I)}var K=new N(new I(2)),we=N[T].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),(K.getInt8(0)||!K.getInt8(1))&&o(N[T],{setInt8:function(Te,Ce){we.call(this,Te,Ce<<24>>24)},setUint8:function(Te,Ce){we.call(this,Te,Ce<<24>>24)}},!0)}b(I,y),b(N,w),s(N[T],i.VIEW,!0),e[y]=I,e[w]=N}(_b)),_b}var sq;function Qae(){if(sq)return tq;sq=1;var e=He(),t=Gg(),r=pT(),n=Tr(),i=Il(),s=$n(),o=yn(),a=Jr().ArrayBuffer,u=rp(),c=r.ArrayBuffer,l=r.DataView,h=t.ABV&&a.isView,v=c.prototype.slice,_=t.VIEW,m="ArrayBuffer";return e(e.G+e.W+e.F*(a!==c),{ArrayBuffer:c}),e(e.S+e.F*!t.CONSTR,m,{isView:function(y){return h&&h(y)||o(y)&&_ in y}}),e(e.P+e.U+e.F*un()(function(){return!new c(2).slice(1,void 0).byteLength}),m,{slice:function(y,w){if(v!==void 0&&w===void 0)return v.call(n(this),y);for(var T=n(this).byteLength,P=i(y,T),A=i(w===void 0?T:w,T),I=new(u(this,c))(s(A-P)),N=new l(this),d=new l(I),C=0;P<A;)d.setUint8(C++,N.getUint8(P++));return I}}),Ll()(m),tq}var oq={},aq;function eue(){if(aq)return oq;aq=1;var e=He();return e(e.G+e.W+e.F*!Gg().ABV,{DataView:pT().DataView}),oq}var uq={},Sv={exports:{}},cq;function Uu(){if(cq)return Sv.exports;if(cq=1,Yn()){var e=Ic(),t=Jr(),r=un(),n=He(),i=Gg(),s=pT(),o=Ta(),a=Nl(),u=Cl(),c=lo(),l=Dl(),h=Ca(),v=$n(),_=TG(),m=Il(),b=au(),y=jo(),w=ch(),T=yn(),P=bi(),A=nT(),I=kl(),N=Xo(),d=Ml().f,C=sT(),O=Ol(),k=Fn(),F=lu(),z=Mg(),j=rp(),J=uT(),oe=fh(),W=Fg(),D=Ll(),B=aT(),U=vG(),ie=hi(),se=Wo(),xe=ie.f,me=se.f,ee=t.RangeError,ce=t.TypeError,re=t.Uint8Array,te="ArrayBuffer",le="Shared"+te,Me="BYTES_PER_ELEMENT",Ge="prototype",Ie=Array[Ge],Ue=s.ArrayBuffer,We=s.DataView,q=F(0),$=F(2),Y=F(3),K=F(4),we=F(5),he=F(6),Te=z(!0),Ce=z(!1),ze=J.values,Le=J.keys,Oe=J.entries,Ee=Ie.lastIndexOf,Je=Ie.reduce,dt=Ie.reduceRight,Et=Ie.join,vt=Ie.sort,ut=Ie.slice,Jt=Ie.toString,pr=Ie.toLocaleString,sr=k("iterator"),yr=k("toStringTag"),Zr=O("typed_constructor"),Nr=O("def_constructor"),Pn=i.CONSTR,lr=i.TYPED,qr=i.VIEW,In="Wrong length!",Rn=F(1,function(at,Ze){return jt(j(at,at[Nr]),Ze)}),Cn=r(function(){return new re(new Uint16Array([1]).buffer)[0]===1}),ii=!!re&&!!re[Ge].set&&r(function(){new re(1).set({})}),di=function(at,Ze){var bt=h(at);if(bt<0||bt%Ze)throw ee("Wrong offset!");return bt},Ht=function(at){if(T(at)&&lr in at)return at;throw ce(at+" is not a typed array!")},jt=function(at,Ze){if(!(T(at)&&Zr in at))throw ce("It is not a typed array constructor!");return new at(Ze)},Yr=function(at,Ze){return Kn(j(at,at[Nr]),Ze)},Kn=function(at,Ze){for(var bt=0,Dt=Ze.length,Nt=jt(at,Dt);Dt>bt;)Nt[bt]=Ze[bt++];return Nt},Bn=function(at,Ze,bt){xe(at,Ze,{get:function(){return this._d[bt]}})},Un=function(Ze){var bt=P(Ze),Dt=arguments.length,Nt=Dt>1?arguments[1]:void 0,Fr=Nt!==void 0,Zn=C(bt),$t,sn,zn,en,Br,or;if(Zn!=null&&!A(Zn)){for(or=Zn.call(bt),zn=[],$t=0;!(Br=or.next()).done;$t++)zn.push(Br.value);bt=zn}for(Fr&&Dt>2&&(Nt=o(Nt,arguments[2],2)),$t=0,sn=v(bt.length),en=jt(this,sn);sn>$t;$t++)en[$t]=Fr?Nt(bt[$t],$t):bt[$t];return en},cn=function(){for(var Ze=0,bt=arguments.length,Dt=jt(this,bt);bt>Ze;)Dt[Ze]=arguments[Ze++];return Dt},xi=!!re&&r(function(){pr.call(new re(1))}),hn=function(){return pr.apply(xi?ut.call(Ht(this)):Ht(this),arguments)},Jn={copyWithin:function(Ze,bt){return U.call(Ht(this),Ze,bt,arguments.length>2?arguments[2]:void 0)},every:function(Ze){return K(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},fill:function(Ze){return B.apply(Ht(this),arguments)},filter:function(Ze){return Yr(this,$(Ht(this),Ze,arguments.length>1?arguments[1]:void 0))},find:function(Ze){return we(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},findIndex:function(Ze){return he(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},forEach:function(Ze){q(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},indexOf:function(Ze){return Ce(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},includes:function(Ze){return Te(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},join:function(Ze){return Et.apply(Ht(this),arguments)},lastIndexOf:function(Ze){return Ee.apply(Ht(this),arguments)},map:function(Ze){return Rn(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},reduce:function(Ze){return Je.apply(Ht(this),arguments)},reduceRight:function(Ze){return dt.apply(Ht(this),arguments)},reverse:function(){for(var Ze=this,bt=Ht(Ze).length,Dt=Math.floor(bt/2),Nt=0,Fr;Nt<Dt;)Fr=Ze[Nt],Ze[Nt++]=Ze[--bt],Ze[bt]=Fr;return Ze},some:function(Ze){return Y(Ht(this),Ze,arguments.length>1?arguments[1]:void 0)},sort:function(Ze){return vt.call(Ht(this),Ze)},subarray:function(Ze,bt){var Dt=Ht(this),Nt=Dt.length,Fr=m(Ze,Nt);return new(j(Dt,Dt[Nr]))(Dt.buffer,Dt.byteOffset+Fr*Dt.BYTES_PER_ELEMENT,v((bt===void 0?Nt:m(bt,Nt))-Fr))}},jn=function(Ze,bt){return Yr(this,ut.call(Ht(this),Ze,bt))},pi=function(Ze){Ht(this);var bt=di(arguments[1],1),Dt=this.length,Nt=P(Ze),Fr=v(Nt.length),Zn=0;if(Fr+bt>Dt)throw ee(In);for(;Zn<Fr;)this[bt+Zn]=Nt[Zn++]},Dr={entries:function(){return Oe.call(Ht(this))},keys:function(){return Le.call(Ht(this))},values:function(){return ze.call(Ht(this))}},ht=function(at,Ze){return T(at)&&at[lr]&&typeof Ze!="symbol"&&Ze in at&&String(+Ze)==String(Ze)},Tt=function(Ze,bt){return ht(Ze,bt=b(bt,!0))?u(2,Ze[bt]):me(Ze,bt)},Ft=function(Ze,bt,Dt){return ht(Ze,bt=b(bt,!0))&&T(Dt)&&y(Dt,"value")&&!y(Dt,"get")&&!y(Dt,"set")&&!Dt.configurable&&(!y(Dt,"writable")||Dt.writable)&&(!y(Dt,"enumerable")||Dt.enumerable)?(Ze[bt]=Dt.value,Ze):xe(Ze,bt,Dt)};Pn||(se.f=Tt,ie.f=Ft),n(n.S+n.F*!Pn,"Object",{getOwnPropertyDescriptor:Tt,defineProperty:Ft}),r(function(){Jt.call({})})&&(Jt=pr=function(){return Et.call(this)});var xt=l({},Jn);l(xt,Dr),c(xt,sr,Dr.values),l(xt,{slice:jn,set:pi,constructor:function(){},toString:Jt,toLocaleString:hn}),Bn(xt,"buffer","b"),Bn(xt,"byteOffset","o"),Bn(xt,"byteLength","l"),Bn(xt,"length","e"),xe(xt,yr,{get:function(){return this[lr]}}),Sv.exports=function(at,Ze,bt,Dt){Dt=!!Dt;var Nt=at+(Dt?"Clamped":"")+"Array",Fr="get"+at,Zn="set"+at,$t=t[Nt],sn=$t||{},zn=$t&&N($t),en=!$t||!i.ABV,Br={},or=$t&&$t[Ge],vi=function(mt,It){var yt=mt._d;return yt.v[Fr](It*Ze+yt.o,Cn)},On=function(mt,It,yt){var At=mt._d;Dt&&(yt=(yt=Math.round(yt))<0?0:yt>255?255:yt&255),At.v[Zn](It*Ze+At.o,yt,Cn)},rr=function(mt,It){xe(mt,It,{get:function(){return vi(this,It)},set:function(yt){return On(this,It,yt)},enumerable:!0})};en?($t=bt(function(mt,It,yt,At){a(mt,$t,Nt,"_d");var ar=0,tn=0,kn,zr,qn,Mn;if(!T(It))qn=_(It),zr=qn*Ze,kn=new Ue(zr);else if(It instanceof Ue||(Mn=w(It))==te||Mn==le){kn=It,tn=di(yt,Ze);var Qn=It.byteLength;if(At===void 0){if(Qn%Ze||(zr=Qn-tn,zr<0))throw ee(In)}else if(zr=v(At)*Ze,zr+tn>Qn)throw ee(In);qn=zr/Ze}else return lr in It?Kn($t,It):Un.call($t,It);for(c(mt,"_d",{b:kn,o:tn,l:zr,e:qn,v:new We(kn)});ar<qn;)rr(mt,ar++)}),or=$t[Ge]=I(xt),c(or,"constructor",$t)):(!r(function(){$t(1)})||!r(function(){new $t(-1)})||!W(function(mt){new $t,new $t(null),new $t(1.5),new $t(mt)},!0))&&($t=bt(function(mt,It,yt,At){a(mt,$t,Nt);var ar;return T(It)?It instanceof Ue||(ar=w(It))==te||ar==le?At!==void 0?new sn(It,di(yt,Ze),At):yt!==void 0?new sn(It,di(yt,Ze)):new sn(It):lr in It?Kn($t,It):Un.call($t,It):new sn(_(It))}),q(zn!==Function.prototype?d(sn).concat(d(zn)):d(sn),function(mt){mt in $t||c($t,mt,sn[mt])}),$t[Ge]=or,e||(or.constructor=$t));var Si=or[sr],Vi=!!Si&&(Si.name=="values"||Si.name==null),tt=Dr.values;c($t,Zr,!0),c(or,lr,Nt),c(or,qr,!0),c(or,Nr,$t),(Dt?new $t(1)[yr]!=Nt:!(yr in or))&&xe(or,yr,{get:function(){return Nt}}),Br[Nt]=$t,n(n.G+n.W+n.F*($t!=sn),Br),n(n.S,Nt,{BYTES_PER_ELEMENT:Ze}),n(n.S+n.F*r(function(){sn.of.call($t,1)}),Nt,{from:Un,of:cn}),Me in or||c(or,Me,Ze),n(n.P,Nt,Jn),D(Nt),n(n.P+n.F*ii,Nt,{set:pi}),n(n.P+n.F*!Vi,Nt,Dr),!e&&or.toString!=Jt&&(or.toString=Jt),n(n.P+n.F*r(function(){new $t(1).slice()}),Nt,{slice:jn}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new $t([1,2]).toLocaleString()})||!r(function(){or.toLocaleString.call([1,2])})),Nt,{toLocaleString:hn}),oe[Nt]=Vi?Si:tt,!e&&!Vi&&c(or,sr,tt)}}else Sv.exports=function(){};return Sv.exports}var lq;function tue(){return lq||(lq=1,Uu()("Int8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),uq}var fq={},hq;function rue(){return hq||(hq=1,Uu()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),fq}var dq={},pq;function nue(){return pq||(pq=1,Uu()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}},!0)),dq}var vq={},gq;function iue(){return gq||(gq=1,Uu()("Int16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),vq}var mq={},yq;function sue(){return yq||(yq=1,Uu()("Uint16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),mq}var _q={},bq;function oue(){return bq||(bq=1,Uu()("Int32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),_q}var wq={},xq;function aue(){return xq||(xq=1,Uu()("Uint32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),wq}var Sq={},Eq;function uue(){return Eq||(Eq=1,Uu()("Float32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),Sq}var Aq={},Tq;function cue(){return Tq||(Tq=1,Uu()("Float64",8,function(e){return function(r,n,i){return e(this,r,n,i)}})),Aq}var Pq={},Cq;function lue(){if(Cq)return Pq;Cq=1;var e=He(),t=bs(),r=Tr(),n=(Jr().Reflect||{}).apply,i=Function.apply;return e(e.S+e.F*!un()(function(){n(function(){})}),"Reflect",{apply:function(o,a,u){var c=t(o),l=r(u);return n?n(c,a,l):i.call(c,a,l)}}),Pq}var Oq={},Iq;function fue(){if(Iq)return Oq;Iq=1;var e=He(),t=kl(),r=bs(),n=Tr(),i=yn(),s=un(),o=oG(),a=(Jr().Reflect||{}).construct,u=s(function(){function l(){}return!(a(function(){},[],l)instanceof l)}),c=!s(function(){a(function(){})});return e(e.S+e.F*(u||c),"Reflect",{construct:function(h,v){r(h),n(v);var _=arguments.length<3?h:r(arguments[2]);if(c&&!u)return a(h,v,_);if(h==_){switch(v.length){case 0:return new h;case 1:return new h(v[0]);case 2:return new h(v[0],v[1]);case 3:return new h(v[0],v[1],v[2]);case 4:return new h(v[0],v[1],v[2],v[3])}var m=[null];return m.push.apply(m,v),new(o.apply(h,m))}var b=_.prototype,y=t(i(b)?b:Object.prototype),w=Function.apply.call(h,y,v);return i(w)?w:y}}),Oq}var Rq={},kq;function hue(){if(kq)return Rq;kq=1;var e=hi(),t=He(),r=Tr(),n=au();return t(t.S+t.F*un()(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,o,a){r(s),o=n(o,!0),r(a);try{return e.f(s,o,a),!0}catch{return!1}}}),Rq}var Mq={},Lq;function due(){if(Lq)return Mq;Lq=1;var e=He(),t=Wo().f,r=Tr();return e(e.S,"Reflect",{deleteProperty:function(i,s){var o=t(r(i),s);return o&&!o.configurable?!1:delete i[s]}}),Mq}var Nq={},qq;function pue(){if(qq)return Nq;qq=1;var e=He(),t=Tr(),r=function(n){this._t=t(n),this._i=0;var i=this._k=[],s;for(s in n)i.push(s)};return QA()(r,"Object",function(){var n=this,i=n._k,s;do if(n._i>=i.length)return{value:void 0,done:!0};while(!((s=i[n._i++])in n._t));return{value:s,done:!1}}),e(e.S,"Reflect",{enumerate:function(i){return new r(i)}}),Nq}var Dq={},Fq;function vue(){if(Fq)return Dq;Fq=1;var e=Wo(),t=Xo(),r=jo(),n=He(),i=yn(),s=Tr();function o(a,u){var c=arguments.length<3?a:arguments[2],l,h;if(s(a)===c)return a[u];if(l=e.f(a,u))return r(l,"value")?l.value:l.get!==void 0?l.get.call(c):void 0;if(i(h=t(a)))return o(h,u,c)}return n(n.S,"Reflect",{get:o}),Dq}var Bq={},zq;function gue(){if(zq)return Bq;zq=1;var e=Wo(),t=He(),r=Tr();return t(t.S,"Reflect",{getOwnPropertyDescriptor:function(i,s){return e.f(r(i),s)}}),Bq}var Vq={},$q;function mue(){if($q)return Vq;$q=1;var e=He(),t=Xo(),r=Tr();return e(e.S,"Reflect",{getPrototypeOf:function(i){return t(r(i))}}),Vq}var Gq={},Uq;function yue(){if(Uq)return Gq;Uq=1;var e=He();return e(e.S,"Reflect",{has:function(r,n){return n in r}}),Gq}var jq={},Hq;function _ue(){if(Hq)return jq;Hq=1;var e=He(),t=Tr(),r=Object.isExtensible;return e(e.S,"Reflect",{isExtensible:function(i){return t(i),r?r(i):!0}}),jq}var Wq={},wb,Xq;function PG(){if(Xq)return wb;Xq=1;var e=Ml(),t=Lg(),r=Tr(),n=Jr().Reflect;return wb=n&&n.ownKeys||function(s){var o=e.f(r(s)),a=t.f;return a?o.concat(a(s)):o},wb}var Yq;function bue(){if(Yq)return Wq;Yq=1;var e=He();return e(e.S,"Reflect",{ownKeys:PG()}),Wq}var Kq={},Jq;function wue(){if(Jq)return Kq;Jq=1;var e=He(),t=Tr(),r=Object.preventExtensions;return e(e.S,"Reflect",{preventExtensions:function(i){t(i);try{return r&&r(i),!0}catch{return!1}}}),Kq}var Zq={},Qq;function xue(){if(Qq)return Zq;Qq=1;var e=hi(),t=Wo(),r=Xo(),n=jo(),i=He(),s=Cl(),o=Tr(),a=yn();function u(c,l,h){var v=arguments.length<4?c:arguments[3],_=t.f(o(c),l),m,b;if(!_){if(a(b=r(c)))return u(b,l,h,v);_=s(0)}if(n(_,"value")){if(_.writable===!1||!a(v))return!1;if(m=t.f(v,l)){if(m.get||m.set||m.writable===!1)return!1;m.value=h,e.f(v,l,m)}else e.f(v,l,s(0,h));return!0}return _.set===void 0?!1:(_.set.call(v,h),!0)}return i(i.S,"Reflect",{set:u}),Zq}var eD={},tD;function Sue(){if(tD)return eD;tD=1;var e=He(),t=WA();return t&&e(e.S,"Reflect",{setPrototypeOf:function(n,i){t.check(n,i);try{return t.set(n,i),!0}catch{return!1}}}),eD}var rD={},nD;function Eue(){if(nD)return rD;nD=1;var e=He(),t=Mg()(!0);return e(e.P,"Array",{includes:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}}),kc()("includes"),rD}var iD={},xb,sD;function CG(){if(sD)return xb;sD=1;var e=Ng(),t=yn(),r=$n(),n=Ta(),i=Fn()("isConcatSpreadable");function s(o,a,u,c,l,h,v,_){for(var m=l,b=0,y=v?n(v,_,3):!1,w,T;b<c;){if(b in u){if(w=y?y(u[b],b,a):u[b],T=!1,t(w)&&(T=w[i],T=T!==void 0?!!T:e(w)),T&&h>0)m=s(o,a,w,r(w.length),m,h-1)-1;else{if(m>=9007199254740991)throw TypeError();o[m]=w}m++}b++}return m}return xb=s,xb}var oD;function Aue(){if(oD)return iD;oD=1;var e=He(),t=CG(),r=bi(),n=$n(),i=bs(),s=oT();return e(e.P,"Array",{flatMap:function(a){var u=r(this),c,l;return i(a),c=n(u.length),l=s(u,0),t(l,u,u,c,0,1,a,arguments[1]),l}}),kc()("flatMap"),iD}var aD={},uD;function Tue(){if(uD)return aD;uD=1;var e=He(),t=CG(),r=bi(),n=$n(),i=Ca(),s=oT();return e(e.P,"Array",{flatten:function(){var a=arguments[0],u=r(this),c=n(u.length),l=s(u,0);return t(l,u,u,c,0,a===void 0?1:i(a)),l}}),kc()("flatten"),aD}var cD={},lD;function Pue(){if(lD)return cD;lD=1;var e=He(),t=qg()(!0),r=un(),n=r(function(){return"ð ®·".at(0)!=="ð ®·"});return e(e.P+e.F*n,"String",{at:function(s){return t(this,s)}}),cD}var fD={},Sb,hD;function OG(){if(hD)return Sb;hD=1;var e=$n(),t=KA(),r=uu();return Sb=function(n,i,s,o){var a=String(r(n)),u=a.length,c=s===void 0?" ":String(s),l=e(i);if(l<=u||c=="")return a;var h=l-u,v=t.call(c,Math.ceil(h/c.length));return v.length>h&&(v=v.slice(0,h)),o?v+a:a+v},Sb}var dD;function Cue(){if(dD)return fD;dD=1;var e=He(),t=OG(),r=Vg(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padStart:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!0)}}),fD}var pD={},vD;function Oue(){if(vD)return pD;vD=1;var e=He(),t=OG(),r=Vg(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padEnd:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!1)}}),pD}var gD={},mD;function Iue(){return mD||(mD=1,lh()("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")),gD}var yD={},_D;function Rue(){return _D||(_D=1,lh()("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")),yD}var bD={},wD;function kue(){if(wD)return bD;wD=1;var e=He(),t=uu(),r=$n(),n=Dg(),i=tp(),s=RegExp.prototype,o=function(a,u){this._r=a,this._s=u};return QA()(o,"RegExp String",function(){var u=this._r.exec(this._s);return{value:u,done:u===null}}),e(e.P,"String",{matchAll:function(u){if(t(this),!n(u))throw TypeError(u+" is not a regexp!");var c=String(this),l="flags"in s?String(u.flags):i.call(u),h=new RegExp(u.source,~l.indexOf("g")?l:"g"+l);return h.lastIndex=r(u.lastIndex),new o(h,c)}}),bD}var xD={},SD;function Mue(){return SD||(SD=1,GA()("asyncIterator")),xD}var ED={},AD;function Lue(){return AD||(AD=1,GA()("observable")),ED}var TD={},PD;function Nue(){if(PD)return TD;PD=1;var e=He(),t=PG(),r=Ho(),n=Wo(),i=iT();return e(e.S,"Object",{getOwnPropertyDescriptors:function(o){for(var a=r(o),u=n.f,c=t(a),l={},h=0,v,_;c.length>h;)_=u(a,v=c[h++]),_!==void 0&&i(l,v,_);return l}}),TD}var CD={},Eb,OD;function IG(){if(OD)return Eb;OD=1;var e=Yn(),t=Rl(),r=Ho(),n=ep().f;return Eb=function(i){return function(s){for(var o=r(s),a=t(o),u=a.length,c=0,l=[],h;u>c;)h=a[c++],(!e||n.call(o,h))&&l.push(i?[h,o[h]]:o[h]);return l}},Eb}var ID;function que(){if(ID)return CD;ID=1;var e=He(),t=IG()(!1);return e(e.S,"Object",{values:function(n){return t(n)}}),CD}var RD={},kD;function Due(){if(kD)return RD;kD=1;var e=He(),t=IG()(!0);return e(e.S,"Object",{entries:function(n){return t(n)}}),RD}var MD={},Ab,LD;function Ug(){return LD||(LD=1,Ab=Ic()||!un()(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Jr()[e]})),Ab}var ND;function Fue(){if(ND)return MD;ND=1;var e=He(),t=bi(),r=bs(),n=hi();return Yn()&&e(e.P+Ug(),"Object",{__defineGetter__:function(s,o){n.f(t(this),s,{get:r(o),enumerable:!0,configurable:!0})}}),MD}var qD={},DD;function Bue(){if(DD)return qD;DD=1;var e=He(),t=bi(),r=bs(),n=hi();return Yn()&&e(e.P+Ug(),"Object",{__defineSetter__:function(s,o){n.f(t(this),s,{set:r(o),enumerable:!0,configurable:!0})}}),qD}var FD={},BD;function zue(){if(BD)return FD;BD=1;var e=He(),t=bi(),r=au(),n=Xo(),i=Wo().f;return Yn()&&e(e.P+Ug(),"Object",{__lookupGetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.get;while(a=n(a))}}),FD}var zD={},VD;function Vue(){if(VD)return zD;VD=1;var e=He(),t=bi(),r=au(),n=Xo(),i=Wo().f;return Yn()&&e(e.P+Ug(),"Object",{__lookupSetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.set;while(a=n(a))}}),zD}var $D={},Tb,GD;function RG(){if(GD)return Tb;GD=1;var e=ql();return Tb=function(t,r){var n=[];return e(t,!1,n.push,n,r),n},Tb}var Pb,UD;function kG(){if(UD)return Pb;UD=1;var e=ch(),t=RG();return Pb=function(r){return function(){if(e(this)!=r)throw TypeError(r+"#toJSON isn't generic");return t(this)}},Pb}var jD;function $ue(){if(jD)return $D;jD=1;var e=He();return e(e.P+e.R,"Map",{toJSON:kG()("Map")}),$D}var HD={},WD;function Gue(){if(WD)return HD;WD=1;var e=He();return e(e.P+e.R,"Set",{toJSON:kG()("Set")}),HD}var XD={},Cb,YD;function jg(){if(YD)return Cb;YD=1;var e=He();return Cb=function(t){e(e.S,t,{of:function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return new this(i)}})},Cb}var KD;function Uue(){return KD||(KD=1,jg()("Map")),XD}var JD={},ZD;function jue(){return ZD||(ZD=1,jg()("Set")),JD}var QD={},eF;function Hue(){return eF||(eF=1,jg()("WeakMap")),QD}var tF={},rF;function Wue(){return rF||(rF=1,jg()("WeakSet")),tF}var nF={},Ob,iF;function Hg(){if(iF)return Ob;iF=1;var e=He(),t=bs(),r=Ta(),n=ql();return Ob=function(i){e(e.S,i,{from:function(o){var a=arguments[1],u,c,l,h;return t(this),u=a!==void 0,u&&t(a),o==null?new this:(c=[],u?(l=0,h=r(a,arguments[2],2),n(o,!1,function(v){c.push(h(v,l++))})):n(o,!1,c.push,c),new this(c))}})},Ob}var sF;function Xue(){return sF||(sF=1,Hg()("Map")),nF}var oF={},aF;function Yue(){return aF||(aF=1,Hg()("Set")),oF}var uF={},cF;function Kue(){return cF||(cF=1,Hg()("WeakMap")),uF}var lF={},fF;function Jue(){return fF||(fF=1,Hg()("WeakSet")),lF}var hF={},dF;function Zue(){if(dF)return hF;dF=1;var e=He();return e(e.G,{global:Jr()}),hF}var pF={},vF;function Que(){if(vF)return pF;vF=1;var e=He();return e(e.S,"System",{global:Jr()}),pF}var gF={},mF;function ece(){if(mF)return gF;mF=1;var e=He(),t=Pa();return e(e.S,"Error",{isError:function(n){return t(n)==="Error"}}),gF}var yF={},_F;function tce(){if(_F)return yF;_F=1;var e=He();return e(e.S,"Math",{clamp:function(r,n,i){return Math.min(i,Math.max(n,r))}}),yF}var bF={},wF;function rce(){if(wF)return bF;wF=1;var e=He();return e(e.S,"Math",{DEG_PER_RAD:Math.PI/180}),bF}var xF={},SF;function nce(){if(SF)return xF;SF=1;var e=He(),t=180/Math.PI;return e(e.S,"Math",{degrees:function(n){return n*t}}),xF}var EF={},Ib,AF;function MG(){return AF||(AF=1,Ib=Math.scale||function(t,r,n,i,s){return arguments.length===0||t!=t||r!=r||n!=n||i!=i||s!=s?NaN:t===1/0||t===-1/0?t:(t-r)*(s-i)/(n-r)+i}),Ib}var TF;function ice(){if(TF)return EF;TF=1;var e=He(),t=MG(),r=hG();return e(e.S,"Math",{fscale:function(i,s,o,a,u){return r(t(i,s,o,a,u))}}),EF}var PF={},CF;function sce(){if(CF)return PF;CF=1;var e=He();return e(e.S,"Math",{iaddh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a+(s>>>0)+((o&u|(o|u)&~(o+u>>>0))>>>31)|0}}),PF}var OF={},IF;function oce(){if(IF)return OF;IF=1;var e=He();return e(e.S,"Math",{isubh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a-(s>>>0)-((~o&u|~(o^u)&o-u>>>0)>>>31)|0}}),OF}var RF={},kF;function ace(){if(kF)return RF;kF=1;var e=He();return e(e.S,"Math",{imulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>16,l=o>>16,h=(c*u>>>0)+(a*u>>>16);return c*l+(h>>16)+((a*l>>>0)+(h&i)>>16)}}),RF}var MF={},LF;function uce(){if(LF)return MF;LF=1;var e=He();return e(e.S,"Math",{RAD_PER_DEG:180/Math.PI}),MF}var NF={},qF;function cce(){if(qF)return NF;qF=1;var e=He(),t=Math.PI/180;return e(e.S,"Math",{radians:function(n){return n*t}}),NF}var DF={},FF;function lce(){if(FF)return DF;FF=1;var e=He();return e(e.S,"Math",{scale:MG()}),DF}var BF={},zF;function fce(){if(zF)return BF;zF=1;var e=He();return e(e.S,"Math",{umulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>>16,l=o>>>16,h=(c*u>>>0)+(a*u>>>16);return c*l+(h>>>16)+((a*l>>>0)+(h&i)>>>16)}}),BF}var VF={},$F;function hce(){if($F)return VF;$F=1;var e=He();return e(e.S,"Math",{signbit:function(r){return(r=+r)!=r?r:r==0?1/r==1/0:r>0}}),VF}var GF={},UF;function dce(){if(UF)return GF;UF=1;var e=He(),t=Aa(),r=Jr(),n=rp(),i=bG();return e(e.P+e.R,"Promise",{finally:function(s){var o=n(this,t.Promise||r.Promise),a=typeof s=="function";return this.then(a?function(u){return i(o,s()).then(function(){return u})}:s,a?function(u){return i(o,s()).then(function(){throw u})}:s)}}),GF}var jF={},HF;function pce(){if(HF)return jF;HF=1;var e=He(),t=dT(),r=_G();return e(e.S,"Promise",{try:function(n){var i=t.f(this),s=r(n);return(s.e?i.reject:i.resolve)(s.v),i.promise}}),jF}var WF={},Rb,XF;function ju(){if(XF)return Rb;XF=1;var e=xG(),t=He(),r=Zd()("metadata"),n=r.store||(r.store=new(AG())),i=function(h,v,_){var m=n.get(h);if(!m){if(!_)return;n.set(h,m=new e)}var b=m.get(v);if(!b){if(!_)return;m.set(v,b=new e)}return b},s=function(h,v,_){var m=i(v,_,!1);return m===void 0?!1:m.has(h)},o=function(h,v,_){var m=i(v,_,!1);return m===void 0?void 0:m.get(h)},a=function(h,v,_,m){i(_,m,!0).set(h,v)},u=function(h,v){var _=i(h,v,!1),m=[];return _&&_.forEach(function(b,y){m.push(y)}),m},c=function(h){return h===void 0||typeof h=="symbol"?h:String(h)},l=function(h){t(t.S,"Reflect",h)};return Rb={store:n,map:i,has:s,get:o,set:a,keys:u,key:c,exp:l},Rb}var YF;function vce(){if(YF)return WF;YF=1;var e=ju(),t=Tr(),r=e.key,n=e.set;return e.exp({defineMetadata:function(s,o,a,u){n(s,o,t(a),r(u))}}),WF}var KF={},JF;function gce(){if(JF)return KF;JF=1;var e=ju(),t=Tr(),r=e.key,n=e.map,i=e.store;return e.exp({deleteMetadata:function(o,a){var u=arguments.length<3?void 0:r(arguments[2]),c=n(t(a),u,!1);if(c===void 0||!c.delete(o))return!1;if(c.size)return!0;var l=i.get(a);return l.delete(u),!!l.size||i.delete(a)}}),KF}var ZF={},QF;function mce(){if(QF)return ZF;QF=1;var e=ju(),t=Tr(),r=Xo(),n=e.has,i=e.get,s=e.key,o=function(a,u,c){var l=n(a,u,c);if(l)return i(a,u,c);var h=r(u);return h!==null?o(a,h,c):void 0};return e.exp({getMetadata:function(u,c){return o(u,t(c),arguments.length<3?void 0:s(arguments[2]))}}),ZF}var e6={},t6;function yce(){if(t6)return e6;t6=1;var e=SG(),t=RG(),r=ju(),n=Tr(),i=Xo(),s=r.keys,o=r.key,a=function(u,c){var l=s(u,c),h=i(u);if(h===null)return l;var v=a(h,c);return v.length?l.length?t(new e(l.concat(v))):v:l};return r.exp({getMetadataKeys:function(c){return a(n(c),arguments.length<2?void 0:o(arguments[1]))}}),e6}var r6={},n6;function _ce(){if(n6)return r6;n6=1;var e=ju(),t=Tr(),r=e.get,n=e.key;return e.exp({getOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),r6}var i6={},s6;function bce(){if(s6)return i6;s6=1;var e=ju(),t=Tr(),r=e.keys,n=e.key;return e.exp({getOwnMetadataKeys:function(s){return r(t(s),arguments.length<2?void 0:n(arguments[1]))}}),i6}var o6={},a6;function wce(){if(a6)return o6;a6=1;var e=ju(),t=Tr(),r=Xo(),n=e.has,i=e.key,s=function(o,a,u){var c=n(o,a,u);if(c)return!0;var l=r(a);return l!==null?s(o,l,u):!1};return e.exp({hasMetadata:function(a,u){return s(a,t(u),arguments.length<3?void 0:i(arguments[2]))}}),o6}var u6={},c6;function xce(){if(c6)return u6;c6=1;var e=ju(),t=Tr(),r=e.has,n=e.key;return e.exp({hasOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),u6}var l6={},f6;function Sce(){if(f6)return l6;f6=1;var e=ju(),t=Tr(),r=bs(),n=e.key,i=e.set;return e.exp({metadata:function(o,a){return function(c,l){i(o,a,(l!==void 0?t:r)(c),n(l))}}}),l6}var h6={},d6;function Ece(){if(d6)return h6;d6=1;var e=He(),t=hT()(),r=Jr().process,n=Pa()(r)=="process";return e(e.G,{asap:function(s){var o=n&&r.domain;t(o?o.bind(s):s)}}),h6}var p6={},v6;function Ace(){if(v6)return p6;v6=1;var e=He(),t=Jr(),r=Aa(),n=hT()(),i=Fn()("observable"),s=bs(),o=Tr(),a=Nl(),u=Dl(),c=lo(),l=ql(),h=l.RETURN,v=function(P){return P==null?void 0:s(P)},_=function(P){var A=P._c;A&&(P._c=void 0,A())},m=function(P){return P._o===void 0},b=function(P){m(P)||(P._o=void 0,_(P))},y=function(P,A){o(P),this._c=void 0,this._o=P,P=new w(this);try{var I=A(P),N=I;I!=null&&(typeof I.unsubscribe=="function"?I=function(){N.unsubscribe()}:s(I),this._c=I)}catch(d){P.error(d);return}m(this)&&_(this)};y.prototype=u({},{unsubscribe:function(){b(this)}});var w=function(P){this._s=P};w.prototype=u({},{next:function(A){var I=this._s;if(!m(I)){var N=I._o;try{var d=v(N.next);if(d)return d.call(N,A)}catch(C){try{b(I)}finally{throw C}}}},error:function(A){var I=this._s;if(m(I))throw A;var N=I._o;I._o=void 0;try{var d=v(N.error);if(!d)throw A;A=d.call(N,A)}catch(C){try{_(I)}finally{throw C}}return _(I),A},complete:function(A){var I=this._s;if(!m(I)){var N=I._o;I._o=void 0;try{var d=v(N.complete);A=d?d.call(N,A):void 0}catch(C){try{_(I)}finally{throw C}}return _(I),A}}});var T=function(A){a(this,T,"Observable","_f")._f=s(A)};return u(T.prototype,{subscribe:function(A){return new y(A,this._f)},forEach:function(A){var I=this;return new(r.Promise||t.Promise)(function(N,d){s(A);var C=I.subscribe({next:function(O){try{return A(O)}catch(k){d(k),C.unsubscribe()}},error:d,complete:N})})}}),u(T,{from:function(A){var I=typeof this=="function"?this:T,N=v(o(A)[i]);if(N){var d=o(N.call(A));return d.constructor===I?d:new I(function(C){return d.subscribe(C)})}return new I(function(C){var O=!1;return n(function(){if(!O){try{if(l(A,!1,function(k){if(C.next(k),O)return h})===h)return}catch(k){if(O)throw k;C.error(k);return}C.complete()}}),function(){O=!0}})},of:function(){for(var A=0,I=arguments.length,N=new Array(I);A<I;)N[A]=arguments[A++];return new(typeof this=="function"?this:T)(function(d){var C=!1;return n(function(){if(!C){for(var O=0;O<N.length;++O)if(d.next(N[O]),C)return;d.complete()}}),function(){C=!0}})}}),c(T.prototype,i,function(){return this}),e(e.G,{Observable:T}),Ll()("Observable"),p6}var g6={},m6;function Tce(){if(m6)return g6;m6=1;var e=Jr(),t=He(),r=Vg(),n=[].slice,i=/MSIE .\./.test(r),s=function(o){return function(a,u){var c=arguments.length>2,l=c?n.call(arguments,2):!1;return o(c?function(){(typeof a=="function"?a:Function(a)).apply(this,l)}:a,u)}};return t(t.G+t.B+t.F*i,{setTimeout:s(e.setTimeout),setInterval:s(e.setInterval)}),g6}var y6={},_6;function Pce(){if(_6)return y6;_6=1;var e=He(),t=fT();return e(e.G+e.B,{setImmediate:t.set,clearImmediate:t.clear}),y6}var b6={},w6;function Cce(){if(w6)return b6;w6=1;for(var e=uT(),t=Rl(),r=fo(),n=Jr(),i=lo(),s=fh(),o=Fn(),a=o("iterator"),u=o("toStringTag"),c=s.Array,l={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=t(l),v=0;v<h.length;v++){var _=h[v],m=l[_],b=n[_],y=b&&b.prototype,w;if(y&&(y[a]||i(y,a,c),y[u]||i(y,u,_),s[_]=c,m))for(w in e)y[w]||r(y,w,e[w],!0)}return b6}var kb,x6;function Oce(){return x6||(x6=1,Jse(),Zse(),Qse(),eoe(),toe(),roe(),noe(),ioe(),soe(),ooe(),aoe(),uoe(),coe(),loe(),foe(),hoe(),doe(),poe(),voe(),goe(),moe(),yoe(),_oe(),boe(),woe(),xoe(),Soe(),Eoe(),Aoe(),Toe(),Poe(),Coe(),Ooe(),Ioe(),Roe(),koe(),Moe(),Loe(),Noe(),qoe(),Doe(),Foe(),Boe(),zoe(),Voe(),$oe(),Goe(),Uoe(),joe(),Hoe(),Woe(),Xoe(),Yoe(),Koe(),Joe(),Zoe(),Qoe(),eae(),tae(),rae(),nae(),iae(),sae(),oae(),aae(),uae(),cae(),lae(),fae(),hae(),dae(),pae(),vae(),gae(),mae(),yae(),bae(),wae(),Sae(),Eae(),Aae(),Tae(),Pae(),Cae(),Oae(),Rae(),kae(),Mae(),Lae(),Nae(),qae(),Dae(),Fae(),Bae(),zae(),Vae(),$ae(),Gae(),Uae(),uT(),jae(),mG(),Hae(),yG(),Wae(),Xae(),Yae(),Kae(),Jae(),xG(),SG(),AG(),Zae(),Qae(),eue(),tue(),rue(),nue(),iue(),sue(),oue(),aue(),uue(),cue(),lue(),fue(),hue(),due(),pue(),vue(),gue(),mue(),yue(),_ue(),bue(),wue(),xue(),Sue(),Eue(),Aue(),Tue(),Pue(),Cue(),Oue(),Iue(),Rue(),kue(),Mue(),Lue(),Nue(),que(),Due(),Fue(),Bue(),zue(),Vue(),$ue(),Gue(),Uue(),jue(),Hue(),Wue(),Xue(),Yue(),Kue(),Jue(),Zue(),Que(),ece(),tce(),rce(),nce(),ice(),sce(),oce(),ace(),uce(),cce(),lce(),fce(),hce(),dce(),pce(),vce(),gce(),mce(),yce(),_ce(),bce(),wce(),xce(),Sce(),Ece(),Ace(),Tce(),Pce(),Cce(),kb=Aa()),kb}var Xv={exports:{}},Ice=Xv.exports,S6;function Rce(){return S6||(S6=1,function(e){(function(t){var r=Object.prototype,n=r.hasOwnProperty,i,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",c=t.regeneratorRuntime;if(c){e.exports=c;return}c=t.regeneratorRuntime=e.exports;function l(D,B,U,ie){var se=B&&B.prototype instanceof w?B:w,xe=Object.create(se.prototype),me=new J(ie||[]);return xe._invoke=k(D,U,me),xe}c.wrap=l;function h(D,B,U){try{return{type:"normal",arg:D.call(B,U)}}catch(ie){return{type:"throw",arg:ie}}}var v="suspendedStart",_="suspendedYield",m="executing",b="completed",y={};function w(){}function T(){}function P(){}var A={};A[o]=function(){return this};var I=Object.getPrototypeOf,N=I&&I(I(oe([])));N&&N!==r&&n.call(N,o)&&(A=N);var d=P.prototype=w.prototype=Object.create(A);T.prototype=d.constructor=P,P.constructor=T,P[u]=T.displayName="GeneratorFunction";function C(D){["next","throw","return"].forEach(function(B){D[B]=function(U){return this._invoke(B,U)}})}c.isGeneratorFunction=function(D){var B=typeof D=="function"&&D.constructor;return B?B===T||(B.displayName||B.name)==="GeneratorFunction":!1},c.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,P):(D.__proto__=P,u in D||(D[u]="GeneratorFunction")),D.prototype=Object.create(d),D},c.awrap=function(D){return{__await:D}};function O(D){function B(se,xe,me,ee){var ce=h(D[se],D,xe);if(ce.type==="throw")ee(ce.arg);else{var re=ce.arg,te=re.value;return te&&typeof te=="object"&&n.call(te,"__await")?Promise.resolve(te.__await).then(function(le){B("next",le,me,ee)},function(le){B("throw",le,me,ee)}):Promise.resolve(te).then(function(le){re.value=le,me(re)},ee)}}typeof t.process=="object"&&t.process.domain&&(B=t.process.domain.bind(B));var U;function ie(se,xe){function me(){return new Promise(function(ee,ce){B(se,xe,ee,ce)})}return U=U?U.then(me,me):me()}this._invoke=ie}C(O.prototype),O.prototype[a]=function(){return this},c.AsyncIterator=O,c.async=function(D,B,U,ie){var se=new O(l(D,B,U,ie));return c.isGeneratorFunction(B)?se:se.next().then(function(xe){return xe.done?xe.value:se.next()})};function k(D,B,U){var ie=v;return function(xe,me){if(ie===m)throw new Error("Generator is already running");if(ie===b){if(xe==="throw")throw me;return W()}for(U.method=xe,U.arg=me;;){var ee=U.delegate;if(ee){var ce=F(ee,U);if(ce){if(ce===y)continue;return ce}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(ie===v)throw ie=b,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);ie=m;var re=h(D,B,U);if(re.type==="normal"){if(ie=U.done?b:_,re.arg===y)continue;return{value:re.arg,done:U.done}}else re.type==="throw"&&(ie=b,U.method="throw",U.arg=re.arg)}}}function F(D,B){var U=D.iterator[B.method];if(U===i){if(B.delegate=null,B.method==="throw"){if(D.iterator.return&&(B.method="return",B.arg=i,F(D,B),B.method==="throw"))return y;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var ie=h(U,D.iterator,B.arg);if(ie.type==="throw")return B.method="throw",B.arg=ie.arg,B.delegate=null,y;var se=ie.arg;if(!se)return B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,y;if(se.done)B[D.resultName]=se.value,B.next=D.nextLoc,B.method!=="return"&&(B.method="next",B.arg=i);else return se;return B.delegate=null,y}C(d),d[u]="Generator",d[o]=function(){return this},d.toString=function(){return"[object Generator]"};function z(D){var B={tryLoc:D[0]};1 in D&&(B.catchLoc=D[1]),2 in D&&(B.finallyLoc=D[2],B.afterLoc=D[3]),this.tryEntries.push(B)}function j(D){var B=D.completion||{};B.type="normal",delete B.arg,D.completion=B}function J(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(z,this),this.reset(!0)}c.keys=function(D){var B=[];for(var U in D)B.push(U);return B.reverse(),function ie(){for(;B.length;){var se=B.pop();if(se in D)return ie.value=se,ie.done=!1,ie}return ie.done=!0,ie}};function oe(D){if(D){var B=D[o];if(B)return B.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var U=-1,ie=function se(){for(;++U<D.length;)if(n.call(D,U))return se.value=D[U],se.done=!1,se;return se.value=i,se.done=!0,se};return ie.next=ie}}return{next:W}}c.values=oe;function W(){return{value:i,done:!0}}J.prototype={constructor:J,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(j),!D)for(var B in this)B.charAt(0)==="t"&&n.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=i)},stop:function(){this.done=!0;var D=this.tryEntries[0],B=D.completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var B=this;function U(ce,re){return xe.type="throw",xe.arg=D,B.next=ce,re&&(B.method="next",B.arg=i),!!re}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var se=this.tryEntries[ie],xe=se.completion;if(se.tryLoc==="root")return U("end");if(se.tryLoc<=this.prev){var me=n.call(se,"catchLoc"),ee=n.call(se,"finallyLoc");if(me&&ee){if(this.prev<se.catchLoc)return U(se.catchLoc,!0);if(this.prev<se.finallyLoc)return U(se.finallyLoc)}else if(me){if(this.prev<se.catchLoc)return U(se.catchLoc,!0)}else if(ee){if(this.prev<se.finallyLoc)return U(se.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(D,B){for(var U=this.tryEntries.length-1;U>=0;--U){var ie=this.tryEntries[U];if(ie.tryLoc<=this.prev&&n.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var se=ie;break}}se&&(D==="break"||D==="continue")&&se.tryLoc<=B&&B<=se.finallyLoc&&(se=null);var xe=se?se.completion:{};return xe.type=D,xe.arg=B,se?(this.method="next",this.next=se.finallyLoc,y):this.complete(xe)},complete:function(D,B){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&B&&(this.next=B),y},finish:function(D){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.finallyLoc===D)return this.complete(U.completion,U.afterLoc),j(U),y}},catch:function(D){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.tryLoc===D){var ie=U.completion;if(ie.type==="throw"){var se=ie.arg;j(U)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(D,B,U){return this.delegate={iterator:oe(D),resultName:B,nextLoc:U},this.method==="next"&&(this.arg=i),y}}})(typeof es=="object"?es:typeof window=="object"?window:typeof self=="object"?self:Ice)}(Xv)),Xv.exports}var E6={},Mb,A6;function kce(){return A6||(A6=1,Mb=function(e,t){var r=t===Object(t)?function(n){return t[n]}:t;return function(n){return String(n).replace(e,r)}}),Mb}var T6;function Mce(){if(T6)return E6;T6=1;var e=He(),t=kce()(/[\\^$*+?.()|[\]{}]/g,"\\$&");return e(e.S,"RegExp",{escape:function(n){return t(n)}}),E6}var Lb,P6;function Lce(){return P6||(P6=1,Mce(),Lb=Aa().RegExp.escape),Lb}var C6;function Nce(){if(C6)return GI;if(C6=1,Oce(),Rce(),Lce(),es._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");es._babelPolyfill=!0;var e="defineProperty";function t(r,n,i){r[n]||Object[e](r,n,{writable:!0,configurable:!0,value:i})}return t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(r){[][r]&&t(Array,r,Function.call.bind([][r]))}),GI}Nce();function vT(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nb,O6;function qce(){if(O6)return Nb;O6=1;function e(){this.__data__=[],this.size=0}return Nb=e,Nb}var qb,I6;function hh(){if(I6)return qb;I6=1;function e(t,r){return t===r||t!==t&&r!==r}return qb=e,qb}var Db,R6;function Wg(){if(R6)return Db;R6=1;var e=hh();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Db=t,Db}var Fb,k6;function Dce(){if(k6)return Fb;k6=1;var e=Wg(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():r.call(s,o,1),--this.size,!0}return Fb=n,Fb}var Bb,M6;function Fce(){if(M6)return Bb;M6=1;var e=Wg();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Bb=t,Bb}var zb,L6;function Bce(){if(L6)return zb;L6=1;var e=Wg();function t(r){return e(this.__data__,r)>-1}return zb=t,zb}var Vb,N6;function zce(){if(N6)return Vb;N6=1;var e=Wg();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return Vb=t,Vb}var $b,q6;function Xg(){if(q6)return $b;q6=1;var e=qce(),t=Dce(),r=Fce(),n=Bce(),i=zce();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,$b=s,$b}var Gb,D6;function Vce(){if(D6)return Gb;D6=1;var e=Xg();function t(){this.__data__=new e,this.size=0}return Gb=t,Gb}var Ub,F6;function $ce(){if(F6)return Ub;F6=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Ub=e,Ub}var jb,B6;function Gce(){if(B6)return jb;B6=1;function e(t){return this.__data__.get(t)}return jb=e,jb}var Hb,z6;function Uce(){if(z6)return Hb;z6=1;function e(t){return this.__data__.has(t)}return Hb=e,Hb}var Wb,V6;function LG(){if(V6)return Wb;V6=1;var e=typeof es=="object"&&es&&es.Object===Object&&es;return Wb=e,Wb}var Xb,$6;function Ia(){if($6)return Xb;$6=1;var e=LG(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Xb=r,Xb}var Yb,G6;function dh(){if(G6)return Yb;G6=1;var e=Ia(),t=e.Symbol;return Yb=t,Yb}var Kb,U6;function jce(){if(U6)return Kb;U6=1;var e=dh(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=r.call(o,i),u=o[i];try{o[i]=void 0;var c=!0}catch{}var l=n.call(o);return c&&(a?o[i]=u:delete o[i]),l}return Kb=s,Kb}var Jb,j6;function Hce(){if(j6)return Jb;j6=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Jb=r,Jb}var Zb,H6;function Fl(){if(H6)return Zb;H6=1;var e=dh(),t=jce(),r=Hce(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return Zb=o,Zb}var Qb,W6;function Yo(){if(W6)return Qb;W6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Qb=e,Qb}var e1,X6;function np(){if(X6)return e1;X6=1;var e=Fl(),t=Yo(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var u=e(a);return u==n||u==i||u==r||u==s}return e1=o,e1}var t1,Y6;function Wce(){if(Y6)return t1;Y6=1;var e=Ia(),t=e["__core-js_shared__"];return t1=t,t1}var r1,K6;function Xce(){if(K6)return r1;K6=1;var e=Wce(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return r1=r,r1}var n1,J6;function NG(){if(J6)return n1;J6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return n1=r,n1}var i1,Z6;function Yce(){if(Z6)return i1;Z6=1;var e=np(),t=Xce(),r=Yo(),n=NG(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,c=a.hasOwnProperty,l=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(v){if(!r(v)||t(v))return!1;var _=e(v)?l:s;return _.test(n(v))}return i1=h,i1}var s1,Q6;function Kce(){if(Q6)return s1;Q6=1;function e(t,r){return t==null?void 0:t[r]}return s1=e,s1}var o1,eB;function Bl(){if(eB)return o1;eB=1;var e=Yce(),t=Kce();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return o1=r,o1}var a1,tB;function gT(){if(tB)return a1;tB=1;var e=Bl(),t=Ia(),r=e(t,"Map");return a1=r,a1}var u1,rB;function Yg(){if(rB)return u1;rB=1;var e=Bl(),t=e(Object,"create");return u1=t,u1}var c1,nB;function Jce(){if(nB)return c1;nB=1;var e=Yg();function t(){this.__data__=e?e(null):{},this.size=0}return c1=t,c1}var l1,iB;function Zce(){if(iB)return l1;iB=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return l1=e,l1}var f1,sB;function Qce(){if(sB)return f1;sB=1;var e=Yg(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return n.call(o,s)?o[s]:void 0}return f1=i,f1}var h1,oB;function ele(){if(oB)return h1;oB=1;var e=Yg(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return h1=n,h1}var d1,aB;function tle(){if(aB)return d1;aB=1;var e=Yg(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return d1=r,d1}var p1,uB;function rle(){if(uB)return p1;uB=1;var e=Jce(),t=Zce(),r=Qce(),n=ele(),i=tle();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,p1=s,p1}var v1,cB;function nle(){if(cB)return v1;cB=1;var e=rle(),t=Xg(),r=gT();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return v1=n,v1}var g1,lB;function ile(){if(lB)return g1;lB=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return g1=e,g1}var m1,fB;function Kg(){if(fB)return m1;fB=1;var e=ile();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return m1=t,m1}var y1,hB;function sle(){if(hB)return y1;hB=1;var e=Kg();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return y1=t,y1}var _1,dB;function ole(){if(dB)return _1;dB=1;var e=Kg();function t(r){return e(this,r).get(r)}return _1=t,_1}var b1,pB;function ale(){if(pB)return b1;pB=1;var e=Kg();function t(r){return e(this,r).has(r)}return b1=t,b1}var w1,vB;function ule(){if(vB)return w1;vB=1;var e=Kg();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return w1=t,w1}var x1,gB;function mT(){if(gB)return x1;gB=1;var e=nle(),t=sle(),r=ole(),n=ale(),i=ule();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,x1=s,x1}var S1,mB;function cle(){if(mB)return S1;mB=1;var e=Xg(),t=gT(),r=mT(),n=200;function i(s,o){var a=this.__data__;if(a instanceof e){var u=a.__data__;if(!t||u.length<n-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new r(u)}return a.set(s,o),this.size=a.size,this}return S1=i,S1}var E1,yB;function Jg(){if(yB)return E1;yB=1;var e=Xg(),t=Vce(),r=$ce(),n=Gce(),i=Uce(),s=cle();function o(a){var u=this.__data__=new e(a);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,E1=o,E1}var A1,_B;function yT(){if(_B)return A1;_B=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return A1=e,A1}var T1,bB;function qG(){if(bB)return T1;bB=1;var e=Bl(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return T1=t,T1}var P1,wB;function Zg(){if(wB)return P1;wB=1;var e=qG();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return P1=t,P1}var C1,xB;function Qg(){if(xB)return C1;xB=1;var e=Zg(),t=hh(),r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a){var u=s[o];(!(n.call(s,o)&&t(u,a))||a===void 0&&!(o in s))&&e(s,o,a)}return C1=i,C1}var O1,SB;function ip(){if(SB)return O1;SB=1;var e=Qg(),t=Zg();function r(n,i,s,o){var a=!s;s||(s={});for(var u=-1,c=i.length;++u<c;){var l=i[u],h=o?o(s[l],n[l],l,s,n):void 0;h===void 0&&(h=n[l]),a?t(s,l,h):e(s,l,h)}return s}return O1=r,O1}var I1,EB;function lle(){if(EB)return I1;EB=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return I1=e,I1}var R1,AB;function fu(){if(AB)return R1;AB=1;function e(t){return t!=null&&typeof t=="object"}return R1=e,R1}var k1,TB;function fle(){if(TB)return k1;TB=1;var e=Fl(),t=fu(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return k1=n,k1}var M1,PB;function sp(){if(PB)return M1;PB=1;var e=fle(),t=fu(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return M1=s,M1}var L1,CB;function wi(){if(CB)return L1;CB=1;var e=Array.isArray;return L1=e,L1}var ld={exports:{}},N1,OB;function hle(){if(OB)return N1;OB=1;function e(){return!1}return N1=e,N1}ld.exports;var IB;function ph(){return IB||(IB=1,function(e,t){var r=Ia(),n=hle(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?r.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||n;e.exports=c}(ld,ld.exports)),ld.exports}var q1,RB;function em(){if(RB)return q1;RB=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return q1=r,q1}var D1,kB;function _T(){if(kB)return D1;kB=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return D1=t,D1}var F1,MB;function dle(){if(MB)return F1;MB=1;var e=Fl(),t=_T(),r=fu(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",l="[object Number]",h="[object Object]",v="[object RegExp]",_="[object Set]",m="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",T="[object Float32Array]",P="[object Float64Array]",A="[object Int8Array]",I="[object Int16Array]",N="[object Int32Array]",d="[object Uint8Array]",C="[object Uint8ClampedArray]",O="[object Uint16Array]",k="[object Uint32Array]",F={};F[T]=F[P]=F[A]=F[I]=F[N]=F[d]=F[C]=F[O]=F[k]=!0,F[n]=F[i]=F[y]=F[s]=F[w]=F[o]=F[a]=F[u]=F[c]=F[l]=F[h]=F[v]=F[_]=F[m]=F[b]=!1;function z(j){return r(j)&&t(j.length)&&!!F[e(j)]}return F1=z,F1}var B1,LB;function tm(){if(LB)return B1;LB=1;function e(t){return function(r){return t(r)}}return B1=e,B1}var fd={exports:{}};fd.exports;var NB;function bT(){return NB||(NB=1,function(e,t){var r=LG(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(fd,fd.exports)),fd.exports}var z1,qB;function op(){if(qB)return z1;qB=1;var e=dle(),t=tm(),r=bT(),n=r&&r.isTypedArray,i=n?t(n):e;return z1=i,z1}var V1,DB;function DG(){if(DB)return V1;DB=1;var e=lle(),t=sp(),r=wi(),n=ph(),i=em(),s=op(),o=Object.prototype,a=o.hasOwnProperty;function u(c,l){var h=r(c),v=!h&&t(c),_=!h&&!v&&n(c),m=!h&&!v&&!_&&s(c),b=h||v||_||m,y=b?e(c.length,String):[],w=y.length;for(var T in c)(l||a.call(c,T))&&!(b&&(T=="length"||_&&(T=="offset"||T=="parent")||m&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,w)))&&y.push(T);return y}return V1=u,V1}var $1,FB;function rm(){if(FB)return $1;FB=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return $1=t,$1}var G1,BB;function FG(){if(BB)return G1;BB=1;function e(t,r){return function(n){return t(r(n))}}return G1=e,G1}var U1,zB;function ple(){if(zB)return U1;zB=1;var e=FG(),t=e(Object.keys,Object);return U1=t,U1}var j1,VB;function wT(){if(VB)return j1;VB=1;var e=rm(),t=ple(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return j1=i,j1}var H1,$B;function Hu(){if($B)return H1;$B=1;var e=np(),t=_T();function r(n){return n!=null&&t(n.length)&&!e(n)}return H1=r,H1}var W1,GB;function Mc(){if(GB)return W1;GB=1;var e=DG(),t=wT(),r=Hu();function n(i){return r(i)?e(i):t(i)}return W1=n,W1}var X1,UB;function vle(){if(UB)return X1;UB=1;var e=ip(),t=Mc();function r(n,i){return n&&e(i,t(i),n)}return X1=r,X1}var Y1,jB;function gle(){if(jB)return Y1;jB=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return Y1=e,Y1}var K1,HB;function mle(){if(HB)return K1;HB=1;var e=Yo(),t=rm(),r=gle(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!e(o))return r(o);var a=t(o),u=[];for(var c in o)c=="constructor"&&(a||!i.call(o,c))||u.push(c);return u}return K1=s,K1}var J1,WB;function zl(){if(WB)return J1;WB=1;var e=DG(),t=mle(),r=Hu();function n(i){return r(i)?e(i,!0):t(i)}return J1=n,J1}var Z1,XB;function yle(){if(XB)return Z1;XB=1;var e=ip(),t=zl();function r(n,i){return n&&e(i,t(i),n)}return Z1=r,Z1}var hd={exports:{}};hd.exports;var YB;function BG(){return YB||(YB=1,function(e,t){var r=Ia(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(c,l){if(l)return c.slice();var h=c.length,v=a?a(h):new c.constructor(h);return c.copy(v),v}e.exports=u}(hd,hd.exports)),hd.exports}var Q1,KB;function zG(){if(KB)return Q1;KB=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return Q1=e,Q1}var ew,JB;function VG(){if(JB)return ew;JB=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var a=t[n];r(a,n,t)&&(o[s++]=a)}return o}return ew=e,ew}var tw,ZB;function $G(){if(ZB)return tw;ZB=1;function e(){return[]}return tw=e,tw}var rw,QB;function xT(){if(QB)return rw;QB=1;var e=VG(),t=$G(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return n.call(o,a)}))}:t;return rw=s,rw}var nw,e5;function _le(){if(e5)return nw;e5=1;var e=ip(),t=xT();function r(n,i){return e(n,t(n),i)}return nw=r,nw}var iw,t5;function ST(){if(t5)return iw;t5=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return iw=e,iw}var sw,r5;function nm(){if(r5)return sw;r5=1;var e=FG(),t=e(Object.getPrototypeOf,Object);return sw=t,sw}var ow,n5;function GG(){if(n5)return ow;n5=1;var e=ST(),t=nm(),r=xT(),n=$G(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,r(o)),o=t(o);return a}:n;return ow=s,ow}var aw,i5;function ble(){if(i5)return aw;i5=1;var e=ip(),t=GG();function r(n,i){return e(n,t(n),i)}return aw=r,aw}var uw,s5;function UG(){if(s5)return uw;s5=1;var e=ST(),t=wi();function r(n,i,s){var o=i(n);return t(n)?o:e(o,s(n))}return uw=r,uw}var cw,o5;function jG(){if(o5)return cw;o5=1;var e=UG(),t=xT(),r=Mc();function n(i){return e(i,r,t)}return cw=n,cw}var lw,a5;function wle(){if(a5)return lw;a5=1;var e=UG(),t=GG(),r=zl();function n(i){return e(i,r,t)}return lw=n,lw}var fw,u5;function xle(){if(u5)return fw;u5=1;var e=Bl(),t=Ia(),r=e(t,"DataView");return fw=r,fw}var hw,c5;function Sle(){if(c5)return hw;c5=1;var e=Bl(),t=Ia(),r=e(t,"Promise");return hw=r,hw}var dw,l5;function HG(){if(l5)return dw;l5=1;var e=Bl(),t=Ia(),r=e(t,"Set");return dw=r,dw}var pw,f5;function Ele(){if(f5)return pw;f5=1;var e=Bl(),t=Ia(),r=e(t,"WeakMap");return pw=r,pw}var vw,h5;function vh(){if(h5)return vw;h5=1;var e=xle(),t=gT(),r=Sle(),n=HG(),i=Ele(),s=Fl(),o=NG(),a="[object Map]",u="[object Object]",c="[object Promise]",l="[object Set]",h="[object WeakMap]",v="[object DataView]",_=o(e),m=o(t),b=o(r),y=o(n),w=o(i),T=s;return(e&&T(new e(new ArrayBuffer(1)))!=v||t&&T(new t)!=a||r&&T(r.resolve())!=c||n&&T(new n)!=l||i&&T(new i)!=h)&&(T=function(P){var A=s(P),I=A==u?P.constructor:void 0,N=I?o(I):"";if(N)switch(N){case _:return v;case m:return a;case b:return c;case y:return l;case w:return h}return A}),vw=T,vw}var gw,d5;function Ale(){if(d5)return gw;d5=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return gw=r,gw}var mw,p5;function WG(){if(p5)return mw;p5=1;var e=Ia(),t=e.Uint8Array;return mw=t,mw}var yw,v5;function ET(){if(v5)return yw;v5=1;var e=WG();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return yw=t,yw}var _w,g5;function Tle(){if(g5)return _w;g5=1;var e=ET();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return _w=t,_w}var bw,m5;function Ple(){if(m5)return bw;m5=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return bw=t,bw}var ww,y5;function Cle(){if(y5)return ww;y5=1;var e=dh(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return ww=n,ww}var xw,_5;function XG(){if(_5)return xw;_5=1;var e=ET();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return xw=t,xw}var Sw,b5;function Ole(){if(b5)return Sw;b5=1;var e=ET(),t=Tle(),r=Ple(),n=Cle(),i=XG(),s="[object Boolean]",o="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",l="[object Set]",h="[object String]",v="[object Symbol]",_="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",y="[object Float64Array]",w="[object Int8Array]",T="[object Int16Array]",P="[object Int32Array]",A="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",d="[object Uint32Array]";function C(O,k,F){var z=O.constructor;switch(k){case _:return e(O);case s:case o:return new z(+O);case m:return t(O,F);case b:case y:case w:case T:case P:case A:case I:case N:case d:return i(O,F);case a:return new z;case u:case h:return new z(O);case c:return r(O);case l:return new z;case v:return n(O)}}return Sw=C,Sw}var Ew,w5;function YG(){if(w5)return Ew;w5=1;var e=Yo(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return Ew=r,Ew}var Aw,x5;function KG(){if(x5)return Aw;x5=1;var e=YG(),t=nm(),r=rm();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return Aw=n,Aw}var Tw,S5;function Ile(){if(S5)return Tw;S5=1;var e=vh(),t=fu(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return Tw=n,Tw}var Pw,E5;function Rle(){if(E5)return Pw;E5=1;var e=Ile(),t=tm(),r=bT(),n=r&&r.isMap,i=n?t(n):e;return Pw=i,Pw}var Cw,A5;function kle(){if(A5)return Cw;A5=1;var e=vh(),t=fu(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return Cw=n,Cw}var Ow,T5;function Mle(){if(T5)return Ow;T5=1;var e=kle(),t=tm(),r=bT(),n=r&&r.isSet,i=n?t(n):e;return Ow=i,Ow}var Iw,P5;function JG(){if(P5)return Iw;P5=1;var e=Jg(),t=yT(),r=Qg(),n=vle(),i=yle(),s=BG(),o=zG(),a=_le(),u=ble(),c=jG(),l=wle(),h=vh(),v=Ale(),_=Ole(),m=KG(),b=wi(),y=ph(),w=Rle(),T=Yo(),P=Mle(),A=Mc(),I=zl(),N=1,d=2,C=4,O="[object Arguments]",k="[object Array]",F="[object Boolean]",z="[object Date]",j="[object Error]",J="[object Function]",oe="[object GeneratorFunction]",W="[object Map]",D="[object Number]",B="[object Object]",U="[object RegExp]",ie="[object Set]",se="[object String]",xe="[object Symbol]",me="[object WeakMap]",ee="[object ArrayBuffer]",ce="[object DataView]",re="[object Float32Array]",te="[object Float64Array]",le="[object Int8Array]",Me="[object Int16Array]",Ge="[object Int32Array]",Ie="[object Uint8Array]",Ue="[object Uint8ClampedArray]",We="[object Uint16Array]",q="[object Uint32Array]",$={};$[O]=$[k]=$[ee]=$[ce]=$[F]=$[z]=$[re]=$[te]=$[le]=$[Me]=$[Ge]=$[W]=$[D]=$[B]=$[U]=$[ie]=$[se]=$[xe]=$[Ie]=$[Ue]=$[We]=$[q]=!0,$[j]=$[J]=$[me]=!1;function Y(K,we,he,Te,Ce,ze){var Le,Oe=we&N,Ee=we&d,Je=we&C;if(he&&(Le=Ce?he(K,Te,Ce,ze):he(K)),Le!==void 0)return Le;if(!T(K))return K;var dt=b(K);if(dt){if(Le=v(K),!Oe)return o(K,Le)}else{var Et=h(K),vt=Et==J||Et==oe;if(y(K))return s(K,Oe);if(Et==B||Et==O||vt&&!Ce){if(Le=Ee||vt?{}:m(K),!Oe)return Ee?u(K,i(Le,K)):a(K,n(Le,K))}else{if(!$[Et])return Ce?K:{};Le=_(K,Et,Oe)}}ze||(ze=new e);var ut=ze.get(K);if(ut)return ut;ze.set(K,Le),P(K)?K.forEach(function(sr){Le.add(Y(sr,we,he,sr,K,ze))}):w(K)&&K.forEach(function(sr,yr){Le.set(yr,Y(sr,we,he,yr,K,ze))});var Jt=Je?Ee?l:c:Ee?I:A,pr=dt?void 0:Jt(K);return t(pr||K,function(sr,yr){pr&&(yr=sr,sr=K[yr]),r(Le,yr,Y(sr,we,he,yr,K,ze))}),Le}return Iw=Y,Iw}var Rw,C5;function Lle(){if(C5)return Rw;C5=1;var e=JG(),t=4;function r(n){return e(n,t)}return Rw=r,Rw}var kw,O5;function AT(){if(O5)return kw;O5=1;function e(t){return function(){return t}}return kw=e,kw}var Mw,I5;function Nle(){if(I5)return Mw;I5=1;function e(t){return function(r,n,i){for(var s=-1,o=Object(r),a=i(r),u=a.length;u--;){var c=a[t?u:++s];if(n(o[c],c,o)===!1)break}return r}}return Mw=e,Mw}var Lw,R5;function TT(){if(R5)return Lw;R5=1;var e=Nle(),t=e();return Lw=t,Lw}var Nw,k5;function PT(){if(k5)return Nw;k5=1;var e=TT(),t=Mc();function r(n,i){return n&&e(n,i,t)}return Nw=r,Nw}var qw,M5;function qle(){if(M5)return qw;M5=1;var e=Hu();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var o=i.length,a=n?o:-1,u=Object(i);(n?a--:++a<o)&&s(u[a],a,u)!==!1;);return i}}return qw=t,qw}var Dw,L5;function im(){if(L5)return Dw;L5=1;var e=PT(),t=qle(),r=t(e);return Dw=r,Dw}var Fw,N5;function Vl(){if(N5)return Fw;N5=1;function e(t){return t}return Fw=e,Fw}var Bw,q5;function ZG(){if(q5)return Bw;q5=1;var e=Vl();function t(r){return typeof r=="function"?r:e}return Bw=t,Bw}var zw,D5;function QG(){if(D5)return zw;D5=1;var e=yT(),t=im(),r=ZG(),n=wi();function i(s,o){var a=n(s)?e:t;return a(s,r(o))}return zw=i,zw}var Vw,F5;function eU(){return F5||(F5=1,Vw=QG()),Vw}var $w,B5;function Dle(){if(B5)return $w;B5=1;var e=im();function t(r,n){var i=[];return e(r,function(s,o,a){n(s,o,a)&&i.push(s)}),i}return $w=t,$w}var Gw,z5;function Fle(){if(z5)return Gw;z5=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Gw=t,Gw}var Uw,V5;function Ble(){if(V5)return Uw;V5=1;function e(t){return this.__data__.has(t)}return Uw=e,Uw}var jw,$5;function tU(){if($5)return jw;$5=1;var e=mT(),t=Fle(),r=Ble();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,jw=n,jw}var Hw,G5;function zle(){if(G5)return Hw;G5=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return Hw=e,Hw}var Ww,U5;function rU(){if(U5)return Ww;U5=1;function e(t,r){return t.has(r)}return Ww=e,Ww}var Xw,j5;function nU(){if(j5)return Xw;j5=1;var e=tU(),t=zle(),r=rU(),n=1,i=2;function s(o,a,u,c,l,h){var v=u&n,_=o.length,m=a.length;if(_!=m&&!(v&&m>_))return!1;var b=h.get(o),y=h.get(a);if(b&&y)return b==a&&y==o;var w=-1,T=!0,P=u&i?new e:void 0;for(h.set(o,a),h.set(a,o);++w<_;){var A=o[w],I=a[w];if(c)var N=v?c(I,A,w,a,o,h):c(A,I,w,o,a,h);if(N!==void 0){if(N)continue;T=!1;break}if(P){if(!t(a,function(d,C){if(!r(P,C)&&(A===d||l(A,d,u,c,h)))return P.push(C)})){T=!1;break}}else if(!(A===I||l(A,I,u,c,h))){T=!1;break}}return h.delete(o),h.delete(a),T}return Xw=s,Xw}var Yw,H5;function Vle(){if(H5)return Yw;H5=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return Yw=e,Yw}var Kw,W5;function CT(){if(W5)return Kw;W5=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return Kw=e,Kw}var Jw,X5;function $le(){if(X5)return Jw;X5=1;var e=dh(),t=WG(),r=hh(),n=nU(),i=Vle(),s=CT(),o=1,a=2,u="[object Boolean]",c="[object Date]",l="[object Error]",h="[object Map]",v="[object Number]",_="[object RegExp]",m="[object Set]",b="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",T="[object DataView]",P=e?e.prototype:void 0,A=P?P.valueOf:void 0;function I(N,d,C,O,k,F,z){switch(C){case T:if(N.byteLength!=d.byteLength||N.byteOffset!=d.byteOffset)return!1;N=N.buffer,d=d.buffer;case w:return!(N.byteLength!=d.byteLength||!F(new t(N),new t(d)));case u:case c:case v:return r(+N,+d);case l:return N.name==d.name&&N.message==d.message;case _:case b:return N==d+"";case h:var j=i;case m:var J=O&o;if(j||(j=s),N.size!=d.size&&!J)return!1;var oe=z.get(N);if(oe)return oe==d;O|=a,z.set(N,d);var W=n(j(N),j(d),O,k,F,z);return z.delete(N),W;case y:if(A)return A.call(N)==A.call(d)}return!1}return Jw=I,Jw}var Zw,Y5;function Gle(){if(Y5)return Zw;Y5=1;var e=jG(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a,u,c,l){var h=a&t,v=e(s),_=v.length,m=e(o),b=m.length;if(_!=b&&!h)return!1;for(var y=_;y--;){var w=v[y];if(!(h?w in o:n.call(o,w)))return!1}var T=l.get(s),P=l.get(o);if(T&&P)return T==o&&P==s;var A=!0;l.set(s,o),l.set(o,s);for(var I=h;++y<_;){w=v[y];var N=s[w],d=o[w];if(u)var C=h?u(d,N,w,o,s,l):u(N,d,w,s,o,l);if(!(C===void 0?N===d||c(N,d,a,u,l):C)){A=!1;break}I||(I=w=="constructor")}if(A&&!I){var O=s.constructor,k=o.constructor;O!=k&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof k=="function"&&k instanceof k)&&(A=!1)}return l.delete(s),l.delete(o),A}return Zw=i,Zw}var Qw,K5;function Ule(){if(K5)return Qw;K5=1;var e=Jg(),t=nU(),r=$le(),n=Gle(),i=vh(),s=wi(),o=ph(),a=op(),u=1,c="[object Arguments]",l="[object Array]",h="[object Object]",v=Object.prototype,_=v.hasOwnProperty;function m(b,y,w,T,P,A){var I=s(b),N=s(y),d=I?l:i(b),C=N?l:i(y);d=d==c?h:d,C=C==c?h:C;var O=d==h,k=C==h,F=d==C;if(F&&o(b)){if(!o(y))return!1;I=!0,O=!1}if(F&&!O)return A||(A=new e),I||a(b)?t(b,y,w,T,P,A):r(b,y,d,w,T,P,A);if(!(w&u)){var z=O&&_.call(b,"__wrapped__"),j=k&&_.call(y,"__wrapped__");if(z||j){var J=z?b.value():b,oe=j?y.value():y;return A||(A=new e),P(J,oe,w,T,A)}}return F?(A||(A=new e),n(b,y,w,T,P,A)):!1}return Qw=m,Qw}var ex,J5;function iU(){if(J5)return ex;J5=1;var e=Ule(),t=fu();function r(n,i,s,o,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,o,r,a)}return ex=r,ex}var tx,Z5;function jle(){if(Z5)return tx;Z5=1;var e=Jg(),t=iU(),r=1,n=2;function i(s,o,a,u){var c=a.length,l=c,h=!u;if(s==null)return!l;for(s=Object(s);c--;){var v=a[c];if(h&&v[2]?v[1]!==s[v[0]]:!(v[0]in s))return!1}for(;++c<l;){v=a[c];var _=v[0],m=s[_],b=v[1];if(h&&v[2]){if(m===void 0&&!(_ in s))return!1}else{var y=new e;if(u)var w=u(m,b,_,s,o,y);if(!(w===void 0?t(b,m,r|n,u,y):w))return!1}}return!0}return tx=i,tx}var rx,Q5;function sU(){if(Q5)return rx;Q5=1;var e=Yo();function t(r){return r===r&&!e(r)}return rx=t,rx}var nx,e8;function Hle(){if(e8)return nx;e8=1;var e=sU(),t=Mc();function r(n){for(var i=t(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,e(a)]}return i}return nx=r,nx}var ix,t8;function oU(){if(t8)return ix;t8=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return ix=e,ix}var sx,r8;function Wle(){if(r8)return sx;r8=1;var e=jle(),t=Hle(),r=oU();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return sx=n,sx}var ox,n8;function gh(){if(n8)return ox;n8=1;var e=Fl(),t=fu(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return ox=n,ox}var ax,i8;function OT(){if(i8)return ax;i8=1;var e=wi(),t=gh(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return ax=i,ax}var ux,s8;function Xle(){if(s8)return ux;s8=1;var e=mT(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],u=s.cache;if(u.has(a))return u.get(a);var c=n.apply(this,o);return s.cache=u.set(a,c)||u,c};return s.cache=new(r.Cache||e),s}return r.Cache=e,ux=r,ux}var cx,o8;function Yle(){if(o8)return cx;o8=1;var e=Xle(),t=500;function r(n){var i=e(n,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return cx=r,cx}var lx,a8;function Kle(){if(a8)return lx;a8=1;var e=Yle(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,u,c){s.push(u?c.replace(r,"$1"):a||o)}),s});return lx=n,lx}var fx,u8;function sm(){if(u8)return fx;u8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return fx=e,fx}var hx,c8;function Jle(){if(c8)return hx;c8=1;var e=dh(),t=sm(),r=wi(),n=gh(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return s?s.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return hx=o,hx}var dx,l8;function aU(){if(l8)return dx;l8=1;var e=Jle();function t(r){return r==null?"":e(r)}return dx=t,dx}var px,f8;function om(){if(f8)return px;f8=1;var e=wi(),t=OT(),r=Kle(),n=aU();function i(s,o){return e(s)?s:t(s,o)?[s]:r(n(s))}return px=i,px}var vx,h8;function ap(){if(h8)return vx;h8=1;var e=gh();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return vx=t,vx}var gx,d8;function am(){if(d8)return gx;d8=1;var e=om(),t=ap();function r(n,i){i=e(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[t(i[s++])];return s&&s==o?n:void 0}return gx=r,gx}var mx,p8;function Zle(){if(p8)return mx;p8=1;var e=am();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return mx=t,mx}var yx,v8;function Qle(){if(v8)return yx;v8=1;function e(t,r){return t!=null&&r in Object(t)}return yx=e,yx}var _x,g8;function uU(){if(g8)return _x;g8=1;var e=om(),t=sp(),r=wi(),n=em(),i=_T(),s=ap();function o(a,u,c){u=e(u,a);for(var l=-1,h=u.length,v=!1;++l<h;){var _=s(u[l]);if(!(v=a!=null&&c(a,_)))break;a=a[_]}return v||++l!=h?v:(h=a==null?0:a.length,!!h&&i(h)&&n(_,h)&&(r(a)||t(a)))}return _x=o,_x}var bx,m8;function cU(){if(m8)return bx;m8=1;var e=Qle(),t=uU();function r(n,i){return n!=null&&t(n,i,e)}return bx=r,bx}var wx,y8;function efe(){if(y8)return wx;y8=1;var e=iU(),t=Zle(),r=cU(),n=OT(),i=sU(),s=oU(),o=ap(),a=1,u=2;function c(l,h){return n(l)&&i(h)?s(o(l),h):function(v){var _=t(v,l);return _===void 0&&_===h?r(v,l):e(h,_,a|u)}}return wx=c,wx}var xx,_8;function lU(){if(_8)return xx;_8=1;function e(t){return function(r){return r==null?void 0:r[t]}}return xx=e,xx}var Sx,b8;function tfe(){if(b8)return Sx;b8=1;var e=am();function t(r){return function(n){return e(n,r)}}return Sx=t,Sx}var Ex,w8;function rfe(){if(w8)return Ex;w8=1;var e=lU(),t=tfe(),r=OT(),n=ap();function i(s){return r(s)?e(n(s)):t(s)}return Ex=i,Ex}var Ax,x8;function Wu(){if(x8)return Ax;x8=1;var e=Wle(),t=efe(),r=Vl(),n=wi(),i=rfe();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return Ax=s,Ax}var Tx,S8;function fU(){if(S8)return Tx;S8=1;var e=VG(),t=Dle(),r=Wu(),n=wi();function i(s,o){var a=n(s)?e:t;return a(s,r(o,3))}return Tx=i,Tx}var Px,E8;function nfe(){if(E8)return Px;E8=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return Px=r,Px}var Cx,A8;function hU(){if(A8)return Cx;A8=1;var e=nfe(),t=uU();function r(n,i){return n!=null&&t(n,i,e)}return Cx=r,Cx}var Ox,T8;function ife(){if(T8)return Ox;T8=1;var e=wT(),t=vh(),r=sp(),n=wi(),i=Hu(),s=ph(),o=rm(),a=op(),u="[object Map]",c="[object Set]",l=Object.prototype,h=l.hasOwnProperty;function v(_){if(_==null)return!0;if(i(_)&&(n(_)||typeof _=="string"||typeof _.splice=="function"||s(_)||a(_)||r(_)))return!_.length;var m=t(_);if(m==u||m==c)return!_.size;if(o(_))return!e(_).length;for(var b in _)if(h.call(_,b))return!1;return!0}return Ox=v,Ox}var Ix,P8;function dU(){if(P8)return Ix;P8=1;function e(t){return t===void 0}return Ix=e,Ix}var Rx,C8;function pU(){if(C8)return Rx;C8=1;var e=im(),t=Hu();function r(n,i){var s=-1,o=t(n)?Array(n.length):[];return e(n,function(a,u,c){o[++s]=i(a,u,c)}),o}return Rx=r,Rx}var kx,O8;function vU(){if(O8)return kx;O8=1;var e=sm(),t=Wu(),r=pU(),n=wi();function i(s,o){var a=n(s)?e:r;return a(s,t(o,3))}return kx=i,kx}var Mx,I8;function sfe(){if(I8)return Mx;I8=1;function e(t,r,n,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++s]);++s<o;)n=r(n,t[s],s,t);return n}return Mx=e,Mx}var Lx,R8;function ofe(){if(R8)return Lx;R8=1;function e(t,r,n,i,s){return s(t,function(o,a,u){n=i?(i=!1,o):r(n,o,a,u)}),n}return Lx=e,Lx}var Nx,k8;function gU(){if(k8)return Nx;k8=1;var e=sfe(),t=im(),r=Wu(),n=ofe(),i=wi();function s(o,a,u){var c=i(o)?e:n,l=arguments.length<3;return c(o,r(a,4),u,l,t)}return Nx=s,Nx}var qx,M8;function afe(){if(M8)return qx;M8=1;var e=Fl(),t=wi(),r=fu(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return qx=i,qx}var Dx,L8;function ufe(){if(L8)return Dx;L8=1;var e=lU(),t=e("length");return Dx=t,Dx}var Fx,N8;function cfe(){if(N8)return Fx;N8=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function u(c){return a.test(c)}return Fx=u,Fx}var Bx,q8;function lfe(){if(q8)return Bx;q8=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",l="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",m=c+"?",b="["+s+"]?",y="(?:"+_+"(?:"+[l,h,v].join("|")+")"+b+m+")*",w=b+m+y,T="(?:"+[l+a+"?",a,h,v,o].join("|")+")",P=RegExp(u+"(?="+u+")|"+T+w,"g");function A(I){for(var N=P.lastIndex=0;P.test(I);)++N;return N}return Bx=A,Bx}var zx,D8;function ffe(){if(D8)return zx;D8=1;var e=ufe(),t=cfe(),r=lfe();function n(i){return t(i)?r(i):e(i)}return zx=n,zx}var Vx,F8;function hfe(){if(F8)return Vx;F8=1;var e=wT(),t=vh(),r=Hu(),n=afe(),i=ffe(),s="[object Map]",o="[object Set]";function a(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var c=t(u);return c==s||c==o?u.size:e(u).length}return Vx=a,Vx}var $x,B8;function dfe(){if(B8)return $x;B8=1;var e=yT(),t=YG(),r=PT(),n=Wu(),i=nm(),s=wi(),o=ph(),a=np(),u=Yo(),c=op();function l(h,v,_){var m=s(h),b=m||o(h)||c(h);if(v=n(v,4),_==null){var y=h&&h.constructor;b?_=m?new y:[]:u(h)?_=a(y)?t(i(h)):{}:_={}}return(b?e:r)(h,function(w,T,P){return v(_,w,T,P)}),_}return $x=l,$x}var Gx,z8;function pfe(){if(z8)return Gx;z8=1;var e=dh(),t=sp(),r=wi(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return Gx=i,Gx}var Ux,V8;function IT(){if(V8)return Ux;V8=1;var e=ST(),t=pfe();function r(n,i,s,o,a){var u=-1,c=n.length;for(s||(s=t),a||(a=[]);++u<c;){var l=n[u];i>0&&s(l)?i>1?r(l,i-1,s,o,a):e(a,l):o||(a[a.length]=l)}return a}return Ux=r,Ux}var jx,$8;function vfe(){if($8)return jx;$8=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return jx=e,jx}var Hx,G8;function mU(){if(G8)return Hx;G8=1;var e=vfe(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,a=-1,u=t(o.length-i,0),c=Array(u);++a<u;)c[a]=o[i+a];a=-1;for(var l=Array(i+1);++a<i;)l[a]=o[a];return l[i]=s(c),e(n,this,l)}}return Hx=r,Hx}var Wx,U8;function gfe(){if(U8)return Wx;U8=1;var e=AT(),t=qG(),r=Vl(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return Wx=n,Wx}var Xx,j8;function mfe(){if(j8)return Xx;j8=1;var e=800,t=16,r=Date.now;function n(i){var s=0,o=0;return function(){var a=r(),u=t-(a-o);if(o=a,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Xx=n,Xx}var Yx,H8;function yU(){if(H8)return Yx;H8=1;var e=gfe(),t=mfe(),r=t(e);return Yx=r,Yx}var Kx,W8;function um(){if(W8)return Kx;W8=1;var e=Vl(),t=mU(),r=yU();function n(i,s){return r(t(i,s,e),i+"")}return Kx=n,Kx}var Jx,X8;function _U(){if(X8)return Jx;X8=1;function e(t,r,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(t[o],o,t))return o;return-1}return Jx=e,Jx}var Zx,Y8;function yfe(){if(Y8)return Zx;Y8=1;function e(t){return t!==t}return Zx=e,Zx}var Qx,K8;function _fe(){if(K8)return Qx;K8=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return Qx=e,Qx}var eS,J8;function bfe(){if(J8)return eS;J8=1;var e=_U(),t=yfe(),r=_fe();function n(i,s,o){return s===s?r(i,s,o):e(i,t,o)}return eS=n,eS}var tS,Z8;function wfe(){if(Z8)return tS;Z8=1;var e=bfe();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return tS=t,tS}var rS,Q8;function xfe(){if(Q8)return rS;Q8=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return rS=e,rS}var nS,ez;function Sfe(){if(ez)return nS;ez=1;function e(){}return nS=e,nS}var iS,tz;function Efe(){if(tz)return iS;tz=1;var e=HG(),t=Sfe(),r=CT(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return iS=i,iS}var sS,rz;function Afe(){if(rz)return sS;rz=1;var e=tU(),t=wfe(),r=xfe(),n=rU(),i=Efe(),s=CT(),o=200;function a(u,c,l){var h=-1,v=t,_=u.length,m=!0,b=[],y=b;if(l)m=!1,v=r;else if(_>=o){var w=c?null:i(u);if(w)return s(w);m=!1,v=n,y=new e}else y=c?[]:b;e:for(;++h<_;){var T=u[h],P=c?c(T):T;if(T=l||T!==0?T:0,m&&P===P){for(var A=y.length;A--;)if(y[A]===P)continue e;c&&y.push(P),b.push(T)}else v(y,P,l)||(y!==b&&y.push(P),b.push(T))}return b}return sS=a,sS}var oS,nz;function bU(){if(nz)return oS;nz=1;var e=Hu(),t=fu();function r(n){return t(n)&&e(n)}return oS=r,oS}var aS,iz;function Tfe(){if(iz)return aS;iz=1;var e=IT(),t=um(),r=Afe(),n=bU(),i=t(function(s){return r(e(s,1,n,!0))});return aS=i,aS}var uS,sz;function Pfe(){if(sz)return uS;sz=1;var e=sm();function t(r,n){return e(n,function(i){return r[i]})}return uS=t,uS}var cS,oz;function wU(){if(oz)return cS;oz=1;var e=Pfe(),t=Mc();function r(n){return n==null?[]:e(n,t(n))}return cS=r,cS}var lS,az;function Ko(){if(az)return lS;az=1;var e;if(typeof vT=="function")try{e={clone:Lle(),constant:AT(),each:eU(),filter:fU(),has:hU(),isArray:wi(),isEmpty:ife(),isFunction:np(),isUndefined:dU(),keys:Mc(),map:vU(),reduce:gU(),size:hfe(),transform:dfe(),union:Tfe(),values:wU()}}catch{}return e||(e=window._),lS=e,lS}var fS,uz;function RT(){if(uz)return fS;uz=1;var e=Ko();fS=i;var t="\0",r="\0",n="";function i(l){this._isDirected=e.has(l,"directed")?l.directed:!0,this._isMultigraph=e.has(l,"multigraph")?l.multigraph:!1,this._isCompound=e.has(l,"compound")?l.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(l){return this._label=l,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(l){return e.isFunction(l)||(l=e.constant(l)),this._defaultNodeLabelFn=l,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var l=this;return e.filter(this.nodes(),function(h){return e.isEmpty(l._in[h])})},i.prototype.sinks=function(){var l=this;return e.filter(this.nodes(),function(h){return e.isEmpty(l._out[h])})},i.prototype.setNodes=function(l,h){var v=arguments,_=this;return e.each(l,function(m){v.length>1?_.setNode(m,h):_.setNode(m)}),this},i.prototype.setNode=function(l,h){return e.has(this._nodes,l)?(arguments.length>1&&(this._nodes[l]=h),this):(this._nodes[l]=arguments.length>1?h:this._defaultNodeLabelFn(l),this._isCompound&&(this._parent[l]=r,this._children[l]={},this._children[r][l]=!0),this._in[l]={},this._preds[l]={},this._out[l]={},this._sucs[l]={},++this._nodeCount,this)},i.prototype.node=function(l){return this._nodes[l]},i.prototype.hasNode=function(l){return e.has(this._nodes,l)},i.prototype.removeNode=function(l){var h=this;if(e.has(this._nodes,l)){var v=function(_){h.removeEdge(h._edgeObjs[_])};delete this._nodes[l],this._isCompound&&(this._removeFromParentsChildList(l),delete this._parent[l],e.each(this.children(l),function(_){h.setParent(_)}),delete this._children[l]),e.each(e.keys(this._in[l]),v),delete this._in[l],delete this._preds[l],e.each(e.keys(this._out[l]),v),delete this._out[l],delete this._sucs[l],--this._nodeCount}return this},i.prototype.setParent=function(l,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(h))h=r;else{h+="";for(var v=h;!e.isUndefined(v);v=this.parent(v))if(v===l)throw new Error("Setting "+h+" as parent of "+l+" would create a cycle");this.setNode(h)}return this.setNode(l),this._removeFromParentsChildList(l),this._parent[l]=h,this._children[h][l]=!0,this},i.prototype._removeFromParentsChildList=function(l){delete this._children[this._parent[l]][l]},i.prototype.parent=function(l){if(this._isCompound){var h=this._parent[l];if(h!==r)return h}},i.prototype.children=function(l){if(e.isUndefined(l)&&(l=r),this._isCompound){var h=this._children[l];if(h)return e.keys(h)}else{if(l===r)return this.nodes();if(this.hasNode(l))return[]}},i.prototype.predecessors=function(l){var h=this._preds[l];if(h)return e.keys(h)},i.prototype.successors=function(l){var h=this._sucs[l];if(h)return e.keys(h)},i.prototype.neighbors=function(l){var h=this.predecessors(l);if(h)return e.union(h,this.successors(l))},i.prototype.isLeaf=function(l){var h;return this.isDirected()?h=this.successors(l):h=this.neighbors(l),h.length===0},i.prototype.filterNodes=function(l){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var v=this;e.each(this._nodes,function(b,y){l(y)&&h.setNode(y,b)}),e.each(this._edgeObjs,function(b){h.hasNode(b.v)&&h.hasNode(b.w)&&h.setEdge(b,v.edge(b))});var _={};function m(b){var y=v.parent(b);return y===void 0||h.hasNode(y)?(_[b]=y,y):y in _?_[y]:m(y)}return this._isCompound&&e.each(h.nodes(),function(b){h.setParent(b,m(b))}),h},i.prototype.setDefaultEdgeLabel=function(l){return e.isFunction(l)||(l=e.constant(l)),this._defaultEdgeLabelFn=l,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(l,h){var v=this,_=arguments;return e.reduce(l,function(m,b){return _.length>1?v.setEdge(m,b,h):v.setEdge(m,b),b}),this},i.prototype.setEdge=function(){var l,h,v,_,m=!1,b=arguments[0];typeof b=="object"&&b!==null&&"v"in b?(l=b.v,h=b.w,v=b.name,arguments.length===2&&(_=arguments[1],m=!0)):(l=b,h=arguments[1],v=arguments[3],arguments.length>2&&(_=arguments[2],m=!0)),l=""+l,h=""+h,e.isUndefined(v)||(v=""+v);var y=a(this._isDirected,l,h,v);if(e.has(this._edgeLabels,y))return m&&(this._edgeLabels[y]=_),this;if(!e.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(h),this._edgeLabels[y]=m?_:this._defaultEdgeLabelFn(l,h,v);var w=u(this._isDirected,l,h,v);return l=w.v,h=w.w,Object.freeze(w),this._edgeObjs[y]=w,s(this._preds[h],l),s(this._sucs[l],h),this._in[h][y]=w,this._out[l][y]=w,this._edgeCount++,this},i.prototype.edge=function(l,h,v){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,l,h,v);return this._edgeLabels[_]},i.prototype.hasEdge=function(l,h,v){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,l,h,v);return e.has(this._edgeLabels,_)},i.prototype.removeEdge=function(l,h,v){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,l,h,v),m=this._edgeObjs[_];return m&&(l=m.v,h=m.w,delete this._edgeLabels[_],delete this._edgeObjs[_],o(this._preds[h],l),o(this._sucs[l],h),delete this._in[h][_],delete this._out[l][_],this._edgeCount--),this},i.prototype.inEdges=function(l,h){var v=this._in[l];if(v){var _=e.values(v);return h?e.filter(_,function(m){return m.v===h}):_}},i.prototype.outEdges=function(l,h){var v=this._out[l];if(v){var _=e.values(v);return h?e.filter(_,function(m){return m.w===h}):_}},i.prototype.nodeEdges=function(l,h){var v=this.inEdges(l,h);if(v)return v.concat(this.outEdges(l,h))};function s(l,h){l[h]?l[h]++:l[h]=1}function o(l,h){--l[h]||delete l[h]}function a(l,h,v,_){var m=""+h,b=""+v;if(!l&&m>b){var y=m;m=b,b=y}return m+n+b+n+(e.isUndefined(_)?t:_)}function u(l,h,v,_){var m=""+h,b=""+v;if(!l&&m>b){var y=m;m=b,b=y}var w={v:m,w:b};return _&&(w.name=_),w}function c(l,h){return a(l,h.v,h.w,h.name)}return fS}var hS,cz;function Cfe(){return cz||(cz=1,hS="2.1.8"),hS}var dS,lz;function Ofe(){return lz||(lz=1,dS={Graph:RT(),version:Cfe()}),dS}var pS,fz;function Ife(){if(fz)return pS;fz=1;var e=Ko(),t=RT();pS={write:r,read:s};function r(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function n(o){return e.map(o.nodes(),function(a){var u=o.node(a),c=o.parent(a),l={v:a};return e.isUndefined(u)||(l.value=u),e.isUndefined(c)||(l.parent=c),l})}function i(o){return e.map(o.edges(),function(a){var u=o.edge(a),c={v:a.v,w:a.w};return e.isUndefined(a.name)||(c.name=a.name),e.isUndefined(u)||(c.value=u),c})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(o.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return pS}var vS,hz;function Rfe(){if(hz)return vS;hz=1;var e=Ko();vS=t;function t(r){var n={},i=[],s;function o(a){e.has(n,a)||(n[a]=!0,s.push(a),e.each(r.successors(a),o),e.each(r.predecessors(a),o))}return e.each(r.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return vS}var gS,dz;function xU(){if(dz)return gS;dz=1;var e=Ko();gS=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var s=this._arr,o=s.length;return i[r]=o,s.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,s=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,s<n.length&&(o=n[s].priority<n[o].priority?s:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,s;r!==0&&(s=r>>1,!(n[s].priority<i));)this._swap(r,s),r=s},t.prototype._swap=function(r,n){var i=this._arr,s=this._keyIndices,o=i[r],a=i[n];i[r]=a,i[n]=o,s[a.key]=r,s[o.key]=n},gS}var mS,pz;function SU(){if(pz)return mS;pz=1;var e=Ko(),t=xU();mS=n;var r=e.constant(1);function n(s,o,a,u){return i(s,String(o),a||r,u||function(c){return s.outEdges(c)})}function i(s,o,a,u){var c={},l=new t,h,v,_=function(m){var b=m.v!==h?m.v:m.w,y=c[b],w=a(m),T=v.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+w);T<y.distance&&(y.distance=T,y.predecessor=h,l.decrease(b,T))};for(s.nodes().forEach(function(m){var b=m===o?0:Number.POSITIVE_INFINITY;c[m]={distance:b},l.add(m,b)});l.size()>0&&(h=l.removeMin(),v=c[h],v.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(_);return c}return mS}var yS,vz;function kfe(){if(vz)return yS;vz=1;var e=SU(),t=Ko();yS=r;function r(n,i,s){return t.transform(n.nodes(),function(o,a){o[a]=e(n,a,i,s)},{})}return yS}var _S,gz;function EU(){if(gz)return _S;gz=1;var e=Ko();_S=t;function t(r){var n=0,i=[],s={},o=[];function a(u){var c=s[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(v){e.has(s,v)?s[v].onStack&&(c.lowlink=Math.min(c.lowlink,s[v].index)):(a(v),c.lowlink=Math.min(c.lowlink,s[v].lowlink))}),c.lowlink===c.index){var l=[],h;do h=i.pop(),s[h].onStack=!1,l.push(h);while(u!==h);o.push(l)}}return r.nodes().forEach(function(u){e.has(s,u)||a(u)}),o}return _S}var bS,mz;function Mfe(){if(mz)return bS;mz=1;var e=Ko(),t=EU();bS=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return bS}var wS,yz;function Lfe(){if(yz)return wS;yz=1;var e=Ko();wS=r;var t=e.constant(1);function r(i,s,o){return n(i,s||t,o||function(a){return i.outEdges(a)})}function n(i,s,o){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(l){c!==l&&(a[c][l]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(l){var h=l.v===c?l.w:l.v,v=s(l);a[c][h]={distance:v,predecessor:c}})}),u.forEach(function(c){var l=a[c];u.forEach(function(h){var v=a[h];u.forEach(function(_){var m=v[c],b=l[_],y=v[_],w=m.distance+b.distance;w<y.distance&&(y.distance=w,y.predecessor=b.predecessor)})})}),a}return wS}var xS,_z;function AU(){if(_z)return xS;_z=1;var e=Ko();xS=t,t.CycleException=r;function t(n){var i={},s={},o=[];function a(u){if(e.has(s,u))throw new r;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(n.predecessors(u),a),delete s[u],o.push(u))}if(e.each(n.sinks(),a),e.size(i)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,xS}var SS,bz;function Nfe(){if(bz)return SS;bz=1;var e=AU();SS=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return SS}var ES,wz;function TU(){if(wz)return ES;wz=1;var e=Ko();ES=t;function t(n,i,s){e.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],u={};return e.each(i,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);r(n,c,s==="post",u,o,a)}),a}function r(n,i,s,o,a,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(a(i),function(c){r(n,c,s,o,a,u)}),s&&u.push(i))}return ES}var AS,xz;function qfe(){if(xz)return AS;xz=1;var e=TU();AS=t;function t(r,n){return e(r,n,"post")}return AS}var TS,Sz;function Dfe(){if(Sz)return TS;Sz=1;var e=TU();TS=t;function t(r,n){return e(r,n,"pre")}return TS}var PS,Ez;function Ffe(){if(Ez)return PS;Ez=1;var e=Ko(),t=RT(),r=xU();PS=n;function n(i,s){var o=new t,a={},u=new r,c;function l(v){var _=v.v===c?v.w:v.v,m=u.priority(_);if(m!==void 0){var b=s(v);b<m&&(a[_]=c,u.decrease(_,b))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(v){u.add(v,Number.POSITIVE_INFINITY),o.setNode(v)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),e.has(a,c))o.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(l)}return o}return PS}var CS,Az;function Bfe(){return Az||(Az=1,CS={components:Rfe(),dijkstra:SU(),dijkstraAll:kfe(),findCycles:Mfe(),floydWarshall:Lfe(),isAcyclic:Nfe(),postorder:qfe(),preorder:Dfe(),prim:Ffe(),tarjan:EU(),topsort:AU()}),CS}var OS,Tz;function PU(){if(Tz)return OS;Tz=1;var e=Ofe();return OS={Graph:e.Graph,json:Ife(),alg:Bfe(),version:e.version},OS}var IS,Pz;function ya(){if(Pz)return IS;Pz=1;var e;if(typeof vT=="function")try{e=PU()}catch{}return e||(e=window.graphlib),IS=e,IS}var RS,Cz;function zfe(){if(Cz)return RS;Cz=1;var e=JG(),t=1,r=4;function n(i){return e(i,t|r)}return RS=n,RS}var kS,Oz;function cm(){if(Oz)return kS;Oz=1;var e=hh(),t=Hu(),r=em(),n=Yo();function i(s,o,a){if(!n(a))return!1;var u=typeof o;return(u=="number"?t(a)&&r(o,a.length):u=="string"&&o in a)?e(a[o],s):!1}return kS=i,kS}var MS,Iz;function Vfe(){if(Iz)return MS;Iz=1;var e=um(),t=hh(),r=cm(),n=zl(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,u){a=Object(a);var c=-1,l=u.length,h=l>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(l=1);++c<l;)for(var v=u[c],_=n(v),m=-1,b=_.length;++m<b;){var y=_[m],w=a[y];(w===void 0||t(w,i[y])&&!s.call(a,y))&&(a[y]=v[y])}return a});return MS=o,MS}var LS,Rz;function $fe(){if(Rz)return LS;Rz=1;var e=Wu(),t=Hu(),r=Mc();function n(i){return function(s,o,a){var u=Object(s);if(!t(s)){var c=e(o,3);s=r(s),o=function(h){return c(u[h],h,u)}}var l=i(s,o,a);return l>-1?u[c?s[l]:l]:void 0}}return LS=n,LS}var NS,kz;function Gfe(){if(kz)return NS;kz=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return NS=t,NS}var qS,Mz;function Ufe(){if(Mz)return qS;Mz=1;var e=Gfe(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return qS=r,qS}var DS,Lz;function jfe(){if(Lz)return DS;Lz=1;var e=Ufe(),t=Yo(),r=gh(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return n;if(t(c)){var l=typeof c.valueOf=="function"?c.valueOf():c;c=t(l)?l+"":l}if(typeof c!="string")return c===0?c:+c;c=e(c);var h=s.test(c);return h||o.test(c)?a(c.slice(2),h?2:8):i.test(c)?n:+c}return DS=u,DS}var FS,Nz;function CU(){if(Nz)return FS;Nz=1;var e=jfe(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var s=i<0?-1:1;return s*r}return i===i?i:0}return FS=n,FS}var BS,qz;function Hfe(){if(qz)return BS;qz=1;var e=CU();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return BS=t,BS}var zS,Dz;function Wfe(){if(Dz)return zS;Dz=1;var e=_U(),t=Wu(),r=Hfe(),n=Math.max;function i(s,o,a){var u=s==null?0:s.length;if(!u)return-1;var c=a==null?0:r(a);return c<0&&(c=n(u+c,0)),e(s,t(o,3),c)}return zS=i,zS}var VS,Fz;function Xfe(){if(Fz)return VS;Fz=1;var e=$fe(),t=Wfe(),r=e(t);return VS=r,VS}var $S,Bz;function OU(){if(Bz)return $S;Bz=1;var e=IT();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return $S=t,$S}var GS,zz;function Yfe(){if(zz)return GS;zz=1;var e=TT(),t=ZG(),r=zl();function n(i,s){return i==null?i:e(i,t(s),r)}return GS=n,GS}var US,Vz;function Kfe(){if(Vz)return US;Vz=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return US=e,US}var jS,$z;function Jfe(){if($z)return jS;$z=1;var e=Zg(),t=PT(),r=Wu();function n(i,s){var o={};return s=r(s,3),t(i,function(a,u,c){e(o,u,s(a,u,c))}),o}return jS=n,jS}var HS,Gz;function kT(){if(Gz)return HS;Gz=1;var e=gh();function t(r,n,i){for(var s=-1,o=r.length;++s<o;){var a=r[s],u=n(a);if(u!=null&&(c===void 0?u===u&&!e(u):i(u,c)))var c=u,l=a}return l}return HS=t,HS}var WS,Uz;function Zfe(){if(Uz)return WS;Uz=1;function e(t,r){return t>r}return WS=e,WS}var XS,jz;function Qfe(){if(jz)return XS;jz=1;var e=kT(),t=Zfe(),r=Vl();function n(i){return i&&i.length?e(i,r,t):void 0}return XS=n,XS}var YS,Hz;function IU(){if(Hz)return YS;Hz=1;var e=Zg(),t=hh();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return YS=r,YS}var KS,Wz;function ehe(){if(Wz)return KS;Wz=1;var e=Fl(),t=nm(),r=fu(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,u=o.call(Object);function c(l){if(!r(l)||e(l)!=n)return!1;var h=t(l);if(h===null)return!0;var v=a.call(h,"constructor")&&h.constructor;return typeof v=="function"&&v instanceof v&&o.call(v)==u}return KS=c,KS}var JS,Xz;function RU(){if(Xz)return JS;Xz=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return JS=e,JS}var ZS,Yz;function the(){if(Yz)return ZS;Yz=1;var e=ip(),t=zl();function r(n){return e(n,t(n))}return ZS=r,ZS}var QS,Kz;function rhe(){if(Kz)return QS;Kz=1;var e=IU(),t=BG(),r=XG(),n=zG(),i=KG(),s=sp(),o=wi(),a=bU(),u=ph(),c=np(),l=Yo(),h=ehe(),v=op(),_=RU(),m=the();function b(y,w,T,P,A,I,N){var d=_(y,T),C=_(w,T),O=N.get(C);if(O){e(y,T,O);return}var k=I?I(d,C,T+"",y,w,N):void 0,F=k===void 0;if(F){var z=o(C),j=!z&&u(C),J=!z&&!j&&v(C);k=C,z||j||J?o(d)?k=d:a(d)?k=n(d):j?(F=!1,k=t(C,!0)):J?(F=!1,k=r(C,!0)):k=[]:h(C)||s(C)?(k=d,s(d)?k=m(d):(!l(d)||c(d))&&(k=i(C))):F=!1}F&&(N.set(C,k),A(k,C,P,I,N),N.delete(C)),e(y,T,k)}return QS=b,QS}var eE,Jz;function nhe(){if(Jz)return eE;Jz=1;var e=Jg(),t=IU(),r=TT(),n=rhe(),i=Yo(),s=zl(),o=RU();function a(u,c,l,h,v){u!==c&&r(c,function(_,m){if(v||(v=new e),i(_))n(u,c,m,l,a,h,v);else{var b=h?h(o(u,m),_,m+"",u,c,v):void 0;b===void 0&&(b=_),t(u,m,b)}},s)}return eE=a,eE}var tE,Zz;function ihe(){if(Zz)return tE;Zz=1;var e=um(),t=cm();function r(n){return e(function(i,s){var o=-1,a=s.length,u=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(u=n.length>3&&typeof u=="function"?(a--,u):void 0,c&&t(s[0],s[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++o<a;){var l=s[o];l&&n(i,l,o,u)}return i})}return tE=r,tE}var rE,Qz;function she(){if(Qz)return rE;Qz=1;var e=nhe(),t=ihe(),r=t(function(n,i,s){e(n,i,s)});return rE=r,rE}var nE,e4;function kU(){if(e4)return nE;e4=1;function e(t,r){return t<r}return nE=e,nE}var iE,t4;function ohe(){if(t4)return iE;t4=1;var e=kT(),t=kU(),r=Vl();function n(i){return i&&i.length?e(i,r,t):void 0}return iE=n,iE}var sE,r4;function ahe(){if(r4)return sE;r4=1;var e=kT(),t=Wu(),r=kU();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return sE=n,sE}var oE,n4;function uhe(){if(n4)return oE;n4=1;var e=Ia(),t=function(){return e.Date.now()};return oE=t,oE}var aE,i4;function che(){if(i4)return aE;i4=1;var e=Qg(),t=om(),r=em(),n=Yo(),i=ap();function s(o,a,u,c){if(!n(o))return o;a=t(a,o);for(var l=-1,h=a.length,v=h-1,_=o;_!=null&&++l<h;){var m=i(a[l]),b=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(l!=v){var y=_[m];b=c?c(y,m,_):void 0,b===void 0&&(b=n(y)?y:r(a[l+1])?[]:{})}e(_,m,b),_=_[m]}return o}return aE=s,aE}var uE,s4;function lhe(){if(s4)return uE;s4=1;var e=am(),t=che(),r=om();function n(i,s,o){for(var a=-1,u=s.length,c={};++a<u;){var l=s[a],h=e(i,l);o(h,l)&&t(c,r(l,i),h)}return c}return uE=n,uE}var cE,o4;function fhe(){if(o4)return cE;o4=1;var e=lhe(),t=cU();function r(n,i){return e(n,i,function(s,o){return t(n,o)})}return cE=r,cE}var lE,a4;function hhe(){if(a4)return lE;a4=1;var e=OU(),t=mU(),r=yU();function n(i){return r(t(i,void 0,e),i+"")}return lE=n,lE}var fE,u4;function dhe(){if(u4)return fE;u4=1;var e=fhe(),t=hhe(),r=t(function(n,i){return n==null?{}:e(n,i)});return fE=r,fE}var hE,c4;function phe(){if(c4)return hE;c4=1;var e=Math.ceil,t=Math.max;function r(n,i,s,o){for(var a=-1,u=t(e((i-n)/(s||1)),0),c=Array(u);u--;)c[o?u:++a]=n,n+=s;return c}return hE=r,hE}var dE,l4;function vhe(){if(l4)return dE;l4=1;var e=phe(),t=cm(),r=CU();function n(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),a=a===void 0?s<o?1:-1:r(a),e(s,o,a,i)}}return dE=n,dE}var pE,f4;function ghe(){if(f4)return pE;f4=1;var e=vhe(),t=e();return pE=t,pE}var vE,h4;function mhe(){if(h4)return vE;h4=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return vE=e,vE}var gE,d4;function yhe(){if(d4)return gE;d4=1;var e=gh();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,a=e(r),u=n!==void 0,c=n===null,l=n===n,h=e(n);if(!c&&!h&&!a&&r>n||a&&u&&l&&!c&&!h||s&&u&&l||!i&&l||!o)return 1;if(!s&&!a&&!h&&r<n||h&&i&&o&&!s&&!a||c&&i&&o||!u&&o||!l)return-1}return 0}return gE=t,gE}var mE,p4;function _he(){if(p4)return mE;p4=1;var e=yhe();function t(r,n,i){for(var s=-1,o=r.criteria,a=n.criteria,u=o.length,c=i.length;++s<u;){var l=e(o[s],a[s]);if(l){if(s>=c)return l;var h=i[s];return l*(h=="desc"?-1:1)}}return r.index-n.index}return mE=t,mE}var yE,v4;function bhe(){if(v4)return yE;v4=1;var e=sm(),t=am(),r=Wu(),n=pU(),i=mhe(),s=tm(),o=_he(),a=Vl(),u=wi();function c(l,h,v){h.length?h=e(h,function(b){return u(b)?function(y){return t(y,b.length===1?b[0]:b)}:b}):h=[a];var _=-1;h=e(h,s(r));var m=n(l,function(b,y,w){var T=e(h,function(P){return P(b)});return{criteria:T,index:++_,value:b}});return i(m,function(b,y){return o(b,y,v)})}return yE=c,yE}var _E,g4;function whe(){if(g4)return _E;g4=1;var e=IT(),t=bhe(),r=um(),n=cm(),i=r(function(s,o){if(s==null)return[];var a=o.length;return a>1&&n(s,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return _E=i,_E}var bE,m4;function xhe(){if(m4)return bE;m4=1;var e=aU(),t=0;function r(n){var i=++t;return e(n)+i}return bE=r,bE}var wE,y4;function She(){if(y4)return wE;y4=1;function e(t,r,n){for(var i=-1,s=t.length,o=r.length,a={};++i<s;){var u=i<o?r[i]:void 0;n(a,t[i],u)}return a}return wE=e,wE}var xE,_4;function Ehe(){if(_4)return xE;_4=1;var e=Qg(),t=She();function r(n,i){return t(n||[],i||[],e)}return xE=r,xE}var SE,b4;function Gn(){if(b4)return SE;b4=1;var e;if(typeof vT=="function")try{e={cloneDeep:zfe(),constant:AT(),defaults:Vfe(),each:eU(),filter:fU(),find:Xfe(),flatten:OU(),forEach:QG(),forIn:Yfe(),has:hU(),isUndefined:dU(),last:Kfe(),map:vU(),mapValues:Jfe(),max:Qfe(),merge:she(),min:ohe(),minBy:ahe(),now:uhe(),pick:dhe(),range:ghe(),reduce:gU(),sortBy:whe(),uniqueId:xhe(),values:wU(),zipObject:Ehe()}}catch{}return e||(e=window._),SE=e,SE}var EE,w4;function Ahe(){if(w4)return EE;w4=1,EE=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,s=i._prev;s!==i;)n.push(JSON.stringify(s,r)),s=s._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return EE}var AE,x4;function The(){if(x4)return AE;x4=1;var e=Gn(),t=ya().Graph,r=Ahe();AE=i;var n=e.constant(1);function i(c,l){if(c.nodeCount()<=1)return[];var h=a(c,l||n),v=s(h.graph,h.buckets,h.zeroIdx);return e.flatten(e.map(v,function(_){return c.outEdges(_.v,_.w)}),!0)}function s(c,l,h){for(var v=[],_=l[l.length-1],m=l[0],b;c.nodeCount();){for(;b=m.dequeue();)o(c,l,h,b);for(;b=_.dequeue();)o(c,l,h,b);if(c.nodeCount()){for(var y=l.length-2;y>0;--y)if(b=l[y].dequeue(),b){v=v.concat(o(c,l,h,b,!0));break}}}return v}function o(c,l,h,v,_){var m=_?[]:void 0;return e.forEach(c.inEdges(v.v),function(b){var y=c.edge(b),w=c.node(b.v);_&&m.push({v:b.v,w:b.w}),w.out-=y,u(l,h,w)}),e.forEach(c.outEdges(v.v),function(b){var y=c.edge(b),w=b.w,T=c.node(w);T.in-=y,u(l,h,T)}),c.removeNode(v.v),m}function a(c,l){var h=new t,v=0,_=0;e.forEach(c.nodes(),function(y){h.setNode(y,{v:y,in:0,out:0})}),e.forEach(c.edges(),function(y){var w=h.edge(y.v,y.w)||0,T=l(y),P=w+T;h.setEdge(y.v,y.w,P),_=Math.max(_,h.node(y.v).out+=T),v=Math.max(v,h.node(y.w).in+=T)});var m=e.range(_+v+3).map(function(){return new r}),b=v+1;return e.forEach(h.nodes(),function(y){u(m,b,h.node(y))}),{graph:h,buckets:m,zeroIdx:b}}function u(c,l,h){h.out?h.in?c[h.out-h.in+l].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return AE}var TE,S4;function Phe(){if(S4)return TE;S4=1;var e=Gn(),t=The();TE={run:r,undo:i};function r(s){var o=s.graph().acyclicer==="greedy"?t(s,a(s)):n(s);e.forEach(o,function(u){var c=s.edge(u);s.removeEdge(u),c.forwardName=u.name,c.reversed=!0,s.setEdge(u.w,u.v,c,e.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function n(s){var o=[],a={},u={};function c(l){e.has(u,l)||(u[l]=!0,a[l]=!0,e.forEach(s.outEdges(l),function(h){e.has(a,h.w)?o.push(h):c(h.w)}),delete a[l])}return e.forEach(s.nodes(),c),o}function i(s){e.forEach(s.edges(),function(o){var a=s.edge(o);if(a.reversed){s.removeEdge(o);var u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return TE}var PE,E4;function Bs(){if(E4)return PE;E4=1;var e=Gn(),t=ya().Graph;PE={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:l,addBorderNode:h,maxRank:v,partition:_,time:m,notime:b};function r(y,w,T,P){var A;do A=e.uniqueId(P);while(y.hasNode(A));return T.dummy=w,y.setNode(A,T),A}function n(y){var w=new t().setGraph(y.graph());return e.forEach(y.nodes(),function(T){w.setNode(T,y.node(T))}),e.forEach(y.edges(),function(T){var P=w.edge(T.v,T.w)||{weight:0,minlen:1},A=y.edge(T);w.setEdge(T.v,T.w,{weight:P.weight+A.weight,minlen:Math.max(P.minlen,A.minlen)})}),w}function i(y){var w=new t({multigraph:y.isMultigraph()}).setGraph(y.graph());return e.forEach(y.nodes(),function(T){y.children(T).length||w.setNode(T,y.node(T))}),e.forEach(y.edges(),function(T){w.setEdge(T,y.edge(T))}),w}function s(y){var w=e.map(y.nodes(),function(T){var P={};return e.forEach(y.outEdges(T),function(A){P[A.w]=(P[A.w]||0)+y.edge(A).weight}),P});return e.zipObject(y.nodes(),w)}function o(y){var w=e.map(y.nodes(),function(T){var P={};return e.forEach(y.inEdges(T),function(A){P[A.v]=(P[A.v]||0)+y.edge(A).weight}),P});return e.zipObject(y.nodes(),w)}function a(y,w){var T=y.x,P=y.y,A=w.x-T,I=w.y-P,N=y.width/2,d=y.height/2;if(!A&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var C,O;return Math.abs(I)*N>Math.abs(A)*d?(I<0&&(d=-d),C=d*A/I,O=d):(A<0&&(N=-N),C=N,O=N*I/A),{x:T+C,y:P+O}}function u(y){var w=e.map(e.range(v(y)+1),function(){return[]});return e.forEach(y.nodes(),function(T){var P=y.node(T),A=P.rank;e.isUndefined(A)||(w[A][P.order]=T)}),w}function c(y){var w=e.min(e.map(y.nodes(),function(T){return y.node(T).rank}));e.forEach(y.nodes(),function(T){var P=y.node(T);e.has(P,"rank")&&(P.rank-=w)})}function l(y){var w=e.min(e.map(y.nodes(),function(I){return y.node(I).rank})),T=[];e.forEach(y.nodes(),function(I){var N=y.node(I).rank-w;T[N]||(T[N]=[]),T[N].push(I)});var P=0,A=y.graph().nodeRankFactor;e.forEach(T,function(I,N){e.isUndefined(I)&&N%A!==0?--P:P&&e.forEach(I,function(d){y.node(d).rank+=P})})}function h(y,w,T,P){var A={width:0,height:0};return arguments.length>=4&&(A.rank=T,A.order=P),r(y,"border",A,w)}function v(y){return e.max(e.map(y.nodes(),function(w){var T=y.node(w).rank;if(!e.isUndefined(T))return T}))}function _(y,w){var T={lhs:[],rhs:[]};return e.forEach(y,function(P){w(P)?T.lhs.push(P):T.rhs.push(P)}),T}function m(y,w){var T=e.now();try{return w()}finally{console.log(y+" time: "+(e.now()-T)+"ms")}}function b(y,w){return w()}return PE}var CE,A4;function Che(){if(A4)return CE;A4=1;var e=Gn(),t=Bs();CE={run:r,undo:i};function r(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){n(s,o)})}function n(s,o){var a=o.v,u=s.node(a).rank,c=o.w,l=s.node(c).rank,h=o.name,v=s.edge(o),_=v.labelRank;if(l!==u+1){s.removeEdge(o);var m,b,y;for(y=0,++u;u<l;++y,++u)v.points=[],b={width:0,height:0,edgeLabel:v,edgeObj:o,rank:u},m=t.addDummyNode(s,"edge",b,"_d"),u===_&&(b.width=v.width,b.height=v.height,b.dummy="edge-label",b.labelpos=v.labelpos),s.setEdge(a,m,{weight:v.weight},h),y===0&&s.graph().dummyChains.push(m),a=m;s.setEdge(a,c,{weight:v.weight},h)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var a=s.node(o),u=a.edgeLabel,c;for(s.setEdge(a.edgeObj,u);a.dummy;)c=s.successors(o)[0],s.removeNode(o),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),o=c,a=s.node(o)})}return CE}var OE,T4;function sg(){if(T4)return OE;T4=1;var e=Gn();OE={longestPath:t,slack:r};function t(n){var i={};function s(o){var a=n.node(o);if(e.has(i,o))return a.rank;i[o]=!0;var u=e.min(e.map(n.outEdges(o),function(c){return s(c.w)-n.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}e.forEach(n.sources(),s)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return OE}var IE,P4;function MU(){if(P4)return IE;P4=1;var e=Gn(),t=ya().Graph,r=sg().slack;IE=n;function n(a){var u=new t({directed:!1}),c=a.nodes()[0],l=a.nodeCount();u.setNode(c,{});for(var h,v;i(u,a)<l;)h=s(u,a),v=u.hasNode(h.v)?r(a,h):-r(a,h),o(u,a,v);return u}function i(a,u){function c(l){e.forEach(u.nodeEdges(l),function(h){var v=h.v,_=l===v?h.w:v;!a.hasNode(_)&&!r(u,h)&&(a.setNode(_,{}),a.setEdge(l,_,{}),c(_))})}return e.forEach(a.nodes(),c),a.nodeCount()}function s(a,u){return e.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return r(u,c)})}function o(a,u,c){e.forEach(a.nodes(),function(l){u.node(l).rank+=c})}return IE}var RE,C4;function Ohe(){if(C4)return RE;C4=1;var e=Gn(),t=MU(),r=sg().slack,n=sg().longestPath,i=ya().alg.preorder,s=ya().alg.postorder,o=Bs().simplify;RE=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=l,a.leaveEdge=_,a.enterEdge=m,a.exchangeEdges=b;function a(P){P=o(P),n(P);var A=t(P);h(A),u(A,P);for(var I,N;I=_(A);)N=m(A,P,I),b(A,P,I,N)}function u(P,A){var I=s(P,P.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(N){c(P,A,N)})}function c(P,A,I){var N=P.node(I),d=N.parent;P.edge(I,d).cutvalue=l(P,A,I)}function l(P,A,I){var N=P.node(I),d=N.parent,C=!0,O=A.edge(I,d),k=0;return O||(C=!1,O=A.edge(d,I)),k=O.weight,e.forEach(A.nodeEdges(I),function(F){var z=F.v===I,j=z?F.w:F.v;if(j!==d){var J=z===C,oe=A.edge(F).weight;if(k+=J?oe:-oe,w(P,I,j)){var W=P.edge(I,j).cutvalue;k+=J?-W:W}}}),k}function h(P,A){arguments.length<2&&(A=P.nodes()[0]),v(P,{},1,A)}function v(P,A,I,N,d){var C=I,O=P.node(N);return A[N]=!0,e.forEach(P.neighbors(N),function(k){e.has(A,k)||(I=v(P,A,I,k,N))}),O.low=C,O.lim=I++,d?O.parent=d:delete O.parent,I}function _(P){return e.find(P.edges(),function(A){return P.edge(A).cutvalue<0})}function m(P,A,I){var N=I.v,d=I.w;A.hasEdge(N,d)||(N=I.w,d=I.v);var C=P.node(N),O=P.node(d),k=C,F=!1;C.lim>O.lim&&(k=O,F=!0);var z=e.filter(A.edges(),function(j){return F===T(P,P.node(j.v),k)&&F!==T(P,P.node(j.w),k)});return e.minBy(z,function(j){return r(A,j)})}function b(P,A,I,N){var d=I.v,C=I.w;P.removeEdge(d,C),P.setEdge(N.v,N.w,{}),h(P),u(P,A),y(P,A)}function y(P,A){var I=e.find(P.nodes(),function(d){return!A.node(d).parent}),N=i(P,I);N=N.slice(1),e.forEach(N,function(d){var C=P.node(d).parent,O=A.edge(d,C),k=!1;O||(O=A.edge(C,d),k=!0),A.node(d).rank=A.node(C).rank+(k?O.minlen:-O.minlen)})}function w(P,A,I){return P.hasEdge(A,I)}function T(P,A,I){return I.low<=A.lim&&A.lim<=I.lim}return RE}var kE,O4;function Ihe(){if(O4)return kE;O4=1;var e=sg(),t=e.longestPath,r=MU(),n=Ohe();kE=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=t;function o(u){t(u),r(u)}function a(u){n(u)}return kE}var ME,I4;function Rhe(){if(I4)return ME;I4=1;var e=Gn();ME=t;function t(i){var s=n(i);e.forEach(i.graph().dummyChains,function(o){for(var a=i.node(o),u=a.edgeObj,c=r(i,s,u.v,u.w),l=c.path,h=c.lca,v=0,_=l[v],m=!0;o!==u.w;){if(a=i.node(o),m){for(;(_=l[v])!==h&&i.node(_).maxRank<a.rank;)v++;_===h&&(m=!1)}if(!m){for(;v<l.length-1&&i.node(_=l[v+1]).minRank<=a.rank;)v++;_=l[v]}i.setParent(o,_),o=i.successors(o)[0]}})}function r(i,s,o,a){var u=[],c=[],l=Math.min(s[o].low,s[a].low),h=Math.max(s[o].lim,s[a].lim),v,_;v=o;do v=i.parent(v),u.push(v);while(v&&(s[v].low>l||h>s[v].lim));for(_=v,v=a;(v=i.parent(v))!==_;)c.push(v);return{path:u.concat(c.reverse()),lca:_}}function n(i){var s={},o=0;function a(u){var c=o;e.forEach(i.children(u),a),s[u]={low:c,lim:o++}}return e.forEach(i.children(),a),s}return ME}var LE,R4;function khe(){if(R4)return LE;R4=1;var e=Gn(),t=Bs();LE={run:r,cleanup:o};function r(a){var u=t.addDummyNode(a,"root",{},"_root"),c=i(a),l=e.max(e.values(c))-1,h=2*l+1;a.graph().nestingRoot=u,e.forEach(a.edges(),function(_){a.edge(_).minlen*=h});var v=s(a)+1;e.forEach(a.children(),function(_){n(a,u,h,v,l,c,_)}),a.graph().nodeRankFactor=h}function n(a,u,c,l,h,v,_){var m=a.children(_);if(!m.length){_!==u&&a.setEdge(u,_,{weight:0,minlen:c});return}var b=t.addBorderNode(a,"_bt"),y=t.addBorderNode(a,"_bb"),w=a.node(_);a.setParent(b,_),w.borderTop=b,a.setParent(y,_),w.borderBottom=y,e.forEach(m,function(T){n(a,u,c,l,h,v,T);var P=a.node(T),A=P.borderTop?P.borderTop:T,I=P.borderBottom?P.borderBottom:T,N=P.borderTop?l:2*l,d=A!==I?1:h-v[_]+1;a.setEdge(b,A,{weight:N,minlen:d,nestingEdge:!0}),a.setEdge(I,y,{weight:N,minlen:d,nestingEdge:!0})}),a.parent(_)||a.setEdge(u,b,{weight:0,minlen:h+v[_]})}function i(a){var u={};function c(l,h){var v=a.children(l);v&&v.length&&e.forEach(v,function(_){c(_,h+1)}),u[l]=h}return e.forEach(a.children(),function(l){c(l,1)}),u}function s(a){return e.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function o(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(a.edges(),function(c){var l=a.edge(c);l.nestingEdge&&a.removeEdge(c)})}return LE}var NE,k4;function Mhe(){if(k4)return NE;k4=1;var e=Gn(),t=Bs();NE=r;function r(i){function s(o){var a=i.children(o),u=i.node(o);if(a.length&&e.forEach(a,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,l=u.maxRank+1;c<l;++c)n(i,"borderLeft","_bl",o,u,c),n(i,"borderRight","_br",o,u,c)}}e.forEach(i.children(),s)}function n(i,s,o,a,u,c){var l={width:0,height:0,rank:c,borderType:s},h=u[s][c-1],v=t.addDummyNode(i,"border",l,o);u[s][c]=v,i.setParent(v,a),h&&i.setEdge(h,v,{weight:1})}return NE}var qE,M4;function Lhe(){if(M4)return qE;M4=1;var e=Gn();qE={adjust:t,undo:r};function t(c){var l=c.graph().rankdir.toLowerCase();(l==="lr"||l==="rl")&&n(c)}function r(c){var l=c.graph().rankdir.toLowerCase();(l==="bt"||l==="rl")&&s(c),(l==="lr"||l==="rl")&&(a(c),n(c))}function n(c){e.forEach(c.nodes(),function(l){i(c.node(l))}),e.forEach(c.edges(),function(l){i(c.edge(l))})}function i(c){var l=c.width;c.width=c.height,c.height=l}function s(c){e.forEach(c.nodes(),function(l){o(c.node(l))}),e.forEach(c.edges(),function(l){var h=c.edge(l);e.forEach(h.points,o),e.has(h,"y")&&o(h)})}function o(c){c.y=-c.y}function a(c){e.forEach(c.nodes(),function(l){u(c.node(l))}),e.forEach(c.edges(),function(l){var h=c.edge(l);e.forEach(h.points,u),e.has(h,"x")&&u(h)})}function u(c){var l=c.x;c.x=c.y,c.y=l}return qE}var DE,L4;function Nhe(){if(L4)return DE;L4=1;var e=Gn();DE=t;function t(r){var n={},i=e.filter(r.nodes(),function(c){return!r.children(c).length}),s=e.max(e.map(i,function(c){return r.node(c).rank})),o=e.map(e.range(s+1),function(){return[]});function a(c){if(!e.has(n,c)){n[c]=!0;var l=r.node(c);o[l.rank].push(c),e.forEach(r.successors(c),a)}}var u=e.sortBy(i,function(c){return r.node(c).rank});return e.forEach(u,a),o}return DE}var FE,N4;function qhe(){if(N4)return FE;N4=1;var e=Gn();FE=t;function t(n,i){for(var s=0,o=1;o<i.length;++o)s+=r(n,i[o-1],i[o]);return s}function r(n,i,s){for(var o=e.zipObject(s,e.map(s,function(v,_){return _})),a=e.flatten(e.map(i,function(v){return e.sortBy(e.map(n.outEdges(v),function(_){return{pos:o[_.w],weight:n.edge(_).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var c=2*u-1;u-=1;var l=e.map(new Array(c),function(){return 0}),h=0;return e.forEach(a.forEach(function(v){var _=v.pos+u;l[_]+=v.weight;for(var m=0;_>0;)_%2&&(m+=l[_+1]),_=_-1>>1,l[_]+=v.weight;h+=v.weight*m})),h}return FE}var BE,q4;function Dhe(){if(q4)return BE;q4=1;var e=Gn();BE=t;function t(r,n){return e.map(n,function(i){var s=r.inEdges(i);if(s.length){var o=e.reduce(s,function(a,u){var c=r.edge(u),l=r.node(u.v);return{sum:a.sum+c.weight*l.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return BE}var zE,D4;function Fhe(){if(D4)return zE;D4=1;var e=Gn();zE=t;function t(i,s){var o={};e.forEach(i,function(u,c){var l=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};e.isUndefined(u.barycenter)||(l.barycenter=u.barycenter,l.weight=u.weight)}),e.forEach(s.edges(),function(u){var c=o[u.v],l=o[u.w];!e.isUndefined(c)&&!e.isUndefined(l)&&(l.indegree++,c.out.push(o[u.w]))});var a=e.filter(o,function(u){return!u.indegree});return r(a)}function r(i){var s=[];function o(c){return function(l){l.merged||(e.isUndefined(l.barycenter)||e.isUndefined(c.barycenter)||l.barycenter>=c.barycenter)&&n(c,l)}}function a(c){return function(l){l.in.push(c),--l.indegree===0&&i.push(l)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,a(u))}return e.map(e.filter(s,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function n(i,s){var o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return zE}var VE,F4;function Bhe(){if(F4)return VE;F4=1;var e=Gn(),t=Bs();VE=r;function r(s,o){var a=t.partition(s,function(b){return e.has(b,"barycenter")}),u=a.lhs,c=e.sortBy(a.rhs,function(b){return-b.i}),l=[],h=0,v=0,_=0;u.sort(i(!!o)),_=n(l,c,_),e.forEach(u,function(b){_+=b.vs.length,l.push(b.vs),h+=b.barycenter*b.weight,v+=b.weight,_=n(l,c,_)});var m={vs:e.flatten(l,!0)};return v&&(m.barycenter=h/v,m.weight=v),m}function n(s,o,a){for(var u;o.length&&(u=e.last(o)).i<=a;)o.pop(),s.push(u.vs),a++;return a}function i(s){return function(o,a){return o.barycenter<a.barycenter?-1:o.barycenter>a.barycenter?1:s?a.i-o.i:o.i-a.i}}return VE}var $E,B4;function zhe(){if(B4)return $E;B4=1;var e=Gn(),t=Dhe(),r=Fhe(),n=Bhe();$E=i;function i(a,u,c,l){var h=a.children(u),v=a.node(u),_=v?v.borderLeft:void 0,m=v?v.borderRight:void 0,b={};_&&(h=e.filter(h,function(I){return I!==_&&I!==m}));var y=t(a,h);e.forEach(y,function(I){if(a.children(I.v).length){var N=i(a,I.v,c,l);b[I.v]=N,e.has(N,"barycenter")&&o(I,N)}});var w=r(y,c);s(w,b);var T=n(w,l);if(_&&(T.vs=e.flatten([_,T.vs,m],!0),a.predecessors(_).length)){var P=a.node(a.predecessors(_)[0]),A=a.node(a.predecessors(m)[0]);e.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+P.order+A.order)/(T.weight+2),T.weight+=2}return T}function s(a,u){e.forEach(a,function(c){c.vs=e.flatten(c.vs.map(function(l){return u[l]?u[l].vs:l}),!0)})}function o(a,u){e.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return $E}var GE,z4;function Vhe(){if(z4)return GE;z4=1;var e=Gn(),t=ya().Graph;GE=r;function r(i,s,o){var a=n(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var l=i.node(c),h=i.parent(c);(l.rank===s||l.minRank<=s&&s<=l.maxRank)&&(u.setNode(c),u.setParent(c,h||a),e.forEach(i[o](c),function(v){var _=v.v===c?v.w:v.v,m=u.edge(_,c),b=e.isUndefined(m)?0:m.weight;u.setEdge(_,c,{weight:i.edge(v).weight+b})}),e.has(l,"minRank")&&u.setNode(c,{borderLeft:l.borderLeft[s],borderRight:l.borderRight[s]}))}),u}function n(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return GE}var UE,V4;function $he(){if(V4)return UE;V4=1;var e=Gn();UE=t;function t(r,n,i){var s={},o;e.forEach(i,function(a){for(var u=r.parent(a),c,l;u;){if(c=r.parent(u),c?(l=s[c],s[c]=u):(l=o,o=u),l&&l!==u){n.setEdge(l,u);return}u=c}})}return UE}var jE,$4;function Ghe(){if($4)return jE;$4=1;var e=Gn(),t=Nhe(),r=qhe(),n=zhe(),i=Vhe(),s=$he(),o=ya().Graph,a=Bs();jE=u;function u(v){var _=a.maxRank(v),m=c(v,e.range(1,_+1),"inEdges"),b=c(v,e.range(_-1,-1,-1),"outEdges"),y=t(v);h(v,y);for(var w=Number.POSITIVE_INFINITY,T,P=0,A=0;A<4;++P,++A){l(P%2?m:b,P%4>=2),y=a.buildLayerMatrix(v);var I=r(v,y);I<w&&(A=0,T=e.cloneDeep(y),w=I)}h(v,T)}function c(v,_,m){return e.map(_,function(b){return i(v,b,m)})}function l(v,_){var m=new o;e.forEach(v,function(b){var y=b.graph().root,w=n(b,y,m,_);e.forEach(w.vs,function(T,P){b.node(T).order=P}),s(b,m,w.vs)})}function h(v,_){e.forEach(_,function(m){e.forEach(m,function(b,y){v.node(b).order=y})})}return jE}var HE,G4;function Uhe(){if(G4)return HE;G4=1;var e=Gn(),t=ya().Graph,r=Bs();HE={positionX:m,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:v,findSmallestWidthAlignment:h,balance:_};function n(w,T){var P={};function A(I,N){var d=0,C=0,O=I.length,k=e.last(N);return e.forEach(N,function(F,z){var j=s(w,F),J=j?w.node(j).order:O;(j||F===k)&&(e.forEach(N.slice(C,z+1),function(oe){e.forEach(w.predecessors(oe),function(W){var D=w.node(W),B=D.order;(B<d||J<B)&&!(D.dummy&&w.node(oe).dummy)&&o(P,W,oe)})}),C=z+1,d=J)}),N}return e.reduce(T,A),P}function i(w,T){var P={};function A(N,d,C,O,k){var F;e.forEach(e.range(d,C),function(z){F=N[z],w.node(F).dummy&&e.forEach(w.predecessors(F),function(j){var J=w.node(j);J.dummy&&(J.order<O||J.order>k)&&o(P,j,F)})})}function I(N,d){var C=-1,O,k=0;return e.forEach(d,function(F,z){if(w.node(F).dummy==="border"){var j=w.predecessors(F);j.length&&(O=w.node(j[0]).order,A(d,k,z,C,O),k=z,C=O)}A(d,k,d.length,O,N.length)}),d}return e.reduce(T,I),P}function s(w,T){if(w.node(T).dummy)return e.find(w.predecessors(T),function(P){return w.node(P).dummy})}function o(w,T,P){if(T>P){var A=T;T=P,P=A}var I=w[T];I||(w[T]=I={}),I[P]=!0}function a(w,T,P){if(T>P){var A=T;T=P,P=A}return e.has(w[T],P)}function u(w,T,P,A){var I={},N={},d={};return e.forEach(T,function(C){e.forEach(C,function(O,k){I[O]=O,N[O]=O,d[O]=k})}),e.forEach(T,function(C){var O=-1;e.forEach(C,function(k){var F=A(k);if(F.length){F=e.sortBy(F,function(W){return d[W]});for(var z=(F.length-1)/2,j=Math.floor(z),J=Math.ceil(z);j<=J;++j){var oe=F[j];N[k]===k&&O<d[oe]&&!a(P,k,oe)&&(N[oe]=k,N[k]=I[k]=I[oe],O=d[oe])}}})}),{root:I,align:N}}function c(w,T,P,A,I){var N={},d=l(w,T,P,I),C=I?"borderLeft":"borderRight";function O(z,j){for(var J=d.nodes(),oe=J.pop(),W={};oe;)W[oe]?z(oe):(W[oe]=!0,J.push(oe),J=J.concat(j(oe))),oe=J.pop()}function k(z){N[z]=d.inEdges(z).reduce(function(j,J){return Math.max(j,N[J.v]+d.edge(J))},0)}function F(z){var j=d.outEdges(z).reduce(function(oe,W){return Math.min(oe,N[W.w]-d.edge(W))},Number.POSITIVE_INFINITY),J=w.node(z);j!==Number.POSITIVE_INFINITY&&J.borderType!==C&&(N[z]=Math.max(N[z],j))}return O(k,d.predecessors.bind(d)),O(F,d.successors.bind(d)),e.forEach(A,function(z){N[z]=N[P[z]]}),N}function l(w,T,P,A){var I=new t,N=w.graph(),d=b(N.nodesep,N.edgesep,A);return e.forEach(T,function(C){var O;e.forEach(C,function(k){var F=P[k];if(I.setNode(F),O){var z=P[O],j=I.edge(z,F);I.setEdge(z,F,Math.max(d(w,k,O),j||0))}O=k})}),I}function h(w,T){return e.minBy(e.values(T),function(P){var A=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(P,function(N,d){var C=y(w,d)/2;A=Math.max(N+C,A),I=Math.min(N-C,I)}),A-I})}function v(w,T){var P=e.values(T),A=e.min(P),I=e.max(P);e.forEach(["u","d"],function(N){e.forEach(["l","r"],function(d){var C=N+d,O=w[C],k;if(O!==T){var F=e.values(O);k=d==="l"?A-e.min(F):I-e.max(F),k&&(w[C]=e.mapValues(O,function(z){return z+k}))}})})}function _(w,T){return e.mapValues(w.ul,function(P,A){if(T)return w[T.toLowerCase()][A];var I=e.sortBy(e.map(w,A));return(I[1]+I[2])/2})}function m(w){var T=r.buildLayerMatrix(w),P=e.merge(n(w,T),i(w,T)),A={},I;e.forEach(["u","d"],function(d){I=d==="u"?T:e.values(T).reverse(),e.forEach(["l","r"],function(C){C==="r"&&(I=e.map(I,function(z){return e.values(z).reverse()}));var O=(d==="u"?w.predecessors:w.successors).bind(w),k=u(w,I,P,O),F=c(w,I,k.root,k.align,C==="r");C==="r"&&(F=e.mapValues(F,function(z){return-z})),A[d+C]=F})});var N=h(w,A);return v(A,N),_(A,w.graph().align)}function b(w,T,P){return function(A,I,N){var d=A.node(I),C=A.node(N),O=0,k;if(O+=d.width/2,e.has(d,"labelpos"))switch(d.labelpos.toLowerCase()){case"l":k=-d.width/2;break;case"r":k=d.width/2;break}if(k&&(O+=P?k:-k),k=0,O+=(d.dummy?T:w)/2,O+=(C.dummy?T:w)/2,O+=C.width/2,e.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":k=C.width/2;break;case"r":k=-C.width/2;break}return k&&(O+=P?k:-k),k=0,O}}function y(w,T){return w.node(T).width}return HE}var WE,U4;function jhe(){if(U4)return WE;U4=1;var e=Gn(),t=Bs(),r=Uhe().positionX;WE=n;function n(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(r(s),function(o,a){s.node(a).x=o})}function i(s){var o=t.buildLayerMatrix(s),a=s.graph().ranksep,u=0;e.forEach(o,function(c){var l=e.max(e.map(c,function(h){return s.node(h).height}));e.forEach(c,function(h){s.node(h).y=u+l/2}),u+=l+a})}return WE}var XE,j4;function Hhe(){if(j4)return XE;j4=1;var e=Gn(),t=Phe(),r=Che(),n=Ihe(),i=Bs().normalizeRanks,s=Rhe(),o=Bs().removeEmptyRanks,a=khe(),u=Mhe(),c=Lhe(),l=Ghe(),h=jhe(),v=Bs(),_=ya().Graph;XE=m;function m(ee,ce){var re=ce&&ce.debugTiming?v.time:v.notime;re("layout",function(){var te=re("  buildLayoutGraph",function(){return O(ee)});re("  runLayout",function(){b(te,re)}),re("  updateInputGraph",function(){y(ee,te)})})}function b(ee,ce){ce("    makeSpaceForEdgeLabels",function(){k(ee)}),ce("    removeSelfEdges",function(){U(ee)}),ce("    acyclic",function(){t.run(ee)}),ce("    nestingGraph.run",function(){a.run(ee)}),ce("    rank",function(){n(v.asNonCompoundGraph(ee))}),ce("    injectEdgeLabelProxies",function(){F(ee)}),ce("    removeEmptyRanks",function(){o(ee)}),ce("    nestingGraph.cleanup",function(){a.cleanup(ee)}),ce("    normalizeRanks",function(){i(ee)}),ce("    assignRankMinMax",function(){z(ee)}),ce("    removeEdgeLabelProxies",function(){j(ee)}),ce("    normalize.run",function(){r.run(ee)}),ce("    parentDummyChains",function(){s(ee)}),ce("    addBorderSegments",function(){u(ee)}),ce("    order",function(){l(ee)}),ce("    insertSelfEdges",function(){ie(ee)}),ce("    adjustCoordinateSystem",function(){c.adjust(ee)}),ce("    position",function(){h(ee)}),ce("    positionSelfEdges",function(){se(ee)}),ce("    removeBorderNodes",function(){B(ee)}),ce("    normalize.undo",function(){r.undo(ee)}),ce("    fixupEdgeLabelCoords",function(){W(ee)}),ce("    undoCoordinateSystem",function(){c.undo(ee)}),ce("    translateGraph",function(){J(ee)}),ce("    assignNodeIntersects",function(){oe(ee)}),ce("    reversePoints",function(){D(ee)}),ce("    acyclic.undo",function(){t.undo(ee)})}function y(ee,ce){e.forEach(ee.nodes(),function(re){var te=ee.node(re),le=ce.node(re);te&&(te.x=le.x,te.y=le.y,ce.children(re).length&&(te.width=le.width,te.height=le.height))}),e.forEach(ee.edges(),function(re){var te=ee.edge(re),le=ce.edge(re);te.points=le.points,e.has(le,"x")&&(te.x=le.x,te.y=le.y)}),ee.graph().width=ce.graph().width,ee.graph().height=ce.graph().height}var w=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},P=["acyclicer","ranker","rankdir","align"],A=["width","height"],I={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],d={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function O(ee){var ce=new _({multigraph:!0,compound:!0}),re=me(ee.graph());return ce.setGraph(e.merge({},T,xe(re,w),e.pick(re,P))),e.forEach(ee.nodes(),function(te){var le=me(ee.node(te));ce.setNode(te,e.defaults(xe(le,A),I)),ce.setParent(te,ee.parent(te))}),e.forEach(ee.edges(),function(te){var le=me(ee.edge(te));ce.setEdge(te,e.merge({},d,xe(le,N),e.pick(le,C)))}),ce}function k(ee){var ce=ee.graph();ce.ranksep/=2,e.forEach(ee.edges(),function(re){var te=ee.edge(re);te.minlen*=2,te.labelpos.toLowerCase()!=="c"&&(ce.rankdir==="TB"||ce.rankdir==="BT"?te.width+=te.labeloffset:te.height+=te.labeloffset)})}function F(ee){e.forEach(ee.edges(),function(ce){var re=ee.edge(ce);if(re.width&&re.height){var te=ee.node(ce.v),le=ee.node(ce.w),Me={rank:(le.rank-te.rank)/2+te.rank,e:ce};v.addDummyNode(ee,"edge-proxy",Me,"_ep")}})}function z(ee){var ce=0;e.forEach(ee.nodes(),function(re){var te=ee.node(re);te.borderTop&&(te.minRank=ee.node(te.borderTop).rank,te.maxRank=ee.node(te.borderBottom).rank,ce=e.max(ce,te.maxRank))}),ee.graph().maxRank=ce}function j(ee){e.forEach(ee.nodes(),function(ce){var re=ee.node(ce);re.dummy==="edge-proxy"&&(ee.edge(re.e).labelRank=re.rank,ee.removeNode(ce))})}function J(ee){var ce=Number.POSITIVE_INFINITY,re=0,te=Number.POSITIVE_INFINITY,le=0,Me=ee.graph(),Ge=Me.marginx||0,Ie=Me.marginy||0;function Ue(We){var q=We.x,$=We.y,Y=We.width,K=We.height;ce=Math.min(ce,q-Y/2),re=Math.max(re,q+Y/2),te=Math.min(te,$-K/2),le=Math.max(le,$+K/2)}e.forEach(ee.nodes(),function(We){Ue(ee.node(We))}),e.forEach(ee.edges(),function(We){var q=ee.edge(We);e.has(q,"x")&&Ue(q)}),ce-=Ge,te-=Ie,e.forEach(ee.nodes(),function(We){var q=ee.node(We);q.x-=ce,q.y-=te}),e.forEach(ee.edges(),function(We){var q=ee.edge(We);e.forEach(q.points,function($){$.x-=ce,$.y-=te}),e.has(q,"x")&&(q.x-=ce),e.has(q,"y")&&(q.y-=te)}),Me.width=re-ce+Ge,Me.height=le-te+Ie}function oe(ee){e.forEach(ee.edges(),function(ce){var re=ee.edge(ce),te=ee.node(ce.v),le=ee.node(ce.w),Me,Ge;re.points?(Me=re.points[0],Ge=re.points[re.points.length-1]):(re.points=[],Me=le,Ge=te),re.points.unshift(v.intersectRect(te,Me)),re.points.push(v.intersectRect(le,Ge))})}function W(ee){e.forEach(ee.edges(),function(ce){var re=ee.edge(ce);if(e.has(re,"x"))switch((re.labelpos==="l"||re.labelpos==="r")&&(re.width-=re.labeloffset),re.labelpos){case"l":re.x-=re.width/2+re.labeloffset;break;case"r":re.x+=re.width/2+re.labeloffset;break}})}function D(ee){e.forEach(ee.edges(),function(ce){var re=ee.edge(ce);re.reversed&&re.points.reverse()})}function B(ee){e.forEach(ee.nodes(),function(ce){if(ee.children(ce).length){var re=ee.node(ce),te=ee.node(re.borderTop),le=ee.node(re.borderBottom),Me=ee.node(e.last(re.borderLeft)),Ge=ee.node(e.last(re.borderRight));re.width=Math.abs(Ge.x-Me.x),re.height=Math.abs(le.y-te.y),re.x=Me.x+re.width/2,re.y=te.y+re.height/2}}),e.forEach(ee.nodes(),function(ce){ee.node(ce).dummy==="border"&&ee.removeNode(ce)})}function U(ee){e.forEach(ee.edges(),function(ce){if(ce.v===ce.w){var re=ee.node(ce.v);re.selfEdges||(re.selfEdges=[]),re.selfEdges.push({e:ce,label:ee.edge(ce)}),ee.removeEdge(ce)}})}function ie(ee){var ce=v.buildLayerMatrix(ee);e.forEach(ce,function(re){var te=0;e.forEach(re,function(le,Me){var Ge=ee.node(le);Ge.order=Me+te,e.forEach(Ge.selfEdges,function(Ie){v.addDummyNode(ee,"selfedge",{width:Ie.label.width,height:Ie.label.height,rank:Ge.rank,order:Me+ ++te,e:Ie.e,label:Ie.label},"_se")}),delete Ge.selfEdges})})}function se(ee){e.forEach(ee.nodes(),function(ce){var re=ee.node(ce);if(re.dummy==="selfedge"){var te=ee.node(re.e.v),le=te.x+te.width/2,Me=te.y,Ge=re.x-le,Ie=te.height/2;ee.setEdge(re.e,re.label),ee.removeNode(ce),re.label.points=[{x:le+2*Ge/3,y:Me-Ie},{x:le+5*Ge/6,y:Me-Ie},{x:le+Ge,y:Me},{x:le+5*Ge/6,y:Me+Ie},{x:le+2*Ge/3,y:Me+Ie}],re.label.x=re.x,re.label.y=re.y}})}function xe(ee,ce){return e.mapValues(e.pick(ee,ce),Number)}function me(ee){var ce={};return e.forEach(ee,function(re,te){ce[te.toLowerCase()]=re}),ce}return XE}var YE,H4;function Whe(){if(H4)return YE;H4=1;var e=Gn(),t=Bs(),r=ya().Graph;YE={debugOrdering:n};function n(i){var s=t.buildLayerMatrix(i),o=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(a){o.setNode(a,{label:a}),o.setParent(a,"layer"+i.node(a).rank)}),e.forEach(i.edges(),function(a){o.setEdge(a.v,a.w,{},a.name)}),e.forEach(s,function(a,u){var c="layer"+u;o.setNode(c,{rank:"same"}),e.reduce(a,function(l,h){return o.setEdge(l,h,{style:"invis"}),h})}),o}return YE}var KE,W4;function Xhe(){return W4||(W4=1,KE="0.8.5"),KE}var JE,X4;function Yhe(){return X4||(X4=1,JE={graphlib:ya(),layout:Hhe(),debug:Whe(),util:{time:Bs().time,notime:Bs().notime},version:Xhe()}),JE}var Khe=Yhe();const Jhe=ah(Khe);var Zhe=PU();const Qhe=ah(Zhe),Pu={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},ede=Object.keys(Pu).map(e=>Pu[e]).join(""),ZE="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",tde=/\s/g,Y4=new RegExp(`^(${ZE}\\*)?([${ede}])(/${ZE})?([-+]{1,2}${ZE})?$`,"g");function LU(e){throw new Error(`Invalid calc() expression: ${e}`)}function rde(e,t){const r=Y4.exec(e.replace(tde,""));r||LU(e),Y4.lastIndex=0;const[,n,i,s,o]=r,{x:a,y:u,width:c,height:l}=t;let h=0;switch(i){case Pu.width:{h=c;break}case Pu.height:{h=l;break}case Pu.x:{h=a;break}case Pu.y:{h=u;break}case Pu.minimum:{h=Math.min(l,c);break}case Pu.maximum:{h=Math.max(l,c);break}case Pu.diagonal:{h=Math.sqrt(l*l+c*c);break}}return n&&(h*=parseFloat(n)),s&&(h/=parseFloat(s.slice(1))),o&&(h+=nde(o)),h}function nde(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function Ro(e){return typeof e=="string"&&e.includes("calc")}const NU="calc(",K4=NU.length;function ko(e,t){let r=e,n=0;do{let i=r.indexOf(NU,n);if(i===-1)return r;let s=i+K4,o=1;e:do{switch(r[s]){case"(":{o++;break}case")":{if(o--,o===0)break e;break}case void 0:LU(r)}s++}while(!0);let a=r.slice(i+K4,s);Ro(a)&&(a=ko(a,t));const u=String(rde(a,t));r=r.slice(0,i)+u+r.slice(s+1),n=i+u.length}while(!0)}const{round:ide,floor:sde,PI:qU}=Math,ode={linear:function(e,t,r){var n=e[1]-e[0],i=t[1]-t[0];return(r-e[0])/n*i+t[0]||0}},_a=function(e){return e%360+(e<0?360:0)},xl=function(e,t){return t*ide(e/t)},lm=function(e){return 180*e/qU%360},zs=function(e,t){return t=t||!1,e=t?e:e%360,e*qU/180},U2=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){const r=e;e=t,t=r}return sde(Math.random()*(t-e+1)+e)},{cos:Ev,sin:QE,atan2:ade}=Math,DU=function(e,t){var r=zs(e.y),n=zs(t.y),i=e.x,s=t.x,o=zs(s-i),a=QE(o)*Ev(n),u=Ev(r)*QE(n)-QE(r)*Ev(n)*Ev(o),c=lm(ade(a,u)),l=["NE","E","SE","S","SW","W","NW","N"],h=c-22.5;return h<0&&(h+=360),h=parseInt(h/45),l[h]},MT=function(e,t){var r=e.x,n=e.y,i=t.x,s=t.y;return(r-=i)*r+(n-=s)*n},FU=function(e,t){return Math.sqrt(MT(e,t))},Sr={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:og,cos:j2,sin:H2,sqrt:J4,min:Z4,max:Q4,atan2:ude,round:e7,pow:cde,PI:t7}=Math,ge=function(e,t){if(!(this instanceof ge))return new ge(e,t);if(typeof e=="string"){var r=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(r[0]),t=parseFloat(r[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};ge.fromPolar=function(e,t,r){r=new ge(r);var n=og(e*j2(t)),i=og(e*H2(t)),s=_a(lm(t));return s<90?i=-i:s<180?(n=-n,i=-i):s<270&&(n=-n),new ge(r.x+n,r.y+i)};ge.random=function(e,t,r,n){return new ge(U2(e,t),U2(r,n))};ge.prototype={type:Sr.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new ge(e[0]);for(var r=null,n=1/0,i=0;i<t;i++){var s=new ge(e[i]),o=this.squaredDistance(s);o<n&&(r=s,n=o)}return r},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=Z4(Q4(this.x,e.x),e.x+e.width),this.y=Z4(Q4(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var r=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return r<0&&(r+=360),r},bearing:function(e){return DU(this,e)},changeInAngle:function(e,t,r){return this.clone().offset(-e,-t).theta(r)-this.theta(r)},clone:function(){return new ge(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new ge(this.x-(e||0),this.y-(t||0))},distance:function(e){return FU(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var r=this.x,n=this.y;return new ge((1-t)*r+t*e.x,(1-t)*n+t*e.y)},magnitude:function(){return J4(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return og(e.x-this.x)+og(e.y-this.y)},move:function(e,t){var r=zs(new ge(e).theta(this)),n=this.offset(j2(r)*t,-H2(r)*t);return n},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new ge(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new ge(0,0),t=zs(_a(-t));var r=j2(t),n=H2(t),i=r*(this.x-e.x)-n*(this.y-e.y)+e.x,s=n*(this.x-e.x)+r*(this.y-e.y)+e.y;return this.x=i,this.y=s,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=cde(10,e);break}return this.x=e7(this.x*t)/t,this.y=e7(this.y*t)/t,this},scale:function(e,t,r){return r=r&&new ge(r)||new ge(0,0),this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this},snapToGrid:function(e,t){return this.x=xl(this.x,e),this.y=xl(this.y,t||e),this},squaredDistance:function(e){return MT(this,e)},theta:function(e){e=new ge(e);var t=-(e.y-this.y),r=e.x-this.x,n=ude(t,r);return n<0&&(n=2*t7+n),180*n/t7},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new ge(e)||new ge(0,0);var t=this.x,r=this.y;return this.x=J4((t-e.x)*(t-e.x)+(r-e.y)*(r-e.y)),this.y=zs(e.theta(new ge(t,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new ge(0,0);return t.angleBetween(this,e)}};ge.prototype.translate=ge.prototype.offset;const ag=ge,{max:e2,min:t2}=Math,Ct=function(e,t){if(!(this instanceof Ct))return new Ct(e,t);if(e instanceof Ct)return new Ct(e.start,e.end);this.start=new ge(e),this.end=new ge(t)};Ct.prototype={type:Sr.Line,angle:function(){var e=new ge(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=t2(this.start.x,this.end.x),t=t2(this.start.y,this.end.y),r=e2(this.start.x,this.end.x),n=e2(this.start.y,this.end.y);return new wt(e,t,r-e,n-t)},bearing:function(){return DU(this.start,this.end)},clone:function(){return new Ct(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new Ct(this.start,e).vector()),r=t2(1,e2(0,t/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var n=this.length();return!(new Ct(t,e).length()>n||new Ct(e,r).length()>n)},divideAt:function(e){var t=this.pointAt(e);return[new Ct(this.start,t),new Ct(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new Ct(this.start,t),new Ct(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var r=e.intersectionWithLine(this,t);return r&&e instanceof Ct&&(r=r[0]),r}return null},intersectionWithLine:function(e){var t=new ge(this.end.x-this.start.x,this.end.y-this.start.y),r=new ge(e.end.x-e.start.x,e.end.y-e.start.y),n=t.x*r.y-t.y*r.x,i=new ge(e.start.x-this.start.x,e.start.y-this.start.y),s=i.x*r.y-i.y*r.x,o=i.x*t.y-i.y*t.x;if(n===0||s*n<0||o*n<0)return null;if(n>0){if(s>n||o>n)return null}else if(s<n||o<n)return null;return[new ge(this.start.x+s*t.x/n,this.start.y+s*t.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return FU(this.start,this.end)},midpoint:function(){return new ge((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:r,end:n}=t,i=r.clone().rotate(n,270),s=n.clone().rotate(r,90);return r.move(s,e),n.move(i,e),t},pointAt:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)},pointAtLength:function(e){var t=this.start,r=this.end,n=!0;e<0&&(n=!1,e=-e);var i=this.length();return e>=i?n?r.clone():t.clone():this.pointAt((n?e:i-e)/i)},pointOffset:function(e){e=new ge(e);var t=this.start,r=this.end,n=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x);return n/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this},setLength:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)},squaredLength:function(){return MT(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAt(e),i=new Ct(t,r);return i.translate(n.x-t.x,n.y-t.y),i},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAtLength(e),i=new Ct(t,r);return i.translate(n.x-t.x,n.y-t.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new ge(this.end.x-this.start.x,this.end.y-this.start.y)}};Ct.prototype.intersection=Ct.prototype.intersect;const gl=Ct,{sqrt:r7,round:Av,pow:lde}=Math,ms=function(e,t,r){if(!(this instanceof ms))return new ms(e,t,r);if(e instanceof ms)return new ms(new ge(e.x,e.y),e.a,e.b);e=new ge(e),this.x=e.x,this.y=e.y,this.a=t,this.b=r};ms.fromRect=function(e){return e=new wt(e),new ms(e.center(),e.width/2,e.height/2)};ms.prototype={type:Sr.Ellipse,bbox:function(){return new wt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new ge(this.x,this.y)},clone:function(){return new ms(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],r=e.start,n=e.end,i=this.a,s=this.b,o=e.vector(),a=r.difference(new ge(this)),u=new ge(o.x/(i*i),o.y/(s*s)),c=new ge(a.x/(i*i),a.y/(s*s)),l=o.dot(u),h=o.dot(c),v=a.dot(c)-1,_=h*h-l*v;if(_<0)return null;if(_>0){var m=r7(_),b=(-h-m)/l,y=(-h+m)/l;if((b<0||1<b)&&(y<0||1<y))return null;0<=b&&b<=1&&t.push(r.lerp(n,b)),0<=y&&y<=1&&t.push(r.lerp(n,y))}else{var w=-h/l;if(0<=w&&w<=1)t.push(r.lerp(n,w));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new ge(e),t&&e.rotate(new ge(this.x,this.y),t);var r=e.x-this.x,n=e.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(e),t?i.rotate(new ge(this.x,this.y),-t):i;var s=n/r,o=s*s,a=this.a*this.a,u=this.b*this.b,c=r7(1/(1/a+o/u));c=r<0?-c:c;var l=s*c;return i=new ge(this.x+c,this.y+l),t?i.rotate(new ge(this.x,this.y),-t):i},normalizedDistance:function(e){var t=e.x,r=e.y,n=this.a,i=this.b,s=this.x,o=this.y;return(t-s)*(t-s)/(n*n)+(r-o)*(r-o)/(i*i)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=lde(10,e);break}return this.x=Av(this.x*t)/t,this.y=Av(this.y*t)/t,this.a=Av(this.a*t)/t,this.b=Av(this.b*t)/t,this},tangentTheta:function(e){var t=30,r=e.x,n=e.y,i=this.a,s=this.b,o=this.bbox().center(),a=o.x,u=o.y,c=r>o.x+i/2,l=r<o.x-i/2,h,v;return c||l?(h=r>o.x?n-t:n+t,v=i*i/(r-a)-i*i*(n-u)*(h-u)/(s*s*(r-a))+a):(v=n>o.y?r+t:r-t,h=s*s/(n-u)-s*s*(r-a)*(v-a)/(i*i*(n-u))+u),new ge(v,h).theta(e)},toString:function(){return new ge(this.x,this.y).toString()+" "+this.a+" "+this.b}};const fde=ms,{abs:n7,cos:hde,sin:dde,min:td,max:i7,round:Tv,pow:pde}=Math,wt=function(e,t,r,n){if(!(this instanceof wt))return new wt(e,t,r,n);Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=r===void 0?0:r,this.height=n===void 0?0:n};wt.fromEllipse=function(e){return e=new ms(e),new wt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};wt.fromPointUnion=function(...e){if(e.length===0)return null;const t=new ge;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y;a<r&&(r=a),a>i&&(i=a),u<n&&(n=u),u>s&&(s=u)}return new wt(r,n,i-r,s-n)};wt.fromRectUnion=function(...e){if(e.length===0)return null;const t=new wt;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y,c=a+t.width,l=u+t.height;a<r&&(r=a),c>i&&(i=c),u<n&&(n=u),l>s&&(s=l)}return new wt(r,n,i-r,s-n)};wt.prototype={type:Sr.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:r}=this,n=zs(e),i=n7(dde(n)),s=n7(hde(n)),o=t*s+r*i,a=t*i+r*s;return this.x+=(t-o)/2,this.y+=(r-a)/2,this.width=o,this.height=a,this},bottomLeft:function(){return new ge(this.x,this.y+this.height)},bottomLine:function(){return new Ct(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new ge(this.x+this.width/2,this.y+this.height)},center:function(){return new ge(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new wt(this)},containsPoint:function(e){return e instanceof ge||(e=new ge(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new wt(this).normalize(),r=new wt(e).normalize(),n=t.width,i=t.height,s=r.width,o=r.height;if(!n||!i||!s||!o)return!1;var a=t.x,u=t.y,c=r.x,l=r.y;return s+=c,n+=a,o+=l,i+=u,a<=c&&s<=n&&u<=l&&o<=i},corner:function(){return new ge(this.x+this.width,this.y+this.height)},equals:function(e){var t=new wt(this).normalize(),r=new wt(e).normalize();return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),r=this.corner(),n=e.origin(),i=e.corner();if(i.x<=t.x||i.y<=t.y||n.x>=r.x||n.y>=r.y)return null;var s=i7(t.x,n.x),o=i7(t.y,n.y);return new wt(s,o,td(r.x,i.x)-s,td(r.y,i.y)-o)},intersectionWithLine:function(e){var t=this,r=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],n=[],i=[],s,o,a=r.length;for(o=0;o<a;o++)s=e.intersect(r[o]),s!==null&&i.indexOf(s.toString())<0&&(n.push(s),i.push(s.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new ge(e);var r=new ge(this.x+this.width/2,this.y+this.height/2),n;t&&e.rotate(r,t);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new Ct(r,e),o=i.length-1;o>=0;--o){var a=i[o].intersection(s);if(a!==null){n=a;break}}return n&&t&&n.rotate(r,-t),n},leftLine:function(){return new Ct(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new ge(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new wt(e),t||(t=e.center());var r,n,i,s,o,a,u,c,l=t.x,h=t.y;r=n=i=s=o=a=u=c=1/0;var v=e.topLeft();v.x<l&&(r=(this.x-l)/(v.x-l)),v.y<h&&(o=(this.y-h)/(v.y-h));var _=e.bottomRight();_.x>l&&(n=(this.x+this.width-l)/(_.x-l)),_.y>h&&(a=(this.y+this.height-h)/(_.y-h));var m=e.topRight();m.x>l&&(i=(this.x+this.width-l)/(m.x-l)),m.y<h&&(u=(this.y-h)/(m.y-h));var b=e.bottomLeft();return b.x<l&&(s=(this.x-l)/(b.x-l)),b.y>h&&(c=(this.y+this.height-h)/(b.y-h)),{sx:td(r,n,i,s),sy:td(o,a,u,c)}},maxRectUniformScaleToFit:function(e,t){var r=this.maxRectScaleToFit(e,t);return td(r.sx,r.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,r=this.width,n=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,n=-this.height),this.x=e,this.y=t,this.width=r,this.height=n,this},offset:function(e,t){return ge.prototype.offset.call(this,e,t)},origin:function(){return new ge(this.x,this.y)},pointNearestToPoint:function(e){if(e=new ge(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new ge(this.x+this.width,e.y);case"left":return new ge(this.x,e.y);case"bottom":return new ge(e.x,this.y+this.height);case"top":return new ge(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new Ct(this.topRight(),this.bottomRight())},rightMiddle:function(){return new ge(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=pde(10,e);break}return this.x=Tv(this.x*t)/t,this.y=Tv(this.y*t)/t,this.width=Tv(this.width*t)/t,this.height=Tv(this.height*t)/t,this},scale:function(e,t,r){return r=this.origin().scale(e,t,r),this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new ge(e);var t=e.x-this.x,r=this.x+this.width-e.x,n=e.y-this.y,i=this.y+this.height-e.y,s=t,o="left";return r<s&&(s=r,o="right"),n<s&&(s=n,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(e,t){var r=this.origin().snapToGrid(e,t),n=this.corner().snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Ct(this.topLeft(),this.topRight())},topMiddle:function(){return new ge(this.x+this.width/2,this.y)},topRight:function(){return new ge(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return wt.fromRectUnion(this,e)},update:function(e,t,r,n){return Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this}};wt.prototype.bottomRight=wt.prototype.corner;wt.prototype.topLeft=wt.prototype.origin;wt.prototype.translate=wt.prototype.offset;const vde=wt;function BU(e){const t=e.trim();if(t==="")return[];const r=[],n=t.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let s=0;s<i;s+=2)r.push({x:+n[s],y:+n[s+1]});return r}function zU(e){const t=e.length;if(t===0)return[];const r=[];for(let n=0;n<t;n++){const i=e[n].clone();r.push(i)}return r}function VU(e){const{abs:t}=Math;var r,n,i=e.length;if(i===0)return[];var s;for(r=0;r<i;r++)(s===void 0||e[r].y<s.y||e[r].y===s.y&&e[r].x>s.x)&&(s=e[r]);var o=[];for(r=0;r<i;r++){var a=s.theta(e[r]);a===0&&(a=360);var u=[e[r],r,a];o.push(u)}if(o.sort(function(j,J){var oe=j[2]-J[2];return oe===0&&(oe=J[1]-j[1]),oe}),o.length>2){var c=o[o.length-1];o.unshift(c)}for(var l={},h=[],v,_,m,b,y,w;o.length!==0;)if(v=o.pop(),_=v[0],!l.hasOwnProperty(v[0]+"@@"+v[1]))for(var T=!1;!T;)if(h.length<2)h.push(v),T=!0;else{m=h.pop(),b=m[0],y=h.pop(),w=y[0];var P=w.cross(b,_);if(P<0)h.push(y),h.push(m),h.push(v),T=!0;else if(P===0){var A=1e-10,I=b.angleBetween(w,_);t(I-180)<A||b.equals(_)||w.equals(b)?(l[m[0]+"@@"+m[1]]=b,h.push(y)):t((I+1)%360-1)<A&&(h.push(y),o.push(m))}else l[m[0]+"@@"+m[1]]=b,h.push(y)}h.length>2&&h.pop();var N,d=-1;for(n=h.length,r=0;r<n;r++){var C=h[r][1];(N===void 0||C<N)&&(N=C,d=r)}var O=[];if(d>0){var k=h.slice(d),F=h.slice(0,d);O=k.concat(F)}else O=h;var z=[];for(n=O.length,r=0;r<n;r++)z.push(O[r][0]);return z}const Tn=function(e){if(!(this instanceof Tn))return new Tn(e);if(typeof e=="string")return new Tn.parse(e);this.points=Array.isArray(e)?e.map(ge):[]};Tn.parse=function(e){return new Tn(BU(e))};Tn.fromRect=function(e){return new Tn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};Tn.prototype={type:Sr.Polyline,bbox:function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var a=i[o],u=a.x,c=a.y;u<e&&(e=u),u>t&&(t=u),c<r&&(r=c),c>n&&(n=c)}return new wt(e,r,t-e,n-r)},clone:function(){return new Tn(zU(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return 0;for(var n,i=1/0,s=0,o=r-1,a=0;a<o;a++){var u=new Ct(t[a],t[a+1]),c=u.length(),l=u.closestPointNormalizedLength(e),h=u.pointAt(l),v=h.squaredDistance(e);v<i&&(i=v,n=s+l*c),s+=c}return n},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,r=t.length;if(r===0)return!1;for(var n=e.x,i=e.y,s=r-1,o=0,a=0,u=new Ct,c=new Ct,l=new ge;o<r;o++){var h=t[s],v=t[o];if(e.equals(h)||(u.start=h,u.end=v,u.containsPoint(e)))return!0;if(i<=h.y&&i>v.y||i>h.y&&i<=v.y){var _=h.x-n>v.x-n?h.x-n:v.x-n;_>=0&&(l.x=n+_,l.y=i,c.start=e,c.end=l,u.intersect(c)&&a++)}s=o}return a%2===1},close:function(){const{start:e,end:t,points:r}=this;return e&&t&&!e.equals(t)&&r.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Tn(VU(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=e.points,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=e.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(e){for(var t=new Ct(e),r=[],n=this.lengthPoints(),i=new Ct,s=0,o=n.length-1;s<o;s++){i.start=n[s],i.end=n[s+1];var a=t.intersectionWithLine(i);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var r=new Ct,n=t-1,i=0;i<n;i++)if(r.start=e[i],r.end=e[i+1],r.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var r=0,n=t-1,i=0;i<n;i++)r+=e[i].distance(e[i+1]);return r},pointAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var n=this.length(),i=n*e;return this.pointAtLength(i)},pointAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var n=!0;e<0&&(n=!1,e=-e);for(var i=0,s=r-1,o=0;o<s;o++){var a=n?o:s-1-o,u=t[a],c=t[a+1],l=new Ct(u,c),h=u.distance(c);if(e<=i+h)return l.pointAtLength((n?1:-1)*(e-i));i+=h}var v=n?t[r-1]:t[0];return v.clone()},round:function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].round(e);return this},scale:function(e,t,r){for(var n=this.points,i=n.length,s=0;s<i;s++)n[s].scale(e,t,r);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||1e-10;let n=0;for(;t[n+2];){const i=n,s=n+1,o=n+2,a=t[i],u=t[s],c=t[o];new Ct(a,c).closestPoint(u).distance(u)<=r?t.splice(s,1):n+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var n=this.length(),i=n*e;return this.tangentAtLength(i)},tangentAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;var n=!0;e<0&&(n=!1,e=-e);for(var i,s=0,o=r-1,a=0;a<o;a++){var u=n?a:o-1-a,c=t[u],l=t[u+1],h=new Ct(c,l),v=c.distance(l);if(h.isDifferentiable()){if(e<=s+v)return h.tangentAtLength((n?1:-1)*(e-s));i=h}s+=v}if(i){var _=n?1:0;return i.tangentAt(_)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var r="",n=0;n<t;n++){var i=e[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(Tn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(Tn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});const{abs:Pv,sqrt:gde,min:s7,max:o7,pow:r2}=Math,an=function(e,t,r,n){if(!(this instanceof an))return new an(e,t,r,n);if(e instanceof an)return new an(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new ge(e),this.controlPoint1=new ge(t),this.controlPoint2=new ge(r),this.end=new ge(n)};an.throughPoints=function(){function e(r){var n=[],i=[],s=r.length-1,o;if(s==1)return n[0]=new ge((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new ge(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var a=[];for(o=1;o<s-1;o++)a[o]=4*r[o].x+2*r[o+1].x;a[0]=r[0].x+2*r[1].x,a[s-1]=(8*r[s-1].x+r[s].x)/2;var u=t(a);for(o=1;o<s-1;++o)a[o]=4*r[o].y+2*r[o+1].y;a[0]=r[0].y+2*r[1].y,a[s-1]=(8*r[s-1].y+r[s].y)/2;var c=t(a);for(o=0;o<s;o++)n.push(new ge(u[o],c[o])),o<s-1?i.push(new ge(2*r[o+1].x-u[o+1],2*r[o+1].y-c[o+1])):i.push(new ge((r[s].x+u[s-1])/2,(r[s].y+c[s-1])/2));return[n,i]}function t(r){var n=r.length,i=[],s=[],o=2;i[0]=r[0]/o;for(var a=1;a<n;a++)s[a]=1/o,o=(a<n-1?4:3.5)-s[a],i[a]=(r[a]-i[a-1])/o;for(a=1;a<n;a++)i[n-a-1]-=s[n-a]*i[n-a];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=e(r),i=[],s=n[0].length,o=0;o<s;o++){var a=new ge(n[0][o].x,n[0][o].y),u=new ge(n[1][o].x,n[1][o].y);i.push(new an(r[o],a,u,r[o+1]))}return i}}();an.prototype={type:Sr.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end,i=e.x,s=e.y,o=t.x,a=t.y,u=r.x,c=r.y,l=n.x,h=n.y,v=new Array,_=new Array,m=[new Array,new Array],b,y,w,T,P,A,I,N,d=0;d<2;++d){if(d===0?(y=6*i-12*o+6*u,b=-3*i+9*o-9*u+3*l,w=3*o-3*i):(y=6*s-12*a+6*c,b=-3*s+9*a-9*c+3*h,w=3*a-3*s),Pv(b)<1e-12){if(Pv(y)<1e-12)continue;T=-w/y,0<T&&T<1&&_.push(T);continue}I=y*y-4*w*b,N=gde(I),!(I<0)&&(P=(-y+N)/(2*b),0<P&&P<1&&_.push(P),A=(-y-N)/(2*b),0<A&&A<1&&_.push(A))}for(var C=_.length,O=C,k,F,z;C--;)T=_[C],k=1-T,F=k*k*k*i+3*k*k*T*o+3*k*T*T*u+T*T*T*l,m[0][C]=F,z=k*k*k*s+3*k*k*T*a+3*k*T*T*c+T*T*T*h,m[1][C]=z,v[C]={X:F,Y:z};_[O]=0,_[O+1]=1,v[O]={X:i,Y:s},v[O+1]={X:l,Y:h},m[0][O]=i,m[1][O]=s,m[0][O+1]=l,m[1][O+1]=h,_.length=O+2,m[0].length=O+2,m[1].length=O+2,v.length=O+2;var j=s7.apply(null,m[0]),J=s7.apply(null,m[1]),oe=o7.apply(null,m[0]),W=o7.apply(null,m[1]);return new wt(j,J,oe-j,W-J)},clone:function(){return new an(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.closestPointLength(e,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i,s,o,a,u,c,l,h=n.length,v=h?1/h:0,_=0;_<h;_++){var m=n[_],b=m.start.distance(e),y=m.end.distance(e),w=b+y;(!l||w<l)&&(i=m,s=_*v,o=(_+1)*v,a=b,u=y,c=m.start.distance(m.end),l=w)}for(var T=r2(10,-r);;){var P=a?Pv(a-u)/a:0,A=u?Pv(a-u)/u:0,I=P<T||A<T,N=a?a<c*T:!0,d=u?u<c*T:!0,C=N||d;if(I||C)return a<=u?s:o;var O=i.divide(.5);v/=2;var k=O[0].start.distance(e),F=O[0].end.distance(e),z=k+F,j=O[1].start.distance(e),J=O[1].end.distance(e),oe=j+J;z<=oe?(i=O[0],o-=v,a=k,u=F):(i=O[1],s+=v,a=j,u=J)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var r=this.toPolyline(t);return r.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)},divideAtLength:function(e,t){var r=this.tAtLength(e,t);return this.divideAtT(r)},divideAtT:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return[new an(t,t,t,t),new an(t,r,n,i)];if(e>=1)return[new an(t,r,n,i),new an(i,i,i,i)];var s=this.getSkeletonPoints(e),o=s.startControlPoint1,a=s.startControlPoint2,u=s.divider,c=s.dividerControlPoint1,l=s.dividerControlPoint2;return[new an(t,o,a,u),new an(u,c,l,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new Ct(t,r).pointAt(e),o=new Ct(r,n).pointAt(e),a=new Ct(n,i).pointAt(e),u=new Ct(s,o).pointAt(e),c=new Ct(o,a).pointAt(e),l=new Ct(u,c).pointAt(e),h={startControlPoint1:s,startControlPoint2:u,divider:l,dividerControlPoint1:c,dividerControlPoint2:a};return h},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new an(r,n,i,s)];if(t===0)return o;var a=!this.isDifferentiable();if(a)return o;var u=this.endpointDistance(),c=r2(10,-t),l=2,h=n.cross(r,s)===0&&i.cross(r,s)===0;h&&(l=2*t);for(var v=0;;){v+=1;for(var _=[],m=o.length,b=0;b<m;b++){var y=o[b],w=y.divide(.5);_.push(w[0],w[1])}for(var T=0,P=_.length,A=0;A<P;A++){var I=_[A];T+=I.endpointDistance()}if(v>=l){var N=T!==0?(T-u)/T:0;if(N<c)return _}o=_,u=T}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=0,i=r.length,s=0;s<i;s++){var o=r[s];n+=o.endpointDistance()}return n},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=this.divide(e)[0],i=n.length({precision:r});return i},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)},pointAtLength:function(e,t){var r=this.tAtLength(e,t);return this.pointAtT(r)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,n=t.dividerControlPoint1,i=t.divider,s=new Ct(r,n);return s.translate(i.x-r.x,i.y-r.y),s},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.length(i),o=s*e;return this.tAtLength(o,i)},tAtLength:function(e,t){var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:i},o,a,u,c,l,h=0,v=i.length,_=1/v,m=0;m<v;m++){var b=r?m:v-1-m,y=i[m],w=y.endpointDistance();if(e<=h+w){o=y,a=b*_,u=(b+1)*_,c=r?e-h:w+h-e,l=r?w+h-e:e-h;break}h+=w}if(!o)return r?1:0;for(var T=this.length(s),P=r2(10,-n);;){var A;if(A=T!==0?c/T:0,A<P)return a;if(A=T!==0?l/T:0,A<P)return u;var I,N,d=o.divide(.5);_/=2;var C=d[0].endpointDistance(),O=d[1].endpointDistance();c<=C?(o=d[0],u-=_,I=c,N=C-I):(o=d[1],a+=_,I=c-C,N=O-I),c=I,l=N}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=[r[0].start.clone()],i=r.length,s=0;s<i;s++){var o=r[s];n.push(o.end.clone())}return n},toPolyline:function(e){return new Tn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};an.prototype.divide=an.prototype.divideAtT;function up(e){var t,r,n=[];for(r=arguments.length,t=1;t<r;t++)n.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var i=Object.create(e);for(r=n.length,t=0;t<r;t++){var s=n[t],o,a;for(a in s)s.hasOwnProperty(a)&&(delete i[a],o=Object.getOwnPropertyDescriptor(s,a),Object.defineProperty(i,a,o))}return i}const zt=function(e){if(!(this instanceof zt))return new zt(e);if(typeof e=="string")return new zt.parse(e);this.segments=[];var t,r;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(a,u){return a.concat(u)},[]),r=e.length,e[0].isSegment)for(t=0;t<r;t++){var n=e[t];this.appendSegment(n)}else{var i=null;for(t=0;t<r;t++){var s=e[t];if(!(s instanceof Ct||s instanceof an))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(zt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(zt.createSegment("M",s.start)),s instanceof Ct?this.appendSegment(zt.createSegment("L",s.end)):s instanceof an&&this.appendSegment(zt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof Ct)this.appendSegment(zt.createSegment("M",e.start)),this.appendSegment(zt.createSegment("L",e.end));else if(e instanceof an)this.appendSegment(zt.createSegment("M",e.start)),this.appendSegment(zt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof Tn){if(!(e.points&&e.points.length!==0))return;for(r=e.points.length,t=0;t<r;t++){var o=e.points[t];t===0?this.appendSegment(zt.createSegment("M",o)):this.appendSegment(zt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};zt.parse=function(e){if(!e)return new zt;for(var t=new zt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=e.match(r),i=n.length,s=0;s<i;s++){var o=n[s],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=o.match(a),c=zt.createSegment.apply(this,u);t.appendSegment(c)}return t};zt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=zt.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return nu(t,r)};zt.prototype={type:Sr.Path,appendSegment:function(e){var t=this.segments,r=t.length,n,i=r!==0?t[r-1]:null,s=null;if(Array.isArray(e)){if(e=e.reduce(function(c,l){return c.concat(l)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var o=e.length,a=0;a<o;a++){var u=e[a];n=this.prepareSegment(u,i,s),t.push(n),i=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,i,s),t.push(n)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,n=0;n<t;n++){var i=e[n];if(i.isVisible){var s=i.bbox();r=r?r.union(s):s}}if(r)return r;var o=e[t-1];return new wt(o.end.x,o.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,r=new zt,n=0;n<t;n++){var i=e[n].clone();r.appendSegment(i)}return r},closestPoint:function(e,t){var r=this.closestPointT(e,t);return r?this.pointAtT(r):null},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointT(e,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointLength(e,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],l=s[u];if(c.isVisible){var h=c.closestPointT(e,{precision:i,subdivisions:l}),v=c.pointAtT(h),_=new Ct(v,e).squaredLength();_<a&&(o={segmentIndex:u,value:h},a=_)}}return o||{segmentIndex:n-1,value:1}},closestPointTangent:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],l=s[u];if(c.isDifferentiable()){var h=c.closestPointT(e,{precision:i,subdivisions:l}),v=c.pointAtT(h),_=new Ct(v,e).squaredLength();_<a&&(o=c.tangentAtT(h),a=_)}}return o||null},containsPoint:function(e,t){var r=this.toPolylines(t);if(!r)return!1;for(var n=r.length,i=0,s=0;s<n;s++){var o=r[s];o.containsPoint(e)&&i++}return i%2===1},divideAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.divideAtLength(u,o)},divideAtLength:function(e,t){var r=this.segments.length;if(r===0)return null;var n=!0;e<0&&(n=!1,e=-e),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a,u=0,c,l,h,v,_;for(o=0;o<r;o++){var m=n?o:r-1-o;a=this.getSegment(m);var b=s[m],y=a.length({precision:i,subdivisions:b});if(a.isDifferentiable()&&(h=a,v=m,e<=u+y)){l=m,c=a.divideAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:b});break}u+=y}if(!h)return null;c||(l=v,_=n?1:0,c=h.divideAtT(_));var w=this.clone();w.replaceSegment(l,c);var T=l,P=l+1,A=l+2;c[0].isDifferentiable()||(w.removeSegment(T),P-=1,A-=1);var I=w.getSegment(P).start;w.insertSegment(P,zt.createSegment("M",I)),A+=1,c[1].isDifferentiable()||(w.removeSegment(A-1),A-=1);var N=A-T-1;for(o=A;o<w.segments.length;o++){var d=this.getSegment(o-N);if(a=w.getSegment(o),a.type==="Z"&&!d.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var C=zt.createSegment("L",d.end);w.replaceSegment(o,C)}}var O=new zt(w.segments.slice(0,P)),k=new zt(w.segments.slice(P));return[O,k]},equals:function(e){if(!e)return!1;var t=this.segments,r=e.segments,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=r[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,r=t.length;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=[],s=0;s<r;s++){var o=t[s],a=o.getSubdivisions({precision:n});i.push(a)}return i},getSubpaths:function(){const t=this.clone().validate().segments,r=t.length,n=[];for(let i=0;i<r;i++){const s=t[i];s.isSubpathStart?n.push(new zt(s)):n[n.length-1].appendSegment(s)}return n},insertSegment:function(e,t){var r=this.segments,n=r.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");var i,s=null,o=null;if(n!==0&&(e>=1?(s=r[e-1],o=s.nextSegment):o=r[0]),Array.isArray(t)){if(t=t.reduce(function(l,h){return l.concat(h)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++){var c=t[u];i=this.prepareSegment(c,s,o),r.splice(e+u,0,i),s=i}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,o),r.splice(e,0,i)}},intersectionWithLine:function(e,t){var r=null,n=this.toPolylines(t);if(!n)return null;for(var i=0,s=n.length;i<s;i++){var o=n[i],a=e.intersect(o);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var e=this.segments,t=e.length,r=0;r<t;r++){var n=e[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,r=t.length;if(r===0)return 0;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=0,o=0;o<r;o++){var a=t[o],u=i[o];s+=a.length({subdivisions:u})}return s},lengthAtT:function(e,t){var r=this.segments,n=r.length;if(n===0)return 0;var i=e.segmentIndex;if(i<0)return 0;var s=e.value;i>=n?(i=n-1,s=1):s<0?s=0:s>1&&(s=1),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u,c=0,l=0;l<i;l++){var h=r[l];u=a[l],c+=h.length({precisison:o,subdivisions:u})}return h=r[i],u=a[i],c+=h.lengthAtT(s,{precisison:o,subdivisions:u}),c},pointAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.pointAtLength(u,o)},pointAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e===0)return this.start.clone();var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var l=i?c:n-1-c,h=r[l],v=o[l],_=h.length({precision:s,subdivisions:v});if(h.isVisible){if(e<=u+_)return h.pointAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:v});a=h}u+=_}if(a)return i?a.end:a.start;var m=r[n-1];return m.end.clone()},pointAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].pointAtT(0);if(n>=r)return t[r-1].pointAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].pointAtT(i)},PRECISION:3,prepareSegment:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t&&(t.nextSegment=e),r&&(r.previousSegment=e);var n=e;return e.isSubpathStart&&(e.subpathStartSegment=e,n=r),n&&this.updateSubpathStartSegment(n),e},removeSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var n=t.splice(e,1)[0],i=n.previousSegment,s=n.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),n.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,t){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var i,s=r[e],o=s.previousSegment,a=s.nextSegment,u=s.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(v,_){return v.concat(_)},[]),!t[0].isSegment)throw new Error("Segments required.");r.splice(e,1);for(var c=t.length,l=0;l<c;l++){var h=t[l];i=this.prepareSegment(h,o,a),r.splice(e+l,0,i),o=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,o,a),r.splice(e,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,r=t.length,n=0;n<r;n++){var i=t[n];i.round(e)}return this},scale:function(e,t,r){for(var n=this.segments,i=n.length,s=0;s<i;s++){var o=n[s];o.scale(e,t,r)}return this},segmentAt:function(e,t){var r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null},segmentAtLength:function(e,t){var r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null},segmentIndexAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.segmentIndexAtLength(u,o)},segmentIndexAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a=null,u=0,c=0;c<n;c++){var l=i?c:n-1-c,h=r[l],v=o[l],_=h.length({precision:s,subdivisions:v});if(h.isVisible){if(e<=u+_)return l;a=l}u+=_}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.tangentAtLength(u,o)},tangentAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var l=i?c:n-1-c,h=r[l],v=o[l],_=h.length({precision:s,subdivisions:v});if(h.isDifferentiable()){if(e<=u+_)return h.tangentAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:v});a=h}u+=_}if(a){var m=i?1:0;return a.tangentAtT(m)}return null},tangentAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].tangentAtT(0);if(n>=r)return t[r-1].tangentAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].tangentAtT(i)},toPoints:function(e){var t=this.segments,r=t.length;if(r===0)return null;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=[],o=[],a=0;a<r;a++){var u=t[a];if(u.isVisible){var c=i[a];if(c.length>0){var l=c.map(function(h){return h.start});Array.prototype.push.apply(o,l)}else o.push(u.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(e){var t=[],r=this.toPoints(e);if(!r)return null;for(var n=0,i=r.length;n<i;n++)t.push(new Tn(r[n]));return t},toString:function(){for(var e=this.segments,t=e.length,r="",n=0;n<t;n++){var i=e[n];r+=i.serialize()+" "}return r.trim()},translate:function(e,t){for(var r=this.segments,n=r.length,i=0;i<n;i++){var s=r[i];s.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,zt.createSegment("M",0,0)),this}};Object.defineProperty(zt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r++){var n=e[r];if(n.isVisible)return n.start}return e[t-1].end}});Object.defineProperty(zt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r--){var n=e[r];if(n.isVisible)return n.end}return e[t-1].end}});function nu(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var $l={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty($l,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty($l,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty($l,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var ji=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof ji))return nu(ji,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof Ct){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new ge(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),n.push(nu(ji,i));return n}else{if(t===1)return this.end=new ge(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],n.push(new ji(s));return n}},$U={clone:function(){return new ji(this.end)},divideAt:function(e){var t=new Ct(this.start,this.end),r=t.divideAt(e);return[new ji(r[0]),new ji(r[1])]},divideAtLength:function(e){var t=new Ct(this.start,this.end),r=t.divideAtLength(e);return[new ji(r[0]),new ji(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty($U,"type",{configurable:!0,enumerable:!0,value:"L"});ji.prototype=up($l,Ct.prototype,$U);var to=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof to))return nu(to,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(e[0]instanceof an){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new ge(+e[0],+e[1]),this.controlPoint2=new ge(+e[2],+e[3]),this.end=new ge(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=6)i=e.slice(r,r+6),n.push(nu(to,i));return n}else{if(t===3)return this.controlPoint1=new ge(e[0]),this.controlPoint2=new ge(e[1]),this.end=new ge(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var s;for(n=[],r=0;r<t;r+=3)s=e.slice(r,r+3),n.push(nu(to,s));return n}},GU={clone:function(){return new to(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new an(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(e,t);return[new to(n[0]),new to(n[1])]},divideAtLength:function(e,t){var r=new an(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(e,t);return[new to(n[0]),new to(n[1])]},divideAtT:function(e){var t=new an(this.start,this.controlPoint1,this.controlPoint2,this.end),r=t.divideAtT(e);return[new to(r[0]),new to(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(GU,"type",{configurable:!0,enumerable:!0,value:"C"});to.prototype=up($l,an.prototype,GU);var al=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof al))return nu(al,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof Ct){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof an){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new ge(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),r===0?n.push(nu(al,i)):n.push(nu(ji,i));return n}else{if(t===1)return this.end=new ge(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],r===0?n.push(new al(s)):n.push(new ji(s));return n}},LT={bbox:function(){return null},clone:function(){return new al(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(LT,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(LT,"type",{configurable:!0,enumerable:!0,value:"M"});al.prototype=up($l,LT);var Yf=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Yf))return nu(Yf,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},NT={clone:function(){return new Yf},divideAt:function(e){var t=new Ct(this.start,this.end),r=t.divideAt(e);return[r[1].isDifferentiable()?new ji(r[0]):this.clone(),new ji(r[1])]},divideAtLength:function(e){var t=new Ct(this.start,this.end),r=t.divideAtLength(e);return[r[1].isDifferentiable()?new ji(r[0]):this.clone(),new ji(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(NT,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(NT,"type",{configurable:!0,enumerable:!0,value:"Z"});Yf.prototype=up($l,Ct.prototype,NT);var mde=zt.segmentTypes={L:ji,C:to,M:al,Z:Yf,z:Yf};zt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(mde).join("")+",.]*$");zt.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};const yde={curveThroughPoints:function(e){return console.warn("deprecated"),new zt(an.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],r=[],n=e.length-1,i;if(n==1)return t[0]=new ge((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=new ge(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,r];var s=[];for(i=1;i<n-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[n-1]=(8*e[n-1].x+e[n].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<n-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[n-1]=(8*e[n-1].y+e[n].y)/2;var a=this.getFirstControlPoints(s);for(i=0;i<n;i++)t.push(new ge(o[i],a[i])),i<n-1?r.push(new ge(2*e[i+1].x-o[i+1],2*e[i+1].y-a[i+1])):r.push(new ge((e[n].x+o[n-1])/2,(e[n].y+a[n-1])/2));return[t,r]},getCurveDivider:function(e,t,r,n){console.warn("deprecated");var i=new an(e,t,r,n);return function(o){var a=i.divide(o);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,r=[],n=[],i=2;r[0]=e[0]/i;for(var s=1;s<t;s++)n[s]=1/i,i=(s<t-1?4:3.5)-n[s],r[s]=(e[s]-r[s-1])/i;for(s=1;s<t;s++)r[t-s-1]-=n[t-s]*r[t-s];return r},getInversionSolver:function(e,t,r,n){console.warn("deprecated");var i=new an(e,t,r,n);return function(o){return i.closestPointT(o)}}},Vs=function(e){if(!(this instanceof Vs))return new Vs(e);if(typeof e=="string")return new Vs.parse(e);this.points=Array.isArray(e)?e.map(ge):[]};Vs.parse=function(e){return new Vs(BU(e))};Vs.fromRect=function(e){return new Vs([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};Vs.prototype=up(Tn.prototype,{type:Sr.Polygon,clone:function(){return new Vs(zU(this.points))},convexHull:function(){return new Vs(VU(this.points))},lengthPoints:function(){const{start:e,end:t,points:r}=this;return r.length<=1||e.equals(t)?r:[...r,e.clone()]}});function UU(e,t,r,n){switch(e.type){case Sr.Line:{switch(t.type){case Sr.Line:return ul(e,t)}break}case Sr.Ellipse:{switch(t.type){case Sr.Line:return qT(e,t);case Sr.Ellipse:return jU(e,t)}break}case Sr.Rect:{switch(t.type){case Sr.Line:return HU(e,t);case Sr.Ellipse:return WU(e,t);case Sr.Rect:return DT(e,t)}break}case Sr.Polyline:{switch(t.type){case Sr.Line:return fm(e,t);case Sr.Ellipse:return FT(e,t);case Sr.Rect:return XU(e,t);case Sr.Polyline:return YU(e,t)}break}case Sr.Polygon:{switch(t.type){case Sr.Line:return BT(e,t);case Sr.Ellipse:return hm(e,t);case Sr.Rect:return KU(e,t);case Sr.Polyline:return JU(e,t);case Sr.Polygon:return ZU(e,t)}break}case Sr.Path:{switch(t.type){case Sr.Line:return QU(e,t,r);case Sr.Ellipse:return ej(e,t,r);case Sr.Rect:return tj(e,t,r);case Sr.Polyline:return zT(e,t,r);case Sr.Polygon:return dm(e,t,r);case Sr.Path:return rj(e,t,r,n)}break}}switch(t.type){case Sr.Ellipse:case Sr.Rect:case Sr.Polyline:case Sr.Polygon:case Sr.Path:return UU(t,e,n,r);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function ul(e,t){const r=e.start.x,n=e.start.y,i=e.end.x,s=e.end.y,o=t.start.x,a=t.start.y,u=t.end.x,c=t.end.y,l=i-r,h=s-n,v=u-o,_=c-a,m=r-o,b=n-a,y=l*_-v*h,w=(l*b-h*m)/y,T=(v*b-_*m)/y;return w>=0&&w<=1&&T>=0&&T<=1}function qT(e,t){const r=e.a,n=e.b,i=e.x,s=e.y,o=t.start.x-i,a=t.end.x-i,u=t.start.y-s,c=t.end.y-s,l=r*r,h=n*n,v=a-o,_=c-u,m=v*v/l+_*_/h,b=2*o*v/l+2*u*_/h,y=o*o/l+u*u/h-1,w=b*b-4*m*y;if(w===0){const T=-b/2/m;return T>=0&&T<=1}else if(w>0){const T=Math.sqrt(w),P=(-b+T)/2/m,A=(-b-T)/2/m;return P>=0&&P<=1||A>=0&&A<=1}return!1}function jU(e,t){return _de(e,0,t,0)}function HU(e,t){const{start:r,end:n}=t,{x:i,y:s,width:o,height:a}=e;return r.x>i+o&&n.x>i+o||r.x<i&&n.x<i||r.y>s+a&&n.y>s+a||r.y<s&&n.y<s?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:ul(e.topLine(),t)||ul(e.rightLine(),t)||ul(e.bottomLine(),t)||ul(e.leftLine(),t)}function WU(e,t){return DT(e,wt.fromEllipse(t))?hm(Vs.fromRect(e),t):!1}function DT(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function fm(e,t){return nj(e,t,{interior:!1})}function FT(e,t){return ij(e,t,{interior:!1})}function XU(e,t){return sj(e,t,{interior:!1})}function YU(e,t){return pm(e,t,{interior:!1})}function BT(e,t){return nj(e,t,{interior:!0})}function hm(e,t){return ij(e,t,{interior:!0})}function KU(e,t){return sj(e,t,{interior:!0})}function JU(e,t){return pm(e,t,{interior:!0})}function ZU(e,t){return VT(e,t,{interior:!0})}function QU(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?BT(i,t):fm(i,t)})}function ej(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?hm(i,t):FT(i,t)})}function tj(e,t,r){return dm(e,Vs.fromRect(t),r)}function zT(e,t,r){return oj(e,t,r,{interior:!1})}function dm(e,t,r){return oj(e,t,r,{interior:!0})}function rj(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?dm(t,s,n):zT(t,s,n)})}function nj(e,t,r={}){const{interior:n=!1}=r;let i;if(n){if(e.containsPoint(t.start))return!0;const{start:a,end:u,points:c}=e;i=u.equals(a)?c:[...c,a]}else i=e.points;const{length:s}=i,o=new Ct;for(let a=0;a<s-1;a++)if(o.start=i[a],o.end=i[a+1],ul(t,o))return!0;return!1}function ij(e,t,r={}){const{start:n,end:i,points:s}=e;if(t.containsPoint(n))return!0;let o;const{interior:a=!1}=r;if(a){if(e.containsPoint(t.center()))return!0;o=i.equals(n)?s:[...s,n]}else o=s;const{length:u}=o,c=new Ct;for(let l=0;l<u-1;l++)if(c.start=o[l],c.end=o[l+1],qT(t,c))return!0;return!1}function sj(e,t,r){const n=Vs.fromRect(t);return VT(e,n,r)}function oj(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?VT(t,s,n):pm(t,s,n)})}function pm(e,t,r={}){const{interior:n=!1}=r;let i;if(n){const{start:u}=t;if(e.containsPoint(u))return!0;i=e.clone().close()}else i=e;const s=t.points,{length:o}=s,a=new Ct;for(let u=0;u<o-1;u++)if(a.start=s[u],a.end=s[u+1],fm(i,a))return!0;return!1}function VT(e,t,r){return t.containsPoint(e.start)||pm(e,t.clone().close(),r)}function _de(e,t,r,n){const{cos:i,sin:s}=Math,o=s(t),a=i(t),u=s(n),c=i(n),l=o*o,h=a*a,v=o*a,_=u*u,m=c*c,b=u*c,y=e.a*e.a,w=e.b*e.b,T=r.a*r.a,P=r.b*r.b,A=y*l+w*h,I=T*_+P*m,N=y*h+w*l,d=T*m+P*_;let C=2*(w-y)*v,O=2*(P-T)*b,k=-2*A*e.x-C*e.y,F=-2*I*r.x-O*r.y,z=-C*e.x-2*N*e.y,j=-O*r.x-2*d*r.y;const J=A*e.x*e.x+N*e.y*e.y+C*e.x*e.y-y*w,oe=I*r.x*r.x+d*r.y*r.y+O*r.x*r.y-T*P;C=C/2,O=O/2,k=k/2,F=F/2,z=z/2,j=j/2;const W=ac([[A,C,k],[C,N,z],[k,z,J]]),D=ac([[I,O,F],[O,d,j],[F,j,oe]]),B=.33333333*(ac([[I,C,k],[O,N,z],[F,z,J]])+ac([[A,O,k],[C,d,z],[k,j,J]])+ac([[A,C,F],[C,N,j],[k,z,oe]])),U=.33333333*(ac([[A,O,F],[C,d,j],[k,j,oe]])+ac([[I,C,F],[O,N,j],[F,z,oe]])+ac([[I,O,k],[O,d,z],[F,j,J]])),ie=Cv([[W,B],[B,U]]),se=Cv([[W,U],[B,D]]),xe=Cv([[B,U],[U,D]]);return!(Cv([[2*ie,se],[se,2*xe]])>0&&(U>0||B>0))}function Cv(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function ac(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}const bde=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:jU,ellipseWithLine:qT,exists:UU,lineWithLine:ul,pathWithEllipse:ej,pathWithLine:QU,pathWithPath:rj,pathWithPolygon:dm,pathWithPolyline:zT,pathWithRect:tj,polygonWithEllipse:hm,polygonWithLine:BT,polygonWithPolygon:ZU,polygonWithPolyline:JU,polygonWithRect:KU,polylineWithEllipse:FT,polylineWithLine:fm,polylineWithPolyline:YU,polylineWithRect:XU,rectWithEllipse:WU,rectWithLine:HU,rectWithRect:DT},Symbol.toStringTag,{value:"Module"})),wde=bde,xde=Object.freeze(Object.defineProperty({__proto__:null,Curve:an,Ellipse:ms,Line:Ct,Path:zt,Point:ge,Polygon:Vs,Polyline:Tn,Rect:wt,bezier:yde,ellipse:fde,intersection:wde,line:gl,normalizeAngle:_a,point:ag,random:U2,rect:vde,scale:ode,snapToGrid:xl,toDeg:lm,toRad:zs,types:Sr},Symbol.toStringTag,{value:"Module"}));var n2={},$T="1.13.7",a7=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},vm=Array.prototype,GT=Object.prototype,u7=typeof Symbol<"u"?Symbol.prototype:null,Sde=vm.push,cp=vm.slice,Pd=GT.toString,Ede=GT.hasOwnProperty,aj=typeof ArrayBuffer<"u",Ade=typeof DataView<"u",Tde=Array.isArray,c7=Object.keys,l7=Object.create,f7=aj&&ArrayBuffer.isView,Pde=isNaN,Cde=isFinite,uj=!{toString:null}.propertyIsEnumerable("toString"),h7=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ode=Math.pow(2,53)-1;function _s(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function Lc(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function cj(e){return e===null}function UT(e){return e===void 0}function jT(e){return e===!0||e===!1||Pd.call(e)==="[object Boolean]"}function lj(e){return!!(e&&e.nodeType===1)}function os(e){var t="[object "+e+"]";return function(r){return Pd.call(r)===t}}const gm=os("String"),HT=os("Number"),fj=os("Date"),hj=os("RegExp"),dj=os("Error"),WT=os("Symbol"),XT=os("ArrayBuffer");var pj=os("Function"),Ide=a7.document&&a7.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Ide!="function"&&(pj=function(e){return typeof e=="function"||!1});const ss=pj,vj=os("Object");var gj=Ade&&(!/\[native code\]/.test(String(DataView))||vj(new DataView(new ArrayBuffer(8)))),YT=typeof Map<"u"&&vj(new Map),Rde=os("DataView");function kde(e){return e!=null&&ss(e.getInt8)&&XT(e.buffer)}const Cd=gj?kde:Rde,Nc=Tde||os("Array");function qc(e,t){return e!=null&&Ede.call(e,t)}var W2=os("Arguments");(function(){W2(arguments)||(W2=function(e){return qc(e,"callee")})})();const mm=W2;function mj(e){return!WT(e)&&Cde(e)&&!isNaN(parseFloat(e))}function KT(e){return HT(e)&&Pde(e)}function JT(e){return function(){return e}}function yj(e){return function(t){var r=e(t);return typeof r=="number"&&r>=0&&r<=Ode}}function _j(e){return function(t){return t==null?void 0:t[e]}}const ug=_j("byteLength"),Mde=yj(ug);var Lde=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Nde(e){return f7?f7(e)&&!Cd(e):Mde(e)&&Lde.test(Pd.call(e))}const ZT=aj?Nde:JT(!1),$s=_j("length");function qde(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function bj(e,t){t=qde(t);var r=h7.length,n=e.constructor,i=ss(n)&&n.prototype||GT,s="constructor";for(qc(e,s)&&!t.contains(s)&&t.push(s);r--;)s=h7[r],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function ki(e){if(!Lc(e))return[];if(c7)return c7(e);var t=[];for(var r in e)qc(e,r)&&t.push(r);return uj&&bj(e,t),t}function wj(e){if(e==null)return!0;var t=$s(e);return typeof t=="number"&&(Nc(e)||gm(e)||mm(e))?t===0:$s(ki(e))===0}function QT(e,t){var r=ki(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function gn(e){if(e instanceof gn)return e;if(!(this instanceof gn))return new gn(e);this._wrapped=e}gn.VERSION=$T;gn.prototype.value=function(){return this._wrapped};gn.prototype.valueOf=gn.prototype.toJSON=gn.prototype.value;gn.prototype.toString=function(){return String(this._wrapped)};function d7(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,ug(e))}var p7="[object DataView]";function X2(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:xj(e,t,r,n)}function xj(e,t,r,n){e instanceof gn&&(e=e._wrapped),t instanceof gn&&(t=t._wrapped);var i=Pd.call(e);if(i!==Pd.call(t))return!1;if(gj&&i=="[object Object]"&&Cd(e)){if(!Cd(t))return!1;i=p7}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return u7.valueOf.call(e)===u7.valueOf.call(t);case"[object ArrayBuffer]":case p7:return xj(d7(e),d7(t),r,n)}var s=i==="[object Array]";if(!s&&ZT(e)){var o=ug(e);if(o!==ug(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(ss(a)&&a instanceof a&&ss(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!X2(e[c],t[c],r,n))return!1}else{var l=ki(e),h;if(c=l.length,ki(t).length!==c)return!1;for(;c--;)if(h=l[c],!(qc(t,h)&&X2(e[h],t[h],r,n)))return!1}return r.pop(),n.pop(),!0}function Sj(e,t){return X2(e,t)}function mh(e){if(!Lc(e))return[];var t=[];for(var r in e)t.push(r);return uj&&bj(e,t),t}function eP(e){var t=$s(e);return function(r){if(r==null)return!1;var n=mh(r);if($s(n))return!1;for(var i=0;i<t;i++)if(!ss(r[e[i]]))return!1;return e!==Tj||!ss(r[tP])}}var tP="forEach",Ej="has",rP=["clear","delete"],Aj=["get",Ej,"set"],Dde=rP.concat(tP,Aj),Tj=rP.concat(Aj),Fde=["add"].concat(rP,tP,Ej);const Pj=YT?eP(Dde):os("Map"),Cj=YT?eP(Tj):os("WeakMap"),Oj=YT?eP(Fde):os("Set"),Ij=os("WeakSet");function Gl(e){for(var t=ki(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function Rj(e){for(var t=ki(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function nP(e){for(var t={},r=ki(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function Od(e){var t=[];for(var r in e)ss(e[r])&&t.push(r);return t.sort()}function iP(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];(!t||r[c]===void 0)&&(r[c]=s[c])}return r}}const sP=iP(mh),Kf=iP(ki),oP=iP(mh,!0);function Bde(){return function(){}}function kj(e){if(!Lc(e))return{};if(l7)return l7(e);var t=Bde();t.prototype=e;var r=new t;return t.prototype=null,r}function Mj(e,t){var r=kj(e);return t&&Kf(r,t),r}function Lj(e){return Lc(e)?Nc(e)?e.slice():sP({},e):e}function Nj(e,t){return t(e),e}function aP(e){return Nc(e)?e:[e]}gn.toPath=aP;function lp(e){return gn.toPath(e)}function uP(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}function cP(e,t,r){var n=uP(e,lp(t));return UT(n)?r:n}function qj(e,t){t=lp(t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(!qc(e,i))return!1;e=e[i]}return!!r}function ym(e){return e}function Sl(e){return e=Kf({},e),function(t){return QT(t,e)}}function _m(e){return e=lp(e),function(t){return uP(t,e)}}function fp(e,t,r){if(t===void 0)return e;switch(r??3){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function Dj(e,t,r){return e==null?ym:ss(e)?fp(e,t,r):Lc(e)&&!Nc(e)?Sl(e):_m(e)}function bm(e,t){return Dj(e,t,1/0)}gn.iteratee=bm;function Gs(e,t,r){return gn.iteratee!==bm?gn.iteratee(e,t):Dj(e,t,r)}function Fj(e,t,r){t=Gs(t,r);for(var n=ki(e),i=n.length,s={},o=0;o<i;o++){var a=n[o];s[a]=t(e[a],a,e)}return s}function lP(){}function Bj(e){return e==null?lP:function(t){return cP(e,t)}}function zj(e,t,r){var n=Array(Math.max(0,e));t=fp(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function cg(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const Jf=Date.now||function(){return new Date().getTime()};function Vj(e){var t=function(s){return e[s]},r="(?:"+ki(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(s){return s=s==null?"":""+s,n.test(s)?s.replace(i,t):s}}const $j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Gj=Vj($j),zde=nP($j),Uj=Vj(zde),jj=gn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var i2=/(.)^/,Vde={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$de=/\\|'|\r|\n|\u2028|\u2029/g;function Gde(e){return"\\"+Vde[e]}var Ude=/^\s*(\w|\$)+\s*$/;function Hj(e,t,r){!t&&r&&(t=r),t=oP({},t,gn.templateSettings);var n=RegExp([(t.escape||i2).source,(t.interpolate||i2).source,(t.evaluate||i2).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(c,l,h,v,_){return s+=e.slice(i,_).replace($de,Gde),i=_+c.length,l?s+=`'+
((__t=(`+l+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:v&&(s+=`';
`+v+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!Ude.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(c){throw c.source=s,c}var u=function(c){return a.call(this,c,gn)};return u.source="function("+o+`){
`+s+"}",u}function Wj(e,t,r){t=lp(t);var n=t.length;if(!n)return ss(r)?r.call(e):r;for(var i=0;i<n;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=r,i=n),e=ss(s)?s.call(e):s}return e}var jde=0;function Xj(e){var t=++jde+"";return e?e+t:t}function Yj(e){var t=gn(e);return t._chain=!0,t}function Kj(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=kj(e.prototype),o=e.apply(s,i);return Lc(o)?o:s}var Ul=_s(function(e,t){var r=Ul.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return Kj(e,n,this,this,o)};return n});Ul.placeholder=gn;const fP=_s(function(e,t,r){if(!ss(e))throw new TypeError("Bind must be called on a function");var n=_s(function(i){return Kj(e,n,t,this,r.concat(i))});return n}),po=yj($s);function jl(e,t,r,n){if(n=n||[],!t&&t!==0)t=1/0;else if(t<=0)return n.concat(e);for(var i=n.length,s=0,o=$s(e);s<o;s++){var a=e[s];if(po(a)&&(Nc(a)||mm(a)))if(t>1)jl(a,t-1,r,n),i=n.length;else for(var u=0,c=a.length;u<c;)n[i++]=a[u++];else r||(n[i++]=a)}return n}const Jj=_s(function(e,t){t=jl(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=fP(e[n],e)}return e});function Zj(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return qc(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}const hP=_s(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),Qj=Ul(hP,gn,1);function e9(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:Jf(),n=null,o=e.apply(i,s),n||(i=s=null)},c=function(){var l=Jf();!a&&r.leading===!1&&(a=l);var h=t-(l-a);return i=this,s=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),a=l,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,h)),o};return c.cancel=function(){clearTimeout(n),a=0,n=i=s=null},c}function t9(e,t,r){var n,i,s,o,a,u=function(){var l=Jf()-i;t>l?n=setTimeout(u,t-l):(n=null,r||(o=e.apply(a,s)),n||(s=a=null))},c=_s(function(l){return a=this,s=l,i=Jf(),n||(n=setTimeout(u,t),r&&(o=e.apply(a,s))),o});return c.cancel=function(){clearTimeout(n),n=s=a=null},c}function r9(e,t){return Ul(t,e)}function wm(e){return function(){return!e.apply(this,arguments)}}function n9(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function i9(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function dP(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const s9=Ul(dP,2);function pP(e,t,r){t=Gs(t,r);for(var n=ki(e),i,s=0,o=n.length;s<o;s++)if(i=n[s],t(e[i],i,e))return i}function o9(e){return function(t,r,n){r=Gs(r,n);for(var i=$s(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}const xm=o9(1),vP=o9(-1);function gP(e,t,r,n){r=Gs(r,n,1);for(var i=r(t),s=0,o=$s(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function a9(e,t,r){return function(n,i,s){var o=0,a=$s(n);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(cp.call(n,o,a),KT),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}const mP=a9(1,xm,gP),u9=a9(-1,vP);function Id(e,t,r){var n=po(e)?xm:pP,i=n(e,t,r);if(i!==void 0&&i!==-1)return e[i]}function c9(e,t){return Id(e,Sl(t))}function ba(e,t,r){t=fp(t,r);var n,i;if(po(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=ki(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function Vu(e,t,r){t=Gs(t,r);for(var n=!po(e)&&ki(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function l9(e){var t=function(r,n,i,s){var o=!po(r)&&ki(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var c=o?o[u]:u;i=n(i,r[c],c,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,fp(n,s,4),i,o)}}const Cf=l9(1),lg=l9(-1);function Cc(e,t,r){var n=[];return t=Gs(t,r),ba(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function f9(e,t,r){return Cc(e,wm(Gs(t)),r)}function fg(e,t,r){t=Gs(t,r);for(var n=!po(e)&&ki(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function hg(e,t,r){t=Gs(t,r);for(var n=!po(e)&&ki(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function zo(e,t,r,n){return po(e)||(e=Gl(e)),(typeof r!="number"||n)&&(r=0),mP(e,t,r)>=0}const h9=_s(function(e,t,r){var n,i;return ss(t)?i=t:(t=lp(t),n=t.slice(0,-1),t=t[t.length-1]),Vu(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=uP(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function Sm(e,t){return Vu(e,_m(t))}function d9(e,t){return Cc(e,Sl(t))}function yP(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=po(e)?e:Gl(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=Gs(t,r),ba(e,function(c,l,h){o=t(c,l,h),(o>i||o===-1/0&&n===-1/0)&&(n=c,i=o)});return n}function p9(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=po(e)?e:Gl(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=Gs(t,r),ba(e,function(c,l,h){o=t(c,l,h),(o<i||o===1/0&&n===1/0)&&(n=c,i=o)});return n}var Hde=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function _P(e){return e?Nc(e)?cp.call(e):gm(e)?e.match(Hde):po(e)?Vu(e,ym):Gl(e):[]}function bP(e,t,r){if(t==null||r)return po(e)||(e=Gl(e)),e[cg(e.length-1)];var n=_P(e),i=$s(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=cg(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function v9(e){return bP(e,1/0)}function g9(e,t,r){var n=0;return t=Gs(t,r),Sm(Vu(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function Em(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=Gs(n,i),ba(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}const m9=Em(function(e,t,r){qc(e,r)?e[r].push(t):e[r]=[t]}),y9=Em(function(e,t,r){e[r]=t}),_9=Em(function(e,t,r){qc(e,r)?e[r]++:e[r]=1}),b9=Em(function(e,t,r){e[r?0:1].push(t)},!0);function w9(e){return e==null?0:po(e)?e.length:ki(e).length}function Wde(e,t,r){return t in r}const wP=_s(function(e,t){var r={},n=t[0];if(e==null)return r;ss(n)?(t.length>1&&(n=fp(n,t[1])),t=mh(e)):(n=Wde,t=jl(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),x9=_s(function(e,t){var r=t[0],n;return ss(r)?(r=wm(r),t.length>1&&(n=t[1])):(t=Vu(jl(t,!1,!1),String),r=function(i,s){return!zo(t,s)}),wP(e,r,n)});function xP(e,t,r){return cp.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))}function Of(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[0]:xP(e,e.length-t)}function ml(e,t,r){return cp.call(e,t==null||r?1:t)}function S9(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[e.length-1]:ml(e,Math.max(0,e.length-t))}function E9(e){return Cc(e,Boolean)}function A9(e,t){return jl(e,t,!1)}const SP=_s(function(e,t){return t=jl(t,!0,!0),Cc(e,function(r){return!zo(t,r)})}),T9=_s(function(e,t){return SP(e,t)});function Rd(e,t,r,n){jT(t)||(n=r,r=t,t=!1),r!=null&&(r=Gs(r,n));for(var i=[],s=[],o=0,a=$s(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?((!o||s!==c)&&i.push(u),s=c):r?zo(s,c)||(s.push(c),i.push(u)):zo(i,u)||i.push(u)}return i}const P9=_s(function(e){return Rd(jl(e,!0,!0))});function C9(e){for(var t=[],r=arguments.length,n=0,i=$s(e);n<i;n++){var s=e[n];if(!zo(t,s)){var o;for(o=1;o<r&&zo(arguments[o],s);o++);o===r&&t.push(s)}}return t}function kd(e){for(var t=e&&yP(e,$s).length||0,r=Array(t),n=0;n<t;n++)r[n]=Sm(e,n);return r}const O9=_s(kd);function I9(e,t){for(var r={},n=0,i=$s(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function R9(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function k9(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(cp.call(e,n,n+=t));return r}function EP(e,t){return e._chain?gn(t).chain():t}function AP(e){return ba(Od(e),function(t){var r=gn[t]=e[t];gn.prototype[t]=function(){var n=[this._wrapped];return Sde.apply(n,arguments),EP(this,r.apply(gn,n))}}),gn}ba(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=vm[e];gn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0]),EP(this,r)}});ba(["concat","join","slice"],function(e){var t=vm[e];gn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(r=t.apply(r,arguments)),EP(this,r)}});const Xde=Object.freeze(Object.defineProperty({__proto__:null,VERSION:$T,after:i9,all:fg,allKeys:mh,any:hg,assign:Kf,before:dP,bind:fP,bindAll:Jj,chain:Yj,chunk:k9,clone:Lj,collect:Vu,compact:E9,compose:n9,constant:JT,contains:zo,countBy:_9,create:Mj,debounce:t9,default:gn,defaults:oP,defer:Qj,delay:hP,detect:Id,difference:SP,drop:ml,each:ba,escape:Gj,every:fg,extend:sP,extendOwn:Kf,filter:Cc,find:Id,findIndex:xm,findKey:pP,findLastIndex:vP,findWhere:c9,first:Of,flatten:A9,foldl:Cf,foldr:lg,forEach:ba,functions:Od,get:cP,groupBy:m9,has:qj,head:Of,identity:ym,include:zo,includes:zo,indexBy:y9,indexOf:mP,initial:xP,inject:Cf,intersection:C9,invert:nP,invoke:h9,isArguments:mm,isArray:Nc,isArrayBuffer:XT,isBoolean:jT,isDataView:Cd,isDate:fj,isElement:lj,isEmpty:wj,isEqual:Sj,isError:dj,isFinite:mj,isFunction:ss,isMap:Pj,isMatch:QT,isNaN:KT,isNull:cj,isNumber:HT,isObject:Lc,isRegExp:hj,isSet:Oj,isString:gm,isSymbol:WT,isTypedArray:ZT,isUndefined:UT,isWeakMap:Cj,isWeakSet:Ij,iteratee:bm,keys:ki,last:S9,lastIndexOf:u9,map:Vu,mapObject:Fj,matcher:Sl,matches:Sl,max:yP,memoize:Zj,methods:Od,min:p9,mixin:AP,negate:wm,noop:lP,now:Jf,object:I9,omit:x9,once:s9,pairs:Rj,partial:Ul,partition:b9,pick:wP,pluck:Sm,property:_m,propertyOf:Bj,random:cg,range:R9,reduce:Cf,reduceRight:lg,reject:f9,rest:ml,restArguments:_s,result:Wj,sample:bP,select:Cc,shuffle:v9,size:w9,some:hg,sortBy:g9,sortedIndex:gP,tail:ml,take:Of,tap:Nj,template:Hj,templateSettings:jj,throttle:e9,times:zj,toArray:_P,toPath:aP,transpose:kd,unescape:Uj,union:P9,uniq:Rd,unique:Rd,uniqueId:Xj,unzip:kd,values:Gl,where:d9,without:T9,wrap:r9,zip:O9},Symbol.toStringTag,{value:"Module"}));var Y2=AP(Xde);Y2._=Y2;const Yde=Object.freeze(Object.defineProperty({__proto__:null,VERSION:$T,after:i9,all:fg,allKeys:mh,any:hg,assign:Kf,before:dP,bind:fP,bindAll:Jj,chain:Yj,chunk:k9,clone:Lj,collect:Vu,compact:E9,compose:n9,constant:JT,contains:zo,countBy:_9,create:Mj,debounce:t9,default:Y2,defaults:oP,defer:Qj,delay:hP,detect:Id,difference:SP,drop:ml,each:ba,escape:Gj,every:fg,extend:sP,extendOwn:Kf,filter:Cc,find:Id,findIndex:xm,findKey:pP,findLastIndex:vP,findWhere:c9,first:Of,flatten:A9,foldl:Cf,foldr:lg,forEach:ba,functions:Od,get:cP,groupBy:m9,has:qj,head:Of,identity:ym,include:zo,includes:zo,indexBy:y9,indexOf:mP,initial:xP,inject:Cf,intersection:C9,invert:nP,invoke:h9,isArguments:mm,isArray:Nc,isArrayBuffer:XT,isBoolean:jT,isDataView:Cd,isDate:fj,isElement:lj,isEmpty:wj,isEqual:Sj,isError:dj,isFinite:mj,isFunction:ss,isMap:Pj,isMatch:QT,isNaN:KT,isNull:cj,isNumber:HT,isObject:Lc,isRegExp:hj,isSet:Oj,isString:gm,isSymbol:WT,isTypedArray:ZT,isUndefined:UT,isWeakMap:Cj,isWeakSet:Ij,iteratee:bm,keys:ki,last:S9,lastIndexOf:u9,map:Vu,mapObject:Fj,matcher:Sl,matches:Sl,max:yP,memoize:Zj,methods:Od,min:p9,mixin:AP,negate:wm,noop:lP,now:Jf,object:I9,omit:x9,once:s9,pairs:Rj,partial:Ul,partition:b9,pick:wP,pluck:Sm,property:_m,propertyOf:Bj,random:cg,range:R9,reduce:Cf,reduceRight:lg,reject:f9,rest:ml,restArguments:_s,result:Wj,sample:bP,select:Cc,shuffle:v9,size:w9,some:hg,sortBy:g9,sortedIndex:gP,tail:ml,take:Of,tap:Nj,template:Hj,templateSettings:jj,throttle:e9,times:zj,toArray:_P,toPath:aP,transpose:kd,unescape:Uj,union:P9,uniq:Rd,unique:Rd,uniqueId:Xj,unzip:kd,values:Gl,where:d9,without:T9,wrap:r9,zip:O9},Symbol.toStringTag,{value:"Module"})),Kde=Xse(Yde);var Yv={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Jde=Yv.exports,v7;function M9(){return v7||(v7=1,function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:Jde,function(t,r){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(g){return n.flat.call(g)}:function(g){return n.concat.apply([],g)},a=n.push,u=n.indexOf,c={},l=c.toString,h=c.hasOwnProperty,v=h.toString,_=v.call(Object),m={},b=function(S){return typeof S=="function"&&typeof S.nodeType!="number"&&typeof S.item!="function"},y=function(S){return S!=null&&S===S.window},w=t.document,T={type:!0,src:!0,nonce:!0,noModule:!0};function P(g,S,R){R=R||w;var L,V,G=R.createElement("script");if(G.text=g,S)for(L in T)V=S[L]||S.getAttribute&&S.getAttribute(L),V&&G.setAttribute(L,V);R.head.appendChild(G).parentNode.removeChild(G)}function A(g){return g==null?g+"":typeof g=="object"||typeof g=="function"?c[l.call(g)]||"object":typeof g}var I="3.7.1",N=/HTML$/i,d=function(g,S){return new d.fn.init(g,S)};d.fn=d.prototype={jquery:I,constructor:d,length:0,toArray:function(){return s.call(this)},get:function(g){return g==null?s.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var S=d.merge(this.constructor(),g);return S.prevObject=this,S},each:function(g){return d.each(this,g)},map:function(g){return this.pushStack(d.map(this,function(S,R){return g.call(S,R,S)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(g,S){return(S+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(g,S){return S%2}))},eq:function(g){var S=this.length,R=+g+(g<0?S:0);return this.pushStack(R>=0&&R<S?[this[R]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},d.extend=d.fn.extend=function(){var g,S,R,L,V,G,X=arguments[0]||{},ve=1,ue=arguments.length,Ae=!1;for(typeof X=="boolean"&&(Ae=X,X=arguments[ve]||{},ve++),typeof X!="object"&&!b(X)&&(X={}),ve===ue&&(X=this,ve--);ve<ue;ve++)if((g=arguments[ve])!=null)for(S in g)L=g[S],!(S==="__proto__"||X===L)&&(Ae&&L&&(d.isPlainObject(L)||(V=Array.isArray(L)))?(R=X[S],V&&!Array.isArray(R)?G=[]:!V&&!d.isPlainObject(R)?G={}:G=R,V=!1,X[S]=d.extend(Ae,G,L)):L!==void 0&&(X[S]=L));return X},d.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var S,R;return!g||l.call(g)!=="[object Object]"?!1:(S=i(g),S?(R=h.call(S,"constructor")&&S.constructor,typeof R=="function"&&v.call(R)===_):!0)},isEmptyObject:function(g){var S;for(S in g)return!1;return!0},globalEval:function(g,S,R){P(g,{nonce:S&&S.nonce},R)},each:function(g,S){var R,L=0;if(C(g))for(R=g.length;L<R&&S.call(g[L],L,g[L])!==!1;L++);else for(L in g)if(S.call(g[L],L,g[L])===!1)break;return g},text:function(g){var S,R="",L=0,V=g.nodeType;if(!V)for(;S=g[L++];)R+=d.text(S);return V===1||V===11?g.textContent:V===9?g.documentElement.textContent:V===3||V===4?g.nodeValue:R},makeArray:function(g,S){var R=S||[];return g!=null&&(C(Object(g))?d.merge(R,typeof g=="string"?[g]:g):a.call(R,g)),R},inArray:function(g,S,R){return S==null?-1:u.call(S,g,R)},isXMLDoc:function(g){var S=g&&g.namespaceURI,R=g&&(g.ownerDocument||g).documentElement;return!N.test(S||R&&R.nodeName||"HTML")},merge:function(g,S){for(var R=+S.length,L=0,V=g.length;L<R;L++)g[V++]=S[L];return g.length=V,g},grep:function(g,S,R){for(var L,V=[],G=0,X=g.length,ve=!R;G<X;G++)L=!S(g[G],G),L!==ve&&V.push(g[G]);return V},map:function(g,S,R){var L,V,G=0,X=[];if(C(g))for(L=g.length;G<L;G++)V=S(g[G],G,R),V!=null&&X.push(V);else for(G in g)V=S(g[G],G,R),V!=null&&X.push(V);return o(X)},guid:1,support:m}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=n[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,S){c["[object "+S+"]"]=S.toLowerCase()});function C(g){var S=!!g&&"length"in g&&g.length,R=A(g);return b(g)||y(g)?!1:R==="array"||S===0||typeof S=="number"&&S>0&&S-1 in g}function O(g,S){return g.nodeName&&g.nodeName.toLowerCase()===S.toLowerCase()}var k=n.pop,F=n.sort,z=n.splice,j="[\\x20\\t\\r\\n\\f]",J=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g");d.contains=function(g,S){var R=S&&S.parentNode;return g===R||!!(R&&R.nodeType===1&&(g.contains?g.contains(R):g.compareDocumentPosition&&g.compareDocumentPosition(R)&16))};var oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function W(g,S){return S?g==="\0"?"ï¿½":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g}d.escapeSelector=function(g){return(g+"").replace(oe,W)};var D=w,B=a;(function(){var g,S,R,L,V,G=B,X,ve,ue,Ae,$e,Xe=d.expando,ke=0,pt=0,kt=Uc(),vr=Uc(),hr=Uc(),Ei=Uc(),Wn=function(ae,Se){return ae===Se&&(V=!0),0},vo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",go="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",kr="\\["+j+"*("+go+")(?:"+j+"*([*^$|!~]?=)"+j+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+go+"))|)"+j+"*\\]",Na=":("+go+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+kr+")*)|.*)\\)|)",Mr=new RegExp(j+"+","g"),_n=new RegExp("^"+j+"*,"+j+"*"),Vc=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),Ql=new RegExp(j+"|>"),js=new RegExp(Na),pu=new RegExp("^"+go+"$"),Ss={ID:new RegExp("^#("+go+")"),CLASS:new RegExp("^\\.("+go+")"),TAG:new RegExp("^("+go+"|[*])"),ATTR:new RegExp("^"+kr),PSEUDO:new RegExp("^"+Na),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+vo+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Qo=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,Ki=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$c=/[+~]/,ea=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),mo=function(ae,Se){var Re="0x"+ae.slice(1)-65536;return Se||(Re<0?String.fromCharCode(Re+65536):String.fromCharCode(Re>>10|55296,Re&1023|56320))},us=function(){Da()},Ih=vu(function(ae){return ae.disabled===!0&&O(ae,"fieldset")},{dir:"parentNode",next:"legend"});function Gc(){try{return X.activeElement}catch{}}try{G.apply(n=s.call(D.childNodes),D.childNodes),n[D.childNodes.length].nodeType}catch{G={apply:function(Se,Re){B.apply(Se,s.call(Re))},call:function(Se){B.apply(Se,s.call(arguments,1))}}}function on(ae,Se,Re,De){var ne,_e,ye,Ke,it,Mt,Lt,Rt=Se&&Se.ownerDocument,wr=Se?Se.nodeType:9;if(Re=Re||[],typeof ae!="string"||!ae||wr!==1&&wr!==9&&wr!==11)return Re;if(!De&&(Da(Se),Se=Se||X,ue)){if(wr!==11&&(it=Ki.exec(ae)))if(ne=it[1]){if(wr===9)if(ye=Se.getElementById(ne)){if(ye.id===ne)return G.call(Re,ye),Re}else return Re;else if(Rt&&(ye=Rt.getElementById(ne))&&on.contains(Se,ye)&&ye.id===ne)return G.call(Re,ye),Re}else{if(it[2])return G.apply(Re,Se.getElementsByTagName(ae)),Re;if((ne=it[3])&&Se.getElementsByClassName)return G.apply(Re,Se.getElementsByClassName(ne)),Re}if(!Ei[ae+" "]&&(!Ae||!Ae.test(ae))){if(Lt=ae,Rt=Se,wr===1&&(Ql.test(ae)||Vc.test(ae))){for(Rt=$c.test(ae)&&Rh(Se.parentNode)||Se,(Rt!=Se||!m.scope)&&((Ke=Se.getAttribute("id"))?Ke=d.escapeSelector(Ke):Se.setAttribute("id",Ke=Xe)),Mt=Zu(ae),_e=Mt.length;_e--;)Mt[_e]=(Ke?"#"+Ke:":scope")+" "+Ws(Mt[_e]);Lt=Mt.join(",")}try{return G.apply(Re,Rt.querySelectorAll(Lt)),Re}catch{Ei(ae,!0)}finally{Ke===Xe&&Se.removeAttribute("id")}}}return Np(ae.replace(J,"$1"),Se,Re,De)}function Uc(){var ae=[];function Se(Re,De){return ae.push(Re+" ")>S.cacheLength&&delete Se[ae.shift()],Se[Re+" "]=De}return Se}function Hs(ae){return ae[Xe]=!0,ae}function Ju(ae){var Se=X.createElement("fieldset");try{return!!ae(Se)}catch{return!1}finally{Se.parentNode&&Se.parentNode.removeChild(Se),Se=null}}function Zm(ae){return function(Se){return O(Se,"input")&&Se.type===ae}}function Qm(ae){return function(Se){return(O(Se,"input")||O(Se,"button"))&&Se.type===ae}}function Mp(ae){return function(Se){return"form"in Se?Se.parentNode&&Se.disabled===!1?"label"in Se?"label"in Se.parentNode?Se.parentNode.disabled===ae:Se.disabled===ae:Se.isDisabled===ae||Se.isDisabled!==!ae&&Ih(Se)===ae:Se.disabled===ae:"label"in Se?Se.disabled===ae:!1}}function Es(ae){return Hs(function(Se){return Se=+Se,Hs(function(Re,De){for(var ne,_e=ae([],Re.length,Se),ye=_e.length;ye--;)Re[ne=_e[ye]]&&(Re[ne]=!(De[ne]=Re[ne]))})})}function Rh(ae){return ae&&typeof ae.getElementsByTagName<"u"&&ae}function Da(ae){var Se,Re=ae?ae.ownerDocument||ae:D;return Re==X||Re.nodeType!==9||!Re.documentElement||(X=Re,ve=X.documentElement,ue=!d.isXMLDoc(X),$e=ve.matches||ve.webkitMatchesSelector||ve.msMatchesSelector,ve.msMatchesSelector&&D!=X&&(Se=X.defaultView)&&Se.top!==Se&&Se.addEventListener("unload",us),m.getById=Ju(function(De){return ve.appendChild(De).id=d.expando,!X.getElementsByName||!X.getElementsByName(d.expando).length}),m.disconnectedMatch=Ju(function(De){return $e.call(De,"*")}),m.scope=Ju(function(){return X.querySelectorAll(":scope")}),m.cssHas=Ju(function(){try{return X.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(S.filter.ID=function(De){var ne=De.replace(ea,mo);return function(_e){return _e.getAttribute("id")===ne}},S.find.ID=function(De,ne){if(typeof ne.getElementById<"u"&&ue){var _e=ne.getElementById(De);return _e?[_e]:[]}}):(S.filter.ID=function(De){var ne=De.replace(ea,mo);return function(_e){var ye=typeof _e.getAttributeNode<"u"&&_e.getAttributeNode("id");return ye&&ye.value===ne}},S.find.ID=function(De,ne){if(typeof ne.getElementById<"u"&&ue){var _e,ye,Ke,it=ne.getElementById(De);if(it){if(_e=it.getAttributeNode("id"),_e&&_e.value===De)return[it];for(Ke=ne.getElementsByName(De),ye=0;it=Ke[ye++];)if(_e=it.getAttributeNode("id"),_e&&_e.value===De)return[it]}return[]}}),S.find.TAG=function(De,ne){return typeof ne.getElementsByTagName<"u"?ne.getElementsByTagName(De):ne.querySelectorAll(De)},S.find.CLASS=function(De,ne){if(typeof ne.getElementsByClassName<"u"&&ue)return ne.getElementsByClassName(De)},Ae=[],Ju(function(De){var ne;ve.appendChild(De).innerHTML="<a id='"+Xe+"' href='' disabled='disabled'></a><select id='"+Xe+"-\r\\' disabled='disabled'><option selected=''></option></select>",De.querySelectorAll("[selected]").length||Ae.push("\\["+j+"*(?:value|"+vo+")"),De.querySelectorAll("[id~="+Xe+"-]").length||Ae.push("~="),De.querySelectorAll("a#"+Xe+"+*").length||Ae.push(".#.+[+~]"),De.querySelectorAll(":checked").length||Ae.push(":checked"),ne=X.createElement("input"),ne.setAttribute("type","hidden"),De.appendChild(ne).setAttribute("name","D"),ve.appendChild(De).disabled=!0,De.querySelectorAll(":disabled").length!==2&&Ae.push(":enabled",":disabled"),ne=X.createElement("input"),ne.setAttribute("name",""),De.appendChild(ne),De.querySelectorAll("[name='']").length||Ae.push("\\["+j+"*name"+j+"*="+j+`*(?:''|"")`)}),m.cssHas||Ae.push(":has"),Ae=Ae.length&&new RegExp(Ae.join("|")),Wn=function(De,ne){if(De===ne)return V=!0,0;var _e=!De.compareDocumentPosition-!ne.compareDocumentPosition;return _e||(_e=(De.ownerDocument||De)==(ne.ownerDocument||ne)?De.compareDocumentPosition(ne):1,_e&1||!m.sortDetached&&ne.compareDocumentPosition(De)===_e?De===X||De.ownerDocument==D&&on.contains(D,De)?-1:ne===X||ne.ownerDocument==D&&on.contains(D,ne)?1:L?u.call(L,De)-u.call(L,ne):0:_e&4?-1:1)}),X}on.matches=function(ae,Se){return on(ae,null,null,Se)},on.matchesSelector=function(ae,Se){if(Da(ae),ue&&!Ei[Se+" "]&&(!Ae||!Ae.test(Se)))try{var Re=$e.call(ae,Se);if(Re||m.disconnectedMatch||ae.document&&ae.document.nodeType!==11)return Re}catch{Ei(Se,!0)}return on(Se,X,null,[ae]).length>0},on.contains=function(ae,Se){return(ae.ownerDocument||ae)!=X&&Da(ae),d.contains(ae,Se)},on.attr=function(ae,Se){(ae.ownerDocument||ae)!=X&&Da(ae);var Re=S.attrHandle[Se.toLowerCase()],De=Re&&h.call(S.attrHandle,Se.toLowerCase())?Re(ae,Se,!ue):void 0;return De!==void 0?De:ae.getAttribute(Se)},on.error=function(ae){throw new Error("Syntax error, unrecognized expression: "+ae)},d.uniqueSort=function(ae){var Se,Re=[],De=0,ne=0;if(V=!m.sortStable,L=!m.sortStable&&s.call(ae,0),F.call(ae,Wn),V){for(;Se=ae[ne++];)Se===ae[ne]&&(De=Re.push(ne));for(;De--;)z.call(ae,Re[De],1)}return L=null,ae},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(s.apply(this)))},S=d.expr={cacheLength:50,createPseudo:Hs,match:Ss,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ae){return ae[1]=ae[1].replace(ea,mo),ae[3]=(ae[3]||ae[4]||ae[5]||"").replace(ea,mo),ae[2]==="~="&&(ae[3]=" "+ae[3]+" "),ae.slice(0,4)},CHILD:function(ae){return ae[1]=ae[1].toLowerCase(),ae[1].slice(0,3)==="nth"?(ae[3]||on.error(ae[0]),ae[4]=+(ae[4]?ae[5]+(ae[6]||1):2*(ae[3]==="even"||ae[3]==="odd")),ae[5]=+(ae[7]+ae[8]||ae[3]==="odd")):ae[3]&&on.error(ae[0]),ae},PSEUDO:function(ae){var Se,Re=!ae[6]&&ae[2];return Ss.CHILD.test(ae[0])?null:(ae[3]?ae[2]=ae[4]||ae[5]||"":Re&&js.test(Re)&&(Se=Zu(Re,!0))&&(Se=Re.indexOf(")",Re.length-Se)-Re.length)&&(ae[0]=ae[0].slice(0,Se),ae[2]=Re.slice(0,Se)),ae.slice(0,3))}},filter:{TAG:function(ae){var Se=ae.replace(ea,mo).toLowerCase();return ae==="*"?function(){return!0}:function(Re){return O(Re,Se)}},CLASS:function(ae){var Se=kt[ae+" "];return Se||(Se=new RegExp("(^|"+j+")"+ae+"("+j+"|$)"))&&kt(ae,function(Re){return Se.test(typeof Re.className=="string"&&Re.className||typeof Re.getAttribute<"u"&&Re.getAttribute("class")||"")})},ATTR:function(ae,Se,Re){return function(De){var ne=on.attr(De,ae);return ne==null?Se==="!=":Se?(ne+="",Se==="="?ne===Re:Se==="!="?ne!==Re:Se==="^="?Re&&ne.indexOf(Re)===0:Se==="*="?Re&&ne.indexOf(Re)>-1:Se==="$="?Re&&ne.slice(-Re.length)===Re:Se==="~="?(" "+ne.replace(Mr," ")+" ").indexOf(Re)>-1:Se==="|="?ne===Re||ne.slice(0,Re.length+1)===Re+"-":!1):!0}},CHILD:function(ae,Se,Re,De,ne){var _e=ae.slice(0,3)!=="nth",ye=ae.slice(-4)!=="last",Ke=Se==="of-type";return De===1&&ne===0?function(it){return!!it.parentNode}:function(it,Mt,Lt){var Rt,wr,Yt,Pr,Ai,Mi=_e!==ye?"nextSibling":"previousSibling",Ti=it.parentNode,ls=Ke&&it.nodeName.toLowerCase(),ta=!Lt&&!Ke,fr=!1;if(Ti){if(_e){for(;Mi;){for(Yt=it;Yt=Yt[Mi];)if(Ke?O(Yt,ls):Yt.nodeType===1)return!1;Ai=Mi=ae==="only"&&!Ai&&"nextSibling"}return!0}if(Ai=[ye?Ti.firstChild:Ti.lastChild],ye&&ta){for(wr=Ti[Xe]||(Ti[Xe]={}),Rt=wr[ae]||[],Pr=Rt[0]===ke&&Rt[1],fr=Pr&&Rt[2],Yt=Pr&&Ti.childNodes[Pr];Yt=++Pr&&Yt&&Yt[Mi]||(fr=Pr=0)||Ai.pop();)if(Yt.nodeType===1&&++fr&&Yt===it){wr[ae]=[ke,Pr,fr];break}}else if(ta&&(wr=it[Xe]||(it[Xe]={}),Rt=wr[ae]||[],Pr=Rt[0]===ke&&Rt[1],fr=Pr),fr===!1)for(;(Yt=++Pr&&Yt&&Yt[Mi]||(fr=Pr=0)||Ai.pop())&&!((Ke?O(Yt,ls):Yt.nodeType===1)&&++fr&&(ta&&(wr=Yt[Xe]||(Yt[Xe]={}),wr[ae]=[ke,fr]),Yt===it)););return fr-=ne,fr===De||fr%De===0&&fr/De>=0}}},PSEUDO:function(ae,Se){var Re,De=S.pseudos[ae]||S.setFilters[ae.toLowerCase()]||on.error("unsupported pseudo: "+ae);return De[Xe]?De(Se):De.length>1?(Re=[ae,ae,"",Se],S.setFilters.hasOwnProperty(ae.toLowerCase())?Hs(function(ne,_e){for(var ye,Ke=De(ne,Se),it=Ke.length;it--;)ye=u.call(ne,Ke[it]),ne[ye]=!(_e[ye]=Ke[it])}):function(ne){return De(ne,0,Re)}):De}},pseudos:{not:Hs(function(ae){var Se=[],Re=[],De=Mh(ae.replace(J,"$1"));return De[Xe]?Hs(function(ne,_e,ye,Ke){for(var it,Mt=De(ne,null,Ke,[]),Lt=ne.length;Lt--;)(it=Mt[Lt])&&(ne[Lt]=!(_e[Lt]=it))}):function(ne,_e,ye){return Se[0]=ne,De(Se,null,ye,Re),Se[0]=null,!Re.pop()}}),has:Hs(function(ae){return function(Se){return on(ae,Se).length>0}}),contains:Hs(function(ae){return ae=ae.replace(ea,mo),function(Se){return(Se.textContent||d.text(Se)).indexOf(ae)>-1}}),lang:Hs(function(ae){return pu.test(ae||"")||on.error("unsupported lang: "+ae),ae=ae.replace(ea,mo).toLowerCase(),function(Se){var Re;do if(Re=ue?Se.lang:Se.getAttribute("xml:lang")||Se.getAttribute("lang"))return Re=Re.toLowerCase(),Re===ae||Re.indexOf(ae+"-")===0;while((Se=Se.parentNode)&&Se.nodeType===1);return!1}}),target:function(ae){var Se=t.location&&t.location.hash;return Se&&Se.slice(1)===ae.id},root:function(ae){return ae===ve},focus:function(ae){return ae===Gc()&&X.hasFocus()&&!!(ae.type||ae.href||~ae.tabIndex)},enabled:Mp(!1),disabled:Mp(!0),checked:function(ae){return O(ae,"input")&&!!ae.checked||O(ae,"option")&&!!ae.selected},selected:function(ae){return ae.parentNode&&ae.parentNode.selectedIndex,ae.selected===!0},empty:function(ae){for(ae=ae.firstChild;ae;ae=ae.nextSibling)if(ae.nodeType<6)return!1;return!0},parent:function(ae){return!S.pseudos.empty(ae)},header:function(ae){return qa.test(ae.nodeName)},input:function(ae){return Qo.test(ae.nodeName)},button:function(ae){return O(ae,"input")&&ae.type==="button"||O(ae,"button")},text:function(ae){var Se;return O(ae,"input")&&ae.type==="text"&&((Se=ae.getAttribute("type"))==null||Se.toLowerCase()==="text")},first:Es(function(){return[0]}),last:Es(function(ae,Se){return[Se-1]}),eq:Es(function(ae,Se,Re){return[Re<0?Re+Se:Re]}),even:Es(function(ae,Se){for(var Re=0;Re<Se;Re+=2)ae.push(Re);return ae}),odd:Es(function(ae,Se){for(var Re=1;Re<Se;Re+=2)ae.push(Re);return ae}),lt:Es(function(ae,Se,Re){var De;for(Re<0?De=Re+Se:Re>Se?De=Se:De=Re;--De>=0;)ae.push(De);return ae}),gt:Es(function(ae,Se,Re){for(var De=Re<0?Re+Se:Re;++De<Se;)ae.push(De);return ae})}},S.pseudos.nth=S.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[g]=Zm(g);for(g in{submit:!0,reset:!0})S.pseudos[g]=Qm(g);function ef(){}ef.prototype=S.filters=S.pseudos,S.setFilters=new ef;function Zu(ae,Se){var Re,De,ne,_e,ye,Ke,it,Mt=vr[ae+" "];if(Mt)return Se?0:Mt.slice(0);for(ye=ae,Ke=[],it=S.preFilter;ye;){(!Re||(De=_n.exec(ye)))&&(De&&(ye=ye.slice(De[0].length)||ye),Ke.push(ne=[])),Re=!1,(De=Vc.exec(ye))&&(Re=De.shift(),ne.push({value:Re,type:De[0].replace(J," ")}),ye=ye.slice(Re.length));for(_e in S.filter)(De=Ss[_e].exec(ye))&&(!it[_e]||(De=it[_e](De)))&&(Re=De.shift(),ne.push({value:Re,type:_e,matches:De}),ye=ye.slice(Re.length));if(!Re)break}return Se?ye.length:ye?on.error(ae):vr(ae,Ke).slice(0)}function Ws(ae){for(var Se=0,Re=ae.length,De="";Se<Re;Se++)De+=ae[Se].value;return De}function vu(ae,Se,Re){var De=Se.dir,ne=Se.next,_e=ne||De,ye=Re&&_e==="parentNode",Ke=pt++;return Se.first?function(it,Mt,Lt){for(;it=it[De];)if(it.nodeType===1||ye)return ae(it,Mt,Lt);return!1}:function(it,Mt,Lt){var Rt,wr,Yt=[ke,Ke];if(Lt){for(;it=it[De];)if((it.nodeType===1||ye)&&ae(it,Mt,Lt))return!0}else for(;it=it[De];)if(it.nodeType===1||ye)if(wr=it[Xe]||(it[Xe]={}),ne&&O(it,ne))it=it[De]||it;else{if((Rt=wr[_e])&&Rt[0]===ke&&Rt[1]===Ke)return Yt[2]=Rt[2];if(wr[_e]=Yt,Yt[2]=ae(it,Mt,Lt))return!0}return!1}}function kh(ae){return ae.length>1?function(Se,Re,De){for(var ne=ae.length;ne--;)if(!ae[ne](Se,Re,De))return!1;return!0}:ae[0]}function e0(ae,Se,Re){for(var De=0,ne=Se.length;De<ne;De++)on(ae,Se[De],Re);return Re}function tf(ae,Se,Re,De,ne){for(var _e,ye=[],Ke=0,it=ae.length,Mt=Se!=null;Ke<it;Ke++)(_e=ae[Ke])&&(!Re||Re(_e,De,ne))&&(ye.push(_e),Mt&&Se.push(Ke));return ye}function Fa(ae,Se,Re,De,ne,_e){return De&&!De[Xe]&&(De=Fa(De)),ne&&!ne[Xe]&&(ne=Fa(ne,_e)),Hs(function(ye,Ke,it,Mt){var Lt,Rt,wr,Yt,Pr=[],Ai=[],Mi=Ke.length,Ti=ye||e0(Se||"*",it.nodeType?[it]:it,[]),ls=ae&&(ye||!Se)?tf(Ti,Pr,ae,it,Mt):Ti;if(Re?(Yt=ne||(ye?ae:Mi||De)?[]:Ke,Re(ls,Yt,it,Mt)):Yt=ls,De)for(Lt=tf(Yt,Ai),De(Lt,[],it,Mt),Rt=Lt.length;Rt--;)(wr=Lt[Rt])&&(Yt[Ai[Rt]]=!(ls[Ai[Rt]]=wr));if(ye){if(ne||ae){if(ne){for(Lt=[],Rt=Yt.length;Rt--;)(wr=Yt[Rt])&&Lt.push(ls[Rt]=wr);ne(null,Yt=[],Lt,Mt)}for(Rt=Yt.length;Rt--;)(wr=Yt[Rt])&&(Lt=ne?u.call(ye,wr):Pr[Rt])>-1&&(ye[Lt]=!(Ke[Lt]=wr))}}else Yt=tf(Yt===Ke?Yt.splice(Mi,Yt.length):Yt),ne?ne(null,Ke,Yt,Mt):G.apply(Ke,Yt)})}function cs(ae){for(var Se,Re,De,ne=ae.length,_e=S.relative[ae[0].type],ye=_e||S.relative[" "],Ke=_e?1:0,it=vu(function(Rt){return Rt===Se},ye,!0),Mt=vu(function(Rt){return u.call(Se,Rt)>-1},ye,!0),Lt=[function(Rt,wr,Yt){var Pr=!_e&&(Yt||wr!=R)||((Se=wr).nodeType?it(Rt,wr,Yt):Mt(Rt,wr,Yt));return Se=null,Pr}];Ke<ne;Ke++)if(Re=S.relative[ae[Ke].type])Lt=[vu(kh(Lt),Re)];else{if(Re=S.filter[ae[Ke].type].apply(null,ae[Ke].matches),Re[Xe]){for(De=++Ke;De<ne&&!S.relative[ae[De].type];De++);return Fa(Ke>1&&kh(Lt),Ke>1&&Ws(ae.slice(0,Ke-1).concat({value:ae[Ke-2].type===" "?"*":""})).replace(J,"$1"),Re,Ke<De&&cs(ae.slice(Ke,De)),De<ne&&cs(ae=ae.slice(De)),De<ne&&Ws(ae))}Lt.push(Re)}return kh(Lt)}function Lp(ae,Se){var Re=Se.length>0,De=ae.length>0,ne=function(_e,ye,Ke,it,Mt){var Lt,Rt,wr,Yt=0,Pr="0",Ai=_e&&[],Mi=[],Ti=R,ls=_e||De&&S.find.TAG("*",Mt),ta=ke+=Ti==null?1:Math.random()||.1,fr=ls.length;for(Mt&&(R=ye==X||ye||Mt);Pr!==fr&&(Lt=ls[Pr])!=null;Pr++){if(De&&Lt){for(Rt=0,!ye&&Lt.ownerDocument!=X&&(Da(Lt),Ke=!ue);wr=ae[Rt++];)if(wr(Lt,ye||X,Ke)){G.call(it,Lt);break}Mt&&(ke=ta)}Re&&((Lt=!wr&&Lt)&&Yt--,_e&&Ai.push(Lt))}if(Yt+=Pr,Re&&Pr!==Yt){for(Rt=0;wr=Se[Rt++];)wr(Ai,Mi,ye,Ke);if(_e){if(Yt>0)for(;Pr--;)Ai[Pr]||Mi[Pr]||(Mi[Pr]=k.call(it));Mi=tf(Mi)}G.apply(it,Mi),Mt&&!_e&&Mi.length>0&&Yt+Se.length>1&&d.uniqueSort(it)}return Mt&&(ke=ta,R=Ti),Ai};return Re?Hs(ne):ne}function Mh(ae,Se){var Re,De=[],ne=[],_e=hr[ae+" "];if(!_e){for(Se||(Se=Zu(ae)),Re=Se.length;Re--;)_e=cs(Se[Re]),_e[Xe]?De.push(_e):ne.push(_e);_e=hr(ae,Lp(ne,De)),_e.selector=ae}return _e}function Np(ae,Se,Re,De){var ne,_e,ye,Ke,it,Mt=typeof ae=="function"&&ae,Lt=!De&&Zu(ae=Mt.selector||ae);if(Re=Re||[],Lt.length===1){if(_e=Lt[0]=Lt[0].slice(0),_e.length>2&&(ye=_e[0]).type==="ID"&&Se.nodeType===9&&ue&&S.relative[_e[1].type]){if(Se=(S.find.ID(ye.matches[0].replace(ea,mo),Se)||[])[0],Se)Mt&&(Se=Se.parentNode);else return Re;ae=ae.slice(_e.shift().value.length)}for(ne=Ss.needsContext.test(ae)?0:_e.length;ne--&&(ye=_e[ne],!S.relative[Ke=ye.type]);)if((it=S.find[Ke])&&(De=it(ye.matches[0].replace(ea,mo),$c.test(_e[0].type)&&Rh(Se.parentNode)||Se))){if(_e.splice(ne,1),ae=De.length&&Ws(_e),!ae)return G.apply(Re,De),Re;break}}return(Mt||Mh(ae,Lt))(De,Se,!ue,Re,!Se||$c.test(ae)&&Rh(Se.parentNode)||Se),Re}m.sortStable=Xe.split("").sort(Wn).join("")===Xe,Da(),m.sortDetached=Ju(function(ae){return ae.compareDocumentPosition(X.createElement("fieldset"))&1}),d.find=on,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,on.compile=Mh,on.select=Np,on.setDocument=Da,on.tokenize=Zu,on.escape=d.escapeSelector,on.getText=d.text,on.isXML=d.isXMLDoc,on.selectors=d.expr,on.support=d.support,on.uniqueSort=d.uniqueSort})();var U=function(g,S,R){for(var L=[],V=R!==void 0;(g=g[S])&&g.nodeType!==9;)if(g.nodeType===1){if(V&&d(g).is(R))break;L.push(g)}return L},ie=function(g,S){for(var R=[];g;g=g.nextSibling)g.nodeType===1&&g!==S&&R.push(g);return R},se=d.expr.match.needsContext,xe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function me(g,S,R){return b(S)?d.grep(g,function(L,V){return!!S.call(L,V,L)!==R}):S.nodeType?d.grep(g,function(L){return L===S!==R}):typeof S!="string"?d.grep(g,function(L){return u.call(S,L)>-1!==R}):d.filter(S,g,R)}d.filter=function(g,S,R){var L=S[0];return R&&(g=":not("+g+")"),S.length===1&&L.nodeType===1?d.find.matchesSelector(L,g)?[L]:[]:d.find.matches(g,d.grep(S,function(V){return V.nodeType===1}))},d.fn.extend({find:function(g){var S,R,L=this.length,V=this;if(typeof g!="string")return this.pushStack(d(g).filter(function(){for(S=0;S<L;S++)if(d.contains(V[S],this))return!0}));for(R=this.pushStack([]),S=0;S<L;S++)d.find(g,V[S],R);return L>1?d.uniqueSort(R):R},filter:function(g){return this.pushStack(me(this,g||[],!1))},not:function(g){return this.pushStack(me(this,g||[],!0))},is:function(g){return!!me(this,typeof g=="string"&&se.test(g)?d(g):g||[],!1).length}});var ee,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,re=d.fn.init=function(g,S,R){var L,V;if(!g)return this;if(R=R||ee,typeof g=="string")if(g[0]==="<"&&g[g.length-1]===">"&&g.length>=3?L=[null,g,null]:L=ce.exec(g),L&&(L[1]||!S))if(L[1]){if(S=S instanceof d?S[0]:S,d.merge(this,d.parseHTML(L[1],S&&S.nodeType?S.ownerDocument||S:w,!0)),xe.test(L[1])&&d.isPlainObject(S))for(L in S)b(this[L])?this[L](S[L]):this.attr(L,S[L]);return this}else return V=w.getElementById(L[2]),V&&(this[0]=V,this.length=1),this;else return!S||S.jquery?(S||R).find(g):this.constructor(S).find(g);else{if(g.nodeType)return this[0]=g,this.length=1,this;if(b(g))return R.ready!==void 0?R.ready(g):g(d)}return d.makeArray(g,this)};re.prototype=d.fn,ee=d(w);var te=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(g){var S=d(g,this),R=S.length;return this.filter(function(){for(var L=0;L<R;L++)if(d.contains(this,S[L]))return!0})},closest:function(g,S){var R,L=0,V=this.length,G=[],X=typeof g!="string"&&d(g);if(!se.test(g)){for(;L<V;L++)for(R=this[L];R&&R!==S;R=R.parentNode)if(R.nodeType<11&&(X?X.index(R)>-1:R.nodeType===1&&d.find.matchesSelector(R,g))){G.push(R);break}}return this.pushStack(G.length>1?d.uniqueSort(G):G)},index:function(g){return g?typeof g=="string"?u.call(d(g),this[0]):u.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,S){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(g,S))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function Me(g,S){for(;(g=g[S])&&g.nodeType!==1;);return g}d.each({parent:function(g){var S=g.parentNode;return S&&S.nodeType!==11?S:null},parents:function(g){return U(g,"parentNode")},parentsUntil:function(g,S,R){return U(g,"parentNode",R)},next:function(g){return Me(g,"nextSibling")},prev:function(g){return Me(g,"previousSibling")},nextAll:function(g){return U(g,"nextSibling")},prevAll:function(g){return U(g,"previousSibling")},nextUntil:function(g,S,R){return U(g,"nextSibling",R)},prevUntil:function(g,S,R){return U(g,"previousSibling",R)},siblings:function(g){return ie((g.parentNode||{}).firstChild,g)},children:function(g){return ie(g.firstChild)},contents:function(g){return g.contentDocument!=null&&i(g.contentDocument)?g.contentDocument:(O(g,"template")&&(g=g.content||g),d.merge([],g.childNodes))}},function(g,S){d.fn[g]=function(R,L){var V=d.map(this,S,R);return g.slice(-5)!=="Until"&&(L=R),L&&typeof L=="string"&&(V=d.filter(L,V)),this.length>1&&(le[g]||d.uniqueSort(V),te.test(g)&&V.reverse()),this.pushStack(V)}});var Ge=/[^\x20\t\r\n\f]+/g;function Ie(g){var S={};return d.each(g.match(Ge)||[],function(R,L){S[L]=!0}),S}d.Callbacks=function(g){g=typeof g=="string"?Ie(g):d.extend({},g);var S,R,L,V,G=[],X=[],ve=-1,ue=function(){for(V=V||g.once,L=S=!0;X.length;ve=-1)for(R=X.shift();++ve<G.length;)G[ve].apply(R[0],R[1])===!1&&g.stopOnFalse&&(ve=G.length,R=!1);g.memory||(R=!1),S=!1,V&&(R?G=[]:G="")},Ae={add:function(){return G&&(R&&!S&&(ve=G.length-1,X.push(R)),function $e(Xe){d.each(Xe,function(ke,pt){b(pt)?(!g.unique||!Ae.has(pt))&&G.push(pt):pt&&pt.length&&A(pt)!=="string"&&$e(pt)})}(arguments),R&&!S&&ue()),this},remove:function(){return d.each(arguments,function($e,Xe){for(var ke;(ke=d.inArray(Xe,G,ke))>-1;)G.splice(ke,1),ke<=ve&&ve--}),this},has:function($e){return $e?d.inArray($e,G)>-1:G.length>0},empty:function(){return G&&(G=[]),this},disable:function(){return V=X=[],G=R="",this},disabled:function(){return!G},lock:function(){return V=X=[],!R&&!S&&(G=R=""),this},locked:function(){return!!V},fireWith:function($e,Xe){return V||(Xe=Xe||[],Xe=[$e,Xe.slice?Xe.slice():Xe],X.push(Xe),S||ue()),this},fire:function(){return Ae.fireWith(this,arguments),this},fired:function(){return!!L}};return Ae};function Ue(g){return g}function We(g){throw g}function q(g,S,R,L){var V;try{g&&b(V=g.promise)?V.call(g).done(S).fail(R):g&&b(V=g.then)?V.call(g,S,R):S.apply(void 0,[g].slice(L))}catch(G){R.apply(void 0,[G])}}d.extend({Deferred:function(g){var S=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],R="pending",L={state:function(){return R},always:function(){return V.done(arguments).fail(arguments),this},catch:function(G){return L.then(null,G)},pipe:function(){var G=arguments;return d.Deferred(function(X){d.each(S,function(ve,ue){var Ae=b(G[ue[4]])&&G[ue[4]];V[ue[1]](function(){var $e=Ae&&Ae.apply(this,arguments);$e&&b($e.promise)?$e.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[ue[0]+"With"](this,Ae?[$e]:arguments)})}),G=null}).promise()},then:function(G,X,ve){var ue=0;function Ae($e,Xe,ke,pt){return function(){var kt=this,vr=arguments,hr=function(){var Wn,vo;if(!($e<ue)){if(Wn=ke.apply(kt,vr),Wn===Xe.promise())throw new TypeError("Thenable self-resolution");vo=Wn&&(typeof Wn=="object"||typeof Wn=="function")&&Wn.then,b(vo)?pt?vo.call(Wn,Ae(ue,Xe,Ue,pt),Ae(ue,Xe,We,pt)):(ue++,vo.call(Wn,Ae(ue,Xe,Ue,pt),Ae(ue,Xe,We,pt),Ae(ue,Xe,Ue,Xe.notifyWith))):(ke!==Ue&&(kt=void 0,vr=[Wn]),(pt||Xe.resolveWith)(kt,vr))}},Ei=pt?hr:function(){try{hr()}catch(Wn){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Wn,Ei.error),$e+1>=ue&&(ke!==We&&(kt=void 0,vr=[Wn]),Xe.rejectWith(kt,vr))}};$e?Ei():(d.Deferred.getErrorHook?Ei.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(Ei.error=d.Deferred.getStackHook()),t.setTimeout(Ei))}}return d.Deferred(function($e){S[0][3].add(Ae(0,$e,b(ve)?ve:Ue,$e.notifyWith)),S[1][3].add(Ae(0,$e,b(G)?G:Ue)),S[2][3].add(Ae(0,$e,b(X)?X:We))}).promise()},promise:function(G){return G!=null?d.extend(G,L):L}},V={};return d.each(S,function(G,X){var ve=X[2],ue=X[5];L[X[1]]=ve.add,ue&&ve.add(function(){R=ue},S[3-G][2].disable,S[3-G][3].disable,S[0][2].lock,S[0][3].lock),ve.add(X[3].fire),V[X[0]]=function(){return V[X[0]+"With"](this===V?void 0:this,arguments),this},V[X[0]+"With"]=ve.fireWith}),L.promise(V),g&&g.call(V,V),V},when:function(g){var S=arguments.length,R=S,L=Array(R),V=s.call(arguments),G=d.Deferred(),X=function(ve){return function(ue){L[ve]=this,V[ve]=arguments.length>1?s.call(arguments):ue,--S||G.resolveWith(L,V)}};if(S<=1&&(q(g,G.done(X(R)).resolve,G.reject,!S),G.state()==="pending"||b(V[R]&&V[R].then)))return G.then();for(;R--;)q(V[R],X(R),G.reject);return G.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(g,S){t.console&&t.console.warn&&g&&$.test(g.name)&&t.console.warn("jQuery.Deferred exception: "+g.message,g.stack,S)},d.readyException=function(g){t.setTimeout(function(){throw g})};var Y=d.Deferred();d.fn.ready=function(g){return Y.then(g).catch(function(S){d.readyException(S)}),this},d.extend({isReady:!1,readyWait:1,ready:function(g){(g===!0?--d.readyWait:d.isReady)||(d.isReady=!0,!(g!==!0&&--d.readyWait>0)&&Y.resolveWith(w,[d]))}}),d.ready.then=Y.then;function K(){w.removeEventListener("DOMContentLoaded",K),t.removeEventListener("load",K),d.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?t.setTimeout(d.ready):(w.addEventListener("DOMContentLoaded",K),t.addEventListener("load",K));var we=function(g,S,R,L,V,G,X){var ve=0,ue=g.length,Ae=R==null;if(A(R)==="object"){V=!0;for(ve in R)we(g,S,ve,R[ve],!0,G,X)}else if(L!==void 0&&(V=!0,b(L)||(X=!0),Ae&&(X?(S.call(g,L),S=null):(Ae=S,S=function($e,Xe,ke){return Ae.call(d($e),ke)})),S))for(;ve<ue;ve++)S(g[ve],R,X?L:L.call(g[ve],ve,S(g[ve],R)));return V?g:Ae?S.call(g):ue?S(g[0],R):G},he=/^-ms-/,Te=/-([a-z])/g;function Ce(g,S){return S.toUpperCase()}function ze(g){return g.replace(he,"ms-").replace(Te,Ce)}var Le=function(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType};function Oe(){this.expando=d.expando+Oe.uid++}Oe.uid=1,Oe.prototype={cache:function(g){var S=g[this.expando];return S||(S={},Le(g)&&(g.nodeType?g[this.expando]=S:Object.defineProperty(g,this.expando,{value:S,configurable:!0}))),S},set:function(g,S,R){var L,V=this.cache(g);if(typeof S=="string")V[ze(S)]=R;else for(L in S)V[ze(L)]=S[L];return V},get:function(g,S){return S===void 0?this.cache(g):g[this.expando]&&g[this.expando][ze(S)]},access:function(g,S,R){return S===void 0||S&&typeof S=="string"&&R===void 0?this.get(g,S):(this.set(g,S,R),R!==void 0?R:S)},remove:function(g,S){var R,L=g[this.expando];if(L!==void 0){if(S!==void 0)for(Array.isArray(S)?S=S.map(ze):(S=ze(S),S=S in L?[S]:S.match(Ge)||[]),R=S.length;R--;)delete L[S[R]];(S===void 0||d.isEmptyObject(L))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var S=g[this.expando];return S!==void 0&&!d.isEmptyObject(S)}};var Ee=new Oe,Je=new Oe,dt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/[A-Z]/g;function vt(g){return g==="true"?!0:g==="false"?!1:g==="null"?null:g===+g+""?+g:dt.test(g)?JSON.parse(g):g}function ut(g,S,R){var L;if(R===void 0&&g.nodeType===1)if(L="data-"+S.replace(Et,"-$&").toLowerCase(),R=g.getAttribute(L),typeof R=="string"){try{R=vt(R)}catch{}Je.set(g,S,R)}else R=void 0;return R}d.extend({hasData:function(g){return Je.hasData(g)||Ee.hasData(g)},data:function(g,S,R){return Je.access(g,S,R)},removeData:function(g,S){Je.remove(g,S)},_data:function(g,S,R){return Ee.access(g,S,R)},_removeData:function(g,S){Ee.remove(g,S)}}),d.fn.extend({data:function(g,S){var R,L,V,G=this[0],X=G&&G.attributes;if(g===void 0){if(this.length&&(V=Je.get(G),G.nodeType===1&&!Ee.get(G,"hasDataAttrs"))){for(R=X.length;R--;)X[R]&&(L=X[R].name,L.indexOf("data-")===0&&(L=ze(L.slice(5)),ut(G,L,V[L])));Ee.set(G,"hasDataAttrs",!0)}return V}return typeof g=="object"?this.each(function(){Je.set(this,g)}):we(this,function(ve){var ue;if(G&&ve===void 0)return ue=Je.get(G,g),ue!==void 0||(ue=ut(G,g),ue!==void 0)?ue:void 0;this.each(function(){Je.set(this,g,ve)})},null,S,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){Je.remove(this,g)})}}),d.extend({queue:function(g,S,R){var L;if(g)return S=(S||"fx")+"queue",L=Ee.get(g,S),R&&(!L||Array.isArray(R)?L=Ee.access(g,S,d.makeArray(R)):L.push(R)),L||[]},dequeue:function(g,S){S=S||"fx";var R=d.queue(g,S),L=R.length,V=R.shift(),G=d._queueHooks(g,S),X=function(){d.dequeue(g,S)};V==="inprogress"&&(V=R.shift(),L--),V&&(S==="fx"&&R.unshift("inprogress"),delete G.stop,V.call(g,X,G)),!L&&G&&G.empty.fire()},_queueHooks:function(g,S){var R=S+"queueHooks";return Ee.get(g,R)||Ee.access(g,R,{empty:d.Callbacks("once memory").add(function(){Ee.remove(g,[S+"queue",R])})})}}),d.fn.extend({queue:function(g,S){var R=2;return typeof g!="string"&&(S=g,g="fx",R--),arguments.length<R?d.queue(this[0],g):S===void 0?this:this.each(function(){var L=d.queue(this,g,S);d._queueHooks(this,g),g==="fx"&&L[0]!=="inprogress"&&d.dequeue(this,g)})},dequeue:function(g){return this.each(function(){d.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,S){var R,L=1,V=d.Deferred(),G=this,X=this.length,ve=function(){--L||V.resolveWith(G,[G])};for(typeof g!="string"&&(S=g,g=void 0),g=g||"fx";X--;)R=Ee.get(G[X],g+"queueHooks"),R&&R.empty&&(L++,R.empty.add(ve));return ve(),V.promise(S)}});var Jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pr=new RegExp("^(?:([+-])=|)("+Jt+")([a-z%]*)$","i"),sr=["Top","Right","Bottom","Left"],yr=w.documentElement,Zr=function(g){return d.contains(g.ownerDocument,g)},Nr={composed:!0};yr.getRootNode&&(Zr=function(g){return d.contains(g.ownerDocument,g)||g.getRootNode(Nr)===g.ownerDocument});var Pn=function(g,S){return g=S||g,g.style.display==="none"||g.style.display===""&&Zr(g)&&d.css(g,"display")==="none"};function lr(g,S,R,L){var V,G,X=20,ve=L?function(){return L.cur()}:function(){return d.css(g,S,"")},ue=ve(),Ae=R&&R[3]||(d.cssNumber[S]?"":"px"),$e=g.nodeType&&(d.cssNumber[S]||Ae!=="px"&&+ue)&&pr.exec(d.css(g,S));if($e&&$e[3]!==Ae){for(ue=ue/2,Ae=Ae||$e[3],$e=+ue||1;X--;)d.style(g,S,$e+Ae),(1-G)*(1-(G=ve()/ue||.5))<=0&&(X=0),$e=$e/G;$e=$e*2,d.style(g,S,$e+Ae),R=R||[]}return R&&($e=+$e||+ue||0,V=R[1]?$e+(R[1]+1)*R[2]:+R[2],L&&(L.unit=Ae,L.start=$e,L.end=V)),V}var qr={};function In(g){var S,R=g.ownerDocument,L=g.nodeName,V=qr[L];return V||(S=R.body.appendChild(R.createElement(L)),V=d.css(S,"display"),S.parentNode.removeChild(S),V==="none"&&(V="block"),qr[L]=V,V)}function Rn(g,S){for(var R,L,V=[],G=0,X=g.length;G<X;G++)L=g[G],L.style&&(R=L.style.display,S?(R==="none"&&(V[G]=Ee.get(L,"display")||null,V[G]||(L.style.display="")),L.style.display===""&&Pn(L)&&(V[G]=In(L))):R!=="none"&&(V[G]="none",Ee.set(L,"display",R)));for(G=0;G<X;G++)V[G]!=null&&(g[G].style.display=V[G]);return g}d.fn.extend({show:function(){return Rn(this,!0)},hide:function(){return Rn(this)},toggle:function(g){return typeof g=="boolean"?g?this.show():this.hide():this.each(function(){Pn(this)?d(this).show():d(this).hide()})}});var Cn=/^(?:checkbox|radio)$/i,ii=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,di=/^$|^module$|\/(?:java|ecma)script/i;(function(){var g=w.createDocumentFragment(),S=g.appendChild(w.createElement("div")),R=w.createElement("input");R.setAttribute("type","radio"),R.setAttribute("checked","checked"),R.setAttribute("name","t"),S.appendChild(R),m.checkClone=S.cloneNode(!0).cloneNode(!0).lastChild.checked,S.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!S.cloneNode(!0).lastChild.defaultValue,S.innerHTML="<option></option>",m.option=!!S.lastChild})();var Ht={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ht.tbody=Ht.tfoot=Ht.colgroup=Ht.caption=Ht.thead,Ht.th=Ht.td,m.option||(Ht.optgroup=Ht.option=[1,"<select multiple='multiple'>","</select>"]);function jt(g,S){var R;return typeof g.getElementsByTagName<"u"?R=g.getElementsByTagName(S||"*"):typeof g.querySelectorAll<"u"?R=g.querySelectorAll(S||"*"):R=[],S===void 0||S&&O(g,S)?d.merge([g],R):R}function Yr(g,S){for(var R=0,L=g.length;R<L;R++)Ee.set(g[R],"globalEval",!S||Ee.get(S[R],"globalEval"))}var Kn=/<|&#?\w+;/;function Bn(g,S,R,L,V){for(var G,X,ve,ue,Ae,$e,Xe=S.createDocumentFragment(),ke=[],pt=0,kt=g.length;pt<kt;pt++)if(G=g[pt],G||G===0)if(A(G)==="object")d.merge(ke,G.nodeType?[G]:G);else if(!Kn.test(G))ke.push(S.createTextNode(G));else{for(X=X||Xe.appendChild(S.createElement("div")),ve=(ii.exec(G)||["",""])[1].toLowerCase(),ue=Ht[ve]||Ht._default,X.innerHTML=ue[1]+d.htmlPrefilter(G)+ue[2],$e=ue[0];$e--;)X=X.lastChild;d.merge(ke,X.childNodes),X=Xe.firstChild,X.textContent=""}for(Xe.textContent="",pt=0;G=ke[pt++];){if(L&&d.inArray(G,L)>-1){V&&V.push(G);continue}if(Ae=Zr(G),X=jt(Xe.appendChild(G),"script"),Ae&&Yr(X),R)for($e=0;G=X[$e++];)di.test(G.type||"")&&R.push(G)}return Xe}var Un=/^([^.]*)(?:\.(.+)|)/;function cn(){return!0}function xi(){return!1}function hn(g,S,R,L,V,G){var X,ve;if(typeof S=="object"){typeof R!="string"&&(L=L||R,R=void 0);for(ve in S)hn(g,ve,R,L,S[ve],G);return g}if(L==null&&V==null?(V=R,L=R=void 0):V==null&&(typeof R=="string"?(V=L,L=void 0):(V=L,L=R,R=void 0)),V===!1)V=xi;else if(!V)return g;return G===1&&(X=V,V=function(ue){return d().off(ue),X.apply(this,arguments)},V.guid=X.guid||(X.guid=d.guid++)),g.each(function(){d.event.add(this,S,V,L,R)})}d.event={global:{},add:function(g,S,R,L,V){var G,X,ve,ue,Ae,$e,Xe,ke,pt,kt,vr,hr=Ee.get(g);if(Le(g))for(R.handler&&(G=R,R=G.handler,V=G.selector),V&&d.find.matchesSelector(yr,V),R.guid||(R.guid=d.guid++),(ue=hr.events)||(ue=hr.events=Object.create(null)),(X=hr.handle)||(X=hr.handle=function(Ei){return typeof d<"u"&&d.event.triggered!==Ei.type?d.event.dispatch.apply(g,arguments):void 0}),S=(S||"").match(Ge)||[""],Ae=S.length;Ae--;)ve=Un.exec(S[Ae])||[],pt=vr=ve[1],kt=(ve[2]||"").split(".").sort(),pt&&(Xe=d.event.special[pt]||{},pt=(V?Xe.delegateType:Xe.bindType)||pt,Xe=d.event.special[pt]||{},$e=d.extend({type:pt,origType:vr,data:L,handler:R,guid:R.guid,selector:V,needsContext:V&&d.expr.match.needsContext.test(V),namespace:kt.join(".")},G),(ke=ue[pt])||(ke=ue[pt]=[],ke.delegateCount=0,(!Xe.setup||Xe.setup.call(g,L,kt,X)===!1)&&g.addEventListener&&g.addEventListener(pt,X)),Xe.add&&(Xe.add.call(g,$e),$e.handler.guid||($e.handler.guid=R.guid)),V?ke.splice(ke.delegateCount++,0,$e):ke.push($e),d.event.global[pt]=!0)},remove:function(g,S,R,L,V){var G,X,ve,ue,Ae,$e,Xe,ke,pt,kt,vr,hr=Ee.hasData(g)&&Ee.get(g);if(!(!hr||!(ue=hr.events))){for(S=(S||"").match(Ge)||[""],Ae=S.length;Ae--;){if(ve=Un.exec(S[Ae])||[],pt=vr=ve[1],kt=(ve[2]||"").split(".").sort(),!pt){for(pt in ue)d.event.remove(g,pt+S[Ae],R,L,!0);continue}for(Xe=d.event.special[pt]||{},pt=(L?Xe.delegateType:Xe.bindType)||pt,ke=ue[pt]||[],ve=ve[2]&&new RegExp("(^|\\.)"+kt.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=G=ke.length;G--;)$e=ke[G],(V||vr===$e.origType)&&(!R||R.guid===$e.guid)&&(!ve||ve.test($e.namespace))&&(!L||L===$e.selector||L==="**"&&$e.selector)&&(ke.splice(G,1),$e.selector&&ke.delegateCount--,Xe.remove&&Xe.remove.call(g,$e));X&&!ke.length&&((!Xe.teardown||Xe.teardown.call(g,kt,hr.handle)===!1)&&d.removeEvent(g,pt,hr.handle),delete ue[pt])}d.isEmptyObject(ue)&&Ee.remove(g,"handle events")}},dispatch:function(g){var S,R,L,V,G,X,ve=new Array(arguments.length),ue=d.event.fix(g),Ae=(Ee.get(this,"events")||Object.create(null))[ue.type]||[],$e=d.event.special[ue.type]||{};for(ve[0]=ue,S=1;S<arguments.length;S++)ve[S]=arguments[S];if(ue.delegateTarget=this,!($e.preDispatch&&$e.preDispatch.call(this,ue)===!1)){for(X=d.event.handlers.call(this,ue,Ae),S=0;(V=X[S++])&&!ue.isPropagationStopped();)for(ue.currentTarget=V.elem,R=0;(G=V.handlers[R++])&&!ue.isImmediatePropagationStopped();)(!ue.rnamespace||G.namespace===!1||ue.rnamespace.test(G.namespace))&&(ue.handleObj=G,ue.data=G.data,L=((d.event.special[G.origType]||{}).handle||G.handler).apply(V.elem,ve),L!==void 0&&(ue.result=L)===!1&&(ue.preventDefault(),ue.stopPropagation()));return $e.postDispatch&&$e.postDispatch.call(this,ue),ue.result}},handlers:function(g,S){var R,L,V,G,X,ve=[],ue=S.delegateCount,Ae=g.target;if(ue&&Ae.nodeType&&!(g.type==="click"&&g.button>=1)){for(;Ae!==this;Ae=Ae.parentNode||this)if(Ae.nodeType===1&&!(g.type==="click"&&Ae.disabled===!0)){for(G=[],X={},R=0;R<ue;R++)L=S[R],V=L.selector+" ",X[V]===void 0&&(X[V]=L.needsContext?d(V,this).index(Ae)>-1:d.find(V,this,null,[Ae]).length),X[V]&&G.push(L);G.length&&ve.push({elem:Ae,handlers:G})}}return Ae=this,ue<S.length&&ve.push({elem:Ae,handlers:S.slice(ue)}),ve},addProp:function(g,S){Object.defineProperty(d.Event.prototype,g,{enumerable:!0,configurable:!0,get:b(S)?function(){if(this.originalEvent)return S(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(R){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:R})}})},fix:function(g){return g[d.expando]?g:new d.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var S=this||g;return Cn.test(S.type)&&S.click&&O(S,"input")&&Jn(S,"click",!0),!1},trigger:function(g){var S=this||g;return Cn.test(S.type)&&S.click&&O(S,"input")&&Jn(S,"click"),!0},_default:function(g){var S=g.target;return Cn.test(S.type)&&S.click&&O(S,"input")&&Ee.get(S,"click")||O(S,"a")}},beforeunload:{postDispatch:function(g){g.result!==void 0&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}};function Jn(g,S,R){if(!R){Ee.get(g,S)===void 0&&d.event.add(g,S,cn);return}Ee.set(g,S,!1),d.event.add(g,S,{namespace:!1,handler:function(L){var V,G=Ee.get(this,S);if(L.isTrigger&1&&this[S]){if(G)(d.event.special[S]||{}).delegateType&&L.stopPropagation();else if(G=s.call(arguments),Ee.set(this,S,G),this[S](),V=Ee.get(this,S),Ee.set(this,S,!1),G!==V)return L.stopImmediatePropagation(),L.preventDefault(),V}else G&&(Ee.set(this,S,d.event.trigger(G[0],G.slice(1),this)),L.stopPropagation(),L.isImmediatePropagationStopped=cn)}})}d.removeEvent=function(g,S,R){g.removeEventListener&&g.removeEventListener(S,R)},d.Event=function(g,S){if(!(this instanceof d.Event))return new d.Event(g,S);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||g.defaultPrevented===void 0&&g.returnValue===!1?cn:xi,this.target=g.target&&g.target.nodeType===3?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,S&&d.extend(this,S),this.timeStamp=g&&g.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:xi,isPropagationStopped:xi,isImmediatePropagationStopped:xi,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=cn,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=cn,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=cn,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(g,S){function R(L){if(w.documentMode){var V=Ee.get(this,"handle"),G=d.event.fix(L);G.type=L.type==="focusin"?"focus":"blur",G.isSimulated=!0,V(L),G.target===G.currentTarget&&V(G)}else d.event.simulate(S,L.target,d.event.fix(L))}d.event.special[g]={setup:function(){var L;if(Jn(this,g,!0),w.documentMode)L=Ee.get(this,S),L||this.addEventListener(S,R),Ee.set(this,S,(L||0)+1);else return!1},trigger:function(){return Jn(this,g),!0},teardown:function(){var L;if(w.documentMode)L=Ee.get(this,S)-1,L?Ee.set(this,S,L):(this.removeEventListener(S,R),Ee.remove(this,S));else return!1},_default:function(L){return Ee.get(L.target,g)},delegateType:S},d.event.special[S]={setup:function(){var L=this.ownerDocument||this.document||this,V=w.documentMode?this:L,G=Ee.get(V,S);G||(w.documentMode?this.addEventListener(S,R):L.addEventListener(g,R,!0)),Ee.set(V,S,(G||0)+1)},teardown:function(){var L=this.ownerDocument||this.document||this,V=w.documentMode?this:L,G=Ee.get(V,S)-1;G?Ee.set(V,S,G):(w.documentMode?this.removeEventListener(S,R):L.removeEventListener(g,R,!0),Ee.remove(V,S))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,S){d.event.special[g]={delegateType:S,bindType:S,handle:function(R){var L,V=this,G=R.relatedTarget,X=R.handleObj;return(!G||G!==V&&!d.contains(V,G))&&(R.type=X.origType,L=X.handler.apply(this,arguments),R.type=S),L}}}),d.fn.extend({on:function(g,S,R,L){return hn(this,g,S,R,L)},one:function(g,S,R,L){return hn(this,g,S,R,L,1)},off:function(g,S,R){var L,V;if(g&&g.preventDefault&&g.handleObj)return L=g.handleObj,d(g.delegateTarget).off(L.namespace?L.origType+"."+L.namespace:L.origType,L.selector,L.handler),this;if(typeof g=="object"){for(V in g)this.off(V,S,g[V]);return this}return(S===!1||typeof S=="function")&&(R=S,S=void 0),R===!1&&(R=xi),this.each(function(){d.event.remove(this,g,R,S)})}});var jn=/<script|<style|<link/i,pi=/checked\s*(?:[^=]|=\s*.checked.)/i,Dr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ht(g,S){return O(g,"table")&&O(S.nodeType!==11?S:S.firstChild,"tr")&&d(g).children("tbody")[0]||g}function Tt(g){return g.type=(g.getAttribute("type")!==null)+"/"+g.type,g}function Ft(g){return(g.type||"").slice(0,5)==="true/"?g.type=g.type.slice(5):g.removeAttribute("type"),g}function xt(g,S){var R,L,V,G,X,ve,ue;if(S.nodeType===1){if(Ee.hasData(g)&&(G=Ee.get(g),ue=G.events,ue)){Ee.remove(S,"handle events");for(V in ue)for(R=0,L=ue[V].length;R<L;R++)d.event.add(S,V,ue[V][R])}Je.hasData(g)&&(X=Je.access(g),ve=d.extend({},X),Je.set(S,ve))}}function at(g,S){var R=S.nodeName.toLowerCase();R==="input"&&Cn.test(g.type)?S.checked=g.checked:(R==="input"||R==="textarea")&&(S.defaultValue=g.defaultValue)}function Ze(g,S,R,L){S=o(S);var V,G,X,ve,ue,Ae,$e=0,Xe=g.length,ke=Xe-1,pt=S[0],kt=b(pt);if(kt||Xe>1&&typeof pt=="string"&&!m.checkClone&&pi.test(pt))return g.each(function(vr){var hr=g.eq(vr);kt&&(S[0]=pt.call(this,vr,hr.html())),Ze(hr,S,R,L)});if(Xe&&(V=Bn(S,g[0].ownerDocument,!1,g,L),G=V.firstChild,V.childNodes.length===1&&(V=G),G||L)){for(X=d.map(jt(V,"script"),Tt),ve=X.length;$e<Xe;$e++)ue=V,$e!==ke&&(ue=d.clone(ue,!0,!0),ve&&d.merge(X,jt(ue,"script"))),R.call(g[$e],ue,$e);if(ve)for(Ae=X[X.length-1].ownerDocument,d.map(X,Ft),$e=0;$e<ve;$e++)ue=X[$e],di.test(ue.type||"")&&!Ee.access(ue,"globalEval")&&d.contains(Ae,ue)&&(ue.src&&(ue.type||"").toLowerCase()!=="module"?d._evalUrl&&!ue.noModule&&d._evalUrl(ue.src,{nonce:ue.nonce||ue.getAttribute("nonce")},Ae):P(ue.textContent.replace(Dr,""),ue,Ae))}return g}function bt(g,S,R){for(var L,V=S?d.filter(S,g):g,G=0;(L=V[G])!=null;G++)!R&&L.nodeType===1&&d.cleanData(jt(L)),L.parentNode&&(R&&Zr(L)&&Yr(jt(L,"script")),L.parentNode.removeChild(L));return g}d.extend({htmlPrefilter:function(g){return g},clone:function(g,S,R){var L,V,G,X,ve=g.cloneNode(!0),ue=Zr(g);if(!m.noCloneChecked&&(g.nodeType===1||g.nodeType===11)&&!d.isXMLDoc(g))for(X=jt(ve),G=jt(g),L=0,V=G.length;L<V;L++)at(G[L],X[L]);if(S)if(R)for(G=G||jt(g),X=X||jt(ve),L=0,V=G.length;L<V;L++)xt(G[L],X[L]);else xt(g,ve);return X=jt(ve,"script"),X.length>0&&Yr(X,!ue&&jt(g,"script")),ve},cleanData:function(g){for(var S,R,L,V=d.event.special,G=0;(R=g[G])!==void 0;G++)if(Le(R)){if(S=R[Ee.expando]){if(S.events)for(L in S.events)V[L]?d.event.remove(R,L):d.removeEvent(R,L,S.handle);R[Ee.expando]=void 0}R[Je.expando]&&(R[Je.expando]=void 0)}}}),d.fn.extend({detach:function(g){return bt(this,g,!0)},remove:function(g){return bt(this,g)},text:function(g){return we(this,function(S){return S===void 0?d.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=S)})},null,g,arguments.length)},append:function(){return Ze(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var S=ht(this,g);S.appendChild(g)}})},prepend:function(){return Ze(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var S=ht(this,g);S.insertBefore(g,S.firstChild)}})},before:function(){return Ze(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return Ze(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,S=0;(g=this[S])!=null;S++)g.nodeType===1&&(d.cleanData(jt(g,!1)),g.textContent="");return this},clone:function(g,S){return g=g??!1,S=S??g,this.map(function(){return d.clone(this,g,S)})},html:function(g){return we(this,function(S){var R=this[0]||{},L=0,V=this.length;if(S===void 0&&R.nodeType===1)return R.innerHTML;if(typeof S=="string"&&!jn.test(S)&&!Ht[(ii.exec(S)||["",""])[1].toLowerCase()]){S=d.htmlPrefilter(S);try{for(;L<V;L++)R=this[L]||{},R.nodeType===1&&(d.cleanData(jt(R,!1)),R.innerHTML=S);R=0}catch{}}R&&this.empty().append(S)},null,g,arguments.length)},replaceWith:function(){var g=[];return Ze(this,arguments,function(S){var R=this.parentNode;d.inArray(this,g)<0&&(d.cleanData(jt(this)),R&&R.replaceChild(S,this))},g)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,S){d.fn[g]=function(R){for(var L,V=[],G=d(R),X=G.length-1,ve=0;ve<=X;ve++)L=ve===X?this:this.clone(!0),d(G[ve])[S](L),a.apply(V,L.get());return this.pushStack(V)}});var Dt=new RegExp("^("+Jt+")(?!px)[a-z%]+$","i"),Nt=/^--/,Fr=function(g){var S=g.ownerDocument.defaultView;return(!S||!S.opener)&&(S=t),S.getComputedStyle(g)},Zn=function(g,S,R){var L,V,G={};for(V in S)G[V]=g.style[V],g.style[V]=S[V];L=R.call(g);for(V in S)g.style[V]=G[V];return L},$t=new RegExp(sr.join("|"),"i");(function(){function g(){if(Ae){ue.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ae.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yr.appendChild(ue).appendChild(Ae);var $e=t.getComputedStyle(Ae);R=$e.top!=="1%",ve=S($e.marginLeft)===12,Ae.style.right="60%",G=S($e.right)===36,L=S($e.width)===36,Ae.style.position="absolute",V=S(Ae.offsetWidth/3)===12,yr.removeChild(ue),Ae=null}}function S($e){return Math.round(parseFloat($e))}var R,L,V,G,X,ve,ue=w.createElement("div"),Ae=w.createElement("div");Ae.style&&(Ae.style.backgroundClip="content-box",Ae.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=Ae.style.backgroundClip==="content-box",d.extend(m,{boxSizingReliable:function(){return g(),L},pixelBoxStyles:function(){return g(),G},pixelPosition:function(){return g(),R},reliableMarginLeft:function(){return g(),ve},scrollboxSize:function(){return g(),V},reliableTrDimensions:function(){var $e,Xe,ke,pt;return X==null&&($e=w.createElement("table"),Xe=w.createElement("tr"),ke=w.createElement("div"),$e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Xe.style.cssText="box-sizing:content-box;border:1px solid",Xe.style.height="1px",ke.style.height="9px",ke.style.display="block",yr.appendChild($e).appendChild(Xe).appendChild(ke),pt=t.getComputedStyle(Xe),X=parseInt(pt.height,10)+parseInt(pt.borderTopWidth,10)+parseInt(pt.borderBottomWidth,10)===Xe.offsetHeight,yr.removeChild($e)),X}}))})();function sn(g,S,R){var L,V,G,X,ve=Nt.test(S),ue=g.style;return R=R||Fr(g),R&&(X=R.getPropertyValue(S)||R[S],ve&&X&&(X=X.replace(J,"$1")||void 0),X===""&&!Zr(g)&&(X=d.style(g,S)),!m.pixelBoxStyles()&&Dt.test(X)&&$t.test(S)&&(L=ue.width,V=ue.minWidth,G=ue.maxWidth,ue.minWidth=ue.maxWidth=ue.width=X,X=R.width,ue.width=L,ue.minWidth=V,ue.maxWidth=G)),X!==void 0?X+"":X}function zn(g,S){return{get:function(){if(g()){delete this.get;return}return(this.get=S).apply(this,arguments)}}}var en=["Webkit","Moz","ms"],Br=w.createElement("div").style,or={};function vi(g){for(var S=g[0].toUpperCase()+g.slice(1),R=en.length;R--;)if(g=en[R]+S,g in Br)return g}function On(g){var S=d.cssProps[g]||or[g];return S||(g in Br?g:or[g]=vi(g)||g)}var rr=/^(none|table(?!-c[ea]).+)/,Si={position:"absolute",visibility:"hidden",display:"block"},Vi={letterSpacing:"0",fontWeight:"400"};function tt(g,S,R){var L=pr.exec(S);return L?Math.max(0,L[2]-(R||0))+(L[3]||"px"):S}function mt(g,S,R,L,V,G){var X=S==="width"?1:0,ve=0,ue=0,Ae=0;if(R===(L?"border":"content"))return 0;for(;X<4;X+=2)R==="margin"&&(Ae+=d.css(g,R+sr[X],!0,V)),L?(R==="content"&&(ue-=d.css(g,"padding"+sr[X],!0,V)),R!=="margin"&&(ue-=d.css(g,"border"+sr[X]+"Width",!0,V))):(ue+=d.css(g,"padding"+sr[X],!0,V),R!=="padding"?ue+=d.css(g,"border"+sr[X]+"Width",!0,V):ve+=d.css(g,"border"+sr[X]+"Width",!0,V));return!L&&G>=0&&(ue+=Math.max(0,Math.ceil(g["offset"+S[0].toUpperCase()+S.slice(1)]-G-ue-ve-.5))||0),ue+Ae}function It(g,S,R){var L=Fr(g),V=!m.boxSizingReliable()||R,G=V&&d.css(g,"boxSizing",!1,L)==="border-box",X=G,ve=sn(g,S,L),ue="offset"+S[0].toUpperCase()+S.slice(1);if(Dt.test(ve)){if(!R)return ve;ve="auto"}return(!m.boxSizingReliable()&&G||!m.reliableTrDimensions()&&O(g,"tr")||ve==="auto"||!parseFloat(ve)&&d.css(g,"display",!1,L)==="inline")&&g.getClientRects().length&&(G=d.css(g,"boxSizing",!1,L)==="border-box",X=ue in g,X&&(ve=g[ue])),ve=parseFloat(ve)||0,ve+mt(g,S,R||(G?"border":"content"),X,L,ve)+"px"}d.extend({cssHooks:{opacity:{get:function(g,S){if(S){var R=sn(g,"opacity");return R===""?"1":R}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(g,S,R,L){if(!(!g||g.nodeType===3||g.nodeType===8||!g.style)){var V,G,X,ve=ze(S),ue=Nt.test(S),Ae=g.style;if(ue||(S=On(ve)),X=d.cssHooks[S]||d.cssHooks[ve],R!==void 0){if(G=typeof R,G==="string"&&(V=pr.exec(R))&&V[1]&&(R=lr(g,S,V),G="number"),R==null||R!==R)return;G==="number"&&!ue&&(R+=V&&V[3]||(d.cssNumber[ve]?"":"px")),!m.clearCloneStyle&&R===""&&S.indexOf("background")===0&&(Ae[S]="inherit"),(!X||!("set"in X)||(R=X.set(g,R,L))!==void 0)&&(ue?Ae.setProperty(S,R):Ae[S]=R)}else return X&&"get"in X&&(V=X.get(g,!1,L))!==void 0?V:Ae[S]}},css:function(g,S,R,L){var V,G,X,ve=ze(S),ue=Nt.test(S);return ue||(S=On(ve)),X=d.cssHooks[S]||d.cssHooks[ve],X&&"get"in X&&(V=X.get(g,!0,R)),V===void 0&&(V=sn(g,S,L)),V==="normal"&&S in Vi&&(V=Vi[S]),R===""||R?(G=parseFloat(V),R===!0||isFinite(G)?G||0:V):V}}),d.each(["height","width"],function(g,S){d.cssHooks[S]={get:function(R,L,V){if(L)return rr.test(d.css(R,"display"))&&(!R.getClientRects().length||!R.getBoundingClientRect().width)?Zn(R,Si,function(){return It(R,S,V)}):It(R,S,V)},set:function(R,L,V){var G,X=Fr(R),ve=!m.scrollboxSize()&&X.position==="absolute",ue=ve||V,Ae=ue&&d.css(R,"boxSizing",!1,X)==="border-box",$e=V?mt(R,S,V,Ae,X):0;return Ae&&ve&&($e-=Math.ceil(R["offset"+S[0].toUpperCase()+S.slice(1)]-parseFloat(X[S])-mt(R,S,"border",!1,X)-.5)),$e&&(G=pr.exec(L))&&(G[3]||"px")!=="px"&&(R.style[S]=L,L=d.css(R,S)),tt(R,L,$e)}}}),d.cssHooks.marginLeft=zn(m.reliableMarginLeft,function(g,S){if(S)return(parseFloat(sn(g,"marginLeft"))||g.getBoundingClientRect().left-Zn(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(g,S){d.cssHooks[g+S]={expand:function(R){for(var L=0,V={},G=typeof R=="string"?R.split(" "):[R];L<4;L++)V[g+sr[L]+S]=G[L]||G[L-2]||G[0];return V}},g!=="margin"&&(d.cssHooks[g+S].set=tt)}),d.fn.extend({css:function(g,S){return we(this,function(R,L,V){var G,X,ve={},ue=0;if(Array.isArray(L)){for(G=Fr(R),X=L.length;ue<X;ue++)ve[L[ue]]=d.css(R,L[ue],!1,G);return ve}return V!==void 0?d.style(R,L,V):d.css(R,L)},g,S,arguments.length>1)}});function yt(g,S,R,L,V){return new yt.prototype.init(g,S,R,L,V)}d.Tween=yt,yt.prototype={constructor:yt,init:function(g,S,R,L,V,G){this.elem=g,this.prop=R,this.easing=V||d.easing._default,this.options=S,this.start=this.now=this.cur(),this.end=L,this.unit=G||(d.cssNumber[R]?"":"px")},cur:function(){var g=yt.propHooks[this.prop];return g&&g.get?g.get(this):yt.propHooks._default.get(this)},run:function(g){var S,R=yt.propHooks[this.prop];return this.options.duration?this.pos=S=d.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):this.pos=S=g,this.now=(this.end-this.start)*S+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),R&&R.set?R.set(this):yt.propHooks._default.set(this),this}},yt.prototype.init.prototype=yt.prototype,yt.propHooks={_default:{get:function(g){var S;return g.elem.nodeType!==1||g.elem[g.prop]!=null&&g.elem.style[g.prop]==null?g.elem[g.prop]:(S=d.css(g.elem,g.prop,""),!S||S==="auto"?0:S)},set:function(g){d.fx.step[g.prop]?d.fx.step[g.prop](g):g.elem.nodeType===1&&(d.cssHooks[g.prop]||g.elem.style[On(g.prop)]!=null)?d.style(g.elem,g.prop,g.now+g.unit):g.elem[g.prop]=g.now}}},yt.propHooks.scrollTop=yt.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},d.easing={linear:function(g){return g},swing:function(g){return .5-Math.cos(g*Math.PI)/2},_default:"swing"},d.fx=yt.prototype.init,d.fx.step={};var At,ar,tn=/^(?:toggle|show|hide)$/,kn=/queueHooks$/;function zr(){ar&&(w.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(zr):t.setTimeout(zr,d.fx.interval),d.fx.tick())}function qn(){return t.setTimeout(function(){At=void 0}),At=Date.now()}function Mn(g,S){var R,L=0,V={height:g};for(S=S?1:0;L<4;L+=2-S)R=sr[L],V["margin"+R]=V["padding"+R]=g;return S&&(V.opacity=V.width=g),V}function Qn(g,S,R){for(var L,V=(si.tweeners[S]||[]).concat(si.tweeners["*"]),G=0,X=V.length;G<X;G++)if(L=V[G].call(R,S,g))return L}function Ra(g,S,R){var L,V,G,X,ve,ue,Ae,$e,Xe="width"in S||"height"in S,ke=this,pt={},kt=g.style,vr=g.nodeType&&Pn(g),hr=Ee.get(g,"fxshow");R.queue||(X=d._queueHooks(g,"fx"),X.unqueued==null&&(X.unqueued=0,ve=X.empty.fire,X.empty.fire=function(){X.unqueued||ve()}),X.unqueued++,ke.always(function(){ke.always(function(){X.unqueued--,d.queue(g,"fx").length||X.empty.fire()})}));for(L in S)if(V=S[L],tn.test(V)){if(delete S[L],G=G||V==="toggle",V===(vr?"hide":"show"))if(V==="show"&&hr&&hr[L]!==void 0)vr=!0;else continue;pt[L]=hr&&hr[L]||d.style(g,L)}if(ue=!d.isEmptyObject(S),!(!ue&&d.isEmptyObject(pt))){Xe&&g.nodeType===1&&(R.overflow=[kt.overflow,kt.overflowX,kt.overflowY],Ae=hr&&hr.display,Ae==null&&(Ae=Ee.get(g,"display")),$e=d.css(g,"display"),$e==="none"&&(Ae?$e=Ae:(Rn([g],!0),Ae=g.style.display||Ae,$e=d.css(g,"display"),Rn([g]))),($e==="inline"||$e==="inline-block"&&Ae!=null)&&d.css(g,"float")==="none"&&(ue||(ke.done(function(){kt.display=Ae}),Ae==null&&($e=kt.display,Ae=$e==="none"?"":$e)),kt.display="inline-block")),R.overflow&&(kt.overflow="hidden",ke.always(function(){kt.overflow=R.overflow[0],kt.overflowX=R.overflow[1],kt.overflowY=R.overflow[2]})),ue=!1;for(L in pt)ue||(hr?"hidden"in hr&&(vr=hr.hidden):hr=Ee.access(g,"fxshow",{display:Ae}),G&&(hr.hidden=!vr),vr&&Rn([g],!0),ke.done(function(){vr||Rn([g]),Ee.remove(g,"fxshow");for(L in pt)d.style(g,L,pt[L])})),ue=Qn(vr?hr[L]:0,L,ke),L in hr||(hr[L]=ue.start,vr&&(ue.end=ue.start,ue.start=0))}}function Us(g,S){var R,L,V,G,X;for(R in g)if(L=ze(R),V=S[L],G=g[R],Array.isArray(G)&&(V=G[1],G=g[R]=G[0]),R!==L&&(g[L]=G,delete g[R]),X=d.cssHooks[L],X&&"expand"in X){G=X.expand(G),delete g[L];for(R in G)R in g||(g[R]=G[R],S[R]=V)}else S[L]=V}function si(g,S,R){var L,V,G=0,X=si.prefilters.length,ve=d.Deferred().always(function(){delete ue.elem}),ue=function(){if(V)return!1;for(var Xe=At||qn(),ke=Math.max(0,Ae.startTime+Ae.duration-Xe),pt=ke/Ae.duration||0,kt=1-pt,vr=0,hr=Ae.tweens.length;vr<hr;vr++)Ae.tweens[vr].run(kt);return ve.notifyWith(g,[Ae,kt,ke]),kt<1&&hr?ke:(hr||ve.notifyWith(g,[Ae,1,0]),ve.resolveWith(g,[Ae]),!1)},Ae=ve.promise({elem:g,props:d.extend({},S),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},R),originalProperties:S,originalOptions:R,startTime:At||qn(),duration:R.duration,tweens:[],createTween:function(Xe,ke){var pt=d.Tween(g,Ae.opts,Xe,ke,Ae.opts.specialEasing[Xe]||Ae.opts.easing);return Ae.tweens.push(pt),pt},stop:function(Xe){var ke=0,pt=Xe?Ae.tweens.length:0;if(V)return this;for(V=!0;ke<pt;ke++)Ae.tweens[ke].run(1);return Xe?(ve.notifyWith(g,[Ae,1,0]),ve.resolveWith(g,[Ae,Xe])):ve.rejectWith(g,[Ae,Xe]),this}}),$e=Ae.props;for(Us($e,Ae.opts.specialEasing);G<X;G++)if(L=si.prefilters[G].call(Ae,g,$e,Ae.opts),L)return b(L.stop)&&(d._queueHooks(Ae.elem,Ae.opts.queue).stop=L.stop.bind(L)),L;return d.map($e,Qn,Ae),b(Ae.opts.start)&&Ae.opts.start.call(g,Ae),Ae.progress(Ae.opts.progress).done(Ae.opts.done,Ae.opts.complete).fail(Ae.opts.fail).always(Ae.opts.always),d.fx.timer(d.extend(ue,{elem:g,anim:Ae,queue:Ae.opts.queue})),Ae}d.Animation=d.extend(si,{tweeners:{"*":[function(g,S){var R=this.createTween(g,S);return lr(R.elem,g,pr.exec(S),R),R}]},tweener:function(g,S){b(g)?(S=g,g=["*"]):g=g.match(Ge);for(var R,L=0,V=g.length;L<V;L++)R=g[L],si.tweeners[R]=si.tweeners[R]||[],si.tweeners[R].unshift(S)},prefilters:[Ra],prefilter:function(g,S){S?si.prefilters.unshift(g):si.prefilters.push(g)}}),d.speed=function(g,S,R){var L=g&&typeof g=="object"?d.extend({},g):{complete:R||!R&&S||b(g)&&g,duration:g,easing:R&&S||S&&!b(S)&&S};return d.fx.off?L.duration=0:typeof L.duration!="number"&&(L.duration in d.fx.speeds?L.duration=d.fx.speeds[L.duration]:L.duration=d.fx.speeds._default),(L.queue==null||L.queue===!0)&&(L.queue="fx"),L.old=L.complete,L.complete=function(){b(L.old)&&L.old.call(this),L.queue&&d.dequeue(this,L.queue)},L},d.fn.extend({fadeTo:function(g,S,R,L){return this.filter(Pn).css("opacity",0).show().end().animate({opacity:S},g,R,L)},animate:function(g,S,R,L){var V=d.isEmptyObject(g),G=d.speed(S,R,L),X=function(){var ve=si(this,d.extend({},g),G);(V||Ee.get(this,"finish"))&&ve.stop(!0)};return X.finish=X,V||G.queue===!1?this.each(X):this.queue(G.queue,X)},stop:function(g,S,R){var L=function(V){var G=V.stop;delete V.stop,G(R)};return typeof g!="string"&&(R=S,S=g,g=void 0),S&&this.queue(g||"fx",[]),this.each(function(){var V=!0,G=g!=null&&g+"queueHooks",X=d.timers,ve=Ee.get(this);if(G)ve[G]&&ve[G].stop&&L(ve[G]);else for(G in ve)ve[G]&&ve[G].stop&&kn.test(G)&&L(ve[G]);for(G=X.length;G--;)X[G].elem===this&&(g==null||X[G].queue===g)&&(X[G].anim.stop(R),V=!1,X.splice(G,1));(V||!R)&&d.dequeue(this,g)})},finish:function(g){return g!==!1&&(g=g||"fx"),this.each(function(){var S,R=Ee.get(this),L=R[g+"queue"],V=R[g+"queueHooks"],G=d.timers,X=L?L.length:0;for(R.finish=!0,d.queue(this,g,[]),V&&V.stop&&V.stop.call(this,!0),S=G.length;S--;)G[S].elem===this&&G[S].queue===g&&(G[S].anim.stop(!0),G.splice(S,1));for(S=0;S<X;S++)L[S]&&L[S].finish&&L[S].finish.call(this);delete R.finish})}}),d.each(["toggle","show","hide"],function(g,S){var R=d.fn[S];d.fn[S]=function(L,V,G){return L==null||typeof L=="boolean"?R.apply(this,arguments):this.animate(Mn(S,!0),L,V,G)}}),d.each({slideDown:Mn("show"),slideUp:Mn("hide"),slideToggle:Mn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,S){d.fn[g]=function(R,L,V){return this.animate(S,R,L,V)}}),d.timers=[],d.fx.tick=function(){var g,S=0,R=d.timers;for(At=Date.now();S<R.length;S++)g=R[S],!g()&&R[S]===g&&R.splice(S--,1);R.length||d.fx.stop(),At=void 0},d.fx.timer=function(g){d.timers.push(g),d.fx.start()},d.fx.interval=13,d.fx.start=function(){ar||(ar=!0,zr())},d.fx.stop=function(){ar=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(g,S){return g=d.fx&&d.fx.speeds[g]||g,S=S||"fx",this.queue(S,function(R,L){var V=t.setTimeout(R,g);L.stop=function(){t.clearTimeout(V)}})},function(){var g=w.createElement("input"),S=w.createElement("select"),R=S.appendChild(w.createElement("option"));g.type="checkbox",m.checkOn=g.value!=="",m.optSelected=R.selected,g=w.createElement("input"),g.value="t",g.type="radio",m.radioValue=g.value==="t"}();var hu,ws=d.expr.attrHandle;d.fn.extend({attr:function(g,S){return we(this,d.attr,g,S,arguments.length>1)},removeAttr:function(g){return this.each(function(){d.removeAttr(this,g)})}}),d.extend({attr:function(g,S,R){var L,V,G=g.nodeType;if(!(G===3||G===8||G===2)){if(typeof g.getAttribute>"u")return d.prop(g,S,R);if((G!==1||!d.isXMLDoc(g))&&(V=d.attrHooks[S.toLowerCase()]||(d.expr.match.bool.test(S)?hu:void 0)),R!==void 0){if(R===null){d.removeAttr(g,S);return}return V&&"set"in V&&(L=V.set(g,R,S))!==void 0?L:(g.setAttribute(S,R+""),R)}return V&&"get"in V&&(L=V.get(g,S))!==null?L:(L=d.find.attr(g,S),L??void 0)}},attrHooks:{type:{set:function(g,S){if(!m.radioValue&&S==="radio"&&O(g,"input")){var R=g.value;return g.setAttribute("type",S),R&&(g.value=R),S}}}},removeAttr:function(g,S){var R,L=0,V=S&&S.match(Ge);if(V&&g.nodeType===1)for(;R=V[L++];)g.removeAttribute(R)}}),hu={set:function(g,S,R){return S===!1?d.removeAttr(g,R):g.setAttribute(R,R),R}},d.each(d.expr.match.bool.source.match(/\w+/g),function(g,S){var R=ws[S]||d.find.attr;ws[S]=function(L,V,G){var X,ve,ue=V.toLowerCase();return G||(ve=ws[ue],ws[ue]=X,X=R(L,V,G)!=null?ue:null,ws[ue]=ve),X}});var du=/^(?:input|select|textarea|button)$/i,ka=/^(?:a|area)$/i;d.fn.extend({prop:function(g,S){return we(this,d.prop,g,S,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[d.propFix[g]||g]})}}),d.extend({prop:function(g,S,R){var L,V,G=g.nodeType;if(!(G===3||G===8||G===2))return(G!==1||!d.isXMLDoc(g))&&(S=d.propFix[S]||S,V=d.propHooks[S]),R!==void 0?V&&"set"in V&&(L=V.set(g,R,S))!==void 0?L:g[S]=R:V&&"get"in V&&(L=V.get(g,S))!==null?L:g[S]},propHooks:{tabIndex:{get:function(g){var S=d.find.attr(g,"tabindex");return S?parseInt(S,10):du.test(g.nodeName)||ka.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(d.propHooks.selected={get:function(g){var S=g.parentNode;return S&&S.parentNode&&S.parentNode.selectedIndex,null},set:function(g){var S=g.parentNode;S&&(S.selectedIndex,S.parentNode&&S.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});function Ma(g){var S=g.match(Ge)||[];return S.join(" ")}function La(g){return g.getAttribute&&g.getAttribute("class")||""}function xh(g){return Array.isArray(g)?g:typeof g=="string"?g.match(Ge)||[]:[]}d.fn.extend({addClass:function(g){var S,R,L,V,G,X;return b(g)?this.each(function(ve){d(this).addClass(g.call(this,ve,La(this)))}):(S=xh(g),S.length?this.each(function(){if(L=La(this),R=this.nodeType===1&&" "+Ma(L)+" ",R){for(G=0;G<S.length;G++)V=S[G],R.indexOf(" "+V+" ")<0&&(R+=V+" ");X=Ma(R),L!==X&&this.setAttribute("class",X)}}):this)},removeClass:function(g){var S,R,L,V,G,X;return b(g)?this.each(function(ve){d(this).removeClass(g.call(this,ve,La(this)))}):arguments.length?(S=xh(g),S.length?this.each(function(){if(L=La(this),R=this.nodeType===1&&" "+Ma(L)+" ",R){for(G=0;G<S.length;G++)for(V=S[G];R.indexOf(" "+V+" ")>-1;)R=R.replace(" "+V+" "," ");X=Ma(R),L!==X&&this.setAttribute("class",X)}}):this):this.attr("class","")},toggleClass:function(g,S){var R,L,V,G,X=typeof g,ve=X==="string"||Array.isArray(g);return b(g)?this.each(function(ue){d(this).toggleClass(g.call(this,ue,La(this),S),S)}):typeof S=="boolean"&&ve?S?this.addClass(g):this.removeClass(g):(R=xh(g),this.each(function(){if(ve)for(G=d(this),V=0;V<R.length;V++)L=R[V],G.hasClass(L)?G.removeClass(L):G.addClass(L);else(g===void 0||X==="boolean")&&(L=La(this),L&&Ee.set(this,"__className__",L),this.setAttribute&&this.setAttribute("class",L||g===!1?"":Ee.get(this,"__className__")||""))}))},hasClass:function(g){var S,R,L=0;for(S=" "+g+" ";R=this[L++];)if(R.nodeType===1&&(" "+Ma(La(R))+" ").indexOf(S)>-1)return!0;return!1}});var Ap=/\r/g;d.fn.extend({val:function(g){var S,R,L,V=this[0];return arguments.length?(L=b(g),this.each(function(G){var X;this.nodeType===1&&(L?X=g.call(this,G,d(this).val()):X=g,X==null?X="":typeof X=="number"?X+="":Array.isArray(X)&&(X=d.map(X,function(ve){return ve==null?"":ve+""})),S=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],(!S||!("set"in S)||S.set(this,X,"value")===void 0)&&(this.value=X))})):V?(S=d.valHooks[V.type]||d.valHooks[V.nodeName.toLowerCase()],S&&"get"in S&&(R=S.get(V,"value"))!==void 0?R:(R=V.value,typeof R=="string"?R.replace(Ap,""):R??"")):void 0}}),d.extend({valHooks:{option:{get:function(g){var S=d.find.attr(g,"value");return S??Ma(d.text(g))}},select:{get:function(g){var S,R,L,V=g.options,G=g.selectedIndex,X=g.type==="select-one",ve=X?null:[],ue=X?G+1:V.length;for(G<0?L=ue:L=X?G:0;L<ue;L++)if(R=V[L],(R.selected||L===G)&&!R.disabled&&(!R.parentNode.disabled||!O(R.parentNode,"optgroup"))){if(S=d(R).val(),X)return S;ve.push(S)}return ve},set:function(g,S){for(var R,L,V=g.options,G=d.makeArray(S),X=V.length;X--;)L=V[X],(L.selected=d.inArray(d.valHooks.option.get(L),G)>-1)&&(R=!0);return R||(g.selectedIndex=-1),G}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(g,S){if(Array.isArray(S))return g.checked=d.inArray(d(g).val(),S)>-1}},m.checkOn||(d.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value})});var Ku=t.location,Sh={guid:Date.now()},Jl=/\?/;d.parseXML=function(g){var S,R;if(!g||typeof g!="string")return null;try{S=new t.DOMParser().parseFromString(g,"text/xml")}catch{}return R=S&&S.getElementsByTagName("parsererror")[0],(!S||R)&&d.error("Invalid XML: "+(R?d.map(R.childNodes,function(L){return L.textContent}).join(`
`):g)),S};var Tp=/^(?:focusinfocus|focusoutblur)$/,Pp=function(g){g.stopPropagation()};d.extend(d.event,{trigger:function(g,S,R,L){var V,G,X,ve,ue,Ae,$e,Xe,ke=[R||w],pt=h.call(g,"type")?g.type:g,kt=h.call(g,"namespace")?g.namespace.split("."):[];if(G=Xe=X=R=R||w,!(R.nodeType===3||R.nodeType===8)&&!Tp.test(pt+d.event.triggered)&&(pt.indexOf(".")>-1&&(kt=pt.split("."),pt=kt.shift(),kt.sort()),ue=pt.indexOf(":")<0&&"on"+pt,g=g[d.expando]?g:new d.Event(pt,typeof g=="object"&&g),g.isTrigger=L?2:3,g.namespace=kt.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+kt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=R),S=S==null?[g]:d.makeArray(S,[g]),$e=d.event.special[pt]||{},!(!L&&$e.trigger&&$e.trigger.apply(R,S)===!1))){if(!L&&!$e.noBubble&&!y(R)){for(ve=$e.delegateType||pt,Tp.test(ve+pt)||(G=G.parentNode);G;G=G.parentNode)ke.push(G),X=G;X===(R.ownerDocument||w)&&ke.push(X.defaultView||X.parentWindow||t)}for(V=0;(G=ke[V++])&&!g.isPropagationStopped();)Xe=G,g.type=V>1?ve:$e.bindType||pt,Ae=(Ee.get(G,"events")||Object.create(null))[g.type]&&Ee.get(G,"handle"),Ae&&Ae.apply(G,S),Ae=ue&&G[ue],Ae&&Ae.apply&&Le(G)&&(g.result=Ae.apply(G,S),g.result===!1&&g.preventDefault());return g.type=pt,!L&&!g.isDefaultPrevented()&&(!$e._default||$e._default.apply(ke.pop(),S)===!1)&&Le(R)&&ue&&b(R[pt])&&!y(R)&&(X=R[ue],X&&(R[ue]=null),d.event.triggered=pt,g.isPropagationStopped()&&Xe.addEventListener(pt,Pp),R[pt](),g.isPropagationStopped()&&Xe.removeEventListener(pt,Pp),d.event.triggered=void 0,X&&(R[ue]=X)),g.result}},simulate:function(g,S,R){var L=d.extend(new d.Event,R,{type:g,isSimulated:!0});d.event.trigger(L,null,S)}}),d.fn.extend({trigger:function(g,S){return this.each(function(){d.event.trigger(g,S,this)})},triggerHandler:function(g,S){var R=this[0];if(R)return d.event.trigger(g,S,R,!0)}});var Vm=/\[\]$/,Eh=/\r?\n/g,$m=/^(?:submit|button|image|reset|file)$/i,Gm=/^(?:input|select|textarea|keygen)/i;function Ah(g,S,R,L){var V;if(Array.isArray(S))d.each(S,function(G,X){R||Vm.test(g)?L(g,X):Ah(g+"["+(typeof X=="object"&&X!=null?G:"")+"]",X,R,L)});else if(!R&&A(S)==="object")for(V in S)Ah(g+"["+V+"]",S[V],R,L);else L(g,S)}d.param=function(g,S){var R,L=[],V=function(G,X){var ve=b(X)?X():X;L[L.length]=encodeURIComponent(G)+"="+encodeURIComponent(ve??"")};if(g==null)return"";if(Array.isArray(g)||g.jquery&&!d.isPlainObject(g))d.each(g,function(){V(this.name,this.value)});else for(R in g)Ah(R,g[R],S,V);return L.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=d.prop(this,"elements");return g?d.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!d(this).is(":disabled")&&Gm.test(this.nodeName)&&!$m.test(g)&&(this.checked||!Cn.test(g))}).map(function(g,S){var R=d(this).val();return R==null?null:Array.isArray(R)?d.map(R,function(L){return{name:S.name,value:L.replace(Eh,`\r
`)}}):{name:S.name,value:R.replace(Eh,`\r
`)}}).get()}});var Um=/%20/g,Th=/#.*$/,jm=/([?&])_=[^&]*/,Hm=/^(.*?):[ \t]*([^\r\n]*)$/mg,Wm=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Xm=/^(?:GET|HEAD)$/,Ym=/^\/\//,En={},dn={},Cp="*/".concat("*"),Ph=w.createElement("a");Ph.href=Ku.href;function Op(g){return function(S,R){typeof S!="string"&&(R=S,S="*");var L,V=0,G=S.toLowerCase().match(Ge)||[];if(b(R))for(;L=G[V++];)L[0]==="+"?(L=L.slice(1)||"*",(g[L]=g[L]||[]).unshift(R)):(g[L]=g[L]||[]).push(R)}}function Ip(g,S,R,L){var V={},G=g===dn;function X(ve){var ue;return V[ve]=!0,d.each(g[ve]||[],function(Ae,$e){var Xe=$e(S,R,L);if(typeof Xe=="string"&&!G&&!V[Xe])return S.dataTypes.unshift(Xe),X(Xe),!1;if(G)return!(ue=Xe)}),ue}return X(S.dataTypes[0])||!V["*"]&&X("*")}function Ch(g,S){var R,L,V=d.ajaxSettings.flatOptions||{};for(R in S)S[R]!==void 0&&((V[R]?g:L||(L={}))[R]=S[R]);return L&&d.extend(!0,g,L),g}function Km(g,S,R){for(var L,V,G,X,ve=g.contents,ue=g.dataTypes;ue[0]==="*";)ue.shift(),L===void 0&&(L=g.mimeType||S.getResponseHeader("Content-Type"));if(L){for(V in ve)if(ve[V]&&ve[V].test(L)){ue.unshift(V);break}}if(ue[0]in R)G=ue[0];else{for(V in R){if(!ue[0]||g.converters[V+" "+ue[0]]){G=V;break}X||(X=V)}G=G||X}if(G)return G!==ue[0]&&ue.unshift(G),R[G]}function Rp(g,S,R,L){var V,G,X,ve,ue,Ae={},$e=g.dataTypes.slice();if($e[1])for(X in g.converters)Ae[X.toLowerCase()]=g.converters[X];for(G=$e.shift();G;)if(g.responseFields[G]&&(R[g.responseFields[G]]=S),!ue&&L&&g.dataFilter&&(S=g.dataFilter(S,g.dataType)),ue=G,G=$e.shift(),G){if(G==="*")G=ue;else if(ue!=="*"&&ue!==G){if(X=Ae[ue+" "+G]||Ae["* "+G],!X){for(V in Ae)if(ve=V.split(" "),ve[1]===G&&(X=Ae[ue+" "+ve[0]]||Ae["* "+ve[0]],X)){X===!0?X=Ae[V]:Ae[V]!==!0&&(G=ve[0],$e.unshift(ve[1]));break}}if(X!==!0)if(X&&g.throws)S=X(S);else try{S=X(S)}catch(Xe){return{state:"parsererror",error:X?Xe:"No conversion from "+ue+" to "+G}}}}return{state:"success",data:S}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ku.href,type:"GET",isLocal:Wm.test(Ku.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Cp,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,S){return S?Ch(Ch(g,d.ajaxSettings),S):Ch(d.ajaxSettings,g)},ajaxPrefilter:Op(En),ajaxTransport:Op(dn),ajax:function(g,S){typeof g=="object"&&(S=g,g=void 0),S=S||{};var R,L,V,G,X,ve,ue,Ae,$e,Xe,ke=d.ajaxSetup({},S),pt=ke.context||ke,kt=ke.context&&(pt.nodeType||pt.jquery)?d(pt):d.event,vr=d.Deferred(),hr=d.Callbacks("once memory"),Ei=ke.statusCode||{},Wn={},vo={},go="canceled",kr={readyState:0,getResponseHeader:function(Mr){var _n;if(ue){if(!G)for(G={};_n=Hm.exec(V);)G[_n[1].toLowerCase()+" "]=(G[_n[1].toLowerCase()+" "]||[]).concat(_n[2]);_n=G[Mr.toLowerCase()+" "]}return _n==null?null:_n.join(", ")},getAllResponseHeaders:function(){return ue?V:null},setRequestHeader:function(Mr,_n){return ue==null&&(Mr=vo[Mr.toLowerCase()]=vo[Mr.toLowerCase()]||Mr,Wn[Mr]=_n),this},overrideMimeType:function(Mr){return ue==null&&(ke.mimeType=Mr),this},statusCode:function(Mr){var _n;if(Mr)if(ue)kr.always(Mr[kr.status]);else for(_n in Mr)Ei[_n]=[Ei[_n],Mr[_n]];return this},abort:function(Mr){var _n=Mr||go;return R&&R.abort(_n),Na(0,_n),this}};if(vr.promise(kr),ke.url=((g||ke.url||Ku.href)+"").replace(Ym,Ku.protocol+"//"),ke.type=S.method||S.type||ke.method||ke.type,ke.dataTypes=(ke.dataType||"*").toLowerCase().match(Ge)||[""],ke.crossDomain==null){ve=w.createElement("a");try{ve.href=ke.url,ve.href=ve.href,ke.crossDomain=Ph.protocol+"//"+Ph.host!=ve.protocol+"//"+ve.host}catch{ke.crossDomain=!0}}if(ke.data&&ke.processData&&typeof ke.data!="string"&&(ke.data=d.param(ke.data,ke.traditional)),Ip(En,ke,S,kr),ue)return kr;Ae=d.event&&ke.global,Ae&&d.active++===0&&d.event.trigger("ajaxStart"),ke.type=ke.type.toUpperCase(),ke.hasContent=!Xm.test(ke.type),L=ke.url.replace(Th,""),ke.hasContent?ke.data&&ke.processData&&(ke.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ke.data=ke.data.replace(Um,"+")):(Xe=ke.url.slice(L.length),ke.data&&(ke.processData||typeof ke.data=="string")&&(L+=(Jl.test(L)?"&":"?")+ke.data,delete ke.data),ke.cache===!1&&(L=L.replace(jm,"$1"),Xe=(Jl.test(L)?"&":"?")+"_="+Sh.guid+++Xe),ke.url=L+Xe),ke.ifModified&&(d.lastModified[L]&&kr.setRequestHeader("If-Modified-Since",d.lastModified[L]),d.etag[L]&&kr.setRequestHeader("If-None-Match",d.etag[L])),(ke.data&&ke.hasContent&&ke.contentType!==!1||S.contentType)&&kr.setRequestHeader("Content-Type",ke.contentType),kr.setRequestHeader("Accept",ke.dataTypes[0]&&ke.accepts[ke.dataTypes[0]]?ke.accepts[ke.dataTypes[0]]+(ke.dataTypes[0]!=="*"?", "+Cp+"; q=0.01":""):ke.accepts["*"]);for($e in ke.headers)kr.setRequestHeader($e,ke.headers[$e]);if(ke.beforeSend&&(ke.beforeSend.call(pt,kr,ke)===!1||ue))return kr.abort();if(go="abort",hr.add(ke.complete),kr.done(ke.success),kr.fail(ke.error),R=Ip(dn,ke,S,kr),!R)Na(-1,"No Transport");else{if(kr.readyState=1,Ae&&kt.trigger("ajaxSend",[kr,ke]),ue)return kr;ke.async&&ke.timeout>0&&(X=t.setTimeout(function(){kr.abort("timeout")},ke.timeout));try{ue=!1,R.send(Wn,Na)}catch(Mr){if(ue)throw Mr;Na(-1,Mr)}}function Na(Mr,_n,Vc,Ql){var js,pu,Ss,Qo,qa,Ki=_n;ue||(ue=!0,X&&t.clearTimeout(X),R=void 0,V=Ql||"",kr.readyState=Mr>0?4:0,js=Mr>=200&&Mr<300||Mr===304,Vc&&(Qo=Km(ke,kr,Vc)),!js&&d.inArray("script",ke.dataTypes)>-1&&d.inArray("json",ke.dataTypes)<0&&(ke.converters["text script"]=function(){}),Qo=Rp(ke,Qo,kr,js),js?(ke.ifModified&&(qa=kr.getResponseHeader("Last-Modified"),qa&&(d.lastModified[L]=qa),qa=kr.getResponseHeader("etag"),qa&&(d.etag[L]=qa)),Mr===204||ke.type==="HEAD"?Ki="nocontent":Mr===304?Ki="notmodified":(Ki=Qo.state,pu=Qo.data,Ss=Qo.error,js=!Ss)):(Ss=Ki,(Mr||!Ki)&&(Ki="error",Mr<0&&(Mr=0))),kr.status=Mr,kr.statusText=(_n||Ki)+"",js?vr.resolveWith(pt,[pu,Ki,kr]):vr.rejectWith(pt,[kr,Ki,Ss]),kr.statusCode(Ei),Ei=void 0,Ae&&kt.trigger(js?"ajaxSuccess":"ajaxError",[kr,ke,js?pu:Ss]),hr.fireWith(pt,[kr,Ki]),Ae&&(kt.trigger("ajaxComplete",[kr,ke]),--d.active||d.event.trigger("ajaxStop")))}return kr},getJSON:function(g,S,R){return d.get(g,S,R,"json")},getScript:function(g,S){return d.get(g,void 0,S,"script")}}),d.each(["get","post"],function(g,S){d[S]=function(R,L,V,G){return b(L)&&(G=G||V,V=L,L=void 0),d.ajax(d.extend({url:R,type:S,dataType:G,data:L,success:V},d.isPlainObject(R)&&R))}}),d.ajaxPrefilter(function(g){var S;for(S in g.headers)S.toLowerCase()==="content-type"&&(g.contentType=g.headers[S]||"")}),d._evalUrl=function(g,S,R){return d.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(L){d.globalEval(L,S,R)}})},d.fn.extend({wrapAll:function(g){var S;return this[0]&&(b(g)&&(g=g.call(this[0])),S=d(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&S.insertBefore(this[0]),S.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(g){return b(g)?this.each(function(S){d(this).wrapInner(g.call(this,S))}):this.each(function(){var S=d(this),R=S.contents();R.length?R.wrapAll(g):S.append(g)})},wrap:function(g){var S=b(g);return this.each(function(R){d(this).wrapAll(S?g.call(this,R):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(g){return!d.expr.pseudos.visible(g)},d.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Jm={0:200,1223:204},Hn=d.ajaxSettings.xhr();m.cors=!!Hn&&"withCredentials"in Hn,m.ajax=Hn=!!Hn,d.ajaxTransport(function(g){var S,R;if(m.cors||Hn&&!g.crossDomain)return{send:function(L,V){var G,X=g.xhr();if(X.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for(G in g.xhrFields)X[G]=g.xhrFields[G];g.mimeType&&X.overrideMimeType&&X.overrideMimeType(g.mimeType),!g.crossDomain&&!L["X-Requested-With"]&&(L["X-Requested-With"]="XMLHttpRequest");for(G in L)X.setRequestHeader(G,L[G]);S=function(ve){return function(){S&&(S=R=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,ve==="abort"?X.abort():ve==="error"?typeof X.status!="number"?V(0,"error"):V(X.status,X.statusText):V(Jm[X.status]||X.status,X.statusText,(X.responseType||"text")!=="text"||typeof X.responseText!="string"?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=S(),R=X.onerror=X.ontimeout=S("error"),X.onabort!==void 0?X.onabort=R:X.onreadystatechange=function(){X.readyState===4&&t.setTimeout(function(){S&&R()})},S=S("abort");try{X.send(g.hasContent&&g.data||null)}catch(ve){if(S)throw ve}},abort:function(){S&&S()}}}),d.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return d.globalEval(g),g}}}),d.ajaxPrefilter("script",function(g){g.cache===void 0&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),d.ajaxTransport("script",function(g){if(g.crossDomain||g.scriptAttrs){var S,R;return{send:function(L,V){S=d("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",R=function(G){S.remove(),R=null,G&&V(G.type==="error"?404:200,G.type)}),w.head.appendChild(S[0])},abort:function(){R&&R()}}}});var Zl=[],Zo=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=Zl.pop()||d.expando+"_"+Sh.guid++;return this[g]=!0,g}}),d.ajaxPrefilter("json jsonp",function(g,S,R){var L,V,G,X=g.jsonp!==!1&&(Zo.test(g.url)?"url":typeof g.data=="string"&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Zo.test(g.data)&&"data");if(X||g.dataTypes[0]==="jsonp")return L=g.jsonpCallback=b(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,X?g[X]=g[X].replace(Zo,"$1"+L):g.jsonp!==!1&&(g.url+=(Jl.test(g.url)?"&":"?")+g.jsonp+"="+L),g.converters["script json"]=function(){return G||d.error(L+" was not called"),G[0]},g.dataTypes[0]="json",V=t[L],t[L]=function(){G=arguments},R.always(function(){V===void 0?d(t).removeProp(L):t[L]=V,g[L]&&(g.jsonpCallback=S.jsonpCallback,Zl.push(L)),G&&b(V)&&V(G[0]),G=V=void 0}),"script"}),m.createHTMLDocument=function(){var g=w.implementation.createHTMLDocument("").body;return g.innerHTML="<form></form><form></form>",g.childNodes.length===2}(),d.parseHTML=function(g,S,R){if(typeof g!="string")return[];typeof S=="boolean"&&(R=S,S=!1);var L,V,G;return S||(m.createHTMLDocument?(S=w.implementation.createHTMLDocument(""),L=S.createElement("base"),L.href=w.location.href,S.head.appendChild(L)):S=w),V=xe.exec(g),G=!R&&[],V?[S.createElement(V[1])]:(V=Bn([g],S,G),G&&G.length&&d(G).remove(),d.merge([],V.childNodes))},d.fn.load=function(g,S,R){var L,V,G,X=this,ve=g.indexOf(" ");return ve>-1&&(L=Ma(g.slice(ve)),g=g.slice(0,ve)),b(S)?(R=S,S=void 0):S&&typeof S=="object"&&(V="POST"),X.length>0&&d.ajax({url:g,type:V||"GET",dataType:"html",data:S}).done(function(ue){G=arguments,X.html(L?d("<div>").append(d.parseHTML(ue)).find(L):ue)}).always(R&&function(ue,Ae){X.each(function(){R.apply(this,G||[ue.responseText,Ae,ue])})}),this},d.expr.pseudos.animated=function(g){return d.grep(d.timers,function(S){return g===S.elem}).length},d.offset={setOffset:function(g,S,R){var L,V,G,X,ve,ue,Ae,$e=d.css(g,"position"),Xe=d(g),ke={};$e==="static"&&(g.style.position="relative"),ve=Xe.offset(),G=d.css(g,"top"),ue=d.css(g,"left"),Ae=($e==="absolute"||$e==="fixed")&&(G+ue).indexOf("auto")>-1,Ae?(L=Xe.position(),X=L.top,V=L.left):(X=parseFloat(G)||0,V=parseFloat(ue)||0),b(S)&&(S=S.call(g,R,d.extend({},ve))),S.top!=null&&(ke.top=S.top-ve.top+X),S.left!=null&&(ke.left=S.left-ve.left+V),"using"in S?S.using.call(g,ke):Xe.css(ke)}},d.fn.extend({offset:function(g){if(arguments.length)return g===void 0?this:this.each(function(V){d.offset.setOffset(this,g,V)});var S,R,L=this[0];if(L)return L.getClientRects().length?(S=L.getBoundingClientRect(),R=L.ownerDocument.defaultView,{top:S.top+R.pageYOffset,left:S.left+R.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var g,S,R,L=this[0],V={top:0,left:0};if(d.css(L,"position")==="fixed")S=L.getBoundingClientRect();else{for(S=this.offset(),R=L.ownerDocument,g=L.offsetParent||R.documentElement;g&&(g===R.body||g===R.documentElement)&&d.css(g,"position")==="static";)g=g.parentNode;g&&g!==L&&g.nodeType===1&&(V=d(g).offset(),V.top+=d.css(g,"borderTopWidth",!0),V.left+=d.css(g,"borderLeftWidth",!0))}return{top:S.top-V.top-d.css(L,"marginTop",!0),left:S.left-V.left-d.css(L,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&d.css(g,"position")==="static";)g=g.offsetParent;return g||yr})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,S){var R=S==="pageYOffset";d.fn[g]=function(L){return we(this,function(V,G,X){var ve;if(y(V)?ve=V:V.nodeType===9&&(ve=V.defaultView),X===void 0)return ve?ve[S]:V[G];ve?ve.scrollTo(R?ve.pageXOffset:X,R?X:ve.pageYOffset):V[G]=X},g,L,arguments.length)}}),d.each(["top","left"],function(g,S){d.cssHooks[S]=zn(m.pixelPosition,function(R,L){if(L)return L=sn(R,S),Dt.test(L)?d(R).position()[S]+"px":L})}),d.each({Height:"height",Width:"width"},function(g,S){d.each({padding:"inner"+g,content:S,"":"outer"+g},function(R,L){d.fn[L]=function(V,G){var X=arguments.length&&(R||typeof V!="boolean"),ve=R||(V===!0||G===!0?"margin":"border");return we(this,function(ue,Ae,$e){var Xe;return y(ue)?L.indexOf("outer")===0?ue["inner"+g]:ue.document.documentElement["client"+g]:ue.nodeType===9?(Xe=ue.documentElement,Math.max(ue.body["scroll"+g],Xe["scroll"+g],ue.body["offset"+g],Xe["offset"+g],Xe["client"+g])):$e===void 0?d.css(ue,Ae,ve):d.style(ue,Ae,$e,ve)},S,X?V:void 0,X)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,S){d.fn[S]=function(R){return this.on(S,R)}}),d.fn.extend({bind:function(g,S,R){return this.on(g,null,S,R)},unbind:function(g,S){return this.off(g,null,S)},delegate:function(g,S,R,L){return this.on(S,g,R,L)},undelegate:function(g,S,R){return arguments.length===1?this.off(g,"**"):this.off(S,g||"**",R)},hover:function(g,S){return this.on("mouseenter",g).on("mouseleave",S||g)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,S){d.fn[S]=function(R,L){return arguments.length>0?this.on(S,null,R,L):this.trigger(S)}});var kp=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(g,S){var R,L,V;if(typeof S=="string"&&(R=g[S],S=g,g=R),!!b(g))return L=s.call(arguments,2),V=function(){return g.apply(S||this,L.concat(s.call(arguments)))},V.guid=g.guid=g.guid||d.guid++,V},d.holdReady=function(g){g?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=O,d.isFunction=b,d.isWindow=y,d.camelCase=ze,d.type=A,d.now=Date.now,d.isNumeric=function(g){var S=d.type(g);return(S==="number"||S==="string")&&!isNaN(g-parseFloat(g))},d.trim=function(g){return g==null?"":(g+"").replace(kp,"$1")};var Oh=t.jQuery,xs=t.$;return d.noConflict=function(g){return t.$===d&&(t.$=xs),g&&t.jQuery===d&&(t.jQuery=Oh),d},typeof r>"u"&&(t.jQuery=t.$=d),d})}(Yv)),Yv.exports}var g7;function Zde(){return g7||(g7=1,function(e){(function(t){var r=typeof self=="object"&&self.self===self&&self||typeof es=="object"&&es.global===es&&es;{var n=Kde,i;try{i=M9()}catch{}t(r,e,n,i)}})(function(t,r,n,i){var s=t.Backbone,o=Array.prototype.slice;r.VERSION="1.4.1",r.$=i,r.noConflict=function(){return t.Backbone=s,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=r.Events={},u=/\s+/,c,l=function(q,$,Y,K,we){var he=0,Te;if(Y&&typeof Y=="object")for(K!==void 0&&("context"in we)&&we.context===void 0&&(we.context=K),Te=n.keys(Y);he<Te.length;he++)$=l(q,$,Te[he],Y[Te[he]],we);else if(Y&&u.test(Y))for(Te=Y.split(u);he<Te.length;he++)$=q($,Te[he],K,we);else $=q($,Y,K,we);return $};a.on=function(q,$,Y){if(this._events=l(h,this._events||{},q,$,{context:Y,ctx:this,listening:c}),c){var K=this._listeners||(this._listeners={});K[c.id]=c,c.interop=!1}return this},a.listenTo=function(q,$,Y){if(!q)return this;var K=q._listenId||(q._listenId=n.uniqueId("l")),we=this._listeningTo||(this._listeningTo={}),he=c=we[K];he||(this._listenId||(this._listenId=n.uniqueId("l")),he=c=we[K]=new w(this,q));var Te=v(q,$,Y,this);if(c=void 0,Te)throw Te;return he.interop&&he.on($,Y),this};var h=function(q,$,Y,K){if(Y){var we=q[$]||(q[$]=[]),he=K.context,Te=K.ctx,Ce=K.listening;Ce&&Ce.count++,we.push({callback:Y,context:he,ctx:he||Te,listening:Ce})}return q},v=function(q,$,Y,K){try{q.on($,Y,K)}catch(we){return we}};a.off=function(q,$,Y){return this._events?(this._events=l(_,this._events,q,$,{context:Y,listeners:this._listeners}),this):this},a.stopListening=function(q,$,Y){var K=this._listeningTo;if(!K)return this;for(var we=q?[q._listenId]:n.keys(K),he=0;he<we.length;he++){var Te=K[we[he]];if(!Te)break;Te.obj.off($,Y,this),Te.interop&&Te.off($,Y)}return n.isEmpty(K)&&(this._listeningTo=void 0),this};var _=function(q,$,Y,K){if(q){var we=K.context,he=K.listeners,Te=0,Ce;if(!$&&!we&&!Y){for(Ce=n.keys(he);Te<Ce.length;Te++)he[Ce[Te]].cleanup();return}for(Ce=$?[$]:n.keys(q);Te<Ce.length;Te++){$=Ce[Te];var ze=q[$];if(!ze)break;for(var Le=[],Oe=0;Oe<ze.length;Oe++){var Ee=ze[Oe];if(Y&&Y!==Ee.callback&&Y!==Ee.callback._callback||we&&we!==Ee.context)Le.push(Ee);else{var Je=Ee.listening;Je&&Je.off($,Y)}}Le.length?q[$]=Le:delete q[$]}return q}};a.once=function(q,$,Y){var K=l(m,{},q,$,this.off.bind(this));return typeof q=="string"&&Y==null&&($=void 0),this.on(K,$,Y)},a.listenToOnce=function(q,$,Y){var K=l(m,{},$,Y,this.stopListening.bind(this,q));return this.listenTo(q,K)};var m=function(q,$,Y,K){if(Y){var we=q[$]=n.once(function(){K($,we),Y.apply(this,arguments)});we._callback=Y}return q};a.trigger=function(q){if(!this._events)return this;for(var $=Math.max(0,arguments.length-1),Y=Array($),K=0;K<$;K++)Y[K]=arguments[K+1];return l(b,this._events,q,void 0,Y),this};var b=function(q,$,Y,K){if(q){var we=q[$],he=q.all;we&&he&&(he=he.slice()),we&&y(we,K),he&&y(he,[$].concat(K))}return q},y=function(q,$){var Y,K=-1,we=q.length,he=$[0],Te=$[1],Ce=$[2];switch($.length){case 0:for(;++K<we;)(Y=q[K]).callback.call(Y.ctx);return;case 1:for(;++K<we;)(Y=q[K]).callback.call(Y.ctx,he);return;case 2:for(;++K<we;)(Y=q[K]).callback.call(Y.ctx,he,Te);return;case 3:for(;++K<we;)(Y=q[K]).callback.call(Y.ctx,he,Te,Ce);return;default:for(;++K<we;)(Y=q[K]).callback.apply(Y.ctx,$);return}},w=function(q,$){this.id=q._listenId,this.listener=q,this.obj=$,this.interop=!0,this.count=0,this._events=void 0};w.prototype.on=a.on,w.prototype.off=function(q,$){var Y;this.interop?(this._events=l(_,this._events,q,$,{context:void 0,listeners:void 0}),Y=!this._events):(this.count--,Y=this.count===0),Y&&this.cleanup()},w.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(r,a);var T=r.Model=function(q,$){var Y=q||{};$||($={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},$.collection&&(this.collection=$.collection),$.parse&&(Y=this.parse(Y,$)||{});var K=n.result(this,"defaults");Y=n.defaults(n.extend({},K,Y),K),this.set(Y,$),this.changed={},this.initialize.apply(this,arguments)};n.extend(T.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(q){return n.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(q){return this.attributes[q]},escape:function(q){return n.escape(this.get(q))},has:function(q){return this.get(q)!=null},matches:function(q){return!!n.iteratee(q,this)(this.attributes)},set:function(q,$,Y){if(q==null)return this;var K;if(typeof q=="object"?(K=q,Y=$):(K={})[q]=$,Y||(Y={}),!this._validate(K,Y))return!1;var we=Y.unset,he=Y.silent,Te=[],Ce=this._changing;this._changing=!0,Ce||(this._previousAttributes=n.clone(this.attributes),this.changed={});var ze=this.attributes,Le=this.changed,Oe=this._previousAttributes;for(var Ee in K)$=K[Ee],n.isEqual(ze[Ee],$)||Te.push(Ee),n.isEqual(Oe[Ee],$)?delete Le[Ee]:Le[Ee]=$,we?delete ze[Ee]:ze[Ee]=$;if(this.idAttribute in K){var Je=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Je,Y)}if(!he){Te.length&&(this._pending=Y);for(var dt=0;dt<Te.length;dt++)this.trigger("change:"+Te[dt],this,ze[Te[dt]],Y)}if(Ce)return this;if(!he)for(;this._pending;)Y=this._pending,this._pending=!1,this.trigger("change",this,Y);return this._pending=!1,this._changing=!1,this},unset:function(q,$){return this.set(q,void 0,n.extend({},$,{unset:!0}))},clear:function(q){var $={};for(var Y in this.attributes)$[Y]=void 0;return this.set($,n.extend({},q,{unset:!0}))},hasChanged:function(q){return q==null?!n.isEmpty(this.changed):n.has(this.changed,q)},changedAttributes:function(q){if(!q)return this.hasChanged()?n.clone(this.changed):!1;var $=this._changing?this._previousAttributes:this.attributes,Y={},K;for(var we in q){var he=q[we];n.isEqual($[we],he)||(Y[we]=he,K=!0)}return K?Y:!1},previous:function(q){return q==null||!this._previousAttributes?null:this._previousAttributes[q]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(q){q=n.extend({parse:!0},q);var $=this,Y=q.success;return q.success=function(K){var we=q.parse?$.parse(K,q):K;if(!$.set(we,q))return!1;Y&&Y.call(q.context,$,K,q),$.trigger("sync",$,K,q)},We(this,q),this.sync("read",this,q)},save:function(q,$,Y){var K;q==null||typeof q=="object"?(K=q,Y=$):(K={})[q]=$,Y=n.extend({validate:!0,parse:!0},Y);var we=Y.wait;if(K&&!we){if(!this.set(K,Y))return!1}else if(!this._validate(K,Y))return!1;var he=this,Te=Y.success,Ce=this.attributes;Y.success=function(Oe){he.attributes=Ce;var Ee=Y.parse?he.parse(Oe,Y):Oe;if(we&&(Ee=n.extend({},K,Ee)),Ee&&!he.set(Ee,Y))return!1;Te&&Te.call(Y.context,he,Oe,Y),he.trigger("sync",he,Oe,Y)},We(this,Y),K&&we&&(this.attributes=n.extend({},Ce,K));var ze=this.isNew()?"create":Y.patch?"patch":"update";ze==="patch"&&!Y.attrs&&(Y.attrs=K);var Le=this.sync(ze,this,Y);return this.attributes=Ce,Le},destroy:function(q){q=q?n.clone(q):{};var $=this,Y=q.success,K=q.wait,we=function(){$.stopListening(),$.trigger("destroy",$,$.collection,q)};q.success=function(Te){K&&we(),Y&&Y.call(q.context,$,Te,q),$.isNew()||$.trigger("sync",$,Te,q)};var he=!1;return this.isNew()?n.defer(q.success):(We(this,q),he=this.sync("delete",this,q)),K||we(),he},url:function(){var q=n.result(this,"urlRoot")||n.result(this.collection,"url")||Ue();if(this.isNew())return q;var $=this.get(this.idAttribute);return q.replace(/[^\/]$/,"$&/")+encodeURIComponent($)},parse:function(q,$){return q},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(q){return this._validate({},n.extend({},q,{validate:!0}))},_validate:function(q,$){if(!$.validate||!this.validate)return!0;q=n.extend({},this.attributes,q);var Y=this.validationError=this.validate(q,$)||null;return Y?(this.trigger("invalid",this,Y,n.extend($,{validationError:Y})),!1):!0}});var P=r.Collection=function(q,$){$||($={}),this.preinitialize.apply(this,arguments),$.model&&(this.model=$.model),$.comparator!==void 0&&(this.comparator=$.comparator),this._reset(),this.initialize.apply(this,arguments),q&&this.reset(q,n.extend({silent:!0},$))},A={add:!0,remove:!0,merge:!0},I={add:!0,remove:!1},N=function(q,$,Y){Y=Math.min(Math.max(Y,0),q.length);var K=Array(q.length-Y),we=$.length,he;for(he=0;he<K.length;he++)K[he]=q[he+Y];for(he=0;he<we;he++)q[he+Y]=$[he];for(he=0;he<K.length;he++)q[he+we+Y]=K[he]};n.extend(P.prototype,a,{model:T,preinitialize:function(){},initialize:function(){},toJSON:function(q){return this.map(function($){return $.toJSON(q)})},sync:function(){return r.sync.apply(this,arguments)},add:function(q,$){return this.set(q,n.extend({merge:!1},$,I))},remove:function(q,$){$=n.extend({},$);var Y=!n.isArray(q);q=Y?[q]:q.slice();var K=this._removeModels(q,$);return!$.silent&&K.length&&($.changes={added:[],merged:[],removed:K},this.trigger("update",this,$)),Y?K[0]:K},set:function(q,$){if(q!=null){$=n.extend({},A,$),$.parse&&!this._isModel(q)&&(q=this.parse(q,$)||[]);var Y=!n.isArray(q);q=Y?[q]:q.slice();var K=$.at;K!=null&&(K=+K),K>this.length&&(K=this.length),K<0&&(K+=this.length+1);var we=[],he=[],Te=[],Ce=[],ze={},Le=$.add,Oe=$.merge,Ee=$.remove,Je=!1,dt=this.comparator&&K==null&&$.sort!==!1,Et=n.isString(this.comparator)?this.comparator:null,vt,ut;for(ut=0;ut<q.length;ut++){vt=q[ut];var Jt=this.get(vt);if(Jt){if(Oe&&vt!==Jt){var pr=this._isModel(vt)?vt.attributes:vt;$.parse&&(pr=Jt.parse(pr,$)),Jt.set(pr,$),Te.push(Jt),dt&&!Je&&(Je=Jt.hasChanged(Et))}ze[Jt.cid]||(ze[Jt.cid]=!0,we.push(Jt)),q[ut]=Jt}else Le&&(vt=q[ut]=this._prepareModel(vt,$),vt&&(he.push(vt),this._addReference(vt,$),ze[vt.cid]=!0,we.push(vt)))}if(Ee){for(ut=0;ut<this.length;ut++)vt=this.models[ut],ze[vt.cid]||Ce.push(vt);Ce.length&&this._removeModels(Ce,$)}var sr=!1,yr=!dt&&Le&&Ee;if(we.length&&yr?(sr=this.length!==we.length||n.some(this.models,function(Zr,Nr){return Zr!==we[Nr]}),this.models.length=0,N(this.models,we,0),this.length=this.models.length):he.length&&(dt&&(Je=!0),N(this.models,he,K??this.length),this.length=this.models.length),Je&&this.sort({silent:!0}),!$.silent){for(ut=0;ut<he.length;ut++)K!=null&&($.index=K+ut),vt=he[ut],vt.trigger("add",vt,this,$);(Je||sr)&&this.trigger("sort",this,$),(he.length||Ce.length||Te.length)&&($.changes={added:he,removed:Ce,merged:Te},this.trigger("update",this,$))}return Y?q[0]:q}},reset:function(q,$){$=$?n.clone($):{};for(var Y=0;Y<this.models.length;Y++)this._removeReference(this.models[Y],$);return $.previousModels=this.models,this._reset(),q=this.add(q,n.extend({silent:!0},$)),$.silent||this.trigger("reset",this,$),q},push:function(q,$){return this.add(q,n.extend({at:this.length},$))},pop:function(q){var $=this.at(this.length-1);return this.remove($,q)},unshift:function(q,$){return this.add(q,n.extend({at:0},$))},shift:function(q){var $=this.at(0);return this.remove($,q)},slice:function(){return o.apply(this.models,arguments)},get:function(q){if(q!=null)return this._byId[q]||this._byId[this.modelId(this._isModel(q)?q.attributes:q,q.idAttribute)]||q.cid&&this._byId[q.cid]},has:function(q){return this.get(q)!=null},at:function(q){return q<0&&(q+=this.length),this.models[q]},where:function(q,$){return this[$?"find":"filter"](q)},findWhere:function(q){return this.where(q,!0)},sort:function(q){var $=this.comparator;if(!$)throw new Error("Cannot sort a set without a comparator");q||(q={});var Y=$.length;return n.isFunction($)&&($=$.bind(this)),Y===1||n.isString($)?this.models=this.sortBy($):this.models.sort($),q.silent||this.trigger("sort",this,q),this},pluck:function(q){return this.map(q+"")},fetch:function(q){q=n.extend({parse:!0},q);var $=q.success,Y=this;return q.success=function(K){var we=q.reset?"reset":"set";Y[we](K,q),$&&$.call(q.context,Y,K,q),Y.trigger("sync",Y,K,q)},We(this,q),this.sync("read",this,q)},create:function(q,$){$=$?n.clone($):{};var Y=$.wait;if(q=this._prepareModel(q,$),!q)return!1;Y||this.add(q,$);var K=this,we=$.success;return $.success=function(he,Te,Ce){Y&&K.add(he,Ce),we&&we.call(Ce.context,he,Te,Ce)},q.save(null,$),q},parse:function(q,$){return q},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(q,$){return q[$||this.model.prototype.idAttribute||"id"]},values:function(){return new C(this,O)},keys:function(){return new C(this,k)},entries:function(){return new C(this,F)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(q,$){if(this._isModel(q))return q.collection||(q.collection=this),q;$=$?n.clone($):{},$.collection=this;var Y;return this.model.prototype?Y=new this.model(q,$):Y=this.model(q,$),Y.validationError?(this.trigger("invalid",this,Y.validationError,$),!1):Y},_removeModels:function(q,$){for(var Y=[],K=0;K<q.length;K++){var we=this.get(q[K]);if(we){var he=this.indexOf(we);this.models.splice(he,1),this.length--,delete this._byId[we.cid];var Te=this.modelId(we.attributes,we.idAttribute);Te!=null&&delete this._byId[Te],$.silent||($.index=he,we.trigger("remove",we,this,$)),Y.push(we),this._removeReference(we,$)}}return Y},_isModel:function(q){return q instanceof T},_addReference:function(q,$){this._byId[q.cid]=q;var Y=this.modelId(q.attributes,q.idAttribute);Y!=null&&(this._byId[Y]=q),q.on("all",this._onModelEvent,this)},_removeReference:function(q,$){delete this._byId[q.cid];var Y=this.modelId(q.attributes,q.idAttribute);Y!=null&&delete this._byId[Y],this===q.collection&&delete q.collection,q.off("all",this._onModelEvent,this)},_onModelEvent:function(q,$,Y,K){if($){if((q==="add"||q==="remove")&&Y!==this)return;if(q==="destroy"&&this.remove($,K),q==="changeId"){var we=this.modelId($.previousAttributes(),$.idAttribute),he=this.modelId($.attributes,$.idAttribute);we!=null&&delete this._byId[we],he!=null&&(this._byId[he]=$)}}this.trigger.apply(this,arguments)}});var d=typeof Symbol=="function"&&Symbol.iterator;d&&(P.prototype[d]=P.prototype.values);var C=function(q,$){this._collection=q,this._kind=$,this._index=0},O=1,k=2,F=3;d&&(C.prototype[d]=function(){return this}),C.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var q=this._collection.at(this._index);this._index++;var $;if(this._kind===O)$=q;else{var Y=this._collection.modelId(q.attributes,q.idAttribute);this._kind===k?$=Y:$=[Y,q]}return{value:$,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var z=r.View=function(q){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(q,J)),this._ensureElement(),this.initialize.apply(this,arguments)},j=/^(\S+)\s*(.*)$/,J=["model","collection","el","id","attributes","className","tagName","events"];n.extend(z.prototype,a,{tagName:"div",$:function(q){return this.$el.find(q)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(q){return this.undelegateEvents(),this._setElement(q),this.delegateEvents(),this},_setElement:function(q){this.$el=q instanceof r.$?q:r.$(q),this.el=this.$el[0]},delegateEvents:function(q){if(q||(q=n.result(this,"events")),!q)return this;this.undelegateEvents();for(var $ in q){var Y=q[$];if(n.isFunction(Y)||(Y=this[Y]),!!Y){var K=$.match(j);this.delegate(K[1],K[2],Y.bind(this))}}return this},delegate:function(q,$,Y){return this.$el.on(q+".delegateEvents"+this.cid,$,Y),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(q,$,Y){return this.$el.off(q+".delegateEvents"+this.cid,$,Y),this},_createElement:function(q){return document.createElement(q)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var q=n.extend({},n.result(this,"attributes"));this.id&&(q.id=n.result(this,"id")),this.className&&(q.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(q)}},_setAttributes:function(q){this.$el.attr(q)}});var oe=function(q,$,Y,K){switch($){case 1:return function(){return q[Y](this[K])};case 2:return function(we){return q[Y](this[K],we)};case 3:return function(we,he){return q[Y](this[K],D(we,this),he)};case 4:return function(we,he,Te){return q[Y](this[K],D(we,this),he,Te)};default:return function(){var we=o.call(arguments);return we.unshift(this[K]),q[Y].apply(q,we)}}},W=function(q,$,Y,K){n.each(Y,function(we,he){$[he]&&(q.prototype[he]=oe($,we,he,K))})},D=function(q,$){return n.isFunction(q)?q:n.isObject(q)&&!$._isModel(q)?B(q):n.isString(q)?function(Y){return Y.get(q)}:q},B=function(q){var $=n.matches(q);return function(Y){return $(Y.attributes)}},U={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},ie={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[P,U,"models"],[T,ie,"attributes"]],function(q){var $=q[0],Y=q[1],K=q[2];$.mixin=function(we){var he=n.reduce(n.functions(we),function(Te,Ce){return Te[Ce]=0,Te},{});W($,we,he,K)},W($,n,Y,K)}),r.sync=function(q,$,Y){var K=se[q];n.defaults(Y||(Y={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var we={type:K,dataType:"json"};if(Y.url||(we.url=n.result($,"url")||Ue()),Y.data==null&&$&&(q==="create"||q==="update"||q==="patch")&&(we.contentType="application/json",we.data=JSON.stringify(Y.attrs||$.toJSON(Y))),Y.emulateJSON&&(we.contentType="application/x-www-form-urlencoded",we.data=we.data?{model:we.data}:{}),Y.emulateHTTP&&(K==="PUT"||K==="DELETE"||K==="PATCH")){we.type="POST",Y.emulateJSON&&(we.data._method=K);var he=Y.beforeSend;Y.beforeSend=function(ze){if(ze.setRequestHeader("X-HTTP-Method-Override",K),he)return he.apply(this,arguments)}}we.type!=="GET"&&!Y.emulateJSON&&(we.processData=!1);var Te=Y.error;Y.error=function(ze,Le,Oe){Y.textStatus=Le,Y.errorThrown=Oe,Te&&Te.call(Y.context,ze,Le,Oe)};var Ce=Y.xhr=r.ajax(n.extend(we,Y));return $.trigger("request",$,Ce,Y),Ce};var se={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var xe=r.Router=function(q){q||(q={}),this.preinitialize.apply(this,arguments),q.routes&&(this.routes=q.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},me=/\((.*?)\)/g,ee=/(\(\?)?:\w+/g,ce=/\*\w+/g,re=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(xe.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(q,$,Y){n.isRegExp(q)||(q=this._routeToRegExp(q)),n.isFunction($)&&(Y=$,$=""),Y||(Y=this[$]);var K=this;return r.history.route(q,function(we){var he=K._extractParameters(q,we);K.execute(Y,he,$)!==!1&&(K.trigger.apply(K,["route:"+$].concat(he)),K.trigger("route",$,he),r.history.trigger("route",K,$,he))}),this},execute:function(q,$,Y){q&&q.apply(this,$)},navigate:function(q,$){return r.history.navigate(q,$),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var q,$=n.keys(this.routes);(q=$.pop())!=null;)this.route(q,this.routes[q])}},_routeToRegExp:function(q){return q=q.replace(re,"\\$&").replace(me,"(?:$1)?").replace(ee,function($,Y){return Y?$:"([^/?]+)"}).replace(ce,"([^?]*?)"),new RegExp("^"+q+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(q,$){var Y=q.exec($).slice(1);return n.map(Y,function(K,we){return we===Y.length-1?K||null:K?decodeURIComponent(K):null})}});var te=r.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},le=/^[#\/]|\s+$/g,Me=/^\/+|\/+$/g,Ge=/#.*$/;te.started=!1,n.extend(te.prototype,a,{interval:50,atRoot:function(){var q=this.location.pathname.replace(/[^\/]$/,"$&/");return q===this.root&&!this.getSearch()},matchRoot:function(){var q=this.decodeFragment(this.location.pathname),$=q.slice(0,this.root.length-1)+"/";return $===this.root},decodeFragment:function(q){return decodeURI(q.replace(/%25/g,"%2525"))},getSearch:function(){var q=this.location.href.replace(/#.*/,"").match(/\?.+/);return q?q[0]:""},getHash:function(q){var $=(q||this).location.href.match(/#(.*)$/);return $?$[1]:""},getPath:function(){var q=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return q.charAt(0)==="/"?q.slice(1):q},getFragment:function(q){return q==null&&(this._usePushState||!this._wantsHashChange?q=this.getPath():q=this.getHash()),q.replace(le,"")},start:function(q){if(te.started)throw new Error("Backbone.history has already been started");if(te.started=!0,this.options=n.extend({root:"/"},this.options,q),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Me,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var $=this.root.slice(0,-1)||"/";return this.location.replace($+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var Y=document.body,K=Y.insertBefore(this.iframe,Y.firstChild).contentWindow;K.document.open(),K.document.close(),K.location.hash="#"+this.fragment}var we=window.addEventListener||function(he,Te){return attachEvent("on"+he,Te)};if(this._usePushState?we("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?we("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var q=window.removeEventListener||function($,Y){return detachEvent("on"+$,Y)};this._usePushState?q("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&q("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),te.started=!1},route:function(q,$){this.handlers.unshift({route:q,callback:$})},checkUrl:function(q){var $=this.getFragment();if($===this.fragment&&this.iframe&&($=this.getHash(this.iframe.contentWindow)),$===this.fragment)return!1;this.iframe&&this.navigate($),this.loadUrl()},loadUrl:function(q){return this.matchRoot()?(q=this.fragment=this.getFragment(q),n.some(this.handlers,function($){if($.route.test(q))return $.callback(q),!0})):!1},navigate:function(q,$){if(!te.started)return!1;(!$||$===!0)&&($={trigger:!!$}),q=this.getFragment(q||"");var Y=this.root;(q===""||q.charAt(0)==="?")&&(Y=Y.slice(0,-1)||"/");var K=Y+q;q=q.replace(Ge,"");var we=this.decodeFragment(q);if(this.fragment!==we){if(this.fragment=we,this._usePushState)this.history[$.replace?"replaceState":"pushState"]({},document.title,K);else if(this._wantsHashChange){if(this._updateHash(this.location,q,$.replace),this.iframe&&q!==this.getHash(this.iframe.contentWindow)){var he=this.iframe.contentWindow;$.replace||(he.document.open(),he.document.close()),this._updateHash(he.location,q,$.replace)}}else return this.location.assign(K);if($.trigger)return this.loadUrl(q)}},_updateHash:function(q,$,Y){if(Y){var K=q.href.replace(/(javascript:|#).*$/,"");q.replace(K+"#"+$)}else q.hash="#"+$}}),r.history=new te;var Ie=function(q,$){var Y=this,K;return q&&n.has(q,"constructor")?K=q.constructor:K=function(){return Y.apply(this,arguments)},n.extend(K,Y,$),K.prototype=n.create(Y.prototype,q),K.prototype.constructor=K,K.__super__=Y.prototype,K};T.extend=P.extend=xe.extend=z.extend=te.extend=Ie;var Ue=function(){throw new Error('A "url" property or function must be specified')},We=function(q,$){var Y=$.error;$.error=function(K){Y&&Y.call($.context,q,K,$),q.trigger("error",q,K,$)}};return r})}(n2)),n2}var Qde=Zde();const fi=ah(Qde);var epe=M9();const qt=ah(epe),Ye=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,s=n.atan2,o=n.sqrt,a=n.min,u=n.max,c=n.cos,l=n.sin,h=function(d,C,O){if(!(this instanceof h))return h.apply(Object.create(h.prototype),arguments);if(d){if(h.isV(d)&&(d=d.node),C=C||{},h.isString(d)){if(d=d.trim(),d.toLowerCase()==="svg")d=h.createSvgDocument();else if(d[0]==="<"){var k=h.createSvgDocument(d);if(k.childNodes.length>1){var F=[],z,j;for(z=0,j=k.childNodes.length;z<j;z++){var J=k.childNodes[z];F.push(new h(document.importNode(J,!0)))}return F}d=document.importNode(k.firstChild,!0)}else d=document.createElementNS(t.svg,d);h.ensureId(d)}return this.node=d,this.setAttributes(C),O&&this.append(O),this}},v=h.prototype;Object.defineProperty(v,"id",{enumerable:!0,get:function(){return this.node.id},set:function(d){this.node.id=d}}),v.getTransformToElement=function(d){var C=this.node;if(h.isSVGGraphicsElement(d)&&h.isSVGGraphicsElement(C)){var O=h.toNode(d).getScreenCTM(),k=C.getScreenCTM();if(O&&k)return O.inverse().multiply(k)}return h.createSVGMatrix()},v.transform=function(d,C){var O=this.node;if(h.isUndefined(d))return h.transformStringToMatrix(this.attr("transform"));if(C&&C.absolute)return this.attr("transform",h.matrixToTransformString(d));var k=h.createSVGTransform(d);return O.transform.baseVal.appendItem(k),this},v.translate=function(d,C,O){O=O||{},C=C||0;var k=this.attr("transform")||"",F=h.parseTransformString(k);if(k=F.value,h.isUndefined(d))return F.translate;k=k.replace(/translate\([^)]*\)/g,"").trim();var z=O.absolute?d:F.translate.tx+d,j=O.absolute?C:F.translate.ty+C,J="translate("+z+","+j+")";return this.attr("transform",(J+" "+k).trim()),this},v.rotate=function(d,C,O,k){k=k||{};var F=this.attr("transform")||"",z=h.parseTransformString(F);if(F=z.value,h.isUndefined(d))return z.rotate;F=F.replace(/rotate\([^)]*\)/g,"").trim(),d%=360;var j=k.absolute?d:z.rotate.angle+d,J=C!==void 0&&O!==void 0?","+C+","+O:"",oe="rotate("+j+J+")";return this.attr("transform",(F+" "+oe).trim()),this},v.scale=function(d,C){C=h.isUndefined(C)?d:C;var O=this.attr("transform")||"",k=h.parseTransformString(O);if(O=k.value,h.isUndefined(d))return k.scale;O=O.replace(/scale\([^)]*\)/g,"").trim();var F="scale("+d+","+C+")";return this.attr("transform",(O+" "+F).trim()),this},v.bbox=function(d,C){var O,k=this.node,F=k.ownerSVGElement;if(!F)return new wt(0,0,0,0);try{O=k.getBBox()}catch{O={x:k.clientLeft,y:k.clientTop,width:k.clientWidth,height:k.clientHeight}}if(d)return new wt(O);var z=this.getTransformToElement(C||F);return h.transformRect(O,z)},v.getBBox=function(d){var C={},O,k=this.node,F=k.ownerSVGElement;if(!F||!h.isSVGGraphicsElement(k))return new wt(0,0,0,0);if(d&&(d.target&&(C.target=h.toNode(d.target)),d.recursive&&(C.recursive=d.recursive)),C.recursive){var j=this.children(),J=j.length;if(J===0)return this.getBBox({target:C.target,recursive:!1});C.target||(C.target=this);for(var oe=0;oe<J;oe++){var W=j[oe],D;W.children().length===0?D=W.getBBox({target:C.target,recursive:!1}):D=W.getBBox({target:C.target,recursive:!0}),O?O=O.union(D):O=D}return O}else{try{O=k.getBBox()}catch{O={x:k.clientLeft,y:k.clientTop,width:k.clientWidth,height:k.clientHeight}}if(C.target){var z=this.getTransformToElement(C.target);return h.transformRect(O,z)}else return new wt(O)}};function _(d,C){d||(d={});var O=h("textPath"),k=d.d;if(k&&d["xlink:href"]===void 0){var F=h("path").attr("d",k).appendTo(C.defs());O.attr("xlink:href","#"+F.id)}return h.isObject(d)&&O.attr(d),O.node}function m(d,C,O){O||(O={});for(var k=O.includeAnnotationIndices,F=O.eol,z=O.lineHeight,j=O.baseSize,J=0,oe={},W=C.length-1,D=0;D<=W;D++){var B=C[D],U=null;if(h.isObject(B)){var ie=B.attrs,se=h("tspan",ie),xe=se.node,me=B.t;F&&D===W&&(me+=F),xe.textContent=me;var ee=ie.class;ee&&se.addClass(ee),k&&se.attr("annotations",B.annotations),U=parseFloat(ie["font-size"]),isFinite(U)||(U=j),U&&U>J&&(J=U)}else F&&D===W&&(B+=F),xe=document.createTextNode(B||" "),j&&j>J&&(J=j);d.appendChild(xe)}return J&&(oe.maxFontSize=J),z?oe.lineHeight=z:J&&(oe.lineHeight=J*1.2),oe}var b=/em$/;function y(d,C){var O=parseFloat(d);return b.test(d)?O*C:O}function w(d,C,O,k){if(!Array.isArray(C))return 0;var F=C.length;if(!F)return 0;for(var z=C[0],j=y(z.maxFontSize,O)||O,J=0,oe=y(k,O),W=1;W<F;W++){z=C[W];var D=y(z.lineHeight,O)||oe;J+=D}var B=y(z.maxFontSize,O)||O,U;switch(d){case"middle":U=j/2-.15*B-J/2;break;case"bottom":U=-(.25*B)-J;break;default:case"top":U=.8*j;break}return U}v.text=function(d,C){if(d&&typeof d!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");d=h.sanitizeText(d),C||(C={});var O=C.displayEmpty,k=C.eol,F=C.textPath,z=C.textVerticalAnchor,j=z==="middle"||z==="bottom"||z==="top",J=C.x;J===void 0&&(J=this.attr("x")||0);var oe=C.includeAnnotationIndices,W=C.annotations;W&&!h.isArray(W)&&(W=[W]);var D=C.lineHeight,B=D==="auto",U=B?"1.5em":D||"1em";this.empty(),this.attr({"xml:space":"preserve",display:d||O?null:"none"});var ie=parseFloat(this.attr("font-size"));ie||(ie=16,(j||W)&&this.attr("font-size",ie));var se=document,xe;F?(typeof F=="string"&&(F={d:F}),xe=_(F,this)):xe=se.createDocumentFragment();for(var me=0,ee=d.split(`
`),ce=[],re,te=0,le=ee.length-1;te<=le;te++){var Me=U,Ge="v-line",Ie=se.createElementNS(t.svg,"tspan"),Ue=ee[te],We;if(Ue)if(W){var q=h.annotateString(Ue,W,{offset:-me,includeAnnotationIndices:oe});We=m(Ie,q,{includeAnnotationIndices:oe,eol:te!==le&&k,lineHeight:B?null:U,baseSize:ie});var $=We.lineHeight;$&&B&&te!==0&&(Me=$),te===0&&(re=We.maxFontSize*.8)}else k&&te!==le&&(Ue+=k),Ie.textContent=Ue;else{Ie.textContent="-",Ge+=" v-empty-line";var Y=Ie.style;if(Y.fillOpacity=0,Y.strokeOpacity=0,W){We={},q=h.findAnnotationsAtIndex(W,me);let we=ie;for(let he=q.length;he>0;he--){const Te=q[he-1].attrs;if(!Te||!("font-size"in Te))continue;const Ce=parseFloat(Te["font-size"]);if(isFinite(Ce)){we=Ce;break}}B&&(te>0?Me=we*1.2:re=we*.8),Ie.setAttribute("font-size",we),We.maxFontSize=we}}We&&ce.push(We),te>0&&Ie.setAttribute("dy",Me),(te>0||F)&&Ie.setAttribute("x",J),Ie.className.baseVal=Ge,xe.appendChild(Ie),me+=Ue.length+1}if(j)if(W)Me=w(z,ce,ie,U);else if(z==="top")Me="0.8em";else{var K;switch(le>0?(K=parseFloat(U)||1,K*=le,b.test(U)||(K/=ie)):K=0,z){case"middle":Me=.3-K/2+"em";break;case"bottom":Me=-K-.3+"em";break}}else z===0?Me="0em":z?Me=z:(Me=0,this.attr("y")===null&&this.attr("y",re||"0.8em"));return xe.firstChild.setAttribute("dy",Me),this.append(xe),this},v.removeAttr=function(d){const C=I[d],{ns:O,local:k}=h.qualifyAttr(C),F=this.node;return O?F.hasAttributeNS(O,k)&&F.removeAttributeNS(O,k):F.hasAttribute(C)&&F.removeAttribute(C),this},v.attr=function(d,C){if(h.isUndefined(d)){for(var O=this.node.attributes,k={},F=0;F<O.length;F++)k[O[F].name]=O[F].value;return k}if(h.isString(d)&&h.isUndefined(C))return this.node.getAttribute(I[d]);if(typeof d=="object")for(var z in d)d.hasOwnProperty(z)&&this.setAttribute(z,d[z]);else this.setAttribute(d,C);return this},v.normalizePath=function(){var d=this.tagName();return d==="PATH"&&this.attr("d",h.normalizePathData(this.attr("d"))),this},v.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},v.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},v.setAttributes=function(d){for(var C in d)d.hasOwnProperty(C)&&this.setAttribute(C,d[C]);return this},v.append=function(d){h.isArray(d)||(d=[d]);for(var C=0,O=d.length;C<O;C++)this.node.appendChild(h.toNode(d[C]));return this},v.prepend=function(d){var C=this.node.firstChild;return C?h(C).before(d):this.append(d)},v.before=function(d){var C=this.node,O=C.parentNode;if(O){h.isArray(d)||(d=[d]);for(var k=0,F=d.length;k<F;k++)O.insertBefore(h.toNode(d[k]),C)}return this},v.appendTo=function(d){return h.toNode(d).appendChild(this.node),this},v.svg=function(){return this.node instanceof window.SVGSVGElement?this:h(this.node.ownerSVGElement)},v.tagName=function(){return this.node.tagName.toUpperCase()},v.defs=function(){var d=this.svg()||this,C=d.node.getElementsByTagName("defs")[0];return C?h(C):h("defs").appendTo(d)},v.clone=function(){var d=h(this.node.cloneNode(!0));return d.node.id=h.uniqueId(),d},v.findOne=function(d){var C=this.node.querySelector(d);return C?h(C):void 0},v.find=function(d){var C=[],O=this.node.querySelectorAll(d);if(O)for(var k=0;k<O.length;k++)C.push(h(O[k]));return C},v.children=function(){for(var d=this.node.childNodes,C=[],O=0;O<d.length;O++){var k=d[O];k.nodeType===1&&C.push(h(d[O]))}return C},v.parent=function(){return h(this.node.parentNode)||null},v.index=function(){for(var d=0,C=this.node.previousSibling;C;)C.nodeType===1&&d++,C=C.previousSibling;return d},v.findParentByClass=function(d,C){for(var O=this.node.ownerSVGElement,k=this.node.parentNode;k&&k!==C&&k!==O;){var F=h(k);if(F.hasClass(d))return F;k=k.parentNode}return null},v.contains=function(d){var C=this.node,O=h.toNode(d),k=O&&O.parentNode;return C===k||!!(k&&k.nodeType===1&&C.compareDocumentPosition(k)&16)},v.toLocalPoint=function(d,C){var O=this.svg().node,k=O.createSVGPoint();k.x=d,k.y=C;try{var F=k.matrixTransform(O.getScreenCTM().inverse()),z=this.getTransformToElement(O).inverse()}catch{return k}return F.matrixTransform(z)},v.translateCenterToPoint=function(d){var C=this.getBBox({target:this.svg()}),O=C.center();return this.translate(d.x-O.x,d.y-O.y),this},v.translateAndAutoOrient=function(d,C,O){d=new ge(d),C=new ge(C),O||(O=this.svg());var k=this.scale();this.attr("transform","");var F=this.getBBox({target:O}).scale(k.sx,k.sy),z=h.createSVGTransform();z.setTranslate(-F.x-F.width/2,-F.y-F.height/2);var j=h.createSVGTransform(),J=d.angleBetween(C,d.clone().offset(1,0));J&&j.setRotate(J,0,0);var oe=h.createSVGTransform(),W=d.clone().move(C,F.width/2);oe.setTranslate(2*d.x-W.x,2*d.y-W.y);var D=this.getTransformToElement(O),B=h.createSVGTransform();return B.setMatrix(oe.matrix.multiply(j.matrix.multiply(z.matrix.multiply(D.scale(k.sx,k.sy))))),this.attr("transform",h.matrixToTransformString(B.matrix)),this},v.animateAlongPath=function(d,C){C=h.toNode(C);var O=h.ensureId(C),k=h("animateMotion",d),F=h("mpath",{"xlink:href":"#"+O});k.append(F),this.append(k);try{k.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var z=k.node;z.animators=[];var j=z.getAttribute("id");j&&(id2anim[j]=z);for(var J=getTargets(z),oe=0,W=J.length;oe<W;oe++){var D=J[oe],B=new Animator(z,D,oe);animators.push(B),z.animators[oe]=B,B.register()}}}return this};const T=/[^\x20\t\r\n\f]+/g;function P(d){return h.isString(d)?d.trim().match(T)||[]:[]}v.hasClass=function(d){return h.isString(d)?this.node.classList.contains(d.trim()):!1},v.addClass=function(d){return this.node.classList.add(...P(d)),this},v.removeClass=function(d){return this.node.classList.remove(...P(d)),this},v.toggleClass=function(d,C){const O=P(d);for(let k=0;k<O.length;k++)this.node.classList.toggle(O[k],C);return this},v.sample=function(d){d=d||1;for(var C=this.node,O=C.getTotalLength(),k=[],F=0,z;F<O;)z=C.getPointAtLength(F),k.push({x:z.x,y:z.y,distance:F}),F+=d;return k},v.convertToPath=function(){var d=h("path");d.attr(this.attr());var C=this.convertToPathData();return C&&d.attr("d",C),d},v.convertToPathData=function(){var d=this.tagName();switch(d){case"PATH":return this.attr("d");case"LINE":return h.convertLineToPathData(this.node);case"POLYGON":return h.convertPolygonToPathData(this.node);case"POLYLINE":return h.convertPolylineToPathData(this.node);case"ELLIPSE":return h.convertEllipseToPathData(this.node);case"CIRCLE":return h.convertCircleToPathData(this.node);case"RECT":return h.convertRectToPathData(this.node)}throw new Error(d+" cannot be converted to PATH.")},h.prototype.toGeometryShape=function(){var d,C,O,k,F,z,j,J,oe,W,D,B,U,ie,se;switch(this.tagName()){case"RECT":return d=parseFloat(this.attr("x"))||0,C=parseFloat(this.attr("y"))||0,O=parseFloat(this.attr("width"))||0,k=parseFloat(this.attr("height"))||0,new wt(d,C,O,k);case"CIRCLE":return F=parseFloat(this.attr("cx"))||0,z=parseFloat(this.attr("cy"))||0,j=parseFloat(this.attr("r"))||0,new ms({x:F,y:z},j,j);case"ELLIPSE":return F=parseFloat(this.attr("cx"))||0,z=parseFloat(this.attr("cy"))||0,J=parseFloat(this.attr("rx"))||0,oe=parseFloat(this.attr("ry"))||0,new ms({x:F,y:z},J,oe);case"POLYLINE":return W=h.getPointsFromSvgNode(this),new Tn(W);case"POLYGON":return W=h.getPointsFromSvgNode(this),W.length>1&&W.push(W[0]),new Tn(W);case"PATH":return D=this.attr("d"),zt.isDataSupported(D)||(D=h.normalizePathData(D)),new zt(D);case"LINE":return B=parseFloat(this.attr("x1"))||0,ie=parseFloat(this.attr("y1"))||0,U=parseFloat(this.attr("x2"))||0,se=parseFloat(this.attr("y2"))||0,new Ct({x:B,y:ie},{x:U,y:se})}return this.getBBox()},v.findIntersection=function(d,C){var O=this.svg().node;C=C||O;var k=this.getBBox({target:C}),F=k.center();if(k.intersectionWithLineFromCenterToPoint(d)){var z,j=this.tagName();if(j==="RECT"){var J=new wt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),oe=this.getTransformToElement(C),W=h.decomposeMatrix(oe),D=O.createSVGTransform();D.setRotate(-W.rotation,F.x,F.y);var B=h.transformRect(J,D.matrix.multiply(oe));z=new wt(B).intersectionWithLineFromCenterToPoint(d,W.rotation)}else if(j==="PATH"||j==="POLYGON"||j==="POLYLINE"||j==="CIRCLE"||j==="ELLIPSE"){var U=j==="PATH"?this:this.convertToPath(),ie=U.sample(),se=1/0,xe=[],me,ee,ce,re,te,le;for(me=0;me<ie.length;me++)ee=ie[me],ce=h.createSVGPoint(ee.x,ee.y),ce=ce.matrixTransform(this.getTransformToElement(C)),ee=new ge(ce),re=ee.distance(F),te=ee.distance(d)*1.1,le=re+te,le<se?(se=le,xe=[{sample:ee,refDistance:te}]):le<se+1&&xe.push({sample:ee,refDistance:te});xe.sort(function(Me,Ge){return Me.refDistance-Ge.refDistance}),xe[0]&&(z=xe[0].sample)}return z}},v.setAttribute=function(d,C){const O=this.node;if(C===null)return this.removeAttr(d),this;const k=I[d],{ns:F}=h.qualifyAttr(k);return F?O.setAttributeNS(F,k,C):k==="id"?O.id=C:O.setAttribute(k,C),this},h.createSvgDocument=function(d){if(d){const O=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${r}">${d}</svg>`,{documentElement:k}=h.parseXML(O,{async:!1});return k}const C=document.createElementNS(t.svg,"svg");return C.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),C.setAttribute("version",r),C},h.createSVGStyle=function(d){const{node:C}=h("style",{type:"text/css"},[h.createCDATASection(d)]);return C},h.createCDATASection=function(d=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(d)},h.idCounter=0,h.uniqueId=function(){return"v-"+ ++h.idCounter},h.toNode=function(d){return h.isV(d)?d.node:d.nodeName&&d||d[0]},h.ensureId=function(d){return d=h.toNode(d),d.id||(d.id=h.uniqueId())},h.sanitizeText=function(d){return(d||"").replace(/ /g,"Â ")},h.isUndefined=function(d){return typeof d>"u"},h.isString=function(d){return typeof d=="string"},h.isObject=function(d){return d&&typeof d=="object"},h.isArray=Array.isArray,h.parseXML=function(d,C){C=C||{};var O;try{var k=new DOMParser;h.isUndefined(C.async)||(k.async=C.async),O=k.parseFromString(d,"text/xml")}catch{O=void 0}if(!O||O.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+d);return O};const A=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(d=>A[d]=d);const I=new Proxy(A,{get(d,C){return h.supportCamelCaseAttributes?C in d?d[C]:d[C]=C.replace(/[A-Z]/g,"-$&").toLowerCase():C}});Object.defineProperty(h,"attributeNames",{value:I,writable:!1}),Object.defineProperty(h,"supportCamelCaseAttributes",{value:!1,writable:!0}),h.qualifyAttr=function(d){if(d.indexOf(":")!==-1){var C=d.split(":");return{ns:t[C[0]],local:C[1]}}return{ns:null,local:d}},h.transformSeparatorRegex=/[ ,]+/,h.transformRegex=/\b\w+\([^()]+\)/g,h.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,h.transformTranslateRegex=/\btranslate\(([^()]+)\)/,h.transformRotateRegex=/\brotate\(([^()]+)\)/,h.transformScaleRegex=/\bscale\(([^()]+)\)/,h.transformStringToMatrix=function(d){let C=h.createSVGMatrix();const O=d&&d.match(h.transformRegex);if(!O)return C;const k=O.length;for(let F=0;F<k;F++){const j=O[F].match(h.transformFunctionRegex);if(j){let J,oe,W,D,B,U=h.createSVGMatrix();const ie=j[1].toLowerCase(),se=j[2].split(h.transformSeparatorRegex);switch(ie){case"scale":J=parseFloat(se[0]),oe=se[1]===void 0?J:parseFloat(se[1]),U=U.scaleNonUniform(J,oe);break;case"translate":W=parseFloat(se[0]),D=parseFloat(se[1]),U=U.translate(W,D);break;case"rotate":B=parseFloat(se[0]),W=parseFloat(se[1])||0,D=parseFloat(se[2])||0,W!==0||D!==0?U=U.translate(W,D).rotate(B).translate(-W,-D):U=U.rotate(B);break;case"skewx":B=parseFloat(se[0]),U=U.skewX(B);break;case"skewy":B=parseFloat(se[0]),U=U.skewY(B);break;case"matrix":U.a=parseFloat(se[0]),U.b=parseFloat(se[1]),U.c=parseFloat(se[2]),U.d=parseFloat(se[3]),U.e=parseFloat(se[4]),U.f=parseFloat(se[5]);break;default:continue}C=C.multiply(U)}}return C},h.matrixToTransformString=function(d){return d||(d=!0),"matrix("+(d.a!==void 0?d.a:1)+","+(d.b!==void 0?d.b:0)+","+(d.c!==void 0?d.c:0)+","+(d.d!==void 0?d.d:1)+","+(d.e!==void 0?d.e:0)+","+(d.f!==void 0?d.f:0)+")"},h.parseTransformString=function(d){var C,O,k;if(d){var F=h.transformSeparatorRegex;if(d.trim().indexOf("matrix")>=0){var z=h.transformStringToMatrix(d),j=h.decomposeMatrix(z);C=[j.translateX,j.translateY],k=[j.scaleX,j.scaleY],O=[j.rotation];var J=[];(C[0]!==0||C[1]!==0)&&J.push("translate("+C+")"),(k[0]!==1||k[1]!==1)&&J.push("scale("+k+")"),O[0]!==0&&J.push("rotate("+O+")"),d=J.join(" ")}else{const W=d.match(h.transformTranslateRegex);W&&(C=W[1].split(F));const D=d.match(h.transformRotateRegex);D&&(O=D[1].split(F));const B=d.match(h.transformScaleRegex);B&&(k=B[1].split(F))}}var oe=k&&k[0]?parseFloat(k[0]):1;return{value:d,translate:{tx:C&&C[0]?parseInt(C[0],10):0,ty:C&&C[1]?parseInt(C[1],10):0},rotate:{angle:O&&O[0]?parseInt(O[0],10):0,cx:O&&O[1]?parseInt(O[1],10):void 0,cy:O&&O[2]?parseInt(O[2],10):void 0},scale:{sx:oe,sy:k&&k[1]?parseFloat(k[1]):oe}}},h.deltaTransformPoint=function(d,C){var O=C.x*d.a+C.y*d.c+0,k=C.x*d.b+C.y*d.d+0;return{x:O,y:k}},h.decomposeMatrix=function(d){var C=h.deltaTransformPoint(d,{x:0,y:1}),O=h.deltaTransformPoint(d,{x:1,y:0}),k=180/i*s(C.y,C.x)-90,F=180/i*s(O.y,O.x);return{translateX:d.e,translateY:d.f,scaleX:o(d.a*d.a+d.b*d.b),scaleY:o(d.c*d.c+d.d*d.d),skewX:k,skewY:F,rotation:k}},h.matrixToScale=function(d){var C,O,k,F;return d?(C=h.isUndefined(d.a)?1:d.a,F=h.isUndefined(d.d)?1:d.d,O=d.b,k=d.c):C=F=1,{sx:O?o(C*C+O*O):C,sy:k?o(k*k+F*F):F}},h.matrixToRotate=function(d){var C={x:0,y:1};return d&&(C=h.deltaTransformPoint(d,C)),{angle:_a(lm(s(C.y,C.x))-90)}},h.matrixToTranslate=function(d){return{tx:d&&d.e||0,ty:d&&d.f||0}},h.isV=function(d){return d instanceof h},h.isVElement=h.isV,h.isSVGGraphicsElement=function(d){return d?(d=h.toNode(d),d instanceof SVGElement&&typeof d.getScreenCTM=="function"):!1};var N=h("svg").node;return h.createSVGMatrix=function(d){var C=N.createSVGMatrix();for(var O in d)C[O]=d[O];return C},h.createSVGTransform=function(d){return h.isUndefined(d)?N.createSVGTransform():(d instanceof SVGMatrix||(d=h.createSVGMatrix(d)),N.createSVGTransformFromMatrix(d))},h.createSVGPoint=function(d,C){var O=N.createSVGPoint();return O.x=d,O.y=C,O},h.transformRect=function(d,C){var O=N.createSVGPoint();O.x=d.x,O.y=d.y;var k=O.matrixTransform(C);O.x=d.x+d.width,O.y=d.y;var F=O.matrixTransform(C);O.x=d.x+d.width,O.y=d.y+d.height;var z=O.matrixTransform(C);O.x=d.x,O.y=d.y+d.height;var j=O.matrixTransform(C),J=a(k.x,F.x,z.x,j.x),oe=u(k.x,F.x,z.x,j.x),W=a(k.y,F.y,z.y,j.y),D=u(k.y,F.y,z.y,j.y);return new wt(J,W,oe-J,D-W)},h.transformPoint=function(d,C){return new ge(h.createSVGPoint(d.x,d.y).matrixTransform(C))},h.transformLine=function(d,C){return new Ct(h.transformPoint(d.start,C),h.transformPoint(d.end,C))},h.transformPolyline=function(d,C){var O=d instanceof Tn?d.points:d;h.isArray(O)||(O=[]);for(var k=[],F=0,z=O.length;F<z;F++)k[F]=h.transformPoint(O[F],C);return new Tn(k)},h.styleToObject=function(d){for(var C={},O=d.split(";"),k=0;k<O.length;k++){var F=O[k],z=F.split("=");C[z[0].trim()]=z[1].trim()}return C},h.createSlicePathData=function(d,C,O,k){var F=2*i-1e-6,z=d,j=C,J=O,oe=k,W=(oe<J&&(W=J,J=oe,oe=W),oe-J),D=W<i?"0":"1",B=c(J),U=l(J),ie=c(oe),se=l(oe);return W>=F?z?"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"M0,"+z+"A"+z+","+z+" 0 1,0 0,"+-z+"A"+z+","+z+" 0 1,0 0,"+z+"Z":"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"Z":z?"M"+j*B+","+j*U+"A"+j+","+j+" 0 "+D+",1 "+j*ie+","+j*se+"L"+z*ie+","+z*se+"A"+z+","+z+" 0 "+D+",0 "+z*B+","+z*U+"Z":"M"+j*B+","+j*U+"A"+j+","+j+" 0 "+D+",1 "+j*ie+","+j*se+"L0,0Z"},h.mergeAttrs=function(d,C){for(var O in C)O==="class"?d[O]=d[O]?d[O]+" "+C[O]:C[O]:O==="style"?h.isObject(d[O])&&h.isObject(C[O])?d[O]=h.mergeAttrs(d[O],C[O]):h.isObject(d[O])?d[O]=h.mergeAttrs(d[O],h.styleToObject(C[O])):h.isObject(C[O])?d[O]=h.mergeAttrs(h.styleToObject(d[O]),C[O]):d[O]=h.mergeAttrs(h.styleToObject(d[O]),h.styleToObject(C[O])):d[O]=C[O];return d},h.annotateString=function(d,C,O){C=C||[],O=O||{};for(var k=O.offset||0,F=[],z,j=[],J,oe,W=0;W<d.length;W++){J=j[W]=d[W];for(var D=0;D<C.length;D++){var B=C[D],U=B.start+k,ie=B.end+k;W>=U&&W<ie&&(h.isObject(J)?J.attrs=h.mergeAttrs(h.mergeAttrs({},J.attrs),B.attrs):J=j[W]={t:d[W],attrs:B.attrs},O.includeAnnotationIndices&&(J.annotations||(J.annotations=[])).push(D))}oe=j[W-1],oe?h.isObject(J)&&h.isObject(oe)?JSON.stringify(J.attrs)===JSON.stringify(oe.attrs)?z.t+=J.t:(F.push(z),z=J):h.isObject(J)||h.isObject(oe)?(F.push(z),z=J):z=(z||"")+J:z=J}return z&&F.push(z),F},h.findAnnotationsAtIndex=function(d,C){var O=[];return d&&d.forEach(function(k){k.start<C&&C<=k.end&&O.push(k)}),O},h.findAnnotationsBetweenIndexes=function(d,C,O){var k=[];return d&&d.forEach(function(F){(C>=F.start&&C<F.end||O>F.start&&O<=F.end||F.start>=C&&F.end<O)&&k.push(F)}),k},h.shiftAnnotations=function(d,C,O){return d&&d.forEach(function(k){k.start<C&&k.end>=C?k.end+=O:k.start>=C&&(k.start+=O,k.end+=O)}),d},h.convertLineToPathData=function(d){d=h(d);var C=["M",d.attr("x1"),d.attr("y1"),"L",d.attr("x2"),d.attr("y2")].join(" ");return C},h.convertPolygonToPathData=function(d){var C=h.getPointsFromSvgNode(d);return C.length===0?null:h.svgPointsToPath(C)+" Z"},h.convertPolylineToPathData=function(d){var C=h.getPointsFromSvgNode(d);return C.length===0?null:h.svgPointsToPath(C)},h.svgPointsToPath=function(d){for(var C=0,O=d.length;C<O;C++)d[C]=d[C].x+" "+d[C].y;return"M "+d.join(" L")},h.getPointsFromSvgNode=function(d){d=h.toNode(d);var C=[],O=d.points;if(O)for(var k=0,F=O.numberOfItems;k<F;k++)C.push(O.getItem(k));return C},h.KAPPA=.551784,h.convertCircleToPathData=function(d){d=h(d);var C=parseFloat(d.attr("cx"))||0,O=parseFloat(d.attr("cy"))||0,k=parseFloat(d.attr("r")),F=k*h.KAPPA,z=["M",C,O-k,"C",C+F,O-k,C+k,O-F,C+k,O,"C",C+k,O+F,C+F,O+k,C,O+k,"C",C-F,O+k,C-k,O+F,C-k,O,"C",C-k,O-F,C-F,O-k,C,O-k,"Z"].join(" ");return z},h.convertEllipseToPathData=function(d){d=h(d);var C=parseFloat(d.attr("cx"))||0,O=parseFloat(d.attr("cy"))||0,k=parseFloat(d.attr("rx")),F=parseFloat(d.attr("ry"))||k,z=k*h.KAPPA,j=F*h.KAPPA,J=["M",C,O-F,"C",C+z,O-F,C+k,O-j,C+k,O,"C",C+k,O+j,C+z,O+F,C,O+F,"C",C-z,O+F,C-k,O+j,C-k,O,"C",C-k,O-j,C-z,O-F,C,O-F,"Z"].join(" ");return J},h.convertRectToPathData=function(d){return d=h(d),h.rectToPath({x:parseFloat(d.attr("x"))||0,y:parseFloat(d.attr("y"))||0,width:parseFloat(d.attr("width"))||0,height:parseFloat(d.attr("height"))||0,rx:parseFloat(d.attr("rx"))||0,ry:parseFloat(d.attr("ry"))||0})},h.rectToPath=function(d){var C,O=d.x,k=d.y,F=d.width,z=d.height,j=a(d.rx||d["top-rx"]||0,F/2),J=a(d.rx||d["bottom-rx"]||0,F/2),oe=a(d.ry||d["top-ry"]||0,z/2),W=a(d.ry||d["bottom-ry"]||0,z/2);return j||J||oe||W?C=["M",O,k+oe,"v",z-oe-W,"a",J,W,0,0,0,J,W,"h",F-2*J,"a",J,W,0,0,0,J,-W,"v",-(z-W-oe),"a",j,oe,0,0,0,-j,-oe,"h",-(F-2*j),"a",j,oe,0,0,0,-j,oe,"Z"]:C=["M",O,k,"H",O+F,"V",k+z,"H",O,"V",k,"Z"],C.join(" ")},h.normalizePathData=function(){var d=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029`,C=new RegExp("([a-z])["+d+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+d+"]*,?["+d+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+d+"]*,?["+d+"]*","ig"),k=Math,F=k.PI,z=k.sin,j=k.cos,J=k.tan,oe=k.asin,W=k.sqrt,D=k.abs;function B(ee,ce,re,te,le,Me){var Ge=.3333333333333333,Ie=2/3;return[Ge*ee+Ie*re,Ge*ce+Ie*te,Ge*le+Ie*re,Ge*Me+Ie*te,le,Me]}function U(ee,ce,re){var te=ee*j(re)-ce*z(re),le=ee*z(re)+ce*j(re);return{x:te,y:le}}function ie(ee,ce,re,te,le,Me,Ge,Ie,Ue,We){var q=F*120/180,$=F/180*(+le||0),Y=[],K;if(We)Je=We[0],dt=We[1],Oe=We[2],Ee=We[3];else{K=U(ee,ce,-$),ee=K.x,ce=K.y,K=U(Ie,Ue,-$),Ie=K.x,Ue=K.y;var we=(ee-Ie)/2,he=(ce-Ue)/2,Te=we*we/(re*re)+he*he/(te*te);Te>1&&(Te=W(Te),re=Te*re,te=Te*te);var Ce=re*re,ze=te*te,Le=(Me==Ge?-1:1)*W(D((Ce*ze-Ce*he*he-ze*we*we)/(Ce*he*he+ze*we*we))),Oe=Le*re*he/te+(ee+Ie)/2,Ee=Le*-te*we/re+(ce+Ue)/2,Je=oe(((ce-Ee)/te).toFixed(9)),dt=oe(((Ue-Ee)/te).toFixed(9));Je=ee<Oe?F-Je:Je,dt=Ie<Oe?F-dt:dt,Je<0&&(Je=F*2+Je),dt<0&&(dt=F*2+dt),Ge&&Je>dt&&(Je=Je-F*2),!Ge&&dt>Je&&(dt=dt-F*2)}var Et=dt-Je;if(D(Et)>q){var vt=dt,ut=Ie,Jt=Ue;dt=Je+q*(Ge&&dt>Je?1:-1),Ie=Oe+re*j(dt),Ue=Ee+te*z(dt),Y=ie(Ie,Ue,re,te,le,0,Ge,ut,Jt,[dt,vt,Oe,Ee])}Et=dt-Je;var pr=j(Je),sr=z(Je),yr=j(dt),Zr=z(dt),Nr=J(Et/4),Pn=4/3*(re*Nr),lr=4/3*(te*Nr),qr=[ee,ce],In=[ee+Pn*sr,ce-lr*pr],Rn=[Ie+Pn*Zr,Ue-lr*yr],Cn=[Ie,Ue];if(In[0]=2*qr[0]-In[0],In[1]=2*qr[1]-In[1],We)return[In,Rn,Cn].concat(Y);Y=[In,Rn,Cn].concat(Y).join().split(",");for(var ii=[],di=Y.length,Ht=0;Ht<di;Ht++)ii[Ht]=Ht%2?U(Y[Ht-1],Y[Ht],$).y:U(Y[Ht],Y[Ht+1],$).x;return ii}function se(ee){if(!ee)return null;var ce={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},re=[];return String(ee).replace(C,function(te,le,Me){var Ge=[],Ie=le.toLowerCase();for(Me.replace(O,function(Ue,We){We&&Ge.push(+We)}),Ie==="m"&&Ge.length>2&&(re.push([le].concat(Ge.splice(0,2))),Ie="l",le=le==="m"?"l":"L");Ge.length>=ce[Ie]&&(re.push([le].concat(Ge.splice(0,ce[Ie]))),!!ce[Ie]););}),re}function xe(ee){if((!Array.isArray(ee)||!Array.isArray(ee&&ee[0]))&&(ee=se(ee)),!ee||!ee.length)return[["M",0,0]];for(var ce=[],re=0,te=0,le=0,Me=0,Ge=0,Ie,Ue=ee.length,We=Ge;We<Ue;We++){var q=[];ce.push(q);var $=ee[We];if(Ie=$[0],Ie!=Ie.toUpperCase()){q[0]=Ie.toUpperCase();var Y,K;switch(q[0]){case"A":q[1]=$[1],q[2]=$[2],q[3]=$[3],q[4]=$[4],q[5]=$[5],q[6]=+$[6]+re,q[7]=+$[7]+te;break;case"V":q[1]=+$[1]+te;break;case"H":q[1]=+$[1]+re;break;case"M":for(le=+$[1]+re,Me=+$[2]+te,Y=$.length,K=1;K<Y;K++)q[K]=+$[K]+(K%2?re:te);break;default:for(Y=$.length,K=1;K<Y;K++)q[K]=+$[K]+(K%2?re:te);break}}else for(var we=$.length,he=0;he<we;he++)q[he]=$[he];switch(q[0]){case"Z":re=+le,te=+Me;break;case"H":re=q[1];break;case"V":te=q[1];break;case"M":le=q[q.length-2],Me=q[q.length-1],re=q[q.length-2],te=q[q.length-1];break;default:re=q[q.length-2],te=q[q.length-1];break}}return ce}function me(ee){var ce=xe(ee),re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function te(Y,K,we){var he,Te;if(!Y)return["C",K.x,K.y,K.x,K.y,K.x,K.y];switch(Y[0]in{T:1,Q:1}||(K.qx=null,K.qy=null),Y[0]){case"M":K.X=Y[1],K.Y=Y[2];break;case"A":parseFloat(Y[1])===0||parseFloat(Y[2])===0?Y=["L",Y[6],Y[7]]:Y=["C"].concat(ie.apply(0,[K.x,K.y].concat(Y.slice(1))));break;case"S":we==="C"||we==="S"?(he=K.x*2-K.bx,Te=K.y*2-K.by):(he=K.x,Te=K.y),Y=["C",he,Te].concat(Y.slice(1));break;case"T":we==="Q"||we==="T"?(K.qx=K.x*2-K.qx,K.qy=K.y*2-K.qy):(K.qx=K.x,K.qy=K.y),Y=["C"].concat(B(K.x,K.y,K.qx,K.qy,Y[1],Y[2]));break;case"Q":K.qx=Y[1],K.qy=Y[2],Y=["C"].concat(B(K.x,K.y,Y[1],Y[2],Y[3],Y[4]));break;case"H":Y=["L"].concat(Y[1],K.y);break;case"V":Y=["L"].concat(K.x,Y[1]);break}return Y}function le(Y,K){if(Y[K].length>7){Y[K].shift();for(var we=Y[K];we.length;)Me[K]="A",Y.splice(K++,0,["C"].concat(we.splice(0,6)));Y.splice(K,1),Ue=ce.length}}for(var Me=[],Ge="",Ie="",Ue=ce.length,We=0;We<Ue;We++){ce[We]&&(Ge=ce[We][0]),Ge!=="C"&&(Me[We]=Ge,We>0&&(Ie=Me[We-1])),ce[We]=te(ce[We],re,Ie),Me[We]!=="A"&&Ge==="C"&&(Me[We]="C"),le(ce,We);var q=ce[We],$=q.length;re.x=q[$-2],re.y=q[$-1],re.bx=parseFloat(q[$-4])||re.x,re.by=parseFloat(q[$-3])||re.y}return(!ce[0][0]||ce[0][0]!=="M")&&ce.unshift(["M",0,0]),ce}return function(ee){return me(ee).join(",").split(",").join(" ")}}(),h.namespace=t,h.g=xde,h}(),Sc={classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Md="[object Arguments]",K2="[object Array]",Am="[object Boolean]",TP="[object Date]",L9="[object Error]",tpe="[object Function]",hp="[object Map]",Tm="[object Number]",rpe="[object Null]",Sf="[object Object]",PP="[object RegExp]",dp="[object Set]",Pm="[object String]",Cm="[object Symbol]",npe="[object Undefined]",ipe="[object WeakMap]",CP="[object ArrayBuffer]",OP="[object DataView]",N9="[object Float32Array]",q9="[object Float64Array]",D9="[object Int8Array]",F9="[object Int16Array]",B9="[object Int32Array]",z9="[object Uint8Array]",V9="[object Uint8ClampedArray]",$9="[object Uint16Array]",G9="[object Uint32Array]",spe={[Md]:!0,[K2]:!0,[CP]:!0,[OP]:!0,[Am]:!0,[TP]:!0,[N9]:!0,[q9]:!0,[D9]:!0,[F9]:!0,[B9]:!0,[hp]:!0,[Tm]:!0,[Sf]:!0,[PP]:!0,[dp]:!0,[Pm]:!0,[Cm]:!0,[z9]:!0,[V9]:!0,[$9]:!0,[G9]:!0,[L9]:!1,[tpe]:!1,[ipe]:!1},IP="\\ud800-\\udfff",ope="\\u0300-\\u036f",ape="\\ufe20-\\ufe2f",upe="\\u20d0-\\u20ff",cpe="\\u1ab0-\\u1aff",lpe="\\u1dc0-\\u1dff",fpe=ope+ape+upe+cpe+lpe,U9="\\u2700-\\u27bf",j9="a-z\\xdf-\\xf6\\xf8-\\xff",hpe="\\xac\\xb1\\xd7\\xf7",dpe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ppe="\\u2000-\\u206f",vpe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H9="A-Z\\xc0-\\xd6\\xd8-\\xde",gpe="\\ufe0e\\ufe0f",W9=hpe+dpe+ppe+vpe,X9="['â]",m7=`[${W9}]`,RP=`[${fpe}]`,Y9="\\d",mpe=`[${U9}]`,K9=`[${j9}]`,J9=`[^${IP}${W9+Y9+U9+j9+H9}]`,J2="\\ud83c[\\udffb-\\udfff]",ype=`(?:${RP}|${J2})`,Z9=`[^${IP}]`,kP="(?:\\ud83c[\\udde6-\\uddff]){2}",MP="[\\ud800-\\udbff][\\udc00-\\udfff]",yf=`[${H9}]`,_pe="\\u200d",y7=`(?:${K9}|${J9})`,bpe=`(?:${yf}|${J9})`,_7=`(?:${X9}(?:d|ll|m|re|s|t|ve))?`,b7=`(?:${X9}(?:D|LL|M|RE|S|T|VE))?`,Q9=`${ype}?`,eH=`[${gpe}]?`,wpe=`(?:${_pe}(?:${[Z9,kP,MP].join("|")})${eH+Q9})*`,xpe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Spe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tH=eH+Q9+wpe,Epe=`(?:${[mpe,kP,MP].join("|")})${tH}`,Ape=RegExp([`${yf}?${K9}+${_7}(?=${[m7,yf,"$"].join("|")})`,`${bpe}+${b7}(?=${[m7,yf+y7,"$"].join("|")})`,`${yf}?${y7}+${_7}`,`${yf}+${b7}`,Spe,xpe,`${Y9}+`,Epe].join("|"),"g"),LP=200,Z2="__hash_undefined__",Tpe=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,Ppe=`[${IP}]`,Cpe=`${Z9}${RP}?`,Ope=`(?:${[Cpe,RP,kP,MP,Ppe].join("|")})`,rH=RegExp(`${J2}(?=${J2})|${Ope+tH}`,"g"),Ipe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rpe=/^\w*$/,kpe=46,Mpe=/\\(\\)?/g,Lpe=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Npe=/^(?:0|[1-9]\d*)$/,qpe=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),Dpe=4294967294,Fpe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nH=e=>rH.test(e),Bpe=e=>e.match(rH)||[],zpe=e=>e.split(""),iH=e=>nH(e)?Bpe(e):zpe(e),Vpe=e=>e==null?[]:pp(e).map(t=>e[t]),pp=e=>Jo(e)?sH(e):Object.keys(Object(e)),$pe=e=>{if(!Om(e))return Object.keys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&r!="constructor"&&t.push(r);return t},sH=(e,t)=>{const r=Array.isArray(e),n=!r&&wa(e)&&Uo(e)===Md,i=!r&&!n&&gp(e),s=r||n||i,o=e.length,a=new Array(s?o:0);let u=s?-1:o;for(;++u<o;)a[u]=`${u}`;for(const c in e)(t||hasOwnProperty.call(e,c))&&!(s&&(c==="length"||BP(c,o)))&&a.push(c);return a},Ov=(e,t)=>{let{length:r}=e;for(;r--;)if(yh(e[r][0],t))return r;return-1},yh=(e,t)=>e===t||e!==e&&t!==t,wa=e=>e!=null&&typeof e=="object",dg=(e,t,r)=>{if(!rn(r))return!1;const n=typeof t;return(n=="number"?Jo(r)&&t>-1&&t<r.length:n=="string"&&t in r)?yh(r[t],e):!1},Gpe=e=>wa(e)&&Uo(e)==dp,Upe=e=>wa(e)&&Uo(e)==hp,Om=e=>{const t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Object.prototype;return e===r},_h=(e,t,r)=>{const n=e[t];(!(hasOwnProperty.call(e,t)&&yh(n,r))||r===void 0&&!(t in e))&&(e[t]=r)},vp=(e,t,r)=>{let n=-1;const i=t.length;for(;++n<i;){const s=t[n];_h(r,s,e[s])}return r},Jo=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Zf=e=>typeof e=="symbol"||wa(e)&&Uo(e)===Cm,jpe=e=>{const t=e.length;let r=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(r.index=e.index,r.input=e.input),r},NP=(e,t)=>{let r=-1;const n=e.length;for(t||(t=new Array(n));++r<n;)t[r]=e[r];return t},Uo=e=>e==null?e===void 0?npe:rpe:Object.prototype.toString.call(e),qP=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},oH=(e,t)=>{const r=t?qP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Hpe=e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},aH=e=>typeof e.constructor=="function"&&!Om(e)?Object.create(Object.getPrototypeOf(e)):{},DP=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(r=>propertyIsEnumerable.call(e,r))),Wpe=(e,t)=>vp(e,DP(e),t);function Xpe(e,t){const r=t?qP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}const Ype=(e,t,r)=>{const n=e.constructor;switch(t){case CP:return qP(e);case Am:case TP:return new n(+e);case OP:return Xpe(e,r);case N9:case q9:case D9:case F9:case B9:case z9:case V9:case $9:case G9:return oH(e,r);case hp:return new n(e);case Tm:case Pm:return new n(e);case PP:return Hpe(e);case dp:return new n;case Cm:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},gp=e=>wa(e)&&Tpe.test(Uo(e)),Q2=e=>{const t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...DP(Object(e))),t},uH=e=>{const t=[];for(;e;)t.push(...DP(e)),e=Object.getPrototypeOf(Object(e));return t},cH=e=>{const t=[];for(const r in e)t.push(r);return Array.isArray(e)||t.push(...uH(e)),t},Iv=({__data__:e},t)=>{const r=e;return ave(t)?r[typeof t=="string"?"string":"hash"]:r.map},Kpe=(e,t,r,n)=>{const i=Q2(e),s=i.length,a=Q2(t).length;if(s!=a)return!1;let u,c=s;for(;c--;)if(u=i[c],!hasOwnProperty.call(t,u))return!1;const l=n.get(e),h=n.get(t);if(l&&h)return l==t&&h==e;let v=!0;n.set(e,t),n.set(t,e);let _;for(;++c<s;){u=i[c];const m=e[u],b=t[u];if(!(m===b||r(m,b,n))){v=!1;break}_||(_=u=="constructor")}if(v&&!_){const m=e.constructor,b=t.constructor;m!=b&&"constructor"in e&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof b=="function"&&b instanceof b)&&(v=!1)}return n.delete(e),n.delete(t),v},Im=(e,t,r)=>e===t?!0:e==null||t==null||!wa(e)&&!wa(t)?e!==e&&t!==t:Jpe(e,t,Im,r),Jpe=(e,t,r,n)=>{let i=Array.isArray(e);const s=Array.isArray(t);let o=i?K2:Uo(e),a=s?K2:Uo(t);o=o==Md?Sf:o,a=a==Md?Sf:a;let u=o==Sf;const c=a==Sf,l=o==a;if(l&&!u)return n||(n=new Rf),i||gp(e)?lH(e,t,!1,r,n):eve(e,t,o,r,n);const h=u&&hasOwnProperty.call(e,"__wrapped__"),v=c&&hasOwnProperty.call(t,"__wrapped__");if(h||v){const _=h?e.value():e,m=v?t.value():t;return n||(n=new Rf),r(_,m,n)}return l?(n||(n=new Rf),Kpe(e,t,r,n)):!1},lH=(e,t,r,n,i)=>{const s=e.length,o=t.length;if(s!=o)return!1;const a=i.get(e),u=i.get(t);if(a&&u)return a==t&&u==e;let c=-1,l=!0;const h=r?new Nd:void 0;for(i.set(e,t),i.set(t,e);++c<s;){const v=e[c],_=t[c];if(h){if(!Zpe(t,(m,b)=>{if(!Qpe(h,b)&&(v===m||n(v,m,i)))return h.push(b)})){l=!1;break}}else if(!(v===_||n(v,_,i))){l=!1;break}}return i.delete(e),i.delete(t),l},Zpe=(e,t)=>{let r=-1;const n=e==null?0:e.length;for(;++r<n;)if(t(e[r],r,e))return!0;return!1},Qpe=(e,t)=>e.has(t),w7=(e,t,r,n)=>!(e.byteLength!=t.byteLength||!r(new Uint8Array(e),new Uint8Array(t),n)),eve=(e,t,r,n,i)=>{switch(r){case OP:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,w7(e,t,n,i));case CP:return w7(e,t,n,i);case Am:case TP:case Tm:return yh(+e,+t);case L9:return e.name==t.name&&e.message==t.message;case PP:case Pm:return e==`${t}`;case hp:let s=fH;case dp:if(s||(s=Rm),e.size!=t.size)return!1;const o=i.get(e);if(o)return o==t;i.set(e,t);const a=lH(s(e),s(t),!0,n,i);return i.delete(e),a;case Cm:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},fH=e=>{let t=-1,r=Array(e.size);return e.forEach((n,i)=>{r[++t]=[i,n]}),r},Rm=e=>{let t=-1;const r=new Array(e.size);return e.forEach(n=>{r[++t]=n}),r},FP=(e,t)=>{if(Array.isArray(e))return!1;const r=typeof e;return r==="number"||r==="boolean"||e==null||Zf(e)?!0:Rpe.test(e)||!Ipe.test(e)||t!=null&&e in Object(t)},tve=e=>{const t=[];return e.charCodeAt(0)===kpe&&t.push(""),e.replace(Lpe,(r,n,i,s)=>{let o=r;i?o=s.replace(Mpe,"$1"):n&&(o=n.trim()),t.push(o)}),t},Dc=(e,t)=>Array.isArray(e)?e:FP(e,t)?[e]:tve(`${e}`),mp=(e,t)=>{t=Dc(t,e);let r=0;const n=t.length;for(;e!=null&&r<n;)e=e[Fc(t[r])],r++;return r&&r==n?e:void 0};function rve(e,t){if(e!==t){const r=e!==void 0,n=e===null,i=e===e,s=Zf(e),o=t!==void 0,a=t===null,u=t===t,c=Zf(t);if(!a&&!c&&!s&&e>t||s&&o&&u&&!a&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||a&&r&&i||!o&&i||!u)return-1}return 0}function nve(e,t,r){let n=-1;const i=e.criteria,s=t.criteria,o=i.length,a=r.length;for(;++n<o;){const u=n<a?r[n]:null,l=(u&&typeof u=="function"?u:rve)(i[n],s[n]);if(l)return u&&typeof u!="function"?l*(u=="desc"?-1:1):l}return e.index-t.index}const hH=(e,t)=>{let r=(o,a)=>!!(o==null?0:o.length)&&o.indexOf(a)>-1,n=!0;const i=[],s=t.length;if(!e.length)return i;t.length>=LP&&(r=(o,a)=>o.has(a),n=!1,t=new Nd(t));e:for(let o in e){let a=e[o];const u=a;if(a=a!==0?a:0,n&&u===u){let c=s;for(;c--;)if(t[c]===u)continue e;i.push(a)}else r(t,u)||i.push(a)}return i},Fc=e=>{if(typeof e=="string"||Zf(e))return e;const t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},If=(e,t=!1,r=!1,n=!0,i,s,o,a)=>{let u;if(i&&(u=o?i(e,s,o,a):i(e)),u!==void 0)return u;if(!rn(e))return e;const c=Array.isArray(e),l=Uo(e);if(c){if(u=jpe(e),!t)return NP(e,u)}else{const m=typeof e=="function";if(l===Sf||l===Md||m&&!o){if(u=r||m?{}:aH(e),!t)return r?ive(e,vp(e,Object.keys(e),u)):Wpe(e,Object.assign(u,e))}else{if(m||!spe[l])return o?e:{};u=Ype(e,l,t)}}a||(a=new Rf);const h=a.get(e);if(h)return h;if(a.set(e,u),Upe(e))return e.forEach((m,b)=>{u.set(b,If(m,t,r,n,i,b,e,a))}),u;if(Gpe(e))return e.forEach(m=>{u.add(If(m,t,r,n,i,m,e,a))}),u;if(gp(e))return u;const _=c?void 0:(n?r?cH:Q2:r?pH:pp)(e);return(_||e).forEach((m,b)=>{_&&(b=m,m=e[b]),_h(u,b,If(m,t,r,n,i,b,e,a))}),u},ive=(e,t)=>vp(e,uH(e),t),dH=(e,t)=>t.length<2?e:mp(e,t.slice(0,-1)),sve=(e,t,r)=>{if(!rn(e))return e;t=Dc(t,e);const n=t.length,i=n-1;let s=-1,o=e;for(;o!=null&&++s<n;){const a=Fc(t[s]);let u=r;if(s!=i){const c=o[a];u=void 0,u===void 0&&(u=rn(c)?c:BP(t[s+1])?[]:{})}_h(o,a,u),o=o[a]}return e},BP=(e,t)=>{const r=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(r==="number"||r!=="symbol"&&Npe.test(e))&&e>-1&&e%1==0&&e<t},ove=(e,t)=>{t=Dc(t,e),e=dH(e,t);const r=t[t.length-1];return e==null||delete e[Fc(r)]},ave=e=>{const t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},pH=e=>{const t=[];for(const r in e)t.push(r);return t},uve=e=>{e=Object(e);const t={};for(const r in e)t[r]=e[r];return t},x7=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function vH(e,t=!1){return(r,...n)=>{let i=-1,s=n.length,o=s>1?n[s-1]:void 0;const a=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):t?(u,c)=>{if(Array.isArray(u)&&!Array.isArray(c))return c}:void 0,a&&dg(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),r=Object(r);++i<s;){const u=n[i];u&&e(r,u,i,o)}return r}}const zP=(e,t,r,n,i)=>{e!==t&&Oo(t,(s,o)=>{if(rn(s))i||(i=new Rf),cve(e,t,o,r,zP,n,i);else{let a=n?n(e[o],s,`${o}`,e,t,i):void 0;a===void 0&&(a=s),eA(e,o,a)}})},cve=(e,t,r,n,i,s,o)=>{const a=x7(e,r),u=x7(t,r),c=o.get(u);if(c){eA(e,r,c);return}let l=s?s(a,u,`${r}`,e,t,o):void 0,h=l===void 0;if(h){const v=Array.isArray(u),_=!v&&gp(u);l=u,v||_?Array.isArray(a)?l=a:wa(a)&&Jo(a)?l=NP(a):_?(h=!1,l=oH(u,!0)):l=[]:ci(u)||Ld(u)?(l=a,Ld(a)?l=uve(a):(typeof a=="function"||!rn(a))&&(l=aH(u))):h=!1}h&&(o.set(u,l),i(l,u,n,s,o),o.delete(u)),eA(e,r,l)},eA=(e,t,r)=>{(r!==void 0&&!yh(e[t],r)||r===void 0&&!(t in e))&&_h(e,t,r)};function lve(e,t,r){const n=Object(e),i=r(e);let{length:s}=i,o=-1;for(;s--;){const a=i[++o];if(t(n[a],a,n)===!1)break}return e}const fve=(e,t)=>e&&lve(e,t,pp),VP=(e,t)=>{if(e==null)return e;if(!Jo(e))return fve(e,t);const r=e.length,n=Object(e);let i=-1;for(;++i<r&&t(n[i],i,n)!==!1;);return e};function hve(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}const dve=Set&&1/Rm(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function gH(e,t,r,n,i,s){return rn(e)&&rn(t)&&(s.set(t,e),zP(e,t,void 0,gH,s),s.delete(t)),e}function pve(e,t,r){t.length?t=t.map(o=>Array.isArray(o)?a=>mp(a,o.length===1?o[0]:o):o):t=[o=>o];let n=-1,i=-1;const s=Jo(e)?new Array(e.length):[];return VP(e,o=>{const a=t.map(u=>u(o));s[++i]={criteria:a,index:++n,value:o}}),vve(s,(o,a)=>nve(o,a,r))}function vve(e,t){let{length:r}=e;for(e.sort(t);r--;)e[r]=e[r].value;return e}function mH(e){return e===e&&!rn(e)}function yH(e,t){return r=>r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}function _H(e,t){return e!=null&&kve(e,t,Rve)}function gve(e,t){return FP(e)&&mH(t)?yH(Fc(e),t):r=>{const n=mp(r,e);return n===void 0&&n===t?_H(r,e):Im(t,n)}}function mve(e){const t=yve(e);return t.length===1&&t[0][2]?yH(t[0][0],t[0][1]):r=>r===e||_ve(r,e,t)}function yve(e){const t=pp(e);let r=t.length;for(;r--;){const n=t[r],i=e[n];t[r]=[n,i,mH(i)]}return t}function _ve(e,t,r,n){let i=r.length;const s=i;if(e==null)return!s;let o;for(e=Object(e);i--;)if(o=r[i],o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<s;){o=r[i];const a=o[0],u=e[a],c=o[1];if(o[2]){if(u===void 0&&!(a in e))return!1}else{const l=new Rf;if(!Im(c,u,l))return!1}}return!0}function bve(e){return FP(e)?wve(Fc(e)):xve(e)}function wve(e){return t=>t==null?void 0:t[e]}function xve(e){return t=>mp(t,e)}function Sve(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?gve(e[0],e[1]):mve(e):bve(e)}function km(){const e=Sve;return arguments.length?e(arguments[0]):e}const Eve=(e,t,r,n)=>{let i=-1;const s=e==null?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r},Ave=(e,t,r,n,i)=>(i(e,(s,o,a)=>{r=n?(n=!1,s):t(r,s,o,a)}),r);function Tve(e,t,r){const n=Array.isArray(e)?Eve:Ave,i=arguments.length<3;return n(e,t,r,i,VP)}const Pve=e=>Array.isArray(e)||Ld(e)||!!(e&&e[Symbol.isConcatSpreadable]);function bH(e,t,r,n,i){let s=-1;const o=e.length;for(r||(r=Pve),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?bH(a,t-1,r,n,i):i.push(...a):i[i.length]=a}return i}const Ld=e=>wa(e)&&Uo(e)=="[object Arguments]",Cve=(e,t)=>Ove(e,t,(r,n)=>_H(e,n)),Ove=(e,t,r)=>{let n=-1;const i=t.length,s={};for(;++n<i;){const o=t[n],a=mp(e,o);r(a,o)&&sve(s,Dc(o,e),a)}return s},Ive=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,Rve=(e,t)=>e!=null&&t in Object(e),kve=(e,t,r)=>{t=Dc(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=Fc(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&Ive(i)&&BP(o,i)&&(Array.isArray(e)||Ld(e)))},Mve=e=>e.match(Fpe),Lve=e=>e.match(Ape),Nve=(e,t)=>(qpe(e)?Lve(e):Mve(e))||[],qve=(e,t,r)=>{const{length:n}=e;return r=r===void 0?n:r,e.slice(t,r)},Dve=Fve("toUpperCase");function Fve(e){return t=>{if(!t)return"";const r=nH(t)?iH(t):void 0,n=r?r[0]:t[0],i=r?qve(r,1).join(""):t.slice(1);return n[e]()+i}}class Rf{constructor(t){const r=this.__data__=new s2(t);this.size=r.size}clear(){this.__data__=new s2,this.size=0}delete(t){const r=this.__data__,n=r.delete(t);return this.size=r.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,r){let n=this.__data__;if(n instanceof s2){const i=n.__data__;if(i.length<LP-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new wH(i)}return n.set(t,r),this.size=n.size,this}}class s2{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const r=this.__data__,n=Ov(r,t);if(n<0)return!1;const i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(t){const r=this.__data__,n=Ov(r,t);return n<0?void 0:r[n][1]}has(t){return Ov(this.__data__,t)>-1}set(t,r){const n=this.__data__,i=Ov(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}class wH{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new S7,map:new Map,string:new S7}}delete(t){const r=Iv(this,t).delete(t);return this.size-=r?1:0,r}get(t){return Iv(this,t).get(t)}has(t){return Iv(this,t).has(t)}set(t,r){const n=Iv(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}class S7{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}get(t){const n=this.__data__[t];return n===Z2?void 0:n}has(t){return this.__data__[t]!==void 0}set(t,r){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r===void 0?Z2:r,this}}class Nd{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.__data__=new wH;++r<n;)this.add(t[r])}add(t){return this.__data__.set(t,Z2),this}has(t){return this.__data__.has(t)}}Nd.prototype.push=Nd.prototype.add;const Bve=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===Am},rn=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},Ls=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===Tm},ts=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===Pm},Xt=vH((e,t)=>{if(Om(t)||Jo(t)){vp(t,pp(t),e);return}for(var r in t)hasOwnProperty.call(t,r)&&_h(e,r,t[r])}),zve=(e,...t)=>{let r=-1,n=t.length;const i=n>2?t[2]:void 0;for(i&&dg(t[0],t[1],i)&&(n=1);++r<n;){const s=t[r];if(s==null)continue;const o=Object.keys(s),a=o.length;let u=-1;for(;++u<a;){const c=o[u],l=e[c];(l===void 0||yh(l,Object.prototype[c])&&!hasOwnProperty.call(e,c))&&(e[c]=s[c])}}return e},no=zve,Vve=function(...t){return t.push(void 0,gH),gi.apply(void 0,t)},$P=Vve,ga=(e,t,...r)=>{let n=-1;const i=typeof t=="function",s=Jo(e)?new Array(e.length):[];return VP(e,o=>{s[++n]=i?t.apply(o,r):$ve(o,t,...r)}),s},$ve=(e,t,...r)=>{t=Dc(t,e),e=dH(e,t);const n=e==null?e:e[Fc(hve(t))];return n==null?void 0:n.apply(e,r)},xH=(e,t,r)=>{let n=0,i=e==null?0:e.length;if(i==0)return 0;r=km(r,2),t=r(t);const s=t!==t,o=t===null,a=Zf(t),u=t===void 0;for(;n<i;){let c;const l=Math.floor((n+i)/2),h=r(e[l]),v=h!==void 0,_=h===null,m=h===h,b=Zf(h);s?c=m:u?c=m&&v:o?c=m&&v&&!_:a?c=m&&v&&!_&&!b:_||b?c=!1:c=h<t,c?n=l+1:i=l}return Math.min(i,Dpe)},yp=(e,t)=>{let r=-1,n=(u,c)=>!!(u==null?0:u.length)&&u.indexOf(c)>-1;t=km(t,2);let i=!0;const{length:s}=e,o=[];let a=o;if(s>=LP){const u=t?null:dve(e);if(u)return Rm(u);i=!1,n=(c,l)=>c.has(l),a=new Nd}else a=t?[]:o;e:for(;++r<s;){let u=e[r];const c=t?t(u):u;if(u=u!==0?u:0,i&&c===c){let l=a.length;for(;l--;)if(a[l]===c)continue e;t&&a.push(c),o.push(u)}else n(a,c)||(a!==o&&a.push(c),o.push(u))}return o},Ua=e=>If(e),Co=e=>If(e,!0),Lu=e=>{if(e==null)return!0;if(Jo(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||gp(e)||Ld(e)))return!e.length;const t=Uo(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Om(e))return!$pe(e).length;for(const r in e)if(hasOwnProperty.call(e,r))return!1;return!0},Ef=(e,t)=>Im(e,t),An=e=>typeof e=="function",ci=e=>{if(!wa(e)||Uo(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Wr=e=>{if(!e)return[];if(Jo(e))return ts(e)?iH(e):NP(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const n=e[Symbol.iterator]();let i;const s=[];for(;!(i=n.next()).done;)s.push(i.value);return s}const t=Uo(e);return(t==hp?fH:t==dp?Rm:Vpe)(e)};function Gve(e,t,r){if(typeof e!="function")throw new TypeError("Expected a function");let n,i,s,o,a,u,c=0,l=!1,h=!1,v=!0;const _=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,rn(r)&&(l=!!r.leading,h="maxWait"in r,s=h?Math.max(20,t):s,v="trailing"in r?!!r.trailing:v);function m(d){const C=n,O=i;return n=i=void 0,c=d,o=e.apply(O,C),o}function b(d,C){return _?(window.cancelAnimationFrame(a),window.requestAnimationFrame(d)):setTimeout(d,C)}function y(d){if(_)return window.cancelAnimationFrame(d);clearTimeout(d)}function w(d){return c=d,a=b(A,t),l?m(d):o}function T(d){const C=d-u,O=d-c,k=t-C;return h?Math.min(k,s-O):k}function P(d){const C=d-u,O=d-c;return u===void 0||C>=t||C<0||h&&O>=s}function A(){const d=Date.now();if(P(d))return I(d);a=b(A,T(d))}function I(d){return a=void 0,v&&n?m(d):(n=i=void 0,o)}function N(...d){const C=Date.now(),O=P(C);if(n=d,i=this,u=C,O){if(a===void 0)return w(u);if(h)return a=b(A,t),m(u)}return a===void 0&&(a=b(A,t)),o}return N.cancel=()=>{a!==void 0&&y(a),c=0,n=u=i=a=void 0},N.flush=()=>a===void 0?o:I(Date.now()),N.pending=()=>a!==void 0,N}const Uve=(e,t)=>(t=km(t,2),Tve(e,(r,n,i)=>(i=t(n),hasOwnProperty.call(r,i)?r[i].push(n):_h(r,i,[n]),r),{})),o2=(e,t=[])=>{if(e==null)return[];const r=t.length;return r>1&&dg(e,t[0],t[1])?t=[]:r>2&&dg(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[km(t,2)]),pve(e,t.flat(1),[])},jve=e=>(e==null?0:e.length)?bH(e,1/0):[],E7=(e,...t)=>Jo(e)?hH(e,t):[],Hve=(e,...t)=>wa(e)&&Jo(e)?hH(e,t.flat(1)):[],tA=(...e)=>{const t=e.flat(1);return yp(t)},Nu=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let r=-1,n=e;for(;++r<t.length;){if(!n||!hasOwnProperty.call(n,t[r]))return!1;n=n[t[r]]}return!0},li=(e,t,r)=>{t=Dc(t,e);let n=-1,i=t.length;for(i||(i=1,e=void 0);++n<i;){let s=e==null?void 0:e[Fc(t[n])];s===void 0&&(n=i,s=r),e=typeof s=="function"?s.call(e):s}return e},El=(e,...t)=>{let r={};if(e==null)return r;let n=!1;t=t.flat(1).map(s=>(s=Dc(s,e),n||(n=s.length>1),s)),vp(e,cH(e),r),n&&(r=If(r,!0,!0,!0,s=>ci(s)?void 0:s));let i=t.length;for(;i--;)ove(r,t[i]);return r},Wve=(e,...t)=>e==null?{}:Cve(e,t.flat(1/0)),Oo=(e,t=r=>r)=>{let r=-1;const n=Object(e),i=Jo(e)?sH(e,!0):pH(e);let s=i.length;for(;s--;){const o=i[++r];if(t(n[o],o,n)===!1)break}},Xve=(e="")=>Nve(`${e}`.replace(/['\u2019]/g,"")).reduce((t,r,n)=>(r=r.toLowerCase(),t+(n?Dve(r):r)),"");let Yve=0;const Kve=(e="")=>{const t=++Yve;return`${e}`+t},gi=vH((e,t,r,n)=>{zP(e,t,r,n)},!0),la=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Sc.classNamePrefix.length)!==Sc.classNamePrefix&&(t=Sc.classNamePrefix+t),t}).join(" ")},Jve=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Sc.classNamePrefix.length)===Sc.classNamePrefix&&(t=t.substr(Sc.classNamePrefix.length)),t}).join(" ")},pg=function(e,t){const r={},n={},i=Ye.namespace.svg,s=t||i,o=document.createDocumentFragment(),a=function(u,c,l){for(let h=0;h<u.length;h++){const v=u[h];if(typeof v=="string"){const A=document.createTextNode(v);c.appendChild(A);continue}if(!v.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const _=v.tagName;let m;v.hasOwnProperty("namespaceURI")&&(l=v.namespaceURI),m=document.createElementNS(l,_);const b=l===i,y=b?Ye:qt,w=v.attributes;w&&y(m).attr(w);const T=v.style;if(T&&qt(m).css(T),v.hasOwnProperty("className")){const A=v.className;b?m.className.baseVal=A:m.className=A}if(v.hasOwnProperty("textContent")&&(m.textContent=v.textContent),v.hasOwnProperty("selector")){const A=v.selector;if(r[A])throw new Error("json-dom-parser: selector must be unique");r[A]=m,y(m).attr("joint-selector",A)}if(v.hasOwnProperty("groupSelector")){let A=v.groupSelector;Array.isArray(A)||(A=[A]);for(let I=0;I<A.length;I++){const N=A[I];let d=n[N];d||(d=n[N]=[]),d.push(m)}}c.appendChild(m);const P=v.children;Array.isArray(P)&&a(P,m,l)}};return a(e,o,s),{fragment:o,selectors:r,groupSelectors:n}},Rv=function(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t},qd=function(e,t,r){for(var n=Array.isArray(t)?t:t.split(r||"/"),i,s=0,o=n.length;s<o;)if(i=n[s++],Object(e)===e&&i in e)e=e[i];else return;return e},SH=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},rA=function(e,t,r,n){const i=Array.isArray(t)?t:t.split(n||"/"),s=i.length-1;let o=e,a=0;for(;a<s;a++){const u=i[a];if(!SH(o,u))return e;o=o[u]||(o[u]={})}return o[i[s]]=r,e},A7=function(e,t,r){const n=Array.isArray(t)?t:t.split(r),i=n.length-1;let s=e,o=0;for(;o<i;o++){const a=n[o];if(!SH(s,a))return e;const u=s[a];if(!u)return e;s=u}return delete s[n[i]],e},Zve=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},Af=function(e){return Af.id=Af.id||1,e===void 0?"j_"+Af.id++:(e.id=e.id===void 0?"j_"+Af.id++:e.id,e.id)},Qve=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},ui=function(e){if(e.normalized)return e;const{originalEvent:t,target:r}=e,n=t&&t.changedTouches&&t.changedTouches[0];if(n)for(let i in n)e[i]===void 0&&(e[i]=n[i]);if(r){const i=r.correspondingUseElement;i&&(e.target=i)}return e.normalized=!0,e},ege=function(e){let i=0,s=0,o=0,a=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in e?e.deltaX:i*10,a="deltaY"in e?e.deltaY:s*10,(o||a)&&e.deltaMode&&(e.deltaMode==1?(o*=40,a*=40):(o*=800,a*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(o=a,a=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:a}},tge=function(e,t){return e>t?t:e<-50?-50:e},nA=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-t)),s=setTimeout(function(){r(n+i)},i);return t=n+i,s}}return function(r,n,...i){return e(n!==void 0?r.bind(n,...i):r)}}(),iA=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),Wi=function(e){return ts(e)&&e.slice(-1)==="%"},rge=function(e,t){function r(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(e);return u?u[1]:null}var n=parseFloat(e);if(Number.isNaN(n))return null;var i={};i.value=n;var s;if(t==null)s="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;s=t.join("|")}else ts(t)&&(s=t);var o=r(s);return o===null?null:(i.unit=o,i)},wd=0;function nge(e,t){const r=e.split(t);let n=1;for(let i=0,s=r.length-1;i<s;i++){const o=[];(i>0||r[0]!=="")&&o.push(wd),o.push(t),(i<s-1||r[s]!=="")&&o.push(wd),r.splice(n,0,...o),n+=o.length+1}return r.filter(i=>i!=="")}function T7(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const EH=function(e,t,r={},n={}){var i=t.width,s=t.height,o=n.svgDocument||Ye("svg").node,a=Ye("tspan").node,u=Ye("text").attr(r).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),o.appendChild(u),n.svgDocument||document.body.appendChild(o);const l=n.preserveSpaces,h=" ",v=n.separator||n.separator===""?n.separator:h,_=typeof v=="string"?v:h;var m=n.eol||`
`,b=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,y=n.maxLineCount;Ls(y)||(y=1/0);var w=e.split(v),T=[],P=[],A,I,N;l&&Ye(a).attr("xml:space","preserve");for(var d=0,C=0,O=w.length;d<O;d++){var k=w[d];if(!(!k&&!l)&&typeof k=="string"){var F=!1;if(k.indexOf(m)>=0)if(k.length>1){const ie=nge(w[d],m);w.splice(d,1,...ie),d--,O=w.length;continue}else{if(l&&typeof w[d-1]=="string"){w.splice(d,wd,"",wd),O+=2,d--;continue}P[++C]=!l||typeof w[d+1]=="string"?"":void 0,F=!0}if(!F){let ie;if(l?ie=P[C]!==void 0?P[C]+_+k:k:ie=P[C]?P[C]+_+k:k,c.data=ie,a.getComputedTextLength()<=i)P[C]=ie,(A||I)&&(T[C++]=!0,A=0,I=0);else{if(!P[C]||A){var z=!!A;if(A=k.length-1,z||!A){if(!A){if(!P[C]){P=[];break}w.splice(d,2,k+w[d+1]),O--,T[C++]=!0,d--;continue}w[d]=k.substring(0,A);const se=w[d+1];w[d+1]=k.substring(A)+(se===void 0||se===wd?"":se)}else{if(I)w.splice(d,2,w[d]+w[d+1]),I=0;else{var j=k.search(b);j>-1&&j!==k.length-1&&j!==0&&(I=j+1,A=0),w.splice(d,1,k.substring(0,I||A),k.substring(I||A)),O++}C&&!T[C-1]&&C--}(!l||P[C]!=="")&&d--;continue}C++,d--}}var J=null;if(P.length>y)J=y-1;else if(s!==void 0){if(N===void 0&&c.data!=="")if(r.lineHeight==="auto")N=T7({value:1.5,unit:"em"},u);else{const ie=rge(r.lineHeight,["em","px",""]);N=T7(ie,u)}N*P.length>s&&(J=Math.floor(s/N)-1)}if(J!==null){P.splice(J+1);var oe=n.ellipsis;if(!oe||J<0)break;typeof oe!="string"&&(oe="â¦");var W=P[J];if(!W&&!F)break;var D=W.length,B,U;do{if(U=W[D],B=W.substring(0,D),U?U.match(v)&&(B+=U):B+=_,B+=oe,c.data=B,a.getComputedTextLength()<=i){P[J]=B;break}D--}while(D>=0);break}}}return n.svgDocument?o.removeChild(u):document.body.removeChild(o),P.join(m)},ige=function(e){var t=qt(qt.parseHTML("<div>"+e+"</div>",null,!1));return t.find("*").each(function(){var r=this;qt.each(r.attributes,function(){var n=this,i=n.name,s=n.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&qt(r).removeAttr(i)})}),t.html()},sge=function(e,t){var r=qt(e),n=r.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(r,t).each(function(i){n[i].call(this)})},Al=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var r,n,i,s;return r=n=i=s=0,isFinite(e.vertical)&&(r=i=+e.vertical),isFinite(e.horizontal)&&(n=s=+e.horizontal),isFinite(e.top)&&(r=+e.top),isFinite(e.right)&&(n=+e.right),isFinite(e.bottom)&&(i=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:r,right:n,bottom:i,left:s}},oge={linear:function(e){return e}},AH={number:function(e,t){var r=t-e;return function(n){return e+r*n}},object:function(e,t){var r=Object.keys(e);return function(n){var i,s,o={};for(i=r.length-1;i!=-1;i--)s=r[i],o[s]=e[s]+(t[s]-e[s])*n;return o}}},age={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(e.margin)?e.margin:2,n=Number.isFinite(e.width)?e.width:1;return ps(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return ps(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return ps('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ps(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ps('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ps('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ps('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return ps('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ps('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return ps('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ps('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},ps=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},e.replace(t,function(n){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(u){return!!u}),o=s.split("."),a=r[o.shift()];a!==void 0&&o.length;)a=a[o.shift()];return a!==void 0?a:""})}},rd=function(){};function TH(e){e=yp(e);const t=Wr(e).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return Wr(e).forEach(function(r){const n=t[r.id];if(n.isLink()){const o=n.source(),a=n.target();o.id&&t[o.id]&&n.prop("source/id",t[o.id].id),a.id&&t[a.id]&&n.prop("target/id",t[a.id].id)}const i=r.get("parent");i&&t[i]&&n.set("parent",t[i].id);const s=Wr(r.get("embeds")).reduce(function(o,a){return t[a]&&o.push(t[a].id),o},[]);Lu(s)||n.set("embeds",s)}),t}const uge=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],cge=uge.reduce((e,t)=>(e[t]=!0,e),{}),lge={qualify:function(e){return ci(e)},set:function(e,t,r){Object.keys(e).forEach(function(n){if(cge[n]&&n in r){const i=e[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(s,o){s.selected=i.includes(s.value)}):r[n]=i}})}};function uc(e,t){return function(r,n){var i=Wi(r);r=parseFloat(r),i&&(r/=100);var s={};if(isFinite(r)){var o=i||r>=0&&r<=1?r*n[t]:Math.max(r+n[t],0);s[e]=o}return s}}function kv(e,t,r){return function(n,i){var s=Wi(n);n=parseFloat(n),s&&(n/=100);var o;if(isFinite(n)){var a=i[r]();s||n>0&&n<1?o=a[e]+i[t]*n:o=a[e]+n}var u=ge();return u[e]=o||0,u}}function P7(e,t,r){return function(n,i){var s;n==="middle"?s=i[t]/2:n===r?s=i[t]:isFinite(n)?s=n>-1&&n<1?-i[t]*n:-n:Wi(n)?s=i[t]*parseFloat(n)/100:s=0;var o=ge();return o[e]=-(i[e]+s),o}}function PH(e,t){var r="joint-shape",n=t&&t.resetOffset;return function(i,s,o){var a=qt(o),u=a.data(r);if(!u||u.value!==i){var c=e(i);u={value:i,shape:c,shapeBBox:c.bbox()},a.data(r,u)}var l=u.shape.clone(),h=u.shapeBBox.clone(),v=h.origin(),_=s.origin();h.x=_.x,h.y=_.y;var m=s.maxRectScaleToFit(h,_),b=h.width===0||s.width===0?1:m.sx,y=h.height===0||s.height===0?1:m.sy;return l.scale(b,y,v),n&&l.translate(-v.x,-v.y),l}}function C7(e){function t(n){return new zt(Ye.normalizePathData(n))}var r=PH(t,e);return function(n,i,s){var o=r(n,i,s);return{d:o.serialize()}}}function O7(e){var t=PH(Tn,e);return function(r,n,i){var s=t(r,n,i);return{points:s.serialize()}}}function Mv(e,t){var r=new ge(1,0);return function(n){var i,s,o=this[e](n);return o?(s=t.rotate?o.vector().vectorAngle(r):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function I7(e){return function(r,n,i){const s=Ye(i);s.attr(e)!==r&&s.attr(e,r)}}function pf(e,t,r){return r.text!==void 0}function nd(){return this.model.isLink()}function a2(e){var t={},r=e.stroke;typeof r=="string"&&(t.stroke=r,t.fill=r);var n=e.strokeOpacity;return n===void 0&&(n=e["stroke-opacity"]),n===void 0&&(n=e.opacity),n!==void 0&&(t["stroke-opacity"]=n,t["fill-opacity"]=n),t}function R7(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const dr={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:I7("href")},xlinkHref:{set:I7("xlink:href")},filter:{qualify:ci,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:ci,set:R7},stroke:{qualify:ci,set:R7},sourceMarker:{qualify:ci,set:function(e,t,r,n){return e=Xt(a2(n),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:ci,set:function(e,t,r,n){return e=Xt(a2(n),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:ci,set:function(e,t,r,n){return e=Xt(a2(n),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,r){return!r.textWrap||!ci(r.textWrap)},set:function(e,t,r,n){const i=qt(r),s="joint-text",o=i.data(s),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:l,displayEmpty:h}=n;let v=n.textPath,_=n.x;Ro(_)&&(_=ko(_,t));let m=n["font-size"]||n.fontSize;Ro(m)&&(m=ko(m,t));const b=JSON.stringify([e,a,u,c,l,h,v,_,m]);if(o===void 0||o!==b){if(m&&r.setAttribute("font-size",m),rn(v)){const y=v.selector;if(typeof y=="string"){const[w]=this.findBySelector(y);w instanceof SVGPathElement&&(v=Xt({"xlink:href":"#"+w.id},v))}}Ye(r).text(""+e,{lineHeight:a,annotations:u,textPath:v,x:_,textVerticalAnchor:c,eol:l,displayEmpty:h}),i.data(s,b)}}},textWrap:{qualify:ci,set:function(e,t,r,n){var i={},s=e.width||0;Wi(s)?i.width=t.width*parseFloat(s)/100:Ro(s)?i.width=Number(ko(s,t)):e.width===null?i.width=1/0:s<=0?i.width=t.width+s:i.width=s;var o=e.height||0;Wi(o)?i.height=t.height*parseFloat(o)/100:Ro(o)?i.height=Number(ko(o,t)):e.height===null||(o<=0?i.height=t.height+o:i.height=o);var a,u=e.text;if(u===void 0&&(u=n.text),u!==void 0){const c=e.breakText||EH,l=n["font-size"]||n.fontSize;a=c(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":Ro(l)?ko(l,t):l,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else a="";dr.text.set.call(this,a,t,r,n)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,r){var n=qt(r),i="joint-title",s=n.data(i);if(s===void 0||s!==e){if(n.data(i,e),r.tagName==="title"){r.textContent=e;return}var o=r.firstElementChild;if(o&&o.tagName==="title")o.textContent=e;else{var a=document.createElementNS(r.namespaceURI,"title");a.textContent=e,r.insertBefore(a,o)}}}},lineHeight:{qualify:pf},textVerticalAnchor:{qualify:pf},textPath:{qualify:pf},annotations:{qualify:pf},eol:{qualify:pf},displayEmpty:{qualify:pf},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:ci,set:function(e,t,r){qt(r).css(e)}},html:{set:function(e,t,r){qt(r).html(e+"")}},props:lge,ref:{},refX:{position:kv("x","width","origin")},refY:{position:kv("y","height","origin")},refDx:{position:kv("x","width","corner")},refDy:{position:kv("y","height","corner")},refWidth:{set:uc("width","width")},refHeight:{set:uc("height","height")},refRx:{set:uc("rx","width")},refRy:{set:uc("ry","height")},refRInscribed:{set:function(e){var t=uc(e,"width"),r=uc(e,"height");return function(n,i){var s=i.height>i.width?t:r;return s(n,i)}}("r")},refRCircumscribed:{set:function(e,t){var r=Wi(e);e=parseFloat(e),r&&(e/=100);var n=Math.sqrt(t.height*t.height+t.width*t.width),i;return isFinite(e)&&(r||e>=0&&e<=1?i=e*n:i=Math.max(e+n,0)),{r:i}}},refCx:{set:uc("cx","width")},refCy:{set:uc("cy","height")},xAlignment:{offset:P7("x","width","right")},yAlignment:{offset:P7("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:C7({resetOffset:!0})},refDKeepOffset:{set:C7({resetOffset:!1})},refPointsResetOffset:{set:O7({resetOffset:!0})},refPointsKeepOffset:{set:O7({resetOffset:!1})},connection:{qualify:nd,set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let r;e<0?r=(this.getConnectionLength()+e)/2:r=e;const n=this.getConnection(),i=this.getConnectionSubdivisions(),s=n.divideAtLength(r,{segmentSubdivisions:i}),o=n.divideAtLength(-r,{segmentSubdivisions:i});s&&o&&(t=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:nd,set:Mv("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:nd,set:Mv("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:nd,set:Mv("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:nd,set:Mv("getTangentAtRatio",{rotate:!1})}};dr["xlink:href"]=dr.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{dr[e]={qualify:Ro,set:function(r,n){return{[e]:ko(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{dr[e]={qualify:Ro,set:function(r,n){return{[e]:Math.max(0,ko(r,n))}}}});dr.refR=dr.refRInscribed;dr.refD=dr.refDResetOffset;dr.refPoints=dr.refPointsResetOffset;dr.atConnectionLength=dr.atConnectionLengthKeepGradient;dr.atConnectionRatio=dr.atConnectionRatioKeepGradient;dr.fontSize=dr["font-size"];dr.strokeWidth=dr["stroke-width"];dr.refX2=dr.refX;dr.refY2=dr.refY;dr.refWidth2=dr.refWidth;dr.refHeight2=dr.refHeight;dr["ref-x"]=dr.refX;dr["ref-y"]=dr.refY;dr["ref-dy"]=dr.refDy;dr["ref-dx"]=dr.refDx;dr["ref-width"]=dr.refWidth;dr["ref-height"]=dr.refHeight;dr["x-alignment"]=dr.xAlignment;dr["y-alignment"]=dr.yAlignment;const CH=dr,iu=fi.Model.extend({constructor:function(e,t){var r,n=e||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=Kve("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(r=li(this,"defaults"))&&(n=gi({},r,n)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,r){throw new Error("Must define a translate() method.")},toJSON:function(){const t=li(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};Oo(r,function(s,o){const a=t[o];Oo(s,function(u,c){rn(u)&&!Array.isArray(u)?Oo(u,function(l,h){(!a||!a[c]||!Ef(a[c][h],l))&&(n[o]=n[o]||{},(n[o][c]||(n[o][c]={}))[h]=l)}):(!a||!Ef(a[c],u))&&(n[o]=n[o]||{},n[o][c]=u)})});const i=Co(El(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return Zve()},processPorts:function(){var e=this.ports,t={};Oo(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?t[s.port.id]=s.port:t[s.port]={id:s.port})});var r={};if(Oo(e,function(s,o){t[o]||(r[o]=!0)}),this.graph&&!Lu(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(s){r[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){r[s.get("source").port]&&s.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:r}=this;if(!t)return r&&r.remove(this,e),this;t.startBatch("remove");const n=this.getParentCell();n&&n.unembed(this,e);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const a=i[s];a&&a.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=no(e||{},{foregroundEmbeds:!0});let r;e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const n=e.foregroundEmbeds?r:o2(r,u=>u.z());let s=t.maxZIndex()-r.length+1;const o=t.get("cells");let a=o.indexOf(n[0])!==o.length-r.length;a||(a=n.some(function(u,c){return u.z()!==s+c})),a&&(this.startBatch("to-front"),s=s+r.length,n.forEach(function(u,c){u.set("z",s+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=no(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const i=e.foregroundEmbeds?n:o2(n,a=>a.z());let s=t.minZIndex();var r=t.get("cells");let o=r.indexOf(i[0])!==0;o||(o=i.some(function(a,u){return a.z()!==s+u})),o&&(this.startBatch("to-back"),s-=n.length,i.forEach(function(a,u){a.set("z",s+u,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const r=Array.isArray(e)?e:[e];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,t),this},unembed:function(e,t){const r=Array.isArray(e)?e:[e];return this._unembedCells(r,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(e,t){const r="embed";this.startBatch(r);const n=Xt([],this.get("embeds"));e.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,t)}),this.set("embeds",yp(n),t),this.stopBatch(r)},_unembedCells:function(e,t){const r="unembed";this.startBatch(r),e.forEach(n=>n.unset("parent",t)),this.set("embeds",E7(this.get("embeds"),...e.map(n=>n.id)),t),this.stopBatch(r)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Lu(t))return[];let r=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(r=o2(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.shift();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});r.push(...i)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.pop();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});for(let s=i.length-1;s>=0;--s)r.push(i[s])}return t.shift(),t},isEmbeddedIn:function(e,t){var r=ts(e)?e:e.id,n=this.parent();if(t=Xt({deep:!0},t),this.graph&&t.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return Wr(TH([this].concat(this.getEmbeddedCells({deep:!0}))));var t=fi.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,r){var n="/",i=ts(e);if(i||Array.isArray(e))if(arguments.length>1){var s,o;i?(s=e,o=s.split("/")):(s=e.join(n),o=e.slice());var a=o[0],u=o.length;const P=r||{};P.propertyPath=s,P.propertyValue=t,P.propertyPathArray=o,"rewrite"in P||(P.rewrite=!1);for(var c={},l=c,h=a,v=1;v<u;v++){var _=o[v],m=Number.isFinite(i?Number(_):_);l=l[h]=m?[]:{},h=_}c=rA(c,o,t,"/");var b=gi({},this.attributes);P.rewrite&&A7(b,s,"/");var y=gi(b,c);return this.set(a,y[a],P)}else return qd(this.attributes,e,n);const w=t||{};w.propertyPath=null,w.propertyValue=e,w.propertyPathArray=[],"rewrite"in w||(w.rewrite=!1);const T={};for(const P in e){const{changedValue:A}=gi({},{changedValue:this.attributes[P]},{changedValue:e[P]});T[P]=A}return this.set(T,w)},removeProp:function(e,t){t=t||{};var r=Array.isArray(e)?e:e.split("/"),n=r[0];if(n==="attrs"&&(t.dirty=!0),r.length===1)return this.unset(e,t);var i=r.slice(1),s=this.get(n);return s==null?this:(s=Co(s),A7(s,i,"/"),this.set(n,s,t))},attr:function(e,t,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(e)?n[0]=["attrs"].concat(e):ts(e)?n[0]="attrs/"+e:n[0]={attrs:e},this.prop.apply(this,n))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:oge.linear,valueFunction:AH.number};r=Xt(i,r);var s=0,o,a=(function(h){var v,_,m;s=s||h,h-=s,_=h/r.duration,_<1?this._transitionIds[e]=v=nA(a):(_=1,delete this._transitionIds[e]),m=o(r.timingFunction(_)),r.transitionId=v,this.prop(e,m,r),v||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:u}=this;let c;var l=h=>{u[e]&&(u[e]=E7(u[e],c),u[e].length===0&&delete u[e]),this.stopPendingTransitions(e,n),o=r.valueFunction(qd(this.attributes,e,n),t),this._transitionIds[e]=nA(h),this.trigger("transition:start",this,e)};return c=setTimeout(l,r.delay,a),u[e]||(u[e]=[]),u[e].push(c),c},getTransitions:function(){return tA(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>Ef(i,s.split(t).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(o=>clearTimeout(o)),delete r[i]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>Ef(i,s.split(t).slice(0,i.length)))}n.forEach(i=>{const s=r[i];iA(s),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,Xt({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,Xt({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var r in e)!e.hasOwnProperty(r)||!this.hasChanged(r)||(t|=e[r]);return t},angle:function(){return 0},position:function(){return new ge(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new ge},getBBox:function(){return new wt(0,0,0,0)},getPointRotatedAroundCenter(e,t,r){const n=new ge(t,r);return e&&n.rotate(this.getBBox().center(),e),n},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,r=CH;return t&&t[e]||r[e]},define:function(e,t,r,n){r=Xt({defaults:$P({type:e},t,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint<"u"&&Nu(joint,"shapes")&&rA(joint.shapes,e,i,"."),i}}),fge=function(e,t,r){if(ts(r)){if(!sA[r])throw new Error('Unknown wrapper: "'+r+'"');r=sA[r]}if(!An(r))throw new Error("Wrapper must be a function.");Wr(t).forEach(function(n){e[n]=r(e[n])})},sA={cells:function(e){return function(){var t=Array.from(arguments),r=t.length,n=r>0&&t[0]||[],i=r>1&&t[r-1]||{};return Array.isArray(n)||(i instanceof iu?n=t:n instanceof iu&&(t.length>1&&t.pop(),n=t)),i instanceof iu&&(i={}),e.call(this,n,i)}}},ti={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function OH(e,t){const r=new wt(e);switch(t){case void 0:throw new Error("Position required");case ti.LEFT:case"leftMiddle":return r.leftMiddle();case ti.RIGHT:case"rightMiddle":return r.rightMiddle();case ti.TOP:case"topMiddle":return r.topMiddle();case ti.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case ti.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case ti.TOP_RIGHT:case"topRight":return r.topRight();case ti.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case ti.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case ti.CENTER:return r.center();default:throw new Error(`Unknown position: ${t}`)}}function IH(e,t,r){var n=e.toJSON();return n.angle=t||0,no({},r,n)}function _p(e,t,r,n){return e.map(function(i,s,o){var a=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),IH(a.round(),0,GP(n,i))},gl(t,r))}function RH(e,t,r,n){var i=t.center(),s=t.width/t.height,o=t.topMiddle(),a=ms.fromRect(t);return e.map(function(u,c,l){var h=r+n(c,l.length),v=o.clone().rotate(i,-h).scale(s,1,i),_=u.compensateRotation?-a.tangentTheta(v):0;return(u.dx||u.dy)&&v.offset(u.dx||0,u.dy||0),u.dr&&v.move(i,u.dr),IH(v.round(),_,GP(t,u))})}function GP(e,t){let{x:r,y:n,angle:i}=t;return Wi(r)?r=parseFloat(r)/100*e.width:Ro(r)&&(r=Number(ko(r,e))),Wi(n)?n=parseFloat(n)/100*e.height:Ro(n)&&(n=Number(ko(n,e))),{x:r,y:n,angle:i}}function oA(e,t){const{x:r,y:n}=GP(e,t);return new ge(r||0,n||0)}const hge=function(e,t){return e.map(r=>{const n=oA(t,r).round().toJSON();return n.angle=r.angle||0,n})},dge=function(e,t,r){return r.fn(e,t,r)},pge=function(e,t,r){var n=oA(t,r.start||t.origin()),i=oA(t,r.end||t.corner());return _p(e,n,i,t)},vge=function(e,t,r){return _p(e,t.origin(),t.bottomLeft(),t)},gge=function(e,t,r){return _p(e,t.topRight(),t.corner(),t)},mge=function(e,t,r){return _p(e,t.origin(),t.topRight(),t)},yge=function(e,t,r){return _p(e,t.bottomLeft(),t.corner(),t)},_ge=function(e,t,r){var n=r.startAngle||0,i=r.step||360/e.length;return RH(e,t,n,function(s){return s*i})},bge=function(e,t,r){var n=r.startAngle||0,i=r.step||20;return RH(e,t,n,function(s,o){return(s+.5-o/2)*i})},wge=Object.freeze(Object.defineProperty({__proto__:null,absolute:hge,bottom:yge,ellipse:bge,ellipseSpread:_ge,fn:dge,left:vge,line:pge,right:gge,top:mge},Symbol.toStringTag,{value:"Module"}));function Bc(e,t){return $P({},e,t,{x:0,y:0,angle:0,attrs:{}})}function kH(e){var t=e.center(),r=t.theta(e.origin()),n=t.theta(e.bottomLeft()),i=t.theta(e.corner()),s=t.theta(e.topRight());return[r,s,i,n]}function MH(e,t,r,n){n=no({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,l=0;const[h,v,_,m]=kH(t);i<v||i>_?(a=".3em",s=c,o=0,u="start"):i<h?(s=0,o=-c,r?(l=-90,u="start",a=".3em"):(u="middle",a="0")):i<m?(a=".3em",s=-c,o=0,u="end"):(s=0,o=c,r?(l=90,u="start",a=".3em"):(u="middle",a=".6em"));var b=Math.round;return Bc(n,{x:b(s),y:b(o),angle:l,attrs:{labelText:{y:a,textAnchor:u}}})}function LH(e,t,r,n){n=no({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,l=0;const[h,v,_,m]=kH(t);i<v||i>_?(a=".3em",s=-c,o=0,u="end"):i<h?(s=0,o=c,r?(l=90,u="start",a=".3em"):(u="middle",a=".6em")):i<m?(a=".3em",s=c,o=0,u="start"):(s=0,o=-c,r?(l=-90,u="start",a=".3em"):(u="middle",a="0"));var b=Math.round;return Bc(n,{x:b(s),y:b(o),angle:l,attrs:{labelText:{y:a,textAnchor:u}}})}function NH(e,t,r){r=no({},r,{offset:20});var n=ag(0,0),i=-e.theta(n),s=i,o=e.clone().move(n,r.offset).difference(e).round(),a=".3em",u;(i+90)%180===0?(u=t?"end":"middle",!t&&i===-270&&(a="0em")):i>-270&&i<-90?(u="start",s=i-180):u="end";var c=Math.round;return Bc(r,{x:c(o.x),y:c(o.y),angle:t?s:0,attrs:{labelText:{y:a,textAnchor:u}}})}const xge=function(e,t,r){return Bc(r)},Sge=function(e,t,r){return Bc(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},Ege=function(e,t,r){return Bc(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},Age=function(e,t,r){return Bc(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Tge=function(e,t,r){return Bc(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},Pge=function(e,t,r){return MH(e,t,!0,r)},Cge=function(e,t,r){return MH(e,t,!1,r)},Oge=function(e,t,r){return LH(e,t,!0,r)},Ige=function(e,t,r){return LH(e,t,!1,r)},Rge=function(e,t,r){return NH(e.difference(t.center()),!1,r)},kge=function(e,t,r){return NH(e.difference(t.center()),!0,r)},Mge=Object.freeze(Object.defineProperty({__proto__:null,bottom:Tge,inside:Ige,insideOriented:Oge,left:Sge,manual:xge,outside:Cge,outsideOriented:Pge,radial:Rge,radialOriented:kge,right:Ege,top:Age},Symbol.toStringTag,{value:"Module"})),bh=iu.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,r){if(e===void 0)return Ua(this.get("source"));var n,i,s=e instanceof iu;if(s)return n=Ua(t)||{},n.id=e.id,i=r,this.set("source",n,i);var o=!ci(e);return o?(n=Ua(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("source",n,i)):(n=e,i=t,this.set("source",n,i))},target:function(e,t,r){if(e===void 0)return Ua(this.get("target"));var n,i,s=e instanceof iu;if(s)return n=Ua(t)||{},n.id=e.id,i=r,this.set("target",n,i);var o=!ci(e);return o?(n=Ua(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("target",n,i)):(n=e,i=t,this.set("target",n,i))},router:function(e,t,r){if(e===void 0){var n=this.get("router");return n?typeof n=="object"?Ua(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("router",s,o)},connector:function(e,t,r){if(e===void 0){var n=this.get("connector");return n?typeof n=="object"?Ua(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("connector",s,o)},label:function(e,t,r){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,r)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,r){if(!t)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1),n.splice(e,0,t),this.labels(n,r)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var r=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.labels(r,t)},vertex:function(e,t,r){var n=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1)return this.prop(["vertices",e]);var i=this._normalizeVertex(t);return this.prop(["vertices",e],i,r)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var r=[],n=0;n<e.length;n++){var i=e[n],s=this._normalizeVertex(i);r.push(s)}return this.set("vertices",r,t)},insertVertex:function(e,t,r){if(!t)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1);var s=this._normalizeVertex(t);return n.splice(e,0,s),this.vertices(n,r)},removeVertex:function(e,t){var r=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.vertices(r,t)},_normalizeVertex:function(e){var t=!ci(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(n){return{x:(n.x||0)+e,y:(n.y||0)+t}},r)},scale:function(e,t,r,n){return this.applyToPoints(function(i){return ge(i).scale(e,t,r).toJSON()},n)},applyToPoints:function(e,t){if(!An(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=e(n)),i.id||(r.target=e(i));var s=this.vertices();return s.length>0&&(r.vertices=s.map(e)),this.set(r,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new ge(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new ge(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(ge),this.getTargetPoint()];return new Tn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?t=n:n.isEmbeddedIn(r)?t=r:t=this.graph.getCommonAncestor(r,n)),i&&(!t||t.id!==i.id)&&i.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:r}=this.attributes,n=t.id,i=r.id;if(!n||!i)return!1;var s=n===i;if(!s&&e.deep&&this.graph){var o=this.getSourceCell(),a=this.getTargetCell();s=o.isEmbeddedIn(a)||a.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:e,attributes:t}=this;var r=t.source;return r&&r.id&&e&&e.getCell(r.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var r=t.target;return r&&r.id&&e&&e.getCell(r.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=ts(e)||Ls(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var r=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&r}});var qH=function(e){var t=Co(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=wge,this.portLabelLayoutNamespace=Mge,this._init(t)};qH.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var r=this.getGroup(e),n=this.getPortsByGroup(e),i=r.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var a=i.args||{},u=n.map(function(h){return h&&h.position&&h.position.args}),c=o[s](u,t,a),l={ports:n,result:[]};return Wr(c).reduce((function(h,v,_){var m=h.ports[_];return h.result.push({portId:m.id,portTransformation:v,labelTransformation:this._getPortLabelLayout(m,ge(v),t),portAttrs:m.attrs,portSize:m.size,labelSize:m.label.size}),h}).bind(this),l),l.result},_getPortLabelLayout:function(e,t,r){var n=this.portLabelLayoutNamespace,i=e.label.position.name||"left";return n[i]?n[i](t,r,e.label.position.args):null},_init:function(e){if(rn(e.groups))for(var t=Object.keys(e.groups),r=0,n=t.length;r<n;r++){var i=t[r];this.groups[i]=this._evaluateGroup(e.groups[i])}for(var s=Wr(e.items),o=0,a=s.length;o<a;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(e){return gi(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=Xt({},e),r=this.getGroup(e.group);return t.markup=t.markup||r.markup,t.attrs=gi({},r.attrs,t.attrs),t.position=this._createPositionNode(r,t),t.label=gi({},r.label,this._getLabel(t)),t.z=this._getZIndex(r,t),t.size=Xt({},r.size,t.size),t},_getZIndex:function(e,t){return Ls(t.z)?t.z:Ls(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return gi({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r={},n;An(e)?(n="fn",r.fn=e):ts(e)?n=e:e===void 0?n=t?"left":null:Array.isArray(e)?(n="absolute",r.x=e[0],r.y=e[1]):rn(e)&&(n=e.name,Xt(r,e.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(e,t){var r=e.label||{},n=r;return n.position=this._getPosition(r.position,t),n}};const Lge={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};Wr(e.items).forEach(function(a){t[a.id]=!0});var r=this.previous("ports")||{},n={};Wr(r.items).forEach(function(a){t[a.id]||(n[a.id]=!0)});var i=this.graph;if(i&&!Lu(n)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(a){n[a.get("target").port]&&a.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(a){n[a.get("source").port]&&a.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return Co(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=Wr(this.prop(["ports","items"])).filter(r=>r.group===e);return Co(t)},getPort:function(e){return Co(Wr(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,wt(this.size()));return t.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(e){var t=rn(e)?e.id:e;return this._isValidPortId(t)?Wr(this.prop("ports/items")).findIndex(function(r){return r.id===t}):-1},addPort:function(e,t){if(!rn(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var r=Xt([],this.prop("ports/items"));return r.push(e),this.prop("ports/items",r,t),this},insertPort:function(e,t,r){const n=typeof e=="number"?e:this.getPortIndex(e);if(!rn(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const i=Xt([],this.prop("ports/items"));return i.splice(n,0,t),this.prop("ports/items",i,r),this},portProp:function(e,t,r,n){var i=this.getPortIndex(e);if(i===-1)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?s[0]=["ports","items",i].concat(t):ts(t)?s[0]=["ports/items/",i,"/",t].join(""):(s=["ports/items/"+i],ci(t)&&(s.push(t),s.push(r))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var r=Wr(e.items);return r.forEach(function(n){typeof n!="object"&&t.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),yp(r,"id").length!==r.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!rn(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",Xt([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const r=t||{},n=this.getPortIndex(e);if(n!==-1){const i=Xt([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let r,n;if(Array.isArray(e)){if(r=t||{},e.length===0)return this.this;n=Xt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(o){const a=rn(o)?o.id:o;return s.id===a})})}else r=e||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new qH(this.get("ports"));var r=this._portSettingsData.getPorts();if(t){var n=r.filter(function(s){if(!t.find(function(o){return o.id===s.id}))return s}),i=t.filter(function(s){if(!r.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},Nge={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),r=0,n=t.node.childNodes.length;r<n;r++)e.push(t.node.childNodes[r]);var i=Uve(this.model._portSettingsData.getPorts(),"z"),s="auto";Wr(i[s]).forEach(function(l){var h=this._getPortElement(l);t.append(h),e.push(h)},this);for(var o=Object.keys(i),a=0;a<o.length;a++){var u=o[a];if(u!==s){var c=parseInt(u,10);this._appendPorts(i[u],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,r){var n=this._getContainerElement(),i=Wr(e).map(this._getPortElement,this);r[t]||t<0?Ye(r[Math.max(t,0)]).before(i):n.append(i)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const r=this._portElementsCache[e];if(!r)return null;if(!t)return r.portContentElement.node;const n=r.portElement.node,i=r.portSelectors,[s=null]=this.findBySelector(t,n,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){ga(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,r,n,i;var s=Ye(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(e);if(Array.isArray(o)){var a=this.parseDOMJSON(o,s.node),u=a.fragment;u.childNodes.length>1?t=Ye("g").append(u):t=Ye(u.firstChild),i=a.selectors}else t=Ye(o),Array.isArray(t)&&(t=Ye("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:b,selectors:y}=this.parseDOMJSON(c,s.node),w=b.childNodes.length;w>0&&(n=y,r=w===1?Ye(b.firstChild):Ye("g").append(b))}else r=Ye(c),Array.isArray(r)&&(r=Ye("g").append(r));var l;if(i&&n){for(var h in n)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");l=Xt({},i,n)}else l=i||n||{};const v="portRoot",_="labelRoot",m="labelText";if(v in l||(l[v]=t.node),r){const b=r.node;if(_ in l||(l[_]=b),!(m in l)){const y=r.tagName()==="TEXT"?b:Array.from(b.querySelectorAll("text"));l[m]=y,n||(n={}),n[m]=y}}return s.append(t.addClass("joint-port-body")),r&&s.append(r.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:r,portSelectors:l,portLabelSelectors:n,portContentElement:t,portContentSelectors:i},s},_updatePortGroup:function(e){for(var t=wt(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(e,t),n=0,i=r.length;n<i;n++){var s=r[n],o=s.portId,a=this._portElementsCache[o]||{},u=s.portTransformation,c=s.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new wt(s.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,s.portAttrs,{rootBBox:new wt(s.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(e,t,r){var n=Ye.createSVGMatrix().rotate(r||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(n,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},as=iu.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),iu.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,r){const n=Ls(t);r=(n?r:e)||{};const{parentRelative:i,deep:s,restrictedArea:o}=r;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(n){if(a&&(e+=a.x,t+=a.y),s||o){const{x:u,y:c}=this.get("position");this.translate(e-u,t-c,r)}else this.set("position",{x:e,y:t},r);return this}else{const u=ge(this.get("position"));return i?u.difference(a):u}},translate:function(e,t,r){if(e=e||0,t=t||0,e===0&&t===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,n.x+e,n.y+t,r);e=s.x-n.x,t=s.y-n.y}else{var o=this.getBBox({deep:!0}),a=n.x-o.x,u=n.y-o.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-o.width,n.x+e)),l=Math.max(i.y+u,Math.min(i.y+i.height+u-o.height,n.y+t));e=c-n.x,t=l-n.y}var h={x:n.x+e,y:n.y+t};return r.tx=e,r.ty=t,r.transition?(rn(r.transition)||(r.transition={}),this.transition("position",h,Xt({},r.transition,{valueFunction:AH.object})),ga(this.getEmbeddedCells(),"translate",e,t,r)):(this.startBatch("translate",r),this.set("position",h,r),ga(this.getEmbeddedCells(),"translate",e,t,r),this.stopBatch("translate",r)),this},size:function(e,t,r){var n=this.get("size");return e===void 0?{width:n.width,height:n.height}:(rn(e)&&(r=t,t=Ls(e.height)?e.height:n.height,e=Ls(e.width)?e.width:n.width),this.resize(e,t,r))},resize:function(e,t,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":t=n.height;break;case"top":case"bottom":e=n.width;break}var i=_a(this.get("angle")||0),s=this.getBBox(),o;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=ge(u).rotate(s.center(),-i),l=Math.sqrt(e*e+t*t)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?t/e:e/t),h-=zs(i);var v=ge.fromPolar(l,h,c);o=ge(v).offset(e/-2,t/-2)}else switch(o=s.topLeft(),r.direction){case"top":case"top-right":o.offset(0,s.height-t);break;case"left":case"bottom-left":o.offset(s.width-e,0);break;case"top-left":o.offset(s.width-e,s.height-t);break}this.set("size",{width:e,height:t},r),this.position(o.x,o.y,r)}else this.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this},scale:function(e,t,r,n){var i=this.getBBox().scale(e,t,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&ga(r,"fitToChildren",e),this._fitToElements(Object.assign({elements:r},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const r=this.getParentCell();if(!r||!r.isElement())return this;const n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",e),r._fitToElements(Object.assign({elements:n},e)),e.deep&&r.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:r,shrinkOnly:n}=e;if(r&&n)return;let{x:i,y:s,width:o,height:a}=t;const{left:u,right:c,top:l,bottom:h}=Al(e.padding);i-=u,s-=l,o+=u+c,a+=h+l;let v=new wt(i,s,o,a);if(r)v=this.getBBox().union(v);else if(n){const _=this.getBBox().intersect(v);if(!_)return;v=_}this.set({position:{x:v.x,y:v.y},size:{width:v.width,height:v.height}},e)},rotate:function(e,t,r,n){if(r){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(r,this.get("angle")-e);var a=i.x-s.width/2-o.x,u=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:e,absolute:t,origin:r}),this.position(o.x+a,o.y+u,n),this.rotate(e,t,null,n),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,n);return this},angle:function(){return _a(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:r}=this,{deep:n,rotate:i}=e;if(n&&t){const h=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return h.push(this),t.getCellsBBox(h,e)}const{angle:s=0,position:{x:o,y:a},size:{width:u,height:c}}=r,l=new wt(o,a,u,c);return i&&l.rotateAroundCenter(s),l},getPointFromConnectedLink:function(e,t){var r=this.getBBox(),n=r.center(),i=e.get(t);if(!i)return n;var s=i.port;if(!s||!this.hasPort(s))return n;var o=this.portProp(s,["group"]),a=this.getPortsPositions(o),u=new ge(a[s]).offset(r.origin()),c=this.angle();return c&&u.rotate(n,-c),u}});Xt(as.prototype,Lge);const qge=fi.Collection.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Nu(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var r=t.collection,n=r.cellNamespace,i=e.type==="link"?bh:qd(n,e.type,".")||as,s=new i(e,t);return t.dry||(s.graph=r.graph),s},comparator:function(e){return e.get("z")||0}}),ma=fi.Model.extend({initialize:function(e,t){t=t||{};var r=new qge([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});fi.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:r}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:r}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],r.id&&this._in[r.id]&&this._in[r.id][e.id]&&delete this._in[r.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var r=e.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var r=e.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=fi.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,r){var n;return typeof e=="object"?(n=e,r=t):(n={})[e]=t,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=El(n,"cells")),fi.Model.prototype.set.call(this,n,r)},clear:function(e){e=Xt({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var r=t.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(e);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var r;if(e instanceof fi.Model?(r=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):r=e,!ts(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof fi.Model?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=jve(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(r){this.addCell(r,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var r=Wr(e).map(function(n){return this._prepareCell(n,t)},this);return this.get("cells").reset(r,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),ga(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(e,r):this.removeLinks(e,r)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var r=t.indirect,n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=[],o={};i&&a(this,e),n&&u(this,e);function a(h,v){if(Oo(h.getOutboundEdges(v.id),(function(m,b){if(!o[b]){var y=h.getCell(b);s.push(y),o[b]=!0,r&&(n&&u(h,y),i&&a(h,y))}}).bind(h)),r&&v.isLink()){var _=v.getTargetCell();_&&_.isLink()&&(o[_.id]||(s.push(_),a(h,_)))}}function u(h,v){if(Oo(h.getInboundEdges(v.id),(function(m,b){if(!o[b]){var y=h.getCell(b);s.push(y),o[b]=!0,r&&(n&&u(h,y),i&&a(h,y))}}).bind(h)),r&&v.isLink()){var _=v.getSourceCell();_&&_.isLink()&&(o[_.id]||(s.push(_),u(h,_)))}}if(t.deep){var c=e.getEmbeddedCells({deep:!0}),l={};c.forEach(function(h){h.isElement()&&(l[h.id]=!0)}),c.forEach(function(h){h.isLink()||(i&&Oo(this.getOutboundEdges(h.id),(function(v,_){if(!o[_]){var m=this.getCell(_),{source:b,target:y}=m.attributes,w=b.id,T=y.id;if(!t.includeEnclosed&&w&&l[w]&&T&&l[T])return;s.push(this.getCell(_)),o[_]=!0}}).bind(this)),n&&Oo(this.getInboundEdges(h.id),(function(v,_){if(!o[_]){var m=this.getCell(_),{source:b,target:y}=m.attributes,w=b.id,T=y.id;if(!t.includeEnclosed&&w&&l[w]&&T&&l[T])return;s.push(this.getCell(_)),o[_]=!0}}).bind(this)))},this)}return s},getNeighbors:function(e,t){t||(t={});var r=t.inbound,n=t.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(e,t).reduce((function(a,u){var{source:c,target:l}=u.attributes,h=u.hasLoop(t);if(r&&Nu(c,"id")&&!a[c.id]){var v=this.getCell(c.id);v.isElement()&&(h||v&&v!==e&&(!t.deep||!v.isEmbeddedIn(e)))&&(a[c.id]=v)}if(n&&Nu(l,"id")&&!a[l.id]){var _=this.getCell(l.id);_.isElement()&&(h||_&&_!==e&&(!t.deep||!_.isEmbeddedIn(e)))&&(a[l.id]=_)}return a}).bind(this),{});if(e.isLink()){if(r){var s=e.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(n){var o=e.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return Wr(i)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);e=e.sort(function(r,n){return r.length-n.length});var t=Wr(e.shift()).find(function(r){return e.every(function(n){return n.includes(r)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},Xt({},t,{outbound:!0})),r},cloneCells:TH,cloneSubgraph:function(e,t){var r=this.getSubgraph(e,t);return this.cloneCells(r)},getSubgraph:function(e,t){t=t||{};var r=[],n={},i=[],s=[];return Wr(e).forEach(function(o){if(n[o.id]||(r.push(o),n[o.id]=o,o.isLink()?s.push(o):i.push(o)),t.deep){var a=o.getEmbeddedCells({deep:!0});a.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?s.push(u):i.push(u))})}}),s.forEach(function(o){var{source:a,target:u}=o.attributes;if(a.id&&!n[a.id]){var c=this.getCell(a.id);r.push(c),n[c.id]=c,i.push(c)}if(u.id&&!n[u.id]){var l=this.getCell(u.id);r.push(this.getCell(u.id)),n[l.id]=l,i.push(l)}},this),i.forEach(function(o){var a=this.getConnectedLinks(o,t);a.forEach(function(u){var{source:c,target:l}=u.attributes;!n[u.id]&&c.id&&n[c.id]&&l.id&&n[l.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},Xt({},t,{inbound:!0})),r},search:function(e,t,r){r=r||{},r.breadthFirst?this.bfs(e,t,r):this.dfs(e,t,r)},bfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){var o=s.shift();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r);for(let u=0,c=a.length;u<c;u++){const l=a[u];i[l.id]=i[o.id]+1,s.push(l)}}},dfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){const o=s.pop();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r),u=s.length;for(let c=0,l=a.length;c<l;c++){const h=a[c];i[h.id]=i[o.id]+1,s.splice(u,0,h)}}},getSources:function(){var e=[];return Oo(this._nodes,(function(t,r){(!this._in[r]||Lu(this._in[r]))&&e.push(this.getCell(r))}).bind(this)),e},getSinks:function(){var e=[];return Oo(this._nodes,(function(t,r){(!this._out[r]||Lu(this._out[r]))&&e.push(this.getCell(r))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Lu(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Lu(this._out[e.id])},isSuccessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(e,t,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=!1;return this.getConnectedLinks(e,r).forEach(function(o){var{source:a,target:u}=o.attributes;if(n&&Nu(a,"id")&&a.id===t.id||i&&Nu(u,"id")&&u.id===t.id)return s=!0,!1}),s},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(r){r.set(r.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){ga(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const r=new wt(e),{strict:n=!1}=t,i=n?"containsRect":"intersect";return this.getElements().filter(s=>r[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:r="bbox"}=t,n=e.getBBox().rotateAroundCenter(e.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint(OH(n,r))).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:r=!0}=t;return Wr(e).reduce(function(n,i){const s=i.getBBox({rotate:r});return s?n?n.union(s):s:n},null)},translate:function(e,t,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return ga(n,"translate",e,t,r),this},resize:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)},resizeCells:function(e,t,r,n){var i=this.getCellsBBox(r);if(i){var s=Math.max(e/i.width,0),o=Math.max(t/i.height,0);ga(r,"scale",s,o,i.origin(),n)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Xt({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Xt({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let r;return arguments.length===0?r=Object.keys(t):Array.isArray(e)?r=e:r=[e],r.some(n=>t[n]>0)}},{validations:{multiLinks:function(e,t){var{source:r,target:n}=t.attributes;if(r.id&&n.id){var i=t.getSourceCell();if(i){var s=e.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(a){var{source:u,target:c}=a.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&c&&c.id===n.id&&(!c.port||c.port===n.port)});if(o.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:r,target:n}=t.attributes;return r.id&&n.id}}});fge(ma.prototype,["resetCells","addCells","removeCells"],sA.cells);const tl={},zu=fi.View.extend({options:{},theme:null,themeClassNamePrefix:la("theme-"),requireSetThemeOverride:!1,defaultTheme:Sc.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Xt({},this.options,e),fi.View.call(this,e)},initialize:function(){tl[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=li(this,"children")),e){var t=this.svgElement,r=Ye.namespace[t?"svg":"xhtml"],n=pg(e,r);(t?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(e,t){for(var r=t;r&&r.nodeType===1;){var n=r.getAttribute(e);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(li(this,"el"));else{var e=li(this,"tagName"),t=Xt({},li(this,"attributes")),r=Xt({},li(this,"style"));this.id&&(t.id=li(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(Ye.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof fi.$?e:fi.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=Ye(this.el))},_ensureElClassName:function(){var e=li(this,"className");if(e){var t=la(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),tl[this.cid]=null,fi.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,r){if(!t)return this;r||(r={});var n=this.getEventNamespace();for(var i in t){var s=t[i];typeof s!="function"&&(s=this[s]),s&&qt(e).on(i+n,r,s.bind(this))}return this},undelegateElementEvents:function(e){return qt(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=li(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var r=e.data,n="__"+this.cid+"__";return t===void 0?r?r[n]||{}:{}:(r||(r=e.data={}),r[n]||(r[n]={}),Xt(r[n],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&Xt({},e[0])||{},r=e[1]&&Xt({},e[1])||{},n=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},t.render.__render__=n,fi.View.extend.call(this,t,r)}}),k7="dbltap";if(qt.event&&!(k7 in qt.event.special)){const e=Sc.doubleTapInterval,t=30;qt.event.special[k7]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){const{handleObj:i,target:s}=r,o=qt.data(s),a=new Date().getTime(),u="lastTouch"in o?a-o.lastTouch:0;u<e&&u>t?(o.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):o.lastTouch=a}}}const Io={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Dge=zu.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return la(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:r}=this;e=+e,e||(e=0);let n=r[e];if(n)return n;n=r[e]=document.createComment("z-index:"+(e+1));let i=-1/0;for(let s in r)s=+s,s<e&&s>i&&(i=s,e-1);if(i!==-1/0){const s=r[i];t.insertBefore(n,s.nextSibling)}else t.insertBefore(n,t.firstChild);return n},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let r in t)e.removeChild(t[r]);this.pivotNodes={}}});function id(e){return e?Array.isArray(e)?e:[e]:[]}const fa=zu.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:r}=e;this.cellView=e,this.nodeSelector=t,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let r;if(typeof t=="string")[r]=e.findBySelector(t);else if(ci(t)){const n=e.model.isLink(),{label:i=null,port:s,selector:o}=t;n&&i!==null?r=e.findLabelNode(i,o):!n&&s?r=e.findPortNode(s,o):[r]=e.findBySelector(o)}else t&&(r=Ye.toNode(t),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(e,t){const{options:r}=this,{layer:n}=r,{rotatableNode:i}=e,s=e.getNodeMatrix(t);return i?n?i.contains(t)?s:e.getRootRotateMatrix().inverse().multiply(s):e.getNodeRotateMatrix(t).multiply(s):s},mount(){const{MOUNTABLE:e,cellView:t,el:r,options:n,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:a}=this;if(!e||i)return;if(o){this.update(t,a),this.transform();return}const{vel:u,paper:c}=t,{layer:l}=n;if(l){let h;s?(h=s,this.detachedTransformGroup=null):h=Ye("g").addClass("highlight-transform").append(r),this.transformGroup=h,c.getLayerView(l).insertSortedNode(h.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:r}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):r.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:r}=this;if(!e||t.model.isLink()||r)return;const n=t.getRootTranslateMatrix(),i=t.getRootRotateMatrix(),s=n.multiply(i);e.attr("transform",Ye.matrixToTransformString(s))},update(){const{node:e,cellView:t,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;const s=this.node=this.findNode(t,r);e&&this.unhighlight(t,e),s?(this.highlight(t,s),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:e,cellView:t,id:r,constructor:n}=this;e&&this.unhighlight(t,e),this.unmount(),n._removeRef(t,r)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=li(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:r}=e;li(this,"UPDATE_ATTRIBUTES").some(i=>t.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,r){const n=this.uniqueId(t,r);this.add(e,t,n,r)},unhighlight:function(e,t,r){const n=this.uniqueId(t,r);this.remove(e,n)},get(e,t=null){const{cid:r}=e,{_views:n}=this,i=n[r];if(t===null){const s=[];if(!i)return s;for(let o in i){const a=i[o];a instanceof this&&s.push(a)}return s}else{if(!i)return null;if(t in i){const s=i[t];if(s instanceof this)return s}return null}},add(e,t,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");const i=fa.get(e,r);i&&i.remove();const s=new this(n);return s.id=r,this._addRef(e,r,s),s.requestUpdate(e,t),s.listenToUpdateAttributes(e),s},_addRef(e,t,r){const{cid:n}=e,{_views:i}=this;let s=i[n];s||(s=i[n]={}),s[t]=r},_removeRef(e,t){const{cid:r}=e,{_views:n}=this,i=n[r];if(i){t&&delete i[t];for(let s in i)return;delete n[r]}},remove(e,t=null){id(this.get(e,t)).forEach(r=>{r.remove()})},removeAll(e,t=null){const{_views:r}=this;for(let n in r)for(let i in r[n]){const s=r[n][i];s.cellView.paper===e&&s instanceof this&&(t===null||i===t)&&s.remove()}},update(e,t=null,r=!1){id(this.get(e,t)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(e,t=null){id(this.get(e,t)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(e,t=null){id(this.get(e,t)).forEach(r=>r.unmount())},mount(e,t=null){id(this.get(e,t)).forEach(r=>r.mount())},uniqueId(e,t=""){return Ye.ensureId(e)+JSON.stringify(t)}}),vf={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Fge={TOOLS:"TOOLS"},Ir=zu.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(r,n,i){e.push("type-"+i.slice(0,n+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},r=0,n,i,s,o=li(this,"presentationAttributes");for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){s=u[n];var c=e[s];c||(c=e[s]=1<<r++),t[a]|=c}}var l=li(this,"initFlag");for(Array.isArray(l)||(l=[l]),n=0,i=l.length;n<i;n++)s=l[n],e[s]||(e[s]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var r=0;if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)r|=t[e[n]];else r|=t[e];return r},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||Af(this),zu.call(this,e)},initialize:function(){this.setFlags(),zu.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var r=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!r||(t.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(r,t))},requestUpdate:function(e,t){const{paper:r}=this;r&&e>0&&r.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var r=pg(e),n=r.selectors,i=r.groupSelectors;for(var s in i){if(n[s])throw new Error("dia.CellView: ambiguous group selector");n[s]=i[s]}if(t){var o=this.selector;if(n[o])throw new Error("dia.CellView: ambiguous root selector.");n[o]=t}return{fragment:r.fragment,selectors:n}},can:function(e){var t=An(this.options.interactive)?this.options.interactive(this):this.options.interactive;return rn(t)&&t[e]!==!1||Bve(t)&&t!==!1},findBySelector:function(e,t,r){if(t||(t=this.el),r||(r=this.selectors),!e||e===".")return[t];if(r){var n=r[e];if(n)return Array.isArray(n)?n:[n]}return qt(t).find(e).toArray()},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var r=this.model;t=r.getBBox().bbox(r.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),n=this.getNodeMatrix(e);return Ye.transformRect(t,r.multiply(n))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():Ye.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),r=this.getNodeMatrix(e),n=this.getRootTranslateMatrix();return Ye.transformRect(t,n.multiply(r))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),r=Ye.createSVGMatrix().translate(t.x,t.y);return r},getRootRotateMatrix:function(){var e=Ye.createSVGMatrix(),t=this.model,r=t.angle();if(r){var n=t.getBBox(),i=n.width/2,s=n.height/2;e=e.translate(i,s).rotate(r).translate(-i,-s)}return e},_notifyHighlight:function(e,t,r={}){const{el:n}=this;let i;if(typeof t=="string"?[i=n]=this.findBySelector(t):[i=n]=this.$(t),r.partial=i!==n,r.type===void 0){let s;switch(!0){case r.embedding:s=vf.EMBEDDING;break;case r.connecting:s=vf.CONNECTING;break;case r.magnetAvailability:s=vf.MAGNET_AVAILABILITY;break;case r.elementAvailability:s=vf.ELEMENT_AVAILABILITY;break;default:s=vf.DEFAULT;break}r.type=s}return this.notify(e,i,r),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let r=this.$(e)[0];r||(r=t);do{const n=r.getAttribute("magnet"),i=r===t;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const[n]=this.findBySelector(r);if(n)return n}return e},getSelector:function(e,t){var r;if(e===this.el)return typeof t=="string"&&(r="> "+t),r;if(e){var n=Ye(e).index()+1;r=e.tagName+":nth-child("+n+")",t&&(r+=" > "+t),r=this.getSelector(e.parentNode,r)}return r},addLinkFromMagnet:function(e,t,r){var n=this.paper,i=n.model,s=n.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,t,r,s,"source"),target:{x:t,y:r}}).addTo(i,{async:!1,ui:!0}),s.findView(n)},getLinkEnd:function(e,...t){var r=this.model,n=r.id,i=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),o={id:n};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!r.hasPort(i)&&!s&&(o.selector=this.getSelector(e))):s==null&&this.el!==e&&(o.selector=this.getSelector(e)),this.customizeLinkEnd(o,e,...t)},customizeLinkEnd:function(e,t,r,n,i,s){const{paper:o}=this,{connectionStrategy:a}=o.options;if(typeof a=="function"){var u=a.call(o,e,this,t,new ge(r,n),i,s,o);if(u)return u}return e},getMagnetFromLinkEnd:function(e){var t=this.el,r=e.port,n=e.magnet,i=this.model,s;return r!=null&&i.isElement()&&i.hasPort(r)?s=this.findPortNode(r,n)||t:(n||(n=e.selector),!n&&r!=null&&(n='[port="'+r+'"]'),s=this.findBySelector(n,t,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,t,r,n){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(t,r,n);i.notifyPointerdown(e,r,n),i.eventData(e,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:i})},dragLink:function(e,t,r){var n=this.eventData(e),i=n.linkView;if(i)i.pointermove(e,t,r);else{var s=this.paper,o=s.options.magnetThreshold,a=this.getEventTarget(e),u=n.targetMagnet;if(o==="onleave"){if(u===a||Ye(u).contains(a))return}else if(s.eventData(e).mousemoved<=o)return;this.dragLinkStart(e,u,t,r)}},dragLinkEnd:function(e,t,r){var n=this.eventData(e),i=n.linkView;i&&(i.pointerup(e,t,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Lu(t)||(e instanceof SVGElement?Ye(e).attr(t):qt(e).attr(t))},processNodeAttributes:function(e,t){var r,n,i,s,o,a,u,c,l,h=[];for(r in t)t.hasOwnProperty(r)&&(n=t[r],i=this.getAttributeDefinition(r),i&&(!An(i.qualify)||i.qualify.call(this,n,e,t,this))?(ts(i.set)&&(a||(a={}),a[i.set]=n),n!==null&&h.push(r,i)):(a||(a={}),a[Qve(r)]=n));for(s=0,o=h.length;s<o;s+=2)r=h[s],i=h[s+1],n=t[r],An(i.set)&&(u||(u={}),u[r]=n),An(i.position)&&(c||(c={}),c[r]=n),An(i.offset)&&(l||(l={}),l[r]=n);return{raw:t,normal:a,set:u,position:c,offset:l}},updateRelativeAttributes:function(e,t,r,n){n||(n={});var i,s,o,a=t.raw||{},u=t.normal||{},c=t.set,l=t.position,h=t.offset;for(i in c){s=c[i],o=this.getAttributeDefinition(i);var v=o.set.call(this,s,r.clone(),e,a,this);rn(v)?Xt(u,v):v!==void 0&&(u[i]=v)}if(e instanceof HTMLElement){this.setNodeAttributes(e,u);return}var _=u.transform,m=Ye.transformStringToMatrix(_),b=ge(m.e,m.f);_&&(u=El(u,"transform"),m.e=m.f=0);var y,w,T;if(l||h){var P=this.getNodeScale(e,n.scalableNode);y=P.sx,w=P.sy}var A=!1;for(i in l)s=l[i],o=this.getAttributeDefinition(i),T=o.position.call(this,s,r.clone(),e,a,this),T&&(b.offset(ge(T).scale(y,w)),A||(A=!0));this.setNodeAttributes(e,u);var I=!1;if(h){var N=this.getNodeBoundingRect(e);if(N.width>0&&N.height>0){var d=Ye.transformRect(N,m).scale(1/y,1/w);for(i in h)s=h[i],o=this.getAttributeDefinition(i),T=o.offset.call(this,s,d,e,a,this),T&&(b.offset(ge(T).scale(y,w)),I||(I=!0))}}(_!==void 0||A||I)&&(b.round(1),m.e=b.x,m.f=b.y,e.setAttribute("transform",Ye.matrixToTransformString(m)))},getNodeScale:function(e,t){var r,n;if(t&&t.contains(e)){var i=t.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var r=Ye.ensureId(e),n=t[r];return n||(n=t[r]={}),n},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=Ye(e).getBBox()),new wt(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:r,el:n}=this;let i;r&&r.contains(e)?i=r:i=n,t.magnetMatrix=Ye(e).getTransformToElement(i)}return Ye.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=Ye(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,r,n){var i,s,o,a,u={},c=[];for(var l in e)if(e.hasOwnProperty(l)&&(o=e[l],!!ci(o))){var h=r[l]=this.findBySelector(l,t,n);for(i=0,s=h.length;i<s;i++){var v=h[i];a=Ye.ensureId(v);var _=n&&n[l]===v,m=u[a];if(m){m.array||(c.push(a),m.array=!0,m.attributes=[m.attributes],m.selectedLength=[m.selectedLength]);var b=m.attributes,y=m.selectedLength;if(_)b.unshift(o),y.unshift(-1);else{var w=xH(y,s);b.splice(w,0,o),y.splice(w,0,s)}}else u[a]={attributes:o,selectedLength:_?-1:s,node:v,array:!1}}}for(i=0,s=c.length;i<s;i++)a=c[i],o=u[a],o.attributes=gi({},...o.attributes.reverse());return u},getEventTarget:function(e,t={}){const{target:r,type:n,clientX:i=0,clientY:s=0}=e;return t.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in e&&r.hasPointerCapture(e.pointerId)?document.elementFromPoint(i,s):r},updateDOMSubtreeAttributes:function(e,t,r){r||(r={}),r.rootBBox||(r.rootBBox=wt()),r.selectors||(r.selectors=this.selectors);var n={},i={},s=[],o=[],a,u,c,l,h,v=r.roAttributes,_=this.findNodesAttributes(v||t,e,n,r.selectors),m=v?this.findNodesAttributes(t,e,n,r.selectors):_;for(var b in _)if(l=_[b],c=l.attributes,u=l.node,h=this.processNodeAttributes(u,c),!h.set&&!h.position&&!h.offset)this.setNodeAttributes(u,h.normal);else{var y=m[b]&&m[b].attributes,w=y&&c.ref===void 0?y.ref:c.ref,T;if(w){if(T=(n[w]||this.findBySelector(w,e,r.selectors))[0],!T)throw new Error('dia.CellView: "'+w+'" reference does not exist.')}else T=null;if(a={node:u,refNode:T,processedAttributes:h,allAttributes:y},T){var P=o.findIndex(function(A){return A.refNode===u});P>-1?o.splice(P,0,a):o.push(a)}else s.push(a)}s.push(...o);for(let A=0,I=s.length;A<I;A++){a=s[A],u=a.node,T=a.refNode;const N=T?Ye.ensureId(T):"";let d=i[N];d||(d=i[N]=T?Ye(T).getBBox({target:Bge(u,T)}):r.rootBBox),v?(h=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(h,a.processedAttributes)):h=a.processedAttributes,this.updateRelativeAttributes(u,h,d,r)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Xt(e.set,t.set),Xt(e.position,t.position),Xt(e.offset,t.offset);var r=e.normal&&e.normal.transform;r!==void 0&&t.normal&&(t.normal.transform=r),e.normal=t.normal},onMount(e){e||(this.mountTools(),fa.mount(this))},onDetach(){this.unmountTools(),fa.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){fa.remove(this)},updateHighlighters:function(e=!1){fa.update(this,null,e)},transformHighlighters:function(){fa.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,r){this.notify("cell:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){this.notify("cell:pointerclick",e,t,r)},contextmenu:function(e,t,r){this.notify("cell:contextmenu",e,t,r)},pointerdown:function(e,t,r){const{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(e,{graph:i})),this.notify("cell:pointerdown",e,t,r)},pointermove:function(e,t,r){this.notify("cell:pointermove",e,t,r)},pointerup:function(e,t,r){const{graph:n}=this.eventData(e);this.notify("cell:pointerup",e,t,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,r,n){this.notify("cell:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){this.notify(t,e,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:r}=this;if(t.isAsync()){if(r.isLink()){const s=r.getSourceElement();if(s){const a=t.findViewByModel(s);a&&(t.dumpView(a),t.checkViewVisibility(a))}const o=r.getTargetElement();if(o){const a=t.findViewByModel(o);a&&(t.dumpView(a),t.checkViewVisibility(a))}}t.dumpView(this),t.checkViewVisibility(this)}const n=this.getEventTarget(e,{fromPoint:!0}),i=t.findView(n);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:Fge,Highlighting:vf,addPresentationAttributes:function(e){return gi({},li(this.prototype,"presentationAttributes"),e,function(t,r){if(!(!t||!r)&&(typeof t=="string"&&(t=[t]),typeof r=="string"&&(r=[r]),Array.isArray(t)&&Array.isArray(r)))return yp(t.concat(r))})}});function Bge(e,t){let r=e;do{if(r.contains(t))return r;r=r.parentNode}while(r);return null}const Ur={TOOLS:Ir.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},gf={MOVE:"move",MAGNET:"magnet"},Di=Ir.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=Ir.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){Ir.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Ur.UPDATE],position:[Ur.TRANSLATE,Ur.TOOLS],size:[Ur.RESIZE,Ur.PORTS,Ur.TOOLS],angle:[Ur.ROTATE,Ur.TOOLS],markup:[Ur.RENDER],ports:[Ur.PORTS]},initFlag:[Ur.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){this.hasFlag(e,Ur.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Ur.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Ur.RENDER,Ur.UPDATE,Ur.RESIZE,Ur.TRANSLATE,Ur.ROTATE,Ur.PORTS,Ur.TOOLS]);else{let n=!1;this.hasFlag(e,Ur.RESIZE)&&(this.resize(t),n=!0,e=this.removeFlag(e,[Ur.RESIZE,Ur.UPDATE]),e=this.removeFlag(e,Ur.PORTS)),this.hasFlag(e,Ur.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Ur.UPDATE),n=!0,e=this.removeFlag(e,Ur.PORTS)),this.hasFlag(e,Ur.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Ur.TRANSLATE),r=!0),this.hasFlag(e,Ur.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Ur.ROTATE),r=!0),this.hasFlag(e,Ur.PORTS)&&(this._renderPorts(),n=!0,e=this.removeFlag(e,Ur.PORTS)),n&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Ur.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Ur.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache(),this._removePorts();var r=this.model,n=r.attr();this.updateDOMSubtreeAttributes(this.el,n,{rootBBox:new wt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===n?null:t}),this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),r=this.selectors=t.selectors;this.rotatableNode=Ye(r[this.rotatableSelector])||null,this.scalableNode=Ye(r[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(Ye(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var r=e.size;return"rotate("+t+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,r=t.angle(),n=t.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),a=n.width/(o.width||1),u=n.height/(o.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,l=c&&c.attr("transform");if(l){c.attr("transform",l+" rotate("+-r+","+n.width/2+","+n.height/2+")");var h=i.getBBox({target:this.paper.cells});t.set("position",{x:h.x,y:h.y},Xt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,n=(e.paper||this.paper).model,i=e.initialZIndices={},s=t.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...s,...o].forEach(c=>i[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const a=n.getElements().reduce((c,l)=>Math.max(c,l.attributes.z||0),0);o.forEach(c=>{c.attributes.z<=a&&c.set("z",a+1,{ui:!0})}),t.stopBatch("to-front");const u=t.parent();u?(n.getCell(u).unembed(t,{ui:!0}),e.initialParentId=u):e.initialParentId=null},processEmbedding:function(e={},t,r,n){const i=e.model||this.model,s=e.paper||this.paper,o=s.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=s.options;let l;An(a)?l=Wr(a.call(o,this,t,r,n)):a==="pointer"?l=Wr(o.findModelsFromPoint({x:r,y:n})):l=o.findModelsUnderElement(i,{searchBy:a}),l=l.filter(_=>_ instanceof iu&&i.id!==_.id&&!_.isEmbeddedIn(i)),u&&(l=l.slice(-1));let h=null;const v=e.candidateEmbedView;for(let _=l.length-1;_>=0;_--){const m=l[_];if(v&&v.model.id==m.id){h=v;break}else{const b=m.findView(s);if(!An(c)||c.call(s,this,b)){h=b;break}}}h&&h!=v&&(this.clearEmbedding(e),e.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&v&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,r=e.model||this.model,n=e.paper||this.paper;if(t)t.model.embed(r,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:i}=n.options,{initialParentId:s}=e;if(s&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(e);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:r="revert"}=e,n=t||this.model,s=(e.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:a,initialZIndices:u}=e;if(a){const{x:l,y:h}=a;n.position(l,h,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(l=>{const h=s.getCell(l);h&&h.set("z",u[l],{ui:!0})});const c=s.getCell(o);c&&c.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,r=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=r.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const n=this.findAttribute("port",e);if(n){const i=this.findPortNode(n,r);if(i)return i}else{const[i]=this.findBySelector(r);if(i)return i}}return e},notifyPointerdown(e,t,r){Ir.prototype.pointerdown.call(this,e,t,r),this.notify("element:pointerdown",e,t,r)},notifyPointermove(e,t,r){Ir.prototype.pointermove.call(this,e,t,r),this.notify("element:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("element:pointerup",e,t,r),Ir.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){Ir.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){Ir.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,r)},contextmenu:function(e,t,r){Ir.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointermove(e,i,t,r),s){case gf.MAGNET:this.dragMagnet(e,t,r);break;case gf.MOVE:(o||this).drag(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(e,t,r);break}this.eventData(e,n)},pointerup:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointerup(e,i,t,r),s){case gf.MAGNET:this.dragMagnetEnd(e,t,r);break;case gf.MOVE:(o||this).dragEnd(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(e,t,r)}i&&this.magnetpointerclick(e,i,t,r),this.checkMouseleave(e)},mouseover:function(e){Ir.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){Ir.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){Ir.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){Ir.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,r,n){Ir.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,r,n)},onmagnet:function(e,t,r){const{currentTarget:n}=e;this.magnetpointerdown(e,n,t,r),this.eventData(e,{targetMagnet:n}),this.dragMagnetStart(e,t,r)},magnetpointerdown:function(e,t,r,n){this.notify("element:magnet:pointerdown",e,t,r,n)},magnetpointermove:function(e,t,r,n){this.notify("element:magnet:pointermove",e,t,r,n)},magnetpointerup:function(e,t,r,n){this.notify("element:magnet:pointerup",e,t,r,n)},magnetpointerdblclick:function(e,t,r,n){this.notify("element:magnet:pointerdblclick",e,t,r,n)},magnetcontextmenu:function(e,t,r,n){this.notify("element:magnet:contextmenu",e,t,r,n)},dragStart:function(e,t,r){if(this.isDefaultInteractionPrevented(e))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(e,{action:gf.MOVE,delegatedView:n});const i=n.model.position();n.eventData(e,{initialPosition:i,pointerOffset:i.difference(t,r),restrictedArea:this.paper.getRestrictedArea(n,t,r)})},dragMagnetStart:function(e,t,r){const{paper:n}=this,i=e.isPropagationStopped();if(i&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!n.options.validateMagnet.call(n,this,s,e)){i?this.dragStart(e,t,r):this.pointerdown(e,t,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(e,s,t,r),this.eventData(e,{action:gf.MAGNET})},drag:function(e,t,r){var n=this.paper,i=n.options.gridSize,s=this.model,o=this.eventData(e),{pointerOffset:a,restrictedArea:u,embedding:c}=o,l=xl(t+a.x,i),h=xl(r+a.y,i);s.position(l,h,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(o),c=!0),this.processEmbedding(o,e,t,r)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,r){this.dragLink(e,t,r)},dragEnd:function(e,t,r){var n=this.eventData(e);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(e,t,r){this.dragLinkEnd(e,t,r)},magnetpointerclick:function(e,t,r,n){var i=this.paper;i.eventData(e).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,r,n)}},{Flags:Ur});Xt(Di.prototype,Nge);const zge=function(e,t,r){return e},Vge=function(e,t,r){var n=t.side||"bottom",i=Al(t.padding||40),s=r.sourceBBox,o=r.targetBBox,a=s.center(),u=o.center(),c,l,h;switch(n){case"bottom":h=1,c="y",l="height";break;case"top":h=-1,c="y",l="height";break;case"left":h=-1,c="x",l="width";break;case"right":h=1,c="x",l="width";break;default:throw new Error("Router: invalid side")}return a[c]+=h*(s[l]/2+i[n]),u[c]+=h*(o[l]/2+i[n]),h*(a[c]-u[c])>0?u[c]=a[c]:a[c]=u[c],[a].concat(e,u)};var $ge={N:"S",S:"N",E:"W",W:"E"},Gge={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function vg(e,t,r){var n=new ge(e.x,t.y);return r.containsPoint(n)&&(n=new ge(t.x,e.y)),n}function aA(e,t){return e[t==="W"||t==="E"?"width":"height"]}function ys(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function Lv(e){return new wt(e.x,e.y,0,0)}function gg(e){var t=Al(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function DH(e,t){return e.sourceBBox.clone().moveAndExpand(gg(t))}function FH(e,t){return e.targetBBox.clone().moveAndExpand(gg(t))}function Uge(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=DH(e,t);return r.center()}function jge(e,t){if(e.targetAnchor)return e.targetAnchor;var r=FH(e,t);return r.center()}function BH(e,t,r){var n=new ge(e.x,t.y),i=new ge(t.x,e.y),s=ys(e,n),o=ys(e,i),a=$ge[r],u=s===r||s!==a&&(o===a||o!==r)?n:i;return{points:[u],direction:ys(u,t)}}function Kv(e,t,r){var n=vg(e,t,r);return{points:[n],direction:ys(n,t)}}function Hge(e,t,r,n){var i={},s=[new ge(e.x,t.y),new ge(t.x,e.y)],o=s.filter(function(h){return!r.containsPoint(h)}),a=o.filter(function(h){return ys(h,e)!==n}),u;if(a.length>0)u=a.filter(function(h){return ys(e,h)===n}).pop(),u=u||a[0],i.points=[u],i.direction=ys(u,t);else{u=Hve(s,o)[0];var c=new ge(t).move(u,-aA(r,n)/2),l=vg(c,e,r);i.points=[l,c],i.direction=ys(c,t)}return i}function Wge(e,t,r,n){var i=Kv(t,e,n),s=i.points[0];if(r.containsPoint(s)){i=Kv(e,t,r);var o=i.points[0];if(n.containsPoint(o)){var a=new ge(e).move(o,-aA(r,ys(e,o))/2),u=new ge(t).move(s,-aA(n,ys(t,s))/2),c=new Ct(a,u).midpoint(),l=Kv(e,c,r),h=BH(c,t,l.direction);i.points=[l.points[0],h.points[0]],i.direction=h.direction}}return i}function u2(e,t,r,n,i){var s={},o=r.union(n).inflate(1),a=o.center().distance(t)>o.center().distance(e),u=a?t:e,c=a?e:t,l,h,v;return i?(l=ge.fromPolar(o.width+o.height,Gge[i],u),l=o.pointNearestToPoint(l).move(l,-1)):l=o.pointNearestToPoint(u).move(u,1),h=vg(l,c,o),l.round().equals(h.round())?(h=ge.fromPolar(o.width+o.height,zs(l.theta(u))+Math.PI/2,c),h=o.pointNearestToPoint(h).move(c,1).round(),v=vg(l,h,o),s.points=a?[h,v,l]:[l,v,h]):s.points=a?[h,l]:[l,h],s.direction=ys(a?l:h,t),s}function uA(e,t,r){var n=DH(r,t),i=FH(r,t),s=Uge(r,t),o=jge(r,t);n=n.union(Lv(s)),i=i.union(Lv(o)),e=Wr(e).map(ge),e.unshift(s),e.push(o);for(var a,u=[],c=0,l=e.length-1;c<l;c++){var h=null,v=e[c],_=e[c+1],m=!!ys(v,_);if(c===0)c+1===l?n.intersect(i.clone().inflate(1))?h=u2(v,_,n,i):m||(h=Wge(v,_,n,i)):n.containsPoint(_)?h=u2(v,_,n,Lv(_).moveAndExpand(gg(t))):m||(h=Kv(v,_,n));else if(c+1===l){var b=m&&ys(_,v)===a;i.containsPoint(v)||b?h=u2(v,_,Lv(v).moveAndExpand(gg(t)),i,a):m||(h=Hge(v,_,i,a))}else m||(h=BH(v,_,a));h?(Array.prototype.push.apply(u,h.points),a=h.direction):a=ys(v,_),c+1<l&&u.push(_)}return u}var zH={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,r){if(!An(uA))throw new Error("Manhattan requires the orthogonal router as default fallback.");return uA(e,Xt({},zH,t),r)},fallbackRoute:function(e,t,r){return null},draggingRoute:null};function UP(e){this.map={},this.options=e,this.mapGridSize=100}UP.prototype.build=function(e,t){var r=this.options,n=Wr(r.excludeEnds).reduce(function(u,c){var l=t.get(c);if(l){var h=e.getCell(l.id);h&&u.push(h)}return u},[]),i=[],s=e.getCell(t.get("source").id);s&&(i=tA(i,s.getAncestors().map(function(u){return u.id})));var o=e.getCell(t.get("target").id);o&&(i=tA(i,o.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return e.getElements().reduce(function(u,c){var l=Wr(r.excludeTypes).includes(c.get("type")),h=n.find(function(A){return A.id===c.id}),v=i.includes(c.id),_=l||h||v;if(!_)for(var m=c.getBBox().moveAndExpand(r.paddingBox),b=m.origin().snapToGrid(a),y=m.corner().snapToGrid(a),w=b.x;w<=y.x;w+=a)for(var T=b.y;T<=y.y;T+=a){var P=w+"@"+T;u[P]=u[P]||[],u[P].push(m)}return u},this.map),this};UP.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Wr(this.map[t]).every(function(r){return!r.containsPoint(e)})};function Hl(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Hl.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var r=xH(this.items,e,(function(n){return this.values[n]}).bind(this));this.items.splice(r,0,e)};Hl.prototype.remove=function(e){this.hash[e]=this.CLOSE};Hl.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};Hl.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};Hl.prototype.isEmpty=function(){return this.items.length===0};Hl.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function VH(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function $H(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function GH(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=VH(e,t);return r.center()}function Xge(e,t){if(e.targetAnchor)return e.targetAnchor;var r=$H(e,t);return r.center()}function c2(e,t,r,n,i){var s=360/r,o=e.theta(Yge(e,t,n,i)),a=_a(o+s/2);return s*Math.floor(a/s)}function Yge(e,t,r,n){var i=n.step,s=t.x-e.x,o=t.y-e.y,a=s/r.x,u=o/r.y,c=a*i,l=u*i;return new ge(e.x+c,e.y+l)}function M7(e,t){var r=Math.abs(e-t);return r>180?360-r:r}function Kge(e,t,r){var n=r.step;Wr(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*t.x,i.gridOffsetY=i.offsetY/n*t.y})}function Jge(e,t,r){return{source:t.clone(),x:L7(r.x-t.x,e),y:L7(r.y-t.y,e)}}function L7(e,t){if(!e)return t;var r=Math.abs(e),n=Math.round(r/t);if(!n)return r;var i=n*t,s=r-i,o=s/n;return t+o}function Zge(e,t){var r=t.source,n=xl(e.x-r.x,t.x)+r.x,i=xl(e.y-r.y,t.y)+r.y;return new ge(n,i)}function dd(e,t){return e.round(t)}function Jv(e,t,r){return dd(Zge(e.clone(),t),r)}function xd(e){return e.clone().toString()}function l2(e){return new ge(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function Qge(e,t,r,n,i,s,o){for(var a=[],u=l2(i.difference(r)),c=xd(r),l=e[c],h;l;){h=t[c];var v=l2(h.difference(l));v.equals(u)||(a.unshift(h),u=v),c=xd(l),l=e[c]}var _=t[c],m=l2(_.difference(n));return m.equals(u)||a.unshift(_),a}function N7(e,t){for(var r=1/0,n=0,i=t.length;n<i;n++){var s=e.manhattanDistance(t[n]);s<r&&(r=s)}return r}function q7(e,t,r,n,i){var s=i.precision,o=i.directionMap,a=e.difference(t.center()),u=rn(o)?Object.keys(o):[],c=Wr(r),l=u.reduce(function(h,v){if(c.includes(v)){for(var _=o[v],m=new ge(e.x+_.x*(Math.abs(a.x)+t.width),e.y+_.y*(Math.abs(a.y)+t.height)),b=new Ct(e,m),y=b.intersect(t)||[],w=y.length,T,P=null,A=0;A<w;A++){var I=y[A],N=e.squaredDistance(I);(T===void 0||N>T)&&(T=N,P=I)}if(P){var d=Jv(P,n,s);t.containsPoint(d)&&(d=Jv(d.offset(_.x*n.x,_.y*n.y),n,s)),h.push(d)}}return h},[]);return t.containsPoint(e)||l.push(Jv(e,n,s)),l}function eme(e,t,r,n){var i=n.precision,s,o;e instanceof wt?s=dd(GH(this,n).clone(),i):s=dd(e.clone(),i),t instanceof wt?o=dd(Xge(this,n).clone(),i):o=dd(t.clone(),i);var a=Jge(n.step,s,o),u,c,l,h;if(e instanceof wt?(u=s,l=q7(u,e,n.startDirections,a,n)):(u=s,l=[u]),t instanceof wt?(c=o,h=q7(o,t,n.endDirections,a,n)):(c=o,h=[c]),l=l.filter(Ie=>!r(Ie)),h=h.filter(Ie=>!r(Ie)),l.length>0&&h.length>0){for(var v=new Hl,_={},m={},b={},y=0,w=l.length;y<w;y++){var T=l[y],P=xd(T);v.add(P,N7(T,h)),_[P]=T,b[P]=0}var A=n.previousDirectionAngle,I=A===void 0,N,d,C=n.directions;Kge(C,a,n);for(var O=C.length,k=Wr(h).reduce(function(Ie,Ue){var We=xd(Ue);return Ie.push(We),Ie},[]),F=n.maximumLoops;!v.isEmpty()&&F>0;){var z=v.pop(),j=_[z],J=m[z],oe=b[z],W=J===void 0,D=j.equals(u),B;W?I?D?B=null:B=c2(u,j,O,a,n):B=A:B=c2(J,j,O,a,n);var U=l.length===h.length;if(U){for(var ie=0;ie<l.length;ie++)if(!l[ie].equals(h[ie])){U=!1;break}}var se=W&&U;if(!se&&k.indexOf(z)>=0)return n.previousDirectionAngle=B,Qge(m,_,j,u,c);for(y=0;y<O;y++){N=C[y];var xe=N.angle;if(d=M7(B,xe),!(!(I&&D)&&d>n.maxAllowedDirectionChange)){var me=Jv(j.clone().offset(N.gridOffsetX,N.gridOffsetY),a,i),ee=xd(me);if(!(v.isClose(ee)||r(me))){if(k.indexOf(ee)>=0){var ce=me.equals(c);if(!ce){var re=c2(me,c,O,a,n),te=M7(xe,re);if(te>n.maxAllowedDirectionChange)continue}}var le=N.cost,Me=D?0:n.penalties[d],Ge=oe+le+Me;(!v.isOpen(ee)||Ge<b[ee])&&(_[ee]=me,m[ee]=j,b[ee]=Ge,v.add(ee,Ge+N7(me,h)))}}}F--}}return n.fallbackRoute.call(this,u,c,n)}function tme(e){if(e.directions=li(e,"directions"),e.penalties=li(e,"penalties"),e.paddingBox=li(e,"paddingBox"),e.padding=li(e,"padding"),e.padding){var t=Al(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}Wr(e.directions).forEach(function(r){var n=new ge(0,0),i=new ge(r.offsetX,r.offsetY);r.angle=_a(n.theta(i))})}function rme(e,t,r){tme(t),r.options.perpendicular=!!t.perpendicular;var n=VH(r,t),i=$H(r,t),s=GH(r,t);let o;if(typeof t.isPointObstacle=="function")o=t.isPointObstacle;else{const P=new UP(t);P.build(r.paper.model,r.model),o=A=>!P.isPointAccessible(A)}for(var a=Wr(e).map(ge),u=[],c=s,l,h,v=0,_=a.length;v<=_;v++){var m=null;if(h=l||n,l=a[v],!l){l=i;var b=!r.model.get("source").id||!r.model.get("target").id;if(b&&An(t.draggingRoute)){var y=h===n?s:h,w=l.origin();m=t.draggingRoute.call(r,y,w,t)}}if(m=m||eme.call(r,h,l,o,t),m===null)return t.fallbackRouter(e,t,r);var T=m[0];T&&T.equals(c)&&m.shift(),c=m[m.length-1]||c,Array.prototype.push.apply(u,m)}return u}const cA=function(e,t,r){return rme(e,Xt({},zH,t),r)};var nme={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),r=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:r},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:r},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:r},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:r}]},fallbackRoute:function(e,t,r){var n=e.theta(t),i=[],s={x:t.x,y:e.y},o={x:e.x,y:t.y};if(n%180>90){var a=s;s=o,o=a}var u=n%90<45?s:o,c=new Ct(e,u),l=90*Math.ceil(n/90),h=ge.fromPolar(c.squaredLength(),zs(l+135),u),v=new Ct(t,h),_=c.intersection(v),m=_||t,b=_?m:e,y=360/r.directions.length,w=b.theta(t),T=_a(w+y/2),P=y*Math.floor(T/y);return r.previousDirectionAngle=P,m&&i.push(m.round()),i.push(t),i}};const ime=function(e,t,r){if(!An(cA))throw new Error("Metro requires the manhattan router.");return cA(e,Xt({},nme,t),r)},lt={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},D7=[lt.LEFT,lt.RIGHT,lt.TOP,lt.BOTTOM],Tf={[lt.LEFT]:lt.RIGHT,[lt.RIGHT]:lt.LEFT,[lt.TOP]:lt.BOTTOM,[lt.BOTTOM]:lt.TOP},sme=[lt.TOP,lt.BOTTOM],Nv={0:lt.RIGHT,180:lt.LEFT,270:lt.TOP,90:lt.BOTTOM};function pd(e){return e.angle()}function qv(e){return new Tn(e).simplify({threshold:1}).points}function mg(e,t){const{point:r,x0:n,y0:i,view:s,bbox:o,direction:a}=e,{point:u,x0:c,y0:l,view:h,bbox:v,direction:_}=t;let m;if(s)s.model.isLink()?m=F7(u,r,s):a===lt.ANCHOR_SIDE?m=o.sideNearestToPoint(r):a===lt.MAGNET_SIDE?m=s.model.getBBox().sideNearestToPoint(r):m=a;else{const y=new wt(n,i,0,0);m=D7.includes(a)?a:y.sideNearestToPoint(u)}let b;if(h)h.model.isLink()?b=F7(r,u,h):_===lt.ANCHOR_SIDE?b=v.sideNearestToPoint(u):_===lt.MAGNET_SIDE?b=h.model.getBBox().sideNearestToPoint(u):b=_;else{const y=new wt(c,l,0,0);b=D7.includes(_)?_:y.sideNearestToPoint(r)}return[m,b]}function ome(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,l=i+o,h=n-u,v=c+u,_=i-u,{x:m}=a,{x0:b,y0:y}=t;return b===m&&y<i?lt.BOTTOM:b<m&&y<_?lt.RIGHT:b>m&&y<_?lt.LEFT:b<h&&y>=i||b>v&&y>=i?lt.TOP:b>=h&&b<=m&&y>l||b<=v&&b>=m&&y>l?r.point.x<b?lt.RIGHT:lt.LEFT:lt.TOP}function ame(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,l=i+o,h=n-u,v=c+u,_=l+u,{x:m}=a,{x0:b,y0:y}=t;return b===m&&y>l?lt.TOP:b<m&&y>_?lt.RIGHT:b>m&&y>_?lt.LEFT:b<h&&y<=l||b>v&&y<=l?lt.BOTTOM:b>=h&&b<=m&&y<i||b<=v&&b>=m&&y<i?r.point.x<b?lt.RIGHT:lt.LEFT:lt.BOTTOM}function ume(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,l=n+o,h=i-u,v=n-u,_=l+u,{x:m,y:b}=a,{x0:y,y0:w}=t;return y<m&&w===b?lt.RIGHT:y<=h&&w<b?lt.BOTTOM:y<=h&&w>b?lt.TOP:y>=i&&w<=v||y>=i&&w>=_?lt.LEFT:y>c&&w>=v&&w<=b||y>c&&w<=_&&w>=b?r.point.y<w?lt.BOTTOM:lt.TOP:lt.LEFT}function cme(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,l=n+o,h=c+u,v=n-u,_=l+u,{x:m,y:b}=a,{x0:y,y0:w}=t;return y>m&&w===b?lt.LEFT:y>=h&&w<b?lt.BOTTOM:y>=h&&w>b?lt.TOP:y<=c&&w<=v||y<=c&&w>=_?lt.RIGHT:y<i&&w>=v&&w<=b||y<i&&w<=_&&w>=b?r.point.y<w?lt.BOTTOM:lt.TOP:lt.RIGHT}function lme(e,t,r){const[n]=mg(e,t);switch(n){case lt.TOP:return ome(e,t,r);case lt.RIGHT:return cme(e,t,r);case lt.BOTTOM:return ame(e,t,r);case lt.LEFT:return ume(e,t,r)}}function F7(e,t,r){const n=r.getTangentAtLength(r.getClosestPointLength(t)),i=Math.round(pd(n)/90)*90;if(i%180===0&&e.y===t.y)return e.x<t.x?lt.LEFT:lt.RIGHT;if(e.x===t.x)return e.y<t.y?lt.TOP:lt.BOTTOM;switch(i){case 0:case 180:case 360:return e.y<t.y?lt.TOP:lt.BOTTOM;case 90:case 270:return e.x<t.x?lt.LEFT:lt.RIGHT}}function B7(e,t,r,n,i,s,o){n===lt.AUTO&&(n=i?lt.MAGNET_SIDE:lt.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:u,y:c,width:l=0,height:h=0}=a?wt.fromRectUnion(r,e.model.getBBox()):s;return{point:t,x0:u,y0:c,view:e,bbox:r,width:l,height:h,direction:n,margin:a?o:0}}function f2({x:e,y:t}){const r=new ge(e,t);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new wt(e,t,0,0),width:0,height:0,direction:null,margin:0}}function z7(e,t,r){const n=t.point.clone(),{x0:i,y0:s,width:o,height:a}=t;switch(e){case"left":n.x=i-r;break;case"right":n.x=i+o+r;break;case"top":n.y=s-r;break;case"bottom":n.y=s+a+r;break}return n}function cc(e,t){const{point:r,x0:n,y0:i,view:s,width:o,height:a,margin:u}=e,{point:c,x0:l,y0:h,width:v,height:_,margin:m}=t,b=l+v,y=h+_,w=n+o,T=i+a,P=s&&s.model.isElement(),A=n-u,I=w+u,N=i-u,d=T+u,C=l-m,O=b+m,k=h-m,F=y+m,[z,j]=mg(e,t),J=z7(z,{point:r,x0:n,y0:i,width:o,height:a},u),oe=z7(j,{point:c,x0:l,y0:h,width:v,height:_},m),{x:W,y:D}=J,{x:B,y:U}=oe,ie=(l+b)/2,se=(h+y)/2,xe=(n+w)/2,me=(i+T)/2,ee=(xe<ie?w+l:b+n)/2,ce=(me<se?T+h:y+i)/2;if(z==="left"&&j==="right"){if(A<=O){let te=ce;return w<=l&&(y>=N&&U<D?te=Math.min(k,N):h<=d&&U>=D&&(te=Math.max(F,d))),[{x:W,y:D},{x:W,y:te},{x:B,y:te},{x:B,y:U}]}const re=(W+B)/2;return[{x:re,y:D},{x:re,y:U}]}else if(z==="right"&&j==="left"){if(I>=C){let te=ce;return W>b&&(y>=N&&U<D?te=Math.min(k,N):h<=d&&U>=D&&(te=Math.max(F,d))),[{x:W,y:D},{x:W,y:te},{x:B,y:te},{x:B,y:U}]}const re=(W+B)/2;return[{x:re,y:D},{x:re,y:U}]}else if(z==="top"&&j==="bottom"){if(D<U){let te=ee,le=D;return D<h&&(b>=A&&B<W?te=Math.min(C,A):l<=I&&B>=W&&(te=Math.max(O,I))),[{x:W,y:le},{x:te,y:le},{x:te,y:U},{x:B,y:U}]}const re=(D+U)/2;return[{x:W,y:re},{x:B,y:re}]}else if(z==="bottom"&&j==="top"){if(D-u>U){let te=ee,le=D;return D>y&&(b>=A&&B<W?te=Math.min(C,A):l<=I&&B>=W&&(te=Math.max(O,I))),[{x:W,y:le},{x:te,y:le},{x:te,y:U},{x:B,y:U}]}const re=(D+U)/2;return[{x:W,y:re},{x:B,y:re}]}else if(z==="top"&&j==="top"){let re,te=Math.min((T+h)/2,U),le=Math.min((i+y)/2,D);if(U<D){if(W>=O||W<=C)return[{x:W,y:Math.min(D,U)},{x:B,y:Math.min(D,U)}];B>W?re=Math.min(W,C):re=Math.max(W,O)}else{if(B>=I||B<=A)return[{x:W,y:Math.min(D,U)},{x:B,y:Math.min(D,U)}];B>=W?re=Math.max(B,I):re=Math.min(B,A)}return[{x:W,y:le},{x:re,y:le},{x:re,y:te},{x:B,y:te}]}else if(z==="bottom"&&j==="bottom"){let re,te=Math.max((i+y)/2,U),le=Math.max((T+h)/2,D);if(U>D){if(W>=O||W<=C)return[{x:W,y:Math.max(D,U)},{x:B,y:Math.max(D,U)}];B>W?re=Math.min(W,C):re=Math.max(W,O)}else{if(B>=I||B<=A)return[{x:W,y:Math.max(D,U)},{x:B,y:Math.max(D,U)}];B>=W?re=Math.max(B,I):re=Math.min(B,A)}return[{x:W,y:le},{x:re,y:le},{x:re,y:te},{x:B,y:te}]}else if(z==="left"&&j==="left"){let re,te=Math.min((w+l)/2,B),le=Math.min((n+b)/2,W);return B>W?U<=D?re=Math.min(N,U):re=Math.max(d,U):U>=D?re=Math.min(k,D):re=Math.max(F,D),[{x:le,y:D},{x:le,y:re},{x:te,y:re},{x:te,y:U}]}else if(z==="right"&&j==="right"){let re,te=Math.max((n+b)/2,B),le=Math.max((w+l)/2,W);return B<W?U<=D?re=Math.min(N,U):re=Math.max(d,U):U>=D?re=Math.min(k,D):re=Math.max(F,D),[{x:le,y:D},{x:le,y:re},{x:te,y:re},{x:te,y:U}]}else if(z==="top"&&j==="right"){if(D>U){if(W<B){let te=ce;return(te>se||!P)&&te<F&&W<l&&(te=k),[{x:W,y:te},{x:B,y:te},{x:B,y:U}]}return[{x:W,y:U}]}const re=Math.max(ee,O);if(B<W&&U>i&&U<T)return[{x:W,y:D},{x:re,y:D},{x:re,y:U}];if(re>A&&U>i||l>w){const te=Math.min(i-u,h-m),le=Math.max(w+u,b+m);return[{x:W,y:te},{x:le,y:te},{x:le,y:U}]}return[{x:W,y:D},{x:Math.max(re,B),y:D},{x:Math.max(re,B),y:U}]}else if(z==="top"&&j==="left"){if(D>U){if(W>B){let te=ce;return(te>se||!P)&&te<F&&W>b&&(te=k),[{x:W,y:te},{x:B,y:te},{x:B,y:U}]}return[{x:W,y:U}]}const re=Math.min(C,ee);if(W<B&&T>=U)return[{x:W,y:D},{x:re,y:D},{x:re,y:U}];if(re<I&&D<y){const te=Math.min(N,k),le=Math.min(A,C);return[{x:W,y:te},{x:le,y:te},{x:le,y:U}]}return[{x:W,y:D},{x:re,y:D},{x:re,y:U}]}else if(z==="bottom"&&j==="right"){if(D<U){if(W<B){let te=ce;return(te<se||!P)&&te>k&&W<l&&(te=F),[{x:W,y:te},{x:B,y:te},{x:B,y:U}]}return[{x:W,y:U}]}else if(n<B){const te=Math.max(d,F),le=Math.max(I,O);return[{x:W,y:te},{x:le,y:te},{x:le,y:U}]}const re=ee;return[{x:W,y:D},{x:re,y:D},{x:re,y:U}]}else if(z==="bottom"&&j==="left"){if(D<U){if(W>B){let te=ce;return(te<se||!P)&&te>k&&W>b&&(te=F),[{x:W,y:te},{x:B,y:te},{x:B,y:U}]}return[{x:W,y:U}]}else if(w>B){const te=Math.max(d,F),le=Math.min(A,C);return[{x:W,y:te},{x:le,y:te},{x:le,y:U}]}const re=ee;return[{x:W,y:D},{x:re,y:D},{x:re,y:U}]}else if(z==="left"&&j==="bottom"){if(W>=B&&D>=F)return[{x:B,y:D}];if(W>=b&&D<U){const le=ee;return[{x:le,y:D},{x:le,y:U},{x:B,y:U}]}if(B<w&&y<=i){const le=ce;return[{x:W,y:D},{x:W,y:le},{x:B,y:le}]}const re=Math.min(C,W),te=Math.max(d,F);return[{x:re,y:D},{x:re,y:te},{x:B,y:te}]}else if(z==="left"&&j==="top"){if(W>B&&D<k)return[{x:B,y:D}];if(W>=b&&D>U){const le=ee;return[{x:le,y:D},{x:le,y:U},{x:B,y:U}]}if(B<=w&&U>D){const le=ce;return[{x:W,y:D},{x:W,y:le},{x:B,y:le}]}const re=U<D?Math.min(A,C):A,te=Math.min(N,k);return[{x:re,y:D},{x:re,y:te},{x:B,y:te}]}else if(z==="right"&&j==="top"){if(W<=B&&D<k)return[{x:B,y:D}];if(w<l&&D>U){let le=ee;return[{x:le,y:D},{x:le,y:U},{x:B,y:U}]}if(B<W&&h>T){const le=ce;return[{x:W,y:D},{x:W,y:le},{x:B,y:le}]}const re=Math.max(I,O),te=Math.min(N,k);return[{x:re,y:D},{x:re,y:te},{x:B,y:te}]}else if(z==="right"&&j==="bottom"){if(W<=B&&D>=F)return[{x:B,y:D}];if(W<=C&&D<U){const le=ee;return[{x:le,y:D},{x:le,y:U},{x:B,y:U}]}if(B>n&&y<i){const le=ce;return[{x:W,y:D},{x:W,y:le},{x:B,y:le}]}const re=Math.max(O,W),te=Math.max(d,F);return[{x:re,y:D},{x:re,y:te},{x:B,y:te}]}}function UH(e,t,r){const{sourceDirection:n=lt.AUTO,targetDirection:i=lt.AUTO}=t,s=t.margin||20,o=t.useVertices||!1,a=!!r.model.source().port,u=B7(r.sourceView,r.sourceAnchor,r.sourceBBox,n,a,r.sourceAnchor,s),c=!!r.model.target().port,l=B7(r.targetView,r.targetAnchor,r.targetBBox,i,c,r.targetAnchor,s);let h=[];if(!o||e.length===0)return qv(cc(u,l));const v=e.map(b=>f2(b)),[_]=v;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(s).containsPoint(_.point)){const[b]=mg(u,_),y=b,w=f2(u.point);w.margin=s,w.direction=b,_.direction=y,h.push(...cc(w,_),_.point)}else{const b=v[1]||l,y=lme(u,_,b);_.direction=y,h.push(...cc(u,_),_.point)}for(let b=0;b<v.length-1;b++){const y=v[b],w=v[b+1],T=new Ct(y.point,w.point),P=pd(T);if(P%90===0){const N=Nv[P],d=Tf[N];if(N!==y.direction)h.push(y.point,w.point),w.direction=d;else{const C=_a(P-90);let O=0,k=0;C===90?k=-s:C===180?O=-s:C===270?k=s:C===0&&(O=s);const F={x:y.point.x+O,y:y.point.y+k},z={x:w.point.x+O,y:w.point.y+k},j=new Ct(w.point,z);w.direction=Nv[pd(j)],h.push(y.point,F,z,w.point)}continue}const[A,I]=h2(y,w);y.direction=A,w.direction=I,h.push(...cc(y,w),w.point)}const m=v[v.length-1];if(l.view&&l.view.model.isElement())if(l.view.model.getBBox().inflate(s).containsPoint(m.point)){const[b]=h2(m,l),y=f2(l.point),[,w]=mg(m,l);y.margin=s,y.direction=w,m.direction=b,h.push(...cc(m,y))}else{const b=qv(h),y=new Ct(b[b.length-2],m.point),w=Nv[Math.round(pd(y))];m.direction=w;let T=cc(m,l);const[P,A]=qv([...T,l.point]),I=new Ct(P,A),N=Math.round(pd(I)),d=Nv[N];d!==w&&w===Tf[d]&&(m.margin=s,T=cc(m,l)),h.push(...T)}else{const[b]=h2(m,l);m.direction=b,h.push(...cc(m,l))}return qv(h)}function h2(e,t){const r=e.direction,n=sme.includes(r);let i=e.direction,s=t.direction;if(n){const o=e.point.y>t.point.y,a=t.point.x-e.point.x;r===lt.BOTTOM?(i=o?Tf[r]:a>=0?lt.RIGHT:lt.LEFT,a>0?s=o?lt.LEFT:lt.TOP:a<0&&(s=o?lt.RIGHT:lt.TOP)):(i=o?a>=0?lt.RIGHT:lt.LEFT:Tf[r],a>0?s=o?lt.BOTTOM:lt.LEFT:a<0&&(s=o?lt.BOTTOM:lt.RIGHT))}else{const o=e.point.x>t.point.x,a=t.point.y-e.point.y;r===lt.RIGHT?(i=o?Tf[r]:a>=0?lt.BOTTOM:lt.TOP,a>0?s=o?lt.TOP:lt.LEFT:a<0&&(s=o?lt.BOTTOM:lt.LEFT)):(i=o?a>=0?lt.BOTTOM:lt.TOP:Tf[r],a>0?s=o?lt.RIGHT:lt.TOP:a<0&&(s=o?lt.RIGHT:lt.BOTTOM))}return[i,s]}UH.Directions=lt;const fme=UH,hme=Object.freeze(Object.defineProperty({__proto__:null,manhattan:cA,metro:ime,normal:zge,oneSide:Vge,orthogonal:uA,rightAngle:fme},Symbol.toStringTag,{value:"Module"})),_f={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},dme=Object.values(_f),pme=10,vme=1,jP=function(e,t,r=[],n={}){const{cornerType:i=_f.POINT,cornerRadius:s=pme,cornerPreserveAspectRatio:o=!1,precision:a=vme,raw:u=!1}=n;if(dme.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i===_f.POINT||!s){const l=[e].concat(r).concat([t]),h=new Tn(l);c=new zt(h)}else{c=new zt,c.appendSegment(zt.createSegment("M",e));let l;const h=r.length;for(let v=0;v<h;v++){const _=new ge(r[v]),m=r[v-1]||e,b=r[v+1]||t,y=l||_.distance(m)/2;l=_.distance(b)/2;let w,T;o?w=T=-Math.min(s,y,l):(w=-Math.min(s,y),T=-Math.min(s,l));const P=_.clone().move(m,w).round(a),A=_.clone().move(b,T).round(a);switch(c.appendSegment(zt.createSegment("L",P)),i){case _f.CUBIC:{const I=.3333333333333333,N=2/3,d=new ge(I*P.x+N*_.x,N*_.y+I*P.y),C=new ge(I*A.x+N*_.x,N*_.y+I*A.y);c.appendSegment(zt.createSegment("C",d,C,A));break}case _f.LINE:{c.appendSegment(zt.createSegment("L",A));break}case _f.GAP:{c.appendSegment(zt.createSegment("M",A));break}}}c.appendSegment(zt.createSegment("L",t))}return u?c:c.serialize()};var gme=5,V7=["arc","gap","cubic"],mme=0,$7=1,yme=["smooth"],Dv=1/3,Fv=2/3;function G7(e,t){let{x:r,y:n}=e,{x:i,y:s}=t;if(r>i){let o=r;r=i,i=o,o=n,n=s,s=o}if(n>s){let o=r;r=i,i=o,o=n,n=s,s=o}return[new ge(r,n),new ge(i,s)]}function _me(e,t){const[{x:r,y:n},{x:i,y:s}]=G7(e.start,e.end),[{x:o,y:a},{x:u,y:c}]=G7(t.start,t.end),l=r<=u&&o<=i,h=n<=c&&a<=s;return l&&h}function d2(e,t,r){var n=[].concat(e,r,t);return n.reduce(function(i,s,o){var a=n[o+1];return a!=null&&(i[o]=gl(s,a)),i},[])}function bme(e){var t=e.paper,r=t._jumpOverUpdateList;if(r==null){r=t._jumpOverUpdateList=[];var n=t.model;n.on("batch:stop",function(){this.hasActiveBatch()||wme(t)}),n.on("reset",function(){r=t._jumpOverUpdateList=[]})}r.indexOf(e)<0&&(r.push(e),e.listenToOnce(e.model,"change:connector remove",function(){r.splice(r.indexOf(e),1)}))}function wme(e){for(var t=e._jumpOverUpdateList,r=0;r<t.length;r++){const n=t[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function xme(e,t){return Wr(t).reduce(function(r,n){var i=e.intersection(n);return i&&r.push(i),r},[])}function U7(e,t){return gl(e,t).squaredLength()}function Sme(e,t,r){return t.reduce(function(n,i,s){if(i.skip===!0)return n;var o=n.pop()||e,a=ag(i).move(o.start,-r),u=ag(i).move(o.start,+r),c=t[s+1];if(c!=null){var l=u.distance(c);l<=r&&(u=c.move(o.start,l),c.skip=!0)}else{var h=a.distance(o.end);if(h<r*2+$7)return n.push(o),n}var v=u.distance(o.start);if(v<r*2+$7)return n.push(o),n;var _=gl(a,u);return _.isJump=!0,n.push(gl(o.start,a),_,gl(u,o.end)),n},[])}function j7(e,t,r,n){var i=new zt,s;return s=zt.createSegment("M",e[0].start),i.appendSegment(s),Wr(e).forEach(function(o,a){if(o.isJump){var u,c,l,h;if(r==="arc"){u=-90,c=o.start.difference(o.end);var v=+(c.x<0||c.x===0&&c.y<0);v&&(u+=180);var _=o.midpoint(),m=new Ct(_,o.end).rotate(_,u),b;b=new Ct(o.start,_),l=b.pointAt(2/3).rotate(o.start,u),h=m.pointAt(1/3).rotate(m.end,-u),s=zt.createSegment("C",l,h,m.end),i.appendSegment(s),b=new Ct(_,o.end),l=m.pointAt(1/3).rotate(m.end,u),h=b.pointAt(1/3).rotate(o.end,-u),s=zt.createSegment("C",l,h,o.end),i.appendSegment(s)}else if(r==="gap")s=zt.createSegment("M",o.end),i.appendSegment(s);else if(r==="cubic"){u=o.start.theta(o.end);var y=t*.6,w=t*1.35;c=o.start.difference(o.end),v=+(c.x<0||c.x===0&&c.y<0),v&&(w*=-1),l=ge(o.start.x+y,o.start.y+w).rotate(o.start,u),h=ge(o.end.x-y,o.end.y+w).rotate(o.end,u),s=zt.createSegment("C",l,h,o.end),i.appendSegment(s)}}else{var T=e[a+1];n==0||!T||T.isJump?(s=zt.createSegment("L",o.end),i.appendSegment(s)):Eme(n,i,o.end,o.start,T.end)}}),i}function Eme(e,t,r,n,i){var s=r.distance(n)/2,o=r.distance(i)/2,a=-Math.min(e,s),u=-Math.min(e,o),c=r.clone().move(n,a).round(),l=r.clone().move(i,u).round(),h=new ge(Dv*c.x+Fv*r.x,Fv*r.y+Dv*c.y),v=new ge(Dv*l.x+Fv*r.x,Fv*r.y+Dv*l.y),_;_=zt.createSegment("L",c),t.appendSegment(_),_=zt.createSegment("C",h,v,l),t.appendSegment(_)}const Ame=function(e,t,r,n){bme(this);var i=n.raw,s=n.size||gme,o=n.jump&&(""+n.jump).toLowerCase(),a=n.radius||mme,u=n.ignoreConnectors||yme;V7.indexOf(o)===-1&&(o=V7[0]);var c=this.paper,l=c.model,h=l.getLinks();if(h.length===1)return j7(d2(e,t,r),s,o,a);var v=this.model,_=h.indexOf(v),m=c.options.defaultConnector||{},b=h.filter(function(I,N){var d=I.get("connector")||m;return Wr(u).includes(d.name)?!1:N>_?d.name!=="jumpover":!0}),y=b.map(function(I){return c.findViewByModel(I)}),w=d2(e,t,r),T=y.map(function(I){return I==null?[]:I===this?w:d2(I.sourcePoint,I.targetPoint,I.route)},this),P=w.reduce(function(I,N){var d=b.reduce(function(C,O,k){if(O!==v){const F=T[k].slice(),z=F.findIndex(J=>_me(N,J));z>-1&&N.containsPoint(F[z].end)&&F.splice(z+1,1);const j=xme(N,F);C.push.apply(C,j)}return C},[]).sort(function(C,O){return U7(N.start,C)-U7(N.start,O)});return d.length>0?I.push.apply(I,Sme(N,d,s)):I.push(N),I},[]),A=j7(P,s,o,a);return i?A:A.serialize()},Tme=function(e,t,r=[],n={}){const{raw:i}=n;return jP(e,t,r,{cornerType:"point",raw:i})},Pme=10,Cme=0,Ome=function(e,t,r=[],n={}){const{radius:i=Pme,raw:s}=n;return jP(e,t,r,{cornerType:"cubic",cornerRadius:i,precision:Cme,raw:s})},Ime=function(e,t,r,n){var i=n&&n.raw,s;if(r&&r.length!==0){var o=[e].concat(r).concat([t]),a=an.throughPoints(o);s=new zt(a)}else{s=new zt;var u;if(u=zt.createSegment("M",e),s.appendSegment(u),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;u=zt.createSegment("C",c,e.y,c,t.y,t.x,t.y),s.appendSegment(u)}else{var l=(e.y+t.y)/2;u=zt.createSegment("C",e.x,l,t.x,l,t.x,t.y),s.appendSegment(u)}}return i?s:s.serialize()},Mo={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},gs={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},HP=function(e,t,r=[],n={},i){const s=!!n.raw,{direction:o=Mo.AUTO,precision:a=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new ge(n.sourceTangent):null,targetTangent:n.targetTangent?new ge(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new ge(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new ge(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new ge(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new ge(n.targetDirection).normalize():null;const c=[e,...r,t].map(b=>new ge(b));let l;if(u.sourceTangent)l=u.sourceTangent;else{const b=Nme(i,c,o,u),y=c[0].distance(c[1])*u.coeff,w=c[1].difference(c[0]).normalize(),T=lA(b,w);if(T>Math.PI/4){const P=y+(T-Math.PI/4)*u.angleTangentCoefficient;l=b.clone().scale(P,P)}else l=b.clone().scale(y,y)}let h;if(u.targetTangent)h=u.targetTangent;else{const b=qme(i,c,o,u),y=c.length-1,w=c[y-1].distance(c[y])*u.coeff,T=c[y-1].difference(c[y]).normalize(),P=lA(b,T);if(P>Math.PI/4){const A=w+(P-Math.PI/4)*u.angleTangentCoefficient;h=b.clone().scale(A,A)}else h=b.clone().scale(w,w)}const _=Fme(c,l,h,u).map(b=>Bme(b,u)),m=new zt(_).round(a);return s?m:m.serialize()};HP.Directions=Mo;HP.TangentDirections=gs;function Rme(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.x>t[1].x?i="right":i="left";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"left":o=new ge(-1,0);break;case"right":default:o=new ge(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function kme(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.x>t[t.length-2].x?i="left":i="right";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"left":o=new ge(-1,0);break;case"right":default:o=new ge(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Mme(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.y>t[1].y?i="bottom":i="top";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new ge(0,-1);break;case"bottom":default:o=new ge(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function Lme(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.y>t[t.length-2].y?i="top":i="bottom";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new ge(0,-1);break;case"bottom":default:o=new ge(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function H7(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)i=n.sideNearestToPoint(t[1]);else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new ge(0,-1);break;case"bottom":o=new ge(0,1);break;case"right":o=new ge(1,0);break;case"left":o=new ge(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function W7(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)i=n.sideNearestToPoint(t[t.length-2]);else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new ge(0,-1);break;case"bottom":o=new ge(0,1);break;case"right":o=new ge(1,0);break;case"left":o=new ge(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function X7(e,t,r){return t[1].difference(t[0]).normalize()}function Y7(e,t,r){const n=t.length-1;return t[n-1].difference(t[n]).normalize()}function K7(e,t,r){const{sourceBBox:n}=e,i=n.center();return t[0].difference(i).normalize()}function J7(e,t,r){const{targetBBox:n}=e,i=n.center();return t[t.length-1].difference(i).normalize()}function Nme(e,t,r,n){if(n.sourceDirection)switch(n.sourceDirection){case gs.UP:return new ge(0,-1);case gs.DOWN:return new ge(0,1);case gs.LEFT:return new ge(-1,0);case gs.RIGHT:return new ge(1,0);case gs.AUTO:return H7(e,t,n);case gs.CLOSEST_POINT:return X7(e,t);case gs.OUTWARDS:return K7(e,t);default:return n.sourceDirection}switch(r){case Mo.HORIZONTAL:return Rme(e,t,n);case Mo.VERTICAL:return Mme(e,t,n);case Mo.CLOSEST_POINT:return X7(e,t);case Mo.OUTWARDS:return K7(e,t);case Mo.AUTO:default:return H7(e,t,n)}}function qme(e,t,r,n){if(n.targetDirection)switch(n.targetDirection){case gs.UP:return new ge(0,-1);case gs.DOWN:return new ge(0,1);case gs.LEFT:return new ge(-1,0);case gs.RIGHT:return new ge(1,0);case gs.AUTO:return W7(e,t,n);case gs.CLOSEST_POINT:return Y7(e,t);case gs.OUTWARDS:return J7(e,t);default:return n.targetDirection}switch(r){case Mo.HORIZONTAL:return kme(e,t,n);case Mo.VERTICAL:return Lme(e,t,n);case Mo.CLOSEST_POINT:return Y7(e,t);case Mo.OUTWARDS:return J7(e,t);case Mo.AUTO:default:return W7(e,t,n)}}function Dme(e,t){const r=Math.cos(t),n=Math.sin(t),i=r*e.x-n*e.y,s=n*e.x+r*e.y;e.x=i,e.y=s}function lA(e,t){let r=e.dot(t)/(e.magnitude()*t.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function Z7(e,t){return e.x*t.y-e.y*t.x}function Fme(e,t,r,n){const{tau:i,coeff:s}=n,o=[],a=[],u=[],c=e.length-1;for(let l=0;l<c;l++)o[l]=e[l].distance(e[l+1]);a[0]=t,a[c]=r;for(let l=1;l<c;l++){let h,v;l===1?h=e[l-1].clone().offset(a[l-1].x,a[l-1].y):h=e[l-1].clone(),l===c-1?v=e[l+1].clone().offset(a[l+1].x,a[l+1].y):v=e[l+1].clone();const _=h.difference(e[l]).normalize(),m=v.difference(e[l]).normalize(),b=lA(_,m);let y=(Math.PI-b)/2,w;const T=Z7(_,m);let P;P=Z7(e[l].difference(e[l+1]),e[l].difference(e[l-1])),T<0&&(y=-y),b<Math.PI/2&&(y<0&&P<0||y>0&&P>0)&&(y=y-Math.PI),w=m.clone(),Dme(w,y);const A=w.clone(),I=w.clone(),N=o[l-1]*s,d=o[l]*s;A.scale(N,N),I.scale(d,d),a[l]=[A,I]}for(let l=0;l<c;l++){let h,v;l===0?h=e[l+1].difference(a[l].x/i,a[l].y/i):h=e[l+1].difference(a[l][1].x/i,a[l][1].y/i),l===c-1?v=e[l].clone().offset(a[l+1].x/i,a[l+1].y/i):v=e[l].difference(a[l+1][0].x/i,a[l+1][0].y/i),u[l]=[h,e[l],e[l+1],v]}return u}function Bme(e,t){const{tau:r}=t,n=new ge;n.x=e[1].x+(e[2].x-e[0].x)/(6*r),n.y=e[1].y+(e[2].y-e[0].y)/(6*r);const i=new ge;return i.x=e[2].x+(e[3].x-e[1].x)/(6*r),i.y=e[2].y+(e[3].y-e[1].y)/(6*r),new an(e[1],n,i,e[2])}const zme=Object.freeze(Object.defineProperty({__proto__:null,curve:HP,jumpover:Ame,normal:Tme,rounded:Ome,smooth:Ime,straight:jP},Symbol.toStringTag,{value:"Module"})),ur={TOOLS:Ir.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},vs=Ir.extend({className:function(){var e=Ir.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Ir.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[ur.RENDER],attrs:[ur.UPDATE],router:[ur.UPDATE],connector:[ur.CONNECTOR],smooth:[ur.UPDATE],manhattan:[ur.UPDATE],toolMarkup:[ur.LEGACY_TOOLS],labels:[ur.LABELS],labelMarkup:[ur.LABELS],vertices:[ur.VERTICES,ur.UPDATE],vertexMarkup:[ur.VERTICES],source:[ur.SOURCE,ur.UPDATE],target:[ur.TARGET,ur.UPDATE]},initFlag:[ur.RENDER,ur.SOURCE,ur.TARGET,ur.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,ur.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,ur.SOURCE)}if(this.hasFlag(e,ur.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,ur.TARGET)}const{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return e;if(this.hasFlag(e,ur.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[ur.RENDER,ur.UPDATE,ur.VERTICES,ur.LABELS,ur.TOOLS,ur.LEGACY_TOOLS,ur.CONNECTOR]),e;let s=!1;this.hasFlag(e,ur.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,ur.VERTICES));const{model:o}=this,{attributes:a}=o;let u=this.hasFlag(e,ur.LABELS),c=this.hasFlag(e,ur.LEGACY_TOOLS);u&&(this.onLabelsChange(o,a.labels,t),e=this.removeFlag(e,ur.LABELS),s=!0),c&&(this.renderTools(),e=this.removeFlag(e,ur.LEGACY_TOOLS));const l=this.hasFlag(e,ur.UPDATE),h=this.hasFlag(e,ur.CONNECTOR);return(l||h)&&(l?t.translateBy&&o.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[ur.UPDATE,ur.TOOLS,ur.CONNECTOR]),u=!1,c=!1,s=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,ur.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,ur.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(ur.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],n=r.length;if(n>1){var i=!!t[r[1]];if(i){if(n===2)return"markup"in Object(e.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=Ye(e);Array.isArray(t)||(t=[t]);for(var r=this._V,n=0,i=t.length;n<i;n++){var s=t[n],o=s.attr("class");o&&(o=Jve(o),r[qt.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=Ye(e),r=document.createDocumentFragment();if(!Array.isArray(t))r.appendChild(t.node);else for(var n=0,i=t.length;n<i;n++){var s=t[n].node;r.appendChild(s)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=t.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=Ye("g").append(t):r=Ye(n[0]),r.addClass("label"),{node:r.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=Ye("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(la(li(this,"className"))),t.attr("model-id",i.id)));for(var a=0;a<o;a++){var u=s[a],c=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),l,h;if(c)l=c.node,h=c.selectors;else{var v=i._builtins.defaultLabel,_=this._normalizeLabelMarkup(this._getLabelMarkup(v.markup)),m=i._getDefaultLabel(),b=this._normalizeLabelMarkup(this._getLabelMarkup(m.markup)),y=b||_;l=y.node,h=y.selectors}l.setAttribute("label-idx",a),t.append(l),r[a]=l;var w=this.selector;if(h[w])throw new Error("dia.LinkView: ambiguous label root selector.");h[w]=l,n[a]=h}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:r,_V:n,options:i}=this,{labels:s}=n;if(!s||!r.hasLabels())return;const{node:o}=s;i.labelsLayer?t.getLayerView(i.labelsLayer).insertSortedNode(o,r.get("z")):o.parentNode!==e&&e.appendChild(o)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:r}=t;r&&e.labelsLayer&&r.remove()},findLabelNode:function(e,t){const r=this._labelCache[e];if(!r)return null;const n=this._labelSelectors[e],[i=null]=this.findBySelector(t,r,n);return i},_mergeLabelAttrs:function(e,t,r,n){return t===null?null:t===void 0?r===null?null:r===void 0?e?void 0:n:e?r:gi({},n,r):e?gi({},r,t):gi({},n,r,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:gi({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],r=this.can("labelMove"),n=e._builtins.defaultLabel,i=n.attrs,s=e._getDefaultLabel(),o=s.markup,a=s.attrs,u=s.size,c=0,l=t.length;c<l;c++){var h=this._labelCache[c];h.setAttribute("cursor",r?"move":"default");var v=this._labelSelectors[c],_=t[c],m=_.markup,b=_.attrs,y=_.size,w=this._mergeLabelAttrs(m||o,b,a,i),T=this._mergeLabelSize(y,u);this.updateDOMSubtreeAttributes(h,w,{rootBBox:new wt(T),selectors:v})}return this},renderTools:function(){if(!this._V.linkTools)return this;var e=qt(this._V.linkTools.node).empty(),t=ps(this.model.get("toolMarkup")||this.model.toolMarkup),r=Ye(t());if(e.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=ps(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=Ye(t())):n=r.clone(),e.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=qt(this._V.markerVertices.node).empty(),t=ps(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){e.append(Ye(t(Xt({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=qt(this._V.markerArrowheads.node);e.empty();var t=ps(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Ye(t({end:"source"})),this._V.targetArrowhead=Ye(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],s=i.length,o=new Tn(i);o.simplify({threshold:.001});const a=o.points.map(c=>c.toJSON()),u=a.length;return s===u?0:(r.vertices(a.slice(1,u-1),e),s-u)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new ge(this.sourceAnchor);case"target":return new ge(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new ge(this.sourcePoint);case"target":return new ge(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:r,path:n}=this;if(!r||!n)return;const i=new Tn(r);i.translate(e,t),this.route=i.points,this._translateConnectionPoints(e,t),n.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),r=this.findAnchors(t),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,s=this.findRoute(t);this.route=s;var o=this.findConnectionPoints(s,n,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:r}=this,n=this.findMarkerPoints(e,t,r),i=this.findPath(e,n.source||t,n.target||r);this.path=i},findMarkerPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this._markerCache,o,a;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=ge(t).move(n||r,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),a=ge(r).move(i||t,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||t.clone(),s.targetPoint=a||r.clone(),{source:o,target:a}},findAnchorsOrdered:function(e,t,r,n){var i,s,o,a,u=this.model,c=u.get(e),l=u.get(r),h=this.getEndView(e),v=this.getEndView(r),_=this.getEndMagnet(e),m=this.getEndMagnet(r);h?(t?o=new ge(t):v?o=m:o=new ge(l),i=this.getAnchor(c.anchor,h,_,o,e)):i=new ge(c),v?(a=new ge(n||i),s=this.getAnchor(l.anchor,v,m,a,r)):s=new ge(l);var b={};return b[e]=i,b[r]=s,b},findAnchors:function(e){var t=this.model,r=e[0],n=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this.model,o=s.get("source"),a=s.get("target"),u=this.sourceView,c=this.targetView,l=this.paper.options,h,v,_;if(u&&!u.isNodeConnection(this.sourceMagnet)){h=this.sourceMagnet||u.el;var m=o.connectionPoint||l.defaultConnectionPoint,b=n||r,y=new Ct(b,t);_=this.getConnectionPoint(m,u,h,y,"source")}else _=t;var w;if(c&&!c.isNodeConnection(this.targetMagnet)){v=this.targetMagnet||c.el;var T=a.connectionPoint||l.defaultConnectionPoint,P=i||t,A=new Ct(P,r);w=this.getConnectionPoint(T,c,v,A,"target")}else w=r;return{source:_,target:w}},getAnchor:function(e,t,r,n,i){var s=t.isNodeConnection(r),o=this.paper.options;if(e||(s?e=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?e={name:"perpendicular"}:e=o.defaultAnchor),!e)throw new Error("Anchor required.");var a;if(typeof e=="function")a=e;else{var u=e.name,c=s?"linkAnchorNamespace":"anchorNamespace";if(a=o[c][u],typeof a!="function")throw new Error("Unknown anchor: "+u)}var l=a.call(this,t,r,n,e.args||{},i,this);return l?l.round(this.decimalsRounding):new ge},getConnectionPoint:function(e,t,r,n,i){var s,o=n.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var u=r===t.el?void 0:r;if(s=a.linkConnectionPoint(this,t,u,n.start,i),s)return s}if(!e)return o;var c;if(typeof e=="function")c=e;else{var l=e.name;if(c=a.connectionPointNamespace[l],typeof c!="function")throw new Error("Unknown connection point: "+l)}return s=c.call(this,n,t,r,e.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(e,t){var r=this._markerCache;r.sourcePoint.offset(e,t),r.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,r=t.position,n=e._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return gi({},r,i)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:gi({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,r=t.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,s=r.length;i<s;i++){var o=this._labelCache[i];if(o){var a=r[i],u=this._normalizeLabelPosition(a.position),c=this._mergeLabelPositionProperty(u,n),l=this._getLabelTransformationMatrix(c);o.setAttribute("transform",Ye.matrixToTransformString(l)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:r}=this,n=r[e];if(n)for(let i in n){const{id:s}=n[i];s&&s in t&&delete t[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var n=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+e),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||t;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+e),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(qt.css(this._V.markerArrowheads.node,"display")==="none")return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:r}=this,n=`${e}View`,i=t.get(e),s=i&&i.id;if(!s)return this[n]=null,this.updateEndMagnet(e),!0;const o=r.getModelById(s);if(!o)throw new Error("LinkView: invalid "+e+" cell.");const a=o.findView(r);return a?(this[n]=a,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,r=this.getEndView(e);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(e));n===r.el&&(n=null),this[t]=n}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var r=Wr(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:gi({},t,e)},addLabel:function(e,t,r,n){var i,s,o=0,a;typeof e!="number"?(i=e.x,s=e.y,typeof t=="number"?(o=t,a=r):a=t):(i=e,s=t,typeof r=="number"?(o=r,a=n):a=r);var u=this._getDefaultLabelPositionArgs(),c=a,l=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,s,o,l)},v=-1;return this.model.insertLabel(v,h,a),v},addVertex:function(e,t,r){var n=typeof e!="number",i=n?e.x:e,s=n?e.y:t,o=n?t:r,a={x:i,y:s},u=this.getVertexIndex(i,s);return this.model.insertVertex(u,a,o),u},sendToken:function(e,t,r){function n(h,v){return function(){h.remove(),typeof v=="function"&&v()}}var i,s,o;rn(t)?(i=t.duration,s=t.direction==="reverse",o=t.connection):(i=t,s=!1,o=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(a.keyPoints="1;0",a.keyTimes="0;1");var u=Ye(e),c;if(typeof o=="string")c=this.findBySelector(o,this.el,this.selectors)[0];else{var l=this._V;c=l.connection?l.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,c),setTimeout(n(u,r),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||hme,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return e.map(ge);var i=An(r)?r:t[r.name];if(!An(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var s=r.args||{},o=i.call(this,e,s,this);return o||e.map(ge)},findPath:function(e,t,r){var n=this.paper.options.connectorNamespace||zme,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=An(i)?i:n[i.name];if(!An(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=Ua(i.args||{});a.raw=!0;var u=o.call(this,t,r,e,a,this);return typeof u=="string"&&(u=new zt(Ye.normalizePathData(u))),u},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var r=e.serialize();return t.data=r,r},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var r=e.getSegmentSubdivisions();return t.segmentSubdivisions=r,r},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var r=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=r,r},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Wi(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,r,n){var i={},s=0,o;typeof r=="number"?(s=r,o=n):o=r,o&&(i.args=o);var a=!(o&&o.absoluteDistance),u=o&&o.absoluteDistance&&o.reverseDistance,c=o&&o.absoluteOffset,l=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},v=new ge(e,t),_=l.closestPointT(v,h),m=l.lengthAtT(_,h);a&&(m=m/this.getConnectionLength()||0),u&&(m=-1*(this.getConnectionLength()-m)||1),i.distance=m;var b;c||(b=l.tangentAtT(_));var y;if(b)y=b.pointOffset(v);else{var w=l.pointAtT(_),T=v.difference(w);y={x:T.x,y:T.y}}return i.offset=y,i.angle=s,i},_getLabelTransformationMatrix:function(e){var t,r=0,n={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")n=e.args||{},t=e.distance,r=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=t>0&&t<=1,s=0,o={x:0,y:0};if(e.offset){var a=e.offset;typeof a=="number"&&(s=a),a.x&&(o.x=a.x),a.y&&(o.y=a.y)}var u=o.x!==0||o.y!==0||s===0,c=n.keepGradient,l=n.ensureLegibility,h=this.path,v={segmentSubdivisions:this.getConnectionSubdivisions()},_=i?t*this.getConnectionLength():t,m=h.tangentAtLength(_,v),b,y=r;if(m){if(u)b=m.start.clone(),b.offset(o);else{var w=m.clone();w.rotate(m.start,-90),w.setLength(s),b=w.end}c&&(y=m.angle()+r,l&&(y=_a((y+90)%180-90)))}else b=h.start.clone(),u&&b.offset(o);return Ye.createSVGMatrix().translate(b.x,b.y).rotate(y)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new ge(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new ge(e,t)),s=0,o=n.length;s<o;s++){var a=n[s],u=this.getClosestPointLength(a);if(i<u)break}return s},notifyPointerdown(e,t,r){Ir.prototype.pointerdown.call(this,e,t,r),this.notify("link:pointerdown",e,t,r)},notifyPointermove(e,t,r){Ir.prototype.pointermove.call(this,e,t,r),this.notify("link:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("link:pointerup",e,t,r),Ir.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){Ir.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){Ir.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,r)},contextmenu:function(e,t,r){Ir.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r);var n=e.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(e,t,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(e,t,r);return;case"marker-arrowhead":this.dragArrowheadStart(e,t,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(e,t,r);return;case"marker-source":case"marker-target":return}this.dragStart(e,t,r)},pointermove:function(e,t,r){var n=this._dragData;n&&this.eventData(e,n);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertex(e,t,r);break;case"label-move":this.dragLabel(e,t,r);break;case"arrowhead-move":this.dragArrowhead(e,t,r);break;case"move":this.drag(e,t,r);break}n&&Xt(n,this.eventData(e)),this.notifyPointermove(e,t,r)},pointerup:function(e,t,r){var n=this._dragData;n&&(this.eventData(e,n),this._dragData=null);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertexEnd(e,t,r);break;case"label-move":this.dragLabelEnd(e,t,r);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,r);break;case"move":this.dragEnd(e,t,r)}this.notifyPointerup(e,t,r),this.checkMouseleave(e)},mouseover:function(e){Ir.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){Ir.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){Ir.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){Ir.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,r,n){Ir.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){var i=Ye(e.target).findParentByClass("link-tool",this.el);if(i){if(e.stopPropagation(),this.can("useLinkTools"))if(t==="remove"){this.model.remove({ui:!0});return}else this.notify(t,e,r,n);this.notifyPointerdown(e,r,n),this.paper.delegateDragEvents(this,e.data)}else Ir.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragLabelStart(e,t,r);var n=this.eventData(e).stopPropagation;n&&e.stopPropagation()},dragConnectionStart:function(e,t,r){if(this.can("vertexAdd")){var n=this.addVertex({x:t,y:r},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(e,t,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var n=e.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(o,s),u=this.getLabelCoordinates(a),c=u.x-t,l=u.y-r,h=this._getLabelPositionAngle(i),v=this._getLabelPositionArgs(i),_=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(v,_);this.eventData(e,{action:"label-move",labelIdx:i,dx:c,dy:l,positionAngle:h,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,r){if(this.can("vertexMove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(e,t,r){if(this.can("vertexRemove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(e,t,r){if(this.can("arrowheadMove")){var n=e.target,i=n.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,t,r){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:r})},dragLabel:function(e,t,r){var n=this.eventData(e),i={position:this.getLabelPosition(t+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(s.async=!1),this.model.label(n.labelIdx,i,s)},dragVertex:function(e,t,r){var n=this.eventData(e);this.model.vertex(n.vertexIdx,{x:t,y:r},{ui:!0})},dragArrowhead:function(e,t,r){this.paper.options.snapLinks?!this._snapArrowhead(e,t,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,r):this._connectArrowhead(this.getEventTarget(e),t,r,this.eventData(e))},drag:function(e,t,r){var n=this.eventData(e);this.model.translate(t-n.dx,r-n.dy,{ui:!0}),this.eventData(e,{dx:t,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,r){var n=this.eventData(e),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,t,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,e)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var r=e.arrowhead,n=e.initialEnd,i=this.model.prop(r),s=i&&!bh.endsEqual(n,i);if(s){var o=this.paper;n.id&&this.notify("link:disconnect",t,o.findViewByModel(n.id),e.initialMagnet,r),i.id&&this.notify("link:connect",t,o.findViewByModel(i.id),e.magnetUnderPointer,r)}},_snapToPoints:function(e,t,r){let n=null,i=1/0,s=null,o=1/0,a=e.x,u=e.y;for(let c=0;c<t.length;c++){const l=Math.abs(t[c].x-e.x);l<i&&(i=l,n=t[c]);const h=Math.abs(t[c].y-e.y);h<o&&(o=h,s=t[c])}return i<r&&(a=n.x),o<r&&(u=s.y),{x:a,y:u}},_snapArrowheadSelf:function(e,t,r){const{paper:n,model:i}=this,{snapLinksSelf:s}=n.options,o=this.eventData(e),a=s.radius||20,u=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),c=i.vertices(),l=[u,...c],h=this._snapToPoints({x:t,y:r},l,a),v=n.localToClientPoint(h);this._connectArrowhead(document.elementFromPoint(v.x,v.y),h.x,h.y,this.eventData(e))},_snapArrowhead:function(e,t,r){const{paper:n}=this,{snapLinks:i,connectionStrategy:s}=n.options,o=this.eventData(e);let a=!1;var u=i.radius||50,c=n.findViewsInArea({x:t-u,y:r-u,width:2*u,height:2*u}),l=o.closestView||null,h=o.closestMagnet||null,v=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var _=Number.MAX_VALUE,m=new ge(t,r);c.forEach(function(I){const N=[];I.el.getAttribute("magnet")!=="false"&&N.push({bbox:I.model.getBBox(),magnet:I.el}),I.$("[magnet]").toArray().forEach(d=>{N.push({bbox:I.getNodeBBox(d),magnet:d})}),N.forEach(d=>{const{magnet:C,bbox:O}=d,k=O.center().squaredDistance(m);k<_&&(h===C||n.options.validateConnection.apply(n,o.validateConnectionArgs(I,I.el===C?null:C)))&&(_=k,o.closestView=I,o.closestMagnet=C)})},this);var b,y=null,w=o.closestView,T=o.closestMagnet;T&&(y=o.magnetProxy=w.findProxyNode(T,"highlighter"));var P=o.arrowhead,A=h!==T;if(l&&A&&l.unhighlight(v,{connecting:!0,snapping:!0}),w){const{prevEnd:I,prevX:N,prevY:d}=o;if(o.prevX=t,o.prevY=r,a=!0,!A&&(typeof s!="function"||N===t&&d===r)||(b=w.getLinkEnd(T,t,r,this.model,P),!A&&Ef(I,b)))return a;o.prevEnd=b,A&&w.highlight(y,{connecting:!0,snapping:!0})}else b={x:t,y:r};return this.model.set(P,b||{x:t,y:r},{ui:!0}),l&&this.notify("link:snap:disconnect",e,l,h,P),w&&this.notify("link:snap:connect",e,w,T,P),a},_snapArrowheadEnd:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(r)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,r,n){const{paper:i,model:s}=this;if(n.eventTarget!==e){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});const o=n.viewUnderPointer=i.findView(e);if(o){const a=n.magnetUnderPointer=o.findMagnet(e),u=n.magnetProxy=o.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(o,a))?u&&o.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=e,s.set(n.arrowhead,{x:t,y:r},{ui:!0})},_connectArrowheadEnd:function(e={},t,r){const{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:a}=e;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const u=i.getLinkEnd(s,t,r,n,a);n.set(a,u,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var r,n=0,i=0;e==="source"?(n=2,r="target"):(i=2,r="source");var s=this.model.get(r);if(s.id){var o=t[n]=this.paper.findViewByModel(s.id),a=o.getMagnetFromLinkEnd(s);a===o.el&&(a=void 0),t[n+1]=a}function u(c,l){return t[i]=c,t[i+1]=c.el===l?void 0:l,t}return u},_markAvailableMagnets:function(e){function t(h,v){var _=h.paper,m=_.options.validateConnection;return m.apply(_,this.validateConnectionArgs(h,v))}var r=this.paper,n=r.model.getCells();e.marked={};for(var i=0,s=n.length;i<s;i++){var o=n[i].findView(r);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&a.push(o.el);var u=a.filter(t.bind(e,o));if(u.length>0){for(var c=0,l=u.length;c<l;c++)o.highlight(u[c],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),e.marked[o.model.id]=u}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),r,n,i=0,s=t.length;i<s;i++){r=t[i],n=e.marked[r];var o=this.paper.findViewByModel(r);if(o){for(var a=0,u=n.length;a<u;a++)o.unhighlight(n[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var r={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Ua(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(r),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){Ir.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Ir.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Ir.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:ur});Object.defineProperty(vs.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new wt(t.x,t.y)}var r=this.sourceMagnet;return e.isNodeConnection(r)?new wt(this.sourceAnchor):e.getNodeBBox(r||e.el)}});Object.defineProperty(vs.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new wt(t.x,t.y)}var r=this.targetMagnet;return e.isNodeConnection(r)?new wt(this.targetAnchor):e.getNodeBBox(r||e.el)}});const Vme=fa.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:r}=this,{useFirstSubpath:n}=r;let i;try{const s=Ye(t);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&n){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=e.getNodeBoundingRect(t);i=Ye.rectToPath(Xt({},r,o.toJSON()))}return i},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:r,options:n}=this,{padding:i,layer:s}=n;let o=this.getNodeMatrix(e,t);if(i){!s&&t===e.el&&r.remove();let a=e.getNodeBoundingRect(t);const u=a.x+a.width/2,c=a.y+a.height/2;a=Ye.transformRect(a,o);const l=Math.max(a.width,1),h=Math.max(a.height,1),v=(l+i)/l,_=(h+i)/h,m=Ye.createSVGMatrix({a:v,b:0,c:0,d:_,e:u-v*u,f:c-_*c});o=o.multiply(m)}r.attr({d:this.getPathData(e,t),transform:Ye.matrixToTransformString(o)})},highlight(e,t){const{vel:r,options:n}=this;r.attr(n.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),Q7=20;function $me(e,t){const r=e.children();for(;r.length>0;){const n=r.shift();t(n)&&r.push(...n.children())}}const Gme=fa.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Q7,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,s=t.tagName();if(!Ye.isSVGGraphicsElement(t)||i.includes(s))return t.remove(),!1;if(n.includes(s)){const o=e.vel.findOne(`#${t.id}`);if(o){const{node:a}=o;let u=e.getNodeBoundingRect(a);e.model.isElement()&&(u=Ye.transformRect(u,e.getNodeMatrix(a)));const c=Ye("rect",u.toJSON()),{x:l,y:h}=u.center(),{angle:v,cx:_=l,cy:m=h}=o.rotate();v&&c.rotate(v,_,m),t.parent().append(c)}return t.remove(),!1}return r.forEach(o=>{o==="fill"&&t.attr("fill")==="none"||t.removeAttr(o)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{t.removeAttr(n)})},getMaskShape(e,t){const{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,s=t.tagName();let o;if(s==="G"){if(!i)return null;o=t.clone(),$me(o,a=>this.transformMaskChild(e,a))}else{if(n.includes(s))return null;o=t.clone()}return this.transformMaskRoot(e,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:s,attrs:o}=i,a="stroke-width"in o?o["stroke-width"]:1,u=t.attr("fill")!=="none";let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const l=c+s*2,h=l+a*2;let v=this.getMaskShape(e,t);if(!v){const _=e.getNodeBoundingRect(t.node);_.inflate(_.width?0:.5,_.height?0:.5),v=Ye("rect",_.toJSON())}return v.attr(o),Ye("mask",{id:this.getMaskId()}).append([v.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":h}),v.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":l})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:r,vel:n}=this,{padding:i,attrs:s,maskClip:o=Q7,layer:a}=r,u="stroke"in s?s.stroke:"#000000";!a&&t===e.el&&n.remove();const c=e.getNodeBoundingRect(t).inflate(i+o),l=this.getNodeMatrix(e,t),h=this.getMask(e,Ye(t));this.addMask(e.paper,h),n.attr(c.toJSON()),n.attr({transform:Ye.matrixToTransformString(l),mask:`url(#${h.id})`,fill:u})},unhighlight(e){this.removeMask(e.paper)}}),Ume=fa.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:la("highlight-opacity"),highlight:function(e,t){Ye(t).addClass(this.opacityClassName)},unhighlight:function(e,t){Ye(t).removeClass(this.opacityClassName)}}),eV=la("highlighted"),jme=fa.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:eV},highlight:function(e,t){Ye(t).addClass(this.options.className)},unhighlight:function(e,t){Ye(t).removeClass(this.options.className)}},{className:eV}),p2={ROW:"row",COLUMN:"column"},Hme=fa.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const r=e.model,{attribute:n,size:i=20,gap:s=5,direction:o=p2.ROW}=this.options;if(!n)throw new Error("List: attribute is required");const a=typeof i=="number"?{width:i,height:i}:i,u=o===p2.ROW,c=u?a.width:a.height;let l=r.get(n);Array.isArray(l)||(l=[]);const h=this._prevItems||[],v=l.map((y,w)=>Ef(h[w],l[w]));if(h.length!==l.length||v.some(y=>!y)){const y=this.vel.children(),w=l.map((T,P)=>{const A=P in y?y[P].node:null;if(v[P])return A;const I=this.createListItem(T,a,A);if(!I)return null;if(!(I instanceof SVGElement))throw new Error("List: item must be an SVGElement");I.dataset.index=P,I.dataset.attribute=n;const N=P*(c+s);return I.setAttribute("transform",u?`translate(${N}, 0)`:`translate(0, ${N})`),I});this.vel.empty().append(w),this._prevItems=l}const _=l.length,m=_===0?0:_*c+(_-1)*s,b=u?{width:m,height:a.height}:{width:a.width,height:m};this.position(r,b)},position(e,t){const{vel:r,options:n}=this,{margin:i=5,position:s="top-left"}=n,{width:o,height:a}=e.size(),{left:u,right:c,top:l,bottom:h}=Al(i),v=new wt(u,l,o-(u+c),a-(l+h));let{x:_,y:m}=OH(v,s);switch(s){case ti.CENTER:case ti.TOP:case ti.BOTTOM:{_-=t.width/2;break}case ti.RIGHT:case ti.BOTTOM_RIGHT:case ti.TOP_RIGHT:{_-=t.width;break}}switch(s){case ti.CENTER:case ti.RIGHT:case ti.LEFT:{m-=t.height/2;break}case ti.BOTTOM:case ti.BOTTOM_RIGHT:case ti.BOTTOM_LEFT:{m-=t.height;break}}r.attr("transform",`translate(${_}, ${m})`)}},{Directions:p2,Positions:ti}),Wme=Object.freeze(Object.defineProperty({__proto__:null,addClass:jme,list:Hme,mask:Gme,opacity:Ume,stroke:Vme},Symbol.toStringTag,{value:"Module"}));function Xme(e,t,r,n){var i="ratio"in n?n.ratio:.5;return e.getPointAtRatio(i)}function Yme(e,t,r,n){var i="length"in n?n.length:20;return e.getPointAtLength(i)}function Kme(e,t,r,n){var i=1e6,s=e.getConnection(),o=e.getConnectionSubdivisions(),a=new Ct(r.clone().offset(0,i),r.clone().offset(0,-1e6)),u=new Ct(r.clone().offset(i,0),r.clone().offset(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),l=u.intersect(s,{segmentSubdivisions:o}),h=[];return c&&Array.prototype.push.apply(h,c),l&&Array.prototype.push.apply(h,l),h.length>0?r.chooseClosest(h):"fallbackAt"in n?jH(e,n.fallbackAt):HH(e,t,r,n)}function Jme(e,t,r,n){var i=e.getClosestPoint(r);return i||new ge}function bp(e){return function(t,r,n,i){if(n instanceof Element){var s=this.paper.findView(n),o;if(s)if(s.isNodeConnection(n)){var a="fixedAt"in i?i.fixedAt:"50%";o=jH(s,a)}else o=s.getNodeBBox(n).center();else o=new ge;return e.call(this,t,r,o,i)}return e.apply(this,arguments)}}function jH(e,t){var r=parseFloat(t);return Wi(t)?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const Zme=bp(Kme),HH=bp(Jme),Qme=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:HH,connectionLength:Yme,connectionPerpendicular:Zme,connectionRatio:Xme,resolveRef:bp},Symbol.toStringTag,{value:"Module"}));function Mm(e,t,r){if(ci(r)){const{x:i,y:s}=r;if(isFinite(s)){const o=new Ct(t,e),{start:a,end:u}=o.parallel(s);t=a,e=u}r=i}if(!isFinite(r))return e;var n=e.distance(t);return r===0&&n>0?e:e.move(t,-Math.min(r,n-1))}function WP(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function e0e(e,t,r=0){let n,i,s,o;const{start:a,end:u}=e;switch(t){case"left":n="x",i=u,s=a,o=-1;break;case"right":n="x",i=a,s=u,o=1;break;case"top":n="y",i=u,s=a,o=-1;break;case"bottom":n="y",i=a,s=u,o=1;break;default:return}a[n]<u[n]?i[n]=s[n]:s[n]=i[n],isFinite(r)&&(i[n]+=o*r,s[n]+=o*r)}function t0e(e,t,r,n){let{offset:i,alignOffset:s,align:o}=n;return o&&e0e(e,o,s),Mm(e.end,e.start,i)}function WH(e,t,r,n){var i=t.getNodeBBox(r);n.stroke&&i.inflate(WP(r)/2);var s=e.intersect(i),o=s?e.start.chooseClosest(s):e.end;return Mm(o,e.start,n.offset)}function r0e(e,t,r,n){var i=t.model.angle();if(i===0)return WH(e,t,r,n);var s=t.getNodeUnrotatedBBox(r);n.stroke&&s.inflate(WP(r)/2);var o=s.center(),a=e.clone().rotate(o,i),u=a.setLength(1e6).intersect(s),c=u?a.start.chooseClosest(u).rotate(o,-i):e.end;return Mm(c,e.start,n.offset)}function n0e(e){if(!e)return null;var t=e;do{var r=t.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")t=t.firstElementChild;else if(r==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var v2="segmentSubdivisons",g2="shapeBBox";function i0e(e,t,r,n){var i,s,o=n.selector,a=e.end;if(typeof o=="string"?i=t.findBySelector(o)[0]:o===!1?i=r:Array.isArray(o)?i=qd(r,o):i=n0e(r),!Ye.isSVGGraphicsElement(i)){if(i===r||!Ye.isSVGGraphicsElement(r))return a;i=r}var u=t.getNodeShape(i),c=t.getNodeMatrix(i),l=t.getRootTranslateMatrix(),h=t.getRootRotateMatrix(),v=l.multiply(h).multiply(c),_=v.inverse(),m=Ye.transformLine(e,_),b=m.start.clone(),y=t.getNodeData(i);if(n.insideout===!1){y[g2]||(y[g2]=u.bbox());var w=y[g2];if(w.containsPoint(b))return a}var T;if(u instanceof zt){var P=n.precision||2;y[v2]||(y[v2]=u.getSegmentSubdivisions({precision:P})),T={precision:P,segmentSubdivisions:y[v2]}}n.extrapolate===!0&&m.setLength(1e6),s=m.intersect(u,T),s?Ye.isArray(s)&&(s=b.chooseClosest(s)):n.sticky===!0&&(u instanceof wt?s=u.pointNearestToPoint(b):u instanceof ms?s=u.intersectionWithLineFromCenterToPoint(b):s=u.closestPoint(b,T));var A=s?Ye.transformPoint(s,v):a,I=n.offset||0;return n.stroke&&(I+=WP(i)/2),Mm(A,e.start,I)}const s0e=t0e,o0e=WH,a0e=r0e,u0e=i0e,c0e=Object.freeze(Object.defineProperty({__proto__:null,anchor:s0e,bbox:o0e,boundary:u0e,rectangle:a0e},Symbol.toStringTag,{value:"Module"}));function Xu(e){return function(t,r,n,i){var s=!!i.rotate,o=s?t.getNodeUnrotatedBBox(r):t.getNodeBBox(r),a=o[e](),u=i.dx;if(u){var c=Wi(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=o.width),a.x+=u)}var l=i.dy;if(l){var h=Wi(l);l=parseFloat(l),isFinite(l)&&(h&&(l/=100,l*=o.height),a.y+=l)}return s?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}function l0e(e,t,r,n){var i=e.model.angle(),s=e.getNodeBBox(t),o=s.center(),a=s.origin(),u=s.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=r.y&&r.y<=u.y-c){var l=r.y-o.y;o.x+=i===0||i===180?0:l*1/Math.tan(zs(i)),o.y+=l}else if(a.x+c<=r.x&&r.x<=u.x-c){var h=r.x-o.x;o.y+=i===90||i===270?0:h*Math.tan(zs(i)),o.x+=h}return o}function f0e(e,t,r,n){var i=!!n.rotate,s,o,a;i?(s=e.getNodeUnrotatedBBox(t),a=e.model.getBBox().center(),o=e.model.angle()):s=e.getNodeBBox(t);var u=n.padding;isFinite(u)&&s.inflate(u),i&&r.rotate(a,o);var c=s.sideNearestToPoint(r),l;switch(c){case"left":l=s.leftMiddle();break;case"right":l=s.rightMiddle();break;case"top":l=s.topMiddle();break;case"bottom":l=s.bottomMiddle();break}return i?l.rotate(a,-o):l}function h0e(e,t,r,n,i){return e.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}const d0e=Xu("center"),p0e=Xu("topMiddle"),v0e=Xu("bottomMiddle"),g0e=Xu("leftMiddle"),m0e=Xu("rightMiddle"),y0e=Xu("origin"),_0e=Xu("topRight"),b0e=Xu("bottomLeft"),w0e=Xu("corner"),x0e=bp(l0e),S0e=bp(f0e),E0e=h0e,A0e=Object.freeze(Object.defineProperty({__proto__:null,bottom:v0e,bottomLeft:b0e,bottomRight:w0e,center:d0e,left:g0e,midSide:S0e,modelCenter:E0e,perpendicular:x0e,right:m0e,top:p0e,topLeft:y0e,topRight:_0e},Symbol.toStringTag,{value:"Module"})),mf={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},T0e=50,tV=20,rV=1e3,P0e=1/0,Bv=9007199254740991,m2=Ir.Highlighting,nV={[m2.DEFAULT]:{name:"stroke",options:{padding:3}},[m2.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[m2.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},C0e=[{name:Io.BACK},{name:Io.CELLS},{name:Io.LABELS},{name:Io.FRONT},{name:Io.TOOLS}],XH=zu.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:Di,linkView:vs,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:nV,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new bh,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,r){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,r,n,i,s){return(i==="target"?r:e)instanceof Di},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:mf.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,r,n,i){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(e,r,n)},onViewPostponed:function(e,t,r){return r.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Wme,anchorNamespace:A0e,linkAnchorNamespace:Qme,connectionPointNamespace:c0e,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Nu(joint,"shapes")?joint.shapes:null);const r=this.model=e.model||new ma;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=qt(t.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,r){var n=r.position;this.isAsync()||!Ls(n)?this.renderView(e,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,r){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===mf.APPROX){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(t)&&!r.hasActiveBatch(n)&&this.updateViews(e)}var i=this.SORT_DELAYING_BATCHES;i.includes(t)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:a,cellViewNamespace:u,interactive:c}=e;!u&&typeof joint<"u"&&Nu(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),An(t)||(e.defaultConnector=Co(t)),An(r)||(e.defaultRouter=Co(r)),An(n)||(e.defaultConnectionPoint=Co(n)),An(i)||(e.defaultAnchor=Co(i)),An(s)||(e.defaultLinkAnchor=Co(s)),ci(c)&&(e.interactive=Xt({},c)),ci(a)&&(e.highlighting=$P({},a,nV)),e.origin=Xt({},o)},children:function(){var e=Ye.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:la("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:la("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:la("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:r,defs:n,layers:i,background:s,grid:o}=e;return r.style.overflow=t.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=qt(s),this.$grid=qt(o),this.renderLayers(),Ye.ensureId(r),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=C0e){this.removeLayers(),e.forEach(({name:i,sorted:s})=>{const o=new Dge({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const t=this.getLayerView(Io.CELLS),r=this.getLayerView(Io.TOOLS),n=this.getLayerView(Io.LABELS);this.tools=r.el,this.cells=this.viewport=t.el,t.vel.addClass(la("viewport")),n.vel.addClass(la("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(e===void 0){var r=t.getAttribute("transform");return(this._viewportTransformString||null)===r?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=r),Ye.createSVGMatrix(e)}e=Ye.createSVGMatrix(e);var n=Ye.matrixToTransformString(e);return t.setAttribute("transform",n),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return Ye.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,r){if(e instanceof Ir)for(var n=e.model,i=this.model.getConnectedLinks(n),s=0,o=i.length;s<o;s++){var a=i[s],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var l=Math.max(t+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),l,r)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof Ir))return!1;var r=e.model;if(r.isElement())return!1;if((t&e.getFlag(["SOURCE","TARGET"]))===0){var n={silent:!0},i=0,s=this.findViewByModel(r.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,n),e.updateEndMagnet("source"));var o=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a,n),e.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(e,n)}return!1},requestViewUpdate:function(e,t,r,n){n||(n={}),this.scheduleViewUpdate(e,t,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(n);i&&this.notifyAfterRender(s,n)}},scheduleViewUpdate:function(e,t,r,n){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=e;let l=i.priorities[r];if(l||(l=i.priorities[r]={}),r>u)for(let _=r-1;_>=u;_--){const m=i.priorities[_];!m||!(c in m)||(l[c]|=m[c],delete m[c])}let h=l[c]||0;if((h&t)===t)return;h||i.count++,t&o&&h&a?l[c]^=a:t&a&&h&o&&(l[c]^=o),l[c]|=t;const v=s.onViewUpdate;typeof v=="function"&&v.call(this,e,t,r,n||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,r=e.cid,n=t.priorities[e.UPDATE_PRIORITY],i=this.registerMountedView(e)|n[r];return delete n[r],i},dumpView:function(e,t={}){const r=this.dumpViewUpdate(e);if(!r)return 0;const n=!t.silent;n&&this.notifyBeforeRender(t);const i=this.updateView(e,r,t);if(n){const s={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(s,t)}return i},updateView:function(e,t,r){if(!e)return 0;const{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:s,model:o}=e;if(e instanceof Ir){if(t&n)return this.removeView(o),0;if(t&i){const a=!!(t&s);a&&(t^=s),this.insertView(e,a),t^=i}}return t?e.confirmUpdate(t,r||{}):0},requireView:function(e,t){var r=this.findViewByModel(e);return r?(this.dumpView(r,t),r):null},registerUnmountedView:function(e){var t=e.cid,r=this._updates;if(t in r.unmounted)return 0;var n=r.unmounted[t]|=e.FLAG_INSERT;return r.unmountedCids.push(t),delete r.mounted[t],n},registerMountedView:function(e){var t=e.cid,r=this._updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var n=r.unmounted[t]||0;return delete r.unmounted[t],n},isViewMounted:function(e){if(!e)return!1;var t=e.cid,r=this._updates;return t in r.mounted},dumpViews:function(e){var t=no({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,r=0,n=0,i=Bv;do n++,t=this.updateViewsBatch(e),r+=t.updated,i=Math.min(t.priority,i);while(!t.empty);const s={updated:r,batches:n,priority:i};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let r=t.length;for(;r>0&&r--;)for(let n in e[t[r]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:Bv});const{_updates:r,options:n}=this,i=r.id;if(i){iA(i),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const s=this.updateViewsBatch(e),o=no({},e,{mountBatchSize:rV-s.mounted,unmountBatchSize:rV-s.unmounted}),a=this.checkViewport(o),u=a.unmounted,c=a.mounted;let l=t.processed;const h=r.count;s.updated>0?(l+=s.updated+s.unmounted,s.processed=l,t.priority=Math.min(s.priority,t.priority),s.empty&&c===0?(s.unmounted+=u,s.mounted+=c,s.priority=t.priority,this.notifyAfterRender(s,e),t.processed=0,t.priority=Bv,r.count=0):t.processed=l):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",e));const v=e.progress;if(h&&typeof v=="function"&&v.call(this,s.empty,l,h,s,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=nA(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let r=t.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||P0e,r=this._updates,n=0,i=0,s=0,o=0,a=Bv,u=!0,c=this.options,l=r.priorities,h="viewport"in e?e.viewport:c.viewport;typeof h!="function"&&(h=null);var v=c.onViewPostponed;typeof v!="function"&&(v=null);var _=Object.keys(l);e:for(var m=0,b=_.length;m<b;m++){var y=+_[m],w=l[y];for(var T in w){if(n>=t){u=!1;break e}var P=tl[T];if(!P){delete w[T];continue}var A=w[T];if((A&P.FLAG_REMOVE)===0){var I=T in r.unmounted;if(P.DETACHABLE&&h&&!h.call(this,P,!I,this)){I||(this.registerUnmountedView(P),this.detachView(P)),r.unmounted[T]|=A,delete w[T],s++;continue}I&&(A|=P.FLAG_INSERT,o++),A|=this.registerMountedView(P)}var N=this.updateView(P,A,e);if(N>0&&(w[T]=N,!v||!v.call(this,P,N,this)||w[T])){i++,u=!1;continue}a>y&&(a=y),n++,delete w[T]}}return{priority:a,updated:n,postponed:i,unmounted:s,mounted:o,empty:u}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=tl[t[i]];return n},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=tl[t[i]];return n},checkUnmountedViews:function(e,t){t||(t={});var r=0;typeof e!="function"&&(e=null);for(var n=("mountBatchSize"in t)?t.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var l=tl[c];if(l){if(l.DETACHABLE&&e&&!e.call(this,l,!1,this)){s.push(c);continue}r++;var h=this.registerMountedView(l);h&&this.scheduleViewUpdate(l,h,l.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,a),r},checkMountedViews:function(e,t){t||(t={});var r=0;if(typeof e!="function")return r;for(var n=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var l=tl[c];if(l){if(!l.DETACHABLE||e.call(this,l,!0,this)){s.push(c);continue}r++;var h=this.registerUnmountedView(l);h&&this.detachView(l)}}}return s.splice(0,a),r},checkViewVisibility:function(e,t={}){let r="viewport"in t?t.viewport:this.options.viewport;typeof r!="function"&&(r=null);const n=this._updates,{mounted:i,unmounted:s}=n,o=!e.DETACHABLE||!r||r.call(this,e,!1,this);let a=!1,u=!1;if(e.cid in i&&!o){this.registerUnmountedView(e)&&this.detachView(e);const h=n.mountedCids.indexOf(e.cid);n.mountedCids.splice(h,1),a=!0}if(!a&&e.cid in s&&o){const l=n.unmountedCids.indexOf(e.cid);n.unmountedCids.splice(l,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=no({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in t?t.viewport:this.options.viewport,n=this.checkMountedViews(r,t);if(n>0){var i=this._updates.unmountedCids;t.mountBatchSize=Math.min(i.length-n,t.mountBatchSize)}var s=this.checkUnmountedViews(r,t);return{mounted:s,unmounted:n}},freeze:function(e){e||(e={});var t=this._updates,r=e.key,n=this.options.frozen,i=t.freezeKey;if(r&&r!==i){if(n&&i)return;t.freezeKey=r,t.keyFrozen=n}this.options.frozen=!0;var s=t.id;t.id=null,this.isAsync()&&s&&iA(s)},unfreeze:function(e){e||(e={});var t=this._updates,r=e.key,n=t.freezeKey;r&&n&&r!==n||(t.freezeKey=null,!(r&&r===n&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===mf.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,r=e.height;return Ls(t)||(t=this.el.clientWidth),Ls(r)||(r=this.el.clientHeight),{width:t,height:r}},setDimensions:function(e,t){const{options:r}=this,{width:n,height:i}=r;let s=e===void 0?n:e,o=t===void 0?i:t;if(n===s&&i===o)return;r.width=s,r.height=o,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,r=e.height;Ls(t)&&(t=Math.round(t)),Ls(r)&&(r=Math.round(r)),this.$el.css({width:t===null?"":t,height:r===null?"":r})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,r,n){rn(e)?n=e:n=Xt({gridWidth:e,gridHeight:t,padding:r},n);const{x:i,y:s,width:o,height:a}=this.getFitToContentArea(n),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-s*c),this.setDimensions(o*u,a*c),new wt(i,s,o,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,r=e.gridHeight||1,n=Al(e.padding||0),i=Math.max(e.minWidth||0,t),s=Math.max(e.minHeight||0,r),o=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,u=e.allowNewOrigin,c="contentArea"in e?new wt(e.contentArea):this.getContentArea(e),{sx:l,sy:h}=this.scale();c.x*=l,c.y*=h,c.width*=l,c.height*=h;let v=Math.ceil((c.width+c.x)/t),_=Math.ceil((c.height+c.y)/r);e.allowNegativeBottomRight||(v=Math.max(v,1),_=Math.max(_,1)),v*=t,_*=r;let m=0;(u==="negative"&&c.x<0||u==="positive"&&c.x>=0||u==="any")&&(m=Math.ceil(-c.x/t)*t,m+=n.left,v+=m);let b=0;return(u==="negative"&&c.y<0||u==="positive"&&c.y>=0||u==="any")&&(b=Math.ceil(-c.y/r)*r,b+=n.top,_+=b),v+=n.right,_+=n.bottom,v=Math.max(v,i),_=Math.max(_,s),v=Math.min(v,o),_=Math.min(_,a),new wt(-m/l,-b/h,v/l,_/h)},transformToFitContent:function(e){e||(e={});let t,r;if("contentArea"in e){const y=e.contentArea;t=this.localToPaperRect(y),r=new ge(y)}else t=this.getContentBBox(e),r=this.paperToLocalPoint(t);if(!t.width||!t.height)return;no(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const n=Al(e.padding),i=e.minScaleX||e.minScale,s=e.maxScaleX||e.maxScale,o=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let u;if(e.fittingBBox)u=e.fittingBBox;else{const y=this.translate(),w=this.getComputedSize();u={x:y.tx,y:y.ty,width:w.width,height:w.height}}u=new wt(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});const c=this.scale();let l=u.width/t.width*c.sx,h=u.height/t.height*c.sy;if(e.preserveAspectRatio&&(l=h=Math.min(l,h)),e.scaleGrid){const y=e.scaleGrid;l=y*Math.floor(l/y),h=y*Math.floor(h/y)}l=Math.min(s,Math.max(i,l)),h=Math.min(a,Math.max(o,h));const v={x:l/c.sx,y:h/c.sy},_=this.options.origin;let m=u.x-r.x*l-_.x,b=u.y-r.y*h-_.y;switch(e.verticalAlign){case"middle":b=b+(u.height-t.height*v.y)/2;break;case"bottom":b=b+(u.height-t.height*v.y);break}switch(e.horizontalAlign){case"middle":m=m+(u.width-t.width*v.x)/2;break;case"right":m=m+(u.width-t.width*v.x);break}this.scale(l,h),this.translate(m,b)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new wt:Ye(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let r;return An(t)?r=t.apply(this,e):t===!0?r=this.getArea():t?r=new wt(t):r=null,r},createViewForModel:function(e){const{options:t}=this;var r,n,i=t.cellViewNamespace,s=e.get("type")+"View",o=qd(i,s,".");e.isLink()?(r=t.linkView,n=vs):(r=t.elementView,n=Di);var a=r.prototype instanceof fi.View?o||r:r.call(this,e)||o||n;return new a({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?Io.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:r,_updates:n}=this,i=r[t];if(i){var{cid:s}=i;const{mounted:o,unmounted:a}=n;i.remove(),delete r[t],delete o[s],delete a[s]}return i},renderView:function(e,t){const{id:r}=e,n=this._views;let i,s,o=!0;return r in n&&(i=n[r],i.model===e?(s=i.FLAG_INSERT,o=!1):this.removeView(e)),o&&(i=n[r]=this.createViewForModel(e),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(li(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,t),i},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=e.length;n<i;n++)this.renderView(e[n],t);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){ga(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=qt(this.cells).children("[model-id]"),t=this.model.get("cells");sge(e,function(r,n){var i=t.get(r.getAttribute("model-id")),s=t.get(n.getAttribute("model-id")),o=i.attributes.z||0,a=s.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(e,t){const r=this.getLayerView(Io.CELLS),{el:n,model:i}=e;switch(this.options.sorting){case mf.APPROX:r.insertSortedNode(n,i.get("z"));break;case mf.EXACT:default:r.insertNode(n);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,r,n){if(e===void 0)return Ye.matrixToScale(this.matrix());t===void 0&&(t=e),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var s=i.tx-r*(e-1),o=i.ty-n*(t-1);this.translate(s,o)}e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var a=this.matrix();return a.a=e,a.d=t,this.matrix(a),this.trigger("scale",e,t,r,n),this},rotate:function(e,t,r){if(e===void 0)return Ye.matrixToRotate(this.matrix());if(t===void 0){var n=this.cells.getBBox();t=n.width/2,r=n.height/2}var i=this.matrix().translate(t,r).rotate(e).translate(-t,-r);return this.matrix(i),this},translate:function(e,t){if(e===void 0)return Ye.matrixToTranslate(this.matrix());const{options:r}=this,{origin:n,drawGrid:i}=r;e||(e=0),t||(t=0);const s=this.matrix();if(s.e===e&&s.f===t)return this;s.e=e,s.f=t,this.matrix(s);const{tx:o,ty:a}=this.translate();return n.x=o,n.y=a,this.trigger("translate",o,a),i&&this.drawGrid(),this},findView:function(e){var t=ts(e)?this.cells.querySelector(e):e instanceof qt?e[0]:e,r=this.findAttribute("model-id",t);if(r)return this._views[r]},findViewByModel:function(e){var t=ts(e)||Ls(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new ge(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=no(t||{},{strict:!1}),e=new wt(e);var r=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return r.filter(function(i){return i&&e[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var r=new ge(e,t),n=Ye.transformPoint(r,this.matrix());return n},localToPaperRect:function(e,t,r,n){var i=new wt(e,t,r,n),s=Ye.transformRect(i,this.matrix());return s},paperToLocalPoint:function(e,t){var r=new ge(e,t),n=Ye.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(e,t,r,n){var i=new wt(e,t,r,n),s=Ye.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(e,t){var r=new ge(e,t),n=Ye.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(e,t,r,n){var i=new wt(e,t,r,n),s=Ye.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(e,t){var r=new ge(e,t),n=Ye.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(e,t,r,n){var i=new wt(e,t,r,n),s=Ye.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,r,n){return this.localToPaperRect(e,t,r,n).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new ge(e,t),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(e,t,r,n){var i=this.pageOffset(),s=new wt(e,t,r,n);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new ge(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof vs))throw new Error("Must provide a linkView.");var t=e.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,t)||!r.linkPinning&&!i.linkPinning.call(this,n,t)||typeof r.allowLink=="function"&&!r.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return An(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:r}=e;const{highlighting:n,highlighterNamespace:i}=this.options;if(t===void 0){if(!n||r&&(t=n[r],t===!1))return!1;t||(t=n.default)}if(!t)return!1;ts(t)&&(t={name:t});const s=t.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:s}},onCellHighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.highlight(e,t,s)},onCellUnhighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.unhighlight(e,t,s)},pointerdblclick:function(e){e.preventDefault(),e=ui(e);var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,r.x,r.y):this.trigger("blank:pointerdblclick",e,r.x,r.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=ui(e);var r=this.findView(e.target);if(this.guard(e,r))return;var n=this.snapToGrid(e.clientX,e.clientY);r?r.pointerclick(e,n.x,n.y):this.trigger("blank:pointerclick",e,n.x,n.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=ui(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,r.x,r.y):this.trigger("blank:contextmenu",e,r.x,r.y)}},pointerdown:function(e){e=ui(e);const{target:t,button:r}=e,n=this.findView(t),i=r===2;if(n){if(!i&&this.guard(e,n))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!s&&e.preventDefault(),s&&n.preventDefaultInteraction(e);const o=this.customEventTrigger(e,n);if(o){if(o.isPropagationStopped())return;e.data=o.data}const a=t.closest("[magnet]");if(a&&n.el!==a&&n.el.contains(a)){const u=ui(qt.Event(e.originalEvent,{data:e.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&e.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}e.data=u.data}}if(i){this.contextMenuFired=!0;const s=qt.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdown(e,s.x,s.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,s.x,s.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var r=++t.mousemoved;if(!(r<=this.options.moveThreshold)){e=ui(e);var n=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,n.x,n.y):this.trigger("blank:pointermove",e,n.x,n.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=ui(e),r=this.snapToGrid(t.clientX,t.clientY),n=this.eventData(e).sourceView;n?n.pointerup(t,r.x,r.y):this.trigger("blank:pointerup",t,r.x,r.y),t.isPropagationStopped()||this.pointerclick(qt.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=ui(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=ui(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=ui(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseenter(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=ui(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseleave(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:Gve(function(){const{event:e,deltas:t}=this._mw_evt_buffer,r=t.reduce((o,a)=>o+tge(a,T0e),0),n=Math.pow(.995,r),{x:i,y:s}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,i,s,n),this._mw_evt_buffer={event:null,deltas:[]}},tV,{maxWait:tV}),mousewheel:function(e){e=ui(e);const t=this.findView(e.target);if(this.guard(e,t))return;const r=e.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:s}=ege(r),o=this._events["paper:pinch"];if(e.ctrlKey&&o&&o.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,r.wheelDelta));t?t.mousewheel(e,n.x,n.y,a):this.trigger("blank:mousewheel",e,n.x,n.y,a),this.trigger("paper:pan",e,i,s)}},onevent:function(e){var t=e.currentTarget,r=t.getAttribute("event");if(r){var n=this.findView(t);if(n){if(e=ui(e),this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n.onevent(e,r,i.x,i.y)}}},magnetEvent:function(e,t){var r=e.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(e=ui(e),this.guard(e,i))return;var s=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,r,s.x,s.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=qt.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,r,n,i,s){t.onmagnet(r,i,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetpointerdblclick(r,n,i,s)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetcontextmenu(r,n,i,s)})},onlabel:function(e){var t=e.currentTarget,r=this.findView(t);if(!r||(e=ui(e),this.guard(e,r)))return;const n=this.customEventTrigger(e,r,t);if(n){if(n.isPropagationStopped())return;e.data=n.data}var i=this.snapToGrid(e.clientX,e.clientY);r.onlabel(e,i.x,i.y)},getPointerArgs(e){const t=ui(e),{x:r,y:n}=this.snapToGrid(t.clientX,t.clientY);return[t,r,n]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:r}=e;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(t&&t.model&&t.model instanceof iu||this.svg===r||this.el===r||qt.contains(this.svg,r))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Ye("svg",{width:"100%",height:"100%"},Ye("defs")),patterns:{},add:function(e,t){Ye(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append(Ye("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return this.patterns[e]!==void 0}}),this._gridCache},setGrid:function(e){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var t=Array.isArray(e)?e:[e||{}];return t.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(ts(e)&&Array.isArray(t[e]))return t[e].map(function(u){return Xt({},u)});var r=e||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(t[i])){var s=t[i].map(function(u){return Xt({},u)}),o=Array.isArray(r.args)?r.args:[r.args||{}];no(o[0],El(e,"args"));for(var a=0;a<o.length;a++)s[a]&&Xt(s[a],o[a]);return s}return n?r:[r]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var r=Array.isArray(e)?e:[e],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,a){var u="pattern_"+a,c=gi(o,r[a],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});c.width=t*(n.a||1)*(c.scaleFactor||1),c.height=t*(n.d||1)*(c.scaleFactor||1),i.exist(u)||i.add(u,Ye("pattern",{id:u,patternUnits:"userSpaceOnUse"},Ye(c.markup)));var l=i.get(u);An(c.update)&&c.update(l.node.childNodes[0],c);var h=c.ox%c.width;h<0&&(h+=c.width);var v=c.oy%c.height;v<0&&(v+=c.height),l.attr({x:h,y:v,width:c.width,height:c.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",r=e.size||"auto auto",n=this.scale(),i=this.translate();if(rn(t)){var s=i.tx+n.sx*(t.x||0),o=i.ty+n.sy*(t.y||0);t=s+"px "+o+"px"}rn(r)&&(r=new wt(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var r,n=t.size,i=t.repeat||"no-repeat",s=t.opacity||1,o=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[Xve(i)];if(An(a)){e.width*=o,e.height*=o;var u=a(e,t);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",rn(n)?(n.width*=u.width/e.width,n.height*=u.height/e.height):n===void 0&&(t.size={width:u.width/o,height:u.height/o})}else r=e.src,n===void 0&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=Co(e),Af(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,ga(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!rn(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,r=e.name;if(t||(t=r+this.svg.id+Rv(JSON.stringify(e))),!this.isDefined(t)){var n=age,i=n[r]&&n[r](e.args||{});if(!i)throw new Error("Non-existing filter "+r);var s=Xt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});Ye(i,s).appendTo(this.defs)}return t},defineGradient:function(e){if(!rn(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{type:n,id:i=n+t.id+Rv(JSON.stringify(e)),stops:s,attrs:o={}}=e;if(this.isDefined(i))return i;const a=Wr(s).map(({offset:c,color:l,opacity:h})=>Ye("stop").attr({offset:c,"stop-color":l,"stop-opacity":Number.isFinite(h)?h:1})),u=Ye(n,o,a);return u.id=i,u.appendTo(r),i},definePattern:function(e){if(!rn(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+Rv(JSON.stringify(e)),markup:i,attrs:s={}}=e;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;const o=Ye("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=n,o.attr(s),typeof i=="string")o.append(Ye(i));else{const{fragment:a}=pg(i);o.append(a)}return o.appendTo(r),n},defineMarker:function(e){if(!rn(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+Rv(JSON.stringify(e)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=e;if(this.isDefined(n))return n;const a=Ye("marker",{orient:"auto",overflow:"visible",markerUnits:o});a.id=n,a.attr(s);let u;if(i){let h;if(typeof i=="string")h=Ye(i),h=Array.isArray(h)?h:[h];else{const{fragment:v}=pg(i);h=Ye(v).children()}h.length>1?u=Ye("g").append(h):u=h[0]}else{const{type:h="path"}=e;u=Ye(h)}const c=El(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(h=>{const v=c[h],_=u.attr(h);if(_==null)u.attr(h,v);else switch(h){case"transform":u.attr(h,v+" "+_);break}}),u.appendTo(a),a.appendTo(r),n},customEventTrigger:function(e,t,r=t.el){const n=e.target.closest("[event]");if(n&&r!==n&&t.el.contains(n)){const i=ui(qt.Event(e.originalEvent,{data:e.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&e.preventDefault(),i}return null}},{sorting:mf,Layers:Io,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=2*r,t.height=2*n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,r,n),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,r,n),t},flipX:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r*2,t.height=n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(e,0,0,r,n),t},flipY:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r,t.height=n*2;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(e,0,0,r,n),t},watermark:function(e,t){t=t||{};var r=e.width,n=e.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var s=i.getContext("2d"),o=Ls(t.watermarkAngle)?-t.watermarkAngle:-20,a=zs(o),u=i.width/4,c=i.height/4,l=0;l<4;l++)for(var h=0;h<4;h++)(l+h)%2>0&&(s.setTransform(1,0,0,1,(2*l-1)*u,(2*h-1)*c),s.rotate(a),s.drawImage(e,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){Ye(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var r=t.sx<=1?t.thickness*t.sx:t.thickness;Ye(e).attr({width:r,height:r,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",Ye(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",Ye(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",Ye(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}]}}),Lm=zu.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){const{paper:t,relatedView:r}=this;return!t||!r?!0:t.guard(e,r)}}),O0e=zu.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=Xt(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var r=e.relatedView;if(!(r instanceof Ir))return this;for(var n=this.tools=[],i=0,s=t.length;i<s;i++){var o=t[i];o instanceof Lm&&(o.configure(r,this),this.vel.append(o.el),n.push(o))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var r=this.isRendered,n=0,i=t.length;n<i;n++){var s=t[n];r?e.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];e===i?i.show():i.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];i!==e&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,r=e.length;t<r;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:r,layer:n=Io.TOOLS,z:i}=e;return r&&(n?r.paper.getLayerView(n).insertSortedNode(t,i):r.el.appendChild(t)),this}}),Dd={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{},r={minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0};return r},importElement:function(e,t,r){var n=this.getCell(t),i=r.node(t);e.setPosition?e.setPosition(n,i):n.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(e,t,r){const i=this.getCell(t.name),s=r.edge(t),o=s.points||[],a=new Tn(o);if(e.setVertices||e.setLinkVertices)if(An(e.setVertices))e.setVertices(i,o);else{a.simplify({threshold:.001});const u=a.points.map(l=>l.toJSON()),c=u.length;i.set("vertices",u.slice(1,c-1))}if(e.setLabels&&"x"in s&&"y"in s){const u={x:s.x,y:s.y};if(An(e.setLabels))e.setLabels(i,u,o);else{const c=a.closestPointLength(u),l=a.pointAtLength(c),h=c/a.length(),v=new ge(u).difference(l).toJSON();i.label(0,{position:{distance:h,offset:v}})}}},layout:function(e,t){var r;e instanceof ma?r=e:r=new ma().resetCells(e,{dry:!0,sort:!1}),e=null,t=no(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const n=t.dagre||(typeof dagre<"u"?dagre:void 0);if(n===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=Dd.toGraphLib(r,{graphlib:t.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(l){return l.id}}),s={},o=t.marginX||0,a=t.marginY||0;if(t.rankDir&&(s.rankdir=t.rankDir),t.align&&(s.align=t.align),t.nodeSep&&(s.nodesep=t.nodeSep),t.edgeSep&&(s.edgesep=t.edgeSep),t.rankSep&&(s.ranksep=t.rankSep),t.ranker&&(s.ranker=t.ranker),o&&(s.marginx=o),a&&(s.marginy=a),i.setGraph(s),n.layout(i,{debugTiming:!!t.debugTiming}),r.startBatch("layout"),Dd.fromGraphLib(i,{importNode:this.importElement.bind(r,t),importEdge:this.importLink.bind(r,t)}),t.resizeClusters){var u=i.nodes().filter(function(l){return i.children(l).length>0}).map(r.getCell.bind(r)).sort(function(l,h){return h.getAncestors().length-l.getAncestors().length});ga(u,"fitToChildren",{padding:t.clusterPadding})}r.stopBatch("layout");var c=i.graph();return new wt(o,a,Math.abs(c.width-2*o),Math.abs(c.height-2*a))},fromGraphLib:function(e,t){t=t||{};var r=t.importNode||rd,n=t.importEdge||rd,i=this instanceof ma?this:new ma;return e.nodes().forEach(function(s){r.call(i,s,e,i,t)}),e.edges().forEach(function(s){n.call(i,s,e,i,t)}),i},toGraphLib:function(e,t){t=t||{};const r=t.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(r===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=Wve(t,"directed","compound","multigraph"),i=new r.Graph(n),s=t.setNodeLabel||rd,o=t.setEdgeLabel||rd,a=t.setEdgeName||rd,u=e.get("cells"),c=0,l=u.length;c<l;c++){var h=u.at(c);if(h.isLink()){var v=h.get("source"),_=h.get("target");if(!v.id||!_.id)break;i.setEdge(v.id,_.id,o(h),a(h))}else if(i.setNode(h.id,s(h)),i.isCompound()&&h.has("parent")){var m=h.get("parent");u.has(m)&&i.setParent(h.id,m)}}return i}};ma.prototype.toGraphLib=function(e){return Dd.toGraphLib(this,e)};ma.prototype.fromGraphLib=function(e,t){return Dd.fromGraphLib.call(this,e,t)};const YH={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[e];if(typeof r<"u")return r;try{r=t()}catch{r=!1}return this._results[e]=r,r}},Ds=as.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});Ds.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});Di.extend({presentationAttributes:Di.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var e=Di.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"SCALE")&&(this.resize(),e=this.removeFlag(e,"SCALE")),e}});Ds.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});Ds.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});Ds.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});Ds.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});Ds.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});Ds.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const I0e=Ds.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});I0e.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const yg=YH.test("svgforeignobject");Ds.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',yg?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Ds.prototype.initialize.apply(this,arguments)},updateSize:function(e,t){this.attr({".fobj":Xt({},t),div:{style:Xt({},t)}})},updateContent:function(e,t){yg?this.attr({".content":{html:ige(t)}}):this.attr({".content":{text:t}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});Di.extend({presentationAttributes:yg?Di.prototype.presentationAttributes:Di.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var e=Di.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"CONTENT")&&(this.updateContent(this.model),e=this.removeFlag(e,"CONTENT")),e},update:function(e,t){var r=this.model;if(yg)Di.prototype.update.call(this,r,t);else{var n=El(t||r.get("attrs"),".content");Di.prototype.update.call(this,r,n),(!t||Nu(t,".content"))&&this.updateContent(r,t)}},updateContent:function(e,t){var r=gi({},(t||e.get("attrs"))[".content"]);r=El(r,"text");var n=EH(e.get("content"),e.get("size"),r,{svgDocument:this.paper.svg}),i=rA({},".content",r,"/");i[".content"].text=n,Di.prototype.update.call(this,e,i)}});as.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});const R0e=as.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]});as.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]});as.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]});as.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]});as.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]});as.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});as.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});as.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});as.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});as.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var y2=10;as.define("standard.Cylinder",{attrs:{body:{lateralArea:y2,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:y2,refRx:"50%",ry:y2,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var r=Wi(e),n={lateralArea:e},i=r?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e};return this.attr({body:n,top:i},t)}},{attributes:{lateralArea:{set:function(e,t){var r=Wi(e);r&&(e=parseFloat(e)/100);var n=t.x,i=t.y,s=t.width,o=t.height,a=s/2,u=r?o*e:e,c=Ye.KAPPA,l=c*a,h=c*(r?o*e:e),v=n,_=n+s/2,m=n+s,b=i+u,y=b-u,w=i+o-u,T=i+o,P=["M",v,b,"L",v,w,"C",n,w+h,_-l,T,_,T,"C",_+l,T,m,w+h,m,w,"L",m,b,"C",m,b-h,_+l,y,_,y,"C",_-l,y,v,b-h,v,b,"Z"];return{d:P.join(" ")}}}}});var k0e={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},M0e={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},L0e=YH.test("svgforeignobject")?k0e:M0e;as.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},L0e]},{attributes:{text:{set:function(e,t,r,n){if(r instanceof HTMLElement)r.textContent=e;else{var i=n.style||{},s={text:e,width:-5,height:"100%"},o=Xt({textVerticalAnchor:"middle"},i);return CH.textWrap.set.call(this,s,t,r,o),{fill:i.color||null}}},position:function(e,t,r){if(r instanceof SVGElement)return t.center()}}}});const Zv=bh.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});bh.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});bh.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var iV=zu.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(e,t){const{vel:r,options:n}=this,{scale:i}=n;let s=Ye.createSVGMatrix().translate(e,t);i&&(s=s.scale(i)),r.transform(s,{absolute:!0})},onPointerDown:function(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,e.data),this.trigger("will-change",this,e))},onPointerMove:function(e){this.trigger("changing",this,e)},onDoubleClick:function(e){this.trigger("remove",this,e)},onPointerUp:function(e){this.trigger("changed",this,e),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const N0e=Lm.extend({name:"vertices",options:{handleClass:iV,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var e=this.relatedView,t=e.model.vertices();return t.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var e=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(e))for(var t=0,r=e.length;t<r;t++)e[t].remove()},renderHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=new this.options.handleClass({index:r,paper:this.paper,scale:this.options.scale,guard:o=>this.guard(o)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=this.handles[r];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(e){var t=this.relatedView;t.can("vertexMove")&&(this.listenTo(e,"will-change",this.onHandleWillChange),this.listenTo(e,"changing",this.onHandleChanging),this.listenTo(e,"changed",this.onHandleChanged)),t.can("vertexRemove")&&this.listenTo(e,"remove",this.onHandleRemove)},getNeighborPoints:function(e){var t=this.relatedView,r=t.model.vertices(),n=e>0?r[e-1]:t.sourceAnchor,i=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:new ge(n),next:new ge(i)}},onHandleWillChange:function(e,t){this.focus();const{relatedView:r,options:n}=this;r.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown(...r.paper.getPointerArgs(t))},onHandleChanging:function(e,t){const{options:r,relatedView:n}=this;var i=e.options.index,[s,o,a]=n.paper.getPointerArgs(t),u={x:o,y:a};this.snapVertex(u,i),n.model.vertex(i,u,{ui:!0,tool:this.cid}),e.position(u.x,u.y),r.stopPropagation||n.notifyPointermove(s,o,a)},onHandleChanged:function(e,t){const{options:r,relatedView:n}=this;if(r.vertexAdding&&this.updatePath(),!!r.redundancyRemoval){var i=n.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(t).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,o,a]=n.paper.getPointerArgs(t);r.stopPropagation||n.notifyPointerup(s,o,a),n.checkMouseleave(s)}},snapVertex:function(e,t){var r=this.options.snapRadius;if(r>0){var n=this.getNeighborPoints(t),i=n.prev,s=n.next;Math.abs(e.x-i.x)<r?e.x=i.x:Math.abs(e.x-s.x)<r&&(e.x=s.x),Math.abs(e.y-i.y)<r?e.y=n.prev.y:Math.abs(e.y-s.y)<r&&(e.y=s.y)}},onHandleRemove:function(e,t){var r=e.options.index,n=this.relatedView;n.model.removeVertex(r,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(ui(t))},onPathPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=ui(e),r=this.paper.snapToGrid(t.clientX,t.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=n.getVertexIndex(r.x,r.y);this.snapVertex(r,i),n.model.insertVertex(i,r,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(t,{vertexAdded:!0}),s.onPointerDown(t)}},onRemove:function(){this.resetHandles()}},{VertexHandle:iV});function q0e(e,t){const{model:r}=e;return t?r.getBBox():r.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const KH=Lm.extend({tagName:"path",xAxisVector:new ge(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var e=this.ratio,t=this.relatedView,r=t.getTangentAtRatio(e),n,i;if(r?(n=r.start,i=r.vector().vectorAngle(this.xAxisVector)||0):(n=t.getPointAtRatio(e),i=0),!n)return this;var s=Ye.createSVGMatrix().translate(n.x,n.y).rotate(i);const{scale:o}=this.options;return o&&(s=s.scale(o)),this.vel.transform(s,{absolute:!0}),this},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.relatedView;t.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),t.can("arrowheadMove")&&(t.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),t.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(e){var t=ui(e),r=this.paper.snapToGrid(t.clientX,t.clientY);this.relatedView.pointermove(t,r.x,r.y)},onPointerUp:function(e){this.undelegateDocumentEvents();var t=this.relatedView,r=t.paper,n=ui(e),i=r.snapToGrid(n.clientX,n.clientY);t.pointerup(n,i.x,i.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",t.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),D0e=KH.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),F0e=KH.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),fA=Lm.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:e}=this;e.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:e,options:t}=this;let{x:r=0,y:n=0,offset:i={},useModelGeometry:s,rotate:o,scale:a}=t,u=q0e(e,s);const c=e.model.angle();o||(u=u.bbox(c));const{x:l=0,y:h=0}=i;Wi(r)?r=parseFloat(r)/100*u.width:Ro(r)&&(r=Number(ko(r,u))),Wi(n)?n=parseFloat(n)/100*u.height:Ro(n)&&(n=Number(ko(n,u)));let v=Ye.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return o&&(v=v.rotate(c)),v=v.translate(r+l-u.width/2,n+h-u.height/2),a&&(v=v.scale(a)),v},getLinkMatrix(){const{relatedView:e,options:t}=this,{offset:r=0,distance:n=0,rotate:i,scale:s}=t;let o,a,u;Wi(n)?o=e.getTangentAtRatio(parseFloat(n)/100):o=e.getTangentAtLength(n),o?(a=o.start,u=o.vector().vectorAngle(new ge(1,0))||0):(a=e.getConnection().start,u=0);let c=Ye.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(c=c.rotate(-u)),s&&(c=c.scale(s)),c},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.action;typeof t=="function"&&t.call(this.relatedView,e,this.relatedView,this)}}}),sV=fA.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(e,t,r){t.model.remove({ui:!0,tool:r.cid})}}});var vd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var B0e=vd.exports,oV;function z0e(){return oV||(oV=1,function(e,t){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,l="__lodash_placeholder__",h=1,v=2,_=4,m=1,b=2,y=1,w=2,T=4,P=8,A=16,I=32,N=64,d=128,C=256,O=512,k=30,F="...",z=800,j=16,J=1,oe=2,W=3,D=1/0,B=9007199254740991,U=17976931348623157e292,ie=NaN,se=4294967295,xe=se-1,me=se>>>1,ee=[["ary",d],["bind",y],["bindKey",w],["curry",P],["curryRight",A],["flip",O],["partial",I],["partialRight",N],["rearg",C]],ce="[object Arguments]",re="[object Array]",te="[object AsyncFunction]",le="[object Boolean]",Me="[object Date]",Ge="[object DOMException]",Ie="[object Error]",Ue="[object Function]",We="[object GeneratorFunction]",q="[object Map]",$="[object Number]",Y="[object Null]",K="[object Object]",we="[object Promise]",he="[object Proxy]",Te="[object RegExp]",Ce="[object Set]",ze="[object String]",Le="[object Symbol]",Oe="[object Undefined]",Ee="[object WeakMap]",Je="[object WeakSet]",dt="[object ArrayBuffer]",Et="[object DataView]",vt="[object Float32Array]",ut="[object Float64Array]",Jt="[object Int8Array]",pr="[object Int16Array]",sr="[object Int32Array]",yr="[object Uint8Array]",Zr="[object Uint8ClampedArray]",Nr="[object Uint16Array]",Pn="[object Uint32Array]",lr=/\b__p \+= '';/g,qr=/\b(__p \+=) '' \+/g,In=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rn=/&(?:amp|lt|gt|quot|#39);/g,Cn=/[&<>"']/g,ii=RegExp(Rn.source),di=RegExp(Cn.source),Ht=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,Yr=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bn=/^\w*$/,Un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cn=/[\\^$.*+?()[\]{}|]/g,xi=RegExp(cn.source),hn=/^\s+/,Jn=/\s/,jn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pi=/\{\n\/\* \[wrapped with (.+)\] \*/,Dr=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tt=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,at=/\w*$/,Ze=/^[-+]0x[0-9a-f]+$/i,bt=/^0b[01]+$/i,Dt=/^\[object .+?Constructor\]$/,Nt=/^0o[0-7]+$/i,Fr=/^(?:0|[1-9]\d*)$/,Zn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,sn=/['\n\r\u2028\u2029\\]/g,zn="\\ud800-\\udfff",en="\\u0300-\\u036f",Br="\\ufe20-\\ufe2f",or="\\u20d0-\\u20ff",vi=en+Br+or,On="\\u2700-\\u27bf",rr="a-z\\xdf-\\xf6\\xf8-\\xff",Si="\\xac\\xb1\\xd7\\xf7",Vi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tt="\\u2000-\\u206f",mt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",It="A-Z\\xc0-\\xd6\\xd8-\\xde",yt="\\ufe0e\\ufe0f",At=Si+Vi+tt+mt,ar="['â]",tn="["+zn+"]",kn="["+At+"]",zr="["+vi+"]",qn="\\d+",Mn="["+On+"]",Qn="["+rr+"]",Ra="[^"+zn+At+qn+On+rr+It+"]",Us="\\ud83c[\\udffb-\\udfff]",si="(?:"+zr+"|"+Us+")",hu="[^"+zn+"]",ws="(?:\\ud83c[\\udde6-\\uddff]){2}",du="[\\ud800-\\udbff][\\udc00-\\udfff]",ka="["+It+"]",Ma="\\u200d",La="(?:"+Qn+"|"+Ra+")",xh="(?:"+ka+"|"+Ra+")",Ap="(?:"+ar+"(?:d|ll|m|re|s|t|ve))?",Ku="(?:"+ar+"(?:D|LL|M|RE|S|T|VE))?",Sh=si+"?",Jl="["+yt+"]?",Tp="(?:"+Ma+"(?:"+[hu,ws,du].join("|")+")"+Jl+Sh+")*",Pp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Eh=Jl+Sh+Tp,$m="(?:"+[Mn,ws,du].join("|")+")"+Eh,Gm="(?:"+[hu+zr+"?",zr,ws,du,tn].join("|")+")",Ah=RegExp(ar,"g"),Um=RegExp(zr,"g"),Th=RegExp(Us+"(?="+Us+")|"+Gm+Eh,"g"),jm=RegExp([ka+"?"+Qn+"+"+Ap+"(?="+[kn,ka,"$"].join("|")+")",xh+"+"+Ku+"(?="+[kn,ka+La,"$"].join("|")+")",ka+"?"+La+"+"+Ap,ka+"+"+Ku,Vm,Pp,qn,$m].join("|"),"g"),Hm=RegExp("["+Ma+zn+vi+yt+"]"),Wm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ym=-1,En={};En[vt]=En[ut]=En[Jt]=En[pr]=En[sr]=En[yr]=En[Zr]=En[Nr]=En[Pn]=!0,En[ce]=En[re]=En[dt]=En[le]=En[Et]=En[Me]=En[Ie]=En[Ue]=En[q]=En[$]=En[K]=En[Te]=En[Ce]=En[ze]=En[Ee]=!1;var dn={};dn[ce]=dn[re]=dn[dt]=dn[Et]=dn[le]=dn[Me]=dn[vt]=dn[ut]=dn[Jt]=dn[pr]=dn[sr]=dn[q]=dn[$]=dn[K]=dn[Te]=dn[Ce]=dn[ze]=dn[Le]=dn[yr]=dn[Zr]=dn[Nr]=dn[Pn]=!0,dn[Ie]=dn[Ue]=dn[Ee]=!1;var Cp={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},Ph={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Op={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ip={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ch=parseFloat,Km=parseInt,Rp=typeof es=="object"&&es&&es.Object===Object&&es,Jm=typeof self=="object"&&self&&self.Object===Object&&self,Hn=Rp||Jm||Function("return this")(),Zl=t&&!t.nodeType&&t,Zo=Zl&&!0&&e&&!e.nodeType&&e,kp=Zo&&Zo.exports===Zl,Oh=kp&&Rp.process,xs=function(){try{var ne=Zo&&Zo.require&&Zo.require("util").types;return ne||Oh&&Oh.binding&&Oh.binding("util")}catch{}}(),g=xs&&xs.isArrayBuffer,S=xs&&xs.isDate,R=xs&&xs.isMap,L=xs&&xs.isRegExp,V=xs&&xs.isSet,G=xs&&xs.isTypedArray;function X(ne,_e,ye){switch(ye.length){case 0:return ne.call(_e);case 1:return ne.call(_e,ye[0]);case 2:return ne.call(_e,ye[0],ye[1]);case 3:return ne.call(_e,ye[0],ye[1],ye[2])}return ne.apply(_e,ye)}function ve(ne,_e,ye,Ke){for(var it=-1,Mt=ne==null?0:ne.length;++it<Mt;){var Lt=ne[it];_e(Ke,Lt,ye(Lt),ne)}return Ke}function ue(ne,_e){for(var ye=-1,Ke=ne==null?0:ne.length;++ye<Ke&&_e(ne[ye],ye,ne)!==!1;);return ne}function Ae(ne,_e){for(var ye=ne==null?0:ne.length;ye--&&_e(ne[ye],ye,ne)!==!1;);return ne}function $e(ne,_e){for(var ye=-1,Ke=ne==null?0:ne.length;++ye<Ke;)if(!_e(ne[ye],ye,ne))return!1;return!0}function Xe(ne,_e){for(var ye=-1,Ke=ne==null?0:ne.length,it=0,Mt=[];++ye<Ke;){var Lt=ne[ye];_e(Lt,ye,ne)&&(Mt[it++]=Lt)}return Mt}function ke(ne,_e){var ye=ne==null?0:ne.length;return!!ye&&_n(ne,_e,0)>-1}function pt(ne,_e,ye){for(var Ke=-1,it=ne==null?0:ne.length;++Ke<it;)if(ye(_e,ne[Ke]))return!0;return!1}function kt(ne,_e){for(var ye=-1,Ke=ne==null?0:ne.length,it=Array(Ke);++ye<Ke;)it[ye]=_e(ne[ye],ye,ne);return it}function vr(ne,_e){for(var ye=-1,Ke=_e.length,it=ne.length;++ye<Ke;)ne[it+ye]=_e[ye];return ne}function hr(ne,_e,ye,Ke){var it=-1,Mt=ne==null?0:ne.length;for(Ke&&Mt&&(ye=ne[++it]);++it<Mt;)ye=_e(ye,ne[it],it,ne);return ye}function Ei(ne,_e,ye,Ke){var it=ne==null?0:ne.length;for(Ke&&it&&(ye=ne[--it]);it--;)ye=_e(ye,ne[it],it,ne);return ye}function Wn(ne,_e){for(var ye=-1,Ke=ne==null?0:ne.length;++ye<Ke;)if(_e(ne[ye],ye,ne))return!0;return!1}var vo=pu("length");function go(ne){return ne.split("")}function kr(ne){return ne.match(ht)||[]}function Na(ne,_e,ye){var Ke;return ye(ne,function(it,Mt,Lt){if(_e(it,Mt,Lt))return Ke=Mt,!1}),Ke}function Mr(ne,_e,ye,Ke){for(var it=ne.length,Mt=ye+(Ke?1:-1);Ke?Mt--:++Mt<it;)if(_e(ne[Mt],Mt,ne))return Mt;return-1}function _n(ne,_e,ye){return _e===_e?e0(ne,_e,ye):Mr(ne,Ql,ye)}function Vc(ne,_e,ye,Ke){for(var it=ye-1,Mt=ne.length;++it<Mt;)if(Ke(ne[it],_e))return it;return-1}function Ql(ne){return ne!==ne}function js(ne,_e){var ye=ne==null?0:ne.length;return ye?Ki(ne,_e)/ye:ie}function pu(ne){return function(_e){return _e==null?r:_e[ne]}}function Ss(ne){return function(_e){return ne==null?r:ne[_e]}}function Qo(ne,_e,ye,Ke,it){return it(ne,function(Mt,Lt,Rt){ye=Ke?(Ke=!1,Mt):_e(ye,Mt,Lt,Rt)}),ye}function qa(ne,_e){var ye=ne.length;for(ne.sort(_e);ye--;)ne[ye]=ne[ye].value;return ne}function Ki(ne,_e){for(var ye,Ke=-1,it=ne.length;++Ke<it;){var Mt=_e(ne[Ke]);Mt!==r&&(ye=ye===r?Mt:ye+Mt)}return ye}function $c(ne,_e){for(var ye=-1,Ke=Array(ne);++ye<ne;)Ke[ye]=_e(ye);return Ke}function ea(ne,_e){return kt(_e,function(ye){return[ye,ne[ye]]})}function mo(ne){return ne&&ne.slice(0,Lp(ne)+1).replace(hn,"")}function us(ne){return function(_e){return ne(_e)}}function Ih(ne,_e){return kt(_e,function(ye){return ne[ye]})}function Gc(ne,_e){return ne.has(_e)}function on(ne,_e){for(var ye=-1,Ke=ne.length;++ye<Ke&&_n(_e,ne[ye],0)>-1;);return ye}function Uc(ne,_e){for(var ye=ne.length;ye--&&_n(_e,ne[ye],0)>-1;);return ye}function Hs(ne,_e){for(var ye=ne.length,Ke=0;ye--;)ne[ye]===_e&&++Ke;return Ke}var Ju=Ss(Cp),Zm=Ss(Ph);function Qm(ne){return"\\"+Ip[ne]}function Mp(ne,_e){return ne==null?r:ne[_e]}function Es(ne){return Hm.test(ne)}function Rh(ne){return Wm.test(ne)}function Da(ne){for(var _e,ye=[];!(_e=ne.next()).done;)ye.push(_e.value);return ye}function ef(ne){var _e=-1,ye=Array(ne.size);return ne.forEach(function(Ke,it){ye[++_e]=[it,Ke]}),ye}function Zu(ne,_e){return function(ye){return ne(_e(ye))}}function Ws(ne,_e){for(var ye=-1,Ke=ne.length,it=0,Mt=[];++ye<Ke;){var Lt=ne[ye];(Lt===_e||Lt===l)&&(ne[ye]=l,Mt[it++]=ye)}return Mt}function vu(ne){var _e=-1,ye=Array(ne.size);return ne.forEach(function(Ke){ye[++_e]=Ke}),ye}function kh(ne){var _e=-1,ye=Array(ne.size);return ne.forEach(function(Ke){ye[++_e]=[Ke,Ke]}),ye}function e0(ne,_e,ye){for(var Ke=ye-1,it=ne.length;++Ke<it;)if(ne[Ke]===_e)return Ke;return-1}function tf(ne,_e,ye){for(var Ke=ye+1;Ke--;)if(ne[Ke]===_e)return Ke;return Ke}function Fa(ne){return Es(ne)?Np(ne):vo(ne)}function cs(ne){return Es(ne)?ae(ne):go(ne)}function Lp(ne){for(var _e=ne.length;_e--&&Jn.test(ne.charAt(_e)););return _e}var Mh=Ss(Op);function Np(ne){for(var _e=Th.lastIndex=0;Th.test(ne);)++_e;return _e}function ae(ne){return ne.match(Th)||[]}function Se(ne){return ne.match(jm)||[]}var Re=function ne(_e){_e=_e==null?Hn:De.defaults(Hn.Object(),_e,De.pick(Hn,Xm));var ye=_e.Array,Ke=_e.Date,it=_e.Error,Mt=_e.Function,Lt=_e.Math,Rt=_e.Object,wr=_e.RegExp,Yt=_e.String,Pr=_e.TypeError,Ai=ye.prototype,Mi=Mt.prototype,Ti=Rt.prototype,ls=_e["__core-js_shared__"],ta=Mi.toString,fr=Ti.hasOwnProperty,bX=0,hC=function(){var f=/[^.]+$/.exec(ls&&ls.keys&&ls.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),qp=Ti.toString,wX=ta.call(Rt),xX=Hn._,SX=wr("^"+ta.call(fr).replace(cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dp=kp?_e.Buffer:r,Qu=_e.Symbol,Fp=_e.Uint8Array,dC=Dp?Dp.allocUnsafe:r,Bp=Zu(Rt.getPrototypeOf,Rt),pC=Rt.create,vC=Ti.propertyIsEnumerable,zp=Ai.splice,gC=Qu?Qu.isConcatSpreadable:r,Lh=Qu?Qu.iterator:r,jc=Qu?Qu.toStringTag:r,Vp=function(){try{var f=Kc(Rt,"defineProperty");return f({},"",{}),f}catch{}}(),EX=_e.clearTimeout!==Hn.clearTimeout&&_e.clearTimeout,AX=Ke&&Ke.now!==Hn.Date.now&&Ke.now,TX=_e.setTimeout!==Hn.setTimeout&&_e.setTimeout,$p=Lt.ceil,Gp=Lt.floor,t0=Rt.getOwnPropertySymbols,PX=Dp?Dp.isBuffer:r,mC=_e.isFinite,CX=Ai.join,OX=Zu(Rt.keys,Rt),Pi=Lt.max,Ji=Lt.min,IX=Ke.now,RX=_e.parseInt,yC=Lt.random,kX=Ai.reverse,r0=Kc(_e,"DataView"),Nh=Kc(_e,"Map"),n0=Kc(_e,"Promise"),rf=Kc(_e,"Set"),qh=Kc(_e,"WeakMap"),Dh=Kc(Rt,"create"),Up=qh&&new qh,nf={},MX=Jc(r0),LX=Jc(Nh),NX=Jc(n0),qX=Jc(rf),DX=Jc(qh),jp=Qu?Qu.prototype:r,Fh=jp?jp.valueOf:r,_C=jp?jp.toString:r;function Z(f){if(ei(f)&&!gr(f)&&!(f instanceof Gr)){if(f instanceof yo)return f;if(fr.call(f,"__wrapped__"))return bO(f)}return new yo(f)}var sf=function(){function f(){}return function(p){if(!Xn(p))return{};if(pC)return pC(p);f.prototype=p;var x=new f;return f.prototype=r,x}}();function Hp(){}function yo(f,p){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=r}Z.templateSettings={escape:Ht,evaluate:jt,interpolate:Yr,variable:"",imports:{_:Z}},Z.prototype=Hp.prototype,Z.prototype.constructor=Z,yo.prototype=sf(Hp.prototype),yo.prototype.constructor=yo;function Gr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function FX(){var f=new Gr(this.__wrapped__);return f.__actions__=As(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=As(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=As(this.__views__),f}function BX(){if(this.__filtered__){var f=new Gr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function zX(){var f=this.__wrapped__.value(),p=this.__dir__,x=gr(f),M=p<0,H=x?f.length:0,Q=ZY(0,H,this.__views__),de=Q.start,be=Q.end,Pe=be-de,st=M?be:de-1,ot=this.__iteratees__,ft=ot.length,Pt=0,Vt=Ji(Pe,this.__takeCount__);if(!x||!M&&H==Pe&&Vt==Pe)return GC(f,this.__actions__);var nr=[];e:for(;Pe--&&Pt<Vt;){st+=p;for(var Er=-1,ir=f[st];++Er<ft;){var Vr=ot[Er],Kr=Vr.iteratee,Ks=Vr.type,ds=Kr(ir);if(Ks==oe)ir=ds;else if(!ds){if(Ks==J)continue e;break e}}nr[Pt++]=ir}return nr}Gr.prototype=sf(Hp.prototype),Gr.prototype.constructor=Gr;function Hc(f){var p=-1,x=f==null?0:f.length;for(this.clear();++p<x;){var M=f[p];this.set(M[0],M[1])}}function VX(){this.__data__=Dh?Dh(null):{},this.size=0}function $X(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}function GX(f){var p=this.__data__;if(Dh){var x=p[f];return x===u?r:x}return fr.call(p,f)?p[f]:r}function UX(f){var p=this.__data__;return Dh?p[f]!==r:fr.call(p,f)}function jX(f,p){var x=this.__data__;return this.size+=this.has(f)?0:1,x[f]=Dh&&p===r?u:p,this}Hc.prototype.clear=VX,Hc.prototype.delete=$X,Hc.prototype.get=GX,Hc.prototype.has=UX,Hc.prototype.set=jX;function gu(f){var p=-1,x=f==null?0:f.length;for(this.clear();++p<x;){var M=f[p];this.set(M[0],M[1])}}function HX(){this.__data__=[],this.size=0}function WX(f){var p=this.__data__,x=Wp(p,f);if(x<0)return!1;var M=p.length-1;return x==M?p.pop():zp.call(p,x,1),--this.size,!0}function XX(f){var p=this.__data__,x=Wp(p,f);return x<0?r:p[x][1]}function YX(f){return Wp(this.__data__,f)>-1}function KX(f,p){var x=this.__data__,M=Wp(x,f);return M<0?(++this.size,x.push([f,p])):x[M][1]=p,this}gu.prototype.clear=HX,gu.prototype.delete=WX,gu.prototype.get=XX,gu.prototype.has=YX,gu.prototype.set=KX;function mu(f){var p=-1,x=f==null?0:f.length;for(this.clear();++p<x;){var M=f[p];this.set(M[0],M[1])}}function JX(){this.size=0,this.__data__={hash:new Hc,map:new(Nh||gu),string:new Hc}}function ZX(f){var p=sv(this,f).delete(f);return this.size-=p?1:0,p}function QX(f){return sv(this,f).get(f)}function eY(f){return sv(this,f).has(f)}function tY(f,p){var x=sv(this,f),M=x.size;return x.set(f,p),this.size+=x.size==M?0:1,this}mu.prototype.clear=JX,mu.prototype.delete=ZX,mu.prototype.get=QX,mu.prototype.has=eY,mu.prototype.set=tY;function Wc(f){var p=-1,x=f==null?0:f.length;for(this.__data__=new mu;++p<x;)this.add(f[p])}function rY(f){return this.__data__.set(f,u),this}function nY(f){return this.__data__.has(f)}Wc.prototype.add=Wc.prototype.push=rY,Wc.prototype.has=nY;function ra(f){var p=this.__data__=new gu(f);this.size=p.size}function iY(){this.__data__=new gu,this.size=0}function sY(f){var p=this.__data__,x=p.delete(f);return this.size=p.size,x}function oY(f){return this.__data__.get(f)}function aY(f){return this.__data__.has(f)}function uY(f,p){var x=this.__data__;if(x instanceof gu){var M=x.__data__;if(!Nh||M.length<i-1)return M.push([f,p]),this.size=++x.size,this;x=this.__data__=new mu(M)}return x.set(f,p),this.size=x.size,this}ra.prototype.clear=iY,ra.prototype.delete=sY,ra.prototype.get=oY,ra.prototype.has=aY,ra.prototype.set=uY;function bC(f,p){var x=gr(f),M=!x&&Zc(f),H=!x&&!M&&ic(f),Q=!x&&!M&&!H&&cf(f),de=x||M||H||Q,be=de?$c(f.length,Yt):[],Pe=be.length;for(var st in f)(p||fr.call(f,st))&&!(de&&(st=="length"||H&&(st=="offset"||st=="parent")||Q&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||wu(st,Pe)))&&be.push(st);return be}function wC(f){var p=f.length;return p?f[p0(0,p-1)]:r}function cY(f,p){return ov(As(f),Xc(p,0,f.length))}function lY(f){return ov(As(f))}function i0(f,p,x){(x!==r&&!na(f[p],x)||x===r&&!(p in f))&&yu(f,p,x)}function Bh(f,p,x){var M=f[p];(!(fr.call(f,p)&&na(M,x))||x===r&&!(p in f))&&yu(f,p,x)}function Wp(f,p){for(var x=f.length;x--;)if(na(f[x][0],p))return x;return-1}function fY(f,p,x,M){return ec(f,function(H,Q,de){p(M,H,x(H),de)}),M}function xC(f,p){return f&&za(p,Li(p),f)}function hY(f,p){return f&&za(p,Ps(p),f)}function yu(f,p,x){p=="__proto__"&&Vp?Vp(f,p,{configurable:!0,enumerable:!0,value:x,writable:!0}):f[p]=x}function s0(f,p){for(var x=-1,M=p.length,H=ye(M),Q=f==null;++x<M;)H[x]=Q?r:B0(f,p[x]);return H}function Xc(f,p,x){return f===f&&(x!==r&&(f=f<=x?f:x),p!==r&&(f=f>=p?f:p)),f}function _o(f,p,x,M,H,Q){var de,be=p&h,Pe=p&v,st=p&_;if(x&&(de=H?x(f,M,H,Q):x(f)),de!==r)return de;if(!Xn(f))return f;var ot=gr(f);if(ot){if(de=eK(f),!be)return As(f,de)}else{var ft=Zi(f),Pt=ft==Ue||ft==We;if(ic(f))return HC(f,be);if(ft==K||ft==ce||Pt&&!H){if(de=Pe||Pt?{}:fO(f),!be)return Pe?GY(f,hY(de,f)):$Y(f,xC(de,f))}else{if(!dn[ft])return H?f:{};de=tK(f,ft,be)}}Q||(Q=new ra);var Vt=Q.get(f);if(Vt)return Vt;Q.set(f,de),zO(f)?f.forEach(function(ir){de.add(_o(ir,p,x,ir,f,Q))}):FO(f)&&f.forEach(function(ir,Vr){de.set(Vr,_o(ir,p,x,Vr,f,Q))});var nr=st?Pe?A0:E0:Pe?Ps:Li,Er=ot?r:nr(f);return ue(Er||f,function(ir,Vr){Er&&(Vr=ir,ir=f[Vr]),Bh(de,Vr,_o(ir,p,x,Vr,f,Q))}),de}function dY(f){var p=Li(f);return function(x){return SC(x,f,p)}}function SC(f,p,x){var M=x.length;if(f==null)return!M;for(f=Rt(f);M--;){var H=x[M],Q=p[H],de=f[H];if(de===r&&!(H in f)||!Q(de))return!1}return!0}function EC(f,p,x){if(typeof f!="function")throw new Pr(o);return Hh(function(){f.apply(r,x)},p)}function zh(f,p,x,M){var H=-1,Q=ke,de=!0,be=f.length,Pe=[],st=p.length;if(!be)return Pe;x&&(p=kt(p,us(x))),M?(Q=pt,de=!1):p.length>=i&&(Q=Gc,de=!1,p=new Wc(p));e:for(;++H<be;){var ot=f[H],ft=x==null?ot:x(ot);if(ot=M||ot!==0?ot:0,de&&ft===ft){for(var Pt=st;Pt--;)if(p[Pt]===ft)continue e;Pe.push(ot)}else Q(p,ft,M)||Pe.push(ot)}return Pe}var ec=JC(Ba),AC=JC(a0,!0);function pY(f,p){var x=!0;return ec(f,function(M,H,Q){return x=!!p(M,H,Q),x}),x}function Xp(f,p,x){for(var M=-1,H=f.length;++M<H;){var Q=f[M],de=p(Q);if(de!=null&&(be===r?de===de&&!Ys(de):x(de,be)))var be=de,Pe=Q}return Pe}function vY(f,p,x,M){var H=f.length;for(x=xr(x),x<0&&(x=-x>H?0:H+x),M=M===r||M>H?H:xr(M),M<0&&(M+=H),M=x>M?0:$O(M);x<M;)f[x++]=p;return f}function TC(f,p){var x=[];return ec(f,function(M,H,Q){p(M,H,Q)&&x.push(M)}),x}function $i(f,p,x,M,H){var Q=-1,de=f.length;for(x||(x=nK),H||(H=[]);++Q<de;){var be=f[Q];p>0&&x(be)?p>1?$i(be,p-1,x,M,H):vr(H,be):M||(H[H.length]=be)}return H}var o0=ZC(),PC=ZC(!0);function Ba(f,p){return f&&o0(f,p,Li)}function a0(f,p){return f&&PC(f,p,Li)}function Yp(f,p){return Xe(p,function(x){return xu(f[x])})}function Yc(f,p){p=rc(p,f);for(var x=0,M=p.length;f!=null&&x<M;)f=f[Va(p[x++])];return x&&x==M?f:r}function CC(f,p,x){var M=p(f);return gr(f)?M:vr(M,x(f))}function fs(f){return f==null?f===r?Oe:Y:jc&&jc in Rt(f)?JY(f):lK(f)}function u0(f,p){return f>p}function gY(f,p){return f!=null&&fr.call(f,p)}function mY(f,p){return f!=null&&p in Rt(f)}function yY(f,p,x){return f>=Ji(p,x)&&f<Pi(p,x)}function c0(f,p,x){for(var M=x?pt:ke,H=f[0].length,Q=f.length,de=Q,be=ye(Q),Pe=1/0,st=[];de--;){var ot=f[de];de&&p&&(ot=kt(ot,us(p))),Pe=Ji(ot.length,Pe),be[de]=!x&&(p||H>=120&&ot.length>=120)?new Wc(de&&ot):r}ot=f[0];var ft=-1,Pt=be[0];e:for(;++ft<H&&st.length<Pe;){var Vt=ot[ft],nr=p?p(Vt):Vt;if(Vt=x||Vt!==0?Vt:0,!(Pt?Gc(Pt,nr):M(st,nr,x))){for(de=Q;--de;){var Er=be[de];if(!(Er?Gc(Er,nr):M(f[de],nr,x)))continue e}Pt&&Pt.push(nr),st.push(Vt)}}return st}function _Y(f,p,x,M){return Ba(f,function(H,Q,de){p(M,x(H),Q,de)}),M}function Vh(f,p,x){p=rc(p,f),f=vO(f,p);var M=f==null?f:f[Va(wo(p))];return M==null?r:X(M,f,x)}function OC(f){return ei(f)&&fs(f)==ce}function bY(f){return ei(f)&&fs(f)==dt}function wY(f){return ei(f)&&fs(f)==Me}function $h(f,p,x,M,H){return f===p?!0:f==null||p==null||!ei(f)&&!ei(p)?f!==f&&p!==p:xY(f,p,x,M,$h,H)}function xY(f,p,x,M,H,Q){var de=gr(f),be=gr(p),Pe=de?re:Zi(f),st=be?re:Zi(p);Pe=Pe==ce?K:Pe,st=st==ce?K:st;var ot=Pe==K,ft=st==K,Pt=Pe==st;if(Pt&&ic(f)){if(!ic(p))return!1;de=!0,ot=!1}if(Pt&&!ot)return Q||(Q=new ra),de||cf(f)?uO(f,p,x,M,H,Q):YY(f,p,Pe,x,M,H,Q);if(!(x&m)){var Vt=ot&&fr.call(f,"__wrapped__"),nr=ft&&fr.call(p,"__wrapped__");if(Vt||nr){var Er=Vt?f.value():f,ir=nr?p.value():p;return Q||(Q=new ra),H(Er,ir,x,M,Q)}}return Pt?(Q||(Q=new ra),KY(f,p,x,M,H,Q)):!1}function SY(f){return ei(f)&&Zi(f)==q}function l0(f,p,x,M){var H=x.length,Q=H,de=!M;if(f==null)return!Q;for(f=Rt(f);H--;){var be=x[H];if(de&&be[2]?be[1]!==f[be[0]]:!(be[0]in f))return!1}for(;++H<Q;){be=x[H];var Pe=be[0],st=f[Pe],ot=be[1];if(de&&be[2]){if(st===r&&!(Pe in f))return!1}else{var ft=new ra;if(M)var Pt=M(st,ot,Pe,f,p,ft);if(!(Pt===r?$h(ot,st,m|b,M,ft):Pt))return!1}}return!0}function IC(f){if(!Xn(f)||sK(f))return!1;var p=xu(f)?SX:Dt;return p.test(Jc(f))}function EY(f){return ei(f)&&fs(f)==Te}function AY(f){return ei(f)&&Zi(f)==Ce}function TY(f){return ei(f)&&hv(f.length)&&!!En[fs(f)]}function RC(f){return typeof f=="function"?f:f==null?Cs:typeof f=="object"?gr(f)?LC(f[0],f[1]):MC(f):QO(f)}function f0(f){if(!jh(f))return OX(f);var p=[];for(var x in Rt(f))fr.call(f,x)&&x!="constructor"&&p.push(x);return p}function PY(f){if(!Xn(f))return cK(f);var p=jh(f),x=[];for(var M in f)M=="constructor"&&(p||!fr.call(f,M))||x.push(M);return x}function h0(f,p){return f<p}function kC(f,p){var x=-1,M=Ts(f)?ye(f.length):[];return ec(f,function(H,Q,de){M[++x]=p(H,Q,de)}),M}function MC(f){var p=P0(f);return p.length==1&&p[0][2]?dO(p[0][0],p[0][1]):function(x){return x===f||l0(x,f,p)}}function LC(f,p){return O0(f)&&hO(p)?dO(Va(f),p):function(x){var M=B0(x,f);return M===r&&M===p?z0(x,f):$h(p,M,m|b)}}function Kp(f,p,x,M,H){f!==p&&o0(p,function(Q,de){if(H||(H=new ra),Xn(Q))CY(f,p,de,x,Kp,M,H);else{var be=M?M(R0(f,de),Q,de+"",f,p,H):r;be===r&&(be=Q),i0(f,de,be)}},Ps)}function CY(f,p,x,M,H,Q,de){var be=R0(f,x),Pe=R0(p,x),st=de.get(Pe);if(st){i0(f,x,st);return}var ot=Q?Q(be,Pe,x+"",f,p,de):r,ft=ot===r;if(ft){var Pt=gr(Pe),Vt=!Pt&&ic(Pe),nr=!Pt&&!Vt&&cf(Pe);ot=Pe,Pt||Vt||nr?gr(be)?ot=be:oi(be)?ot=As(be):Vt?(ft=!1,ot=HC(Pe,!0)):nr?(ft=!1,ot=WC(Pe,!0)):ot=[]:Wh(Pe)||Zc(Pe)?(ot=be,Zc(be)?ot=GO(be):(!Xn(be)||xu(be))&&(ot=fO(Pe))):ft=!1}ft&&(de.set(Pe,ot),H(ot,Pe,M,Q,de),de.delete(Pe)),i0(f,x,ot)}function NC(f,p){var x=f.length;if(x)return p+=p<0?x:0,wu(p,x)?f[p]:r}function qC(f,p,x){p.length?p=kt(p,function(Q){return gr(Q)?function(de){return Yc(de,Q.length===1?Q[0]:Q)}:Q}):p=[Cs];var M=-1;p=kt(p,us(Zt()));var H=kC(f,function(Q,de,be){var Pe=kt(p,function(st){return st(Q)});return{criteria:Pe,index:++M,value:Q}});return qa(H,function(Q,de){return VY(Q,de,x)})}function OY(f,p){return DC(f,p,function(x,M){return z0(f,M)})}function DC(f,p,x){for(var M=-1,H=p.length,Q={};++M<H;){var de=p[M],be=Yc(f,de);x(be,de)&&Gh(Q,rc(de,f),be)}return Q}function IY(f){return function(p){return Yc(p,f)}}function d0(f,p,x,M){var H=M?Vc:_n,Q=-1,de=p.length,be=f;for(f===p&&(p=As(p)),x&&(be=kt(f,us(x)));++Q<de;)for(var Pe=0,st=p[Q],ot=x?x(st):st;(Pe=H(be,ot,Pe,M))>-1;)be!==f&&zp.call(be,Pe,1),zp.call(f,Pe,1);return f}function FC(f,p){for(var x=f?p.length:0,M=x-1;x--;){var H=p[x];if(x==M||H!==Q){var Q=H;wu(H)?zp.call(f,H,1):m0(f,H)}}return f}function p0(f,p){return f+Gp(yC()*(p-f+1))}function RY(f,p,x,M){for(var H=-1,Q=Pi($p((p-f)/(x||1)),0),de=ye(Q);Q--;)de[M?Q:++H]=f,f+=x;return de}function v0(f,p){var x="";if(!f||p<1||p>B)return x;do p%2&&(x+=f),p=Gp(p/2),p&&(f+=f);while(p);return x}function Cr(f,p){return k0(pO(f,p,Cs),f+"")}function kY(f){return wC(lf(f))}function MY(f,p){var x=lf(f);return ov(x,Xc(p,0,x.length))}function Gh(f,p,x,M){if(!Xn(f))return f;p=rc(p,f);for(var H=-1,Q=p.length,de=Q-1,be=f;be!=null&&++H<Q;){var Pe=Va(p[H]),st=x;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return f;if(H!=de){var ot=be[Pe];st=M?M(ot,Pe,be):r,st===r&&(st=Xn(ot)?ot:wu(p[H+1])?[]:{})}Bh(be,Pe,st),be=be[Pe]}return f}var BC=Up?function(f,p){return Up.set(f,p),f}:Cs,LY=Vp?function(f,p){return Vp(f,"toString",{configurable:!0,enumerable:!1,value:$0(p),writable:!0})}:Cs;function NY(f){return ov(lf(f))}function bo(f,p,x){var M=-1,H=f.length;p<0&&(p=-p>H?0:H+p),x=x>H?H:x,x<0&&(x+=H),H=p>x?0:x-p>>>0,p>>>=0;for(var Q=ye(H);++M<H;)Q[M]=f[M+p];return Q}function qY(f,p){var x;return ec(f,function(M,H,Q){return x=p(M,H,Q),!x}),!!x}function Jp(f,p,x){var M=0,H=f==null?M:f.length;if(typeof p=="number"&&p===p&&H<=me){for(;M<H;){var Q=M+H>>>1,de=f[Q];de!==null&&!Ys(de)&&(x?de<=p:de<p)?M=Q+1:H=Q}return H}return g0(f,p,Cs,x)}function g0(f,p,x,M){var H=0,Q=f==null?0:f.length;if(Q===0)return 0;p=x(p);for(var de=p!==p,be=p===null,Pe=Ys(p),st=p===r;H<Q;){var ot=Gp((H+Q)/2),ft=x(f[ot]),Pt=ft!==r,Vt=ft===null,nr=ft===ft,Er=Ys(ft);if(de)var ir=M||nr;else st?ir=nr&&(M||Pt):be?ir=nr&&Pt&&(M||!Vt):Pe?ir=nr&&Pt&&!Vt&&(M||!Er):Vt||Er?ir=!1:ir=M?ft<=p:ft<p;ir?H=ot+1:Q=ot}return Ji(Q,xe)}function zC(f,p){for(var x=-1,M=f.length,H=0,Q=[];++x<M;){var de=f[x],be=p?p(de):de;if(!x||!na(be,Pe)){var Pe=be;Q[H++]=de===0?0:de}}return Q}function VC(f){return typeof f=="number"?f:Ys(f)?ie:+f}function Xs(f){if(typeof f=="string")return f;if(gr(f))return kt(f,Xs)+"";if(Ys(f))return _C?_C.call(f):"";var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}function tc(f,p,x){var M=-1,H=ke,Q=f.length,de=!0,be=[],Pe=be;if(x)de=!1,H=pt;else if(Q>=i){var st=p?null:WY(f);if(st)return vu(st);de=!1,H=Gc,Pe=new Wc}else Pe=p?[]:be;e:for(;++M<Q;){var ot=f[M],ft=p?p(ot):ot;if(ot=x||ot!==0?ot:0,de&&ft===ft){for(var Pt=Pe.length;Pt--;)if(Pe[Pt]===ft)continue e;p&&Pe.push(ft),be.push(ot)}else H(Pe,ft,x)||(Pe!==be&&Pe.push(ft),be.push(ot))}return be}function m0(f,p){return p=rc(p,f),f=vO(f,p),f==null||delete f[Va(wo(p))]}function $C(f,p,x,M){return Gh(f,p,x(Yc(f,p)),M)}function Zp(f,p,x,M){for(var H=f.length,Q=M?H:-1;(M?Q--:++Q<H)&&p(f[Q],Q,f););return x?bo(f,M?0:Q,M?Q+1:H):bo(f,M?Q+1:0,M?H:Q)}function GC(f,p){var x=f;return x instanceof Gr&&(x=x.value()),hr(p,function(M,H){return H.func.apply(H.thisArg,vr([M],H.args))},x)}function y0(f,p,x){var M=f.length;if(M<2)return M?tc(f[0]):[];for(var H=-1,Q=ye(M);++H<M;)for(var de=f[H],be=-1;++be<M;)be!=H&&(Q[H]=zh(Q[H]||de,f[be],p,x));return tc($i(Q,1),p,x)}function UC(f,p,x){for(var M=-1,H=f.length,Q=p.length,de={};++M<H;){var be=M<Q?p[M]:r;x(de,f[M],be)}return de}function _0(f){return oi(f)?f:[]}function b0(f){return typeof f=="function"?f:Cs}function rc(f,p){return gr(f)?f:O0(f,p)?[f]:_O(pn(f))}var DY=Cr;function nc(f,p,x){var M=f.length;return x=x===r?M:x,!p&&x>=M?f:bo(f,p,x)}var jC=EX||function(f){return Hn.clearTimeout(f)};function HC(f,p){if(p)return f.slice();var x=f.length,M=dC?dC(x):new f.constructor(x);return f.copy(M),M}function w0(f){var p=new f.constructor(f.byteLength);return new Fp(p).set(new Fp(f)),p}function FY(f,p){var x=p?w0(f.buffer):f.buffer;return new f.constructor(x,f.byteOffset,f.byteLength)}function BY(f){var p=new f.constructor(f.source,at.exec(f));return p.lastIndex=f.lastIndex,p}function zY(f){return Fh?Rt(Fh.call(f)):{}}function WC(f,p){var x=p?w0(f.buffer):f.buffer;return new f.constructor(x,f.byteOffset,f.length)}function XC(f,p){if(f!==p){var x=f!==r,M=f===null,H=f===f,Q=Ys(f),de=p!==r,be=p===null,Pe=p===p,st=Ys(p);if(!be&&!st&&!Q&&f>p||Q&&de&&Pe&&!be&&!st||M&&de&&Pe||!x&&Pe||!H)return 1;if(!M&&!Q&&!st&&f<p||st&&x&&H&&!M&&!Q||be&&x&&H||!de&&H||!Pe)return-1}return 0}function VY(f,p,x){for(var M=-1,H=f.criteria,Q=p.criteria,de=H.length,be=x.length;++M<de;){var Pe=XC(H[M],Q[M]);if(Pe){if(M>=be)return Pe;var st=x[M];return Pe*(st=="desc"?-1:1)}}return f.index-p.index}function YC(f,p,x,M){for(var H=-1,Q=f.length,de=x.length,be=-1,Pe=p.length,st=Pi(Q-de,0),ot=ye(Pe+st),ft=!M;++be<Pe;)ot[be]=p[be];for(;++H<de;)(ft||H<Q)&&(ot[x[H]]=f[H]);for(;st--;)ot[be++]=f[H++];return ot}function KC(f,p,x,M){for(var H=-1,Q=f.length,de=-1,be=x.length,Pe=-1,st=p.length,ot=Pi(Q-be,0),ft=ye(ot+st),Pt=!M;++H<ot;)ft[H]=f[H];for(var Vt=H;++Pe<st;)ft[Vt+Pe]=p[Pe];for(;++de<be;)(Pt||H<Q)&&(ft[Vt+x[de]]=f[H++]);return ft}function As(f,p){var x=-1,M=f.length;for(p||(p=ye(M));++x<M;)p[x]=f[x];return p}function za(f,p,x,M){var H=!x;x||(x={});for(var Q=-1,de=p.length;++Q<de;){var be=p[Q],Pe=M?M(x[be],f[be],be,x,f):r;Pe===r&&(Pe=f[be]),H?yu(x,be,Pe):Bh(x,be,Pe)}return x}function $Y(f,p){return za(f,C0(f),p)}function GY(f,p){return za(f,cO(f),p)}function Qp(f,p){return function(x,M){var H=gr(x)?ve:fY,Q=p?p():{};return H(x,f,Zt(M,2),Q)}}function of(f){return Cr(function(p,x){var M=-1,H=x.length,Q=H>1?x[H-1]:r,de=H>2?x[2]:r;for(Q=f.length>3&&typeof Q=="function"?(H--,Q):r,de&&hs(x[0],x[1],de)&&(Q=H<3?r:Q,H=1),p=Rt(p);++M<H;){var be=x[M];be&&f(p,be,M,Q)}return p})}function JC(f,p){return function(x,M){if(x==null)return x;if(!Ts(x))return f(x,M);for(var H=x.length,Q=p?H:-1,de=Rt(x);(p?Q--:++Q<H)&&M(de[Q],Q,de)!==!1;);return x}}function ZC(f){return function(p,x,M){for(var H=-1,Q=Rt(p),de=M(p),be=de.length;be--;){var Pe=de[f?be:++H];if(x(Q[Pe],Pe,Q)===!1)break}return p}}function UY(f,p,x){var M=p&y,H=Uh(f);function Q(){var de=this&&this!==Hn&&this instanceof Q?H:f;return de.apply(M?x:this,arguments)}return Q}function QC(f){return function(p){p=pn(p);var x=Es(p)?cs(p):r,M=x?x[0]:p.charAt(0),H=x?nc(x,1).join(""):p.slice(1);return M[f]()+H}}function af(f){return function(p){return hr(JO(KO(p).replace(Ah,"")),f,"")}}function Uh(f){return function(){var p=arguments;switch(p.length){case 0:return new f;case 1:return new f(p[0]);case 2:return new f(p[0],p[1]);case 3:return new f(p[0],p[1],p[2]);case 4:return new f(p[0],p[1],p[2],p[3]);case 5:return new f(p[0],p[1],p[2],p[3],p[4]);case 6:return new f(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new f(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var x=sf(f.prototype),M=f.apply(x,p);return Xn(M)?M:x}}function jY(f,p,x){var M=Uh(f);function H(){for(var Q=arguments.length,de=ye(Q),be=Q,Pe=uf(H);be--;)de[be]=arguments[be];var st=Q<3&&de[0]!==Pe&&de[Q-1]!==Pe?[]:Ws(de,Pe);if(Q-=st.length,Q<x)return iO(f,p,ev,H.placeholder,r,de,st,r,r,x-Q);var ot=this&&this!==Hn&&this instanceof H?M:f;return X(ot,this,de)}return H}function eO(f){return function(p,x,M){var H=Rt(p);if(!Ts(p)){var Q=Zt(x,3);p=Li(p),x=function(be){return Q(H[be],be,H)}}var de=f(p,x,M);return de>-1?H[Q?p[de]:de]:r}}function tO(f){return bu(function(p){var x=p.length,M=x,H=yo.prototype.thru;for(f&&p.reverse();M--;){var Q=p[M];if(typeof Q!="function")throw new Pr(o);if(H&&!de&&iv(Q)=="wrapper")var de=new yo([],!0)}for(M=de?M:x;++M<x;){Q=p[M];var be=iv(Q),Pe=be=="wrapper"?T0(Q):r;Pe&&I0(Pe[0])&&Pe[1]==(d|P|I|C)&&!Pe[4].length&&Pe[9]==1?de=de[iv(Pe[0])].apply(de,Pe[3]):de=Q.length==1&&I0(Q)?de[be]():de.thru(Q)}return function(){var st=arguments,ot=st[0];if(de&&st.length==1&&gr(ot))return de.plant(ot).value();for(var ft=0,Pt=x?p[ft].apply(this,st):ot;++ft<x;)Pt=p[ft].call(this,Pt);return Pt}})}function ev(f,p,x,M,H,Q,de,be,Pe,st){var ot=p&d,ft=p&y,Pt=p&w,Vt=p&(P|A),nr=p&O,Er=Pt?r:Uh(f);function ir(){for(var Vr=arguments.length,Kr=ye(Vr),Ks=Vr;Ks--;)Kr[Ks]=arguments[Ks];if(Vt)var ds=uf(ir),Js=Hs(Kr,ds);if(M&&(Kr=YC(Kr,M,H,Vt)),Q&&(Kr=KC(Kr,Q,de,Vt)),Vr-=Js,Vt&&Vr<st){var ai=Ws(Kr,ds);return iO(f,p,ev,ir.placeholder,x,Kr,ai,be,Pe,st-Vr)}var ia=ft?x:this,Eu=Pt?ia[f]:f;return Vr=Kr.length,be?Kr=fK(Kr,be):nr&&Vr>1&&Kr.reverse(),ot&&Pe<Vr&&(Kr.length=Pe),this&&this!==Hn&&this instanceof ir&&(Eu=Er||Uh(Eu)),Eu.apply(ia,Kr)}return ir}function rO(f,p){return function(x,M){return _Y(x,f,p(M),{})}}function tv(f,p){return function(x,M){var H;if(x===r&&M===r)return p;if(x!==r&&(H=x),M!==r){if(H===r)return M;typeof x=="string"||typeof M=="string"?(x=Xs(x),M=Xs(M)):(x=VC(x),M=VC(M)),H=f(x,M)}return H}}function x0(f){return bu(function(p){return p=kt(p,us(Zt())),Cr(function(x){var M=this;return f(p,function(H){return X(H,M,x)})})})}function rv(f,p){p=p===r?" ":Xs(p);var x=p.length;if(x<2)return x?v0(p,f):p;var M=v0(p,$p(f/Fa(p)));return Es(p)?nc(cs(M),0,f).join(""):M.slice(0,f)}function HY(f,p,x,M){var H=p&y,Q=Uh(f);function de(){for(var be=-1,Pe=arguments.length,st=-1,ot=M.length,ft=ye(ot+Pe),Pt=this&&this!==Hn&&this instanceof de?Q:f;++st<ot;)ft[st]=M[st];for(;Pe--;)ft[st++]=arguments[++be];return X(Pt,H?x:this,ft)}return de}function nO(f){return function(p,x,M){return M&&typeof M!="number"&&hs(p,x,M)&&(x=M=r),p=Su(p),x===r?(x=p,p=0):x=Su(x),M=M===r?p<x?1:-1:Su(M),RY(p,x,M,f)}}function nv(f){return function(p,x){return typeof p=="string"&&typeof x=="string"||(p=xo(p),x=xo(x)),f(p,x)}}function iO(f,p,x,M,H,Q,de,be,Pe,st){var ot=p&P,ft=ot?de:r,Pt=ot?r:de,Vt=ot?Q:r,nr=ot?r:Q;p|=ot?I:N,p&=~(ot?N:I),p&T||(p&=-4);var Er=[f,p,H,Vt,ft,nr,Pt,be,Pe,st],ir=x.apply(r,Er);return I0(f)&&gO(ir,Er),ir.placeholder=M,mO(ir,f,p)}function S0(f){var p=Lt[f];return function(x,M){if(x=xo(x),M=M==null?0:Ji(xr(M),292),M&&mC(x)){var H=(pn(x)+"e").split("e"),Q=p(H[0]+"e"+(+H[1]+M));return H=(pn(Q)+"e").split("e"),+(H[0]+"e"+(+H[1]-M))}return p(x)}}var WY=rf&&1/vu(new rf([,-0]))[1]==D?function(f){return new rf(f)}:j0;function sO(f){return function(p){var x=Zi(p);return x==q?ef(p):x==Ce?kh(p):ea(p,f(p))}}function _u(f,p,x,M,H,Q,de,be){var Pe=p&w;if(!Pe&&typeof f!="function")throw new Pr(o);var st=M?M.length:0;if(st||(p&=-97,M=H=r),de=de===r?de:Pi(xr(de),0),be=be===r?be:xr(be),st-=H?H.length:0,p&N){var ot=M,ft=H;M=H=r}var Pt=Pe?r:T0(f),Vt=[f,p,x,M,H,ot,ft,Q,de,be];if(Pt&&uK(Vt,Pt),f=Vt[0],p=Vt[1],x=Vt[2],M=Vt[3],H=Vt[4],be=Vt[9]=Vt[9]===r?Pe?0:f.length:Pi(Vt[9]-st,0),!be&&p&(P|A)&&(p&=-25),!p||p==y)var nr=UY(f,p,x);else p==P||p==A?nr=jY(f,p,be):(p==I||p==(y|I))&&!H.length?nr=HY(f,p,x,M):nr=ev.apply(r,Vt);var Er=Pt?BC:gO;return mO(Er(nr,Vt),f,p)}function oO(f,p,x,M){return f===r||na(f,Ti[x])&&!fr.call(M,x)?p:f}function aO(f,p,x,M,H,Q){return Xn(f)&&Xn(p)&&(Q.set(p,f),Kp(f,p,r,aO,Q),Q.delete(p)),f}function XY(f){return Wh(f)?r:f}function uO(f,p,x,M,H,Q){var de=x&m,be=f.length,Pe=p.length;if(be!=Pe&&!(de&&Pe>be))return!1;var st=Q.get(f),ot=Q.get(p);if(st&&ot)return st==p&&ot==f;var ft=-1,Pt=!0,Vt=x&b?new Wc:r;for(Q.set(f,p),Q.set(p,f);++ft<be;){var nr=f[ft],Er=p[ft];if(M)var ir=de?M(Er,nr,ft,p,f,Q):M(nr,Er,ft,f,p,Q);if(ir!==r){if(ir)continue;Pt=!1;break}if(Vt){if(!Wn(p,function(Vr,Kr){if(!Gc(Vt,Kr)&&(nr===Vr||H(nr,Vr,x,M,Q)))return Vt.push(Kr)})){Pt=!1;break}}else if(!(nr===Er||H(nr,Er,x,M,Q))){Pt=!1;break}}return Q.delete(f),Q.delete(p),Pt}function YY(f,p,x,M,H,Q,de){switch(x){case Et:if(f.byteLength!=p.byteLength||f.byteOffset!=p.byteOffset)return!1;f=f.buffer,p=p.buffer;case dt:return!(f.byteLength!=p.byteLength||!Q(new Fp(f),new Fp(p)));case le:case Me:case $:return na(+f,+p);case Ie:return f.name==p.name&&f.message==p.message;case Te:case ze:return f==p+"";case q:var be=ef;case Ce:var Pe=M&m;if(be||(be=vu),f.size!=p.size&&!Pe)return!1;var st=de.get(f);if(st)return st==p;M|=b,de.set(f,p);var ot=uO(be(f),be(p),M,H,Q,de);return de.delete(f),ot;case Le:if(Fh)return Fh.call(f)==Fh.call(p)}return!1}function KY(f,p,x,M,H,Q){var de=x&m,be=E0(f),Pe=be.length,st=E0(p),ot=st.length;if(Pe!=ot&&!de)return!1;for(var ft=Pe;ft--;){var Pt=be[ft];if(!(de?Pt in p:fr.call(p,Pt)))return!1}var Vt=Q.get(f),nr=Q.get(p);if(Vt&&nr)return Vt==p&&nr==f;var Er=!0;Q.set(f,p),Q.set(p,f);for(var ir=de;++ft<Pe;){Pt=be[ft];var Vr=f[Pt],Kr=p[Pt];if(M)var Ks=de?M(Kr,Vr,Pt,p,f,Q):M(Vr,Kr,Pt,f,p,Q);if(!(Ks===r?Vr===Kr||H(Vr,Kr,x,M,Q):Ks)){Er=!1;break}ir||(ir=Pt=="constructor")}if(Er&&!ir){var ds=f.constructor,Js=p.constructor;ds!=Js&&"constructor"in f&&"constructor"in p&&!(typeof ds=="function"&&ds instanceof ds&&typeof Js=="function"&&Js instanceof Js)&&(Er=!1)}return Q.delete(f),Q.delete(p),Er}function bu(f){return k0(pO(f,r,SO),f+"")}function E0(f){return CC(f,Li,C0)}function A0(f){return CC(f,Ps,cO)}var T0=Up?function(f){return Up.get(f)}:j0;function iv(f){for(var p=f.name+"",x=nf[p],M=fr.call(nf,p)?x.length:0;M--;){var H=x[M],Q=H.func;if(Q==null||Q==f)return H.name}return p}function uf(f){var p=fr.call(Z,"placeholder")?Z:f;return p.placeholder}function Zt(){var f=Z.iteratee||G0;return f=f===G0?RC:f,arguments.length?f(arguments[0],arguments[1]):f}function sv(f,p){var x=f.__data__;return iK(p)?x[typeof p=="string"?"string":"hash"]:x.map}function P0(f){for(var p=Li(f),x=p.length;x--;){var M=p[x],H=f[M];p[x]=[M,H,hO(H)]}return p}function Kc(f,p){var x=Mp(f,p);return IC(x)?x:r}function JY(f){var p=fr.call(f,jc),x=f[jc];try{f[jc]=r;var M=!0}catch{}var H=qp.call(f);return M&&(p?f[jc]=x:delete f[jc]),H}var C0=t0?function(f){return f==null?[]:(f=Rt(f),Xe(t0(f),function(p){return vC.call(f,p)}))}:H0,cO=t0?function(f){for(var p=[];f;)vr(p,C0(f)),f=Bp(f);return p}:H0,Zi=fs;(r0&&Zi(new r0(new ArrayBuffer(1)))!=Et||Nh&&Zi(new Nh)!=q||n0&&Zi(n0.resolve())!=we||rf&&Zi(new rf)!=Ce||qh&&Zi(new qh)!=Ee)&&(Zi=function(f){var p=fs(f),x=p==K?f.constructor:r,M=x?Jc(x):"";if(M)switch(M){case MX:return Et;case LX:return q;case NX:return we;case qX:return Ce;case DX:return Ee}return p});function ZY(f,p,x){for(var M=-1,H=x.length;++M<H;){var Q=x[M],de=Q.size;switch(Q.type){case"drop":f+=de;break;case"dropRight":p-=de;break;case"take":p=Ji(p,f+de);break;case"takeRight":f=Pi(f,p-de);break}}return{start:f,end:p}}function QY(f){var p=f.match(pi);return p?p[1].split(Dr):[]}function lO(f,p,x){p=rc(p,f);for(var M=-1,H=p.length,Q=!1;++M<H;){var de=Va(p[M]);if(!(Q=f!=null&&x(f,de)))break;f=f[de]}return Q||++M!=H?Q:(H=f==null?0:f.length,!!H&&hv(H)&&wu(de,H)&&(gr(f)||Zc(f)))}function eK(f){var p=f.length,x=new f.constructor(p);return p&&typeof f[0]=="string"&&fr.call(f,"index")&&(x.index=f.index,x.input=f.input),x}function fO(f){return typeof f.constructor=="function"&&!jh(f)?sf(Bp(f)):{}}function tK(f,p,x){var M=f.constructor;switch(p){case dt:return w0(f);case le:case Me:return new M(+f);case Et:return FY(f,x);case vt:case ut:case Jt:case pr:case sr:case yr:case Zr:case Nr:case Pn:return WC(f,x);case q:return new M;case $:case ze:return new M(f);case Te:return BY(f);case Ce:return new M;case Le:return zY(f)}}function rK(f,p){var x=p.length;if(!x)return f;var M=x-1;return p[M]=(x>1?"& ":"")+p[M],p=p.join(x>2?", ":" "),f.replace(jn,`{
/* [wrapped with `+p+`] */
`)}function nK(f){return gr(f)||Zc(f)||!!(gC&&f&&f[gC])}function wu(f,p){var x=typeof f;return p=p??B,!!p&&(x=="number"||x!="symbol"&&Fr.test(f))&&f>-1&&f%1==0&&f<p}function hs(f,p,x){if(!Xn(x))return!1;var M=typeof p;return(M=="number"?Ts(x)&&wu(p,x.length):M=="string"&&p in x)?na(x[p],f):!1}function O0(f,p){if(gr(f))return!1;var x=typeof f;return x=="number"||x=="symbol"||x=="boolean"||f==null||Ys(f)?!0:Bn.test(f)||!Kn.test(f)||p!=null&&f in Rt(p)}function iK(f){var p=typeof f;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?f!=="__proto__":f===null}function I0(f){var p=iv(f),x=Z[p];if(typeof x!="function"||!(p in Gr.prototype))return!1;if(f===x)return!0;var M=T0(x);return!!M&&f===M[0]}function sK(f){return!!hC&&hC in f}var oK=ls?xu:W0;function jh(f){var p=f&&f.constructor,x=typeof p=="function"&&p.prototype||Ti;return f===x}function hO(f){return f===f&&!Xn(f)}function dO(f,p){return function(x){return x==null?!1:x[f]===p&&(p!==r||f in Rt(x))}}function aK(f){var p=lv(f,function(M){return x.size===c&&x.clear(),M}),x=p.cache;return p}function uK(f,p){var x=f[1],M=p[1],H=x|M,Q=H<(y|w|d),de=M==d&&x==P||M==d&&x==C&&f[7].length<=p[8]||M==(d|C)&&p[7].length<=p[8]&&x==P;if(!(Q||de))return f;M&y&&(f[2]=p[2],H|=x&y?0:T);var be=p[3];if(be){var Pe=f[3];f[3]=Pe?YC(Pe,be,p[4]):be,f[4]=Pe?Ws(f[3],l):p[4]}return be=p[5],be&&(Pe=f[5],f[5]=Pe?KC(Pe,be,p[6]):be,f[6]=Pe?Ws(f[5],l):p[6]),be=p[7],be&&(f[7]=be),M&d&&(f[8]=f[8]==null?p[8]:Ji(f[8],p[8])),f[9]==null&&(f[9]=p[9]),f[0]=p[0],f[1]=H,f}function cK(f){var p=[];if(f!=null)for(var x in Rt(f))p.push(x);return p}function lK(f){return qp.call(f)}function pO(f,p,x){return p=Pi(p===r?f.length-1:p,0),function(){for(var M=arguments,H=-1,Q=Pi(M.length-p,0),de=ye(Q);++H<Q;)de[H]=M[p+H];H=-1;for(var be=ye(p+1);++H<p;)be[H]=M[H];return be[p]=x(de),X(f,this,be)}}function vO(f,p){return p.length<2?f:Yc(f,bo(p,0,-1))}function fK(f,p){for(var x=f.length,M=Ji(p.length,x),H=As(f);M--;){var Q=p[M];f[M]=wu(Q,x)?H[Q]:r}return f}function R0(f,p){if(!(p==="constructor"&&typeof f[p]=="function")&&p!="__proto__")return f[p]}var gO=yO(BC),Hh=TX||function(f,p){return Hn.setTimeout(f,p)},k0=yO(LY);function mO(f,p,x){var M=p+"";return k0(f,rK(M,hK(QY(M),x)))}function yO(f){var p=0,x=0;return function(){var M=IX(),H=j-(M-x);if(x=M,H>0){if(++p>=z)return arguments[0]}else p=0;return f.apply(r,arguments)}}function ov(f,p){var x=-1,M=f.length,H=M-1;for(p=p===r?M:p;++x<p;){var Q=p0(x,H),de=f[Q];f[Q]=f[x],f[x]=de}return f.length=p,f}var _O=aK(function(f){var p=[];return f.charCodeAt(0)===46&&p.push(""),f.replace(Un,function(x,M,H,Q){p.push(H?Q.replace(Ft,"$1"):M||x)}),p});function Va(f){if(typeof f=="string"||Ys(f))return f;var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}function Jc(f){if(f!=null){try{return ta.call(f)}catch{}try{return f+""}catch{}}return""}function hK(f,p){return ue(ee,function(x){var M="_."+x[0];p&x[1]&&!ke(f,M)&&f.push(M)}),f.sort()}function bO(f){if(f instanceof Gr)return f.clone();var p=new yo(f.__wrapped__,f.__chain__);return p.__actions__=As(f.__actions__),p.__index__=f.__index__,p.__values__=f.__values__,p}function dK(f,p,x){(x?hs(f,p,x):p===r)?p=1:p=Pi(xr(p),0);var M=f==null?0:f.length;if(!M||p<1)return[];for(var H=0,Q=0,de=ye($p(M/p));H<M;)de[Q++]=bo(f,H,H+=p);return de}function pK(f){for(var p=-1,x=f==null?0:f.length,M=0,H=[];++p<x;){var Q=f[p];Q&&(H[M++]=Q)}return H}function vK(){var f=arguments.length;if(!f)return[];for(var p=ye(f-1),x=arguments[0],M=f;M--;)p[M-1]=arguments[M];return vr(gr(x)?As(x):[x],$i(p,1))}var gK=Cr(function(f,p){return oi(f)?zh(f,$i(p,1,oi,!0)):[]}),mK=Cr(function(f,p){var x=wo(p);return oi(x)&&(x=r),oi(f)?zh(f,$i(p,1,oi,!0),Zt(x,2)):[]}),yK=Cr(function(f,p){var x=wo(p);return oi(x)&&(x=r),oi(f)?zh(f,$i(p,1,oi,!0),r,x):[]});function _K(f,p,x){var M=f==null?0:f.length;return M?(p=x||p===r?1:xr(p),bo(f,p<0?0:p,M)):[]}function bK(f,p,x){var M=f==null?0:f.length;return M?(p=x||p===r?1:xr(p),p=M-p,bo(f,0,p<0?0:p)):[]}function wK(f,p){return f&&f.length?Zp(f,Zt(p,3),!0,!0):[]}function xK(f,p){return f&&f.length?Zp(f,Zt(p,3),!0):[]}function SK(f,p,x,M){var H=f==null?0:f.length;return H?(x&&typeof x!="number"&&hs(f,p,x)&&(x=0,M=H),vY(f,p,x,M)):[]}function wO(f,p,x){var M=f==null?0:f.length;if(!M)return-1;var H=x==null?0:xr(x);return H<0&&(H=Pi(M+H,0)),Mr(f,Zt(p,3),H)}function xO(f,p,x){var M=f==null?0:f.length;if(!M)return-1;var H=M-1;return x!==r&&(H=xr(x),H=x<0?Pi(M+H,0):Ji(H,M-1)),Mr(f,Zt(p,3),H,!0)}function SO(f){var p=f==null?0:f.length;return p?$i(f,1):[]}function EK(f){var p=f==null?0:f.length;return p?$i(f,D):[]}function AK(f,p){var x=f==null?0:f.length;return x?(p=p===r?1:xr(p),$i(f,p)):[]}function TK(f){for(var p=-1,x=f==null?0:f.length,M={};++p<x;){var H=f[p];M[H[0]]=H[1]}return M}function EO(f){return f&&f.length?f[0]:r}function PK(f,p,x){var M=f==null?0:f.length;if(!M)return-1;var H=x==null?0:xr(x);return H<0&&(H=Pi(M+H,0)),_n(f,p,H)}function CK(f){var p=f==null?0:f.length;return p?bo(f,0,-1):[]}var OK=Cr(function(f){var p=kt(f,_0);return p.length&&p[0]===f[0]?c0(p):[]}),IK=Cr(function(f){var p=wo(f),x=kt(f,_0);return p===wo(x)?p=r:x.pop(),x.length&&x[0]===f[0]?c0(x,Zt(p,2)):[]}),RK=Cr(function(f){var p=wo(f),x=kt(f,_0);return p=typeof p=="function"?p:r,p&&x.pop(),x.length&&x[0]===f[0]?c0(x,r,p):[]});function kK(f,p){return f==null?"":CX.call(f,p)}function wo(f){var p=f==null?0:f.length;return p?f[p-1]:r}function MK(f,p,x){var M=f==null?0:f.length;if(!M)return-1;var H=M;return x!==r&&(H=xr(x),H=H<0?Pi(M+H,0):Ji(H,M-1)),p===p?tf(f,p,H):Mr(f,Ql,H,!0)}function LK(f,p){return f&&f.length?NC(f,xr(p)):r}var NK=Cr(AO);function AO(f,p){return f&&f.length&&p&&p.length?d0(f,p):f}function qK(f,p,x){return f&&f.length&&p&&p.length?d0(f,p,Zt(x,2)):f}function DK(f,p,x){return f&&f.length&&p&&p.length?d0(f,p,r,x):f}var FK=bu(function(f,p){var x=f==null?0:f.length,M=s0(f,p);return FC(f,kt(p,function(H){return wu(H,x)?+H:H}).sort(XC)),M});function BK(f,p){var x=[];if(!(f&&f.length))return x;var M=-1,H=[],Q=f.length;for(p=Zt(p,3);++M<Q;){var de=f[M];p(de,M,f)&&(x.push(de),H.push(M))}return FC(f,H),x}function M0(f){return f==null?f:kX.call(f)}function zK(f,p,x){var M=f==null?0:f.length;return M?(x&&typeof x!="number"&&hs(f,p,x)?(p=0,x=M):(p=p==null?0:xr(p),x=x===r?M:xr(x)),bo(f,p,x)):[]}function VK(f,p){return Jp(f,p)}function $K(f,p,x){return g0(f,p,Zt(x,2))}function GK(f,p){var x=f==null?0:f.length;if(x){var M=Jp(f,p);if(M<x&&na(f[M],p))return M}return-1}function UK(f,p){return Jp(f,p,!0)}function jK(f,p,x){return g0(f,p,Zt(x,2),!0)}function HK(f,p){var x=f==null?0:f.length;if(x){var M=Jp(f,p,!0)-1;if(na(f[M],p))return M}return-1}function WK(f){return f&&f.length?zC(f):[]}function XK(f,p){return f&&f.length?zC(f,Zt(p,2)):[]}function YK(f){var p=f==null?0:f.length;return p?bo(f,1,p):[]}function KK(f,p,x){return f&&f.length?(p=x||p===r?1:xr(p),bo(f,0,p<0?0:p)):[]}function JK(f,p,x){var M=f==null?0:f.length;return M?(p=x||p===r?1:xr(p),p=M-p,bo(f,p<0?0:p,M)):[]}function ZK(f,p){return f&&f.length?Zp(f,Zt(p,3),!1,!0):[]}function QK(f,p){return f&&f.length?Zp(f,Zt(p,3)):[]}var eJ=Cr(function(f){return tc($i(f,1,oi,!0))}),tJ=Cr(function(f){var p=wo(f);return oi(p)&&(p=r),tc($i(f,1,oi,!0),Zt(p,2))}),rJ=Cr(function(f){var p=wo(f);return p=typeof p=="function"?p:r,tc($i(f,1,oi,!0),r,p)});function nJ(f){return f&&f.length?tc(f):[]}function iJ(f,p){return f&&f.length?tc(f,Zt(p,2)):[]}function sJ(f,p){return p=typeof p=="function"?p:r,f&&f.length?tc(f,r,p):[]}function L0(f){if(!(f&&f.length))return[];var p=0;return f=Xe(f,function(x){if(oi(x))return p=Pi(x.length,p),!0}),$c(p,function(x){return kt(f,pu(x))})}function TO(f,p){if(!(f&&f.length))return[];var x=L0(f);return p==null?x:kt(x,function(M){return X(p,r,M)})}var oJ=Cr(function(f,p){return oi(f)?zh(f,p):[]}),aJ=Cr(function(f){return y0(Xe(f,oi))}),uJ=Cr(function(f){var p=wo(f);return oi(p)&&(p=r),y0(Xe(f,oi),Zt(p,2))}),cJ=Cr(function(f){var p=wo(f);return p=typeof p=="function"?p:r,y0(Xe(f,oi),r,p)}),lJ=Cr(L0);function fJ(f,p){return UC(f||[],p||[],Bh)}function hJ(f,p){return UC(f||[],p||[],Gh)}var dJ=Cr(function(f){var p=f.length,x=p>1?f[p-1]:r;return x=typeof x=="function"?(f.pop(),x):r,TO(f,x)});function PO(f){var p=Z(f);return p.__chain__=!0,p}function pJ(f,p){return p(f),f}function av(f,p){return p(f)}var vJ=bu(function(f){var p=f.length,x=p?f[0]:0,M=this.__wrapped__,H=function(Q){return s0(Q,f)};return p>1||this.__actions__.length||!(M instanceof Gr)||!wu(x)?this.thru(H):(M=M.slice(x,+x+(p?1:0)),M.__actions__.push({func:av,args:[H],thisArg:r}),new yo(M,this.__chain__).thru(function(Q){return p&&!Q.length&&Q.push(r),Q}))});function gJ(){return PO(this)}function mJ(){return new yo(this.value(),this.__chain__)}function yJ(){this.__values__===r&&(this.__values__=VO(this.value()));var f=this.__index__>=this.__values__.length,p=f?r:this.__values__[this.__index__++];return{done:f,value:p}}function _J(){return this}function bJ(f){for(var p,x=this;x instanceof Hp;){var M=bO(x);M.__index__=0,M.__values__=r,p?H.__wrapped__=M:p=M;var H=M;x=x.__wrapped__}return H.__wrapped__=f,p}function wJ(){var f=this.__wrapped__;if(f instanceof Gr){var p=f;return this.__actions__.length&&(p=new Gr(this)),p=p.reverse(),p.__actions__.push({func:av,args:[M0],thisArg:r}),new yo(p,this.__chain__)}return this.thru(M0)}function xJ(){return GC(this.__wrapped__,this.__actions__)}var SJ=Qp(function(f,p,x){fr.call(f,x)?++f[x]:yu(f,x,1)});function EJ(f,p,x){var M=gr(f)?$e:pY;return x&&hs(f,p,x)&&(p=r),M(f,Zt(p,3))}function AJ(f,p){var x=gr(f)?Xe:TC;return x(f,Zt(p,3))}var TJ=eO(wO),PJ=eO(xO);function CJ(f,p){return $i(uv(f,p),1)}function OJ(f,p){return $i(uv(f,p),D)}function IJ(f,p,x){return x=x===r?1:xr(x),$i(uv(f,p),x)}function CO(f,p){var x=gr(f)?ue:ec;return x(f,Zt(p,3))}function OO(f,p){var x=gr(f)?Ae:AC;return x(f,Zt(p,3))}var RJ=Qp(function(f,p,x){fr.call(f,x)?f[x].push(p):yu(f,x,[p])});function kJ(f,p,x,M){f=Ts(f)?f:lf(f),x=x&&!M?xr(x):0;var H=f.length;return x<0&&(x=Pi(H+x,0)),dv(f)?x<=H&&f.indexOf(p,x)>-1:!!H&&_n(f,p,x)>-1}var MJ=Cr(function(f,p,x){var M=-1,H=typeof p=="function",Q=Ts(f)?ye(f.length):[];return ec(f,function(de){Q[++M]=H?X(p,de,x):Vh(de,p,x)}),Q}),LJ=Qp(function(f,p,x){yu(f,x,p)});function uv(f,p){var x=gr(f)?kt:kC;return x(f,Zt(p,3))}function NJ(f,p,x,M){return f==null?[]:(gr(p)||(p=p==null?[]:[p]),x=M?r:x,gr(x)||(x=x==null?[]:[x]),qC(f,p,x))}var qJ=Qp(function(f,p,x){f[x?0:1].push(p)},function(){return[[],[]]});function DJ(f,p,x){var M=gr(f)?hr:Qo,H=arguments.length<3;return M(f,Zt(p,4),x,H,ec)}function FJ(f,p,x){var M=gr(f)?Ei:Qo,H=arguments.length<3;return M(f,Zt(p,4),x,H,AC)}function BJ(f,p){var x=gr(f)?Xe:TC;return x(f,fv(Zt(p,3)))}function zJ(f){var p=gr(f)?wC:kY;return p(f)}function VJ(f,p,x){(x?hs(f,p,x):p===r)?p=1:p=xr(p);var M=gr(f)?cY:MY;return M(f,p)}function $J(f){var p=gr(f)?lY:NY;return p(f)}function GJ(f){if(f==null)return 0;if(Ts(f))return dv(f)?Fa(f):f.length;var p=Zi(f);return p==q||p==Ce?f.size:f0(f).length}function UJ(f,p,x){var M=gr(f)?Wn:qY;return x&&hs(f,p,x)&&(p=r),M(f,Zt(p,3))}var jJ=Cr(function(f,p){if(f==null)return[];var x=p.length;return x>1&&hs(f,p[0],p[1])?p=[]:x>2&&hs(p[0],p[1],p[2])&&(p=[p[0]]),qC(f,$i(p,1),[])}),cv=AX||function(){return Hn.Date.now()};function HJ(f,p){if(typeof p!="function")throw new Pr(o);return f=xr(f),function(){if(--f<1)return p.apply(this,arguments)}}function IO(f,p,x){return p=x?r:p,p=f&&p==null?f.length:p,_u(f,d,r,r,r,r,p)}function RO(f,p){var x;if(typeof p!="function")throw new Pr(o);return f=xr(f),function(){return--f>0&&(x=p.apply(this,arguments)),f<=1&&(p=r),x}}var N0=Cr(function(f,p,x){var M=y;if(x.length){var H=Ws(x,uf(N0));M|=I}return _u(f,M,p,x,H)}),kO=Cr(function(f,p,x){var M=y|w;if(x.length){var H=Ws(x,uf(kO));M|=I}return _u(p,M,f,x,H)});function MO(f,p,x){p=x?r:p;var M=_u(f,P,r,r,r,r,r,p);return M.placeholder=MO.placeholder,M}function LO(f,p,x){p=x?r:p;var M=_u(f,A,r,r,r,r,r,p);return M.placeholder=LO.placeholder,M}function NO(f,p,x){var M,H,Q,de,be,Pe,st=0,ot=!1,ft=!1,Pt=!0;if(typeof f!="function")throw new Pr(o);p=xo(p)||0,Xn(x)&&(ot=!!x.leading,ft="maxWait"in x,Q=ft?Pi(xo(x.maxWait)||0,p):Q,Pt="trailing"in x?!!x.trailing:Pt);function Vt(ai){var ia=M,Eu=H;return M=H=r,st=ai,de=f.apply(Eu,ia),de}function nr(ai){return st=ai,be=Hh(Vr,p),ot?Vt(ai):de}function Er(ai){var ia=ai-Pe,Eu=ai-st,eI=p-ia;return ft?Ji(eI,Q-Eu):eI}function ir(ai){var ia=ai-Pe,Eu=ai-st;return Pe===r||ia>=p||ia<0||ft&&Eu>=Q}function Vr(){var ai=cv();if(ir(ai))return Kr(ai);be=Hh(Vr,Er(ai))}function Kr(ai){return be=r,Pt&&M?Vt(ai):(M=H=r,de)}function Ks(){be!==r&&jC(be),st=0,M=Pe=H=be=r}function ds(){return be===r?de:Kr(cv())}function Js(){var ai=cv(),ia=ir(ai);if(M=arguments,H=this,Pe=ai,ia){if(be===r)return nr(Pe);if(ft)return jC(be),be=Hh(Vr,p),Vt(Pe)}return be===r&&(be=Hh(Vr,p)),de}return Js.cancel=Ks,Js.flush=ds,Js}var WJ=Cr(function(f,p){return EC(f,1,p)}),XJ=Cr(function(f,p,x){return EC(f,xo(p)||0,x)});function YJ(f){return _u(f,O)}function lv(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new Pr(o);var x=function(){var M=arguments,H=p?p.apply(this,M):M[0],Q=x.cache;if(Q.has(H))return Q.get(H);var de=f.apply(this,M);return x.cache=Q.set(H,de)||Q,de};return x.cache=new(lv.Cache||mu),x}lv.Cache=mu;function fv(f){if(typeof f!="function")throw new Pr(o);return function(){var p=arguments;switch(p.length){case 0:return!f.call(this);case 1:return!f.call(this,p[0]);case 2:return!f.call(this,p[0],p[1]);case 3:return!f.call(this,p[0],p[1],p[2])}return!f.apply(this,p)}}function KJ(f){return RO(2,f)}var JJ=DY(function(f,p){p=p.length==1&&gr(p[0])?kt(p[0],us(Zt())):kt($i(p,1),us(Zt()));var x=p.length;return Cr(function(M){for(var H=-1,Q=Ji(M.length,x);++H<Q;)M[H]=p[H].call(this,M[H]);return X(f,this,M)})}),q0=Cr(function(f,p){var x=Ws(p,uf(q0));return _u(f,I,r,p,x)}),qO=Cr(function(f,p){var x=Ws(p,uf(qO));return _u(f,N,r,p,x)}),ZJ=bu(function(f,p){return _u(f,C,r,r,r,p)});function QJ(f,p){if(typeof f!="function")throw new Pr(o);return p=p===r?p:xr(p),Cr(f,p)}function eZ(f,p){if(typeof f!="function")throw new Pr(o);return p=p==null?0:Pi(xr(p),0),Cr(function(x){var M=x[p],H=nc(x,0,p);return M&&vr(H,M),X(f,this,H)})}function tZ(f,p,x){var M=!0,H=!0;if(typeof f!="function")throw new Pr(o);return Xn(x)&&(M="leading"in x?!!x.leading:M,H="trailing"in x?!!x.trailing:H),NO(f,p,{leading:M,maxWait:p,trailing:H})}function rZ(f){return IO(f,1)}function nZ(f,p){return q0(b0(p),f)}function iZ(){if(!arguments.length)return[];var f=arguments[0];return gr(f)?f:[f]}function sZ(f){return _o(f,_)}function oZ(f,p){return p=typeof p=="function"?p:r,_o(f,_,p)}function aZ(f){return _o(f,h|_)}function uZ(f,p){return p=typeof p=="function"?p:r,_o(f,h|_,p)}function cZ(f,p){return p==null||SC(f,p,Li(p))}function na(f,p){return f===p||f!==f&&p!==p}var lZ=nv(u0),fZ=nv(function(f,p){return f>=p}),Zc=OC(function(){return arguments}())?OC:function(f){return ei(f)&&fr.call(f,"callee")&&!vC.call(f,"callee")},gr=ye.isArray,hZ=g?us(g):bY;function Ts(f){return f!=null&&hv(f.length)&&!xu(f)}function oi(f){return ei(f)&&Ts(f)}function dZ(f){return f===!0||f===!1||ei(f)&&fs(f)==le}var ic=PX||W0,pZ=S?us(S):wY;function vZ(f){return ei(f)&&f.nodeType===1&&!Wh(f)}function gZ(f){if(f==null)return!0;if(Ts(f)&&(gr(f)||typeof f=="string"||typeof f.splice=="function"||ic(f)||cf(f)||Zc(f)))return!f.length;var p=Zi(f);if(p==q||p==Ce)return!f.size;if(jh(f))return!f0(f).length;for(var x in f)if(fr.call(f,x))return!1;return!0}function mZ(f,p){return $h(f,p)}function yZ(f,p,x){x=typeof x=="function"?x:r;var M=x?x(f,p):r;return M===r?$h(f,p,r,x):!!M}function D0(f){if(!ei(f))return!1;var p=fs(f);return p==Ie||p==Ge||typeof f.message=="string"&&typeof f.name=="string"&&!Wh(f)}function _Z(f){return typeof f=="number"&&mC(f)}function xu(f){if(!Xn(f))return!1;var p=fs(f);return p==Ue||p==We||p==te||p==he}function DO(f){return typeof f=="number"&&f==xr(f)}function hv(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=B}function Xn(f){var p=typeof f;return f!=null&&(p=="object"||p=="function")}function ei(f){return f!=null&&typeof f=="object"}var FO=R?us(R):SY;function bZ(f,p){return f===p||l0(f,p,P0(p))}function wZ(f,p,x){return x=typeof x=="function"?x:r,l0(f,p,P0(p),x)}function xZ(f){return BO(f)&&f!=+f}function SZ(f){if(oK(f))throw new it(s);return IC(f)}function EZ(f){return f===null}function AZ(f){return f==null}function BO(f){return typeof f=="number"||ei(f)&&fs(f)==$}function Wh(f){if(!ei(f)||fs(f)!=K)return!1;var p=Bp(f);if(p===null)return!0;var x=fr.call(p,"constructor")&&p.constructor;return typeof x=="function"&&x instanceof x&&ta.call(x)==wX}var F0=L?us(L):EY;function TZ(f){return DO(f)&&f>=-9007199254740991&&f<=B}var zO=V?us(V):AY;function dv(f){return typeof f=="string"||!gr(f)&&ei(f)&&fs(f)==ze}function Ys(f){return typeof f=="symbol"||ei(f)&&fs(f)==Le}var cf=G?us(G):TY;function PZ(f){return f===r}function CZ(f){return ei(f)&&Zi(f)==Ee}function OZ(f){return ei(f)&&fs(f)==Je}var IZ=nv(h0),RZ=nv(function(f,p){return f<=p});function VO(f){if(!f)return[];if(Ts(f))return dv(f)?cs(f):As(f);if(Lh&&f[Lh])return Da(f[Lh]());var p=Zi(f),x=p==q?ef:p==Ce?vu:lf;return x(f)}function Su(f){if(!f)return f===0?f:0;if(f=xo(f),f===D||f===-1/0){var p=f<0?-1:1;return p*U}return f===f?f:0}function xr(f){var p=Su(f),x=p%1;return p===p?x?p-x:p:0}function $O(f){return f?Xc(xr(f),0,se):0}function xo(f){if(typeof f=="number")return f;if(Ys(f))return ie;if(Xn(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=Xn(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=mo(f);var x=bt.test(f);return x||Nt.test(f)?Km(f.slice(2),x?2:8):Ze.test(f)?ie:+f}function GO(f){return za(f,Ps(f))}function kZ(f){return f?Xc(xr(f),-9007199254740991,B):f===0?f:0}function pn(f){return f==null?"":Xs(f)}var MZ=of(function(f,p){if(jh(p)||Ts(p)){za(p,Li(p),f);return}for(var x in p)fr.call(p,x)&&Bh(f,x,p[x])}),UO=of(function(f,p){za(p,Ps(p),f)}),pv=of(function(f,p,x,M){za(p,Ps(p),f,M)}),LZ=of(function(f,p,x,M){za(p,Li(p),f,M)}),NZ=bu(s0);function qZ(f,p){var x=sf(f);return p==null?x:xC(x,p)}var DZ=Cr(function(f,p){f=Rt(f);var x=-1,M=p.length,H=M>2?p[2]:r;for(H&&hs(p[0],p[1],H)&&(M=1);++x<M;)for(var Q=p[x],de=Ps(Q),be=-1,Pe=de.length;++be<Pe;){var st=de[be],ot=f[st];(ot===r||na(ot,Ti[st])&&!fr.call(f,st))&&(f[st]=Q[st])}return f}),FZ=Cr(function(f){return f.push(r,aO),X(jO,r,f)});function BZ(f,p){return Na(f,Zt(p,3),Ba)}function zZ(f,p){return Na(f,Zt(p,3),a0)}function VZ(f,p){return f==null?f:o0(f,Zt(p,3),Ps)}function $Z(f,p){return f==null?f:PC(f,Zt(p,3),Ps)}function GZ(f,p){return f&&Ba(f,Zt(p,3))}function UZ(f,p){return f&&a0(f,Zt(p,3))}function jZ(f){return f==null?[]:Yp(f,Li(f))}function HZ(f){return f==null?[]:Yp(f,Ps(f))}function B0(f,p,x){var M=f==null?r:Yc(f,p);return M===r?x:M}function WZ(f,p){return f!=null&&lO(f,p,gY)}function z0(f,p){return f!=null&&lO(f,p,mY)}var XZ=rO(function(f,p,x){p!=null&&typeof p.toString!="function"&&(p=qp.call(p)),f[p]=x},$0(Cs)),YZ=rO(function(f,p,x){p!=null&&typeof p.toString!="function"&&(p=qp.call(p)),fr.call(f,p)?f[p].push(x):f[p]=[x]},Zt),KZ=Cr(Vh);function Li(f){return Ts(f)?bC(f):f0(f)}function Ps(f){return Ts(f)?bC(f,!0):PY(f)}function JZ(f,p){var x={};return p=Zt(p,3),Ba(f,function(M,H,Q){yu(x,p(M,H,Q),M)}),x}function ZZ(f,p){var x={};return p=Zt(p,3),Ba(f,function(M,H,Q){yu(x,H,p(M,H,Q))}),x}var QZ=of(function(f,p,x){Kp(f,p,x)}),jO=of(function(f,p,x,M){Kp(f,p,x,M)}),eQ=bu(function(f,p){var x={};if(f==null)return x;var M=!1;p=kt(p,function(Q){return Q=rc(Q,f),M||(M=Q.length>1),Q}),za(f,A0(f),x),M&&(x=_o(x,h|v|_,XY));for(var H=p.length;H--;)m0(x,p[H]);return x});function tQ(f,p){return HO(f,fv(Zt(p)))}var rQ=bu(function(f,p){return f==null?{}:OY(f,p)});function HO(f,p){if(f==null)return{};var x=kt(A0(f),function(M){return[M]});return p=Zt(p),DC(f,x,function(M,H){return p(M,H[0])})}function nQ(f,p,x){p=rc(p,f);var M=-1,H=p.length;for(H||(H=1,f=r);++M<H;){var Q=f==null?r:f[Va(p[M])];Q===r&&(M=H,Q=x),f=xu(Q)?Q.call(f):Q}return f}function iQ(f,p,x){return f==null?f:Gh(f,p,x)}function sQ(f,p,x,M){return M=typeof M=="function"?M:r,f==null?f:Gh(f,p,x,M)}var WO=sO(Li),XO=sO(Ps);function oQ(f,p,x){var M=gr(f),H=M||ic(f)||cf(f);if(p=Zt(p,4),x==null){var Q=f&&f.constructor;H?x=M?new Q:[]:Xn(f)?x=xu(Q)?sf(Bp(f)):{}:x={}}return(H?ue:Ba)(f,function(de,be,Pe){return p(x,de,be,Pe)}),x}function aQ(f,p){return f==null?!0:m0(f,p)}function uQ(f,p,x){return f==null?f:$C(f,p,b0(x))}function cQ(f,p,x,M){return M=typeof M=="function"?M:r,f==null?f:$C(f,p,b0(x),M)}function lf(f){return f==null?[]:Ih(f,Li(f))}function lQ(f){return f==null?[]:Ih(f,Ps(f))}function fQ(f,p,x){return x===r&&(x=p,p=r),x!==r&&(x=xo(x),x=x===x?x:0),p!==r&&(p=xo(p),p=p===p?p:0),Xc(xo(f),p,x)}function hQ(f,p,x){return p=Su(p),x===r?(x=p,p=0):x=Su(x),f=xo(f),yY(f,p,x)}function dQ(f,p,x){if(x&&typeof x!="boolean"&&hs(f,p,x)&&(p=x=r),x===r&&(typeof p=="boolean"?(x=p,p=r):typeof f=="boolean"&&(x=f,f=r)),f===r&&p===r?(f=0,p=1):(f=Su(f),p===r?(p=f,f=0):p=Su(p)),f>p){var M=f;f=p,p=M}if(x||f%1||p%1){var H=yC();return Ji(f+H*(p-f+Ch("1e-"+((H+"").length-1))),p)}return p0(f,p)}var pQ=af(function(f,p,x){return p=p.toLowerCase(),f+(x?YO(p):p)});function YO(f){return V0(pn(f).toLowerCase())}function KO(f){return f=pn(f),f&&f.replace(Zn,Ju).replace(Um,"")}function vQ(f,p,x){f=pn(f),p=Xs(p);var M=f.length;x=x===r?M:Xc(xr(x),0,M);var H=x;return x-=p.length,x>=0&&f.slice(x,H)==p}function gQ(f){return f=pn(f),f&&di.test(f)?f.replace(Cn,Zm):f}function mQ(f){return f=pn(f),f&&xi.test(f)?f.replace(cn,"\\$&"):f}var yQ=af(function(f,p,x){return f+(x?"-":"")+p.toLowerCase()}),_Q=af(function(f,p,x){return f+(x?" ":"")+p.toLowerCase()}),bQ=QC("toLowerCase");function wQ(f,p,x){f=pn(f),p=xr(p);var M=p?Fa(f):0;if(!p||M>=p)return f;var H=(p-M)/2;return rv(Gp(H),x)+f+rv($p(H),x)}function xQ(f,p,x){f=pn(f),p=xr(p);var M=p?Fa(f):0;return p&&M<p?f+rv(p-M,x):f}function SQ(f,p,x){f=pn(f),p=xr(p);var M=p?Fa(f):0;return p&&M<p?rv(p-M,x)+f:f}function EQ(f,p,x){return x||p==null?p=0:p&&(p=+p),RX(pn(f).replace(hn,""),p||0)}function AQ(f,p,x){return(x?hs(f,p,x):p===r)?p=1:p=xr(p),v0(pn(f),p)}function TQ(){var f=arguments,p=pn(f[0]);return f.length<3?p:p.replace(f[1],f[2])}var PQ=af(function(f,p,x){return f+(x?"_":"")+p.toLowerCase()});function CQ(f,p,x){return x&&typeof x!="number"&&hs(f,p,x)&&(p=x=r),x=x===r?se:x>>>0,x?(f=pn(f),f&&(typeof p=="string"||p!=null&&!F0(p))&&(p=Xs(p),!p&&Es(f))?nc(cs(f),0,x):f.split(p,x)):[]}var OQ=af(function(f,p,x){return f+(x?" ":"")+V0(p)});function IQ(f,p,x){return f=pn(f),x=x==null?0:Xc(xr(x),0,f.length),p=Xs(p),f.slice(x,x+p.length)==p}function RQ(f,p,x){var M=Z.templateSettings;x&&hs(f,p,x)&&(p=r),f=pn(f),p=pv({},p,M,oO);var H=pv({},p.imports,M.imports,oO),Q=Li(H),de=Ih(H,Q),be,Pe,st=0,ot=p.interpolate||$t,ft="__p += '",Pt=wr((p.escape||$t).source+"|"+ot.source+"|"+(ot===Yr?xt:$t).source+"|"+(p.evaluate||$t).source+"|$","g"),Vt="//# sourceURL="+(fr.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ym+"]")+`
`;f.replace(Pt,function(ir,Vr,Kr,Ks,ds,Js){return Kr||(Kr=Ks),ft+=f.slice(st,Js).replace(sn,Qm),Vr&&(be=!0,ft+=`' +
__e(`+Vr+`) +
'`),ds&&(Pe=!0,ft+=`';
`+ds+`;
__p += '`),Kr&&(ft+=`' +
((__t = (`+Kr+`)) == null ? '' : __t) +
'`),st=Js+ir.length,ir}),ft+=`';
`;var nr=fr.call(p,"variable")&&p.variable;if(!nr)ft=`with (obj) {
`+ft+`
}
`;else if(Tt.test(nr))throw new it(a);ft=(Pe?ft.replace(lr,""):ft).replace(qr,"$1").replace(In,"$1;"),ft="function("+(nr||"obj")+`) {
`+(nr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(be?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var Er=ZO(function(){return Mt(Q,Vt+"return "+ft).apply(r,de)});if(Er.source=ft,D0(Er))throw Er;return Er}function kQ(f){return pn(f).toLowerCase()}function MQ(f){return pn(f).toUpperCase()}function LQ(f,p,x){if(f=pn(f),f&&(x||p===r))return mo(f);if(!f||!(p=Xs(p)))return f;var M=cs(f),H=cs(p),Q=on(M,H),de=Uc(M,H)+1;return nc(M,Q,de).join("")}function NQ(f,p,x){if(f=pn(f),f&&(x||p===r))return f.slice(0,Lp(f)+1);if(!f||!(p=Xs(p)))return f;var M=cs(f),H=Uc(M,cs(p))+1;return nc(M,0,H).join("")}function qQ(f,p,x){if(f=pn(f),f&&(x||p===r))return f.replace(hn,"");if(!f||!(p=Xs(p)))return f;var M=cs(f),H=on(M,cs(p));return nc(M,H).join("")}function DQ(f,p){var x=k,M=F;if(Xn(p)){var H="separator"in p?p.separator:H;x="length"in p?xr(p.length):x,M="omission"in p?Xs(p.omission):M}f=pn(f);var Q=f.length;if(Es(f)){var de=cs(f);Q=de.length}if(x>=Q)return f;var be=x-Fa(M);if(be<1)return M;var Pe=de?nc(de,0,be).join(""):f.slice(0,be);if(H===r)return Pe+M;if(de&&(be+=Pe.length-be),F0(H)){if(f.slice(be).search(H)){var st,ot=Pe;for(H.global||(H=wr(H.source,pn(at.exec(H))+"g")),H.lastIndex=0;st=H.exec(ot);)var ft=st.index;Pe=Pe.slice(0,ft===r?be:ft)}}else if(f.indexOf(Xs(H),be)!=be){var Pt=Pe.lastIndexOf(H);Pt>-1&&(Pe=Pe.slice(0,Pt))}return Pe+M}function FQ(f){return f=pn(f),f&&ii.test(f)?f.replace(Rn,Mh):f}var BQ=af(function(f,p,x){return f+(x?" ":"")+p.toUpperCase()}),V0=QC("toUpperCase");function JO(f,p,x){return f=pn(f),p=x?r:p,p===r?Rh(f)?Se(f):kr(f):f.match(p)||[]}var ZO=Cr(function(f,p){try{return X(f,r,p)}catch(x){return D0(x)?x:new it(x)}}),zQ=bu(function(f,p){return ue(p,function(x){x=Va(x),yu(f,x,N0(f[x],f))}),f});function VQ(f){var p=f==null?0:f.length,x=Zt();return f=p?kt(f,function(M){if(typeof M[1]!="function")throw new Pr(o);return[x(M[0]),M[1]]}):[],Cr(function(M){for(var H=-1;++H<p;){var Q=f[H];if(X(Q[0],this,M))return X(Q[1],this,M)}})}function $Q(f){return dY(_o(f,h))}function $0(f){return function(){return f}}function GQ(f,p){return f==null||f!==f?p:f}var UQ=tO(),jQ=tO(!0);function Cs(f){return f}function G0(f){return RC(typeof f=="function"?f:_o(f,h))}function HQ(f){return MC(_o(f,h))}function WQ(f,p){return LC(f,_o(p,h))}var XQ=Cr(function(f,p){return function(x){return Vh(x,f,p)}}),YQ=Cr(function(f,p){return function(x){return Vh(f,x,p)}});function U0(f,p,x){var M=Li(p),H=Yp(p,M);x==null&&!(Xn(p)&&(H.length||!M.length))&&(x=p,p=f,f=this,H=Yp(p,Li(p)));var Q=!(Xn(x)&&"chain"in x)||!!x.chain,de=xu(f);return ue(H,function(be){var Pe=p[be];f[be]=Pe,de&&(f.prototype[be]=function(){var st=this.__chain__;if(Q||st){var ot=f(this.__wrapped__),ft=ot.__actions__=As(this.__actions__);return ft.push({func:Pe,args:arguments,thisArg:f}),ot.__chain__=st,ot}return Pe.apply(f,vr([this.value()],arguments))})}),f}function KQ(){return Hn._===this&&(Hn._=xX),this}function j0(){}function JQ(f){return f=xr(f),Cr(function(p){return NC(p,f)})}var ZQ=x0(kt),QQ=x0($e),eee=x0(Wn);function QO(f){return O0(f)?pu(Va(f)):IY(f)}function tee(f){return function(p){return f==null?r:Yc(f,p)}}var ree=nO(),nee=nO(!0);function H0(){return[]}function W0(){return!1}function iee(){return{}}function see(){return""}function oee(){return!0}function aee(f,p){if(f=xr(f),f<1||f>B)return[];var x=se,M=Ji(f,se);p=Zt(p),f-=se;for(var H=$c(M,p);++x<f;)p(x);return H}function uee(f){return gr(f)?kt(f,Va):Ys(f)?[f]:As(_O(pn(f)))}function cee(f){var p=++bX;return pn(f)+p}var lee=tv(function(f,p){return f+p},0),fee=S0("ceil"),hee=tv(function(f,p){return f/p},1),dee=S0("floor");function pee(f){return f&&f.length?Xp(f,Cs,u0):r}function vee(f,p){return f&&f.length?Xp(f,Zt(p,2),u0):r}function gee(f){return js(f,Cs)}function mee(f,p){return js(f,Zt(p,2))}function yee(f){return f&&f.length?Xp(f,Cs,h0):r}function _ee(f,p){return f&&f.length?Xp(f,Zt(p,2),h0):r}var bee=tv(function(f,p){return f*p},1),wee=S0("round"),xee=tv(function(f,p){return f-p},0);function See(f){return f&&f.length?Ki(f,Cs):0}function Eee(f,p){return f&&f.length?Ki(f,Zt(p,2)):0}return Z.after=HJ,Z.ary=IO,Z.assign=MZ,Z.assignIn=UO,Z.assignInWith=pv,Z.assignWith=LZ,Z.at=NZ,Z.before=RO,Z.bind=N0,Z.bindAll=zQ,Z.bindKey=kO,Z.castArray=iZ,Z.chain=PO,Z.chunk=dK,Z.compact=pK,Z.concat=vK,Z.cond=VQ,Z.conforms=$Q,Z.constant=$0,Z.countBy=SJ,Z.create=qZ,Z.curry=MO,Z.curryRight=LO,Z.debounce=NO,Z.defaults=DZ,Z.defaultsDeep=FZ,Z.defer=WJ,Z.delay=XJ,Z.difference=gK,Z.differenceBy=mK,Z.differenceWith=yK,Z.drop=_K,Z.dropRight=bK,Z.dropRightWhile=wK,Z.dropWhile=xK,Z.fill=SK,Z.filter=AJ,Z.flatMap=CJ,Z.flatMapDeep=OJ,Z.flatMapDepth=IJ,Z.flatten=SO,Z.flattenDeep=EK,Z.flattenDepth=AK,Z.flip=YJ,Z.flow=UQ,Z.flowRight=jQ,Z.fromPairs=TK,Z.functions=jZ,Z.functionsIn=HZ,Z.groupBy=RJ,Z.initial=CK,Z.intersection=OK,Z.intersectionBy=IK,Z.intersectionWith=RK,Z.invert=XZ,Z.invertBy=YZ,Z.invokeMap=MJ,Z.iteratee=G0,Z.keyBy=LJ,Z.keys=Li,Z.keysIn=Ps,Z.map=uv,Z.mapKeys=JZ,Z.mapValues=ZZ,Z.matches=HQ,Z.matchesProperty=WQ,Z.memoize=lv,Z.merge=QZ,Z.mergeWith=jO,Z.method=XQ,Z.methodOf=YQ,Z.mixin=U0,Z.negate=fv,Z.nthArg=JQ,Z.omit=eQ,Z.omitBy=tQ,Z.once=KJ,Z.orderBy=NJ,Z.over=ZQ,Z.overArgs=JJ,Z.overEvery=QQ,Z.overSome=eee,Z.partial=q0,Z.partialRight=qO,Z.partition=qJ,Z.pick=rQ,Z.pickBy=HO,Z.property=QO,Z.propertyOf=tee,Z.pull=NK,Z.pullAll=AO,Z.pullAllBy=qK,Z.pullAllWith=DK,Z.pullAt=FK,Z.range=ree,Z.rangeRight=nee,Z.rearg=ZJ,Z.reject=BJ,Z.remove=BK,Z.rest=QJ,Z.reverse=M0,Z.sampleSize=VJ,Z.set=iQ,Z.setWith=sQ,Z.shuffle=$J,Z.slice=zK,Z.sortBy=jJ,Z.sortedUniq=WK,Z.sortedUniqBy=XK,Z.split=CQ,Z.spread=eZ,Z.tail=YK,Z.take=KK,Z.takeRight=JK,Z.takeRightWhile=ZK,Z.takeWhile=QK,Z.tap=pJ,Z.throttle=tZ,Z.thru=av,Z.toArray=VO,Z.toPairs=WO,Z.toPairsIn=XO,Z.toPath=uee,Z.toPlainObject=GO,Z.transform=oQ,Z.unary=rZ,Z.union=eJ,Z.unionBy=tJ,Z.unionWith=rJ,Z.uniq=nJ,Z.uniqBy=iJ,Z.uniqWith=sJ,Z.unset=aQ,Z.unzip=L0,Z.unzipWith=TO,Z.update=uQ,Z.updateWith=cQ,Z.values=lf,Z.valuesIn=lQ,Z.without=oJ,Z.words=JO,Z.wrap=nZ,Z.xor=aJ,Z.xorBy=uJ,Z.xorWith=cJ,Z.zip=lJ,Z.zipObject=fJ,Z.zipObjectDeep=hJ,Z.zipWith=dJ,Z.entries=WO,Z.entriesIn=XO,Z.extend=UO,Z.extendWith=pv,U0(Z,Z),Z.add=lee,Z.attempt=ZO,Z.camelCase=pQ,Z.capitalize=YO,Z.ceil=fee,Z.clamp=fQ,Z.clone=sZ,Z.cloneDeep=aZ,Z.cloneDeepWith=uZ,Z.cloneWith=oZ,Z.conformsTo=cZ,Z.deburr=KO,Z.defaultTo=GQ,Z.divide=hee,Z.endsWith=vQ,Z.eq=na,Z.escape=gQ,Z.escapeRegExp=mQ,Z.every=EJ,Z.find=TJ,Z.findIndex=wO,Z.findKey=BZ,Z.findLast=PJ,Z.findLastIndex=xO,Z.findLastKey=zZ,Z.floor=dee,Z.forEach=CO,Z.forEachRight=OO,Z.forIn=VZ,Z.forInRight=$Z,Z.forOwn=GZ,Z.forOwnRight=UZ,Z.get=B0,Z.gt=lZ,Z.gte=fZ,Z.has=WZ,Z.hasIn=z0,Z.head=EO,Z.identity=Cs,Z.includes=kJ,Z.indexOf=PK,Z.inRange=hQ,Z.invoke=KZ,Z.isArguments=Zc,Z.isArray=gr,Z.isArrayBuffer=hZ,Z.isArrayLike=Ts,Z.isArrayLikeObject=oi,Z.isBoolean=dZ,Z.isBuffer=ic,Z.isDate=pZ,Z.isElement=vZ,Z.isEmpty=gZ,Z.isEqual=mZ,Z.isEqualWith=yZ,Z.isError=D0,Z.isFinite=_Z,Z.isFunction=xu,Z.isInteger=DO,Z.isLength=hv,Z.isMap=FO,Z.isMatch=bZ,Z.isMatchWith=wZ,Z.isNaN=xZ,Z.isNative=SZ,Z.isNil=AZ,Z.isNull=EZ,Z.isNumber=BO,Z.isObject=Xn,Z.isObjectLike=ei,Z.isPlainObject=Wh,Z.isRegExp=F0,Z.isSafeInteger=TZ,Z.isSet=zO,Z.isString=dv,Z.isSymbol=Ys,Z.isTypedArray=cf,Z.isUndefined=PZ,Z.isWeakMap=CZ,Z.isWeakSet=OZ,Z.join=kK,Z.kebabCase=yQ,Z.last=wo,Z.lastIndexOf=MK,Z.lowerCase=_Q,Z.lowerFirst=bQ,Z.lt=IZ,Z.lte=RZ,Z.max=pee,Z.maxBy=vee,Z.mean=gee,Z.meanBy=mee,Z.min=yee,Z.minBy=_ee,Z.stubArray=H0,Z.stubFalse=W0,Z.stubObject=iee,Z.stubString=see,Z.stubTrue=oee,Z.multiply=bee,Z.nth=LK,Z.noConflict=KQ,Z.noop=j0,Z.now=cv,Z.pad=wQ,Z.padEnd=xQ,Z.padStart=SQ,Z.parseInt=EQ,Z.random=dQ,Z.reduce=DJ,Z.reduceRight=FJ,Z.repeat=AQ,Z.replace=TQ,Z.result=nQ,Z.round=wee,Z.runInContext=ne,Z.sample=zJ,Z.size=GJ,Z.snakeCase=PQ,Z.some=UJ,Z.sortedIndex=VK,Z.sortedIndexBy=$K,Z.sortedIndexOf=GK,Z.sortedLastIndex=UK,Z.sortedLastIndexBy=jK,Z.sortedLastIndexOf=HK,Z.startCase=OQ,Z.startsWith=IQ,Z.subtract=xee,Z.sum=See,Z.sumBy=Eee,Z.template=RQ,Z.times=aee,Z.toFinite=Su,Z.toInteger=xr,Z.toLength=$O,Z.toLower=kQ,Z.toNumber=xo,Z.toSafeInteger=kZ,Z.toString=pn,Z.toUpper=MQ,Z.trim=LQ,Z.trimEnd=NQ,Z.trimStart=qQ,Z.truncate=DQ,Z.unescape=FQ,Z.uniqueId=cee,Z.upperCase=BQ,Z.upperFirst=V0,Z.each=CO,Z.eachRight=OO,Z.first=EO,U0(Z,function(){var f={};return Ba(Z,function(p,x){fr.call(Z.prototype,x)||(f[x]=p)}),f}(),{chain:!1}),Z.VERSION=n,ue(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Z[f].placeholder=Z}),ue(["drop","take"],function(f,p){Gr.prototype[f]=function(x){x=x===r?1:Pi(xr(x),0);var M=this.__filtered__&&!p?new Gr(this):this.clone();return M.__filtered__?M.__takeCount__=Ji(x,M.__takeCount__):M.__views__.push({size:Ji(x,se),type:f+(M.__dir__<0?"Right":"")}),M},Gr.prototype[f+"Right"]=function(x){return this.reverse()[f](x).reverse()}}),ue(["filter","map","takeWhile"],function(f,p){var x=p+1,M=x==J||x==W;Gr.prototype[f]=function(H){var Q=this.clone();return Q.__iteratees__.push({iteratee:Zt(H,3),type:x}),Q.__filtered__=Q.__filtered__||M,Q}}),ue(["head","last"],function(f,p){var x="take"+(p?"Right":"");Gr.prototype[f]=function(){return this[x](1).value()[0]}}),ue(["initial","tail"],function(f,p){var x="drop"+(p?"":"Right");Gr.prototype[f]=function(){return this.__filtered__?new Gr(this):this[x](1)}}),Gr.prototype.compact=function(){return this.filter(Cs)},Gr.prototype.find=function(f){return this.filter(f).head()},Gr.prototype.findLast=function(f){return this.reverse().find(f)},Gr.prototype.invokeMap=Cr(function(f,p){return typeof f=="function"?new Gr(this):this.map(function(x){return Vh(x,f,p)})}),Gr.prototype.reject=function(f){return this.filter(fv(Zt(f)))},Gr.prototype.slice=function(f,p){f=xr(f);var x=this;return x.__filtered__&&(f>0||p<0)?new Gr(x):(f<0?x=x.takeRight(-f):f&&(x=x.drop(f)),p!==r&&(p=xr(p),x=p<0?x.dropRight(-p):x.take(p-f)),x)},Gr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Gr.prototype.toArray=function(){return this.take(se)},Ba(Gr.prototype,function(f,p){var x=/^(?:filter|find|map|reject)|While$/.test(p),M=/^(?:head|last)$/.test(p),H=Z[M?"take"+(p=="last"?"Right":""):p],Q=M||/^find/.test(p);H&&(Z.prototype[p]=function(){var de=this.__wrapped__,be=M?[1]:arguments,Pe=de instanceof Gr,st=be[0],ot=Pe||gr(de),ft=function(Vr){var Kr=H.apply(Z,vr([Vr],be));return M&&Pt?Kr[0]:Kr};ot&&x&&typeof st=="function"&&st.length!=1&&(Pe=ot=!1);var Pt=this.__chain__,Vt=!!this.__actions__.length,nr=Q&&!Pt,Er=Pe&&!Vt;if(!Q&&ot){de=Er?de:new Gr(this);var ir=f.apply(de,be);return ir.__actions__.push({func:av,args:[ft],thisArg:r}),new yo(ir,Pt)}return nr&&Er?f.apply(this,be):(ir=this.thru(ft),nr?M?ir.value()[0]:ir.value():ir)})}),ue(["pop","push","shift","sort","splice","unshift"],function(f){var p=Ai[f],x=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",M=/^(?:pop|shift)$/.test(f);Z.prototype[f]=function(){var H=arguments;if(M&&!this.__chain__){var Q=this.value();return p.apply(gr(Q)?Q:[],H)}return this[x](function(de){return p.apply(gr(de)?de:[],H)})}}),Ba(Gr.prototype,function(f,p){var x=Z[p];if(x){var M=x.name+"";fr.call(nf,M)||(nf[M]=[]),nf[M].push({name:p,func:x})}}),nf[ev(r,w).name]=[{name:"wrapper",func:r}],Gr.prototype.clone=FX,Gr.prototype.reverse=BX,Gr.prototype.value=zX,Z.prototype.at=vJ,Z.prototype.chain=gJ,Z.prototype.commit=mJ,Z.prototype.next=yJ,Z.prototype.plant=bJ,Z.prototype.reverse=wJ,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=xJ,Z.prototype.first=Z.prototype.head,Lh&&(Z.prototype[Lh]=_J),Z},De=Re();Zo?((Zo.exports=De)._=De,Zl._=De):Hn._=De}).call(B0e)}(vd,vd.exports)),vd.exports}var V0e=z0e();const Vn=ah(V0e);var $0e=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},G0e=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Qv;function Eo(e,t,r){return t.map((n,i)=>e(n,r[i]))}function zv(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function Ga(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function U0e(e){return e>>5}function Wa(e){return e&31}function Pf(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&Wa(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function XP(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const j0e=XP(1,8),H0e=XP(3,3),W0e=XP(4,8);function JH(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function ZH(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function hA(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const l=e.slice(Math.max(0,c-2),c);c-=l.length;const h=W0e[l];Wa(a)==0&&u++;const v=(1<<4*l.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=4*l.length}a<r&&Pf(a,u,o,n,i)}function QH(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const l=e.slice(Math.max(0,c-8),c);c-=l.length;const h=j0e[l];Wa(a)==0&&u++;const v=(1<<1*l.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=1*l.length}a<r&&Pf(a,u,o,n,i)}class YP extends Error{constructor(t){super(t),Object.setPrototypeOf(this,YP.prototype)}}function Ni(e,t){if(!e)throw new YP("Assertion failed: "+t)}class rt{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:Ni(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new rt(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return rt.make(t,-1)}static ones(t){return rt.make(t,1)}static xes(t){return rt.make(t,0)}static fromBool(t,r=1){return rt.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),Wa(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new rt(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?rt.fromIteratorPow2(t,r,n):rt.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const l of t)Wa(s)==0&&o++,a[o]|=(l>>>r&c)<<s,u[o]|=(l&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(l>>>r&c)>>>-s,u[o]=(l&c)>>>-s),s+=r;return s<n&&Pf(s,o,i,a,u),new rt(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const l of t)Wa(s)==0&&o++,a[o]|=(l>>>r&c)<<s,u[o]|=(l&c)<<s,s+=r;return s<n&&Pf(s,o,i,a,u),new rt(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const l of t){const h=l+1+ +(l>0);Wa(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&Pf(s,o,i,a,u),new rt(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return QH(t,0,r,i,s),new rt(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let l=t.length-1;l>=0;l--){const h=H0e[t[l]];Wa(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&Pf(s,o,i,a,u),new rt(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return hA(t,0,r,i,s),new rt(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);Ni(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return rt.fromBin(s,i);case"o":return rt.fromOct(s,i);case"h":return rt.fromHex(s,i);case"d":return rt.fromNumber(BigInt(s),i)}}static fromClonable(t){return new rt(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return rt.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return rt.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=Wa(t),n=U0e(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Eo((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Eo((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return Ni(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new rt(this._bits,Eo((r,n)=>r&n,t._avec,this._avec),Eo((r,n)=>r&n,t._bvec,this._bvec))}or(t){return Ni(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new rt(this._bits,Eo((r,n)=>r|n,t._avec,this._avec),Eo((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return Ni(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new rt(this._bits,zv((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),zv((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return Ni(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new rt(this._bits,Eo((r,n)=>~(r&n),t._bvec,this._bvec),Eo((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return Ni(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new rt(this._bits,Eo((r,n)=>~(r|n),t._bvec,this._bvec),Eo((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return Ni(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new rt(this._bits,zv((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),zv((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new rt(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Eo((r,n)=>r^n,this._avec,this._bvec);return new rt(this._bits,t,t)}reduceAnd(){return new rt(1,Uint32Array.of(Ga((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(Ga((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new rt(1,Uint32Array.of(Ga((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(Ga((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new rt(1,Uint32Array.of(~Ga((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~Ga((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new rt(1,Uint32Array.of(~Ga((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~Ga((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Eo((i,s)=>~i&s,this._avec,this._bvec),r=Ga((i,s)=>i|s,t,this._lastmask,0),n=Ga((i,s)=>i^s,this._avec,this._lastmask,0);return new rt(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return rt.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),Wa(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new rt(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new rt(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return ZH(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const l=r>>-n;a|=(this._avec[i+1]&l)<<-n,u|=(this._bvec[i+1]&l)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),JH(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(Ni(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),Ni(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return Ni(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),Ni(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),Ni(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(Ni(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return Ni(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),Ni(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}rt.empty=rt.zeros(0);rt.one=rt.ones(1);rt.zero=rt.zeros(1);rt.x=rt.xes(1);class kf{constructor(t,r,n){n===void 0&&(n=0),this._bits=t|0,this._size=r|0,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(r*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(r*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(t.length==0)return new kf(0,0);const r=new kf(t[0].bits,t.length);for(const n in t){t[n].normalize(),Ni(t[n].bits==r._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let i=0;i<r._wpc;i++){const s=Number(n)*r._wpc+i;r._avec[s]=t[n]._avec[i],r._bvec[s]=t[n]._bvec[i]}}return r}get bits(){return this._bits}get words(){return this._size}get(t){const r=this._wpc*t;return new rt(this._bits,this._avec.slice(r,r+this._wpc),this._bvec.slice(r,r+this._wpc))}set(t,r){Ni(r.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),r.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=r._avec[n],this._bvec[t*this._wpc+n]=r._bvec[n]}toJSON(){const t=[];let r=[],n,i=0;const s=()=>{if(r.length!=0){if(r.reduce((u,c)=>u+c.length,0)==this._bits){const u=r.pop();r.length>0&&t.push(r.join("")),t.push(u)}else t.push(r.join(""));r=[]}},o=()=>{i!=0&&(i==1?n.length==this._bits?(s(),t.push(n)):r.push(n):(s(),t.push(i),t.push(n)),n=void 0,i=0)},a=u=>{n==u?i++:(o(),n=u,i=1)};for(let u=0;u<this._size;u++){const c=()=>{for(let l=0;l<this._wpc;l++){const h=this._avec[u*this._wpc+l]^this._bvec[u*this._wpc+l];for(let v=0;v<4;v++){const _=255<<v*16,m=h&_;if(m!=_||m!=0)return!1}}return!0};this._bits>0&&c()?a(JH(u*this._wpc,this._bits,this._avec,this._bvec)):a(ZH(u*this._wpc,this._bits,this._avec,this._bvec))}return o(),s(),t}static fromJSON(t,r){const n=Math.ceil(t/4);let i=0;const s=c=>c.length==t||c.length==n?1:c.length/n;for(let c=0;c<r.length;c++)typeof r[c]=="string"?i+=s(r[c]):typeof r[c]=="number"&&(i+=r[c]*s(r[c+1]),c++);const o=new kf(t,i,-1);let a=0;const u=c=>{if(c.length==t)QH(c,a,t,o._avec,o._bvec),a+=o._wpc;else if(c.length==n)hA(c,a,t,o._avec,o._bvec),a+=o._wpc;else for(let l=0;l<c.length/n;l++)hA(c.slice(l*n,(l+1)*n),a,t,o._avec,o._bvec),a+=o._wpc};for(let c=0;c<r.length;c++)if(typeof r[c]=="string")u(r[c]);else if(typeof r[c]=="number"){for(const l of Array(r[c]).keys())u(r[c+1]);c++}return o}toArray(){return Array(this._size).fill(0).map((t,r)=>this.get(r))}toHex(){return this.toArray().map(t=>t.toHex())}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let r=0;r<this._size;r++)if(!t.get(r).eq(this.get(r)))return!1;return!0}}class wh{constructor(t){Qv.set(this,void 0),this.pattern=t,$0e(this,Qv,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,r){return G0e(this,Qv,"f").test(t)}}Qv=new WeakMap;class X0e extends wh{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,r){return!0}read(t,r){return rt.fromHex(t,r)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}class Y0e extends wh{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,r){return!0}read(t,r){return rt.fromBin(t,r)}show(t){return t.toBin()}size(t){return t}}class K0e extends wh{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,r){return!0}read(t,r){return rt.fromOct(t,r)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}class J0e extends wh{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,r){return!0}read(t,r){return t=="x"?rt.xes(r):rt.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class Z0e extends wh{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,r){return r>0}read(t,r){return t=="x"?rt.xes(r):rt.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}class eW{constructor(){this.displays={},this.addDisplay(new X0e),this.addDisplay(new Y0e),this.addDisplay(new K0e),this.addDisplay(new J0e),this.addDisplay(new Z0e)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,r){const n=[];for(let i of Object.values(this.displays))i.can(t,r)&&n.push(i);return n.sort((i,s)=>i.sort-s.sort?i.sort-s.sort:i.name.localeCompare(s.name)).map(i=>i.name)}show(t,r){return this.displays[t].show(r)}read(t,r,n){return this.displays[t].read(r,n)}pattern(t){return this.displays[t].pattern}validate(t,r,n){return this.displays[t].validate(r,n)}size(t,r){return this.displays[t].size(r)}}const tW={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},Q0e=F0e.extend(Vn.merge({},tW)),eye=D0e.extend(Vn.merge({},tW)),rW=fA.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,fA.prototype.update.apply(this,arguments)}}),aV=rW.extend({name:"remove",children:sV.prototype.children,options:sV.prototype.options}),uV=rW.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(e){this.notify("link:monitor")}}}),_g={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},Ln=Ds.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:Vn.merge({},_g,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:Vn.merge({},_g,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation(){return{}},initialize(){const e=this.get("ports");e.items&&this._preprocessPorts(e.items),Ds.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(t=>"change:"+t).join(" "),(t,r,n)=>{if(n.init)return;const i=Vn.intersection(Object.keys(this.changed),this._unsupportedPropChanges);i.forEach(s=>{this.set(s,this.previous(s),{init:!0})}),console.warn('Beta property change support: "'+i+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(e,t){this.attr(e,this.get(t)),this.on("change:"+t,(r,n)=>this.attr(e,n))},_changeOutputSignals(e){Vn.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(t=>t.get("source").port).forEach((t,r)=>t.forEach(n=>n.set("signal",e[r]))).value()},_setInput(e,t){const r=Vn.clone(this.get("inputSignals"));r[t]=e,this.set("inputSignals",r)},_clearInput(e){const t=this.getPort(e).bits;this._setInput(rt.xes(t),e)},_preprocessPorts(e){this._resetPortsSignals(e);for(const t of e){if(t.attrs={},t.attrs.bits={text:this._getBitsText(t.bits)},t.labelled){const r={text:"portlabel"in t?t.portlabel:t.id};t.polarity===!1&&(r["text-decoration"]="overline"),t.decor&&(console.assert(t.group=="in"),r.refX=10),t.attrs.iolabel=r}t.decor&&(t.attrs.decor={d:t.decor})}},_setPortsBits(e){const t=Vn.cloneDeep(this.get("ports")),r=[];for(const n in e){const i=e[n],s=t.items.find(function(o){return o.id&&o.id===n});s.bits=i,s.attrs.bits.text=this._getBitsText(i),r.push(s)}this._resetPortsSignals(r),this.set("ports",t),this.graph.getConnectedLinks(this,{outbound:!0}).filter(n=>n.get("source").port in e).forEach(n=>n._changeSource(n.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(n=>n.get("target").port in e).forEach(n=>n._changeTarget(n.get("target")))},_getBitsText(e){return e>1?e:""},_resetPortValue(e){return rt.xes(e.bits)},_resetPortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)console.assert(r.bits>=0),t[r.dir][r.id]=this._resetPortValue(r);this.set("inputSignals",t.in),this.set("outputSignals",t.out)},_removePortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)delete t[r.dir][r.id];this.set("inputSignals",t.in),this.set("outputSignals",t.out)},addPort(e){this.addPorts([e])},addPorts(e){this._preprocessPorts(e),Ds.prototype.addPorts.apply(this,arguments)},removePort(e,t){this.removePorts([e])},removePorts(e,t){this._removePortsSignals(e),Ds.prototype.removePorts.apply(this,arguments)},_getStackedPosition(e){return function(t,r){const n=e.side||"left",i=e.step||16,s=e.offset||12,o=n=="left"?r.topLeft().x:n=="right"?r.topRight().x:void 0,a=n=="top"?r.topLeft().y:n=="bottom"?r.bottomRight().y:void 0;return o!==void 0?Vn.map(t,function(u,c){return c+=u.idxOffset||0,ge({x:o,y:c*i+s})}):Vn.map(t,function(u,c){return c+=u.idxOffset||0,ge({x:c*i+s,y:a})})}},getLayoutSize(){return this.size()},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(e){return Vn.cloneDeep(Vn.pick(this.attributes,this._gateParams.concat(e?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),Qt=Di.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:Di.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(e){e.stopPropagation()},confirmUpdate(e){this.hasFlag(e,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(e,"SIGNAL2")&&this._updatePortSignals("out"),Di.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(e){const t=e==="in"?this.model.get("inputSignals"):e==="out"?this.model.get("outputSignals"):Vn.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const r in t){const n=t[r],i=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(r,i)}},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},_applyPortAttrs(e,t){if(e in this._portElementsCache)for(const r in t){const n=this._portElementsCache[e].portSelectors[r];this.setNodeAttributes(n,t[r])}},_updatePorts(){Di.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),nW=Zv.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:rt.xes(1),bits:1,warning:!1,z:0},{initialize(){Zv.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const e=this.get("target"),t=this.graph.getCell(e.id);t&&"port"in e&&t._clearInput(e.port),Zv.prototype.remove.apply(this,arguments)},_propagateSignal(e,t){const r=this.getTargetElement();r&&(this.get("warning")?r._clearInput(e.port):r._setInput(t,e.port))},_changeSignal(e){this._propagateSignal(this.get("target"),e)},_changeSource(e){const t=this.getSourceElement();t&&"port"in e?(this.set("bits",t.getPort(e.port).bits),this._checkConnection(),this.set("signal",t.get("outputSignals")[e.port])):this.set("signal",rt.xes(this.get("bits")))},_changeTarget(e){if(this._checkConnection(),"port"in e&&this._propagateSignal(e,this.get("signal")),!this.hasChanged("target"))return;const t=this.previous("target"),r=this.graph.getCell(t.id);r&&"port"in t&&r._clearInput(t.port)},_checkConnection(){const e=this.get("target"),t=this.graph.getCell(e.id);this.set("warning",t&&t.getPort(e.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(e){const t={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(t.name=this.get("netname")),e&&this.has("vertices")&&this.get("vertices").length>0&&(t.vertices=Vn.cloneDeep(this.get("vertices"))),t},getWirePath(){const e=[];for(let t=this.graph.get("subcircuit");t!=null;t=t.graph.get("subcircuit")){if(!t.has("label"))return null;e.push(t.get("label"))}return e.reverse()}}),tye=vs.extend({initFlag:vs.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:typeof window<"u"?new O0e({tools:[new N0e({focusOpacity:.5}),new Q0e,new eye,new aV({distanceShort:"75%",distanceLong:"50"}),new aV({distance:"-50",secondary:!0}),new uV({distanceShort:"25%",distanceLong:"30"}),new uV({distance:"-30",secondary:!0})]}):null,presentationAttributes:vs.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){vs.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(e){vs.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateSignal(),this.hasFlag(e,"BITS")&&this._updateBits(),this.hasFlag(e,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const e=this.model.get("signal"),t=this.attrs.signal[e.isDefined?e.isHigh?"high":e.isLow?"low":"def":"undef"];this._applyAttrs(t)},_updateBits(){const e=this.model.get("bits"),t=this.attrs.bits[e>1?"bus":"single"];this._applyAttrs(t)},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},update(){vs.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){vs.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(e){vs.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:e.clientX+5,y:e.clientY+5})},mouseleave(e){vs.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(e){this.model.get("bits")!=1&&(this.wire_hover||(this.wire_hover=qt('<div class="wire_hover">').css("left",e.x).css("top",e.y).appendTo(qt(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const e=this.model.get("signal"),t=this.model.graph._display3vl,r=["Hex: "+t.show("hex",e)+"<br>","Dec: "+t.show("dec",e)+"<br>","Oct: "+t.show("oct",e)+"<br>","Bin: "+t.show("bin",e)].join("");this.wire_hover.html(r)},onEndModelChange(e,t,r){typeof t=="object"&&t!=null&&t==this.prevModels[e]&&Object.keys(t.changed).length>0&&!("position"in t.changed)||(vs.prototype.onEndModelChange.apply(this,arguments),this.prevModels[e]=t)}}),Gt=Ln.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){Ln.prototype.initialize.apply(this,arguments),this.on("change:size",(e,t)=>{t.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:Ln.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"ð",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(e=>e.join(" ")).join(" L")}),mi=Qt.extend({_autoResizeBox:!1,render(){Qt.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const e=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),t=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),r=Math.max(...e.map(o=>o.getBBox().width)),n=Math.max(...t.map(o=>o.getBBox().width)),i=o=>o==-1/0?-5:o;return i(r)+i(n)+25}}),ks=Gt.define("NumBase",{numbase:"hex",bits:1},{initialize(){Gt.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,t)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:Gt.prototype._gateParams.concat(["numbase"])}),mc=mi.extend({presentationAttributes:mi.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(e){this.model.set("numbase",e.target.value||"bin")},_calculateBoxWidth(){const e=document.createElementNS("http://www.w3.org/2000/svg","text");qt(e).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const t=e.getBBox().width+20;return e.remove(),t},confirmUpdate(e){mi.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"BITS")||this.hasFlag(e,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(e,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const e=this.model.get("numbase"),t=this.model.graph._display3vl;for(const r of t.usableDisplays(this.model.numbaseType,this.model.get("bits")))qt("<option>").attr("value",r).prop("selected",r==e).text(r).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),ha=ks.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:e}],ks.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{const n={};n[this._portDirection]=r,this._setPortsBits(n),this.get("mode")!=0&&this._checkMode()}),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const e=this.graph&&this.graph.has("subcircuit"),t=this.get("bits"),r=e?0:t==1?1:2;return this.set("mode",r),this.set("box_resized",!1),this.set("markup",r==0?this.markupInSubcircuit:r==1?this.markupSingle:this.markupBus),r},_setPortsBits(e){if(ks.prototype._setPortsBits.apply(this,arguments),this.get("mode")!=0)return;const t=this.graph.get("subcircuit");console.assert(t!=null);const r={};r[this.get("net")]=e[this._portDirection],t._setPortsBits(r)},markupSingle:ks.prototype.markup,markupBus:ks.prototype.markup.concat(ks.prototype.markupTooltip),markupInSubcircuit:ks.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:ks.prototype._gateParams.concat(["bits","net","order"])}),Qa=mc.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const e=this.selectors.ioname;return e.getAttribute("display")!=="none"?e.getBBox().width+10:20;case 1:return 30;case 2:return mc.prototype._calculateBoxWidth.call(this)}}}),wp=ha.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(e){if(e.id=="out"&&e.dir=="out"){const t=this.get("bits");return this.get("mode")==1?rt.zeros(t):rt.xes(t)}else return ha.prototype._resetPortValue.call(this,e)},_checkMode(){ha.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(e){this._setInput(e),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(e){if(e.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:e})},markupSingle:ha.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:ha.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),KP=Qa.extend({attrs:Vn.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},Qa.prototype.attrs),confirmUpdate(e){Qa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL2")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry();break}},_updateButton(){const e=this.model.get("outputSignals").out,t=this.attrs.button[e.isHigh?"high":"low"];this._applyAttrs(t)},_updateNumEntry(){const e=this.model.graph._display3vl;this.$("input").val(e.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){Qa.prototype.render.apply(this,arguments),this._updateView()},events:Vn.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},mc.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(e){const t=this.model.get("numbase"),r=this.model.get("bits"),n=this.model.graph._display3vl;if(n.validate(t,e.target.value,r)){const i=n.read(t,e.target.value,r);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),iW=wp,rye=KP,sW=wp,nye=KP,xp=ha.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:ha.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:ha.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),JP=Qa.extend({attrs:Vn.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},Qa.prototype.attrs),confirmUpdate(e){Qa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay();break}},_updateLamp(){const e=this.model.get("inputSignals").in,t=this.attrs.lamp[e.isHigh?"high":e.isLow?"low":"undef"];this._applyAttrs(t)},_updateNumDisplay(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){Qa.prototype.render.apply(this,arguments),this._updateView()}}),oW=xp,iye=JP,aW=xp,sye=JP,uW=ks.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],ks.prototype.initialize.apply(this,arguments),this.on("change:constant",(r,n)=>{const i=n.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",rt.fromBin(n,i))})},prepare(){const e=this.get("constant"),t=e.length;this.set("constantCache",rt.fromBin(e,t))},operation(){return{out:this.get("constantCache")}},markup:ks.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:ks.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),oye=mc.extend({presentationAttributes:mc.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(e){mc.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"CONSTANT")||this.hasFlag(e,"NUMBASE"))&&this._showText()},_showText(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){mc.prototype.update.apply(this,arguments),this._showText()}}),cW=Gt.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue(e){return e.id=="out"&&e.dir=="out"?rt.zero:Gt.prototype._resetPortValue(e)},operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:Gt.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:Gt.prototype._unsupportedPropChanges.concat(["bits"])}),aye=mi.extend({presentationAttributes:mi.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(e){mi.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(e){mi.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this.updatePropagation()},_changePropagation(e){const t=e.target.value,r=String(t)==String(Number(t));r&&this.model.set("propagation",Number(t)||1),this.$("input").toggleClass("invalid",!r)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),cV=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL"];class uye extends wh{constructor(){super("[ -~Â -Ã¿ï¿½â-â¡]|"+cV.join("|"))}get name(){return"ascii"}get sort(){return 1}can(t,r){return r==7||r==8}read(t,r){if(t.length==1){const n=t.charCodeAt(0);return n==65533?rt.xes(r):n==9249?rt.fromHex("7f",r):n>=9216&&n<=9248?rt.fromHex((n-9216).toString(16),r):rt.fromHex(n.toString(16),r)}else{const n=cV.indexOf(t);return n<0?rt.xes(r):n==33?rt.fromHex("7f",r):rt.fromHex(n.toString(16),r)}}show(t){if(!t.isFullyDefined)return"ï¿½";const r=parseInt(t.toHex(),16);return r<=32?String.fromCharCode(9216+r):r==127?"â¡":r>127&&r<160?"ï¿½":String.fromCharCode(r)}size(t){return 1}}function ZP(e,t,r){return'<select name="base">'+e.usableDisplays("read",t).map(i=>'<option value="'+i+'"'+(i==r?' selected="selected"':"")+">"+i+"</option>").join("")+"</select>"}function dA(e,t){for(const r in t)if(!e[r].eq(t[r]))return!1;return!0}const Nm="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",zc="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",lW="M18-2v36l2-1 32-17h0L20-1z",cye="M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z",qm={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:cye}},Wl={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Yu(e=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(e)}}const Za=Ln.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:Ln.prototype.markup.concat([Yu()]),_gateParams:Ln.prototype._gateParams.concat(["bits"])}),QP=Za.define("Gate11",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:e}],Za.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r,out:r})})}}),Xl=Za.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const e=this.get("bits"),t=this.get("inputs"),r=[];for(let i=1;i<=t;i++)r.push({id:"in"+i,group:"in",dir:"in",bits:e});r.push({id:"out",group:"out",dir:"out",bits:e}),this.get("ports").items=r;const n=t/2;this.set("size",{width:60*n,height:32*n}),this.attr("body/transform","translate(-4, 0) scale("+n+")"),this.prop("ports/groups/in/position/args/dx",30*n),this.prop("ports/groups/in/attrs/wire/x2",-30*n-20),this.prop("ports/groups/in/attrs/port/refX",-30*n-20),this.prop("ports/groups/out/position/args/dx",-30*n),this.prop("ports/groups/out/attrs/wire/x2",30*n+20),this.prop("ports/groups/out/attrs/port/refX",30*n+20),Za.prototype.initialize.apply(this,arguments),this.on("change:bits",(i,s)=>{const o=this.get("inputs"),a={out:s};for(let u=1;u<=o;u++)a["in"+u]=s;this._setPortsBits(a)})},operation(e){let t=e.in1;for(let r=2;r<=this.get("inputs");r++)t=this.binoperation(t,e["in"+r]);return{out:this.finoperation(t)}},finoperation(e){return e},_gateParams:Za.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:Za.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:Za.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Oc=Za.define("GateReduce",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:1}],Za.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r})})}}),fW=QP.define("Repeater",{attrs:{gate:{d:lW}}},{operation(e){return{out:e.in}}}),lye=Qt,hW=QP.define("Not",{attrs:{gate:{d:lW}}},{operation(e){return{out:e.in.not()}},markup:Ln.prototype.markup.concat([Yu([Wl])])}),fye=Qt,dW=Xl.define("Or",{attrs:{gate:{d:zc}}},{binoperation(e,t){return e.or(t)}}),hye=Qt,pW=Xl.define("And",{attrs:{gate:{d:Nm}}},{binoperation(e,t){return e.and(t)}}),dye=Qt,vW=Xl.define("Nor",{attrs:{gate:{d:zc}}},{binoperation(e,t){return e.or(t)},finoperation(e){return e.not()},markup:Ln.prototype.markup.concat([Yu([Wl])])}),pye=Qt,gW=Xl.define("Nand",{attrs:{gate:{d:Nm}}},{binoperation(e,t){return e.and(t)},finoperation(e){return e.not()},markup:Ln.prototype.markup.concat([Yu([Wl])])}),vye=Qt,mW=Xl.define("Xor",{attrs:{gate:{d:zc}}},{binoperation(e,t){return e.xor(t)},markup:Ln.prototype.markup.concat([Yu([qm])])}),gye=Qt,yW=Xl.define("Xnor",{attrs:{gate:{d:zc}}},{binoperation(e,t){return e.xor(t)},finoperation(e){return e.not()},markup:Ln.prototype.markup.concat([Yu([qm,Wl])])}),mye=Qt,pA=Oc.define("OrReduce",{attrs:{gate:{d:zc}}},{operation(e){return{out:e.in.reduceOr()}}}),yye=Qt,vA=Oc.define("NorReduce",{attrs:{gate:{d:zc}}},{operation(e){return{out:e.in.reduceNor()}},markup:Oc.prototype.markup.concat([Wl])}),_ye=Qt,_W=Oc.define("AndReduce",{attrs:{gate:{d:Nm}}},{operation(e){return{out:e.in.reduceAnd()}}}),bye=Qt,bW=Oc.define("NandReduce",{attrs:{gate:{d:Nm}}},{operation(e){return{out:e.in.reduceNand()}},markup:Ln.prototype.markup.concat([Yu([Wl])])}),wye=Qt,wW=Oc.define("XorReduce",{attrs:{gate:{d:zc}}},{operation(e){return{out:e.in.reduceXor()}},markup:Ln.prototype.markup.concat([Yu([qm])])}),xye=Qt,xW=Oc.define("XnorReduce",{attrs:{gate:{d:zc}}},{operation(e){return{out:e.in.reduceXnor()}},markup:Ln.prototype.markup.concat([Yu([qm,Wl])])}),Sye=Qt;function gA(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER}const Fi=Ln.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:Ln.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:Ln.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:Ln.prototype._unsupportedPropChanges.concat(["signed"])}),eC=Fi.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],Fi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits");return e.in.isFullyDefined?{out:rt.fromNumber(this.arithop(e.in.toBigInt(this.get("signed"))),t.out)}:{out:rt.xes(t.out)}},_operationHelpers:Fi.prototype._operationHelpers.concat(["arithop"])}),Yl=Fi.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],Fi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:rt.xes(t.out)}:{out:rt.fromNumber(this.arithop(e.in1.toBigInt(r.in1&&r.in2),e.in2.toBigInt(r.in1&&r.in2)),t.out)}},_operationHelpers:Fi.prototype._operationHelpers.concat(["arithop"])});function mA(e,t,r,n,i,s,o){const a=e.get(e.bits-1),u=rt.make(Math.max(0,n-r),o?0:i?a:-1),c=e.concat(u);return(t<0?rt.make(-t,o?0:-1).concat(c):c.slice(t).concat(rt.make(t,o?0:s?c.get(c.bits-1):-1))).slice(0,n)}const tC=Fi.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],Fi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx");if(!e.in2.isFullyDefined)return{out:rt.xes(t.out)};const i=e.in2.toNumber(r.in2)*this.shiftdir;return{out:mA(e.in1,i,t.in1,t.out,r.in1,r.out,n)}},_gateParams:Fi.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:Fi.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:Fi.prototype._operationHelpers.concat(["shiftdir"])}),Fd=Fi.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:1}],Fi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})}}),Sp=Fd.define("Compare",{},{operation(e){this.get("bits");const t=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:rt.xes(1)}:{out:rt.fromBool(this.arithcomp(e.in1.toBigInt(t.in1&&t.in2),e.in2.toBigInt(t.in1&&t.in2)))}},_operationHelpers:Fd.prototype._operationHelpers.concat(["arithcomp"])}),rC=Fd.define("EqCompare",{},{operation(e){const t=this.get("bits"),r=this.get("signed"),n=t.in1>=t.in2?e.in1:e.in1.concat(rt.make(t.in2-t.in1,r.in1&&r.in2?e.in1.msb:-1)),i=t.in2>=t.in1?e.in2:e.in2.concat(rt.make(t.in1-t.in2,r.in1&&r.in2?e.in2.msb:-1));return{out:this.bincomp(n,i)}},_operationHelpers:Fd.prototype._operationHelpers.concat(["bincomp"])}),SW=eC.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:e=>-e}),Eye=Qt,EW=eC.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:e=>e}),Aye=Qt,AW=Yl.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(e,t)=>e+t}),Tye=Qt,TW=Yl.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(e,t)=>e-t}),Pye=Qt,PW=Yl.define("Multiplication",{attrs:{oper:{text:"Ã"}}},{arithop:(e,t)=>e*t}),Cye=Qt,CW=Yl.define("Division",{attrs:{oper:{text:"Ã·"}}},{arithop:(e,t)=>t==0n?e:e/t}),Oye=Qt,OW=Yl.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(e,t)=>t==0n?e:e%t}),Iye=Qt,IW=Yl.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Rye=Qt,RW=tC.define("ShiftLeft",{attrs:{oper:{text:"âª"}}},{shiftdir:-1}),kye=Qt,kW=tC.define("ShiftRight",{attrs:{oper:{text:"â«"}}},{shiftdir:1}),Mye=Qt,MW=Sp.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(e,t)=>e<t}),Lye=Qt,LW=Sp.define("Le",{attrs:{oper:{text:"â¤"}}},{arithcomp:(e,t)=>e<=t}),Nye=Qt,NW=Sp.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(e,t)=>e>t}),qye=Qt,qW=Sp.define("Ge",{attrs:{oper:{text:"â¥"}}},{arithcomp:(e,t)=>e>=t}),Dye=Qt,DW=rC.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(e,t)=>e.xnor(t).reduceAnd()}),Fye=Qt,FW=rC.define("Ne",{attrs:{oper:{text:"â "}}},{bincomp:(e,t)=>e.xor(t).reduceOr()}),Bye=Qt,eu=Fi.define("OpConst",{leftOp:!1,constant:0},{initialize(){Fi.prototype.initialize.apply(this,arguments);let e=this.get("constant");(typeof e=="string"||e instanceof String)&&(e=BigInt(e),gA(e)&&(e=Number(e)),this.set("constant",e));const t=()=>{const n=30+String(this.get("constant")).length*10;this.prop("size",{width:n,height:n}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};t(),this.on("change:bits",(r,n)=>{this._setPortsBits(n)}),this.on("change:constant",()=>t()),this.on("change:leftOp",()=>t())},getGateParams(){const e=Fi.prototype.getGateParams.apply(this,arguments);return typeof e.constant=="bigint"&&(gA(e.constant)?e.constant=Number(e.constant):e.constant=String(e.constant)),e},_gateParams:Fi.prototype._gateParams.concat(["leftOp","constant"])}),Kl=eu.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],eu.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:rt.fromNumber(this.arithop(BigInt(n),e.in.toBigInt(r.in)),t.out)}:{out:rt.fromNumber(this.arithop(e.in.toBigInt(r.in),BigInt(n)),t.out)}:{out:rt.xes(t.out)}},_operationHelpers:eu.prototype._operationHelpers.concat(["arithop"])}),nC=eu.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],eu.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!e.in.isFullyDefined)return{out:rt.xes(t.out)};const s=e.in.toNumber(r.in),o=rt.fromNumber(i);return{out:mA(o,s*this.shiftdir,o.bits,t.out,i<0,r.out,n)}}else return console.assert(gA(i)),{out:mA(e.in,Number(i)*this.shiftdir,t.in,t.out,r.in,r.out,n)}},_gateParams:eu.prototype._gateParams.concat(["fillx"]),_operationHelpers:eu.prototype._operationHelpers.concat(["shiftdir"])}),Bd=eu.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:1}],eu.prototype.initialize.apply(this,arguments)}}),Ep=Bd.define("CompareConst",{},{operation(e){this.get("bits");const t=this.get("signed"),r=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:rt.fromBool(this.arithcomp(BigInt(r),e.in.toBigInt(t.in)))}:{out:rt.fromBool(this.arithcomp(e.in.toBigInt(t.in),BigInt(r)))}:{out:rt.x}},_operationHelpers:Bd.prototype._operationHelpers.concat(["arithcomp"])}),iC=Bd.define("EqCompareConst",{},{operation(e){const t=this.get("bits");this.get("signed");const r=this.get("constant");return this.get("leftOp")?{out:this.bincomp(rt.fromNumber(r,t.in),e.in)}:{out:this.bincomp(e.in,rt.fromNumber(r,t.in))}},_operationHelpers:Bd.prototype._operationHelpers.concat(["bincomp"])}),zye=Kl.define("AdditionConst",{},{operSymbol:"+",arithop:(e,t)=>e+t}),Vye=Qt,$ye=Kl.define("SubtractionConst",{},{operSymbol:"-",arithop:(e,t)=>e-t}),Gye=Qt,Uye=Kl.define("MultiplicationConst",{},{operSymbol:"Ã",arithop:(e,t)=>e*t}),jye=Qt,Hye=Kl.define("DivisionConst",{},{operSymbol:"Ã·",arithop:(e,t)=>t==0n?e:e/t}),Wye=Qt,Xye=Kl.define("ModuloConst",{},{operSymbol:"%",arithop:(e,t)=>t==0n?e:e%t}),Yye=Qt,Kye=Kl.define("PowerConst",{},{operSymbol:"^",arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Jye=Qt,Zye=nC.define("ShiftLeftConst",{},{operSymbol:"âª",shiftdir:-1}),Qye=Qt,e_e=nC.define("ShiftRightConst",{},{operSymbol:"â«",shiftdir:1}),t_e=Qt,r_e=Ep.define("LtConst",{},{operSymbol:"<",arithcomp:(e,t)=>e<t}),n_e=Qt,i_e=Ep.define("LeConst",{},{operSymbol:"â¤",arithcomp:(e,t)=>e<=t}),s_e=Qt,o_e=Ep.define("GtConst",{},{operSymbol:">",arithcomp:(e,t)=>e>t}),a_e=Qt,u_e=Ep.define("GeConst",{},{operSymbol:"â¥",arithcomp:(e,t)=>e>=t}),c_e=Qt,l_e=iC.define("EqConst",{},{operSymbol:"=",bincomp:(e,t)=>e.xnor(t).reduceAnd()}),f_e=Qt,h_e=iC.define("NeConst",{},{operSymbol:"â ",bincomp:(e,t)=>e.xor(t).reduceOr()}),d_e=Qt,sC=Gt.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const e=this.get("extend");console.assert(e.input<=e.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.input},{id:"out",group:"out",dir:"out",bits:e.output}],Gt.prototype.initialize.apply(this,arguments),this.on("change:extend",(t,r)=>{this._setPortsBits({in:r.input,out:r.output})})},operation(e){const t=this.get("extend");return{out:e.in.concat(rt.make(t.output-t.input,this._extBit(e.in)))}},markup:Gt.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:Gt.prototype._gateParams.concat(["extend"]),_operationHelpers:Gt.prototype._operationHelpers.concat(["_extBit"])}),oC=mi.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),BW=sC.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit(e){return-1}}),p_e=oC,zW=sC.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit(e){return e.get(e.bits-1)}}),v_e=oC,VW=Gt.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const e=this.get("slice"),t=e.count==1?e.first:e.first+"-"+(e.first+e.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.total},{id:"out",group:"out",dir:"out",bits:e.count,portlabel:t,labelled:!0}],Gt.prototype.initialize.apply(this,arguments),this.on("change:slice",(r,n)=>{this._setPortsBits({in:n.total,out:n.count})})},operation(e){const t=this.get("slice");return{out:e.in.slice(t.first,t.first+t.count)}},_gateParams:Gt.prototype._gateParams.concat(["slice"])}),g_e=mi.extend({_autoResizeBox:!0}),aC=Gt.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var e=0;const t=[],r=this.get("groups");this.get("size").height=r.length*16+8;for(const[i,s]of r.entries()){const o=e+(s>1?"-"+(e+s-1):"");e+=s,t.push({id:this.group_dir+i,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:o,labelled:!0})}this.set("bits",e);const n=this.group_dir=="out"?"in":"out";t.push({id:n,group:n,dir:n,bits:e}),this.get("ports").items=t,Gt.prototype.initialize.apply(this,arguments)},_gateParams:Gt.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:Gt.prototype._unsupportedPropChanges.concat(["groups"])}),uC=mi.extend({_autoResizeBox:!0}),$W=aC.define("BusGroup",{},{group_dir:"in",operation(e){const t=[];for(const r of this.get("groups").keys())t.push(e["in"+r]);return{out:rt.concat(...t)}}}),m_e=uC,GW=aC.define("BusUngroup",{},{group_dir:"out",operation(e){const t={};let r=0;for(const[n,i]of this.get("groups").entries())t["out"+n]=e.in.slice(r,r+i),r+=i;return t}}),y_e=uC,lV=10,b_e=10,UW=Gt.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const e=this.get("graph");console.assert(e instanceof ma),e.set("subcircuit",this);const t=e.getCells().filter(c=>c instanceof ha),r=t.filter(c=>c instanceof wp),n=t.filter(c=>c instanceof xp);function i(c,l){return c.has("order")||l.has("order")?c.get("order")-l.get("order"):c.get("net").localeCompare(l.get("net"))}r.sort(i),n.sort(i);const o={width:80,height:Math.max(r.length,n.length)*16+8},a=[],u={};for(const[c,l]of r.entries())a.push({id:l.get("net"),group:"in",dir:"in",bits:l.get("bits"),labelled:!0});for(const[c,l]of n.entries())a.push({id:l.get("net"),group:"out",dir:"out",bits:l.get("bits"),labelled:!0});for(const c of t)u[c.get("net")]=c.get("id");this.set("size",o),this.set("circuitIOmap",u),this.get("ports").items=a,this.set("warning",e._warnings>0),Gt.prototype.initialize.apply(this,arguments)},_resetPortValue(e){const t=this.get("circuitIOmap"),r=this.get("graph");return e.dir=="in"?r.getCell(t[e.id]).get("outputSignals").out:e.dir=="out"?r.getCell(t[e.id]).get("inputSignals").in:Gt.prototype._resetPortValue.call(this,e)},getLayoutSize(){const e=this.size();return e.height+=b_e,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+lV})},getPortsPositions(){const e=Gt.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+lV;return t},markup:[{tagName:"rect",selector:"wrapper"}].concat(Gt.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],Gt.prototype.markupZoom),_gateParams:Gt.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:Gt.prototype._unsupportedPropChanges.concat(["celltype"])}),w_e=mi.extend({attrs:Vn.merge({},mi.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:mi.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(e){mi.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"WARNING")&&this._updateWarning()},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},update(){mi.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(e){return e.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),fV=20,x_e=30,yc=Ln.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:Vn.merge({},_g,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const e=this.get("bits"),t=[{id:"sel",group:"in2",dir:"in",bits:e.sel},{id:"out",group:"out",dir:"out",bits:e.in}],r=this.muxInputs(e.sel);this.get("size").height=r.length*16+8;const i="M"+[[2,0],[5,5],[10,-5]].map(o=>o.join(" ")).join(" L");for(const[o,a]of r.entries()){const u={id:"in"+o,group:"in",dir:"in",bits:e.in,decor:i};a&&(u.portlabel=String(a),u.labelled=!0),t.push(u)}this.get("ports").items=t,Ln.prototype.initialize.apply(this,arguments);const s=o=>this.attr(["body","points"],[[0,-5],[o.width,5],[o.width,o.height-5],[0,o.height+5]].map(a=>a.join(",")).join(" "));s(this.get("size")),this.on("change:size",(o,a)=>s(a))},operation(e){const t=this.muxInput(e.sel);return t===void 0?{out:rt.xes(this.get("bits").in)}:{out:e["in"+t]}},getLayoutSize(){const e=this.size();return e.height+=x_e,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+fV})},getPortsPositions(){const e=Ln.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+fV;return t},markup:Ln.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:Ln.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:Ln.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:Ln.prototype._operationHelpers.concat(["muxInput"])}),Dm=Qt.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),Qt.prototype.initialize.apply(this,arguments)},confirmUpdate(e){Qt.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){Qt.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(e){const t=this.model.muxInput(e.sel);for(const r of this.ins.keys())this.$("[port=in"+r+"] path.decor").css("visibility",t==r?"visible":"hidden")}}),jW=yc.define("Mux",{},{muxInputs:e=>Array(1<<e),muxInput:e=>e.isFullyDefined?e.toBigInt().toString():void 0}),S_e=Dm,HW=yc.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:yc.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:e=>Array(e+1),muxInput:e=>{const t=e.toArray();return e.isFullyDefined&&t.filter(r=>r==1).length<=1?String(t.indexOf(1)+1):void 0}}),E_e=Dm,A_e=yc.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const e=this.get("inputs");for(let t=0;t<e.length;t++)typeof e[t]!="bigint"&&(e[t]=BigInt(e[t]));yc.prototype.initialize.apply(this,arguments)},muxInputs(e){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(e){const t=this.get("default_input");if(!e.isFullyDefined)return;const r=this.get("inputs").indexOf(e.toBigInt());return r<0?t?0:void 0:t?r+1:r},_gateParams:yc.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:yc.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),T_e=Dm,WW=Gt.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:Gt.prototype._getStackedPosition({side:"left"})},out:{position:Gt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits");this.get("initial");const t=this.get("polarity")||{},r=[];this.get("no_data")||r.push({id:"in",group:"in",dir:"in",bits:e,portlabel:"D",labelled:!0}),r.push({id:"out",group:"out",dir:"out",bits:e,portlabel:"Q",labelled:!0}),"arst"in t&&!this.get("arst_value")&&this.set("arst_value",Array(e).fill("0").join("")),"srst"in t&&!this.get("srst_value")&&this.set("srst_value",Array(e).fill("0").join(""));let n=1;"aload"in t&&(n+=2,r.push({id:"ain",group:"in",dir:"in",bits:e,portlabel:"AD",labelled:!0}),r.push({id:"aload",group:"in",dir:"in",bits:1,polarity:t.aload,labelled:!0})),"clock"in t&&(n++,r.push({id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Gt.prototype.decorClock,labelled:!0})),"set"in t&&(n++,r.push({id:"set",group:"in",dir:"in",bits:e,polarity:t.set,portlabel:"S",labelled:!0})),"clr"in t&&(n++,r.push({id:"clr",group:"in",dir:"in",bits:e,polarity:t.clr,portlabel:"R",labelled:!0})),"srst"in t&&(n++,r.push({id:"srst",group:"in",dir:"in",bits:1,polarity:t.srst,labelled:!0})),"arst"in t&&(n++,r.push({id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0})),"enable"in t&&(n++,r.push({id:"en",group:"in",dir:"in",bits:1,polarity:t.enable,labelled:!0})),this.get("size").height=n*16+8,this.get("ports").items=r,this.last_clk=0,Gt.prototype.initialize.apply(this,arguments)},_resetPortValue(e){return e.id=="out"&&e.dir=="out"?rt.fromBin(this.get("initial"),e.bits):Gt.prototype._resetPortValue.call(this,e)},operation(e){const t=this.get("polarity"),r=a=>t[a]?1:-1;let n,i,s;const o=a=>({out:i?a.and(s).or(i):a});if("clock"in t&&(n=this.last_clk,this.last_clk=e.clk.get(0)),"arst"in t&&e.arst.get(0)==r("arst"))return{out:rt.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in t&&e.aload.get(0)==r("aload"))return{out:e.ain};if("set"in t&&(i=t.set?e.set:e.set.not(),s=t.set?e.set.not():e.set),"clr"in t){i=i||rt.zeros(this.get("bits"));const a=t.clr?e.clr.not():e.clr;s=s?a.and(s):a}return"enable"in t&&e.en.get(0)!=r("enable")&&this.get("enable_srst")?o(this.get("outputSignals").out):!("clock"in t)||e.clk.get(0)==r("clock")&&n==-r("clock")?"srst"in t&&e.srst.get(0)==r("srst")?o(rt.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in t&&e.en.get(0)!=r("enable")&&!this.get("enable_srst")?o(this.get("outputSignals").out):this.get("no_data")?o(this.get("outputSignals").out):o(e.in):o(this.get("outputSignals").out)},_gateParams:Gt.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:Gt.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),P_e=mi.extend({_autoResizeBox:!0}),XW=Gt.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:Gt.prototype._getStackedPosition({side:"left"})},out:{position:Gt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("abits");this.get("rdports"),this.get("wrports");let r=0,n=0;const i=[],s=[];for(const[o,a]of this._memrdports())i.push({id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0},{id:o+"data",group:"out",dir:"out",bits:e,portlabel:"data",labelled:!0,args:{idxOffset:n}}),r+=1,"srst_polarity"in a&&(r++,n++,i.push({id:o+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(r++,n++,i.push({id:o+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(r++,n++,i.push({id:o+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,n++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Gt.prototype.decorClock,labelled:!0})),s.push(r);for(const[o,a]of this._memwrports())r+=2,i.push({id:o+"data",group:"in",dir:"in",bits:e,portlabel:"data",labelled:!0},{id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0}),"enable_polarity"in a&&(r++,i.push({id:o+"en",group:"in",dir:"in",bits:a.no_bit_enable?1:e,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Gt.prototype.decorClock,labelled:!0})),s.push(r);s.pop(),this.get("size").height=r*16+8,this.get("ports").items=i,Gt.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(o,a)=>{const u=[];for(const c of s)u.push([[0,16*c+4],[a.width,16*c+4]].map(l=>l.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+u.join(" M "))})},_resetPortValue(e){if(e.dir=="out"){const t=/^rd([0-9]+)data$/.exec(e.id),r=t?this.get("rdports")[t[1]]:{};if("init_value"in r)return rt.fromBin(r.init_value,e.bits)}return Gt.prototype._resetPortValue.call(this,e)},prepare(){const e=this.get("bits");var t=this.get("words");const r=this.get("memdata");t||(t=1<<this.get("abits"),this.prop("words",t,{init:!0})),r?this.memdata=kf.fromJSON(e,r):this.memdata=new kf(e,t),console.assert(this.memdata.words==t),this.last_clk={};for(const[n,i]of this._memports())"clock_polarity"in i&&(this.last_clk[n+"clk"]=0)},operation(e){const t=this.get("bits"),r={},n=(m,b)=>m[b+"_polarity"]?1:-1,i=(m,b)=>!("enable_polarity"in b&&!e[m+"en"].toArray().some(y=>y==n(b,"enable"))),s=(m,b)=>{const y=m+"clk";return"clock_polarity"in b?e[y].get(0)==n(b,"clock")&&this.last_clk[y]==-n(b,"clock"):!0},o=m=>m>=0&&m<this.get("words"),a=(m,b)=>{const y=this._calcaddr(e[m+"addr"]);o(y)?r[m+"data"]=this.memdata.get(y):r[m+"data"]=rt.xes(t)},u=(m,b,y,w)=>{if(b.no_bit_enable||!("enable_polarity"in b))return w;const T=b.enable_polarity?e[m+"en"]:e[m+"en"].not();return w.and(T).or(y.and(T.not()))},c=(m,b)=>{a(m);for(const[y,w]of this.get("wrports").entries()){const T="wr"+y,P=(A,I)=>typeof A=="boolean"?A:A[I];"transparent"in b&&P(b.transparent,y)&&s(T,w)&&i(T,w)&&e[m+"addr"]==e[T+"addr"]&&(r[m+"data"]=u(T,w,r[m+"data"],e[T+"data"])),"collision"in b&&P(b.collision,y)&&s(T,w)&&i(T,w)&&e[m+"addr"]==e[T+"addr"]&&(r[m+"data"]=u(T,w,r[m+"data"],rt.xes(t)))}},l=(m,b)=>{const y=this._calcaddr(e[m+"addr"]);if(o(y)){const w=this.memdata.get(y),T=u(m,b,w,e[m+"data"]),P=!w.eq(T);this.memdata.set(y,T),P&&this.trigger("memChange",y,T)}},h=(m,b)=>{e[m+"srst"].get(0)==n(b,"srst")&&(r[m+"data"]="srst_value"in b?rt.fromBin(b.srst_value,t):rt.zeros(t))},v=(m,b)=>{e[m+"arst"].get(0)==n(b,"arst")&&(r[m+"data"]="arst_value"in b?rt.fromBin(b.arst_value,t):rt.zeros(t))},_=(m,b)=>{if("clock_polarity"in b){const y=m+"clk";this.last_clk[y]=e[y].get(0)}};for(const[m,b]of this._memrdports())r[m+"data"]=this.get("outputSignals")[m+"data"],"clock_polarity"in b&&i(m,b)&&s(m,b)&&c(m,b);for(const[m,b]of this._memwrports())i(m,b)&&s(m,b)&&l(m,b);for(const[m,b]of this._memrdports())!("clock_polarity"in b)&&i(m,b)&&a(m);for(const[m,b]of this._memrdports())"srst_polarity"in b&&(i(m,b)||!("enable_srst"in b))&&s(m,b)&&h(m,b),"arst_polarity"in b&&v(m,b);for(const[m,b]of this._memrdports())_(m,b);for(const[m,b]of this._memwrports())_(m,b);return r},_calcaddr(e){return e.isFullyDefined?e.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[e,t]of this.get("rdports").entries())yield["rd"+e,t]},*_memwrports(){for(const[e,t]of this.get("wrports").entries())yield["wr"+e,t]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:Gt.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],Gt.prototype.markupZoom),getGateParams(){const e=Gt.prototype.getGateParams.apply(this,arguments);return e.memdata=this.memdata.toJSON(),e},_gateParams:Gt.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:Gt.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:Gt.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),C_e=mi.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=this.model,r=t.graph._display3vl,n=qt("<div>",{title:"Memory contents: "+t.get("label")}).appendTo("html > body");n.append(qt('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">â</button><button name="next" type="button" class="btn btn-secondary" title="Next page">â</button></div><div class="input-group">'+ZP(r,t.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=t.get("words"),s=t.memdata,o=Math.ceil(t.get("abits")/4),a=8;let u,c=0;const l=()=>n.find("select[name=base]").val(),h=T=>{const P=Math.floor((T-c)/u),A=T-c-P*u;return n.find("table tr:nth-child("+(P+1)+") td:nth-child("+(A+2)+") input")},v=T=>{for(const[P,A]of t._memrdports())h(t._calcaddr(T[P+"addr"])).removeClass("isread");for(const[P,A]of t._memwrports())h(t._calcaddr(T[P+"addr"])).removeClass("iswrite")},_=T=>{for(const[P,A]of t._memrdports())h(t._calcaddr(T[P+"addr"])).addClass("isread");for(const[P,A]of t._memwrports())h(t._calcaddr(T[P+"addr"])).addClass("iswrite")},m=()=>{const T=l();n.find("button[name=prev]").prop("disabled",c<=0),n.find("button[name=next]").prop("disabled",c+a*u>=i);let P=n.find("table tr:first-child");const A=t.memdata;for(let I=0;I<a&&!(c+I*u>=i);I++,P=P.next()){const N=(c+I*u).toString(16);let d=P.find("td:first-child");d.text("0".repeat(o-N.length)+N),d=d.next();for(let C=0;C<u&&!(c+I*u+C>=i);C++,d=d.next())d.find("input").val(r.show(T,A.get(c+I*u+C))).removeClass("invalid")}_(t.get("inputSignals"))},b=()=>{const T=l(),P=r.pattern(T),A=r.size(T,t.get("bits"));u=Math.min(i,16,Math.ceil(32/A)),c=Math.max(0,Math.min(i-a*u,c));const I=n.find("table");I.empty();for(let N=0;N<a&&!(c+N*u>=i);N++){const d=qt("<tr>");qt("<td>").appendTo(d);for(let C=0;C<u&&!(c+N*u+C>=i);C++){const O=qt("<td>");qt('<input type="text">').attr("size",A).attr("maxlength",A).attr("pattern",P).appendTo(O),O.appendTo(d)}d.appendTo(I)}m()};b(),n.find("select[name=base]").on("change",b),n.find("button[name=prev]").on("click",()=>{v(t.get("inputSignals")),c=Math.max(0,c-a*u),m()}),n.find("button[name=next]").on("click",()=>{v(t.get("inputSignals")),c=Math.min(i-a*u,c+a*u),m()}),n.on("change","input",T=>{const P=l(),A=qt(T.target),I=A.closest("td").index()-1,N=A.closest("tr").index(),d=c+N*u+I,C=t.get("bits");if(r.validate(P,T.target.value,C)){const O=r.read(P,T.target.value,C);s.set(d,O),t.trigger("manualMemChange",t,d,O),A.removeClass("invalid")}else A.addClass("invalid")});const y=(T,P)=>{if(T<c||T>c+a*u)return;const A=l(),I=h(T).val(r.show(A,s.get(T))).removeClass("invalid").removeClass("flash");setTimeout(()=>{I.addClass("flash")},10)},w=(T,P)=>{v(t.previous("inputSignals")),_(P)};return t.on("memChange",y),t.on("change:inputSignals",w),this.paper.trigger("open:memorycontent",n,()=>{n.remove(),t.off("memChange",y),t.off("change:inputSignals",w)}),!1}}),YW=Gt.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:3*16+8},ports:{groups:{in:{position:Gt.prototype._getStackedPosition({side:"left"})},out:{position:Gt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("polarity"),r=this.get("init_state"),n=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Gt.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:e.out,labelled:!0}],Gt.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new ma;for(let s=0;s<n;s++){const o=new R0e({stateNo:s,id:"state"+s,isInit:s==r});o.attr("label/text",String(s)),o.resize(100,50),s==r&&o.attr("body/strokeWidth",3),s==i&&o.attr("body/class","current_state"),o.addTo(this.fsmgraph)}for(const[s,o]of this.transitions)for(const a of o){const u=new Zv({id:a.id,ctrlIn:a.ctrlIn,ctrlOut:a.ctrlOut});u.appendLabel({attrs:{text:{text:u.get("ctrlIn").toBin()+"/"+u.get("ctrlOut").toBin()}}}),u.source({id:"state"+s}),u.target({id:"state"+a.stateOut}),u.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(s,o)=>{const a=s.previous("current_state");this.fsmgraph.getCell("state"+a).removeAttr("body/class"),this.fsmgraph.getCell("state"+o).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(s,o)=>{const a=s.previous("next_trans");if(a){const u=this.fsmgraph.getCell(a);u.removeAttr("line/class"),u.removeAttr("line/targetMarker/class")}o&&this.fsmgraph.getCell(o).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const e=this.get("bits");this.transitions=new Map;var t=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+t,stateOut:n.state_out,ctrlIn:rt.fromBin(n.ctrl_in,e.in),ctrlOut:rt.fromBin(n.ctrl_out,e.out)}),t++;var r=this.get("current_state");r===void 0&&(r=this.get("init_state"),this.set("current_state",r)),this.last_clk=0},operation(e){const t=this.get("bits"),r=this.get("polarity"),n=()=>{const a=this.transitions.get(this.get("current_state"))||[];for(const u of a){const c=u.ctrlIn,l=c.xmask();if(e.in.or(l).eq(c.or(l)))return u}},i=()=>{const a=this.transitions.get(this.get("current_state"))||[],u=e.in.xmask(),c=[];for(const h of a){const v=h.ctrlIn,_=v.xmask().or(u);e.in.or(_).eq(v.or(_))&&c.push(h.ctrlOut)}const l=rt.xes(t.out);if(c.length==0)return l;for(;c.length>1;){const h=c.pop(),v=c[0].xnor(h).or(l);c[0]=c[0].and(v).or(l.and(v.xmask()))}return c[0]},s=a=>r[a]?1:-1;if(e.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const a=this.last_clk;if(e.clk.get(0)==s("clock")&&a==-s("clock")){const u=n();this.set("current_state",u?u.stateOut:this.get("init_state"))}}this.last_clk=e.clk.get(0);const o=n();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:i()}},markup:Gt.prototype.markup.concat(Gt.prototype.markupZoom),_gateParams:Gt.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:Gt.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:Gt.prototype._presentationParams.concat(["current_state","next_trans"])}),O_e=mi.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=qt("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),r=qt("<div>").appendTo(t),n=this.model.fsmgraph,i=new XH({el:r,model:n});return n.resetCells(n.getCells()),n.get("laid_out")||(Dd.layout(n,{dagre:Jhe,graphlib:Qhe}),n.set("laid_out",!0)),i.listenTo(n,"change:position",s=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",t,()=>{i.remove(),t.remove()}),!1}}),lc="#03c03c",Tu="#3c3c3c",KW=ha.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:Tu,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:ks.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),I_e=Qa.extend({_autoResizeBox:!1,confirmUpdate(e){mi.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const e=this.model.getOutput(),t={dp:{fill:e.get(7)===1?lc:Tu},a:{fill:e.get(6)===1?lc:Tu},b:{fill:e.get(5)===1?lc:Tu},c:{fill:e.get(4)===1?lc:Tu},d:{fill:e.get(3)===1?lc:Tu},e:{fill:e.get(2)===1?lc:Tu},f:{fill:e.get(1)===1?lc:Tu},g:{fill:e.get(0)===1?lc:Tu}};this._applyAttrs(t)}}),R_e=Object.freeze(Object.defineProperty({__proto__:null,Addition:AW,AdditionConst:zye,AdditionConstView:Vye,AdditionView:Tye,And:pW,AndReduce:_W,AndReduceView:bye,AndView:dye,Arith:Fi,Arith11:eC,Arith21:Yl,ArithConst:Kl,BaseCompare:Fd,BaseCompareConst:Bd,BitExtend:sC,BitExtendView:oC,Box:Gt,BoxView:mi,BusGroup:$W,BusGroupView:m_e,BusRegroup:aC,BusRegroupView:uC,BusSlice:VW,BusSliceView:g_e,BusUngroup:GW,BusUngroupView:y_e,Button:iW,ButtonView:rye,Clock:cW,ClockView:aye,Compare:Sp,CompareConst:Ep,Constant:uW,ConstantView:oye,Dff:WW,DffView:P_e,Display7:KW,Display7View:I_e,Division:CW,DivisionConst:Hye,DivisionConstView:Wye,DivisionView:Oye,Eq:DW,EqCompare:rC,EqCompareConst:iC,EqConst:l_e,EqConstView:f_e,EqView:Fye,FSM:YW,FSMView:O_e,Gate:Ln,Gate11:QP,GateReduce:Oc,GateSVG:Za,GateView:Qt,GateX1:Xl,Ge:qW,GeConst:u_e,GeConstView:c_e,GeView:Dye,GenMux:yc,GenMuxView:Dm,Gt:NW,GtConst:o_e,GtConstView:a_e,GtView:qye,IO:ha,IOView:Qa,Input:wp,InputView:KP,Lamp:oW,LampView:iye,Le:LW,LeConst:i_e,LeConstView:s_e,LeView:Nye,Lt:MW,LtConst:r_e,LtConstView:n_e,LtView:Lye,Memory:XW,MemoryView:C_e,Modulo:OW,ModuloConst:Xye,ModuloConstView:Yye,ModuloView:Iye,Multiplication:PW,MultiplicationConst:Uye,MultiplicationConstView:jye,MultiplicationView:Cye,Mux:jW,Mux1Hot:HW,Mux1HotView:E_e,MuxSparse:A_e,MuxSparseView:T_e,MuxView:S_e,Nand:gW,NandReduce:bW,NandReduceView:wye,NandView:vye,Ne:FW,NeConst:h_e,NeConstView:d_e,NeView:Bye,Negation:SW,NegationView:Eye,Nor:vW,NorReduce:vA,NorReduceView:_ye,NorView:pye,Not:hW,NotView:fye,NumBase:ks,NumBaseView:mc,NumDisplay:aW,NumDisplayView:sye,NumEntry:sW,NumEntryView:nye,OpConst:eu,Or:dW,OrReduce:pA,OrReduceView:yye,OrView:hye,Output:xp,OutputView:JP,Power:IW,PowerConst:Kye,PowerConstView:Jye,PowerView:Rye,Repeater:fW,RepeaterView:lye,Shift:tC,ShiftConst:nC,ShiftLeft:RW,ShiftLeftConst:Zye,ShiftLeftConstView:Qye,ShiftLeftView:kye,ShiftRight:kW,ShiftRightConst:e_e,ShiftRightConstView:t_e,ShiftRightView:Mye,SignExtend:zW,SignExtendView:v_e,Subcircuit:UW,SubcircuitView:w_e,Subtraction:TW,SubtractionConst:$ye,SubtractionConstView:Gye,SubtractionView:Pye,UnaryPlus:EW,UnaryPlusView:Aye,Wire:nW,WireView:tye,Xnor:yW,XnorReduce:xW,XnorReduceView:Sye,XnorView:mye,Xor:mW,XorReduce:wW,XorReduceView:xye,XorView:gye,ZeroExtend:BW,ZeroExtendView:p_e,portGroupAttrs:_g},Symbol.toStringTag,{value:"Module"}));var _2,hV;function k_e(){if(hV)return _2;hV=1;var e=function(r,n){return r<n};function t(r){if(!(this instanceof t))return new t(r);this.array=[],this.size=0,this.compare=r||e}return t.prototype.clone=function(){var r=new t(this.compare);return r.size=this.size,r.array=this.array.slice(0,this.size),r},t.prototype.add=function(r){var n=this.size;this.array[this.size]=r,this.size+=1;for(var i,s;n>0&&(i=n-1>>1,s=this.array[i],!!this.compare(r,s));)this.array[n]=s,n=i;this.array[n]=r},t.prototype.heapify=function(r){this.array=r,this.size=r.length;var n;for(n=this.size>>1;n>=0;n--)this._percolateDown(n)},t.prototype._percolateUp=function(r,n){for(var i=this.array[r],s,o;r>0&&(s=r-1>>1,o=this.array[s],!(!n&&!this.compare(i,o)));)this.array[r]=o,r=s;this.array[r]=i},t.prototype._percolateDown=function(r){for(var n=this.size,i=this.size>>>1,s=this.array[r],o,a,u;r<i&&(o=(r<<1)+1,a=o+1,u=this.array[o],a<n&&this.compare(this.array[a],u)&&(o=a,u=this.array[a]),!!this.compare(u,s));)this.array[r]=u,r=o;this.array[r]=s},t.prototype._removeAt=function(r){if(!(r>this.size-1||r<0))return this._percolateUp(r,!0),this.poll()},t.prototype.remove=function(r){for(var n=0;n<this.size;n++)if(!this.compare(this.array[n],r)&&!this.compare(r,this.array[n]))return this._removeAt(n),!0;return!1},t.prototype.removeOne=function(r){if(typeof r=="function"){for(var n=0;n<this.size;n++)if(r(this.array[n]))return this._removeAt(n)}},t.prototype.removeMany=function(r,n){if(typeof r!="function"||this.size<1)return[];n=n?Math.min(n,this.size):this.size;for(var i=0,s=new Array(n),o=0,a=new Array(this.size);i<n&&!this.isEmpty();){var u=this.poll();r(u)?s[i++]=u:a[o++]=u}s.length=i;for(var c=0;c<o;)this.add(a[c++]);return s},t.prototype.peek=function(){if(this.size!=0)return this.array[0]},t.prototype.poll=function(){if(this.size!=0){var r=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,r}},t.prototype.replaceTop=function(r){if(this.size!=0){var n=this.array[0];return this.array[0]=r,this._percolateDown(0),n}},t.prototype.trim=function(){this.array=this.array.slice(0,this.size)},t.prototype.isEmpty=function(){return this.size===0},t.prototype.forEach=function(r){if(!(this.isEmpty()||typeof r!="function"))for(var n=0,i=this.clone();!i.isEmpty();)r(i.poll(),n++)},t.prototype.kSmallest=function(r){if(this.size==0)return[];r=Math.min(this.size,r);var n=new t(this.compare);const i=Math.min((r>0?Math.pow(2,r-1):0)+1,this.size);n.size=i,n.array=this.array.slice(0,i);for(var s=new Array(r),o=0;o<r;o++)s[o]=n.poll();return s},_2=t,_2}var M_e=k_e();const L_e=ah(M_e);class JW{constructor(t){this._graph=t}_addGate(t,r){r.get("type")=="Subcircuit"&&this._addGraph(r.get("graph"))}_addLink(t,r){}_addGraph(t){this.listenTo(t,"add",r=>{r.isLink()?this._addLink(t,r):this._addGate(t,r)}),this.listenTo(t,"remove",r=>{r.isLink()?this._removeLink(t,r):this._removeGate(t,r)}),this.listenTo(t,"change:source",(r,n)=>{this._changeLinkSource(t,r,n,r.previous("source"))}),this.listenTo(t,"change:target",(r,n)=>{this._changeLinkTarget(t,r,n,r.previous("target"))}),this.listenTo(t,"change:warning",(r,n)=>{this._changeLinkWarning(t,r,n,r.previous("warning"))});for(const r of t.getElements())this._addGate(t,r);for(const r of t.getLinks())this._addLink(t,r)}_removeGate(t,r){}_removeLink(t,r){}_changeLinkSource(t,r,n,i){}_changeLinkTarget(t,r,n,i){}_changeLinkWarning(t,r,n,i){}}Vn.extend(JW.prototype,fi.Events);class N_e extends JW{constructor(t,{cells:r}){super(t),this._queue=new Map,this._pq=new L_e,this._tick=0,this._cells=r,this._monitorChecks=new Map,this._alarms=new Map,this._alarmQueue=new Map,this._addGraph(t)}get hasPendingEvents(){return this._queue.size>0}get tick(){return this._tick}shutdown(){this.stopListening()}_updateSubcircuit(t,r,n={}){r||(r=t.get("inputSignals"));const i=t.get("circuitIOmap");for(const[s,o]of Object.entries(r)){if(n[s]&&o.eq(n[s]))continue;const a=t.get("graph").getCell(i[s]);console.assert(a.isInput),a._setInput(o)}}_addGate(t,r){super._addGate(t,r),this._enqueue(r),r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r)}_addGraph(t){this.listenTo(t,"manualMemChange",r=>{this._enqueue(r)}),this.listenTo(t,"change:constantCache",r=>{this._enqueue(r)}),this.listenTo(t,"change:inputSignals",(r,n)=>{const i=r.previous("inputSignals");if(!dA(n,i)){if(r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r,n,i),r instanceof this._cells.Output&&r.get("mode")==0){const s=r.graph.get("subcircuit");if(s!=!0){console.assert(s!=null);const o=r.get("net"),a=Vn.clone(s.get("outputSignals"));a[o]=r.getOutput(),s.set("outputSignals",a)}}this._enqueue(r)}}),super._addGraph(t)}_enqueue(t){const r=this._tick+t.get("propagation")|0;(()=>{const i=this._queue.get(r);if(i!==void 0)return i;const s=new Map;return this._queue.set(r,s),this._pq.add(r),s})().set(t,t.get("inputSignals"))}updateGatesNext(){const t=this._pq.poll()|0;console.assert(t>=this._tick),this._tick=t;const r=this._queue.get(t);let n=0;for(;r.size;){const[i,s]=r.entries().next().value;if(r.delete(i),i instanceof this._cells.Subcircuit||i instanceof this._cells.Input||i instanceof this._cells.Output||!i.graph)continue;const a=i.operation(s);"_clock_hack"in a&&(delete a._clock_hack,this._enqueue(i)),i.set("outputSignals",a),n++}return this._queue.delete(t),this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,n),Promise.resolve(n)}updateGates(){if(this._pq.peek()==this._tick)return this.updateGatesNext();{const t=this._tick|0;return this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,0),Promise.resolve(0)}}synchronize(){return Promise.resolve()}start(){throw new Error("start() not supported")}startFast(){throw new Error("startFast() not supported")}stop(){return Promise.resolve()}get interval(){throw new Error("interval not supported")}set interval(t){throw new Error("interval not supported")}get running(){return!1}observeGraph(t){}unobserveGraph(t){}monitor(t,r,n,{triggerValues:i,stopOnTrigger:s,oneShot:o}){const a=(u,c)=>{const l=c[r];this._monitorChecks.set(a,{gate:u,sig:l,cb:a,callback:n,triggerValues:i,stopOnTrigger:s,oneShot:o})};return t.on("change:outputSignals",a),i==null&&n(this._tick,t.get("outputSignals")[r]),{gate:t,callback:a}}unmonitor(t){t.gate.off("change:outputSignals",t.callback)}alarm(t,r,{stopOnAlarm:n}){console.assert(t>this._tick);const i=()=>{this.unalarm(i),r()};return this._alarms.set(i,{tick:t,stopOnAlarm:n}),this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(i),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map),i}unalarm(t){const{tick:r}=this._alarms.get(t);this._alarmQueue.get(r).delete(t),this._alarmQueue.get(r).size==0&&this._alarmQueue.delete(r),this._alarms.delete(t)}_checkMonitors(){for(const{gate:t,sig:r,cb:n,callback:i,triggerValues:s,stopOnTrigger:o,oneShot:a}of this._monitorChecks.values()){let u=!0;s!=null&&(u=s.some(c=>r.eq(c))),u&&(a&&t.off("change:outputSignals",n),i(this._tick,r)&&o&&this.stop())}if(this._monitorChecks=new Map,this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:r}=this._alarms.get(t);t()&&r&&this.stop()}this._alarmQueue.delete(this._tick)}}}function q_e(e){const t={$not:hW,$and:pW,$nand:gW,$or:dW,$nor:vW,$xor:mW,$xnor:yW,$reduce_and:_W,$reduce_nand:bW,$reduce_or:pA,$reduce_nor:vA,$reduce_xor:wW,$reduce_xnor:xW,$reduce_bool:pA,$logic_not:vA,$repeater:fW,$shl:RW,$shr:kW,$lt:MW,$le:LW,$eq:DW,$ne:FW,$gt:NW,$ge:qW,$constant:uW,$neg:SW,$pos:EW,$add:AW,$sub:TW,$mul:PW,$div:CW,$mod:OW,$pow:IW,$mux:jW,$pmux:HW,$dff:WW,$mem:XW,$fsm:YW,$clock:cW,$button:iW,$lamp:oW,$numdisplay:aW,$numentry:sW,$input:wp,$output:xp,$busgroup:$W,$busungroup:GW,$busslice:VW,$zeroextend:BW,$signextend:zW,$display7:KW};return e in t?t[e]:UW}class ZW{constructor(t,{cellsNamespace:r={},engine:n=N_e,engineOptions:i={}}={}){this._cells=Object.assign(R_e,r),this._display3vl=new eW,this._display3vl.addDisplay(new uye),this._graph=this._makeGraph(t,t.subcircuits),i.cells=this._cells,this._engine=new n(this._graph,i),this.makeLabelIndex(),this.listenTo(this._engine,"postUpdateGates",(s,o)=>{this.trigger("postUpdateGates",s,o)})}addDisplay(t){this._display3vl.addDisplay(t),this.trigger("display:add",t)}shutdown(){this.trigger("shutdown"),this.stop(),this._engine.shutdown(),this.stopListening()}hasWarnings(){return this._graph._warnings>0}_makeGraph(t,r,n){n=n||{};const i=new ma;i._display3vl=this._display3vl,i._warnings=0,n.nested&&i.set("subcircuit",!0);const s=a=>{i._warnings+=a,console.assert(i._warnings>=0),i._warnings>0&&this.running&&this.stop();const u=i.get("subcircuit");u==null||u==!0||u.set("warning",i._warnings>0)};this.listenTo(i,"userChange",a=>{this.trigger("userChange",a)}),this.listenTo(i,"change:inputSignals",(a,u)=>{dA(u,a.previous("inputSignals"))||a._changeInputSignals&&a._changeInputSignals(u)}),this.listenTo(i,"change:outputSignals",(a,u)=>{dA(u,a.previous("outputSignals"))||a._changeOutputSignals(u)}),this.listenTo(i,"change:signal",(a,u)=>{a._changeSignal(u)}),this.listenTo(i,"change:source",(a,u)=>{this._labelIndex=null,a._changeSource(u)}),this.listenTo(i,"change:target",(a,u)=>{this._labelIndex=null,a._changeTarget(u)}),this.listenTo(i,"change:warning",(a,u)=>{a.previous("warning")!==u&&s(u?1:-1)}),this.listenTo(i,"add",(a,u,c)=>{this._labelIndex=null,a.onAdd&&a.onAdd(),a.get("warning")&&s(1)}),this.listenTo(i,"remove",(a,u,c)=>{this._labelIndex=null,a.get("warning")&&s(-1)});let o=!1;for(const a in t.devices){const u=t.devices[a];u.position&&(o=!0);const c=u.type in this._cells?this._cells[u.type]:q_e(u.celltype),l=Vn.clone(u);l.id=a,c==this._cells.Subcircuit&&(l.graph=this._makeGraph(r[u.celltype],r,{nested:!0}));const h=new c(l);i.addCell(h)}for(const a of t.connectors)i.addCell(new this._cells.Wire({source:{id:a.from.id,port:a.from.port,magnet:"port"},target:{id:a.to.id,port:a.to.port,magnet:"port"},netname:a.name,vertices:a.vertices||[],source_positions:a.source_positions||[]}));return o&&i.set("laid_out",!0),i}updateGatesNext(t){return this._engine.updateGatesNext(t)}updateGates(t){return this._engine.updateGates(t)}synchronize(){return this._engine.synchronize()}get hasPendingEvents(){return this._engine.hasPendingEvents}get tick(){return this._engine.tick}start(){if(!this.hasWarnings())return this._engine.start()}startFast(){if(!this.hasWarnings())return this._engine.startFast()}stop(t){return this._engine.stop(t)}get interval(){return this._engine.interval}set interval(t){this._engine.interval=t}get running(){return this._engine.running}getInputCells(){return this._graph.getElements().filter(t=>t.isInput)}getOutputCells(){return this._graph.getElements().filter(t=>t.isOutput)}setInput(t,r){const n=this._graph.getCell(t);if(n.isInput)n.setInput(r);else throw new Error("Invalid call to setInput")}getOutput(t){const r=this._graph.getCell(t);if(r.isOutput)return r.getOutput();throw new Error("Invalid call to getOutput")}makeLabelIndex(){if(this._labelIndex)return this._labelIndex;const t=r=>{const n={wires:{},devices:{},subcircuits:{},inputs:{},outputs:{},graph:r};for(const i of r.getElements()){if(i.has("net")&&(i.isInput&&(n.inputs[i.get("net")]=i),i.isOutput&&(n.outputs[i.get("net")]=i)),!i.has("label"))continue;const s=i.get("label");n.devices[s]=i,i instanceof this._cells.Subcircuit&&(n.subcircuits[s]=t(i.get("graph")))}for(const i of r.getLinks())i.has("netname")&&(n.wires[i.get("netname")]=i);return n};return this._labelIndex=t(this._graph)}getLabelIndex(t=[]){const r=(n,i)=>{if(n==t.length)return i;{const s=i.subcircuits[t[n]];if(s)return r(n+1,s)}};return r(0,this.makeLabelIndex())}findWireByLabel(t,r=[]){return this.getLabelIndex(r).wires[t]}findDeviceByLabel(t,r=[]){return this.getLabelIndex(r).devices[t]}findInputByNet(t){return this.getLabelIndex([]).inputs[t]}findOutputByNet(t){return this.getLabelIndex([]).outputs[t]}toJSON(t=!0){const r={},n=s=>{const o={devices:{},connectors:[]},a=s.get("laid_out");for(const u of s.getElements()){const c=o.devices[u.get("id")]=u.getGateParams(t);a||delete c.position,u instanceof this._cells.Subcircuit&&!r[u.get("celltype")]&&(r[u.get("celltype")]=n(u.get("graph")))}for(const u of s.getLinks())o.connectors.push(u.getWireParams(t));return o},i=n(this._graph);return i.subcircuits=r,i}waitForWire(t,r){return r instanceof rt&&(r=[r]),new Promise(n=>{this.monitorWire(t,(i,s)=>{n(i)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:r})})}waitFor(t,r,n){return n instanceof rt&&(n=[n]),new Promise(i=>{this.monitor(t,r,(s,o)=>{i(s)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:n})})}monitorWire(t,r,n={}){const i=t.get("source"),s=t.getSourceElement();return s==null?null:this.monitor(s,i.port,r,n)}monitor(t,r,n,i={}){return this._engine.monitor(t,r,n,i)}unmonitor(t){this._engine.unmonitor(t)}observeGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}unobserveGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}alarm(t,r,n={}){return this._engine.alarm(t,r,n)}unalarm(t){this._engine.unalarm(t)}}Vn.extend(ZW.prototype,fi.Events);class D_e{constructor(t,r=[]){this._bits=t,this._data=r,r.length==0?this._present=-1:this._present=this._data[this._data.length-1][0]}get bits(){return this._bits}updatePresent(t){this._present=Math.max(this._present,t)}push(t,r){if(console.assert(r.bits==this._bits&&t>=this._present),this._present=t,this._data.length>0){const[n,i]=this._data[this._data.length-1];if(i.eq(r))return;if(console.assert(t>=n),t==n){this._data[this._data.length-1][1]=r;return}}this._data.push([t,r])}getRange(t,r){if(this._data.length==0)return[];const n=a=>{let u=0,c=this._data.length;for(;c>u;){const l=u+c>>1,h=this._data[l][0];if(a==h)return l;a<h?c=l:u=l+1}return u==this._data.length?u-1:u};let i=n(t),s=n(t+r);i>0&&this._data[i][0]>t&&i--,s<this._data.length-1&&this._data[s][0]<t+r&&s++;const o=this._data.slice(i,s+1).map(a=>[a[0],a[1]]);return o[o.length-1][0]<t+r&&this._present>o[o.length-1][0]&&o.push([this._present,o[o.length-1][1]]),o}}const QW={start:0,pixelsPerTick:10,bitColors:["#fc7c68","#999","#03c03c","#779ecb"],gapScale:.2,heightFill:.8,base:"hex",gridWidth:.5,gridColor:"gray",gridStep:1,gridMinDist:10,font:"10px sans-serif",textColor:"black"};Object.freeze(QW);function dV(e,t){var r={};for(const[i,s]of Object.entries(t))r[i]={value:s,writable:!0};return Object.create(e,r)}function eX(e){let t=e.gridStep;for(;t*e.pixelsPerTick<e.gridMinDist;)10*t*e.pixelsPerTick<e.gridMinDist?t*=10:2*t*e.pixelsPerTick>=e.gridMinDist?t*=2:5*t*e.pixelsPerTick>=e.gridMinDist?t*=5:t*=10;return t}function F_e(e,t,r,n=new eW){t.clearRect(0,0,t.canvas.width,t.canvas.height);const i=t.canvas.width/r.pixelsPerTick;"present"in r&&e.updatePresent(r.present);const s=e.getRange(r.start,Math.ceil(i)),o=s.map((y,w)=>[y,s[w+1]]);o.pop();const a=y=>(Math.max(Math.min(y,r.start+i),r.start)-r.start)*r.pixelsPerTick,u=.5*t.canvas.height,c=(.5-r.heightFill/2)*t.canvas.height,l=(.5+r.heightFill/2)*t.canvas.height,h=y=>[l,u,c][y+1],v=y=>r.bitColors[y+1],_=y=>r.bitColors[y.isDefined?y.isLow?0:y.isHigh?2:3:1],m=t.createLinearGradient(0,l,0,c);m.addColorStop(0,r.bitColors[0]),m.addColorStop(.5,r.bitColors[1]),m.addColorStop(1,r.bitColors[2]),t.lineWidth=r.gridWidth;const b=eX(r);for(let y=r.start-r.start%b;y<r.start+i;y+=b){const w=a(y);t.beginPath(),t.strokeStyle=r.gridColor,t.moveTo(w,0),t.lineTo(w,t.canvas.height),t.stroke()}t.lineWidth=2;for(const[[y,w],[T,P]]of o){const A=a(y),I=a(T);if(e.bits==1){const N=w.get(0),d=P.get(0),C=h(N),O=h(d),k=v(N);v(d);const F=Math.min(Math.abs(C-O)*r.gapScale,r.pixelsPerTick/2);t.beginPath(),t.strokeStyle=m,t.moveTo(I-F,C),t.lineTo(I,O),t.stroke(),t.beginPath(),t.strokeStyle=k,t.moveTo(A,C),t.lineTo(I-F,C),t.stroke()}else{const N=Math.min(Math.abs(c-l)*r.gapScale,r.pixelsPerTick/2),d=_(w),C=_(P),O=w.isDefined,k=P.isDefined;if(O){t.textAlign="center",t.textBaseline="middle",t.font=r.font,t.fillStyle=r.textColor;const F=n.show(r.base,w);t.measureText(F).width<(I-A-N)*2&&t.fillText(F,(A+I-N)/2,t.canvas.height/2,I-A-N)}!O&&!k?(t.beginPath(),t.strokeStyle=d,t.moveTo(A,u),t.lineTo(I,u),t.stroke()):w.eq(P)?(t.strokeStyle=C,t.beginPath(),t.moveTo(A,c),t.lineTo(I,c),t.stroke(),t.beginPath(),t.moveTo(A,l),t.lineTo(I,l),t.stroke()):(t.strokeStyle=C,k?(t.beginPath(),t.moveTo(I,c),t.lineTo(I-N/2,u),t.lineTo(I,l),t.stroke()):(t.beginPath(),t.moveTo(I,u),t.lineTo(I-N/2,u),t.stroke()),t.strokeStyle=d,O?(t.beginPath(),t.moveTo(A,c),t.lineTo(I-N,c),t.lineTo(I-N/2,u),t.lineTo(I-N,l),t.lineTo(A,l),t.stroke()):(t.beginPath(),t.moveTo(A,u),t.lineTo(I-N/2,u),t.stroke()))}}}var tX=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];r.call(n,o[1],o[0])}},t}()}(),yA=typeof window<"u"&&typeof document<"u"&&window.document===document,bg=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),B_e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(bg):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),z_e=2;function V_e(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&a()}function o(){B_e(s)}function a(){var u=Date.now();if(r){if(u-i<z_e)return;n=!0}else r=!0,n=!1,setTimeout(o,t);i=u}return a}var $_e=20,G_e=["top","right","bottom","left","width","height","size","weight"],U_e=typeof MutationObserver<"u",j_e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=V_e(this.refresh.bind(this),$_e)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!yA||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),U_e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!yA||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=G_e.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),rX=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Qf=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||bg},nX=Fm(0,0,0,0);function wg(e){return parseFloat(e)||0}function pV(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var s=e["border-"+i+"-width"];return n+wg(s)},0)}function H_e(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var s=i[n],o=e["padding-"+s];r[s]=wg(o)}return r}function W_e(e){var t=e.getBBox();return Fm(0,0,t.width,t.height)}function X_e(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return nX;var n=Qf(e).getComputedStyle(e),i=H_e(n),s=i.left+i.right,o=i.top+i.bottom,a=wg(n.width),u=wg(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==t&&(a-=pV(n,"left","right")+s),Math.round(u+o)!==r&&(u-=pV(n,"top","bottom")+o)),!K_e(e)){var c=Math.round(a+s)-t,l=Math.round(u+o)-r;Math.abs(c)!==1&&(a-=c),Math.abs(l)!==1&&(u-=l)}return Fm(i.left,i.top,a,u)}var Y_e=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Qf(e).SVGGraphicsElement}:function(e){return e instanceof Qf(e).SVGElement&&typeof e.getBBox=="function"}}();function K_e(e){return e===Qf(e).document.documentElement}function J_e(e){return yA?Y_e(e)?W_e(e):X_e(e):nX}function Z_e(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return rX(o,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),o}function Fm(e,t,r,n){return{x:e,y:t,width:r,height:n}}var Q_e=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Fm(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=J_e(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),ebe=function(){function e(t,r){var n=Z_e(r);rX(this,{target:t,contentRect:n})}return e}(),tbe=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new tX,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Qf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new Q_e(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Qf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new ebe(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),iX=typeof WeakMap<"u"?new WeakMap:new tX,sX=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=j_e.getInstance(),n=new tbe(t,r,this);iX.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){sX.prototype[e]=function(){var t;return(t=iX.get(this))[e].apply(t,arguments)}});var rbe=function(){return typeof bg.ResizeObserver<"u"?bg.ResizeObserver:sX}();function Mf(e){const t=[e.cid];for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))t.push(r.cid);return t.reverse(),t.join(".")}function nbe(e){const t=[];if(e.has("netname"))t.push(e.get("netname"));else{const r=e.source();t.push(r.port);const n=e.graph.getCell(r.id);n.has("label")?t.push(n.get("label")):t.push(r.id)}for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))r.has("label")?t.push(r.get("label")):t.push(r.id);return t.reverse(),t.join(".")}class ibe{constructor(t){this._circuit=t,this._wires=new Map,this.listenTo(this._circuit,"new:paper",r=>this.attachTo(r))}attachTo(t){this.listenTo(t,"link:monitor",r=>{this.addWire(r.model)})}addWire(t){const r=Mf(t);if(this._wires.has(r))return;const n=new D_e(t.get("bits")),i={wire:t,waveform:n,monitorId:void 0};this._wires.set(r,i),this.trigger("add",t),i.monitorId=this._circuit.monitorWire(t,(s,o)=>{this._handleChange(s,t,o)})}removeWire(t){typeof t=="string"&&(t=this._wires.get(t).wire),this.trigger("remove",t);const r=Mf(t);this._circuit.unmonitor(this._wires.get(r).monitorId),this._wires.delete(r)}getWires(){const t=[];for(const r of this._wires.values())t.push(r.wire);return t}getWiresDesc(){return this.getWires().map(t=>{if(t.has("netname"))return{name:t.get("netname"),path:t.getWirePath(),bits:t.get("bits")}}).filter(t=>t!==void 0)}loadWiresDesc(t){for(const r of t){const n=this._circuit.findWireByLabel(r.name,r.path);n&&n.get("bits")==r.bits&&this.addWire(n)}}_handleChange(t,r,n){this._wires.get(Mf(r)).waveform.push(t,n),this.trigger("change",r,n)}}Vn.extend(ibe.prototype,fi.Events);class Nwe extends fi.View{initialize(t){this._width=800,this._settings=dV(QW,{start:0,pixelsPerTick:5,gridStep:1}),this._settingsFor=new Map,this._live=!0,this._autoredraw=!1,this._idle=null,this._removeButtonMarkup=t.removeButtonMarkup||'<button type="button" name="remove">â</button>',this._baseSelectorMarkup=t.baseSelectorMarkup||ZP,this._bitTriggerMarkup=t.bitTriggerMarkup||'<select name="trigger" title="Trigger"><option value="none"></option><option value="rising">â</option><option value="falling">â</option><option value="risefall">â</option><option value="undef">x</option></select>',this._busTriggerMarkup=t.busTriggerMarkup||'<input type="text" name="trigger" title="Trigger" placeholder="trigger" pattern="[0-9a-fx]*">',this.listenTo(this.model,"add",this._handleAdd),this.listenTo(this.model,"remove",this._handleRemove),this.listenTo(this.model._circuit,"display:add",()=>{this.render()}),this.listenTo(this.model._circuit,"postUpdateGates",l=>{this._live&&(this.start=l-this._width/this._settings.pixelsPerTick),this._settings.present=l,this._idle||(this._idle=requestIdleCallback(()=>{this._drawAll(),this._idle=null},{timeout:100}))}),this.render(),this._resizeObserver=new rbe(()=>{this._canvasResize()}),this._resizeObserver.observe(this.el);function r(l){return qt(l.target).closest("tr").attr("wireid")}const n=this.model._circuit._display3vl;this.$el.on("click","button[name=remove]",l=>{this.model.removeWire(r(l))}),this.$el.on("input","select[name=base]",l=>{const h=l.target.value,v=this._settingsFor.get(r(l));v.base=h;const m=qt(l.target).closest("tr").find("input[name=trigger]");m.attr("pattern",n.pattern(h)),v.trigger.length&&m.val(n.show(h,v.trigger[0])),this.trigger("change")});const i=()=>!0,s=(l,h)=>{const v=this._settingsFor.get(l);if(v.triggerId&&(this.model._circuit.unmonitor(v.triggerId),v.triggerId=null),h.length>0){const _=this.model._wires.get(l).wire;v.triggerId=this.model._circuit.monitorWire(_,i,{triggerValues:h,stopOnTrigger:!0})}v.trigger=h};this.$el.on("input","select[name=trigger]",l=>{const h=r(l);switch(l.target.value){case"rising":s(h,[rt.one]);break;case"falling":s(h,[rt.zero]);break;case"risefall":s(h,[rt.one,rt.zero]);break;case"undef":s(h,[rt.x]);break;default:s(h,[])}}),this.$el.on("change","input[name=trigger]",l=>{const h=r(l),_=this._settingsFor.get(h).base,m=this.model._wires.get(h).waveform.bits;if(l.target.value=="")s(h,[]);else if(n.validate(_,l.target.value,m)){const b=n.read(_,l.target.value,m);s(h,[b]),l.target.value=n.show(_,b)}else s(h,[])}),this.listenTo(this,"change",()=>{this._autoredraw&&this._drawAll()});const o=new Image(0,0);o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let a,u;const c=l=>{const h=l.originalEvent.screenX-a;this.start=u-h/this._settings.pixelsPerTick};this.$el.on("dragstart","canvas",l=>{const h=l.originalEvent.dataTransfer;h.setData("text/plain","dragging"),h.setDragImage(o,0,0),a=l.originalEvent.screenX,u=this._settings.start,this.live=!1,qt(document).on("dragover",c)}),this.$el.on("dragend","canvas",l=>{qt(document).off("dragover",c)}),this.$el.on("wheel","canvas",l=>{l.preventDefault();const h=2**Math.sign(l.originalEvent.deltaY);this.start+=l.originalEvent.offsetX/this._settings.pixelsPerTick*(1-1/h),this.pixelsPerTick*=h})}render(){this.$el.html('<table class="monitor"></table>');for(const t of this.model._wires.values())this.$("table").append(this._handleAdd(t.wire));return this._canvasResize(),this}shutdown(){this.$el.off(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.stopListening()}get gridStep(){return eX(this._settings)}get autoredraw(){return this._autoredraw}set autoredraw(t){this._autoredraw=t,t&&this._drawAll()}get width(){return this._width}get live(){return this._live}set live(t){this.live!=t&&(this._live=t,this.trigger("change:live",t),this.trigger("change"))}get start(){return this._settings.start}set start(t){this._settings.start!=t&&(this._settings.start=t,this.trigger("change:start",t),this.trigger("change"))}get pixelsPerTick(){return this._settings.pixelsPerTick}set pixelsPerTick(t){this._settings.pixelsPerTick!=t&&(this._settings.pixelsPerTick=t,this.trigger("change:pixelsPerTick",t),this.trigger("change"))}_canvasResize(){this._width=Math.max(this.$el.width()-300,100),this.$("canvas").attr("width",this._width),this.trigger("change:width",this._width),this.trigger("change")}_drawAll(){for(const t of this.model._wires.keys())this._draw(t)}_draw(t){const r=this.model._circuit._display3vl,n=this.$('tr[wireid="'+t+'"]').find("canvas"),i=this.model._wires.get(t).waveform;F_e(i,n[0].getContext("2d"),this._settingsFor.get(t),r)}_handleAdd(t){const r=Mf(t);this._settingsFor.set(r,dV(this._settings,{base:"hex",trigger:[],triggerId:null})),this.$("table").append(this._createRow(t))}_handleRemove(t){const r=Mf(t);this.$('tr[wireid="'+r+'"]').remove();const n=this._settingsFor.get(r);n.triggerId&&this.model._circuit.unmonitor(n.triggerId),this._settingsFor.delete(r)}_createRow(t){const r=Mf(t),n=this._settingsFor.get(r),i=this.model._circuit._display3vl,s=t.get("bits")>1?this._baseSelectorMarkup instanceof Function?this._baseSelectorMarkup(i,t.get("bits"),n.base):this._baseSelectorMarkup:"",o=t.get("bits")>1?this._busTriggerMarkup:this._bitTriggerMarkup,a=qt('<tr><td class="name"></td><td>'+s+"</td><td>"+o+"</td><td>"+this._removeButtonMarkup+'</td><td><canvas class="wavecanvas" height="30" draggable="true"></canvas></td></tr>');return a.attr("wireid",r),a.children("td").first().text(nbe(t)),a}}let sbe=0;class qwe extends fi.View{initialize(t){this._idnum=sbe++,this._inputPanelMarkup=t.inputPanelMarkup||'<div data-iopanel="input"></div>',this._outputPanelMarkup=t.outputPanelMarkup||'<div data-iopanel="output"></div>',this._baseSelectorMarkup=t.baseSelectorMarkup||ZP,this._labelMarkup=t.labelMarkup||"<label></label>",this._buttonMarkup=t.buttonMarkup||'<input type="checkbox">',this._lampMarkup=t.lampMarkup||'<input type="checkbox">',this._rowMarkup=t.rowMarkup||"<div></div>",this._colMarkup=t.colMarkup||"<div></div>",this._inputMarkup=t.inputMarkup||'<input type="text">',this.render(),this.listenTo(this.model._graph,"add",this._handleAdd),this.listenTo(this.model._graph,"remove",this._handleRemove),this.listenTo(this.model,"display:add",()=>{this.render()})}render(){this.$el.html('<form onsubmit="return false">'+this._inputPanelMarkup+this._outputPanelMarkup+"</form>");for(const t of this.model.getInputCells())this._handleAddInput(t);for(const t of this.model.getOutputCells())this._handleAddOutput(t)}shutdown(){this.$el.off(),this.stopListening()}_id(t){return"iopanel-"+t+"-"+this._idnum}_handleAdd(t){t.isInput?this._handleAddInput(t):t.isOutput&&this._handleAddOutput(t)}_addLabel(t,r){return qt(this._labelMarkup).appendTo(t).find("label").addBack("label").text(r.get("net")||r.get("label"))}_addLabelFor(t,r){return this._addLabel(t,r).attr("for",this._id(r.id))}_handleAddInput(t){const r=this.model._display3vl,n=qt(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabelFor(n,t);const i=qt(this._colMarkup).appendTo(n);if(t.get("mode")==1){const o=qt(this._buttonMarkup).appendTo(i).find("input").addBack("input").attr("id",this._id(t.id)).on("click",u=>{t.setInput(rt.fromBool(u.target.checked))}),a=(u,c)=>{o.prop("checked",c.out.isHigh)};this.listenTo(t,"change:outputSignals",a),a(t,t.get("outputSignals"))}else{const s=qt(this._inputMarkup).appendTo(i);let o="hex";qt(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);let a=r.size(o,t.get("bits"));const u=t.get("bits"),c=s.find("input").addBack("input").prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)).on("change",h=>{r.validate(o,h.target.value,u)&&t.setInput(r.read(o,h.target.value,u))}),l=(h,v)=>{s.val(r.show(o,v.out))};this.listenTo(t,"change:outputSignals",l),l(t,t.get("outputSignals")),n.on("input","select[name=base]",h=>{o=h.target.value,a=r.size(o,t.get("bits")),c.prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)),l(t,t.get("outputSignals"))})}}_handleAddOutput(t){const r=this.model._display3vl,n=qt(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabel(n,t);const i=qt(this._colMarkup).appendTo(n);if(t.get("bits")==1){const o=qt(this._lampMarkup).appendTo(i).find("input").addBack("input").prop("disabled",!0),a=(u,c)=>{const l=u.getOutput();o.prop("checked",l.isHigh),o.prop("indeterminate",!l.isDefined)};this.listenTo(t,"change:inputSignals",a),a(t,t.get("inputSignals"))}else{const s=qt(this._inputMarkup).appendTo(i);let o="hex";qt(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);const a=r.size(o,t.get("bits")),u=s.find("input").addBack("input").prop("disabled",!0).prop("size",a),c=(l,h)=>{const v=l.getOutput();s.val(r.show(o,v))};this.listenTo(t,"change:inputSignals",c),c(t,t.get("inputSignals")),n.on("input","select[name=base]",l=>{o=l.target.value,u.prop("size",r.size(o,t.get("bits"))),c(t,t.get("inputSignals"))})}}_handleRemove(t){this.stopListening(t)}}XH.sorting.APPROX,new nW;function oX(e){let t=new Array;return Object.keys(e).forEach(r=>{const[n,i,s]=r.split("_");e[r].forEach(([o,a])=>{const u={from:{id:`${i}_${s}`,port:n},name:`${r}-${a}`,to:{id:o,port:a.split("_")[0]}};t.push(u)})}),t}function obe(e){e.devices=e.devices;var t=[],r=[];Object.keys(e.devices).forEach(s=>{var o=e.devices[s];o.type=="Button"||o.type=="Clock"?(o.type="Input",t.push(o)):o.type=="Lamp"&&(o.type="Output",r.push(o))}),t.sort((s,o)=>s.position&&o.position?s.position.y-o.position.y:0),t.forEach((s,o)=>{s.net=`in${o+1}`}),r.sort((s,o)=>s.position&&o.position?s.position.y-o.position.y:0),r.forEach((s,o)=>{s.net=`out${o+1}`});let{devices:n,connections:i}=uX(e.devices,e.connectors);return{devices:n,connectors:oX(i),subcircuits:e.subcircuits}}function aX(e,t){let r=t||{};return e.forEach(n=>{var s;const i=(s=ln.getCircuit(n))==null?void 0:s.circuit;i?(r[n]=obe(JSON.parse(JSON.stringify(i))),aX(r[n].subcircuits,r)):alert(`Subcircuit not found: ${n}`)}),r}function uX(e,t){let r={},n={};return Object.keys(e).forEach(i=>{if(e[i].type=="TunnelInput"){let s=e[i].celltype;e[i].type="Repeater";let o=e[i];s in r&&alert("Multiple tunnel inputs with same name"),r[s]=o}}),Object.keys(e).forEach(i=>{if(e[i].type=="TunnelOutput"){let s=e[i].celltype;e[i].type="Repeater";let o=e[i];s in n?n[s].push(o):n[s]=[o]}}),Object.keys(r).forEach(i=>{t[`out_${r[i].label}`]=[],i in n&&n[i].forEach(s=>{t[`out_${r[i].label}`].push([s.label,`in_${s.label}`])})}),{devices:e,connections:t}}class cX extends ZW{constructor(t,r){const{devices:n,connections:i}=uX(structuredClone(t.devices),structuredClone(t.connectors)),s=oX(i),o=aX(t.subcircuits),a={devices:n,connectors:s,subcircuits:o};console.log("COMPILED CIRCUIT:",a),super(a,r),console.log("CustomHeadlessCircuit Initialized")}}let abe=ou.ones(1),ube=ou.zeros(1),ns=Ve(null),Sd=fn(!1);const zi=()=>E(Sd);let eh=fn(0);const cbe=()=>E(eh);let lX=Ve(0);Object.defineProperty(cX.prototype,"running",{get(){return!1}});function lbe(e){E(Sd)?(console.log("Simulation Stopped"),ns.set(null),pe(eh,0),pe(Sd,!1)):(console.log("Simulation Started"),pe(Sd,!0),Qe(ns)===null&&(console.log(Qe(vn)),ns.set(new cX(Qe(vn)))),fX(e))}function fX(e){if(E(Sd)===!1)return;const t=Qe(ns);if(t===null){console.log("impossible");return}t.updateGates(),pe(eh,t.tick,!0),lX.set(E(eh)),setTimeout(()=>fX(e),e)}function fbe(e,t){let r=e==null?void 0:e.findWireByLabel(t);return r||(console.warn("Wire not created yet on headless circuit creation or update"),null)}function hbe(e){let t;return e.attributes.signal?(e.attributes.signal._avec[0]==e.attributes.signal._bvec[0]?t=e.attributes.signal._avec[0]:t=-1,t):-1}function dbe(){if(ns==null){console.log("Circuit is null");return}const e=Qe(ns);if(e===null){console.log("impossible");return}e.updateGates(),pe(eh,e.tick,!0)}function pbe(){if(ns==null){console.log("Circuit is null");return}const e=Qe(ns);if(e===null){console.log("impossible");return}e.updateGatesNext(),pe(eh,e.tick,!0)}function hX(e){let t;if(ns==null){console.log("Circuit is null");return}const r=Qe(ns);if(r===null){console.log("impossible");return}t=r.getLabelIndex().devices[e].attributes.outputSignals.out._avec[0],t==1?r.setInput(e,ube):r.setInput(e,abe)}function cC(e){return[...e].find(r=>/^(in\d+|in_|out_|sel_)/.test(r))||null}function vbe(e,t){const r=(u,c)=>u.startsWith(c),n=u=>r(u,"in")||r(u,"sel"),i=u=>r(u,"out"),s=u=>({isInput:n(u),isOutput:i(u)}),{a1:o,a2:a}={a1:s(e),a2:s(t)};return o.isInput&&a.isOutput?"good_in_to_out":a.isInput&&o.isOutput?"good_out_to_in":o.isInput&&a.isInput?"bad_dual_input":"bad_dual_output"}function gbe(e,t){const[r,,]=e.split("_"),n=r.startsWith("out")&&e||t,i=r.startsWith("in")?e:t;return{fromOutputId:n,toInputId:i}}function mbe(e,t){const r=(s,o)=>s+"-"+o,{fromOutputId:n,toInputId:i}=gbe(e,t);return vn.addConnection(n,i),r(n,i)}function ybe(e,t){const r=cC(e);if(r===null)return"bad_invalid_drop";const n=[...e].find(o=>o==="linked"),i=vbe(t,r);if(i.startsWith("bad"))return i;const s=o=>o.startsWith("in");return n&&s(r)?"bad_input_already_linked":n&&!s(t)?"good_output_multi_wires":`${i}-${r}`}function vV(e,t,r=Cwe){const n=ybe(t,e);if(n.startsWith("bad"))return n;const i=cC(t),s=mbe(e,i);return r(s),s}function _be(e,t,r){const n="."+e+"_"+t,i=document.querySelector(`${n}`);if(console.assert(i!==null,"could not find Anchor class when setting anchor colors while running"),i===null)return;const s=(h,v)=>h.classList.contains(v),o=h=>s(h,"on"),a=h=>s(h,"off"),u=h=>[a(h),o(h)],[c,l]=u(i);r===1&&c?(i.classList.remove("off"),i.classList.add("on")):r===0&&l?(i.classList.remove("on"),i.classList.add("off")):r===-1?(i.classList.remove("on"),i.classList.remove("off")):!c&&!l&&i.classList.add(r===1?"on":"off")}function Bm(e){return console.assert(e!==null,"A wire was mounted with an empty edgeWrapper binding, maybe it hasn't loaded yet"),e==null?void 0:e.parentElement}function bbe(e){var r;const t=Bm(e);return console.assert(t,"edge Wrapper is not null but edgeWrapper binding has no parentElement"),((r=e==null?void 0:e.parentElement)==null?void 0:r.childNodes)??null}const wbe=e=>{const t=e.indexOf("-")+1,r=e.indexOf("/");return e.substring(t,r)};function dX(e){const t=bbe(e);return t&&Array.from(t).find(n=>n.role==="presentation")||null}function pX(e,t){var i;const r=(i=dX(e))==null?void 0:i.getAttribute("id");if(!r)throw new Error("No ID found on the edgeNode");return[t+"-"+wbe(r),r]}const xbe="http://www.w3.org/2000/svg",zm=[".handle1",".handle2",".end_point1",".end_point2","#controlPoint1","#controlPoint2"],Gi=zm.map(e=>e.substring(1));function th(e,t){const r=document.createElementNS(xbe,e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.setAttribute(n,t[n]);return r}function gV(e,t,r,n="control-line"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(t==null?void 0:t.x)||isNaN(t==null?void 0:t.y)?(console.error("Invalid coordinates provided to createHandleLine:",e,t),th("line",{class:r+" "+n,x1:"0",y1:"0",x2:"0",y2:"0"})):th("line",{class:r+" "+n,x1:e.x.toString(),y1:e.y.toString(),x2:t.x.toString(),y2:t.y.toString()})}function mV(e,t,r=6,n="end-point"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r)?(console.error("Invalid parameters provided to createEndPointCircle:",e,r),th("circle",{class:t+" "+n,cx:"0",cy:"0",r:"6"})):th("circle",{class:t+" "+n,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()})}function yV(e,t,r=10,n="control-point"){if(isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r))return console.error("Invalid parameters provided to createControlPointCircle:",e,r),th("circle",{class:n,cx:"0",cy:"0",r:"6"});const i=th("circle",{class:n,id:t,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()});return i.style.touchAction="none",i}function _V(e){if(!e||typeof e!="string"||e.trim()==="")return console.warn("parseCubicBezierD received invalid input:",e),null;let t="";const r=e.indexOf("M");t=e.substring(r+1).replace("C","");const n=t.split(" ").reduce((i,s)=>(s=s.trim(),s!==""&&(s.endsWith(",")&&(s=s.slice(0,-1)),i.push(s)),i),[]);try{const i={p0:{x:parseFloat(n[0]),y:parseFloat(n[1])},p1:{x:parseFloat(n[2]),y:parseFloat(n[3])},p2:{x:parseFloat(n[4]),y:parseFloat(n[5])},p3:{x:parseFloat(n[6]),y:parseFloat(n[7])}};return isNaN(i.p0.x)||isNaN(i.p0.y)||isNaN(i.p1.x)||isNaN(i.p1.y)||isNaN(i.p2.x)||isNaN(i.p2.y)||isNaN(i.p3.x)||isNaN(i.p3.y)?(console.error("Parsed coordinates resulted in NaN:",e,i),null):i}catch(i){return console.error("Error parsing numbers from path data:",e,i),null}}function bV(e){const t=Bm(e);if(!t)throw new Error("Wire is not god");zm.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display="none")})}function Sbe(e){const t=Bm(e);if(!t)throw new Error("Wire is not god");zm.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display=n.style.display==="none"?"":"none")})}function wV(e,t,r=""){var A,I,N,d,C,O,k,F,z,j;const n=r!==""&&_V(r)||null;let i=e.getAttribute("d")&&_V(e.getAttribute("d"));if(!i)return console.log("unable to parse path"),null;const s=Bm(e);if(!s)throw new Error("Wire is not god");const o=new Map(zm.map(J=>[J.substring(1),s.querySelector(J)||null]));let a=new Map([[Gi[0],o.get(Gi[0])||gV(i.p0,i.p1,"handle1")],[Gi[1],o.get(Gi[1])||gV(i.p3,i.p2,"handle2")],[Gi[2],o.get(Gi[2])||mV((n==null?void 0:n.p0)||i.p0,"end_point1")],[Gi[3],o.get(Gi[3])||mV((n==null?void 0:n.p3)||i.p3,"end_point2")],[Gi[4],o.get(Gi[4])||yV((n==null?void 0:n.p1)||i.p1,"controlPoint1")],[Gi[5],o.get(Gi[5])||yV((n==null?void 0:n.p2)||i.p2,"controlPoint2")]]);const u=a.get(Gi[2]),c=a.get(Gi[4]),l=a.get(Gi[5]);if(u){const J=u.getAttribute("cx"),oe=u.getAttribute("cy"),W=(n==null?void 0:n.p0.x.toString())||i.p0.x.toString(),D=(n==null?void 0:n.p0.y.toString())||i.p0.y.toString();u.setAttribute("cx",W),u.setAttribute("cy",D);const B=parseFloat(W)-parseFloat(J||""),U=parseFloat(D)-parseFloat(oe||"");c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+B)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+U)),l==null||l.setAttribute("cx",String(parseFloat(l.getAttribute("cx")||"0")+B)),l==null||l.setAttribute("cy",String(parseFloat(l.getAttribute("cy")||"0")+U))}const h=a.get(Gi[3]);if(h){const J=h.getAttribute("cx"),oe=h.getAttribute("cy"),W=(n==null?void 0:n.p3.x.toString())||i.p3.x.toString(),D=(n==null?void 0:n.p3.y.toString())||i.p3.y.toString();h.setAttribute("cx",W),h.setAttribute("cy",D);const B=parseFloat(W)-parseFloat(J||""),U=parseFloat(D)-parseFloat(oe||"");c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+B)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+U)),l==null||l.setAttribute("cx",String(parseFloat(l.getAttribute("cx")||"0")+B)),l==null||l.setAttribute("cy",String(parseFloat(l.getAttribute("cy")||"0")+U))}for(const J of Gi)s.appendChild(a.get(J));let v=null,_={x:0,y:0},m={p0:{x:parseFloat((A=a.get("end_point1"))==null?void 0:A.getAttribute("cx")),y:parseFloat((I=a.get("end_point1"))==null?void 0:I.getAttribute("cy"))},p1:{x:parseFloat((N=a.get("controlPoint1"))==null?void 0:N.getAttribute("cx")),y:parseFloat((d=a.get("controlPoint1"))==null?void 0:d.getAttribute("cy"))},p2:{x:parseFloat((C=a.get("controlPoint2"))==null?void 0:C.getAttribute("cx")),y:parseFloat((O=a.get("controlPoint2"))==null?void 0:O.getAttribute("cy"))},p3:{x:parseFloat((k=a.get("end_point2"))==null?void 0:k.getAttribute("cx")),y:parseFloat((F=a.get("end_point2"))==null?void 0:F.getAttribute("cy"))}};function b(){var oe,W,D,B,U,ie,se,xe;const J=`M ${m.p0.x} ${m.p0.y} C ${m.p1.x} ${m.p1.y}, ${m.p2.x} ${m.p2.y}, ${m.p3.x} ${m.p3.y}`;if(e.setAttribute("d",J),!a.get("handle1")||!a.get("handle2"))return console.warn("no handles on the edge you tried to update"),null;(oe=a.get("handle1"))==null||oe.setAttribute("x1",m.p0.x.toString()),(W=a.get("handle1"))==null||W.setAttribute("y1",m.p0.y.toString()),(D=a.get("handle1"))==null||D.setAttribute("x2",m.p1.x.toString()),(B=a.get("handle1"))==null||B.setAttribute("y2",m.p1.y.toString()),(U=a.get("handle2"))==null||U.setAttribute("x1",m.p3.x.toString()),(ie=a.get("handle2"))==null||ie.setAttribute("y1",m.p3.y.toString()),(se=a.get("handle2"))==null||se.setAttribute("x2",m.p2.x.toString()),(xe=a.get("handle2"))==null||xe.setAttribute("y2",m.p2.y.toString())}function y(J){var B,U,ie,se;if(!e)return console.warn("no svg found on get mouse position"),null;const oe=e.getScreenCTM();if(!oe)return{x:0,y:0};const W=J.clientX??((U=(B=J.touches)==null?void 0:B[0])==null?void 0:U.clientX),D=J.clientY??((se=(ie=J.touches)==null?void 0:ie[0])==null?void 0:se.clientY);return W===void 0||D===void 0?(console.warn("Could not get clientX/Y from event:",J),null):{x:(W-oe.e)/oe.a,y:(D-oe.f)/oe.d}}function w(J){if(J.type==="mousedown"&&J.preventDefault(),J.target.classList.contains("control-point")){v=J.target;const oe=y(J);if(!oe)return;_.x=oe.x-parseFloat(v.getAttribute("cx")),_.y=oe.y-parseFloat(v.getAttribute("cy")),document.addEventListener("mousemove",T),document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("mouseup",P),document.addEventListener("touchend",P),document.addEventListener("mouseleave",P)}}function T(J){if(v){J.type==="touchmove"&&J.preventDefault();const oe=y(J);if(!oe)return;const W=oe.x-_.x,D=oe.y-_.y;v.setAttribute("cx",W.toString()),v.setAttribute("cy",D.toString()),v.id==="controlPoint1"?(m.p1.x=W,m.p1.y=D):v.id==="controlPoint2"?(m.p2.x=W,m.p2.y=D):console.warn("reached error"),b()}}function P(J){const oe=`M ${m.p0.x} ${m.p0.y} C ${m.p1.x} ${m.p1.y}, ${m.p2.x} ${m.p2.y}, ${m.p3.x} ${m.p3.y}`;t(oe),v&&(console.log("Ended manipulation drag"),document.removeEventListener("mousemove",T),document.removeEventListener("touchmove",T),document.removeEventListener("mouseup",P),document.removeEventListener("touchend",P),document.removeEventListener("mouseleave",P),v=null)}(z=a.get("controlPoint1"))==null||z.addEventListener("mousedown",w),(j=a.get("controlPoint2"))==null||j.addEventListener("mousedown",w),b()}let Au=Ve(localStorage.getItem("manipulations")&&JSON.parse(localStorage.getItem("manipulations")||"{}")||{});var Ebe=mn('<path id="bezierCurve" role="presentation"></path>');function Abe(e,t){er(t,!0);const r=()=>Be(Au,"$wireManipulationStore",n),[n,i]=nn();let s=fn(null);const o=(c,l)=>{if(l==="")return console.warn("tried to save manipulations for empty wire id"),null;JSON.stringify(r())!==JSON.stringify(c)&&(wn(Au,et(r)[l][0]=c,et(r)),Ot(Au,r()))};let a=fn(void 0);Nn(()=>{if(pe(a,pX(E(s),t.initAncId)[0],!0),t.monitorWire(E(a)),!E(s))return;let c="";E(a)in r()&&(c=r()[E(a)][0],wV(E(s),l=>o(l,E(a)||""),c),r()[E(a)][1]||bV(E(s)))}),Tc(()=>{t.currentPath&&E(s)&&E(a)&&E(a)in r()&&(wV(E(s),c=>o(c,E(a)||""),t.currentPath),localStorage.setItem("manipulations",JSON.stringify(r())))});var u=Ebe();ao(u,c=>pe(s,c),()=>E(s)),Wt(()=>{ct(u,"d",t.currentPath),xn(u,0,LA(t.wireActive===-1?"":t.wireActive===1?"on":"off"),"svelte-17q3x3l")}),ri("click",u,c=>{c.preventDefault(),!(!E(a)||!E(s))&&(E(a)in r()||(wn(Au,et(r)[E(a)]=["",!1],et(r)),wn(Au,et(r)[E(a)][0]=t.currentPath,et(r)),wn(Au,et(r)[E(a)][1]=!1,et(r))),wn(Au,et(r)[E(a)][1]=!r()[E(a)][1],et(r)),Ot(Au,r()),Sbe(E(s)))}),ri("contextmenu",u,c=>{c.preventDefault();const l=dX(E(s));!l||!E(s)||(bV(E(s)),E(a)&&(delete r()[E(a)],Ot(Au,r())),E(s).setAttribute("d",l.getAttribute("d")))}),Ne(e,u),tr(),i()}Gu(["click","contextmenu"]);var Tbe=mn("<path></path>");function Pbe(e,t){er(t,!0);let r=fn(null);Nn(()=>{let[i,s]=pX(E(r),t.initAncId);t.monitorWire(i)});var n=Tbe();ao(n,i=>pe(r,i),()=>E(r)),Wt(()=>{xn(n,0,LA(t.wireActive===-1?"hit-area":t.wireActive===1?"hit-area on":"hit-area off"),"svelte-ddw6y9"),ct(n,"d",t.currentPath)}),Ne(e,n),tr()}var Cbe=mn('<svg><path fill="currentColor" d="m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zM11 20h1.975l.35-2.65q.775-.2 1.438-.587t1.212-.938l2.475 1.025l.975-1.7l-2.15-1.625q.125-.35.175-.737T17.5 12t-.05-.787t-.175-.738l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.212-.962t-1.438-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.55.575 1.213.963t1.437.587zm1.05-4.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5M12 12"></path></svg>');function Obe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=Cbe();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}let To=Ve({wireType:localStorage.getItem("wireType")||"step",theme:localStorage.getItem("theme")==="dark"?"dark":"light",useTapUpdate:JSON.parse(localStorage.getItem("useTapUpdate")||"true"),useCarry:JSON.parse(localStorage.getItem("useCarry")||"true")});var Ibe=Bt('<div class="modal svelte-t2udi1"><h2 class="svelte-t2udi1">Settings</h2> <div style="display:flex;justify-content:center;align-items:center;" class="svelte-t2udi1"><p style="margin-right:auto" class="svelte-t2udi1">Default Wires:</p> <select id="wire-type-select" class="svelte-t2udi1"><option>Bezier</option><option>Step</option><option>Straight</option></select></div> <div class="svelte-t2udi1"><p class="svelte-t2udi1">Theme:</p> <select id="theme-select" class="svelte-t2udi1"><option>Light</option><option>Dark</option></select></div> <div style="display: flex;flex-direction: column;align-items:flex-start;margin-bottom:-5px" class="svelte-t2udi1"><label style="display:flex;align-items:center"><input style="margin-right:5px;margin-top:2px" type="checkbox"/> Tap Anchor to Update Wire Type</label> <label style="display:flex;align-items:center"><input style="margin-right:5px;margin-top:2px" type="checkbox"/>Carry Over Wire types</label></div> <div style="display:flex;flex-direction: row;justify-content: space-between;width: 100%;margin-bottom:-25px;margin-top:5px;" class="svelte-t2udi1"><button class="kittyBtn svelte-t2udi1"> </button> <button class="closeBtn svelte-t2udi1">Close Menu</button></div> <br/></div>'),Rbe=Bt('<div class="wireTypeSelect svelte-t2udi1" style="display: flex;flex-direction:column;align-items:flex-end;"><button>Curve</button> <button>Step</button> <button>Straight</button></div> <button class="launch-button svelte-t2udi1"><!></button> <!>',1);function kbe(e,t){er(t,!0);const r=()=>Be(To,"$settingsStore",n),[n,i]=nn();let s=fn(!1),o=fn(!1);To.subscribe(P=>{localStorage.setItem("wireType",P.wireType)}),Tc(()=>{localStorage.setItem("useCarry",r().useCarry),localStorage.setItem("useTapUpdate",r().useTapUpdate)}),No(r().wireType);var a=Rbe(),u=_t(a),c=gt(u);let l;var h=nt(c,2);let v;var _=nt(h,2);let m;var b=nt(u,2),y=gt(b);Obe(y,{height:30,width:30});var w=nt(b,2);{var T=P=>{var A=Ibe(),I=nt(gt(A),2),N=nt(gt(I),2),d=gt(N);d.value=d.__value="bezier";var C=nt(d);C.value=C.__value="step";var O=nt(C);O.value=O.__value="straight";var k=nt(I,2),F=nt(gt(k),2),z=gt(F);z.value=z.__value="light";var j=nt(z);j.value=j.__value="dark";var J=nt(k,2),oe=gt(J),W=gt(oe),D=nt(oe,2),B=gt(D),U=nt(J,2),ie=gt(U),se=gt(ie),xe=nt(ie,2);Wt(()=>is(se,E(o)?"Despawn Kitty":"KITTY")),gI(N,()=>r().wireType,me=>wn(To,et(r).wireType=me,et(r))),gI(F,()=>r().theme,me=>wn(To,et(r).theme=me,et(r))),yI(W,()=>r().useTapUpdate,me=>wn(To,et(r).useTapUpdate=me,et(r))),yI(B,()=>r().useCarry,me=>wn(To,et(r).useCarry=me,et(r))),ri("click",ie,()=>{const me=document.querySelector("#kitty");me?E(o)?(me.style.display="none",pe(o,!1)):(me.style.display="unset",pe(o,!0)):(herekittykittykitty("Furnando"),pe(o,!0))}),ri("click",xe,me=>{me.stopPropagation(),pe(s,!1)}),Ne(P,A)};Kt(w,P=>{E(s)&&P(T)})}Wt(()=>{l=xn(c,1,"wire-btn wire-bez svelte-t2udi1",null,l,{activeType:r().wireType==="bezier"}),v=xn(h,1,"wire-btn wire-step svelte-t2udi1",null,v,{activeType:r().wireType==="step"}),m=xn(_,1,"wire-btn wire-str svelte-t2udi1",null,m,{activeType:r().wireType==="straight"})}),ri("click",c,()=>{wn(To,et(r).wireType="bezier",et(r))}),ri("click",h,()=>{wn(To,et(r).wireType="step",et(r))}),ri("click",_,()=>{wn(To,et(r).wireType="straight",et(r))}),ri("click",b,()=>pe(s,!E(s))),Ne(e,a),tr(),i()}Gu(["click"]);const Mbe=[-5,35.43];function Lbe(e,t){let r=document.querySelector(`#N-${e} svg.LampSVG`);r!==null&&r.setLampState(t)}var Nbe=Bt('<div style="min-width: 85px !important;"><svg width="85" height="65" viewBox="-12 0 95 100" xmlns="http://www.w3.org/2000/svg"><line x1="-50" x2="5" y1="45" y2="45" stroke-width="8"></line><circle cx="50" cy="50" r="45" stroke-width="7"></circle></svg></div> <!>',1);function qbe(e,t){er(t,!0),fe(t,"width",3,80),fe(t,"height",3,50);let r=fn(!1),n=Rr(()=>({fill:zi()?E(r)?"green":"red":"gray",stroke:zi()?E(r)?"var(--lime-green)":"var(--lime-red)":"lightgray"}));function i(_){pe(r,_==1)}let s;Nn(()=>{Object.assign(s,{setLampState:i})});const o=ns.subscribe(_=>{if(_===null){pe(r,!1);return}});co(o);var a=Nbe(),u=_t(a),c=gt(u);xn(c,0,"LampSVG");var l=gt(c),h=nt(l);ao(c,_=>s=_,()=>s);var v=nt(u,2);rs(v,{io:"input",ioId:"",get id(){return t.nodeId},side:"west",get offset(){return Mbe}}),Wt(()=>{ct(l,"stroke",E(n).stroke),ct(h,"fill",E(n).fill),ct(h,"stroke",E(n).stroke)}),Ne(e,a),tr()}let fc=Ve({type:"",id:""}),_A=Ve(!1);function Dbe(e,t){er(t,!0);const r=()=>Be(To,"$settingsStore",a),n=()=>Be(fc,"$lastDel",a),i=()=>Be(vn,"$CircuitStore",a),s=()=>Be(_A,"$handleDisconnect",a),o=()=>Be(ns,"$CircuitEngine",a),[a,u]=nn();let c=fn(-1),l=fn(""),h=fe(t,"wireType",23,()=>r().wireType);async function v(T){var A,I;console.log("Mouse up target class:"),((I=Array.from((A=T.target)==null?void 0:A.classList))==null?void 0:I.includes("custom_anchor"))||(wn(fc,et(n).type="",et(n)),wn(fc,et(n).id="",et(n)),Ot(fc,n()),_&&delete i().wireManipulations[E(l)]),window.removeEventListener("mouseup",v,{capture:!0})}const _=!r().useTapUpdate,m=!r().useCarry;let b=null;co(async()=>{s()&&E(l)!==""&&!E(l).includes("cursor")&&E(l)in i().wireManipulations&&(fc.update(()=>({type:h(),id:E(l)})),window.addEventListener("mouseup",v,{capture:!0}),_||delete i().wireManipulations[E(l)],Ot(_A,!1)),b!==null&&b()}),Tc(()=>{if(E(l)!==""&&!E(l).includes("cursor")){if(!(E(l)in i().wireManipulations)){if(n().type!==""&&s()===!1){wn(vn,et(i).wireManipulations[E(l)]=m?r().wireType:n().type,et(i)),h(i().wireManipulations[E(l)]),delete i().wireManipulations[n().id],wn(fc,et(n).type="",et(n)),wn(fc,et(n).id="",et(n)),Ot(fc,n());return}wn(vn,et(i).wireManipulations[E(l)]=r().wireType,et(i))}h(i().wireManipulations[E(l)])}});function y(T,P=A=>pe(l,A,!0)){if(!T||(P(T),T.includes("cursor")))return null;(o()!==null&&w(o())||(()=>null))()}function w(T,P=A=>pe(c,A,!0)){const A=fbe(T,E(l));return A===null?void 0:()=>T.monitorWire(A,N=>{var z;const d=hbe(A);P(d);const{id:C,port:O,magnet:k}=(z=A.attributes)==null?void 0:z.target;if(!C||!O)return;if(_be(O,C,d),!(C&&T.getLabelIndex().outputs[C]))return null;Lbe(C,d)})}b=ns.subscribe(T=>{if(T===null){pe(c,-1);return}(T!==null&&w(T)||(()=>null))()});{let T=Rr(()=>h()==="straight"),P=Rr(()=>h()==="step");$2(e,{get straight(){return E(T)},get step(){return E(P)},children:Pg,$$slots:{default:(A,I)=>{const N=Rr(()=>I.path);var d=Ut(),C=_t(d);{var O=F=>{Abe(F,{get initAncId(){return t.initAncId},get currentPath(){return E(N)},get wireActive(){return E(c)},monitorWire:y})},k=F=>{Pbe(F,{get initAncId(){return t.initAncId},get currentPath(){return E(N)},get wireActive(){return E(c)},monitorWire:y})};Kt(C,F=>{h()==="bezier"?F(O):(h()==="step"||h()==="straight")&&F(k,1)})}Ne(A,d)}}})}tr(),u()}var Fbe=Bt("<div></div>");function Bbe(e,t){er(t,!0);const[r,n]=nn();let i=fe(t,"io",3,"output"),s=fn("");const o=h=>{function v(_){_.preventDefault(),_.stopPropagation(),pe(s,vV(h,_.target.classList),!0),document.removeEventListener("mousedown",v,!0)}return v};function a(h){const v=o(h);document.addEventListener("mousedown",v,!0)}function u(h){const v=cC(h.target.classList);v!==null&&v===t.anchorId?a(v):pe(s,vV(t.anchorId,h.target.classList),!0),document.removeEventListener("mouseup",u,!0)}Tc(()=>{t.connecting&&document.addEventListener("mouseup",u,!0)});var c=Fbe();let l;Wt(()=>l=xn(c,1,`custom_anchor ${i()==="input"&&"input"||"output"} ${t.anchorId??""}`,"svelte-1t54x1h",l,{linked:t.linked,hovering:t.hovering,connecting:t.connecting})),cr("mousedown",c,h=>{h.preventDefault(),t.linked&&i()==="input"&&!zi()&&(vn.removeConnection(t.anchorId),Ot(_A,!0))},!0),Ne(e,c),tr(),n()}let b2=Ve([]);function zbe(e,t){switch(e){case"north":t+=90;break;case"east":t+=180;break;case"south":t+=270;break}switch(t%=360,t){case 0:return"west";case 90:return"north";case 180:return"east";case 270:return"south";default:return"west"}}var Vbe=Bt("<div><!></div>");function rs(e,t){er(t,!0);const r=()=>Be(l,"$rotation",n),[n,i]=nn(),s=b=>{var y=Vbe(),w=gt(y);{let T=Rr(()=>zbe(t.side,r())),P=Rr(()=>t.io==="output"&&!0||!1),A=Rr(()=>t.io==="input"&&!0||!1),I=Rr(zi);cd(w,{get id(){return c},get key(){return c},get direction(){return E(T)},get output(){return E(P)},get input(){return E(A)},get locked(){return E(I)},get connections(){return t.connections},children:Pg,$$slots:{default:(N,d)=>{const C=Rr(()=>d.linked),O=Rr(()=>d.hovering),k=Rr(()=>d.connecting);Bbe(N,{get io(){return t.io},get connecting(){return E(k)},get linked(){return E(C)},get anchorId(){return c},get hovering(){return E(O)}})},edge:(N,d)=>{Dbe(N,{get initAncId(){return c},slot:"edge"})}}})}Wt(()=>$r(y,`position:absolute;left: ${o()[0]}${a()?"px":"%"}; top: ${o()[1]}${a()?"px":"%"};`)),Ne(b,y)};let o=fe(t,"offset",19,()=>[]),a=fe(t,"usePixelOffset",3,!1);const c=fe(t,"usePortName",3,!1)()?`${t.ioId}_${t.id}`:`${t.io==="input"?"in":"out"}${t.ioId}_${t.id}`,l=mr("rotation");l.subscribe(()=>{let b=Are(c);b&&b2.update(y=>[...y,b])});let h=fn(!1),v=!1;Nn(()=>{const b=b2.subscribe(y=>{y.includes(c)&&!v&&(v=!0,setTimeout(()=>{pe(h,!E(h)),b2.update(()=>y.filter(w=>w!==c)),v=!1}))});co(b)});var _=Ut(),m=_t(_);Td(m,r,b=>{var y=Ut(),w=_t(y);{var T=A=>{s(A)},P=A=>{var I=Ut(),N=_t(I);Td(N,()=>E(h),d=>{s(d)}),Ne(A,I)};Kt(w,A=>{t.io==="input"?A(T):A(P,!1)})}Ne(b,y)}),Ne(e,_),tr(),i()}const $be="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='500px'%20height='500px'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e",Gbe="data:image/svg+xml,%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NAND%20Gate%20Body%20--%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105z'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='151'%20width='71'%20height='18'%20fill='%23000000'/%3e%3crect%20x='16'%20y='343'%20width='71'%20height='18'%20fill='%23000000'/%3e%3c!--%20Output%20Circle%20(Inverter)%20--%3e%3ccircle%20cx='384'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='112'%20height='18'%20fill='%23000000'/%3e%3c/svg%3e",Ube="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20OR%20Gate%20Body%20with%20Smooth%20Curves%20and%20Proportions%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='12'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='12'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='100'%20height='18'%20fill='black'/%3e%3c/svg%3e",jbe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='460'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",Hbe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Additional%20Back%20Curve%20for%20XOR%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XOR%20Gate%20Body%20(Same%20as%20OR%20Gate)%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",Wbe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Adjusted%20Back%20Curve%20to%20Intersect%20Input%20Lines%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XNOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='12'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='465'%20y='248'%20width='80'%20height='18'%20fill='black'/%3e%3c/svg%3e";function Xbe(e){if(e.startsWith("data:image/svg+xml,"))return decodeURIComponent(e.replace("data:image/svg+xml,",""));throw new Error("svg format does not match expected format")}function vX(e){const t=new DOMParser;let r;try{r=t.parseFromString(Xbe(e),"image/svg+xml")}catch(n){console.error("Error parsing SVG:",n),r=t.parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle">SVG Error</text></svg>',"image/svg+xml")}return r.documentElement}function gX(e){let t;return e.hasAttribute("viewBox")?t=e.getAttribute("viewBox"):(console.warn("svg passed in does not have a view box attribute"),t="10 100 490 312"),t}const w2={in1:[-7.5,68.5],in2:[-7.5,7.5],out:[100,37.58]},Ybe={And:$be,Nand:Gbe,Or:Ube,Nor:jbe,Xor:Hbe,Xnor:Wbe};var Kbe=mn('<svg class="circuitSvgContainer"></svg><!><!><!>',1);function Jbe(e,t){er(t,!0);let r=fe(t,"width",3,80),n=fe(t,"height",3,50),i=fe(t,"gateType",3,"And"),s;Nn(()=>{const h=vX(Ybe[i()]);s.setAttribute("viewBox",gX(h)),s.setAttribute("width",r().toString()),s.setAttribute("height",n().toString()),s.innerHTML=h.innerHTML});var o=Kbe(),a=_t(o);ao(a,h=>s=h,()=>s);var u=nt(a);rs(u,{io:"input",ioId:"1",get id(){return t.nodeId},side:"west",get offset(){return w2.in1}});var c=nt(u);rs(c,{io:"input",ioId:"2",get id(){return t.nodeId},side:"west",get offset(){return w2.in2}});var l=nt(c);{let h=Rr(()=>Qe(vn).connectors["out_"+t.nodeId]);rs(l,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return E(h)},side:"east",get offset(){return w2.out}})}Ne(e,o),tr()}const Zbe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='30'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='470'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",Qbe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",xV={in:[-15,38.7],out:[100,38]},e1e={Not:Zbe,Repeater:Qbe};var t1e=mn('<svg class="circuitSvgContainer"></svg><!><!>',1);function r1e(e,t){er(t,!0);let r=fe(t,"width",3,80),n=fe(t,"height",3,50),i=fe(t,"gateType",3,"Not"),s;Nn(()=>{const l=vX(e1e[i()]);s.setAttribute("viewBox",gX(l)),s.setAttribute("width",r().toString()),s.setAttribute("height",n().toString()),s.innerHTML=l.innerHTML});var o=t1e(),a=_t(o);ao(a,l=>s=l,()=>s);var u=nt(a);rs(u,{io:"input",ioId:"",get id(){return t.nodeId},side:"west",get offset(){return xV.in}});var c=nt(u);{let l=Rr(()=>Qe(vn).connectors["out_"+t.nodeId]);rs(c,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return E(l)},side:"east",get offset(){return xV.out}})}Ne(e,o),tr()}const n1e=[95,40.4];var i1e=mn('<svg width="75" height="60" viewBox="-2 2 140 95" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100" height="100" fill="black" stroke-width="2"></rect><line x1="100" x2="190" y1="50" y2="50" stroke-width="8"></line><circle class="button-circle" role="presentation" cx="50" cy="50" r="30" aria-label="input button node toggle" stroke-width="7"></circle></svg><!>',1);function s1e(e,t){er(t,!0),fe(t,"width",3,80),fe(t,"height",3,50);let r=fn(!1),n=Rr(()=>({fill:zi()?E(r)?"green":"red":"gray",stroke:zi()?E(r)?"var(--lime-green)":"var(--lime-red)":"lightgray"}));function i(){zi()&&(pe(r,!E(r)),hX(t.nodeId))}const s=ns.subscribe(v=>{if(v===null){pe(r,!1);return}});co(s);var o=i1e(),a=_t(o),u=gt(a),c=nt(u),l=nt(c),h=nt(a);{let v=Rr(()=>Qe(vn).connectors["out_"+t.nodeId]);rs(h,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return E(v)},side:"east",get offset(){return n1e}})}Wt(()=>{ct(u,"stroke",E(n).stroke),ct(c,"stroke",E(n).stroke),ct(l,"fill",E(n).fill),ct(l,"stroke",E(n).stroke)}),ri("click",l,i),Ne(e,o),tr()}Gu(["click"]);const sd=15,hc=5;var o1e=mn('<svg xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><rect x="0" y="0" fill="black"></rect><text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" lengthAdjust="spacingAndGlyphs" font-size="200%" fill="white"> </text></svg><!><!>',1);function a1e(e,t){er(t,!0);const r=100,n=(sd+hc)*Math.max(t.inputs,t.outputs)+hc,i=(n-(sd+hc)*t.inputs+hc)/2+1,s=(n-(sd+hc)*t.outputs+hc)/2+1;var o=o1e(),a=_t(o);ct(a,"width",r);var u=gt(a);ct(u,"width",r);var c=nt(u);ct(c,"textLength","80px");var l=gt(c),h=nt(a);Bi(h,17,()=>({length:t.inputs}),ku,(_,m,b)=>{{let y=Rr(()=>(b+1).toString()),w=Rr(()=>[-7.5,i+(sd+hc)*b]);rs(_,{io:"input",get ioId(){return E(y)},get id(){return t.nodeId},side:"west",get offset(){return E(w)},usePixelOffset:!0})}});var v=nt(h);Bi(v,17,()=>({length:t.outputs}),ku,(_,m,b)=>{{let y=Rr(()=>(b+1).toString()),w=Rr(()=>Qe(vn).connectors[`out${b+1}_`+t.nodeId]),T=Rr(()=>[r-5,s+(sd+hc)*b]);rs(_,{io:"output",get ioId(){return E(y)},get id(){return t.nodeId},get connections(){return E(w)},side:"east",get offset(){return E(T)},usePixelOffset:!0})}}),Wt(()=>{ct(a,"height",n),ct(a,"viewBox",`0 0 100 ${n}`),ct(u,"height",n),is(l,t.celltype)}),Ne(e,o),tr()}var u1e=mn('<svg xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><polygon fill="black"></polygon><text x="95%" y="50%" text-anchor="end" dominant-baseline="middle" lengthAdjust="spacingAndGlyphs" font-size="200%" fill="white"> </text></svg><!>',1);function c1e(e,t){var i=u1e(),s=_t(i);ct(s,"width",80),ct(s,"height",50),ct(s,"viewBox","0 0 80 50");var o=gt(s);ct(o,"points","0,25, 20,0 80,0 80,50 20,50");var a=nt(o);ct(a,"textLength","64px");var u=gt(a),c=nt(s);rs(c,{io:"input",ioId:"",get id(){return t.nodeId},side:"west",offset:[-7.5,20],usePixelOffset:!0}),Wt(()=>is(u,t.celltype)),Ne(e,i)}var l1e=mn('<svg xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><polygon fill="black"></polygon><text x="5%" y="50%" text-anchor="start" dominant-baseline="middle" lengthAdjust="spacingAndGlyphs" font-size="200%" fill="white"> </text></svg><!>',1);function f1e(e,t){er(t,!0);const r=80,n=50;var i=l1e(),s=_t(i);ct(s,"width",r),ct(s,"height",n),ct(s,"viewBox","0 0 80 50");var o=gt(s);ct(o,"points","0,0 60,0 80,25 60,50 0,50");var a=nt(o);ct(a,"textLength","64px");var u=gt(a),c=nt(s);{let l=Rr(()=>Qe(vn).connectors["out_"+t.nodeId]);rs(c,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return E(l)},side:"east",offset:[75,20],usePixelOffset:!0})}Wt(()=>is(u,t.celltype)),Ne(e,i),tr()}const h1e=[95,40.4];var d1e=Bt('<div class="clock-context-menu svelte-3kb23d"><label>Frequency (ticks): <input type="number" min="1" class="svelte-3kb23d"/></label> <button class="svelte-3kb23d">Apply</button></div>'),p1e=Bt('<svg width="75" height="60" viewBox="-2 2 140 95" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100" height="100" fill="black" stroke-width="2"></rect><line x1="100" x2="190" y1="50" y2="50" stroke-width="8"></line><circle class="button-circle" role="presentation" cx="50" cy="50" r="30" aria-label="clock node toggle" stroke-width="7"></circle><line x1="50" y1="50" x2="50" y2="30" stroke-width="4" stroke-linecap="round"></line><line x1="50" y1="50" x2="65" y2="50" stroke-width="3" stroke-linecap="round"></line><circle cx="50" cy="50" r="3"></circle></svg> <!> <!>',1);function v1e(e,t){er(t,!0);const r=()=>Be(a,"$isSelected",n),[n,i]=nn();fe(t,"width",3,80),fe(t,"height",3,50);let s=fe(t,"frequency",7,1),o=fn(!1);const a=mr("selected");let u=fn(No(s()));function c(){s(E(u))}let l=Rr(()=>({fill:zi()?E(o)?"green":"red":"gray",stroke:zi()?E(o)?"var(--lime-green)":"var(--lime-red)":"lightgray"}));function h(){zi()&&(pe(o,!E(o)),hX(t.nodeId))}const v=lX.subscribe(k=>{if(!zi()){pe(o,!1);return}const F=Qe(ns);if(F)try{const z=F.getLabelIndex().devices[t.nodeId].attributes.outputSignals.out._avec[0];pe(o,z===1)}catch{}}),_=ns.subscribe(k=>{k===null&&pe(o,!1)});let m=Rr(()=>Qe(vn).connectors["out_"+t.nodeId]);co(()=>{v(),_()});var b=p1e(),y=_t(b),w=gt(y),T=nt(w),P=nt(T),A=nt(P),I=nt(A),N=nt(I),d=nt(y,2);{var C=k=>{var F=d1e(),z=gt(F),j=nt(gt(z)),J=nt(z,2);ri("click",F,oe=>oe.stopPropagation()),Ig(j,()=>E(u),oe=>pe(u,oe)),ri("click",J,c),Ne(k,F)};Kt(d,k=>{r()&&k(C)})}var O=nt(d,2);rs(O,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return E(m)},side:"east",get offset(){return h1e}}),Wt(()=>{ct(w,"stroke",E(l).stroke),ct(T,"stroke",E(l).stroke),ct(P,"fill",E(l).fill),ct(P,"stroke",E(l).stroke),ct(A,"stroke",E(l).stroke),ct(I,"stroke",E(l).stroke),ct(N,"fill",E(l).stroke)}),ri("click",P,k=>{k.stopPropagation(),h()}),Ne(e,b),tr(),i()}Gu(["click"]);const Vv={in0:[-6.5,10],in1:[-6.5,60],sel:[24.5,95],out:[53.75,35]};var g1e=mn('<svg width="75" height="80" viewBox="-2 -2 100 120" xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><polygon points="0,0 60,15 60,85 0,100" fill="black" stroke="lightgray" stroke-width="1"></polygon><rect x="27" y="95" width="5" height="80" stroke="lightgray" stroke-width="1"></rect><text x="10" y="19.5" text-anchor="start" dominant-baseline="middle" font-size="30" fill="white">0</text><text x="10" y="80" text-anchor="start" dominant-baseline="middle" font-size="30" fill="white">1</text></svg><!><!><!><!>',1);function m1e(e,t){er(t,!0);var r=g1e(),n=nt(_t(r));rs(n,{io:"input",ioId:"0",get id(){return t.nodeId},side:"west",get offset(){return Vv.in0}});var i=nt(n);rs(i,{io:"input",ioId:"1",get id(){return t.nodeId},side:"west",get offset(){return Vv.in1}});var s=nt(i);rs(s,{io:"input",ioId:"sel",get id(){return t.nodeId},side:"south",get offset(){return Vv.sel},usePortName:!0});var o=nt(s);{let a=Rr(()=>Qe(vn).connectors["out_"+t.nodeId]);rs(o,{io:"output",ioId:"",get id(){return t.nodeId},side:"east",get connections(){return E(a)},get offset(){return Vv.out}})}Ne(e,r),tr()}const Ec=Ve({"Logic Gates":{svg:void 0,groupElements:[{name:"And",nodeType:"And",icon:xne},{name:"Nand",nodeType:"Nand",icon:Cne},{name:"Or",nodeType:"Or",icon:Ene},{name:"Nor",nodeType:"Nor",icon:Ane},{name:"Xor",nodeType:"Xor",icon:Tne},{name:"Xnor",nodeType:"Xnor",icon:Pne},{name:"Not",nodeType:"Not",icon:One},{name:"Repeater",nodeType:"Repeater",icon:Sne}]},"Input/Output":{svg:void 0,groupElements:[{name:"Lamp",nodeType:"Lamp",icon:jv},{name:"Button",nodeType:"Button",icon:Ine},{name:"Clock",nodeType:"Clock",icon:Rne}]},Tunnels:{svg:void 0,groupElements:[{name:"Tunnel Input",nodeType:"TunnelInput",icon:jv},{name:"Tunnel Output",nodeType:"TunnelOutput",icon:jv}]},Mux:{svg:void 0,groupElements:[{name:"Mux",nodeType:"Mux",icon:kne}]},Subcomponents:{svg:void 0,groupElements:[]},GhostElement:{svg:void 0,groupElements:[]}});function y1e(e){switch(e){case"And":case"Nor":case"Xor":case"Xnor":case"Or":case"Nand":return Jbe;case"Repeater":case"Not":return r1e;case"Button":return s1e;case"Lamp":return qbe;case"Mux":return m1e;case"Subcircuit":return a1e;case"TunnelInput":return c1e;case"TunnelOutput":return f1e;case"Clock":return v1e}}var _1e=Bt(' <img class="menu-item-icon"/>',1),b1e=Bt("<!> <!>",1),w1e=Bt("<!> <!>",1),x1e=Bt('<div class="menu svelte-1dpxsh"><!></div>'),S1e=Bt('<main><button class="menu-toggle-button svelte-1dpxsh">CMD Menu</button> <!></main>');function E1e(e,t){er(t,!1);const r=qe();let n=qe(!1),i=qe(""),s=qe(""),o=null,a=!1,u=null,c=qe([]);function l(){pe(n,!E(n)),E(n)||(pe(c,[]),pe(i,""),u=null,a=!1)}function h(z){pe(c,[...E(c),z]),pe(i,""),pe(s,"")}function v(){E(c).length>0&&(pe(c,E(c).slice(0,-1)),pe(i,""),pe(s,""))}DA(()=>{if(E(n)){const z=document.querySelector(".cmdk-input");z instanceof HTMLInputElement&&z.focus()}});const _=Object.keys(Ec).filter(z=>z!=="GhostElement").map(z=>({id:z,label:z}));Nn(()=>{window.addEventListener("keydown",z=>{console.log(`Key pressed: ${z.key}`),z.key==="-"?(console.log("Menu toggle triggered"),z.preventDefault(),l()):z.key==="Delete"?(console.log("Delete!"),b()()):z.key==="c"?y()():z.key==="v"&&w()()})});let m=fe(t,"createCanvasDevice",8),b=fe(t,"deletedSelectedNodes",8),y=fe(t,"copySelectedNodes",8),w=fe(t,"pasteNodes",8);function T(z){if(o)return;o=document.createElement("div"),o.className="drag-ghost",o.style.position="fixed",o.style.pointerEvents="none",o.style.left="0px",o.style.top="0px",o.style.zIndex="1000";const j=document.createElement("img");j.src=z.icon,j.alt=z.name,j.style.width="40px",j.style.opacity="0.7",o.appendChild(j),document.body.appendChild(o),window.addEventListener("mousemove",P)}function P(z){o&&(o.style.left=`${z.pageX}px`,o.style.top=`${z.pageY}px`)}function A(){o&&(o.remove(),o=null),window.removeEventListener("mousemove",P),a=!1}function I(z,j){a||(u=z,T(j),a=!0,console.log(`Dragging started for: ${z}`))}function N(z){if(a&&u){const j={x:z.pageX,y:z.pageY};console.log(`Creating node at position: ${j.x}, ${j.y}`),m()({...z,gateType:u}),u=null,A()}}function d(z,j){a||I(z,j)}Nn(()=>{window.addEventListener("mouseup",N),window.addEventListener("mousemove",P)}),co(()=>{window.removeEventListener("mouseup",N),window.removeEventListener("mousemove",P),A()}),Fe(()=>E(c),()=>{pe(r,E(c).length>0?E(c)[E(c).length-1]:void 0)}),Fe(()=>(E(i),E(s)),()=>{E(i)!==E(s)&&pe(s,E(i))}),_i(),Sn();var C=S1e(),O=gt(C),k=nt(O,2);{var F=z=>{var j=Ut(),J=_t(j);Td(J,()=>`${E(r)}:${E(s)}`,oe=>{var W=x1e(),D=gt(W);une(D,{filter:()=>1,children:(B,U)=>{var ie=w1e(),se=_t(ie);_ne(se,{class:"cmdk-input",placeholder:"Search...",get value(){return E(i)},set value(me){pe(i,me)},$$legacy:!0});var xe=nt(se,2);iy(xe,{children:(me,ee)=>{var ce=Ut(),re=_t(ce);{var te=Me=>{iy(Me,{children:(Ge,Ie)=>{var Ue=Ut(),We=_t(Ue);Bi(We,1,()=>(E(i),et(()=>_.filter(q=>q.label.toLowerCase().startsWith(E(i).toLowerCase())))),q=>q.id,(q,$)=>{ny(q,{onSelect:()=>h(E($).id),class:"menu-item",children:(Y,K)=>{var we=hI();Wt(()=>is(we,(E($),et(()=>E($).label)))),Ne(Y,we)},$$slots:{default:!0}})}),Ne(Ge,Ue)},$$slots:{default:!0}})},le=Me=>{iy(Me,{children:(Ge,Ie)=>{var Ue=b1e(),We=_t(Ue);gne(We,{get heading(){return E(r)},children:($,Y)=>{var K=Ut(),we=_t(K);Bi(we,1,()=>(St(Ec),E(r),E(i),et(()=>Ec[E(r)].groupElements.filter(he=>he.name.toLowerCase().startsWith(E(i).toLowerCase())))),he=>he.nodeType,(he,Te)=>{ny(he,{onSelect:()=>d(E(Te).nodeType,E(Te)),class:"menu-item",children:(Ce,ze)=>{var Le=_1e(),Oe=_t(Le),Ee=nt(Oe);Wt(()=>{is(Oe,`${E(Te),et(()=>E(Te).name)??""} `),ct(Ee,"src",(E(Te),et(()=>E(Te).icon))),ct(Ee,"alt",(E(Te),et(()=>E(Te).name)))}),Ne(Ce,Le)},$$slots:{default:!0}})}),Ne($,K)},$$slots:{default:!0}});var q=nt(We,2);ny(q,{onSelect:v,class:"menu-item",children:($,Y)=>{var K=hI("â Back");Ne($,K)},$$slots:{default:!0}}),Ne(Ge,Ue)},$$slots:{default:!0}})};Kt(re,Me=>{E(r)?Me(le,!1):Me(te)})}Ne(me,ce)},$$slots:{default:!0}}),Ne(B,ie)},$$slots:{default:!0}}),Ne(oe,W)}),Ne(z,j)};Kt(k,z=>{E(n)&&z(F)})}cr("click",O,l),Ne(e,C),tr()}var A1e=mn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 0 1-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 0 0 9 9c.239 0 .254.018.488 0A9 9 0 0 1 12 21"></path></svg>');function T1e(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=A1e();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var P1e=mn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05L5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636L16.95 7.05M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path></svg>');function C1e(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=P1e();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var O1e=Bt('<div class="side_menu_header svelte-ldakxf"><div style="display: flex;align-items:center"><img src="./logicap.webp" alt="app-logo" style="max-width: 18%;min-width:10%; aspect-ratio: 1 / 1;margin-right: 5%;margin-block:15px;"/> <h2 class="svelte-ldakxf"><span class="l_cap svelte-ldakxf">L</span><span class="o_cap svelte-ldakxf">o</span><span class="g_cap svelte-ldakxf">g</span><span class="i_cap svelte-ldakxf">i</span><span class="c_cap svelte-ldakxf">c</span><span class="a_cap svelte-ldakxf" style="margin-left:4px;">A</span><span class="p_cap svelte-ldakxf">P</span></h2></div> <!></div>');function I1e(e,t){er(t,!0);const r=()=>Be(To,"$settingsStore",n),[n,i]=nn();let s=fn(!1);Nn(()=>{pe(s,localStorage.getItem("theme")==="dark"),a()});function o(){pe(s,!E(s)),wn(To,et(r).theme=E(s)?"dark":"light",et(r)),localStorage.setItem("theme",E(s)?"dark":"light"),a()}function a(){E(s)?document.body.className="dark":document.body.className="light"}Tc(()=>{r().theme==="light"?(document.body.className="light",localStorage.setItem("theme","light"),pe(s,!1)):r().theme==="dark"&&(document.body.className="dark",localStorage.setItem("theme","dark"),pe(s,!0))});var u=O1e(),c=nt(gt(u),2);{var l=v=>{C1e(v,{onclick:o,style:"color:var(--neon-purple); min-width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})},h=v=>{T1e(v,{onclick:o,style:"color:grey !important; min-width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})};Kt(c,v=>{E(s)?v(l):v(h,!1)})}Ne(e,u),tr(),i()}var R1e=Bt('<li class="svelte-1e6exaf"><button class="gate-button svelte-1e6exaf" style="background:none; border:none; padding:0; cursor:inherit;"><img class="svelte-1e6exaf"/></button> <p class="svelte-1e6exaf"> </p></li>'),k1e=Bt('<ol class="side_menu_group svelte-1e6exaf"></ol>');function M1e(e,t){er(t,!0);const r=()=>Be(Ec,"$menuJsonData",n),[n,i]=nn();let s=fe(t,"zIndex",3,0),o=fe(t,"subMenuHeader",3,"Logic Gates");const a=Rr(()=>r()[o()].groupElements);let u=null,c=null;function l(w,T,P){c=document.createElement("div"),c.className="drag-ghost",c.style.position="fixed",c.style.pointerEvents="none",c.style.left=T+"px",c.style.top=P+"px",c.style.zIndex="200",c.style.transform="scale(1.3)";const A=document.createElement("img");A.src=w.icon,A.alt=w.nodeType+"drag gate ghost",A.style.width="82px",A.style.opacity="0.7",c.appendChild(A),document.body.appendChild(c)}function h(w,T){c&&(c.style.left=w+"px",c.style.top=T+"px")}function v(){c&&(c.remove(),c=null)}function _(w,T){T.preventDefault(),!zi()&&(u=w,l(w,T.pageX,T.pageY))}function m(w){c&&h(w.pageX,w.pageY)}function b(w){var P;if(w.stopPropagation(),u&&c){const A=document.elementFromPoint(w.clientX,w.clientY);h(w.pageX,w.pageY);const I=document.querySelector(".svelvet-wrapper");if(I==null?void 0:I.contains(A)){var T;if(u.nodeType=="Subcircuit"){let d=0,C=0,O=(P=ln.getCircuit(u.name))==null?void 0:P.circuit;if(O!=null){let k=O.devices;Object.keys(k).forEach(F=>{k[F].type=="Button"&&(d+=1)}),Object.keys(k).forEach(F=>{k[F].type=="Lamp"&&(C+=1)})}else alert("Critical: subcircuit not found");console.log(d),T={...w,gateType:u.nodeType,celltype:u.name,inputs:d,outputs:C}}else u.nodeType=="TunnelInput"||u.nodeType=="TunnelOutput"?T={...w,gateType:u.nodeType,celltype:u.name}:T={...w,gateType:u.nodeType};t.createCanvasDevice(T)}u=null,v(),w.stopPropagation()}}Nn(()=>{document.addEventListener("mousemove",m),document.addEventListener("click",b)}),co(()=>{document.removeEventListener("mousemove",m),document.removeEventListener("click",b),v()});var y=k1e();Bi(y,21,()=>E(a),ku,(w,T)=>{var P=R1e(),A=gt(P),I=gt(A),N=nt(A,2),d=gt(N);Wt(()=>{ct(I,"src",E(T).icon),ct(I,"alt",`${E(T).name??""} logic gate, hand-drawn`),is(d,E(T).name)}),ri("mousedown",P,C=>_(E(T),C)),Ne(w,P)}),Wt(()=>{$r(y,`z-index:${s()};`),ct(y,"id",`section_${s()??""}`)}),Ne(e,y),tr(),i()}Gu(["mousedown"]);const L1e=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href,N1e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='27.081'%20viewBox='0%200%20500%2027.081'%3e%3cpath%20id='b'%20data-name='16'%20d='M500,25.653c-.271,.462-.732,.434-1.18,.548-.418,.107-.762,.508-1.277,.879h-22.196c-.256-.224-.609-.535-1.012-.889h-7.665c-.362-.338-.71-.663-1.069-.998h-7.711c-.363-.336-.711-.66-1.076-.998h-8.658c-.498-.437-.823-.963-1.6-.956-4.344,.039-8.688,.019-12.911,.019-.349-.349-.577-.577-.845-.845-1.218-.293-2.5-.073-3.769-.115-1.29-.043-2.584-.01-3.876-.01h-7.267c-1.292,0-2.585,.036-3.876-.01-1.267-.045-2.549,.192-3.758-.121-.274-.274-.502-.502-.784-.784h-28.005c-.379-.333-.732-.644-1.134-.997h-45.514c-.305,.285-.654,.61-1.011,.943h-53.262l-1.063-.992h-118.18c-.251-.251-.479-.479-.708-.708-.129-.08-.251-.214-.387-.228-.319-.034-.645-.011-.968-.011-4.36,0-8.721,.001-13.081-.004-.147,0-.295-.064-.448-.099-.438-.438-.811-.889-1.573-.884-5.006,.036-10.013,.024-15.019,.012-.625-.001-1.267,.129-1.846-.126-.255-.255-.483-.483-.716-.716-.939-.229-1.899-.113-2.85-.114-7.59-.011-15.181-.018-22.771,.012-.774,.003-1.106-.509-1.604-.953h-17.45c-.292,.269-.641,.59-1.009,.929H34.387c-.343-.32-.692-.645-1.055-.984h-11.548c-.393-.35-.746-.663-1.122-.998h-5.724c-.278-.278-.469-.587-.744-.716-.402-.188-.938-.144-1.286-.386-.522-.363-.93-.889-1.387-1.346l-.345-.345c-.923,.165-1.464-.42-1.997-1.03h-.968c-2.05-2.059-4.101-4.118-6.23-6.256-.022-.369-.058-.835-.075-1.301-.034-.93-.106-1.035-1.056-1.154-.334-.042-.612-.094-.829-.465,.284-.322,.579-.658,.876-.995C.607,1.136,.304,.793,0,.451Q.875,0,5.143,0c.244,.192,.491,.38,.728,.579,.123,.103,.23,.227,.369,.366h6.736c.362,.338,.71,.663,1.068,.997h14.493c.364,.337,.713,.66,1.009,.934h16.478c.498-.438,.825-.956,1.6-.955,17.603,.023,35.206,.017,52.809,.022,.307,0,.614,.073,.928,.112,.431,.452,.82,.889,1.579,.871,2.26-.053,4.521-.019,6.782-.019,5.006,0,10.013,.017,15.019-.019,.759-.005,1.142,.431,1.63,.932h12.505c.38,.333,.734,.644,1.137,.998h108.444c.359,.333,.708,.657,1.071,.993h43.567c.357,.333,.705,.658,1.015,.947h3.881c.253-.253,.481-.481,.71-.71,.129-.078,.258-.226,.387-.226,27.764-.01,55.528-.01,83.195-.01,.541,.535,.911,.99,1.674,.987,8.075-.029,16.15-.023,24.224-.01,.785,.001,1.589-.156,2.34,.129,.246,.246,.475,.475,.703,.703,.144,.043,.287,.123,.431,.123,2.745,.007,5.491,.006,8.236,.006s5.491,.03,8.236-.019c.774-.014,1.11,.503,1.606,.952h9.622c.368,.337,.717,.658,1.088,.998h7.707c.356,.333,.705,.659,1.067,.998h7.707c.25,.25,.478,.478,.706,.706,.128,.08,.251,.216,.386,.23,.319,.034,.645,.011,.968,.011,8.236,0,16.473,0,24.709,.004,.148,0,.296,.062,.444,.095,1.256,1.256,2.512,2.512,3.768,3.768,1.374-.003,1.396,.046,1.46,1.249,.017,.322-.015,.647,.007,.969,.029,.428,.425,.7,1.034,.699,.323,0,.646-.005,.969,.002,.155,.003,.309,.03,.466,.047,.491,.678,1.129,1.073,1.992,1.025,2.058,2.058,4.114,4.114,6.166,6.166Z'/%3e%3c/svg%3e",q1e=""+new URL("line_23-6xYtaVUR.svg",import.meta.url).href,D1e=""+new URL("line_24-DEoQpS3B.svg",import.meta.url).href,F1e=""+new URL("line_25-BJNXJfeQ.svg",import.meta.url).href,B1e=""+new URL("line_27-Bg8z01MR.svg",import.meta.url).href,z1e=""+new URL("line_17-DTelLRhX.svg",import.meta.url).href,V1e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='14.048'%20viewBox='0%200%20500%2014.048'%3e%3cpath%20id='b'%20data-name='20'%20d='M500,11.891c-.491,.804-1.263,1.347-1.881,2.033-.123,.035-.245,.101-.368,.102-1.375,.007-2.751-.032-4.124,.021-.663,.025-.942-.435-1.365-.812h-18.918c-.311-.287-.609-.561-.922-.849h-30.487c-.303-.283-.6-.559-.873-.813h-47.818c-.333,.297-.633,.564-.861,.768h-18.167c-.235-.235-.429-.429-.624-.624-.253-.054-.505-.152-.759-.153-3.42-.01-6.84-.007-10.127-.007-.325,.325-.519,.519-.762,.762-.347,.019-.744,.06-1.143,.06-29.56,.003-59.12,.003-88.68,.003-.138,0-.278-.019-.412,.003-.653,.107-.957-.392-1.398-.828H56.332c-1.237,0-2.476,.022-3.711-.023-.187-.007-.448-.298-.519-.51-.077-.23-.07-.609,.073-.769,.635-.71,1.333-1.365,1.994-2.027h19.006c.43-.625,.988-.935,1.743-.796,.63,.116,1.004-.273,1.355-.691,.804-.252,1.622-.127,2.428-.128,12.374-.009,24.748-.006,37.122-.01,.395,0,.812,.1,1.171-.154,.096-.068,.233-.211,.213-.283-.032-.115-.172-.278-.275-.284-.811-.052-1.625-.097-2.437-.097-13.199-.005-26.398-.004-39.65-.004-.271-.238-.572-.503-.913-.804h-30.452c-.307-.286-.604-.563-.908-.847H19.505c-.307-.285-.603-.562-.912-.849H.37c-.111-.362-.222-.727-.37-1.211C.741,1.461,1.481,.854,2.46,.051H12.864c.218,.192,.519,.457,.861,.758h59.327c.306,.285,.603,.562,.907,.847,4.11,0,8.235,.002,12.359-.012,.098,0,.233-.166,.283-.283,.086-.198-.045-.465-.356-.512-.533-.081-1.085-.036-1.626-.08-.105-.008-.289-.255-.279-.268,.14-.178,.302-.467,.469-.473,1.085-.042,2.172-.022,3.169-.022,.462,.484,.793,.853,1.439,.841,2.336-.041,4.675,.009,7.011-.033,.647-.011,.972,.369,1.433,.841h56.795c.412,0,.83,.041,1.236-.009,.666-.082,.935,.444,1.36,.81h54.397c.308,.286,.605,.561,.914,.847h91.543c.299,.28,.596,.557,.902,.844h44.485c.333,.297,.632,.564,.951,.848h33.767c.665,1.068,1.616,.826,2.549,.656,.195-.194,.389-.389,.583-.583,.122-.037,.244-.108,.366-.108,8.387-.005,16.774-.005,25.229-.005,.263,.225,.566,.483,.928,.793h1.55c.314,.287,.612,.56,.911,.833,.286-.261,.583-.531,.879-.8,4.262,0,8.524,.004,12.786-.008,.302,0,.606,.039,.661,.339,.03,.164-.205,.435-.386,.568-.413,.302-.318,.719-.309,1.111,.002,.104,.138,.258,.245,.297,.241,.087,.5,.146,.756,.164,.943,.065,1.898-.122,2.825,.132,.201,.201,.395,.395,.6,.6,.652,.201,1.335,.091,2.007,.093,5.774,.01,11.549,.017,17.323-.01,.658-.003,.944,.428,1.367,.81h22.215c.312,.286,.611,.559,.926,.849h18.934c.305,.283,.602,.559,.891,.828,.648,.145,1.383-.29,1.95,.339Zm-93.618,.51c-3.829-.031-7.658-.023-11.486-.009-.098,0-.227,.159-.287,.272-.102,.192,.024,.513,.324,.52,1.914,.042,3.828,.021,5.743,.021s3.829,.004,5.743-.012c.099,0,.227-.159,.287-.272,.101-.192-.026-.518-.324-.521Zm14.022,.825c-2.454-.036-4.91-.024-7.364-.008-.098,0-.227,.161-.284,.276-.095,.192,.032,.503,.332,.516,1.226,.051,2.454,.021,3.682,.021s2.455,.006,3.682-.012c.098-.002,.227-.161,.284-.276,.095-.192-.035-.512-.331-.516Z'/%3e%3c/svg%3e",$1e=""+new URL("line_21-BR_oFIB4.svg",import.meta.url).href,G1e=""+new URL("line_29-C9eu5sMJ.svg",import.meta.url).href;function U1e(e){Ec.update(t=>({"Logic Gates":{...t["Logic Gates"]},"Input/Output":{...t["Input/Output"]},Mux:{...t.Mux},Tunnels:{...t.Tunnels},Subcomponents:{svg:t.Subcomponents.svg,groupElements:[...e.map(r=>({name:r,nodeType:"Subcircuit",icon:jv}))]},GhostElement:{...t.GhostElement}}))}var j1e=Bt('<li class="svelte-1mul7cs"><div class="menu_group_section svelte-1mul7cs"><button class="svelte-1mul7cs"><span style="margin-left:5%;"> </span></button> <img class="sketch_bar svelte-1mul7cs"/></div> <!></li>'),H1e=Bt('<nav class="side_menu noselect svelte-1mul7cs" aria-label="Side Menu"><div class="side_menu_header svelte-1mul7cs"><!> <img class="wiggle_bar svelte-1mul7cs" alt="sketched line bottom border for main app bar"/></div> <ul class="svelte-1mul7cs"></ul></nav>');function W1e(e,t){er(t,!0);const r=()=>Be(Ec,"$menuJsonData",n),[n,i]=nn(),s={line_15:N1e,line_23:q1e,line_24:D1e,line_25:F1e,line_27:B1e,line_17:z1e,line_19:V1e,line_21:$1e,line_29:G1e},o=Rr(()=>Object.entries(r())),a=Rr(()=>Object.keys(r())),u=[15,23,24,25,27,17,19,21,29];function c(P){return Math.floor(Math.random()*P)+1}let l=localStorage.getItem("randomLineSelectionStore");function h(P){return s[`line_${P}`]}if(l===null){const P=E(a).map(A=>{const I=c(u.length-1),N=u[I],d=h(N);return wn(Ec,et(r)[A].svg=d,et(r)),u.splice(I,1),N});localStorage.setItem("randomLineSelectionStore",JSON.stringify(P))}else JSON.parse(l).forEach((A,I)=>{const N=E(a)[I],d=h(parseInt(A,10));N!==void 0&&wn(Ec,et(r)[N].svg=d,et(r))});let v=No(Array(E(a).length).fill(!0));function _(P,A){return P[A]?"transition: max-height .4s ease-in; max-height:405px":"transition: max-height .4s ease-out; max-height:75px"}ln.getSubcomponents().subscribe(P=>{U1e(P)});var m=H1e(),b=gt(m),y=gt(b);I1e(y,{});var w=nt(y,2),T=nt(b,2);Bi(T,23,()=>E(o),([P,A])=>P,(P,A,I)=>{var N=Rr(()=>_c(E(A),2));let d=()=>E(N)[0],C=()=>E(N)[1];var O=j1e(),k=gt(O),F=gt(k),z=gt(F),j=gt(z),J=nt(F,2),oe=nt(k,2);M1e(oe,{get createCanvasDevice(){return t.createCanvasDevice},get zIndex(){return E(I)},get subMenuHeader(){return d()}}),Wt(W=>{ct(O,"id",`menu_group_${E(I)??""}`),$r(O,W),is(j,d()),ct(J,"src",C().svg),ct(J,"alt",`sketched line bottom border for main app bar section ${d()??""}`)},[()=>_(v,E(I))]),ri("mousedown",F,()=>{v[E(I)]=!v[E(I)]}),Ne(P,O)}),Wt(()=>ct(w,"src",L1e)),Ne(e,m),tr(),i()}Gu(["mousedown"]);var X1e=Bt("<div><!></div>"),Y1e=Bt("<div> </div>");function K1e(e,t){er(t,!0);const r=()=>Be(vn,"$CircuitStore",i),n=()=>Be(c,"$rotation",i),[i,s]=nn(),o=(y,w=Fs)=>{{let T=Rr(()=>t.position!==void 0?!1:"cursor"),P=Rr(zi);zA(y,{get drop(){return E(T)},get position(){return t.position},editable:!1,get locked(){return E(P)},get id(){return t.nodeId},$$events:{nodeClicked:A=>{l=A.detail.e.currentTarget.classList.contains("selected")},nodeReleased:A=>{zi()||!l||A.detail.e.shiftKey||(Ot(c,(n()+90)%360),wn(vn,et(r).devices[t.nodeId].rotation=n(),et(r)))}},children:Pg,$$slots:{default:(A,I)=>{const N=Rr(()=>I.selected);var d=X1e();let C;var O=gt(d);el(O,w,(k,F)=>{F(k,Wf({get nodeId(){return t.nodeId}},()=>t.nodeProps))}),ro(d,(k,F)=>h==null?void 0:h(k,F),()=>E(N)),Wt(()=>{$r(d,`transform:rotate(${n()??""}deg)`),C=xn(d,1,"svelte-1t8rngy",null,C,{selected:E(N)})}),Ne(A,d)}}})}},a=y1e(t.gateType);let u=Ve(!1);jr("selected",u);let c=Ve(r().devices[t.nodeId].rotation||0);jr("rotation",c);let l=!1;function h(y,w){return Ot(u,w),{update(T){Ot(u,T)}}}var v=Ut(),_=_t(v);{var m=y=>{o(y,()=>a)},b=y=>{var w=Y1e(),T=gt(w);Wt(()=>is(T,`Unknown gate type: ${t.gateType??""}`)),Ne(y,w)};Kt(_,y=>{a?y(m):y(b,!1)})}Ne(e,v),tr(),s()}var J1e=mn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M.5 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18L1.6 3.11a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.62z"></path><path d="M6.997 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18l-5.08-3.32a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.6zM13.5 2.5v9"></path></g></svg>');function Z1e(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=J1e();yi(n,()=>({viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var Q1e=mn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M1.436 12.33a1.14 1.14 0 0 0 .63 1a1.24 1.24 0 0 0 1.22 0l8.65-5.35a1.11 1.11 0 0 0 0-2L3.286.67a1.24 1.24 0 0 0-1.22 0a1.14 1.14 0 0 0-.63 1z"></path></svg>');function ewe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=Q1e();yi(n,()=>({viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var twe=mn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M4 .5H1.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1H4a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1m8.5 0H10a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h2.5a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1"></path></svg>');function rwe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=twe();yi(n,()=>({viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var nwe=mn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M13.5.5v13m-13-1.84a1 1 0 0 0 .52.88a1 1 0 0 0 1 0l7.19-4.7a1 1 0 0 0 0-1.68L2 1.5a1 1 0 0 0-1 0a1 1 0 0 0-.52.88Z"></path></svg>');function iwe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=nwe();yi(n,()=>({viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var swe=mn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"></path></g></svg>');function owe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=swe();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var awe=mn('<svg><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"></path></svg>');function uwe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=awe();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var cwe=mn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m14-7l-5-5l-5 5m5-5v12"></path></svg>');function lwe(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=cwe();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}function fwe(e,t){const r=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=e+".json",i.click(),URL.revokeObjectURL(n),i.remove()}async function hwe(){return new Promise((e,t)=>{const r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","application/JSON"),r.onchange=()=>{var n;((n=r.files)==null?void 0:n[0]).text().then(i=>e(i)).catch(i=>t(i))},r.select(),r.click(),window.addEventListener("focus",()=>{setTimeout(()=>{var n;((n=r.files)==null?void 0:n.length)===0&&t("File upload cancelled")},1e3)},{once:!0}),r.remove()})}const bA=(e,t)=>{let r=()=>Ree(t==null?void 0:t(),[]);var n=Ut(),i=_t(n);el(i,()=>r().Component,(s,o)=>{o(s,{get style(){return r().styles},width:"30px",height:"100%"})}),Ne(e,n)},od=(e,t=Fs,r=Fs,n,i)=>{let s=Oi(()=>nI(n==null?void 0:n(),"tooltipTest")),o=Oi(()=>nI(i==null?void 0:i(),""));var a=dwe(),u=gt(a);bA(u,t),Wt(()=>{$r(a,E(o)),ct(a,"title",E(s))}),ri("click",a,()=>r()()),Ne(e,a)};var dwe=Bt('<button class="svelte-b6cb1f"><!></button>'),pwe=Bt('<button style="display:flex;align-items: center;padding-block:2px;" class="svelte-b6cb1f"><div style="margin-right:2px;transform:scale(0.85)"><!></div> <p id="tickNumber" class="svelte-b6cb1f"> </p></button>'),vwe=Bt('<div class="floatingMenu svelte-b6cb1f"><div class="menuRunButtons svelte-b6cb1f"><!> <span class="vl svelte-b6cb1f"></span> <!> <span class="vl svelte-b6cb1f"></span> <!> <span class="vl svelte-b6cb1f"></span> <!></div> <div class="editBtnSection svelte-b6cb1f"><!> <span class="vl svelte-b6cb1f" style="margin-block:4px"></span> <!></div></div>');function gwe(e,t){er(t,!0);const r=(A,I=Fs)=>{var N=pwe(),d=gt(N),C=gt(d);{var O=J=>{bA(J,()=>n.pauseTick)},k=Rr(()=>zi()),F=J=>{bA(J,()=>n.playTick)};Kt(C,J=>{E(k)?J(O):J(F,!1)})}var z=nt(d,2),j=gt(z);Wt((J,oe,W)=>{ct(N,"title",J),$r(z,oe),is(j,W)},[()=>zi()?"Pause Simulation":"Play Simulation",()=>zi()?"border-color:green":"border-color:red",cbe]),ri("click",N,()=>I()()),Ne(A,N)},n={playTick:{Component:ewe,width:40},pauseTick:{Component:rwe,width:40},updateGates:{Component:iwe,width:40},updateGatesNext:{Component:Z1e,width:40},save:{Component:owe,width:40},trash:{Component:uwe,width:40},load:{Component:lwe,width:40}},i=()=>{const A=document.querySelector("#logicap");A&&(A.classList.contains("running")?A.classList.remove("running"):A.classList.add("running"))};function s(A){i(),lbe(10)}function o(A){pbe()}function a(A){dbe()}function u(A){rl();const I=JSON.parse(ln.getSaveJson()),N=JSON.stringify(I,null,2);fwe(ln.getMainCircuitName(),N)}function c(A){zi()&&s(),hwe().then(I=>{try{ln.setSaveJson(I),lC(ln.getMainCircuitName(),!1)}catch(N){alert(N)}}).catch(I=>{console.log("circuit upload failed:",I)})}function l(){vn.reset(),t.clearCanvas()}var h=vwe(),v=gt(h),_=gt(v);r(_,()=>s);var m=nt(_,4);od(m,()=>n.updateGates,()=>a,()=>"update gates");var b=nt(m,4);od(b,()=>n.updateGatesNext,()=>o,()=>"update gates next");var y=nt(b,4);od(y,()=>n.trash,()=>l,()=>"Clear Tab");var w=nt(v,2),T=gt(w);od(T,()=>n.save,()=>u,()=>"download circuit json");var P=nt(T,4);od(P,()=>n.load,()=>c,()=>"upload circuit json file"),Ne(e,h),tr()}Gu(["click"]);function SV(e=10){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=crypto.getRandomValues(new Uint8Array(e));return Array.from(r,n=>t[n%t.length]).join("")}function mwe(){const e=()=>{const t=document.querySelector(".svelvet-wrapper");if(t){const r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0});t.dispatchEvent(r);const n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}};document.addEventListener("DOMContentLoaded",()=>{e()})}var ywe=mn('<svg><path fill="currentColor" d="M5 19V5zv-.025zm0 2q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v7q0 .425-.288.713T20 13t-.712-.288T19 12V5H5v14h7q.425 0 .713.288T13 20t-.288.713T12 21zm14.175-1H16q-.425 0-.712-.288T15 19t.288-.712T16 18h3.175l-.9-.9Q18 16.825 18 16.413t.3-.713q.275-.275.7-.275t.7.275l2.6 2.6q.3.3.3.7t-.3.7l-2.6 2.6q-.275.275-.687.288T18.3 22.3q-.275-.275-.275-.7t.275-.7zM11 13v3q0 .425.288.713T12 17t.713-.288T13 16v-3h3q.425 0 .713-.288T17 12t-.288-.712T16 11h-3V8q0-.425-.288-.712T12 7t-.712.288T11 8v3H8q-.425 0-.712.288T7 12t.288.713T8 13z"></path></svg>');function _we(e,t){const r=Ea(t,["$$slots","$$events","$$legacy"]);var n=ywe();yi(n,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),Ne(e,n)}var bwe=Bt('<input type="text" class="svelte-sxmy77"/>'),wwe=Bt('<button type="button" class="tab-title svelte-sxmy77"> </button>'),xwe=Bt('<button type="button" class="delete-btn svelte-sxmy77" title="Delete Tab">Ã</button>'),Swe=Bt("<div><!> <!></div>"),Ewe=Bt('<div class="tabs svelte-sxmy77"><div class="scrollable-tabs svelte-sxmy77"></div> <button type="button" class="new-tab-btn svelte-sxmy77"><!></button></div>');function Awe(e,t){er(t,!0);let r=fn(No([]));ln.getSubcomponents().subscribe(y=>{pe(r,[ln.getMainCircuitName(),...y],!0)});let n=fn("");Lo.subscribe(y=>{pe(n,y,!0)});function i(){const y=E(r).map(w=>{const T=w.match(/^sub_(\d+)$/);return T?parseInt(T[1]):null}).filter(w=>w!==null).reduce((w,T)=>w>T?w:T,0)+1;ln.createSubcomponent(`sub_${y}`)}function s(y){if(!E(r).includes(y)){alert(`Subcomponent '${y}' not found!`);return}E(n)===y&&o(ln.getMainCircuitName()),ln.deleteSubcomponent(y)}function o(y){E(n)!==y&&lC(y)}let a=fn(null),u=fn("");function c(y){pe(a,y,!0),pe(u,y,!0)}function l(){pe(a,null),pe(u,"")}function h(){if(!E(a)){alert("There is no tab being edited! ");return}const y=E(u).trim();if(y){if(E(r).includes(y)){E(a)===y?l():alert("Subcomponent name already exists! Please choose a different name.");return}E(a)===ln.getMainCircuitName()?(ln.setMainCircuitName(y),E(r)[0]=y):ln.renameSubcomponent(E(a),y),E(a)===E(n)&&Lo.set(y),l()}}var v=Ewe(),_=gt(v);Bi(_,23,()=>E(r),(y,w)=>y+w,(y,w)=>{var T=Swe(),P=gt(T);{var A=O=>{var k=bwe();ri("keydown",k,F=>{F.key==="Enter"?h():F.key==="Escape"&&l()}),cr("blur",k,l),Ig(k,()=>E(u),F=>pe(u,F)),Ne(O,k)},I=O=>{var k=wwe(),F=gt(k);Wt(()=>is(F,E(w))),ri("click",k,()=>o(E(w))),ri("dblclick",k,()=>c(E(w))),Ne(O,k)};Kt(P,O=>{E(a)===E(w)?O(A):O(I,!1)})}var N=nt(P,2);{var d=O=>{var k=xwe();ri("click",k,()=>s(E(w))),Ne(O,k)},C=Rr(()=>ln.getMainCircuitName()!==E(w));Kt(N,O=>{E(C)&&O(d)})}Wt(()=>xn(T,1,`tab-item ${E(n)===E(w)?"tab-selected":""}`,"svelte-sxmy77")),Ne(y,T)});var m=nt(_,2),b=gt(m);_we(b,{}),ri("click",m,i),Ne(e,v),tr()}Gu(["keydown","click","dblclick"]);let mX=e=>{},yX=e=>{};function Twe(e,t){mX=e,yX=t}function Pwe(e,t){er(t,!1),Nn(()=>{const r=mr("graph");Twe(r.transforms.scale.set,r.transforms.translation.set),window.getCursor=()=>{let n=Qe(r.cursor);return{x:n.x,y:n.y}}}),Sn(),tr()}function Cwe(e){return console.log("Success new connection made id: "+e),null}const ln=Mre(localStorage.getItem("currentCircuitSave")||void 0);function rl(){Ire(),ln.getCircuit(Qe(Lo)).circuit=Qe(vn),localStorage.setItem("currentCircuitSave",ln.getSaveJson())}const Lo=Ve(localStorage.getItem("currentActiveCircuit")||ln.getMainCircuitName());Lo.subscribe(e=>{localStorage.setItem("currentActiveCircuit",e)});const _X=Ve(!1),Owe=_X;function lC(e,t=!0){t&&rl();const r=ln.getCircuit(e);if(r===null){console.log(`Attempted to load unknown circuit '${e}'!`);return}kre(r.circuit),Lo.set(e),_X.update(n=>!n)}var Iwe=Bt("<!>  <!>",1),Rwe=Bt('<main id="logicap" class="svelte-1n46o8q"><!> <!> <!> <!> <!> <!></main>');function kwe(e,t){er(t,!0);const r=()=>Be(vn,"$CircuitStore",i),n=()=>Be(Lo,"$currentCircuit",i),[i,s]=nn();let o=fn(No({...r().devices}));const a=()=>{pe(o,{},!0),wn(vn,et(r).wireManipulations={},et(r))},u=O=>pe(o,O,!0);let c=fn(1),l=fn(No({x:0,y:0})),h;const v='[class^="svelvet-graph-wrapper"]';function _(O){const k=O.match(/translate\(([-.\d]+)px,\s*([-.\d]+)px\)\s*scale\(([-.\d]+)\)/);if(!k)return;const[,F,z,j]=k.map(Number);let J=ln.getCircuit(Qe(Lo));J!==null&&(J.zoom=j,J.translation={x:F,y:z})}Nn(()=>{const O=ln.getCircuit(Qe(Lo));pe(c,O.zoom,!0),pe(l,O.translation,!0),lC(Qe(Lo),!1),Owe.subscribe(()=>{u(r().devices);const k=ln.getCircuit(Qe(Lo));mX(k.zoom),yX(k.translation)}),mwe(),requestAnimationFrame(()=>{const k=document.querySelector(v);if(!k){console.warn("ZoomTrackerDOM: Svelvet wrapper not found");return}_(k.style.transform),h=new MutationObserver(()=>{_(k.style.transform)}),h.observe(k,{attributes:!0,attributeFilter:["style"]})})}),window.addEventListener("beforeunload",()=>{rl()});function m(O){const k=O.gateType,F=SV();var z;if(k=="TunnelInput"||k=="TunnelOutput"){let j=prompt("Enter tunnel name:");if(!j)return;z=vn.addCircuitDevice(k,F,{celltype:j.toLowerCase()})}else if(O.celltype)try{z=vn.addCircuitDevice(k,F,{celltype:O.celltype,inputs:O.inputs,outputs:O.outputs})}catch{console.log("circuit add aborted");return}else z=vn.addCircuitDevice(k,F);pe(o,z,!0),rl()}function b(){let O=Object.keys(E(o)).map(j=>"N-"+j).map(j=>document.getElementById(j)),k=O.filter(j=>j===null?!1:j.classList.contains("selected"));O.filter(j=>j===null?!1:!j.classList.contains("selected"));let F=E(o);k.map(j=>j===null?"":j.id.substring(2)).forEach(j=>{F=vn.removeCircuitDevice(j)}),pe(o,F,!0),rl()}async function y(){var D,B;let k=Object.keys(E(o)).map(U=>"N-"+U).map(U=>document.getElementById(U)).filter(U=>U===null?!1:U.classList.contains("selected"));if(k.length===0)return;let F=k.map(U=>U===null?"":U.id.substring(2));rl();let z=JSON.parse(JSON.stringify((D=ln.getCircuit(n()))==null?void 0:D.circuit));if(z===null){console.log("if you are seeing this, very bad things have happened");return}let j={devices:{},connectors:{},subcircuits:{}};j.devices=Object.fromEntries(Object.entries(z.devices).filter(([U])=>F.includes(U)));let J=Object.values(j.devices).filter(U=>U.type==="Subcircuit").map(U=>U.celltype),oe=[...J];for(;oe.length>0;){let U=oe.pop();J.includes(U)||J.push(U);let ie=(B=ln.getCircuit(U))==null?void 0:B.circuit;for(let se of Object.values((ie==null?void 0:ie.devices)??{}))se.type==="Subcircuit"&&oe.push(se.celltype)}J.forEach(U=>{j.subcircuits[U]=ln.getCircuit(U)});let W=(U,ie)=>ie.some(se=>U.endsWith(se));j.connectors=z.connectors;for(const U of Object.keys(j.connectors))if(W(U,F)){let ie=j.connectors[U].filter(se=>F.includes(se[0]));j.connectors[U]=ie}else delete j.connectors[U];await navigator.clipboard.writeText(JSON.stringify(j))}function w(){navigator.clipboard.readText().then(O=>{let k=JSON.parse(O),F={};const z=Object.values(k.devices).map(D=>D.position),j=Math.min(...z.map(D=>D.x));Math.max(...z.map(D=>D.x));const J=Math.min(...z.map(D=>D.y));Math.max(...z.map(D=>D.y));let oe=window.getCursor(),W=null;for(let D of Object.keys(k.devices)){F[D]=D.split("_")[0]+"_"+SV();let B=k.devices[D].type,U=k.devices[D],ie=U.position.x-j,se=U.position.y-J,xe={...U};xe.position={x:oe.x+ie,y:oe.y+se},delete xe.label,delete xe.net,W=vn.addCircuitDevice(B,F[D].split("_")[1],xe)}pe(o,W,!0);for(let D of Object.keys(k.connectors)){let B=D.split("_")[0]+"_"+F[D.split("_").slice(1).join("_")];for(let U of k.connectors[D]){let ie=F[U[0]],se=U[1].replace(U[0],ie);console.log("adding",B,se),vn.addConnection(B,se)}}for(let D of Object.keys(k.subcircuits))ln.createSubcomponent(D),ln.setCircuit(D,k.subcircuits[D]);rl()})}var T=Rwe(),P=gt(T);kbe(P,{});var A=nt(P,2);W1e(A,{createCanvasDevice:m});var I=nt(A,2);gwe(I,{clearCanvas:a});var N=nt(I,2);E1e(N,{createCanvasDevice:m,deletedSelectedNodes:b,copySelectedNodes:y,pasteNodes:w});var d=nt(N,2);Awe(d,{});var C=nt(d,2);Pse(C,{theme:"LogiCap",get zoom(){return E(c)},get translation(){return E(l)},editable:!1,disableSelection:!1,controls:!0,children:(O,k)=>{var F=Iwe(),z=_t(F);Pwe(z,{});var j=nt(z,2);Bi(j,17,()=>Object.entries(E(o)),([J,oe])=>J,(J,oe)=>{var W=Rr(()=>_c(E(oe),2));let D=()=>E(W)[0],B=()=>E(W)[1];{let U=Rr(()=>({...B().type&&{gateType:B().type},width:80,height:50,...B().celltype&&{celltype:B().celltype,inputs:B().inputs,outputs:B().outputs}}));K1e(J,{get gateType(){return B().type},get position(){return B().position},get nodeId(){return D()},get nodeProps(){return E(U)}})}}),Ne(O,F)},$$slots:{default:!0,minimap:(O,k)=>{Y$(O,{width:100,corner:"NE",slot:"minimap"})},toggle:(O,k)=>{K$(O,{main:"LogiCap",corner:"NW",alt:"LogiCap",slot:"toggle"})}}}),Ne(e,T),tr(),s()}Hte(kwe,{target:document.getElementById("app")});export{xie as A,Ig as B,gI as C,io as D,ao as E,is as F,Ve as G,Nn as H,co as I,qe as J,_t as K,pe as L,ff as M,Hv as N,mn as O,el as P,ct as Q,Bi as R,fe as a,br as b,xn as c,Ne as d,tr as e,Bt as f,mr as g,nn as h,Sn as i,Kt as j,E as k,gt as l,nt as m,Oi as n,$r as o,er as p,cr as q,qo as r,Be as s,Wt as t,Rr as u,et as v,St as w,Qe as x,Bo as y,DI as z};
