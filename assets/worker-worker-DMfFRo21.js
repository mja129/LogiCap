(function(){"use strict";const Ri={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},IO=Object.keys(Ri).map(t=>Ri[t]).join(""),xl="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",NO=/\s/g,Vb=new RegExp(`^(${xl}\\*)?([${IO}])(/${xl})?([-+]{1,2}${xl})?$`,"g");function zb(t){throw new Error(`Invalid calc() expression: ${t}`)}function DO(t,e){const n=Vb.exec(t.replace(NO,""));n||zb(t),Vb.lastIndex=0;const[,r,i,s,a]=n,{x:u,y:c,width:l,height:g}=e;let p=0;switch(i){case Ri.width:{p=l;break}case Ri.height:{p=g;break}case Ri.x:{p=u;break}case Ri.y:{p=c;break}case Ri.minimum:{p=Math.min(g,l);break}case Ri.maximum:{p=Math.max(g,l);break}case Ri.diagonal:{p=Math.sqrt(g*g+l*l);break}}return r&&(p*=parseFloat(r)),s&&(p/=parseFloat(s.slice(1))),a&&(p+=qO(a)),p}function qO(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function xr(t){return typeof t=="string"&&t.includes("calc")}const Gb="calc(",Ub=Gb.length;function Ar(t,e){let n=t,r=0;do{let i=n.indexOf(Gb,r);if(i===-1)return n;let s=i+Ub,a=1;t:do{switch(n[s]){case"(":{a++;break}case")":{if(a--,a===0)break t;break}case void 0:zb(n)}s++}while(!0);let u=n.slice(i+Ub,s);xr(u)&&(u=Ar(u,e));const c=String(DO(u,e));n=n.slice(0,i)+c+n.slice(s+1),r=i+c.length}while(!0)}const{round:BO,floor:FO,PI:Hb}=Math,VO={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},Hr=function(t){return t%360+(t<0?360:0)},Rs=function(t,e){return e*BO(t/e)},Vu=function(t){return 180*t/Hb%360},Yn=function(t,e){return e=e||!1,t=e?t:t%360,t*Hb/180},Al=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return FO(Math.random()*(e-t+1)+t)},{cos:zu,sin:Sl,atan2:zO}=Math,$b=function(t,e){var n=Yn(t.y),r=Yn(e.y),i=t.x,s=e.x,a=Yn(s-i),u=Sl(a)*zu(r),c=zu(n)*Sl(r)-Sl(n)*zu(r)*zu(a),l=Vu(zO(u,c)),g=["NE","E","SE","S","SW","W","NW","N"],p=l-22.5;return p<0&&(p+=360),p=parseInt(p/45),g[p]},Tl=function(t,e){var n=t.x,r=t.y,i=e.x,s=e.y;return(n-=i)*n+(r-=s)*r},Wb=function(t,e){return Math.sqrt(Tl(t,e))},ge={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Gu,cos:El,sin:Pl,sqrt:jb,min:Xb,max:Yb,atan2:GO,round:Kb,pow:UO,PI:Zb}=Math,Q=function(t,e){if(!(this instanceof Q))return new Q(t,e);if(typeof t=="string"){var n=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};Q.fromPolar=function(t,e,n){n=new Q(n);var r=Gu(t*El(e)),i=Gu(t*Pl(e)),s=Hr(Vu(e));return s<90?i=-i:s<180?(r=-r,i=-i):s<270&&(r=-r),new Q(n.x+r,n.y+i)},Q.random=function(t,e,n,r){return new Q(Al(t,e),Al(n,r))},Q.prototype={type:ge.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new Q(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var s=new Q(t[i]),a=this.squaredDistance(s);a<r&&(n=s,r=a)}return n},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=Xb(Yb(this.x,t.x),t.x+t.width),this.y=Xb(Yb(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return $b(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new Q(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new Q(this.x-(t||0),this.y-(e||0))},distance:function(t){return Wb(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new Q((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return jb(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Gu(t.x-this.x)+Gu(t.y-this.y)},move:function(t,e){var n=Yn(new Q(t).theta(this)),r=this.offset(El(n)*e,-Pl(n)*e);return r},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new Q(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new Q(0,0),e=Yn(Hr(-e));var n=El(e),r=Pl(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,s=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=s,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=UO(10,t);break}return this.x=Kb(this.x*e)/e,this.y=Kb(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new Q(n)||new Q(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Rs(this.x,t),this.y=Rs(this.y,e||t),this},squaredDistance:function(t){return Tl(this,t)},theta:function(t){t=new Q(t);var e=-(t.y-this.y),n=t.x-this.x,r=GO(e,n);return r<0&&(r=2*Zb+r),180*r/Zb},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new Q(t)||new Q(0,0);var e=this.x,n=this.y;return this.x=jb((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=Yn(t.theta(new Q(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new Q(0,0);return e.angleBetween(this,t)}},Q.prototype.translate=Q.prototype.offset;const Uu=Q,{max:Cl,min:Ll}=Math,Dt=function(t,e){if(!(this instanceof Dt))return new Dt(t,e);if(t instanceof Dt)return new Dt(t.start,t.end);this.start=new Q(t),this.end=new Q(e)};Dt.prototype={type:ge.Line,angle:function(){var t=new Q(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=Ll(this.start.x,this.end.x),e=Ll(this.start.y,this.end.y),n=Cl(this.start.x,this.end.x),r=Cl(this.start.y,this.end.y);return new It(t,e,n-t,r-e)},bearing:function(){return $b(this.start,this.end)},clone:function(){return new Dt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new Dt(this.start,t).vector()),n=Ll(1,Cl(0,e/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(e.cross(t,n)!==0)return!1;var r=this.length();return!(new Dt(e,t).length()>r||new Dt(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new Dt(this.start,e),new Dt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new Dt(this.start,e),new Dt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof Dt&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new Q(this.end.x-this.start.x,this.end.y-this.start.y),n=new Q(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new Q(t.start.x-this.start.x,t.start.y-this.start.y),s=i.x*n.y-i.y*n.x,a=i.x*e.y-i.y*e.x;if(r===0||s*r<0||a*r<0)return null;if(r>0){if(s>r||a>r)return null}else if(s<r||a<r)return null;return[new Q(this.start.x+s*e.x/r,this.start.y+s*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Wb(this.start,this.end)},midpoint:function(){return new Q((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),s=r.clone().rotate(n,90);return n.move(s,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new Q(t);var e=this.start,n=this.end,r=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x);return r/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return Tl(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new Dt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new Dt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new Q(this.end.x-this.start.x,this.end.y-this.start.y)}},Dt.prototype.intersection=Dt.prototype.intersect;const Os=Dt,{sqrt:Jb,round:Hu,pow:HO}=Math,qn=function(t,e,n){if(!(this instanceof qn))return new qn(t,e,n);if(t instanceof qn)return new qn(new Q(t.x,t.y),t.a,t.b);t=new Q(t),this.x=t.x,this.y=t.y,this.a=e,this.b=n};qn.fromRect=function(t){return t=new It(t),new qn(t.center(),t.width/2,t.height/2)},qn.prototype={type:ge.Ellipse,bbox:function(){return new It(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new Q(this.x,this.y)},clone:function(){return new qn(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,s=this.b,a=t.vector(),u=n.difference(new Q(this)),c=new Q(a.x/(i*i),a.y/(s*s)),l=new Q(u.x/(i*i),u.y/(s*s)),g=a.dot(c),p=a.dot(l),y=u.dot(l)-1,_=p*p-g*y;if(_<0)return null;if(_>0){var w=Jb(_),x=(-p-w)/g,T=(-p+w)/g;if((x<0||1<x)&&(T<0||1<T))return null;0<=x&&x<=1&&e.push(n.lerp(r,x)),0<=T&&T<=1&&e.push(n.lerp(r,T))}else{var P=-p/g;if(0<=P&&P<=1)e.push(n.lerp(r,P));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new Q(t),e&&t.rotate(new Q(this.x,this.y),e);var n=t.x-this.x,r=t.y-this.y,i;if(n===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new Q(this.x,this.y),-e):i;var s=r/n,a=s*s,u=this.a*this.a,c=this.b*this.b,l=Jb(1/(1/u+a/c));l=n<0?-l:l;var g=s*l;return i=new Q(this.x+l,this.y+g),e?i.rotate(new Q(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,s=this.x,a=this.y;return(e-s)*(e-s)/(r*r)+(n-a)*(n-a)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=HO(10,t);break}return this.x=Hu(this.x*e)/e,this.y=Hu(this.y*e)/e,this.a=Hu(this.a*e)/e,this.b=Hu(this.b*e)/e,this},tangentTheta:function(t){var e=30,n=t.x,r=t.y,i=this.a,s=this.b,a=this.bbox().center(),u=a.x,c=a.y,l=n>a.x+i/2,g=n<a.x-i/2,p,y;return l||g?(p=n>a.x?r-e:r+e,y=i*i/(n-u)-i*i*(r-c)*(p-c)/(s*s*(n-u))+u):(y=r>a.y?n+e:n-e,p=s*s/(r-c)-s*s*(n-u)*(y-u)/(i*i*(r-c))+c),new Q(y,p).theta(t)},toString:function(){return new Q(this.x,this.y).toString()+" "+this.a+" "+this.b}};const $O=qn,{abs:Qb,cos:WO,sin:jO,min:ho,max:t_,round:$u,pow:XO}=Math,It=function(t,e,n,r){if(!(this instanceof It))return new It(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=n===void 0?0:n,this.height=r===void 0?0:r};It.fromEllipse=function(t){return t=new qn(t),new It(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},It.fromPointUnion=function(...t){if(t.length===0)return null;const e=new Q;let n,r,i,s;n=r=1/0,i=s=-1/0;for(let a=0;a<t.length;a++){e.update(t[a]);const u=e.x,c=e.y;u<n&&(n=u),u>i&&(i=u),c<r&&(r=c),c>s&&(s=c)}return new It(n,r,i-n,s-r)},It.fromRectUnion=function(...t){if(t.length===0)return null;const e=new It;let n,r,i,s;n=r=1/0,i=s=-1/0;for(let a=0;a<t.length;a++){e.update(t[a]);const u=e.x,c=e.y,l=u+e.width,g=c+e.height;u<n&&(n=u),l>i&&(i=l),c<r&&(r=c),g>s&&(s=g)}return new It(n,r,i-n,s-r)},It.prototype={type:ge.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=Yn(t),i=Qb(jO(r)),s=Qb(WO(r)),a=e*s+n*i,u=e*i+n*s;return this.x+=(e-a)/2,this.y+=(n-u)/2,this.width=a,this.height=u,this},bottomLeft:function(){return new Q(this.x,this.y+this.height)},bottomLine:function(){return new Dt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new Q(this.x+this.width/2,this.y+this.height)},center:function(){return new Q(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new It(this)},containsPoint:function(t){return t instanceof Q||(t=new Q(t)),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new It(this).normalize(),n=new It(t).normalize(),r=e.width,i=e.height,s=n.width,a=n.height;if(!r||!i||!s||!a)return!1;var u=e.x,c=e.y,l=n.x,g=n.y;return s+=l,r+=u,a+=g,i+=c,u<=l&&s<=r&&c<=g&&a<=i},corner:function(){return new Q(this.x+this.width,this.y+this.height)},equals:function(t){var e=new It(this).normalize(),n=new It(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var s=t_(e.x,r.x),a=t_(e.y,r.y);return new It(s,a,ho(n.x,i.x)-s,ho(n.y,i.y)-a)},intersectionWithLine:function(t){var e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],i=[],s,a,u=n.length;for(a=0;a<u;a++)s=t.intersect(n[a]),s!==null&&i.indexOf(s.toString())<0&&(r.push(s),i.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new Q(t);var n=new Q(this.x+this.width/2,this.y+this.height/2),r;e&&t.rotate(n,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new Dt(n,t),a=i.length-1;a>=0;--a){var u=i[a].intersection(s);if(u!==null){r=u;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new Dt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new Q(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new It(t),e||(e=t.center());var n,r,i,s,a,u,c,l,g=e.x,p=e.y;n=r=i=s=a=u=c=l=1/0;var y=t.topLeft();y.x<g&&(n=(this.x-g)/(y.x-g)),y.y<p&&(a=(this.y-p)/(y.y-p));var _=t.bottomRight();_.x>g&&(r=(this.x+this.width-g)/(_.x-g)),_.y>p&&(u=(this.y+this.height-p)/(_.y-p));var w=t.topRight();w.x>g&&(i=(this.x+this.width-g)/(w.x-g)),w.y<p&&(c=(this.y-p)/(w.y-p));var x=t.bottomLeft();return x.x<g&&(s=(this.x-g)/(x.x-g)),x.y>p&&(l=(this.y+this.height-p)/(x.y-p)),{sx:ho(n,r,i,s),sy:ho(a,u,c,l)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return ho(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return Q.prototype.offset.call(this,t,e)},origin:function(){return new Q(this.x,this.y)},pointNearestToPoint:function(t){if(t=new Q(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new Q(this.x+this.width,t.y);case"left":return new Q(this.x,t.y);case"bottom":return new Q(t.x,this.y+this.height);case"top":return new Q(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new Dt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new Q(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=XO(10,t);break}return this.x=$u(this.x*e)/e,this.y=$u(this.y*e)/e,this.width=$u(this.width*e)/e,this.height=$u(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new Q(t);var e=t.x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=this.y+this.height-t.y,s=e,a="left";return n<s&&(s=n,a="right"),r<s&&(s=r,a="top"),i<s&&(a="bottom"),a},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Dt(this.topLeft(),this.topRight())},topMiddle:function(){return new Q(this.x+this.width/2,this.y)},topRight:function(){return new Q(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return It.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}},It.prototype.bottomRight=It.prototype.corner,It.prototype.topLeft=It.prototype.origin,It.prototype.translate=It.prototype.offset;const YO=It;function e_(t){const e=t.trim();if(e==="")return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let s=0;s<i;s+=2)n.push({x:+r[s],y:+r[s+1]});return n}function n_(t){const e=t.length;if(e===0)return[];const n=[];for(let r=0;r<e;r++){const i=t[r].clone();n.push(i)}return n}function r_(t){const{abs:e}=Math;var n,r,i=t.length;if(i===0)return[];var s;for(n=0;n<i;n++)(s===void 0||t[n].y<s.y||t[n].y===s.y&&t[n].x>s.x)&&(s=t[n]);var a=[];for(n=0;n<i;n++){var u=s.theta(t[n]);u===0&&(u=360);var c=[t[n],n,u];a.push(c)}if(a.sort(function(Y,pt){var Tt=Y[2]-pt[2];return Tt===0&&(Tt=pt[1]-Y[1]),Tt}),a.length>2){var l=a[a.length-1];a.unshift(l)}for(var g={},p=[],y,_,w,x,T,P;a.length!==0;)if(y=a.pop(),_=y[0],!g.hasOwnProperty(y[0]+"@@"+y[1]))for(var k=!1;!k;)if(p.length<2)p.push(y),k=!0;else{w=p.pop(),x=w[0],T=p.pop(),P=T[0];var q=P.cross(x,_);if(q<0)p.push(T),p.push(w),p.push(y),k=!0;else if(q===0){var B=1e-10,H=x.angleBetween(P,_);e(H-180)<B||x.equals(_)||P.equals(x)?(g[w[0]+"@@"+w[1]]=x,p.push(T)):e((H+1)%360-1)<B&&(p.push(T),a.push(w))}else g[w[0]+"@@"+w[1]]=x,p.push(T)}p.length>2&&p.pop();var X,d=-1;for(r=p.length,n=0;n<r;n++){var E=p[n][1];(X===void 0||E<X)&&(X=E,d=n)}var L=[];if(d>0){var I=p.slice(d),G=p.slice(0,d);L=I.concat(G)}else L=p;var K=[];for(r=L.length,n=0;n<r;n++)K.push(L[n][0]);return K}const ze=function(t){if(!(this instanceof ze))return new ze(t);if(typeof t=="string")return new ze.parse(t);this.points=Array.isArray(t)?t.map(Q):[]};ze.parse=function(t){return new ze(e_(t))},ze.fromRect=function(t){return new ze([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},ze.prototype={type:ge.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var a=0;a<s;a++){var u=i[a],c=u.x,l=u.y;c<t&&(t=c),c>e&&(e=c),l<n&&(n=l),l>r&&(r=l)}return new It(t,n,e-t,r-n)},clone:function(){return new ze(n_(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return 0;for(var r,i=1/0,s=0,a=n-1,u=0;u<a;u++){var c=new Dt(e[u],e[u+1]),l=c.length(),g=c.closestPointNormalizedLength(t),p=c.pointAt(g),y=p.squaredDistance(t);y<i&&(i=y,r=s+g*l),s+=l}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var n=this.length();return n===0?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(n===0)return!1;for(var r=t.x,i=t.y,s=n-1,a=0,u=0,c=new Dt,l=new Dt,g=new Q;a<n;a++){var p=e[s],y=e[a];if(t.equals(p)||(c.start=p,c.end=y,c.containsPoint(t)))return!0;if(i<=p.y&&i>y.y||i>p.y&&i<=y.y){var _=p.x-r>y.x-r?p.x-r:y.x-r;_>=0&&(g.x=r+_,g.y=i,l.start=t,l.end=g,c.intersect(l)&&u++)}s=a}return u%2===1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new ze(r_(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var s=e[i],a=t.points[i];if(!s.equals(a))return!1}return!0},intersectionWithLine:function(t){for(var e=new Dt(t),n=[],r=this.lengthPoints(),i=new Dt,s=0,a=r.length-1;s<a;s++){i.start=r[s],i.end=r[s+1];var u=e.intersectionWithLine(i);u&&n.push(u[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var n=new Dt,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length(),i=r*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,s=n-1,a=0;a<s;a++){var u=r?a:s-1-a,c=e[u],l=e[u+1],g=new Dt(c,l),p=c.distance(l);if(t<=i+p)return g.pointAtLength((r?1:-1)*(t-i));i+=p}var y=r?e[n-1]:e[0];return y.clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,s=0;s<i;s++)r[s].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||1e-10;let r=0;for(;e[r+2];){const i=r,s=r+1,a=r+2,u=e[i],c=e[s],l=e[a];new Dt(u,l).closestPoint(c).distance(c)<=n?e.splice(s,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length(),i=r*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i,s=0,a=n-1,u=0;u<a;u++){var c=r?u:a-1-u,l=e[c],g=e[c+1],p=new Dt(l,g),y=l.distance(g);if(p.isDifferentiable()){if(t<=s+y)return p.tangentAtLength((r?1:-1)*(t-s));i=p}s+=y}if(i){var _=r?1:0;return i.tangentAt(_)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}},Object.defineProperty(ze.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}}),Object.defineProperty(ze.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});const{abs:Wu,sqrt:KO,min:i_,max:s_,pow:Rl}=Math,Ie=function(t,e,n,r){if(!(this instanceof Ie))return new Ie(t,e,n,r);if(t instanceof Ie)return new Ie(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new Q(t),this.controlPoint1=new Q(e),this.controlPoint2=new Q(n),this.end=new Q(r)};Ie.throughPoints=function(){function t(n){var r=[],i=[],s=n.length-1,a;if(s==1)return r[0]=new Q((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new Q(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];var u=[];for(a=1;a<s-1;a++)u[a]=4*n[a].x+2*n[a+1].x;u[0]=n[0].x+2*n[1].x,u[s-1]=(8*n[s-1].x+n[s].x)/2;var c=e(u);for(a=1;a<s-1;++a)u[a]=4*n[a].y+2*n[a+1].y;u[0]=n[0].y+2*n[1].y,u[s-1]=(8*n[s-1].y+n[s].y)/2;var l=e(u);for(a=0;a<s;a++)r.push(new Q(c[a],l[a])),a<s-1?i.push(new Q(2*n[a+1].x-c[a+1],2*n[a+1].y-l[a+1])):i.push(new Q((n[s].x+c[s-1])/2,(n[s].y+l[s-1])/2));return[r,i]}function e(n){var r=n.length,i=[],s=[],a=2;i[0]=n[0]/a;for(var u=1;u<r;u++)s[u]=1/a,a=(u<r-1?4:3.5)-s[u],i[u]=(n[u]-i[u-1])/a;for(u=1;u<r;u++)i[r-u-1]-=s[r-u]*i[r-u];return i}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=t(n),i=[],s=r[0].length,a=0;a<s;a++){var u=new Q(r[0][a].x,r[0][a].y),c=new Q(r[1][a].x,r[1][a].y);i.push(new Ie(n[a],u,c,n[a+1]))}return i}}(),Ie.prototype={type:ge.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,i=t.x,s=t.y,a=e.x,u=e.y,c=n.x,l=n.y,g=r.x,p=r.y,y=new Array,_=new Array,w=[new Array,new Array],x,T,P,k,q,B,H,X,d=0;d<2;++d){if(d===0?(T=6*i-12*a+6*c,x=-3*i+9*a-9*c+3*g,P=3*a-3*i):(T=6*s-12*u+6*l,x=-3*s+9*u-9*l+3*p,P=3*u-3*s),Wu(x)<1e-12){if(Wu(T)<1e-12)continue;k=-P/T,0<k&&k<1&&_.push(k);continue}H=T*T-4*P*x,X=KO(H),!(H<0)&&(q=(-T+X)/(2*x),0<q&&q<1&&_.push(q),B=(-T-X)/(2*x),0<B&&B<1&&_.push(B))}for(var E=_.length,L=E,I,G,K;E--;)k=_[E],I=1-k,G=I*I*I*i+3*I*I*k*a+3*I*k*k*c+k*k*k*g,w[0][E]=G,K=I*I*I*s+3*I*I*k*u+3*I*k*k*l+k*k*k*p,w[1][E]=K,y[E]={X:G,Y:K};_[L]=0,_[L+1]=1,y[L]={X:i,Y:s},y[L+1]={X:g,Y:p},w[0][L]=i,w[1][L]=s,w[0][L+1]=g,w[1][L+1]=p,_.length=L+2,w[0].length=L+2,w[1].length=L+2,y.length=L+2;var Y=i_.apply(null,w[0]),pt=i_.apply(null,w[1]),Tt=s_.apply(null,w[0]),at=s_.apply(null,w[1]);return new It(Y,pt,Tt-Y,at-pt)},clone:function(){return new Ie(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},s=this.closestPointLength(t,i);if(!s)return 0;var a=this.length(i);return a===0?0:s/a},closestPointT:function(t,e){e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i,s,a,u,c,l,g,p=r.length,y=p?1/p:0,_=0;_<p;_++){var w=r[_],x=w.start.distance(t),T=w.end.distance(t),P=x+T;(!g||P<g)&&(i=w,s=_*y,a=(_+1)*y,u=x,c=T,l=w.start.distance(w.end),g=P)}for(var k=Rl(10,-n);;){var q=u?Wu(u-c)/u:0,B=c?Wu(u-c)/c:0,H=q<k||B<k,X=u?u<l*k:!0,d=c?c<l*k:!0,E=X||d;if(H||E)return u<=c?s:a;var L=i.divide(.5);y/=2;var I=L[0].start.distance(t),G=L[0].end.distance(t),K=I+G,Y=L[1].start.distance(t),pt=L[1].end.distance(t),Tt=Y+pt;K<=Tt?(i=L[0],a-=y,u=I,c=G):(i=L[1],s+=y,u=Y,c=pt)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var n=this.toPolyline(e);return n.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new Ie(e,e,e,e),new Ie(e,n,r,i)];if(t>=1)return[new Ie(e,n,r,i),new Ie(i,i,i,i)];var s=this.getSkeletonPoints(t),a=s.startControlPoint1,u=s.startControlPoint2,c=s.divider,l=s.dividerControlPoint1,g=s.dividerControlPoint2;return[new Ie(e,a,u,c),new Ie(c,l,g,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new Dt(e,n).pointAt(t),a=new Dt(n,r).pointAt(t),u=new Dt(r,i).pointAt(t),c=new Dt(s,a).pointAt(t),l=new Dt(a,u).pointAt(t),g=new Dt(c,l).pointAt(t),p={startControlPoint1:s,startControlPoint2:c,divider:g,dividerControlPoint1:l,dividerControlPoint2:u};return p},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end,a=[new Ie(n,r,i,s)];if(e===0)return a;var u=!this.isDifferentiable();if(u)return a;var c=this.endpointDistance(),l=Rl(10,-e),g=2,p=r.cross(n,s)===0&&i.cross(n,s)===0;p&&(g=2*e);for(var y=0;;){y+=1;for(var _=[],w=a.length,x=0;x<w;x++){var T=a[x],P=T.divide(.5);_.push(P[0],P[1])}for(var k=0,q=_.length,B=0;B<q;B++){var H=_[B];k+=H.endpointDistance()}if(y>=g){var X=k!==0?(k-c)/k:0;if(X<l)return _}a=_,c=k}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,s=0;s<i;s++){var a=n[s];r+=a.endpointDistance()}return r},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=this.divide(t)[0],i=r.length({precision:n});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,s=new Dt(n,r);return s.translate(i.x-n.x,i.y-n.y),s},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},s=this.length(i),a=s*t;return this.tAtLength(a,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t),e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,s={precision:r,subdivisions:i},a,u,c,l,g,p=0,y=i.length,_=1/y,w=0;w<y;w++){var x=n?w:y-1-w,T=i[w],P=T.endpointDistance();if(t<=p+P){a=T,u=x*_,c=(x+1)*_,l=n?t-p:P+p-t,g=n?P+p-t:t-p;break}p+=P}if(!a)return n?1:0;for(var k=this.length(s),q=Rl(10,-r);;){var B;if(B=k!==0?l/k:0,B<q)return u;if(B=k!==0?g/k:0,B<q)return c;var H,X,d=a.divide(.5);_/=2;var E=d[0].endpointDistance(),L=d[1].endpointDistance();l<=E?(a=d[0],c-=_,H=l,X=E-H):(a=d[1],u+=_,H=l-E,X=L-H),l=H,g=X}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,s=0;s<i;s++){var a=n[s];r.push(a.end.clone())}return r},toPolyline:function(t){return new ze(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},Ie.prototype.divide=Ie.prototype.divideAtT;function po(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var s=r[e],a,u;for(u in s)s.hasOwnProperty(u)&&(delete i[u],a=Object.getOwnPropertyDescriptor(s,u),Object.defineProperty(i,u,a))}return i}const jt=function(t){if(!(this instanceof jt))return new jt(t);if(typeof t=="string")return new jt.parse(t);this.segments=[];var e,n;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(u,c){return u.concat(c)},[]),n=t.length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var s=t[e];if(!(s instanceof Dt||s instanceof Ie))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(jt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(jt.createSegment("M",s.start)),s instanceof Dt?this.appendSegment(jt.createSegment("L",s.end)):s instanceof Ie&&this.appendSegment(jt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof Dt)this.appendSegment(jt.createSegment("M",t.start)),this.appendSegment(jt.createSegment("L",t.end));else if(t instanceof Ie)this.appendSegment(jt.createSegment("M",t.start)),this.appendSegment(jt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof ze){if(!(t.points&&t.points.length!==0))return;for(n=t.points.length,e=0;e<n;e++){var a=t.points[e];e===0?this.appendSegment(jt.createSegment("M",a)):this.appendSegment(jt.createSegment("L",a))}}else throw new Error("Cannot construct a path from the provided object.")};jt.parse=function(t){if(!t)return new jt;for(var e=new jt,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=t.match(n),i=r.length,s=0;s<i;s++){var a=r[s],u=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,c=a.match(u),l=jt.createSegment.apply(this,c);e.appendSegment(l)}return e},jt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=jt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return ui(e,n)},jt.prototype={type:ge.Path,appendSegment:function(t){var e=this.segments,n=e.length,r,i=n!==0?e[n-1]:null,s=null;if(Array.isArray(t)){if(t=t.reduce(function(l,g){return l.concat(g)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++){var c=t[u];r=this.prepareSegment(c,i,s),e.push(r),i=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,i,s),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n,r=0;r<e;r++){var i=t[r];if(i.isVisible){var s=i.bbox();n=n?n.union(s):s}}if(n)return n;var a=t[e-1];return new It(a.end.x,a.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new jt,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},s=this.closestPointT(t,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},s=this.closestPointLength(t,i);if(s===0)return 0;var a=this.length(i);return a===0?0:s/a},closestPointT:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,u=1/0,c=0;c<r;c++){var l=n[c],g=s[c];if(l.isVisible){var p=l.closestPointT(t,{precision:i,subdivisions:g}),y=l.pointAtT(p),_=new Dt(y,t).squaredLength();_<u&&(a={segmentIndex:c,value:p},u=_)}}return a||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,u=1/0,c=0;c<r;c++){var l=n[c],g=s[c];if(l.isDifferentiable()){var p=l.closestPointT(t,{precision:i,subdivisions:g}),y=l.pointAtT(p),_=new Dt(y,t).squaredLength();_<u&&(a=l.tangentAtT(p),u=_)}}return a||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,s=0;s<r;s++){var a=n[s];a.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:s},u=this.length(a),c=u*t;return this.divideAtLength(c,a)},divideAtLength:function(t,e){var n=this.segments.length;if(n===0)return null;var r=!0;t<0&&(r=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,u,c=0,l,g,p,y,_;for(a=0;a<n;a++){var w=r?a:n-1-a;u=this.getSegment(w);var x=s[w],T=u.length({precision:i,subdivisions:x});if(u.isDifferentiable()&&(p=u,y=w,t<=c+T)){g=w,l=u.divideAtLength((r?1:-1)*(t-c),{precision:i,subdivisions:x});break}c+=T}if(!p)return null;l||(g=y,_=r?1:0,l=p.divideAtT(_));var P=this.clone();P.replaceSegment(g,l);var k=g,q=g+1,B=g+2;l[0].isDifferentiable()||(P.removeSegment(k),q-=1,B-=1);var H=P.getSegment(q).start;P.insertSegment(q,jt.createSegment("M",H)),B+=1,l[1].isDifferentiable()||(P.removeSegment(B-1),B-=1);var X=B-k-1;for(a=B;a<P.segments.length;a++){var d=this.getSegment(a-X);if(u=P.getSegment(a),u.type==="Z"&&!d.subpathStartSegment.end.equals(u.subpathStartSegment.end)){var E=jt.createSegment("L",d.end);P.replaceSegment(a,E)}}var L=new jt(P.segments.slice(0,q)),I=new jt(P.segments.slice(q));return[L,I]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var s=e[i],a=n[i];if(s.type!==a.type||!s.equals(a))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,n=e.length;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=[],s=0;s<n;s++){var a=e[s],u=a.getSubdivisions({precision:r});i.push(u)}return i},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let i=0;i<n;i++){const s=e[i];s.isSubpathStart?r.push(new jt(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var i,s=null,a=null;if(r!==0&&(t>=1?(s=n[t-1],a=s.nextSegment):a=n[0]),Array.isArray(e)){if(e=e.reduce(function(g,p){return g.concat(p)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var u=e.length,c=0;c<u;c++){var l=e[c];i=this.prepareSegment(l,s,a),n.splice(t+c,0,i),s=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,a),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,s=r.length;i<s;i++){var a=r[i],u=t.intersect(a);u&&(n||(n=[]),Array.isArray(u)?Array.prototype.push.apply(n,u):n.push(u))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++){var r=t[n];if(r.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,n=e.length;if(n===0)return 0;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,s=0,a=0;a<n;a++){var u=e[a],c=i[a];s+=u.length({subdivisions:c})}return s},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(r===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var s=t.value;i>=r?(i=r-1,s=1):s<0?s=0:s>1&&(s=1),e=e||{};for(var a=e.precision===void 0?this.PRECISION:e.precision,u=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c,l=0,g=0;g<i;g++){var p=n[g];c=u[g],l+=p.length({precisison:a,subdivisions:c})}return p=n[i],c=u[i],l+=p.lengthAtT(s,{precisison:a,subdivisions:c}),l},pointAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:s},u=this.length(a),c=u*t;return this.pointAtLength(c,a)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u,c=0,l=0;l<r;l++){var g=i?l:r-1-l,p=n[g],y=a[g],_=p.length({precision:s,subdivisions:y});if(p.isVisible){if(t<=c+_)return p.pointAtLength((i?1:-1)*(t-c),{precision:s,subdivisions:y});u=p}c+=_}if(u)return i?u.end:u.start;var w=n[r-1];return w.end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,s=r.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var i,s=n[t],a=s.previousSegment,u=s.nextSegment,c=s.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(y,_){return y.concat(_)},[]),!e[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var l=e.length,g=0;g<l;g++){var p=e[g];i=this.prepareSegment(p,a,u),n.splice(t+g,0,i),a=i,c&&i.isSubpathStart&&(c=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,a,u),n.splice(t,1,i),c&&i.isSubpathStart&&(c=!1)}c&&u&&this.updateSubpathStartSegment(u)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++){var i=e[r];i.round(t)}return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,s=0;s<i;s++){var a=r[s];a.scale(t,e,n)}return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:s},u=this.length(a),c=u*t;return this.segmentIndexAtLength(c,a)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=null,c=0,l=0;l<r;l++){var g=i?l:r-1-l,p=n[g],y=a[g],_=p.length({precision:s,subdivisions:y});if(p.isVisible){if(t<=c+_)return g;u=g}c+=_}return u},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:s},u=this.length(a),c=u*t;return this.tangentAtLength(c,a)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u,c=0,l=0;l<r;l++){var g=i?l:r-1-l,p=n[g],y=a[g],_=p.length({precision:s,subdivisions:y});if(p.isDifferentiable()){if(t<=c+_)return p.tangentAtLength((i?1:-1)*(t-c),{precision:s,subdivisions:y});u=p}c+=_}if(u){var w=i?1:0;return u.tangentAtT(w)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(n===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,s=[],a=[],u=0;u<n;u++){var c=e[u];if(c.isVisible){var l=i[u];if(l.length>0){var g=l.map(function(p){return p.start});Array.prototype.push.apply(a,g)}else a.push(c.start)}else a.length>0&&(a.push(e[u-1].end),s.push(a),a=[])}return a.length>0&&(a.push(this.end),s.push(a)),s},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new ze(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++){var i=t[r];n+=i.serialize()+" "}return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++){var s=n[i];s.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,jt.createSegment("M",0,0)),this}},Object.defineProperty(jt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(jt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});function ui(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var ks={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(ks,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(ks,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(ks,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Sn=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Sn))return ui(Sn,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof Dt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new Q(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),r.push(ui(Sn,i));return r}else{if(e===1)return this.end=new Q(t[0]),this;var s;for(r=[],n=0;n<e;n+=1)s=t[n],r.push(new Sn(s));return r}},a_={clone:function(){return new Sn(this.end)},divideAt:function(t){var e=new Dt(this.start,this.end),n=e.divideAt(t);return[new Sn(n[0]),new Sn(n[1])]},divideAtLength:function(t){var e=new Dt(this.start,this.end),n=e.divideAtLength(t);return[new Sn(n[0]),new Sn(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(a_,"type",{configurable:!0,enumerable:!0,value:"L"}),Sn.prototype=po(ks,Dt.prototype,a_);var lr=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof lr))return ui(lr,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r;if(t[0]instanceof Ie){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new Q(+t[0],+t[1]),this.controlPoint2=new Q(+t[2],+t[3]),this.end=new Q(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=6)i=t.slice(n,n+6),r.push(ui(lr,i));return r}else{if(e===3)return this.controlPoint1=new Q(t[0]),this.controlPoint2=new Q(t[1]),this.end=new Q(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var s;for(r=[],n=0;n<e;n+=3)s=t.slice(n,n+3),r.push(ui(lr,s));return r}},o_={clone:function(){return new lr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new Ie(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAt(t,e);return[new lr(r[0]),new lr(r[1])]},divideAtLength:function(t,e){var n=new Ie(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAtLength(t,e);return[new lr(r[0]),new lr(r[1])]},divideAtT:function(t){var e=new Ie(this.start,this.controlPoint1,this.controlPoint2,this.end),n=e.divideAtT(t);return[new lr(n[0]),new lr(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(o_,"type",{configurable:!0,enumerable:!0,value:"C"}),lr.prototype=po(ks,Ie.prototype,o_);var Ms=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Ms))return ui(Ms,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof Dt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof Ie){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new Q(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),n===0?r.push(ui(Ms,i)):r.push(ui(Sn,i));return r}else{if(e===1)return this.end=new Q(t[0]),this;var s;for(r=[],n=0;n<e;n+=1)s=t[n],n===0?r.push(new Ms(s)):r.push(new Sn(s));return r}},Ol={bbox:function(){return null},clone:function(){return new Ms(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Ol,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Ol,"type",{configurable:!0,enumerable:!0,value:"M"}),Ms.prototype=po(ks,Ol);var va=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof va))return ui(va,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},kl={clone:function(){return new va},divideAt:function(t){var e=new Dt(this.start,this.end),n=e.divideAt(t);return[n[1].isDifferentiable()?new Sn(n[0]):this.clone(),new Sn(n[1])]},divideAtLength:function(t){var e=new Dt(this.start,this.end),n=e.divideAtLength(t);return[n[1].isDifferentiable()?new Sn(n[0]):this.clone(),new Sn(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(kl,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(kl,"type",{configurable:!0,enumerable:!0,value:"Z"}),va.prototype=po(ks,Dt.prototype,kl);var ZO=jt.segmentTypes={L:Sn,C:lr,M:Ms,Z:va,z:va};jt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(ZO).join("")+",.]*$"),jt.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};const JO={curveThroughPoints:function(t){return console.warn("deprecated"),new jt(Ie.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],n=[],r=t.length-1,i;if(r==1)return e[0]=new Q((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new Q(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var s=[];for(i=1;i<r-1;i++)s[i]=4*t[i].x+2*t[i+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var a=this.getFirstControlPoints(s);for(i=1;i<r-1;++i)s[i]=4*t[i].y+2*t[i+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var u=this.getFirstControlPoints(s);for(i=0;i<r;i++)e.push(new Q(a[i],u[i])),i<r-1?n.push(new Q(2*t[i+1].x-a[i+1],2*t[i+1].y-u[i+1])):n.push(new Q((t[r].x+a[r-1])/2,(t[r].y+u[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new Ie(t,e,n,r);return function(a){var u=i.divide(a);return[{p0:u[0].start,p1:u[0].controlPoint1,p2:u[0].controlPoint2,p3:u[0].end},{p0:u[1].start,p1:u[1].controlPoint1,p2:u[1].controlPoint2,p3:u[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var s=1;s<e;s++)r[s]=1/i,i=(s<e-1?4:3.5)-r[s],n[s]=(t[s]-n[s-1])/i;for(s=1;s<e;s++)n[e-s-1]-=r[e-s]*n[e-s];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new Ie(t,e,n,r);return function(a){return i.closestPointT(a)}}},Kn=function(t){if(!(this instanceof Kn))return new Kn(t);if(typeof t=="string")return new Kn.parse(t);this.points=Array.isArray(t)?t.map(Q):[]};Kn.parse=function(t){return new Kn(e_(t))},Kn.fromRect=function(t){return new Kn([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},Kn.prototype=po(ze.prototype,{type:ge.Polygon,clone:function(){return new Kn(n_(this.points))},convexHull:function(){return new Kn(r_(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});function u_(t,e,n,r){switch(t.type){case ge.Line:{switch(e.type){case ge.Line:return Is(t,e)}break}case ge.Ellipse:{switch(e.type){case ge.Line:return Ml(t,e);case ge.Ellipse:return c_(t,e)}break}case ge.Rect:{switch(e.type){case ge.Line:return f_(t,e);case ge.Ellipse:return l_(t,e);case ge.Rect:return Il(t,e)}break}case ge.Polyline:{switch(e.type){case ge.Line:return ju(t,e);case ge.Ellipse:return Nl(t,e);case ge.Rect:return h_(t,e);case ge.Polyline:return d_(t,e)}break}case ge.Polygon:{switch(e.type){case ge.Line:return Dl(t,e);case ge.Ellipse:return Xu(t,e);case ge.Rect:return p_(t,e);case ge.Polyline:return g_(t,e);case ge.Polygon:return v_(t,e)}break}case ge.Path:{switch(e.type){case ge.Line:return m_(t,e,n);case ge.Ellipse:return y_(t,e,n);case ge.Rect:return b_(t,e,n);case ge.Polyline:return ql(t,e,n);case ge.Polygon:return Yu(t,e,n);case ge.Path:return __(t,e,n,r)}break}}switch(e.type){case ge.Ellipse:case ge.Rect:case ge.Polyline:case ge.Polygon:case ge.Path:return u_(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Is(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,s=t.end.y,a=e.start.x,u=e.start.y,c=e.end.x,l=e.end.y,g=i-n,p=s-r,y=c-a,_=l-u,w=n-a,x=r-u,T=g*_-y*p,P=(g*x-p*w)/T,k=(y*x-_*w)/T;return P>=0&&P<=1&&k>=0&&k<=1}function Ml(t,e){const n=t.a,r=t.b,i=t.x,s=t.y,a=e.start.x-i,u=e.end.x-i,c=e.start.y-s,l=e.end.y-s,g=n*n,p=r*r,y=u-a,_=l-c,w=y*y/g+_*_/p,x=2*a*y/g+2*c*_/p,T=a*a/g+c*c/p-1,P=x*x-4*w*T;if(P===0){const k=-x/2/w;return k>=0&&k<=1}else if(P>0){const k=Math.sqrt(P),q=(-x+k)/2/w,B=(-x-k)/2/w;return q>=0&&q<=1||B>=0&&B<=1}return!1}function c_(t,e){return QO(t,0,e,0)}function f_(t,e){const{start:n,end:r}=e,{x:i,y:s,width:a,height:u}=t;return n.x>i+a&&r.x>i+a||n.x<i&&r.x<i||n.y>s+u&&r.y>s+u||n.y<s&&r.y<s?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:Is(t.topLine(),e)||Is(t.rightLine(),e)||Is(t.bottomLine(),e)||Is(t.leftLine(),e)}function l_(t,e){return Il(t,It.fromEllipse(e))?Xu(Kn.fromRect(t),e):!1}function Il(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function ju(t,e){return w_(t,e,{interior:!1})}function Nl(t,e){return x_(t,e,{interior:!1})}function h_(t,e){return A_(t,e,{interior:!1})}function d_(t,e){return Ku(t,e,{interior:!1})}function Dl(t,e){return w_(t,e,{interior:!0})}function Xu(t,e){return x_(t,e,{interior:!0})}function p_(t,e){return A_(t,e,{interior:!0})}function g_(t,e){return Ku(t,e,{interior:!0})}function v_(t,e){return Bl(t,e,{interior:!0})}function m_(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:s}=r.getSegment(-1);return s==="Z"?Dl(i,e):ju(i,e)})}function y_(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:s}=r.getSegment(-1);return s==="Z"?Xu(i,e):Nl(i,e)})}function b_(t,e,n){return Yu(t,Kn.fromRect(e),n)}function ql(t,e,n){return S_(t,e,n,{interior:!1})}function Yu(t,e,n){return S_(t,e,n,{interior:!0})}function __(t,e,n,r){return t.getSubpaths().some(i=>{const[s]=i.toPolylines(n),{type:a}=i.getSegment(-1);return a==="Z"?Yu(e,s,r):ql(e,s,r)})}function w_(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:u,end:c,points:l}=t;i=c.equals(u)?l:[...l,u]}else i=t.points;const{length:s}=i,a=new Dt;for(let u=0;u<s-1;u++)if(a.start=i[u],a.end=i[u+1],Is(e,a))return!0;return!1}function x_(t,e,n={}){const{start:r,end:i,points:s}=t;if(e.containsPoint(r))return!0;let a;const{interior:u=!1}=n;if(u){if(t.containsPoint(e.center()))return!0;a=i.equals(r)?s:[...s,r]}else a=s;const{length:c}=a,l=new Dt;for(let g=0;g<c-1;g++)if(l.start=a[g],l.end=a[g+1],Ml(e,l))return!0;return!1}function A_(t,e,n){const r=Kn.fromRect(e);return Bl(t,r,n)}function S_(t,e,n,r){return t.getSubpaths().some(i=>{const[s]=i.toPolylines(n),{type:a}=i.getSegment(-1);return a==="Z"?Bl(e,s,r):Ku(e,s,r)})}function Ku(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:c}=e;if(t.containsPoint(c))return!0;i=t.clone().close()}else i=t;const s=e.points,{length:a}=s,u=new Dt;for(let c=0;c<a-1;c++)if(u.start=s[c],u.end=s[c+1],ju(i,u))return!0;return!1}function Bl(t,e,n){return e.containsPoint(t.start)||Ku(t,e.clone().close(),n)}function QO(t,e,n,r){const{cos:i,sin:s}=Math,a=s(e),u=i(e),c=s(r),l=i(r),g=a*a,p=u*u,y=a*u,_=c*c,w=l*l,x=c*l,T=t.a*t.a,P=t.b*t.b,k=n.a*n.a,q=n.b*n.b,B=T*g+P*p,H=k*_+q*w,X=T*p+P*g,d=k*w+q*_;let E=2*(P-T)*y,L=2*(q-k)*x,I=-2*B*t.x-E*t.y,G=-2*H*n.x-L*n.y,K=-E*t.x-2*X*t.y,Y=-L*n.x-2*d*n.y;const pt=B*t.x*t.x+X*t.y*t.y+E*t.x*t.y-T*P,Tt=H*n.x*n.x+d*n.y*n.y+L*n.x*n.y-k*q;E=E/2,L=L/2,I=I/2,G=G/2,K=K/2,Y=Y/2;const at=Qi([[B,E,I],[E,X,K],[I,K,pt]]),ft=Qi([[H,L,G],[L,d,Y],[G,Y,Tt]]),lt=.33333333*(Qi([[H,E,I],[L,X,K],[G,K,pt]])+Qi([[B,L,I],[E,d,K],[I,Y,pt]])+Qi([[B,E,G],[E,X,Y],[I,K,Tt]])),dt=.33333333*(Qi([[B,L,G],[E,d,Y],[I,Y,Tt]])+Qi([[H,E,G],[L,X,Y],[G,K,Tt]])+Qi([[H,L,I],[L,d,K],[G,Y,pt]])),Xt=Zu([[at,lt],[lt,dt]]),Ft=Zu([[at,dt],[lt,ft]]),Ae=Zu([[lt,dt],[dt,ft]]);return!(Zu([[2*Xt,Ft],[Ft,2*Ae]])>0&&(dt>0||lt>0))}function Zu(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function Qi(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}var tk=Object.freeze({__proto__:null,ellipseWithEllipse:c_,ellipseWithLine:Ml,exists:u_,lineWithLine:Is,pathWithEllipse:y_,pathWithLine:m_,pathWithPath:__,pathWithPolygon:Yu,pathWithPolyline:ql,pathWithRect:b_,polygonWithEllipse:Xu,polygonWithLine:Dl,polygonWithPolygon:v_,polygonWithPolyline:g_,polygonWithRect:p_,polylineWithEllipse:Nl,polylineWithLine:ju,polylineWithPolyline:d_,polylineWithRect:h_,rectWithEllipse:l_,rectWithLine:f_,rectWithRect:Il}),ek=Object.freeze({__proto__:null,Curve:Ie,Ellipse:qn,Line:Dt,Path:jt,Point:Q,Polygon:Kn,Polyline:ze,Rect:It,bezier:JO,ellipse:$O,intersection:tk,line:Os,normalizeAngle:Hr,point:Uu,random:Al,rect:YO,scale:VO,snapToGrid:Rs,toDeg:Vu,toRad:Yn,types:ge}),Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ma(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Fl={},Vl="1.13.7",T_=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Ju=Array.prototype,zl=Object.prototype,E_=typeof Symbol<"u"?Symbol.prototype:null,rk=Ju.push,go=Ju.slice,vo=zl.toString,ik=zl.hasOwnProperty,P_=typeof ArrayBuffer<"u",sk=typeof DataView<"u",ak=Array.isArray,C_=Object.keys,L_=Object.create,R_=P_&&ArrayBuffer.isView,ok=isNaN,uk=isFinite,O_=!{toString:null}.propertyIsEnumerable("toString"),k_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ck=Math.pow(2,53)-1;function Bn(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var s=Array(e+1);for(i=0;i<e;i++)s[i]=arguments[i];return s[e]=r,t.apply(this,s)}}function ts(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function M_(t){return t===null}function Gl(t){return t===void 0}function Ul(t){return t===!0||t===!1||vo.call(t)==="[object Boolean]"}function I_(t){return!!(t&&t.nodeType===1)}function Cn(t){var e="[object "+t+"]";return function(n){return vo.call(n)===e}}var Qu=Cn("String"),Hl=Cn("Number"),N_=Cn("Date"),D_=Cn("RegExp"),q_=Cn("Error"),$l=Cn("Symbol"),Wl=Cn("ArrayBuffer"),B_=Cn("Function"),fk=T_.document&&T_.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof fk!="function"&&(B_=function(t){return typeof t=="function"||!1});var Ln=B_,F_=Cn("Object"),V_=sk&&(!/\[native code\]/.test(String(DataView))||F_(new DataView(new ArrayBuffer(8)))),jl=typeof Map<"u"&&F_(new Map),lk=Cn("DataView");function hk(t){return t!=null&&Ln(t.getInt8)&&Wl(t.buffer)}var mo=V_?hk:lk,es=ak||Cn("Array");function ns(t,e){return t!=null&&ik.call(t,e)}var Xl=Cn("Arguments");(function(){Xl(arguments)||(Xl=function(t){return ns(t,"callee")})})();var tc=Xl;function z_(t){return!$l(t)&&uk(t)&&!isNaN(parseFloat(t))}function Yl(t){return Hl(t)&&ok(t)}function Kl(t){return function(){return t}}function G_(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=ck}}function U_(t){return function(e){return e==null?void 0:e[t]}}var ec=U_("byteLength"),dk=G_(ec),pk=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function gk(t){return R_?R_(t)&&!mo(t):dk(t)&&pk.test(vo.call(t))}var Zl=P_?gk:Kl(!1),Zn=U_("length");function vk(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function H_(t,e){e=vk(e);var n=k_.length,r=t.constructor,i=Ln(r)&&r.prototype||zl,s="constructor";for(ns(t,s)&&!e.contains(s)&&e.push(s);n--;)s=k_[n],s in t&&t[s]!==i[s]&&!e.contains(s)&&e.push(s)}function hn(t){if(!ts(t))return[];if(C_)return C_(t);var e=[];for(var n in t)ns(t,n)&&e.push(n);return O_&&H_(t,e),e}function $_(t){if(t==null)return!0;var e=Zn(t);return typeof e=="number"&&(es(t)||Qu(t)||tc(t))?e===0:Zn(hn(t))===0}function Jl(t,e){var n=hn(e),r=n.length;if(t==null)return!r;for(var i=Object(t),s=0;s<r;s++){var a=n[s];if(e[a]!==i[a]||!(a in i))return!1}return!0}function De(t){if(t instanceof De)return t;if(!(this instanceof De))return new De(t);this._wrapped=t}De.VERSION=Vl,De.prototype.value=function(){return this._wrapped},De.prototype.valueOf=De.prototype.toJSON=De.prototype.value,De.prototype.toString=function(){return String(this._wrapped)};function W_(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,ec(t))}var j_="[object DataView]";function Ql(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:X_(t,e,n,r)}function X_(t,e,n,r){t instanceof De&&(t=t._wrapped),e instanceof De&&(e=e._wrapped);var i=vo.call(t);if(i!==vo.call(e))return!1;if(V_&&i=="[object Object]"&&mo(t)){if(!mo(e))return!1;i=j_}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return E_.valueOf.call(t)===E_.valueOf.call(e);case"[object ArrayBuffer]":case j_:return X_(W_(t),W_(e),n,r)}var s=i==="[object Array]";if(!s&&Zl(t)){var a=ec(t);if(a!==ec(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof t!="object"||typeof e!="object")return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!(Ln(u)&&u instanceof u&&Ln(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),s){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!Ql(t[l],e[l],n,r))return!1}else{var g=hn(t),p;if(l=g.length,hn(e).length!==l)return!1;for(;l--;)if(p=g[l],!(ns(e,p)&&Ql(t[p],e[p],n,r)))return!1}return n.pop(),r.pop(),!0}function Y_(t,e){return Ql(t,e)}function ya(t){if(!ts(t))return[];var e=[];for(var n in t)e.push(n);return O_&&H_(t,e),e}function th(t){var e=Zn(t);return function(n){if(n==null)return!1;var r=ya(n);if(Zn(r))return!1;for(var i=0;i<e;i++)if(!Ln(n[t[i]]))return!1;return t!==J_||!Ln(n[eh])}}var eh="forEach",K_="has",nh=["clear","delete"],Z_=["get",K_,"set"],mk=nh.concat(eh,Z_),J_=nh.concat(Z_),yk=["add"].concat(nh,eh,K_),Q_=jl?th(mk):Cn("Map"),tw=jl?th(J_):Cn("WeakMap"),ew=jl?th(yk):Cn("Set"),nw=Cn("WeakSet");function Ns(t){for(var e=hn(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function rw(t){for(var e=hn(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function rh(t){for(var e={},n=hn(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function yo(t){var e=[];for(var n in t)Ln(t[n])&&e.push(n);return e.sort()}function ih(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],a=t(s),u=a.length,c=0;c<u;c++){var l=a[c];(!e||n[l]===void 0)&&(n[l]=s[l])}return n}}var sh=ih(ya),ba=ih(hn),ah=ih(ya,!0);function bk(){return function(){}}function iw(t){if(!ts(t))return{};if(L_)return L_(t);var e=bk();e.prototype=t;var n=new e;return e.prototype=null,n}function sw(t,e){var n=iw(t);return e&&ba(n,e),n}function aw(t){return ts(t)?es(t)?t.slice():sh({},t):t}function ow(t,e){return e(t),t}function oh(t){return es(t)?t:[t]}De.toPath=oh;function bo(t){return De.toPath(t)}function uh(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function ch(t,e,n){var r=uh(t,bo(e));return Gl(r)?n:r}function uw(t,e){e=bo(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!ns(t,i))return!1;t=t[i]}return!!n}function nc(t){return t}function Ds(t){return t=ba({},t),function(e){return Jl(e,t)}}function rc(t){return t=bo(t),function(e){return uh(e,t)}}function _o(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,s){return t.call(e,r,i,s)};case 4:return function(r,i,s,a){return t.call(e,r,i,s,a)}}return function(){return t.apply(e,arguments)}}function cw(t,e,n){return t==null?nc:Ln(t)?_o(t,e,n):ts(t)&&!es(t)?Ds(t):rc(t)}function ic(t,e){return cw(t,e,1/0)}De.iteratee=ic;function Jn(t,e,n){return De.iteratee!==ic?De.iteratee(t,e):cw(t,e,n)}function fw(t,e,n){e=Jn(e,n);for(var r=hn(t),i=r.length,s={},a=0;a<i;a++){var u=r[a];s[u]=e(t[u],u,t)}return s}function fh(){}function lw(t){return t==null?fh:function(e){return ch(t,e)}}function hw(t,e,n){var r=Array(Math.max(0,t));e=_o(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function sc(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}var _a=Date.now||function(){return new Date().getTime()};function dw(t){var e=function(s){return t[s]},n="(?:"+hn(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,e):s}}var pw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},gw=dw(pw),_k=rh(pw),vw=dw(_k),mw=De.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},lh=/(.)^/,wk={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xk=/\\|'|\r|\n|\u2028|\u2029/g;function Ak(t){return"\\"+wk[t]}var Sk=/^\s*(\w|\$)+\s*$/;function yw(t,e,n){!e&&n&&(e=n),e=ah({},e,De.templateSettings);var r=RegExp([(e.escape||lh).source,(e.interpolate||lh).source,(e.evaluate||lh).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(r,function(l,g,p,y,_){return s+=t.slice(i,_).replace(xk,Ak),i=_+l.length,g?s+=`'+
((__t=(`+g+`))==null?'':_.escape(__t))+
'`:p?s+=`'+
((__t=(`+p+`))==null?'':__t)+
'`:y&&(s+=`';
`+y+`
__p+='`),l}),s+=`';
`;var a=e.variable;if(a){if(!Sk.test(a))throw new Error("variable is not a bare identifier: "+a)}else s=`with(obj||{}){
`+s+`}
`,a="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var u;try{u=new Function(a,"_",s)}catch(l){throw l.source=s,l}var c=function(l){return u.call(this,l,De)};return c.source="function("+a+`){
`+s+"}",c}function bw(t,e,n){e=bo(e);var r=e.length;if(!r)return Ln(n)?n.call(t):n;for(var i=0;i<r;i++){var s=t==null?void 0:t[e[i]];s===void 0&&(s=n,i=r),t=Ln(s)?s.call(t):s}return t}var Tk=0;function _w(t){var e=++Tk+"";return t?t+e:e}function ww(t){var e=De(t);return e._chain=!0,e}function xw(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var s=iw(t.prototype),a=t.apply(s,i);return ts(a)?a:s}var qs=Bn(function(t,e){var n=qs.placeholder,r=function(){for(var i=0,s=e.length,a=Array(s),u=0;u<s;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return xw(t,r,this,this,a)};return r});qs.placeholder=De;var hh=Bn(function(t,e,n){if(!Ln(t))throw new TypeError("Bind must be called on a function");var r=Bn(function(i){return xw(t,r,e,this,n.concat(i))});return r}),hr=G_(Zn);function Bs(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,s=0,a=Zn(t);s<a;s++){var u=t[s];if(hr(u)&&(es(u)||tc(u)))if(e>1)Bs(u,e-1,n,r),i=r.length;else for(var c=0,l=u.length;c<l;)r[i++]=u[c++];else n||(r[i++]=u)}return r}var Aw=Bn(function(t,e){e=Bs(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=hh(t[r],t)}return t});function Sw(t,e){var n=function(r){var i=n.cache,s=""+(e?e.apply(this,arguments):r);return ns(i,s)||(i[s]=t.apply(this,arguments)),i[s]};return n.cache={},n}var dh=Bn(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),Tw=qs(dh,De,1);function Ew(t,e,n){var r,i,s,a,u=0;n||(n={});var c=function(){u=n.leading===!1?0:_a(),r=null,a=t.apply(i,s),r||(i=s=null)},l=function(){var g=_a();!u&&n.leading===!1&&(u=g);var p=e-(g-u);return i=this,s=arguments,p<=0||p>e?(r&&(clearTimeout(r),r=null),u=g,a=t.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(c,p)),a};return l.cancel=function(){clearTimeout(r),u=0,r=i=s=null},l}function Pw(t,e,n){var r,i,s,a,u,c=function(){var g=_a()-i;e>g?r=setTimeout(c,e-g):(r=null,n||(a=t.apply(u,s)),r||(s=u=null))},l=Bn(function(g){return u=this,s=g,i=_a(),r||(r=setTimeout(c,e),n&&(a=t.apply(u,s))),a});return l.cancel=function(){clearTimeout(r),r=s=u=null},l}function Cw(t,e){return qs(e,t)}function ac(t){return function(){return!t.apply(this,arguments)}}function Lw(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function Rw(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function ph(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var Ow=qs(ph,2);function gh(t,e,n){e=Jn(e,n);for(var r=hn(t),i,s=0,a=r.length;s<a;s++)if(i=r[s],e(t[i],i,t))return i}function kw(t){return function(e,n,r){n=Jn(n,r);for(var i=Zn(e),s=t>0?0:i-1;s>=0&&s<i;s+=t)if(n(e[s],s,e))return s;return-1}}var oc=kw(1),vh=kw(-1);function mh(t,e,n,r){n=Jn(n,r,1);for(var i=n(e),s=0,a=Zn(t);s<a;){var u=Math.floor((s+a)/2);n(t[u])<i?s=u+1:a=u}return s}function Mw(t,e,n){return function(r,i,s){var a=0,u=Zn(r);if(typeof s=="number")t>0?a=s>=0?s:Math.max(s+u,a):u=s>=0?Math.min(s+1,u):s+u+1;else if(n&&s&&u)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=e(go.call(r,a,u),Yl),s>=0?s+a:-1;for(s=t>0?a:u-1;s>=0&&s<u;s+=t)if(r[s]===i)return s;return-1}}var yh=Mw(1,oc,mh),Iw=Mw(-1,vh);function wo(t,e,n){var r=hr(t)?oc:gh,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function Nw(t,e){return wo(t,Ds(e))}function $r(t,e,n){e=_o(e,n);var r,i;if(hr(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var s=hn(t);for(r=0,i=s.length;r<i;r++)e(t[s[r]],s[r],t)}return t}function Oi(t,e,n){e=Jn(e,n);for(var r=!hr(t)&&hn(t),i=(r||t).length,s=Array(i),a=0;a<i;a++){var u=r?r[a]:a;s[a]=e(t[u],u,t)}return s}function Dw(t){var e=function(n,r,i,s){var a=!hr(n)&&hn(n),u=(a||n).length,c=t>0?0:u-1;for(s||(i=n[a?a[c]:c],c+=t);c>=0&&c<u;c+=t){var l=a?a[c]:c;i=r(i,n[l],l,n)}return i};return function(n,r,i,s){var a=arguments.length>=3;return e(n,_o(r,s,4),i,a)}}var wa=Dw(1),uc=Dw(-1);function rs(t,e,n){var r=[];return e=Jn(e,n),$r(t,function(i,s,a){e(i,s,a)&&r.push(i)}),r}function qw(t,e,n){return rs(t,ac(Jn(e)),n)}function cc(t,e,n){e=Jn(e,n);for(var r=!hr(t)&&hn(t),i=(r||t).length,s=0;s<i;s++){var a=r?r[s]:s;if(!e(t[a],a,t))return!1}return!0}function fc(t,e,n){e=Jn(e,n);for(var r=!hr(t)&&hn(t),i=(r||t).length,s=0;s<i;s++){var a=r?r[s]:s;if(e(t[a],a,t))return!0}return!1}function Tr(t,e,n,r){return hr(t)||(t=Ns(t)),(typeof n!="number"||r)&&(n=0),yh(t,e,n)>=0}var Bw=Bn(function(t,e,n){var r,i;return Ln(e)?i=e:(e=bo(e),r=e.slice(0,-1),e=e[e.length-1]),Oi(t,function(s){var a=i;if(!a){if(r&&r.length&&(s=uh(s,r)),s==null)return;a=s[e]}return a==null?a:a.apply(s,n)})});function lc(t,e){return Oi(t,rc(e))}function Fw(t,e){return rs(t,Ds(e))}function bh(t,e,n){var r=-1/0,i=-1/0,s,a;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=hr(t)?t:Ns(t);for(var u=0,c=t.length;u<c;u++)s=t[u],s!=null&&s>r&&(r=s)}else e=Jn(e,n),$r(t,function(l,g,p){a=e(l,g,p),(a>i||a===-1/0&&r===-1/0)&&(r=l,i=a)});return r}function Vw(t,e,n){var r=1/0,i=1/0,s,a;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=hr(t)?t:Ns(t);for(var u=0,c=t.length;u<c;u++)s=t[u],s!=null&&s<r&&(r=s)}else e=Jn(e,n),$r(t,function(l,g,p){a=e(l,g,p),(a<i||a===1/0&&r===1/0)&&(r=l,i=a)});return r}var Ek=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function _h(t){return t?es(t)?go.call(t):Qu(t)?t.match(Ek):hr(t)?Oi(t,nc):Ns(t):[]}function wh(t,e,n){if(e==null||n)return hr(t)||(t=Ns(t)),t[sc(t.length-1)];var r=_h(t),i=Zn(r);e=Math.max(Math.min(e,i),0);for(var s=i-1,a=0;a<e;a++){var u=sc(a,s),c=r[a];r[a]=r[u],r[u]=c}return r.slice(0,e)}function zw(t){return wh(t,1/0)}function Gw(t,e,n){var r=0;return e=Jn(e,n),lc(Oi(t,function(i,s,a){return{value:i,index:r++,criteria:e(i,s,a)}}).sort(function(i,s){var a=i.criteria,u=s.criteria;if(a!==u){if(a>u||a===void 0)return 1;if(a<u||u===void 0)return-1}return i.index-s.index}),"value")}function hc(t,e){return function(n,r,i){var s=e?[[],[]]:{};return r=Jn(r,i),$r(n,function(a,u){var c=r(a,u,n);t(s,a,c)}),s}}var Uw=hc(function(t,e,n){ns(t,n)?t[n].push(e):t[n]=[e]}),Hw=hc(function(t,e,n){t[n]=e}),$w=hc(function(t,e,n){ns(t,n)?t[n]++:t[n]=1}),Ww=hc(function(t,e,n){t[n?0:1].push(e)},!0);function jw(t){return t==null?0:hr(t)?t.length:hn(t).length}function Pk(t,e,n){return e in n}var xh=Bn(function(t,e){var n={},r=e[0];if(t==null)return n;Ln(r)?(e.length>1&&(r=_o(r,e[1])),e=ya(t)):(r=Pk,e=Bs(e,!1,!1),t=Object(t));for(var i=0,s=e.length;i<s;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n}),Xw=Bn(function(t,e){var n=e[0],r;return Ln(n)?(n=ac(n),e.length>1&&(r=e[1])):(e=Oi(Bs(e,!1,!1),String),n=function(i,s){return!Tr(e,s)}),xh(t,n,r)});function Ah(t,e,n){return go.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function xa(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:Ah(t,t.length-e)}function Fs(t,e,n){return go.call(t,e==null||n?1:e)}function Yw(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:Fs(t,Math.max(0,t.length-e))}function Kw(t){return rs(t,Boolean)}function Zw(t,e){return Bs(t,e,!1)}var Sh=Bn(function(t,e){return e=Bs(e,!0,!0),rs(t,function(n){return!Tr(e,n)})}),Jw=Bn(function(t,e){return Sh(t,e)});function xo(t,e,n,r){Ul(e)||(r=n,n=e,e=!1),n!=null&&(n=Jn(n,r));for(var i=[],s=[],a=0,u=Zn(t);a<u;a++){var c=t[a],l=n?n(c,a,t):c;e&&!n?((!a||s!==l)&&i.push(c),s=l):n?Tr(s,l)||(s.push(l),i.push(c)):Tr(i,c)||i.push(c)}return i}var Qw=Bn(function(t){return xo(Bs(t,!0,!0))});function t1(t){for(var e=[],n=arguments.length,r=0,i=Zn(t);r<i;r++){var s=t[r];if(!Tr(e,s)){var a;for(a=1;a<n&&Tr(arguments[a],s);a++);a===n&&e.push(s)}}return e}function Ao(t){for(var e=t&&bh(t,Zn).length||0,n=Array(e),r=0;r<e;r++)n[r]=lc(t,r);return n}var e1=Bn(Ao);function n1(t,e){for(var n={},r=0,i=Zn(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function r1(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),s=0;s<r;s++,t+=n)i[s]=t;return i}function i1(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(go.call(t,r,r+=e));return n}function Th(t,e){return t._chain?De(e).chain():e}function Eh(t){return $r(yo(t),function(e){var n=De[e]=t[e];De.prototype[e]=function(){var r=[this._wrapped];return rk.apply(r,arguments),Th(this,n.apply(De,r))}}),De}$r(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Ju[t];De.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),Th(this,n)}}),$r(["concat","join","slice"],function(t){var e=Ju[t];De.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),Th(this,n)}});var Ck=Object.freeze({__proto__:null,VERSION:Vl,after:Rw,all:cc,allKeys:ya,any:fc,assign:ba,before:ph,bind:hh,bindAll:Aw,chain:ww,chunk:i1,clone:aw,collect:Oi,compact:Kw,compose:Lw,constant:Kl,contains:Tr,countBy:$w,create:sw,debounce:Pw,default:De,defaults:ah,defer:Tw,delay:dh,detect:wo,difference:Sh,drop:Fs,each:$r,escape:gw,every:cc,extend:sh,extendOwn:ba,filter:rs,find:wo,findIndex:oc,findKey:gh,findLastIndex:vh,findWhere:Nw,first:xa,flatten:Zw,foldl:wa,foldr:uc,forEach:$r,functions:yo,get:ch,groupBy:Uw,has:uw,head:xa,identity:nc,include:Tr,includes:Tr,indexBy:Hw,indexOf:yh,initial:Ah,inject:wa,intersection:t1,invert:rh,invoke:Bw,isArguments:tc,isArray:es,isArrayBuffer:Wl,isBoolean:Ul,isDataView:mo,isDate:N_,isElement:I_,isEmpty:$_,isEqual:Y_,isError:q_,isFinite:z_,isFunction:Ln,isMap:Q_,isMatch:Jl,isNaN:Yl,isNull:M_,isNumber:Hl,isObject:ts,isRegExp:D_,isSet:ew,isString:Qu,isSymbol:$l,isTypedArray:Zl,isUndefined:Gl,isWeakMap:tw,isWeakSet:nw,iteratee:ic,keys:hn,last:Yw,lastIndexOf:Iw,map:Oi,mapObject:fw,matcher:Ds,matches:Ds,max:bh,memoize:Sw,methods:yo,min:Vw,mixin:Eh,negate:ac,noop:fh,now:_a,object:n1,omit:Xw,once:Ow,pairs:rw,partial:qs,partition:Ww,pick:xh,pluck:lc,property:rc,propertyOf:lw,random:sc,range:r1,reduce:wa,reduceRight:uc,reject:qw,rest:Fs,restArguments:Bn,result:bw,sample:wh,select:rs,shuffle:zw,size:jw,some:fc,sortBy:Gw,sortedIndex:mh,tail:Fs,take:xa,tap:ow,template:yw,templateSettings:mw,throttle:Ew,times:hw,toArray:_h,toPath:oh,transpose:Ao,unescape:vw,union:Qw,uniq:xo,unique:xo,uniqueId:_w,unzip:Ao,values:Ns,where:Fw,without:Jw,wrap:Cw,zip:e1}),Ph=Eh(Ck);Ph._=Ph;var Lk=Object.freeze({__proto__:null,VERSION:Vl,after:Rw,all:cc,allKeys:ya,any:fc,assign:ba,before:ph,bind:hh,bindAll:Aw,chain:ww,chunk:i1,clone:aw,collect:Oi,compact:Kw,compose:Lw,constant:Kl,contains:Tr,countBy:$w,create:sw,debounce:Pw,default:Ph,defaults:ah,defer:Tw,delay:dh,detect:wo,difference:Sh,drop:Fs,each:$r,escape:gw,every:cc,extend:sh,extendOwn:ba,filter:rs,find:wo,findIndex:oc,findKey:gh,findLastIndex:vh,findWhere:Nw,first:xa,flatten:Zw,foldl:wa,foldr:uc,forEach:$r,functions:yo,get:ch,groupBy:Uw,has:uw,head:xa,identity:nc,include:Tr,includes:Tr,indexBy:Hw,indexOf:yh,initial:Ah,inject:wa,intersection:t1,invert:rh,invoke:Bw,isArguments:tc,isArray:es,isArrayBuffer:Wl,isBoolean:Ul,isDataView:mo,isDate:N_,isElement:I_,isEmpty:$_,isEqual:Y_,isError:q_,isFinite:z_,isFunction:Ln,isMap:Q_,isMatch:Jl,isNaN:Yl,isNull:M_,isNumber:Hl,isObject:ts,isRegExp:D_,isSet:ew,isString:Qu,isSymbol:$l,isTypedArray:Zl,isUndefined:Gl,isWeakMap:tw,isWeakSet:nw,iteratee:ic,keys:hn,last:Yw,lastIndexOf:Iw,map:Oi,mapObject:fw,matcher:Ds,matches:Ds,max:bh,memoize:Sw,methods:yo,min:Vw,mixin:Eh,negate:ac,noop:fh,now:_a,object:n1,omit:Xw,once:Ow,pairs:rw,partial:qs,partition:Ww,pick:xh,pluck:lc,property:rc,propertyOf:lw,random:sc,range:r1,reduce:wa,reduceRight:uc,reject:qw,rest:Fs,restArguments:Bn,result:bw,sample:wh,select:rs,shuffle:zw,size:jw,some:fc,sortBy:Gw,sortedIndex:mh,tail:Fs,take:xa,tap:ow,template:yw,templateSettings:mw,throttle:Ew,times:hw,toArray:_h,toPath:oh,transpose:Ao,unescape:vw,union:Qw,uniq:xo,unique:xo,uniqueId:_w,unzip:Ao,values:Ns,where:Fw,without:Jw,wrap:Cw,zip:e1}),Rk=nk(Lk),dc={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Ok=dc.exports,s1;function a1(){return s1||(s1=1,function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Ok,function(e,n){var r=[],i=Object.getPrototypeOf,s=r.slice,a=r.flat?function(h){return r.flat.call(h)}:function(h){return r.concat.apply([],h)},u=r.push,c=r.indexOf,l={},g=l.toString,p=l.hasOwnProperty,y=p.toString,_=y.call(Object),w={},x=function(m){return typeof m=="function"&&typeof m.nodeType!="number"&&typeof m.item!="function"},T=function(m){return m!=null&&m===m.window},P=e.document,k={type:!0,src:!0,nonce:!0,noModule:!0};function q(h,m,b){b=b||P;var S,R,O=b.createElement("script");if(O.text=h,m)for(S in k)R=m[S]||m.getAttribute&&m.getAttribute(S),R&&O.setAttribute(S,R);b.head.appendChild(O).parentNode.removeChild(O)}function B(h){return h==null?h+"":typeof h=="object"||typeof h=="function"?l[g.call(h)]||"object":typeof h}var H="3.7.1",X=/HTML$/i,d=function(h,m){return new d.fn.init(h,m)};d.fn=d.prototype={jquery:H,constructor:d,length:0,toArray:function(){return s.call(this)},get:function(h){return h==null?s.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var m=d.merge(this.constructor(),h);return m.prevObject=this,m},each:function(h){return d.each(this,h)},map:function(h){return this.pushStack(d.map(this,function(m,b){return h.call(m,b,m)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(h,m){return(m+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(h,m){return m%2}))},eq:function(h){var m=this.length,b=+h+(h<0?m:0);return this.pushStack(b>=0&&b<m?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},d.extend=d.fn.extend=function(){var h,m,b,S,R,O,N=arguments[0]||{},J=1,j=arguments.length,ut=!1;for(typeof N=="boolean"&&(ut=N,N=arguments[J]||{},J++),typeof N!="object"&&!x(N)&&(N={}),J===j&&(N=this,J--);J<j;J++)if((h=arguments[J])!=null)for(m in h)S=h[m],!(m==="__proto__"||N===S)&&(ut&&S&&(d.isPlainObject(S)||(R=Array.isArray(S)))?(b=N[m],R&&!Array.isArray(b)?O=[]:!R&&!d.isPlainObject(b)?O={}:O=b,R=!1,N[m]=d.extend(ut,O,S)):S!==void 0&&(N[m]=S));return N},d.extend({expando:"jQuery"+(H+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var m,b;return!h||g.call(h)!=="[object Object]"?!1:(m=i(h),m?(b=p.call(m,"constructor")&&m.constructor,typeof b=="function"&&y.call(b)===_):!0)},isEmptyObject:function(h){var m;for(m in h)return!1;return!0},globalEval:function(h,m,b){q(h,{nonce:m&&m.nonce},b)},each:function(h,m){var b,S=0;if(E(h))for(b=h.length;S<b&&m.call(h[S],S,h[S])!==!1;S++);else for(S in h)if(m.call(h[S],S,h[S])===!1)break;return h},text:function(h){var m,b="",S=0,R=h.nodeType;if(!R)for(;m=h[S++];)b+=d.text(m);return R===1||R===11?h.textContent:R===9?h.documentElement.textContent:R===3||R===4?h.nodeValue:b},makeArray:function(h,m){var b=m||[];return h!=null&&(E(Object(h))?d.merge(b,typeof h=="string"?[h]:h):u.call(b,h)),b},inArray:function(h,m,b){return m==null?-1:c.call(m,h,b)},isXMLDoc:function(h){var m=h&&h.namespaceURI,b=h&&(h.ownerDocument||h).documentElement;return!X.test(m||b&&b.nodeName||"HTML")},merge:function(h,m){for(var b=+m.length,S=0,R=h.length;S<b;S++)h[R++]=m[S];return h.length=R,h},grep:function(h,m,b){for(var S,R=[],O=0,N=h.length,J=!b;O<N;O++)S=!m(h[O],O),S!==J&&R.push(h[O]);return R},map:function(h,m,b){var S,R,O=0,N=[];if(E(h))for(S=h.length;O<S;O++)R=m(h[O],O,b),R!=null&&N.push(R);else for(O in h)R=m(h[O],O,b),R!=null&&N.push(R);return a(N)},guid:1,support:w}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=r[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,m){l["[object "+m+"]"]=m.toLowerCase()});function E(h){var m=!!h&&"length"in h&&h.length,b=B(h);return x(h)||T(h)?!1:b==="array"||m===0||typeof m=="number"&&m>0&&m-1 in h}function L(h,m){return h.nodeName&&h.nodeName.toLowerCase()===m.toLowerCase()}var I=r.pop,G=r.sort,K=r.splice,Y="[\\x20\\t\\r\\n\\f]",pt=new RegExp("^"+Y+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Y+"+$","g");d.contains=function(h,m){var b=m&&m.parentNode;return h===b||!!(b&&b.nodeType===1&&(h.contains?h.contains(b):h.compareDocumentPosition&&h.compareDocumentPosition(b)&16))};var Tt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function at(h,m){return m?h==="\0"?"�":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}d.escapeSelector=function(h){return(h+"").replace(Tt,at)};var ft=P,lt=u;(function(){var h,m,b,S,R,O=lt,N,J,j,ut,bt,At=d.expando,mt=0,kt=0,Vt=oa(),de=oa(),le=oa(),pn=oa(),Ze=function(W,st){return W===st&&(R=!0),0},Dr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",qr="(?:\\\\[\\da-fA-F]{1,6}"+Y+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Se="\\["+Y+"*("+qr+")(?:"+Y+"*([*^$|!~]?=)"+Y+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+qr+"))|)"+Y+"*\\]",Ai=":("+qr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Se+")*)|.*)\\)|)",Te=new RegExp(Y+"+","g"),Ve=new RegExp("^"+Y+"*,"+Y+"*"),ia=new RegExp("^"+Y+"*([>+~]|"+Y+")"+Y+"*"),eo=new RegExp(Y+"|>"),gr=new RegExp(Ai),Gi=new RegExp("^"+qr+"$"),sr={ID:new RegExp("^#("+qr+")"),CLASS:new RegExp("^\\.("+qr+")"),TAG:new RegExp("^("+qr+"|[*])"),ATTR:new RegExp("^"+Se),PSEUDO:new RegExp("^"+Ai),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Y+"*(even|odd|(([+-]|)(\\d*)n|)"+Y+"*(?:([+-]|)"+Y+"*(\\d+)|))"+Y+"*\\)|)","i"),bool:new RegExp("^(?:"+Dr+")$","i"),needsContext:new RegExp("^"+Y+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Y+"*((?:-\\d)?\\d*)"+Y+"*\\)|)(?=[^-]|$)","i")},ni=/^(?:input|select|textarea|button)$/i,Si=/^h\d$/i,In=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ri=new RegExp("\\\\[\\da-fA-F]{1,6}"+Y+"?|\\\\([^\\r\\n\\f])","g"),Br=function(W,st){var gt="0x"+W.slice(1)-65536;return st||(gt<0?String.fromCharCode(gt+65536):String.fromCharCode(gt>>10|55296,gt&1023|56320))},Un=function(){Ti()},xu=Ui(function(W){return W.disabled===!0&&L(W,"fieldset")},{dir:"parentNode",next:"legend"});function aa(){try{return N.activeElement}catch{}}try{O.apply(r=s.call(ft.childNodes),ft.childNodes),r[ft.childNodes.length].nodeType}catch{O={apply:function(st,gt){lt.apply(st,s.call(gt))},call:function(st){lt.apply(st,s.call(arguments,1))}}}function Ne(W,st,gt,yt){var z,nt,et,St,Et,Ut,$t,Bt=st&&st.ownerDocument,me=st?st.nodeType:9;if(gt=gt||[],typeof W!="string"||!W||me!==1&&me!==9&&me!==11)return gt;if(!yt&&(Ti(st),st=st||N,j)){if(me!==11&&(Et=In.exec(W)))if(z=Et[1]){if(me===9)if(et=st.getElementById(z)){if(et.id===z)return O.call(gt,et),gt}else return gt;else if(Bt&&(et=Bt.getElementById(z))&&Ne.contains(st,et)&&et.id===z)return O.call(gt,et),gt}else{if(Et[2])return O.apply(gt,st.getElementsByTagName(W)),gt;if((z=Et[3])&&st.getElementsByClassName)return O.apply(gt,st.getElementsByClassName(z)),gt}if(!pn[W+" "]&&(!ut||!ut.test(W))){if($t=W,Bt=st,me===1&&(eo.test(W)||ia.test(W))){for(Bt=sa.test(W)&&Au(st.parentNode)||st,(Bt!=st||!w.scope)&&((St=st.getAttribute("id"))?St=d.escapeSelector(St):st.setAttribute("id",St=At)),Ut=As(W),nt=Ut.length;nt--;)Ut[nt]=(St?"#"+St:":scope")+" "+mr(Ut[nt]);$t=Ut.join(",")}try{return O.apply(gt,Bt.querySelectorAll($t)),gt}catch{pn(W,!0)}finally{St===At&&st.removeAttribute("id")}}}return Gf(W.replace(pt,"$1"),st,gt,yt)}function oa(){var W=[];function st(gt,yt){return W.push(gt+" ")>m.cacheLength&&delete st[W.shift()],st[gt+" "]=yt}return st}function vr(W){return W[At]=!0,W}function xs(W){var st=N.createElement("fieldset");try{return!!W(st)}catch{return!1}finally{st.parentNode&&st.parentNode.removeChild(st),st=null}}function H0(W){return function(st){return L(st,"input")&&st.type===W}}function $0(W){return function(st){return(L(st,"input")||L(st,"button"))&&st.type===W}}function Vf(W){return function(st){return"form"in st?st.parentNode&&st.disabled===!1?"label"in st?"label"in st.parentNode?st.parentNode.disabled===W:st.disabled===W:st.isDisabled===W||st.isDisabled!==!W&&xu(st)===W:st.disabled===W:"label"in st?st.disabled===W:!1}}function ar(W){return vr(function(st){return st=+st,vr(function(gt,yt){for(var z,nt=W([],gt.length,st),et=nt.length;et--;)gt[z=nt[et]]&&(gt[z]=!(yt[z]=gt[z]))})})}function Au(W){return W&&typeof W.getElementsByTagName<"u"&&W}function Ti(W){var st,gt=W?W.ownerDocument||W:ft;return gt==N||gt.nodeType!==9||!gt.documentElement||(N=gt,J=N.documentElement,j=!d.isXMLDoc(N),bt=J.matches||J.webkitMatchesSelector||J.msMatchesSelector,J.msMatchesSelector&&ft!=N&&(st=N.defaultView)&&st.top!==st&&st.addEventListener("unload",Un),w.getById=xs(function(yt){return J.appendChild(yt).id=d.expando,!N.getElementsByName||!N.getElementsByName(d.expando).length}),w.disconnectedMatch=xs(function(yt){return bt.call(yt,"*")}),w.scope=xs(function(){return N.querySelectorAll(":scope")}),w.cssHas=xs(function(){try{return N.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(m.filter.ID=function(yt){var z=yt.replace(ri,Br);return function(nt){return nt.getAttribute("id")===z}},m.find.ID=function(yt,z){if(typeof z.getElementById<"u"&&j){var nt=z.getElementById(yt);return nt?[nt]:[]}}):(m.filter.ID=function(yt){var z=yt.replace(ri,Br);return function(nt){var et=typeof nt.getAttributeNode<"u"&&nt.getAttributeNode("id");return et&&et.value===z}},m.find.ID=function(yt,z){if(typeof z.getElementById<"u"&&j){var nt,et,St,Et=z.getElementById(yt);if(Et){if(nt=Et.getAttributeNode("id"),nt&&nt.value===yt)return[Et];for(St=z.getElementsByName(yt),et=0;Et=St[et++];)if(nt=Et.getAttributeNode("id"),nt&&nt.value===yt)return[Et]}return[]}}),m.find.TAG=function(yt,z){return typeof z.getElementsByTagName<"u"?z.getElementsByTagName(yt):z.querySelectorAll(yt)},m.find.CLASS=function(yt,z){if(typeof z.getElementsByClassName<"u"&&j)return z.getElementsByClassName(yt)},ut=[],xs(function(yt){var z;J.appendChild(yt).innerHTML="<a id='"+At+"' href='' disabled='disabled'></a><select id='"+At+"-\r\\' disabled='disabled'><option selected=''></option></select>",yt.querySelectorAll("[selected]").length||ut.push("\\["+Y+"*(?:value|"+Dr+")"),yt.querySelectorAll("[id~="+At+"-]").length||ut.push("~="),yt.querySelectorAll("a#"+At+"+*").length||ut.push(".#.+[+~]"),yt.querySelectorAll(":checked").length||ut.push(":checked"),z=N.createElement("input"),z.setAttribute("type","hidden"),yt.appendChild(z).setAttribute("name","D"),J.appendChild(yt).disabled=!0,yt.querySelectorAll(":disabled").length!==2&&ut.push(":enabled",":disabled"),z=N.createElement("input"),z.setAttribute("name",""),yt.appendChild(z),yt.querySelectorAll("[name='']").length||ut.push("\\["+Y+"*name"+Y+"*="+Y+`*(?:''|"")`)}),w.cssHas||ut.push(":has"),ut=ut.length&&new RegExp(ut.join("|")),Ze=function(yt,z){if(yt===z)return R=!0,0;var nt=!yt.compareDocumentPosition-!z.compareDocumentPosition;return nt||(nt=(yt.ownerDocument||yt)==(z.ownerDocument||z)?yt.compareDocumentPosition(z):1,nt&1||!w.sortDetached&&z.compareDocumentPosition(yt)===nt?yt===N||yt.ownerDocument==ft&&Ne.contains(ft,yt)?-1:z===N||z.ownerDocument==ft&&Ne.contains(ft,z)?1:S?c.call(S,yt)-c.call(S,z):0:nt&4?-1:1)}),N}Ne.matches=function(W,st){return Ne(W,null,null,st)},Ne.matchesSelector=function(W,st){if(Ti(W),j&&!pn[st+" "]&&(!ut||!ut.test(st)))try{var gt=bt.call(W,st);if(gt||w.disconnectedMatch||W.document&&W.document.nodeType!==11)return gt}catch{pn(st,!0)}return Ne(st,N,null,[W]).length>0},Ne.contains=function(W,st){return(W.ownerDocument||W)!=N&&Ti(W),d.contains(W,st)},Ne.attr=function(W,st){(W.ownerDocument||W)!=N&&Ti(W);var gt=m.attrHandle[st.toLowerCase()],yt=gt&&p.call(m.attrHandle,st.toLowerCase())?gt(W,st,!j):void 0;return yt!==void 0?yt:W.getAttribute(st)},Ne.error=function(W){throw new Error("Syntax error, unrecognized expression: "+W)},d.uniqueSort=function(W){var st,gt=[],yt=0,z=0;if(R=!w.sortStable,S=!w.sortStable&&s.call(W,0),G.call(W,Ze),R){for(;st=W[z++];)st===W[z]&&(yt=gt.push(z));for(;yt--;)K.call(W,gt[yt],1)}return S=null,W},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(s.apply(this)))},m=d.expr={cacheLength:50,createPseudo:vr,match:sr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(W){return W[1]=W[1].replace(ri,Br),W[3]=(W[3]||W[4]||W[5]||"").replace(ri,Br),W[2]==="~="&&(W[3]=" "+W[3]+" "),W.slice(0,4)},CHILD:function(W){return W[1]=W[1].toLowerCase(),W[1].slice(0,3)==="nth"?(W[3]||Ne.error(W[0]),W[4]=+(W[4]?W[5]+(W[6]||1):2*(W[3]==="even"||W[3]==="odd")),W[5]=+(W[7]+W[8]||W[3]==="odd")):W[3]&&Ne.error(W[0]),W},PSEUDO:function(W){var st,gt=!W[6]&&W[2];return sr.CHILD.test(W[0])?null:(W[3]?W[2]=W[4]||W[5]||"":gt&&gr.test(gt)&&(st=As(gt,!0))&&(st=gt.indexOf(")",gt.length-st)-gt.length)&&(W[0]=W[0].slice(0,st),W[2]=gt.slice(0,st)),W.slice(0,3))}},filter:{TAG:function(W){var st=W.replace(ri,Br).toLowerCase();return W==="*"?function(){return!0}:function(gt){return L(gt,st)}},CLASS:function(W){var st=Vt[W+" "];return st||(st=new RegExp("(^|"+Y+")"+W+"("+Y+"|$)"))&&Vt(W,function(gt){return st.test(typeof gt.className=="string"&&gt.className||typeof gt.getAttribute<"u"&&gt.getAttribute("class")||"")})},ATTR:function(W,st,gt){return function(yt){var z=Ne.attr(yt,W);return z==null?st==="!=":st?(z+="",st==="="?z===gt:st==="!="?z!==gt:st==="^="?gt&&z.indexOf(gt)===0:st==="*="?gt&&z.indexOf(gt)>-1:st==="$="?gt&&z.slice(-gt.length)===gt:st==="~="?(" "+z.replace(Te," ")+" ").indexOf(gt)>-1:st==="|="?z===gt||z.slice(0,gt.length+1)===gt+"-":!1):!0}},CHILD:function(W,st,gt,yt,z){var nt=W.slice(0,3)!=="nth",et=W.slice(-4)!=="last",St=st==="of-type";return yt===1&&z===0?function(Et){return!!Et.parentNode}:function(Et,Ut,$t){var Bt,me,Qt,we,gn,xn=nt!==et?"nextSibling":"previousSibling",vn=Et.parentNode,$n=St&&Et.nodeName.toLowerCase(),ii=!$t&&!St,ue=!1;if(vn){if(nt){for(;xn;){for(Qt=Et;Qt=Qt[xn];)if(St?L(Qt,$n):Qt.nodeType===1)return!1;gn=xn=W==="only"&&!gn&&"nextSibling"}return!0}if(gn=[et?vn.firstChild:vn.lastChild],et&&ii){for(me=vn[At]||(vn[At]={}),Bt=me[W]||[],we=Bt[0]===mt&&Bt[1],ue=we&&Bt[2],Qt=we&&vn.childNodes[we];Qt=++we&&Qt&&Qt[xn]||(ue=we=0)||gn.pop();)if(Qt.nodeType===1&&++ue&&Qt===Et){me[W]=[mt,we,ue];break}}else if(ii&&(me=Et[At]||(Et[At]={}),Bt=me[W]||[],we=Bt[0]===mt&&Bt[1],ue=we),ue===!1)for(;(Qt=++we&&Qt&&Qt[xn]||(ue=we=0)||gn.pop())&&!((St?L(Qt,$n):Qt.nodeType===1)&&++ue&&(ii&&(me=Qt[At]||(Qt[At]={}),me[W]=[mt,ue]),Qt===Et)););return ue-=z,ue===yt||ue%yt===0&&ue/yt>=0}}},PSEUDO:function(W,st){var gt,yt=m.pseudos[W]||m.setFilters[W.toLowerCase()]||Ne.error("unsupported pseudo: "+W);return yt[At]?yt(st):yt.length>1?(gt=[W,W,"",st],m.setFilters.hasOwnProperty(W.toLowerCase())?vr(function(z,nt){for(var et,St=yt(z,st),Et=St.length;Et--;)et=c.call(z,St[Et]),z[et]=!(nt[et]=St[Et])}):function(z){return yt(z,0,gt)}):yt}},pseudos:{not:vr(function(W){var st=[],gt=[],yt=Tu(W.replace(pt,"$1"));return yt[At]?vr(function(z,nt,et,St){for(var Et,Ut=yt(z,null,St,[]),$t=z.length;$t--;)(Et=Ut[$t])&&(z[$t]=!(nt[$t]=Et))}):function(z,nt,et){return st[0]=z,yt(st,null,et,gt),st[0]=null,!gt.pop()}}),has:vr(function(W){return function(st){return Ne(W,st).length>0}}),contains:vr(function(W){return W=W.replace(ri,Br),function(st){return(st.textContent||d.text(st)).indexOf(W)>-1}}),lang:vr(function(W){return Gi.test(W||"")||Ne.error("unsupported lang: "+W),W=W.replace(ri,Br).toLowerCase(),function(st){var gt;do if(gt=j?st.lang:st.getAttribute("xml:lang")||st.getAttribute("lang"))return gt=gt.toLowerCase(),gt===W||gt.indexOf(W+"-")===0;while((st=st.parentNode)&&st.nodeType===1);return!1}}),target:function(W){var st=e.location&&e.location.hash;return st&&st.slice(1)===W.id},root:function(W){return W===J},focus:function(W){return W===aa()&&N.hasFocus()&&!!(W.type||W.href||~W.tabIndex)},enabled:Vf(!1),disabled:Vf(!0),checked:function(W){return L(W,"input")&&!!W.checked||L(W,"option")&&!!W.selected},selected:function(W){return W.parentNode&&W.parentNode.selectedIndex,W.selected===!0},empty:function(W){for(W=W.firstChild;W;W=W.nextSibling)if(W.nodeType<6)return!1;return!0},parent:function(W){return!m.pseudos.empty(W)},header:function(W){return Si.test(W.nodeName)},input:function(W){return ni.test(W.nodeName)},button:function(W){return L(W,"input")&&W.type==="button"||L(W,"button")},text:function(W){var st;return L(W,"input")&&W.type==="text"&&((st=W.getAttribute("type"))==null||st.toLowerCase()==="text")},first:ar(function(){return[0]}),last:ar(function(W,st){return[st-1]}),eq:ar(function(W,st,gt){return[gt<0?gt+st:gt]}),even:ar(function(W,st){for(var gt=0;gt<st;gt+=2)W.push(gt);return W}),odd:ar(function(W,st){for(var gt=1;gt<st;gt+=2)W.push(gt);return W}),lt:ar(function(W,st,gt){var yt;for(gt<0?yt=gt+st:gt>st?yt=st:yt=gt;--yt>=0;)W.push(yt);return W}),gt:ar(function(W,st,gt){for(var yt=gt<0?gt+st:gt;++yt<st;)W.push(yt);return W})}},m.pseudos.nth=m.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[h]=H0(h);for(h in{submit:!0,reset:!0})m.pseudos[h]=$0(h);function no(){}no.prototype=m.filters=m.pseudos,m.setFilters=new no;function As(W,st){var gt,yt,z,nt,et,St,Et,Ut=de[W+" "];if(Ut)return st?0:Ut.slice(0);for(et=W,St=[],Et=m.preFilter;et;){(!gt||(yt=Ve.exec(et)))&&(yt&&(et=et.slice(yt[0].length)||et),St.push(z=[])),gt=!1,(yt=ia.exec(et))&&(gt=yt.shift(),z.push({value:gt,type:yt[0].replace(pt," ")}),et=et.slice(gt.length));for(nt in m.filter)(yt=sr[nt].exec(et))&&(!Et[nt]||(yt=Et[nt](yt)))&&(gt=yt.shift(),z.push({value:gt,type:nt,matches:yt}),et=et.slice(gt.length));if(!gt)break}return st?et.length:et?Ne.error(W):de(W,St).slice(0)}function mr(W){for(var st=0,gt=W.length,yt="";st<gt;st++)yt+=W[st].value;return yt}function Ui(W,st,gt){var yt=st.dir,z=st.next,nt=z||yt,et=gt&&nt==="parentNode",St=kt++;return st.first?function(Et,Ut,$t){for(;Et=Et[yt];)if(Et.nodeType===1||et)return W(Et,Ut,$t);return!1}:function(Et,Ut,$t){var Bt,me,Qt=[mt,St];if($t){for(;Et=Et[yt];)if((Et.nodeType===1||et)&&W(Et,Ut,$t))return!0}else for(;Et=Et[yt];)if(Et.nodeType===1||et)if(me=Et[At]||(Et[At]={}),z&&L(Et,z))Et=Et[yt]||Et;else{if((Bt=me[nt])&&Bt[0]===mt&&Bt[1]===St)return Qt[2]=Bt[2];if(me[nt]=Qt,Qt[2]=W(Et,Ut,$t))return!0}return!1}}function Su(W){return W.length>1?function(st,gt,yt){for(var z=W.length;z--;)if(!W[z](st,gt,yt))return!1;return!0}:W[0]}function W0(W,st,gt){for(var yt=0,z=st.length;yt<z;yt++)Ne(W,st[yt],gt);return gt}function ro(W,st,gt,yt,z){for(var nt,et=[],St=0,Et=W.length,Ut=st!=null;St<Et;St++)(nt=W[St])&&(!gt||gt(nt,yt,z))&&(et.push(nt),Ut&&st.push(St));return et}function Ei(W,st,gt,yt,z,nt){return yt&&!yt[At]&&(yt=Ei(yt)),z&&!z[At]&&(z=Ei(z,nt)),vr(function(et,St,Et,Ut){var $t,Bt,me,Qt,we=[],gn=[],xn=St.length,vn=et||W0(st||"*",Et.nodeType?[Et]:Et,[]),$n=W&&(et||!st)?ro(vn,we,W,Et,Ut):vn;if(gt?(Qt=z||(et?W:xn||yt)?[]:St,gt($n,Qt,Et,Ut)):Qt=$n,yt)for($t=ro(Qt,gn),yt($t,[],Et,Ut),Bt=$t.length;Bt--;)(me=$t[Bt])&&(Qt[gn[Bt]]=!($n[gn[Bt]]=me));if(et){if(z||W){if(z){for($t=[],Bt=Qt.length;Bt--;)(me=Qt[Bt])&&$t.push($n[Bt]=me);z(null,Qt=[],$t,Ut)}for(Bt=Qt.length;Bt--;)(me=Qt[Bt])&&($t=z?c.call(et,me):we[Bt])>-1&&(et[$t]=!(St[$t]=me))}}else Qt=ro(Qt===St?Qt.splice(xn,Qt.length):Qt),z?z(null,St,Qt,Ut):O.apply(St,Qt)})}function Hn(W){for(var st,gt,yt,z=W.length,nt=m.relative[W[0].type],et=nt||m.relative[" "],St=nt?1:0,Et=Ui(function(Bt){return Bt===st},et,!0),Ut=Ui(function(Bt){return c.call(st,Bt)>-1},et,!0),$t=[function(Bt,me,Qt){var we=!nt&&(Qt||me!=b)||((st=me).nodeType?Et(Bt,me,Qt):Ut(Bt,me,Qt));return st=null,we}];St<z;St++)if(gt=m.relative[W[St].type])$t=[Ui(Su($t),gt)];else{if(gt=m.filter[W[St].type].apply(null,W[St].matches),gt[At]){for(yt=++St;yt<z&&!m.relative[W[yt].type];yt++);return Ei(St>1&&Su($t),St>1&&mr(W.slice(0,St-1).concat({value:W[St-2].type===" "?"*":""})).replace(pt,"$1"),gt,St<yt&&Hn(W.slice(St,yt)),yt<z&&Hn(W=W.slice(yt)),yt<z&&mr(W))}$t.push(gt)}return Su($t)}function zf(W,st){var gt=st.length>0,yt=W.length>0,z=function(nt,et,St,Et,Ut){var $t,Bt,me,Qt=0,we="0",gn=nt&&[],xn=[],vn=b,$n=nt||yt&&m.find.TAG("*",Ut),ii=mt+=vn==null?1:Math.random()||.1,ue=$n.length;for(Ut&&(b=et==N||et||Ut);we!==ue&&($t=$n[we])!=null;we++){if(yt&&$t){for(Bt=0,!et&&$t.ownerDocument!=N&&(Ti($t),St=!j);me=W[Bt++];)if(me($t,et||N,St)){O.call(Et,$t);break}Ut&&(mt=ii)}gt&&(($t=!me&&$t)&&Qt--,nt&&gn.push($t))}if(Qt+=we,gt&&we!==Qt){for(Bt=0;me=st[Bt++];)me(gn,xn,et,St);if(nt){if(Qt>0)for(;we--;)gn[we]||xn[we]||(xn[we]=I.call(Et));xn=ro(xn)}O.apply(Et,xn),Ut&&!nt&&xn.length>0&&Qt+st.length>1&&d.uniqueSort(Et)}return Ut&&(mt=ii,b=vn),gn};return gt?vr(z):z}function Tu(W,st){var gt,yt=[],z=[],nt=le[W+" "];if(!nt){for(st||(st=As(W)),gt=st.length;gt--;)nt=Hn(st[gt]),nt[At]?yt.push(nt):z.push(nt);nt=le(W,zf(z,yt)),nt.selector=W}return nt}function Gf(W,st,gt,yt){var z,nt,et,St,Et,Ut=typeof W=="function"&&W,$t=!yt&&As(W=Ut.selector||W);if(gt=gt||[],$t.length===1){if(nt=$t[0]=$t[0].slice(0),nt.length>2&&(et=nt[0]).type==="ID"&&st.nodeType===9&&j&&m.relative[nt[1].type]){if(st=(m.find.ID(et.matches[0].replace(ri,Br),st)||[])[0],st)Ut&&(st=st.parentNode);else return gt;W=W.slice(nt.shift().value.length)}for(z=sr.needsContext.test(W)?0:nt.length;z--&&(et=nt[z],!m.relative[St=et.type]);)if((Et=m.find[St])&&(yt=Et(et.matches[0].replace(ri,Br),sa.test(nt[0].type)&&Au(st.parentNode)||st))){if(nt.splice(z,1),W=yt.length&&mr(nt),!W)return O.apply(gt,yt),gt;break}}return(Ut||Tu(W,$t))(yt,st,!j,gt,!st||sa.test(W)&&Au(st.parentNode)||st),gt}w.sortStable=At.split("").sort(Ze).join("")===At,Ti(),w.sortDetached=xs(function(W){return W.compareDocumentPosition(N.createElement("fieldset"))&1}),d.find=Ne,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,Ne.compile=Tu,Ne.select=Gf,Ne.setDocument=Ti,Ne.tokenize=As,Ne.escape=d.escapeSelector,Ne.getText=d.text,Ne.isXML=d.isXMLDoc,Ne.selectors=d.expr,Ne.support=d.support,Ne.uniqueSort=d.uniqueSort})();var dt=function(h,m,b){for(var S=[],R=b!==void 0;(h=h[m])&&h.nodeType!==9;)if(h.nodeType===1){if(R&&d(h).is(b))break;S.push(h)}return S},Xt=function(h,m){for(var b=[];h;h=h.nextSibling)h.nodeType===1&&h!==m&&b.push(h);return b},Ft=d.expr.match.needsContext,Ae=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ee(h,m,b){return x(m)?d.grep(h,function(S,R){return!!m.call(S,R,S)!==b}):m.nodeType?d.grep(h,function(S){return S===m!==b}):typeof m!="string"?d.grep(h,function(S){return c.call(m,S)>-1!==b}):d.filter(m,h,b)}d.filter=function(h,m,b){var S=m[0];return b&&(h=":not("+h+")"),m.length===1&&S.nodeType===1?d.find.matchesSelector(S,h)?[S]:[]:d.find.matches(h,d.grep(m,function(R){return R.nodeType===1}))},d.fn.extend({find:function(h){var m,b,S=this.length,R=this;if(typeof h!="string")return this.pushStack(d(h).filter(function(){for(m=0;m<S;m++)if(d.contains(R[m],this))return!0}));for(b=this.pushStack([]),m=0;m<S;m++)d.find(h,R[m],b);return S>1?d.uniqueSort(b):b},filter:function(h){return this.pushStack(Ee(this,h||[],!1))},not:function(h){return this.pushStack(Ee(this,h||[],!0))},is:function(h){return!!Ee(this,typeof h=="string"&&Ft.test(h)?d(h):h||[],!1).length}});var ot,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,tt=d.fn.init=function(h,m,b){var S,R;if(!h)return this;if(b=b||ot,typeof h=="string")if(h[0]==="<"&&h[h.length-1]===">"&&h.length>=3?S=[null,h,null]:S=ht.exec(h),S&&(S[1]||!m))if(S[1]){if(m=m instanceof d?m[0]:m,d.merge(this,d.parseHTML(S[1],m&&m.nodeType?m.ownerDocument||m:P,!0)),Ae.test(S[1])&&d.isPlainObject(m))for(S in m)x(this[S])?this[S](m[S]):this.attr(S,m[S]);return this}else return R=P.getElementById(S[2]),R&&(this[0]=R,this.length=1),this;else return!m||m.jquery?(m||b).find(h):this.constructor(m).find(h);else{if(h.nodeType)return this[0]=h,this.length=1,this;if(x(h))return b.ready!==void 0?b.ready(h):h(d)}return d.makeArray(h,this)};tt.prototype=d.fn,ot=d(P);var it=/^(?:parents|prev(?:Until|All))/,wt={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(h){var m=d(h,this),b=m.length;return this.filter(function(){for(var S=0;S<b;S++)if(d.contains(this,m[S]))return!0})},closest:function(h,m){var b,S=0,R=this.length,O=[],N=typeof h!="string"&&d(h);if(!Ft.test(h)){for(;S<R;S++)for(b=this[S];b&&b!==m;b=b.parentNode)if(b.nodeType<11&&(N?N.index(b)>-1:b.nodeType===1&&d.find.matchesSelector(b,h))){O.push(b);break}}return this.pushStack(O.length>1?d.uniqueSort(O):O)},index:function(h){return h?typeof h=="string"?c.call(d(h),this[0]):c.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,m){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(h,m))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function Ht(h,m){for(;(h=h[m])&&h.nodeType!==1;);return h}d.each({parent:function(h){var m=h.parentNode;return m&&m.nodeType!==11?m:null},parents:function(h){return dt(h,"parentNode")},parentsUntil:function(h,m,b){return dt(h,"parentNode",b)},next:function(h){return Ht(h,"nextSibling")},prev:function(h){return Ht(h,"previousSibling")},nextAll:function(h){return dt(h,"nextSibling")},prevAll:function(h){return dt(h,"previousSibling")},nextUntil:function(h,m,b){return dt(h,"nextSibling",b)},prevUntil:function(h,m,b){return dt(h,"previousSibling",b)},siblings:function(h){return Xt((h.parentNode||{}).firstChild,h)},children:function(h){return Xt(h.firstChild)},contents:function(h){return h.contentDocument!=null&&i(h.contentDocument)?h.contentDocument:(L(h,"template")&&(h=h.content||h),d.merge([],h.childNodes))}},function(h,m){d.fn[h]=function(b,S){var R=d.map(this,m,b);return h.slice(-5)!=="Until"&&(S=b),S&&typeof S=="string"&&(R=d.filter(S,R)),this.length>1&&(wt[h]||d.uniqueSort(R),it.test(h)&&R.reverse()),this.pushStack(R)}});var Gt=/[^\x20\t\r\n\f]+/g;function zt(h){var m={};return d.each(h.match(Gt)||[],function(b,S){m[S]=!0}),m}d.Callbacks=function(h){h=typeof h=="string"?zt(h):d.extend({},h);var m,b,S,R,O=[],N=[],J=-1,j=function(){for(R=R||h.once,S=m=!0;N.length;J=-1)for(b=N.shift();++J<O.length;)O[J].apply(b[0],b[1])===!1&&h.stopOnFalse&&(J=O.length,b=!1);h.memory||(b=!1),m=!1,R&&(b?O=[]:O="")},ut={add:function(){return O&&(b&&!m&&(J=O.length-1,N.push(b)),function bt(At){d.each(At,function(mt,kt){x(kt)?(!h.unique||!ut.has(kt))&&O.push(kt):kt&&kt.length&&B(kt)!=="string"&&bt(kt)})}(arguments),b&&!m&&j()),this},remove:function(){return d.each(arguments,function(bt,At){for(var mt;(mt=d.inArray(At,O,mt))>-1;)O.splice(mt,1),mt<=J&&J--}),this},has:function(bt){return bt?d.inArray(bt,O)>-1:O.length>0},empty:function(){return O&&(O=[]),this},disable:function(){return R=N=[],O=b="",this},disabled:function(){return!O},lock:function(){return R=N=[],!b&&!m&&(O=b=""),this},locked:function(){return!!R},fireWith:function(bt,At){return R||(At=At||[],At=[bt,At.slice?At.slice():At],N.push(At),m||j()),this},fire:function(){return ut.fireWith(this,arguments),this},fired:function(){return!!S}};return ut};function fe(h){return h}function Wt(h){throw h}function C(h,m,b,S){var R;try{h&&x(R=h.promise)?R.call(h).done(m).fail(b):h&&x(R=h.then)?R.call(h,m,b):m.apply(void 0,[h].slice(S))}catch(O){b.apply(void 0,[O])}}d.extend({Deferred:function(h){var m=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],b="pending",S={state:function(){return b},always:function(){return R.done(arguments).fail(arguments),this},catch:function(O){return S.then(null,O)},pipe:function(){var O=arguments;return d.Deferred(function(N){d.each(m,function(J,j){var ut=x(O[j[4]])&&O[j[4]];R[j[1]](function(){var bt=ut&&ut.apply(this,arguments);bt&&x(bt.promise)?bt.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[j[0]+"With"](this,ut?[bt]:arguments)})}),O=null}).promise()},then:function(O,N,J){var j=0;function ut(bt,At,mt,kt){return function(){var Vt=this,de=arguments,le=function(){var Ze,Dr;if(!(bt<j)){if(Ze=mt.apply(Vt,de),Ze===At.promise())throw new TypeError("Thenable self-resolution");Dr=Ze&&(typeof Ze=="object"||typeof Ze=="function")&&Ze.then,x(Dr)?kt?Dr.call(Ze,ut(j,At,fe,kt),ut(j,At,Wt,kt)):(j++,Dr.call(Ze,ut(j,At,fe,kt),ut(j,At,Wt,kt),ut(j,At,fe,At.notifyWith))):(mt!==fe&&(Vt=void 0,de=[Ze]),(kt||At.resolveWith)(Vt,de))}},pn=kt?le:function(){try{le()}catch(Ze){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Ze,pn.error),bt+1>=j&&(mt!==Wt&&(Vt=void 0,de=[Ze]),At.rejectWith(Vt,de))}};bt?pn():(d.Deferred.getErrorHook?pn.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(pn.error=d.Deferred.getStackHook()),e.setTimeout(pn))}}return d.Deferred(function(bt){m[0][3].add(ut(0,bt,x(J)?J:fe,bt.notifyWith)),m[1][3].add(ut(0,bt,x(O)?O:fe)),m[2][3].add(ut(0,bt,x(N)?N:Wt))}).promise()},promise:function(O){return O!=null?d.extend(O,S):S}},R={};return d.each(m,function(O,N){var J=N[2],j=N[5];S[N[1]]=J.add,j&&J.add(function(){b=j},m[3-O][2].disable,m[3-O][3].disable,m[0][2].lock,m[0][3].lock),J.add(N[3].fire),R[N[0]]=function(){return R[N[0]+"With"](this===R?void 0:this,arguments),this},R[N[0]+"With"]=J.fireWith}),S.promise(R),h&&h.call(R,R),R},when:function(h){var m=arguments.length,b=m,S=Array(b),R=s.call(arguments),O=d.Deferred(),N=function(J){return function(j){S[J]=this,R[J]=arguments.length>1?s.call(arguments):j,--m||O.resolveWith(S,R)}};if(m<=1&&(C(h,O.done(N(b)).resolve,O.reject,!m),O.state()==="pending"||x(R[b]&&R[b].then)))return O.then();for(;b--;)C(R[b],N(b),O.reject);return O.promise()}});var D=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(h,m){e.console&&e.console.warn&&h&&D.test(h.name)&&e.console.warn("jQuery.Deferred exception: "+h.message,h.stack,m)},d.readyException=function(h){e.setTimeout(function(){throw h})};var U=d.Deferred();d.fn.ready=function(h){return U.then(h).catch(function(m){d.readyException(m)}),this},d.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--d.readyWait:d.isReady)||(d.isReady=!0,!(h!==!0&&--d.readyWait>0)&&U.resolveWith(P,[d]))}}),d.ready.then=U.then;function $(){P.removeEventListener("DOMContentLoaded",$),e.removeEventListener("load",$),d.ready()}P.readyState==="complete"||P.readyState!=="loading"&&!P.documentElement.doScroll?e.setTimeout(d.ready):(P.addEventListener("DOMContentLoaded",$),e.addEventListener("load",$));var vt=function(h,m,b,S,R,O,N){var J=0,j=h.length,ut=b==null;if(B(b)==="object"){R=!0;for(J in b)vt(h,m,J,b[J],!0,O,N)}else if(S!==void 0&&(R=!0,x(S)||(N=!0),ut&&(N?(m.call(h,S),m=null):(ut=m,m=function(bt,At,mt){return ut.call(d(bt),mt)})),m))for(;J<j;J++)m(h[J],b,N?S:S.call(h[J],J,m(h[J],b)));return R?h:ut?m.call(h):j?m(h[0],b):O},_t=/^-ms-/,Nt=/-([a-z])/g;function Yt(h,m){return m.toUpperCase()}function ne(h){return h.replace(_t,"ms-").replace(Nt,Yt)}var he=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function ke(){this.expando=d.expando+ke.uid++}ke.uid=1,ke.prototype={cache:function(h){var m=h[this.expando];return m||(m={},he(h)&&(h.nodeType?h[this.expando]=m:Object.defineProperty(h,this.expando,{value:m,configurable:!0}))),m},set:function(h,m,b){var S,R=this.cache(h);if(typeof m=="string")R[ne(m)]=b;else for(S in m)R[ne(S)]=m[S];return R},get:function(h,m){return m===void 0?this.cache(h):h[this.expando]&&h[this.expando][ne(m)]},access:function(h,m,b){return m===void 0||m&&typeof m=="string"&&b===void 0?this.get(h,m):(this.set(h,m,b),b!==void 0?b:m)},remove:function(h,m){var b,S=h[this.expando];if(S!==void 0){if(m!==void 0)for(Array.isArray(m)?m=m.map(ne):(m=ne(m),m=m in S?[m]:m.match(Gt)||[]),b=m.length;b--;)delete S[m[b]];(m===void 0||d.isEmptyObject(S))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var m=h[this.expando];return m!==void 0&&!d.isEmptyObject(m)}};var Mt=new ke,oe=new ke,ve=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,sn=/[A-Z]/g;function qe(h){return h==="true"?!0:h==="false"?!1:h==="null"?null:h===+h+""?+h:ve.test(h)?JSON.parse(h):h}function He(h,m,b){var S;if(b===void 0&&h.nodeType===1)if(S="data-"+m.replace(sn,"-$&").toLowerCase(),b=h.getAttribute(S),typeof b=="string"){try{b=qe(b)}catch{}oe.set(h,m,b)}else b=void 0;return b}d.extend({hasData:function(h){return oe.hasData(h)||Mt.hasData(h)},data:function(h,m,b){return oe.access(h,m,b)},removeData:function(h,m){oe.remove(h,m)},_data:function(h,m,b){return Mt.access(h,m,b)},_removeData:function(h,m){Mt.remove(h,m)}}),d.fn.extend({data:function(h,m){var b,S,R,O=this[0],N=O&&O.attributes;if(h===void 0){if(this.length&&(R=oe.get(O),O.nodeType===1&&!Mt.get(O,"hasDataAttrs"))){for(b=N.length;b--;)N[b]&&(S=N[b].name,S.indexOf("data-")===0&&(S=ne(S.slice(5)),He(O,S,R[S])));Mt.set(O,"hasDataAttrs",!0)}return R}return typeof h=="object"?this.each(function(){oe.set(this,h)}):vt(this,function(J){var j;if(O&&J===void 0)return j=oe.get(O,h),j!==void 0||(j=He(O,h),j!==void 0)?j:void 0;this.each(function(){oe.set(this,h,J)})},null,m,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){oe.remove(this,h)})}}),d.extend({queue:function(h,m,b){var S;if(h)return m=(m||"fx")+"queue",S=Mt.get(h,m),b&&(!S||Array.isArray(b)?S=Mt.access(h,m,d.makeArray(b)):S.push(b)),S||[]},dequeue:function(h,m){m=m||"fx";var b=d.queue(h,m),S=b.length,R=b.shift(),O=d._queueHooks(h,m),N=function(){d.dequeue(h,m)};R==="inprogress"&&(R=b.shift(),S--),R&&(m==="fx"&&b.unshift("inprogress"),delete O.stop,R.call(h,N,O)),!S&&O&&O.empty.fire()},_queueHooks:function(h,m){var b=m+"queueHooks";return Mt.get(h,b)||Mt.access(h,b,{empty:d.Callbacks("once memory").add(function(){Mt.remove(h,[m+"queue",b])})})}}),d.fn.extend({queue:function(h,m){var b=2;return typeof h!="string"&&(m=h,h="fx",b--),arguments.length<b?d.queue(this[0],h):m===void 0?this:this.each(function(){var S=d.queue(this,h,m);d._queueHooks(this,h),h==="fx"&&S[0]!=="inprogress"&&d.dequeue(this,h)})},dequeue:function(h){return this.each(function(){d.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,m){var b,S=1,R=d.Deferred(),O=this,N=this.length,J=function(){--S||R.resolveWith(O,[O])};for(typeof h!="string"&&(m=h,h=void 0),h=h||"fx";N--;)b=Mt.get(O[N],h+"queueHooks"),b&&b.empty&&(S++,b.empty.add(J));return J(),R.promise(m)}});var an=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wn=new RegExp("^(?:([+-])=|)("+an+")([a-z%]*)$","i"),$e=["Top","Right","Bottom","Left"],Xe=P.documentElement,rr=function(h){return d.contains(h.ownerDocument,h)},yi={composed:!0};Xe.getRootNode&&(rr=function(h){return d.contains(h.ownerDocument,h)||h.getRootNode(yi)===h.ownerDocument});var Qr=function(h,m){return h=m||h,h.style.display==="none"||h.style.display===""&&rr(h)&&d.css(h,"display")==="none"};function Js(h,m,b,S){var R,O,N=20,J=S?function(){return S.cur()}:function(){return d.css(h,m,"")},j=J(),ut=b&&b[3]||(d.cssNumber[m]?"":"px"),bt=h.nodeType&&(d.cssNumber[m]||ut!=="px"&&+j)&&wn.exec(d.css(h,m));if(bt&&bt[3]!==ut){for(j=j/2,ut=ut||bt[3],bt=+j||1;N--;)d.style(h,m,bt+ut),(1-O)*(1-(O=J()/j||.5))<=0&&(N=0),bt=bt/O;bt=bt*2,d.style(h,m,bt+ut),b=b||[]}return b&&(bt=+bt||+j||0,R=b[1]?bt+(b[1]+1)*b[2]:+b[2],S&&(S.unit=ut,S.start=bt,S.end=R)),R}var Qs={};function bi(h){var m,b=h.ownerDocument,S=h.nodeName,R=Qs[S];return R||(m=b.body.appendChild(b.createElement(S)),R=d.css(m,"display"),m.parentNode.removeChild(m),R==="none"&&(R="block"),Qs[S]=R,R)}function Nr(h,m){for(var b,S,R=[],O=0,N=h.length;O<N;O++)S=h[O],S.style&&(b=S.style.display,m?(b==="none"&&(R[O]=Mt.get(S,"display")||null,R[O]||(S.style.display="")),S.style.display===""&&Qr(S)&&(R[O]=bi(S))):b!=="none"&&(R[O]="none",Mt.set(S,"display",b)));for(O=0;O<N;O++)R[O]!=null&&(h[O].style.display=R[O]);return h}d.fn.extend({show:function(){return Nr(this,!0)},hide:function(){return Nr(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){Qr(this)?d(this).show():d(this).hide()})}});var ti=/^(?:checkbox|radio)$/i,ta=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Wa=/^$|^module$|\/(?:java|ecma)script/i;(function(){var h=P.createDocumentFragment(),m=h.appendChild(P.createElement("div")),b=P.createElement("input");b.setAttribute("type","radio"),b.setAttribute("checked","checked"),b.setAttribute("name","t"),m.appendChild(b),w.checkClone=m.cloneNode(!0).cloneNode(!0).lastChild.checked,m.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!m.cloneNode(!0).lastChild.defaultValue,m.innerHTML="<option></option>",w.option=!!m.lastChild})();var Ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,w.option||(Ye.optgroup=Ye.option=[1,"<select multiple='multiple'>","</select>"]);function Mn(h,m){var b;return typeof h.getElementsByTagName<"u"?b=h.getElementsByTagName(m||"*"):typeof h.querySelectorAll<"u"?b=h.querySelectorAll(m||"*"):b=[],m===void 0||m&&L(h,m)?d.merge([h],b):b}function ja(h,m){for(var b=0,S=h.length;b<S;b++)Mt.set(h[b],"globalEval",!m||Mt.get(m[b],"globalEval"))}var T0=/<|&#?\w+;/;function vf(h,m,b,S,R){for(var O,N,J,j,ut,bt,At=m.createDocumentFragment(),mt=[],kt=0,Vt=h.length;kt<Vt;kt++)if(O=h[kt],O||O===0)if(B(O)==="object")d.merge(mt,O.nodeType?[O]:O);else if(!T0.test(O))mt.push(m.createTextNode(O));else{for(N=N||At.appendChild(m.createElement("div")),J=(ta.exec(O)||["",""])[1].toLowerCase(),j=Ye[J]||Ye._default,N.innerHTML=j[1]+d.htmlPrefilter(O)+j[2],bt=j[0];bt--;)N=N.lastChild;d.merge(mt,N.childNodes),N=At.firstChild,N.textContent=""}for(At.textContent="",kt=0;O=mt[kt++];){if(S&&d.inArray(O,S)>-1){R&&R.push(O);continue}if(ut=rr(O),N=Mn(At.appendChild(O),"script"),ut&&ja(N),b)for(bt=0;O=N[bt++];)Wa.test(O.type||"")&&b.push(O)}return At}var mf=/^([^.]*)(?:\.(.+)|)/;function _i(){return!0}function vs(){return!1}function ea(h,m,b,S,R,O){var N,J;if(typeof m=="object"){typeof b!="string"&&(S=S||b,b=void 0);for(J in m)ea(h,J,b,S,m[J],O);return h}if(S==null&&R==null?(R=b,S=b=void 0):R==null&&(typeof b=="string"?(R=S,S=void 0):(R=S,S=b,b=void 0)),R===!1)R=vs;else if(!R)return h;return O===1&&(N=R,R=function(j){return d().off(j),N.apply(this,arguments)},R.guid=N.guid||(N.guid=d.guid++)),h.each(function(){d.event.add(this,m,R,S,b)})}d.event={global:{},add:function(h,m,b,S,R){var O,N,J,j,ut,bt,At,mt,kt,Vt,de,le=Mt.get(h);if(he(h))for(b.handler&&(O=b,b=O.handler,R=O.selector),R&&d.find.matchesSelector(Xe,R),b.guid||(b.guid=d.guid++),(j=le.events)||(j=le.events=Object.create(null)),(N=le.handle)||(N=le.handle=function(pn){return typeof d<"u"&&d.event.triggered!==pn.type?d.event.dispatch.apply(h,arguments):void 0}),m=(m||"").match(Gt)||[""],ut=m.length;ut--;)J=mf.exec(m[ut])||[],kt=de=J[1],Vt=(J[2]||"").split(".").sort(),kt&&(At=d.event.special[kt]||{},kt=(R?At.delegateType:At.bindType)||kt,At=d.event.special[kt]||{},bt=d.extend({type:kt,origType:de,data:S,handler:b,guid:b.guid,selector:R,needsContext:R&&d.expr.match.needsContext.test(R),namespace:Vt.join(".")},O),(mt=j[kt])||(mt=j[kt]=[],mt.delegateCount=0,(!At.setup||At.setup.call(h,S,Vt,N)===!1)&&h.addEventListener&&h.addEventListener(kt,N)),At.add&&(At.add.call(h,bt),bt.handler.guid||(bt.handler.guid=b.guid)),R?mt.splice(mt.delegateCount++,0,bt):mt.push(bt),d.event.global[kt]=!0)},remove:function(h,m,b,S,R){var O,N,J,j,ut,bt,At,mt,kt,Vt,de,le=Mt.hasData(h)&&Mt.get(h);if(!(!le||!(j=le.events))){for(m=(m||"").match(Gt)||[""],ut=m.length;ut--;){if(J=mf.exec(m[ut])||[],kt=de=J[1],Vt=(J[2]||"").split(".").sort(),!kt){for(kt in j)d.event.remove(h,kt+m[ut],b,S,!0);continue}for(At=d.event.special[kt]||{},kt=(S?At.delegateType:At.bindType)||kt,mt=j[kt]||[],J=J[2]&&new RegExp("(^|\\.)"+Vt.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=O=mt.length;O--;)bt=mt[O],(R||de===bt.origType)&&(!b||b.guid===bt.guid)&&(!J||J.test(bt.namespace))&&(!S||S===bt.selector||S==="**"&&bt.selector)&&(mt.splice(O,1),bt.selector&&mt.delegateCount--,At.remove&&At.remove.call(h,bt));N&&!mt.length&&((!At.teardown||At.teardown.call(h,Vt,le.handle)===!1)&&d.removeEvent(h,kt,le.handle),delete j[kt])}d.isEmptyObject(j)&&Mt.remove(h,"handle events")}},dispatch:function(h){var m,b,S,R,O,N,J=new Array(arguments.length),j=d.event.fix(h),ut=(Mt.get(this,"events")||Object.create(null))[j.type]||[],bt=d.event.special[j.type]||{};for(J[0]=j,m=1;m<arguments.length;m++)J[m]=arguments[m];if(j.delegateTarget=this,!(bt.preDispatch&&bt.preDispatch.call(this,j)===!1)){for(N=d.event.handlers.call(this,j,ut),m=0;(R=N[m++])&&!j.isPropagationStopped();)for(j.currentTarget=R.elem,b=0;(O=R.handlers[b++])&&!j.isImmediatePropagationStopped();)(!j.rnamespace||O.namespace===!1||j.rnamespace.test(O.namespace))&&(j.handleObj=O,j.data=O.data,S=((d.event.special[O.origType]||{}).handle||O.handler).apply(R.elem,J),S!==void 0&&(j.result=S)===!1&&(j.preventDefault(),j.stopPropagation()));return bt.postDispatch&&bt.postDispatch.call(this,j),j.result}},handlers:function(h,m){var b,S,R,O,N,J=[],j=m.delegateCount,ut=h.target;if(j&&ut.nodeType&&!(h.type==="click"&&h.button>=1)){for(;ut!==this;ut=ut.parentNode||this)if(ut.nodeType===1&&!(h.type==="click"&&ut.disabled===!0)){for(O=[],N={},b=0;b<j;b++)S=m[b],R=S.selector+" ",N[R]===void 0&&(N[R]=S.needsContext?d(R,this).index(ut)>-1:d.find(R,this,null,[ut]).length),N[R]&&O.push(S);O.length&&J.push({elem:ut,handlers:O})}}return ut=this,j<m.length&&J.push({elem:ut,handlers:m.slice(j)}),J},addProp:function(h,m){Object.defineProperty(d.Event.prototype,h,{enumerable:!0,configurable:!0,get:x(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(b){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(h){return h[d.expando]?h:new d.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var m=this||h;return ti.test(m.type)&&m.click&&L(m,"input")&&Xa(m,"click",!0),!1},trigger:function(h){var m=this||h;return ti.test(m.type)&&m.click&&L(m,"input")&&Xa(m,"click"),!0},_default:function(h){var m=h.target;return ti.test(m.type)&&m.click&&L(m,"input")&&Mt.get(m,"click")||L(m,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function Xa(h,m,b){if(!b){Mt.get(h,m)===void 0&&d.event.add(h,m,_i);return}Mt.set(h,m,!1),d.event.add(h,m,{namespace:!1,handler:function(S){var R,O=Mt.get(this,m);if(S.isTrigger&1&&this[m]){if(O)(d.event.special[m]||{}).delegateType&&S.stopPropagation();else if(O=s.call(arguments),Mt.set(this,m,O),this[m](),R=Mt.get(this,m),Mt.set(this,m,!1),O!==R)return S.stopImmediatePropagation(),S.preventDefault(),R}else O&&(Mt.set(this,m,d.event.trigger(O[0],O.slice(1),this)),S.stopPropagation(),S.isImmediatePropagationStopped=_i)}})}d.removeEvent=function(h,m,b){h.removeEventListener&&h.removeEventListener(m,b)},d.Event=function(h,m){if(!(this instanceof d.Event))return new d.Event(h,m);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||h.defaultPrevented===void 0&&h.returnValue===!1?_i:vs,this.target=h.target&&h.target.nodeType===3?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,m&&d.extend(this,m),this.timeStamp=h&&h.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:vs,isPropagationStopped:vs,isImmediatePropagationStopped:vs,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=_i,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=_i,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=_i,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(h,m){function b(S){if(P.documentMode){var R=Mt.get(this,"handle"),O=d.event.fix(S);O.type=S.type==="focusin"?"focus":"blur",O.isSimulated=!0,R(S),O.target===O.currentTarget&&R(O)}else d.event.simulate(m,S.target,d.event.fix(S))}d.event.special[h]={setup:function(){var S;if(Xa(this,h,!0),P.documentMode)S=Mt.get(this,m),S||this.addEventListener(m,b),Mt.set(this,m,(S||0)+1);else return!1},trigger:function(){return Xa(this,h),!0},teardown:function(){var S;if(P.documentMode)S=Mt.get(this,m)-1,S?Mt.set(this,m,S):(this.removeEventListener(m,b),Mt.remove(this,m));else return!1},_default:function(S){return Mt.get(S.target,h)},delegateType:m},d.event.special[m]={setup:function(){var S=this.ownerDocument||this.document||this,R=P.documentMode?this:S,O=Mt.get(R,m);O||(P.documentMode?this.addEventListener(m,b):S.addEventListener(h,b,!0)),Mt.set(R,m,(O||0)+1)},teardown:function(){var S=this.ownerDocument||this.document||this,R=P.documentMode?this:S,O=Mt.get(R,m)-1;O?Mt.set(R,m,O):(P.documentMode?this.removeEventListener(m,b):S.removeEventListener(h,b,!0),Mt.remove(R,m))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,m){d.event.special[h]={delegateType:m,bindType:m,handle:function(b){var S,R=this,O=b.relatedTarget,N=b.handleObj;return(!O||O!==R&&!d.contains(R,O))&&(b.type=N.origType,S=N.handler.apply(this,arguments),b.type=m),S}}}),d.fn.extend({on:function(h,m,b,S){return ea(this,h,m,b,S)},one:function(h,m,b,S){return ea(this,h,m,b,S,1)},off:function(h,m,b){var S,R;if(h&&h.preventDefault&&h.handleObj)return S=h.handleObj,d(h.delegateTarget).off(S.namespace?S.origType+"."+S.namespace:S.origType,S.selector,S.handler),this;if(typeof h=="object"){for(R in h)this.off(R,m,h[R]);return this}return(m===!1||typeof m=="function")&&(b=m,m=void 0),b===!1&&(b=vs),this.each(function(){d.event.remove(this,h,b,m)})}});var E0=/<script|<style|<link/i,P0=/checked\s*(?:[^=]|=\s*.checked.)/i,C0=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function yf(h,m){return L(h,"table")&&L(m.nodeType!==11?m:m.firstChild,"tr")&&d(h).children("tbody")[0]||h}function L0(h){return h.type=(h.getAttribute("type")!==null)+"/"+h.type,h}function R0(h){return(h.type||"").slice(0,5)==="true/"?h.type=h.type.slice(5):h.removeAttribute("type"),h}function bf(h,m){var b,S,R,O,N,J,j;if(m.nodeType===1){if(Mt.hasData(h)&&(O=Mt.get(h),j=O.events,j)){Mt.remove(m,"handle events");for(R in j)for(b=0,S=j[R].length;b<S;b++)d.event.add(m,R,j[R][b])}oe.hasData(h)&&(N=oe.access(h),J=d.extend({},N),oe.set(m,J))}}function _f(h,m){var b=m.nodeName.toLowerCase();b==="input"&&ti.test(h.type)?m.checked=h.checked:(b==="input"||b==="textarea")&&(m.defaultValue=h.defaultValue)}function ms(h,m,b,S){m=a(m);var R,O,N,J,j,ut,bt=0,At=h.length,mt=At-1,kt=m[0],Vt=x(kt);if(Vt||At>1&&typeof kt=="string"&&!w.checkClone&&P0.test(kt))return h.each(function(de){var le=h.eq(de);Vt&&(m[0]=kt.call(this,de,le.html())),ms(le,m,b,S)});if(At&&(R=vf(m,h[0].ownerDocument,!1,h,S),O=R.firstChild,R.childNodes.length===1&&(R=O),O||S)){for(N=d.map(Mn(R,"script"),L0),J=N.length;bt<At;bt++)j=R,bt!==mt&&(j=d.clone(j,!0,!0),J&&d.merge(N,Mn(j,"script"))),b.call(h[bt],j,bt);if(J)for(ut=N[N.length-1].ownerDocument,d.map(N,R0),bt=0;bt<J;bt++)j=N[bt],Wa.test(j.type||"")&&!Mt.access(j,"globalEval")&&d.contains(ut,j)&&(j.src&&(j.type||"").toLowerCase()!=="module"?d._evalUrl&&!j.noModule&&d._evalUrl(j.src,{nonce:j.nonce||j.getAttribute("nonce")},ut):q(j.textContent.replace(C0,""),j,ut))}return h}function wf(h,m,b){for(var S,R=m?d.filter(m,h):h,O=0;(S=R[O])!=null;O++)!b&&S.nodeType===1&&d.cleanData(Mn(S)),S.parentNode&&(b&&rr(S)&&ja(Mn(S,"script")),S.parentNode.removeChild(S));return h}d.extend({htmlPrefilter:function(h){return h},clone:function(h,m,b){var S,R,O,N,J=h.cloneNode(!0),j=rr(h);if(!w.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!d.isXMLDoc(h))for(N=Mn(J),O=Mn(h),S=0,R=O.length;S<R;S++)_f(O[S],N[S]);if(m)if(b)for(O=O||Mn(h),N=N||Mn(J),S=0,R=O.length;S<R;S++)bf(O[S],N[S]);else bf(h,J);return N=Mn(J,"script"),N.length>0&&ja(N,!j&&Mn(h,"script")),J},cleanData:function(h){for(var m,b,S,R=d.event.special,O=0;(b=h[O])!==void 0;O++)if(he(b)){if(m=b[Mt.expando]){if(m.events)for(S in m.events)R[S]?d.event.remove(b,S):d.removeEvent(b,S,m.handle);b[Mt.expando]=void 0}b[oe.expando]&&(b[oe.expando]=void 0)}}}),d.fn.extend({detach:function(h){return wf(this,h,!0)},remove:function(h){return wf(this,h)},text:function(h){return vt(this,function(m){return m===void 0?d.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=m)})},null,h,arguments.length)},append:function(){return ms(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var m=yf(this,h);m.appendChild(h)}})},prepend:function(){return ms(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var m=yf(this,h);m.insertBefore(h,m.firstChild)}})},before:function(){return ms(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return ms(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,m=0;(h=this[m])!=null;m++)h.nodeType===1&&(d.cleanData(Mn(h,!1)),h.textContent="");return this},clone:function(h,m){return h=h??!1,m=m??h,this.map(function(){return d.clone(this,h,m)})},html:function(h){return vt(this,function(m){var b=this[0]||{},S=0,R=this.length;if(m===void 0&&b.nodeType===1)return b.innerHTML;if(typeof m=="string"&&!E0.test(m)&&!Ye[(ta.exec(m)||["",""])[1].toLowerCase()]){m=d.htmlPrefilter(m);try{for(;S<R;S++)b=this[S]||{},b.nodeType===1&&(d.cleanData(Mn(b,!1)),b.innerHTML=m);b=0}catch{}}b&&this.empty().append(m)},null,h,arguments.length)},replaceWith:function(){var h=[];return ms(this,arguments,function(m){var b=this.parentNode;d.inArray(this,h)<0&&(d.cleanData(Mn(this)),b&&b.replaceChild(m,this))},h)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,m){d.fn[h]=function(b){for(var S,R=[],O=d(b),N=O.length-1,J=0;J<=N;J++)S=J===N?this:this.clone(!0),d(O[J])[m](S),u.apply(R,S.get());return this.pushStack(R)}});var su=new RegExp("^("+an+")(?!px)[a-z%]+$","i"),au=/^--/,Ya=function(h){var m=h.ownerDocument.defaultView;return(!m||!m.opener)&&(m=e),m.getComputedStyle(h)},xf=function(h,m,b){var S,R,O={};for(R in m)O[R]=h.style[R],h.style[R]=m[R];S=b.call(h);for(R in m)h.style[R]=O[R];return S},Ka=new RegExp($e.join("|"),"i");(function(){function h(){if(ut){j.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ut.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Xe.appendChild(j).appendChild(ut);var bt=e.getComputedStyle(ut);b=bt.top!=="1%",J=m(bt.marginLeft)===12,ut.style.right="60%",O=m(bt.right)===36,S=m(bt.width)===36,ut.style.position="absolute",R=m(ut.offsetWidth/3)===12,Xe.removeChild(j),ut=null}}function m(bt){return Math.round(parseFloat(bt))}var b,S,R,O,N,J,j=P.createElement("div"),ut=P.createElement("div");ut.style&&(ut.style.backgroundClip="content-box",ut.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=ut.style.backgroundClip==="content-box",d.extend(w,{boxSizingReliable:function(){return h(),S},pixelBoxStyles:function(){return h(),O},pixelPosition:function(){return h(),b},reliableMarginLeft:function(){return h(),J},scrollboxSize:function(){return h(),R},reliableTrDimensions:function(){var bt,At,mt,kt;return N==null&&(bt=P.createElement("table"),At=P.createElement("tr"),mt=P.createElement("div"),bt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",At.style.cssText="box-sizing:content-box;border:1px solid",At.style.height="1px",mt.style.height="9px",mt.style.display="block",Xe.appendChild(bt).appendChild(At).appendChild(mt),kt=e.getComputedStyle(At),N=parseInt(kt.height,10)+parseInt(kt.borderTopWidth,10)+parseInt(kt.borderBottomWidth,10)===At.offsetHeight,Xe.removeChild(bt)),N}}))})();function na(h,m,b){var S,R,O,N,J=au.test(m),j=h.style;return b=b||Ya(h),b&&(N=b.getPropertyValue(m)||b[m],J&&N&&(N=N.replace(pt,"$1")||void 0),N===""&&!rr(h)&&(N=d.style(h,m)),!w.pixelBoxStyles()&&su.test(N)&&Ka.test(m)&&(S=j.width,R=j.minWidth,O=j.maxWidth,j.minWidth=j.maxWidth=j.width=N,N=b.width,j.width=S,j.minWidth=R,j.maxWidth=O)),N!==void 0?N+"":N}function ra(h,m){return{get:function(){if(h()){delete this.get;return}return(this.get=m).apply(this,arguments)}}}var Af=["Webkit","Moz","ms"],Sf=P.createElement("div").style,Tf={};function Ef(h){for(var m=h[0].toUpperCase()+h.slice(1),b=Af.length;b--;)if(h=Af[b]+m,h in Sf)return h}function Za(h){var m=d.cssProps[h]||Tf[h];return m||(h in Sf?h:Tf[h]=Ef(h)||h)}var Pf=/^(none|table(?!-c[ea]).+)/,O0={position:"absolute",visibility:"hidden",display:"block"},Cf={letterSpacing:"0",fontWeight:"400"};function Lf(h,m,b){var S=wn.exec(m);return S?Math.max(0,S[2]-(b||0))+(S[3]||"px"):m}function ou(h,m,b,S,R,O){var N=m==="width"?1:0,J=0,j=0,ut=0;if(b===(S?"border":"content"))return 0;for(;N<4;N+=2)b==="margin"&&(ut+=d.css(h,b+$e[N],!0,R)),S?(b==="content"&&(j-=d.css(h,"padding"+$e[N],!0,R)),b!=="margin"&&(j-=d.css(h,"border"+$e[N]+"Width",!0,R))):(j+=d.css(h,"padding"+$e[N],!0,R),b!=="padding"?j+=d.css(h,"border"+$e[N]+"Width",!0,R):J+=d.css(h,"border"+$e[N]+"Width",!0,R));return!S&&O>=0&&(j+=Math.max(0,Math.ceil(h["offset"+m[0].toUpperCase()+m.slice(1)]-O-j-J-.5))||0),j+ut}function uu(h,m,b){var S=Ya(h),R=!w.boxSizingReliable()||b,O=R&&d.css(h,"boxSizing",!1,S)==="border-box",N=O,J=na(h,m,S),j="offset"+m[0].toUpperCase()+m.slice(1);if(su.test(J)){if(!b)return J;J="auto"}return(!w.boxSizingReliable()&&O||!w.reliableTrDimensions()&&L(h,"tr")||J==="auto"||!parseFloat(J)&&d.css(h,"display",!1,S)==="inline")&&h.getClientRects().length&&(O=d.css(h,"boxSizing",!1,S)==="border-box",N=j in h,N&&(J=h[j])),J=parseFloat(J)||0,J+ou(h,m,b||(O?"border":"content"),N,S,J)+"px"}d.extend({cssHooks:{opacity:{get:function(h,m){if(m){var b=na(h,"opacity");return b===""?"1":b}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,m,b,S){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var R,O,N,J=ne(m),j=au.test(m),ut=h.style;if(j||(m=Za(J)),N=d.cssHooks[m]||d.cssHooks[J],b!==void 0){if(O=typeof b,O==="string"&&(R=wn.exec(b))&&R[1]&&(b=Js(h,m,R),O="number"),b==null||b!==b)return;O==="number"&&!j&&(b+=R&&R[3]||(d.cssNumber[J]?"":"px")),!w.clearCloneStyle&&b===""&&m.indexOf("background")===0&&(ut[m]="inherit"),(!N||!("set"in N)||(b=N.set(h,b,S))!==void 0)&&(j?ut.setProperty(m,b):ut[m]=b)}else return N&&"get"in N&&(R=N.get(h,!1,S))!==void 0?R:ut[m]}},css:function(h,m,b,S){var R,O,N,J=ne(m),j=au.test(m);return j||(m=Za(J)),N=d.cssHooks[m]||d.cssHooks[J],N&&"get"in N&&(R=N.get(h,!0,b)),R===void 0&&(R=na(h,m,S)),R==="normal"&&m in Cf&&(R=Cf[m]),b===""||b?(O=parseFloat(R),b===!0||isFinite(O)?O||0:R):R}}),d.each(["height","width"],function(h,m){d.cssHooks[m]={get:function(b,S,R){if(S)return Pf.test(d.css(b,"display"))&&(!b.getClientRects().length||!b.getBoundingClientRect().width)?xf(b,O0,function(){return uu(b,m,R)}):uu(b,m,R)},set:function(b,S,R){var O,N=Ya(b),J=!w.scrollboxSize()&&N.position==="absolute",j=J||R,ut=j&&d.css(b,"boxSizing",!1,N)==="border-box",bt=R?ou(b,m,R,ut,N):0;return ut&&J&&(bt-=Math.ceil(b["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(N[m])-ou(b,m,"border",!1,N)-.5)),bt&&(O=wn.exec(S))&&(O[3]||"px")!=="px"&&(b.style[m]=S,S=d.css(b,m)),Lf(b,S,bt)}}}),d.cssHooks.marginLeft=ra(w.reliableMarginLeft,function(h,m){if(m)return(parseFloat(na(h,"marginLeft"))||h.getBoundingClientRect().left-xf(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(h,m){d.cssHooks[h+m]={expand:function(b){for(var S=0,R={},O=typeof b=="string"?b.split(" "):[b];S<4;S++)R[h+$e[S]+m]=O[S]||O[S-2]||O[0];return R}},h!=="margin"&&(d.cssHooks[h+m].set=Lf)}),d.fn.extend({css:function(h,m){return vt(this,function(b,S,R){var O,N,J={},j=0;if(Array.isArray(S)){for(O=Ya(b),N=S.length;j<N;j++)J[S[j]]=d.css(b,S[j],!1,O);return J}return R!==void 0?d.style(b,S,R):d.css(b,S)},h,m,arguments.length>1)}});function En(h,m,b,S,R){return new En.prototype.init(h,m,b,S,R)}d.Tween=En,En.prototype={constructor:En,init:function(h,m,b,S,R,O){this.elem=h,this.prop=b,this.easing=R||d.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=S,this.unit=O||(d.cssNumber[b]?"":"px")},cur:function(){var h=En.propHooks[this.prop];return h&&h.get?h.get(this):En.propHooks._default.get(this)},run:function(h){var m,b=En.propHooks[this.prop];return this.options.duration?this.pos=m=d.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=m=h,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),b&&b.set?b.set(this):En.propHooks._default.set(this),this}},En.prototype.init.prototype=En.prototype,En.propHooks={_default:{get:function(h){var m;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(m=d.css(h.elem,h.prop,""),!m||m==="auto"?0:m)},set:function(h){d.fx.step[h.prop]?d.fx.step[h.prop](h):h.elem.nodeType===1&&(d.cssHooks[h.prop]||h.elem.style[Za(h.prop)]!=null)?d.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},En.propHooks.scrollTop=En.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},d.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},d.fx=En.prototype.init,d.fx.step={};var Vi,ys,k0=/^(?:toggle|show|hide)$/,Rf=/queueHooks$/;function bs(){ys&&(P.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(bs):e.setTimeout(bs,d.fx.interval),d.fx.tick())}function cu(){return e.setTimeout(function(){Vi=void 0}),Vi=Date.now()}function Ja(h,m){var b,S=0,R={height:h};for(m=m?1:0;S<4;S+=2-m)b=$e[S],R["margin"+b]=R["padding"+b]=h;return m&&(R.opacity=R.width=h),R}function fu(h,m,b){for(var S,R=(pr.tweeners[m]||[]).concat(pr.tweeners["*"]),O=0,N=R.length;O<N;O++)if(S=R[O].call(b,m,h))return S}function Of(h,m,b){var S,R,O,N,J,j,ut,bt,At="width"in m||"height"in m,mt=this,kt={},Vt=h.style,de=h.nodeType&&Qr(h),le=Mt.get(h,"fxshow");b.queue||(N=d._queueHooks(h,"fx"),N.unqueued==null&&(N.unqueued=0,J=N.empty.fire,N.empty.fire=function(){N.unqueued||J()}),N.unqueued++,mt.always(function(){mt.always(function(){N.unqueued--,d.queue(h,"fx").length||N.empty.fire()})}));for(S in m)if(R=m[S],k0.test(R)){if(delete m[S],O=O||R==="toggle",R===(de?"hide":"show"))if(R==="show"&&le&&le[S]!==void 0)de=!0;else continue;kt[S]=le&&le[S]||d.style(h,S)}if(j=!d.isEmptyObject(m),!(!j&&d.isEmptyObject(kt))){At&&h.nodeType===1&&(b.overflow=[Vt.overflow,Vt.overflowX,Vt.overflowY],ut=le&&le.display,ut==null&&(ut=Mt.get(h,"display")),bt=d.css(h,"display"),bt==="none"&&(ut?bt=ut:(Nr([h],!0),ut=h.style.display||ut,bt=d.css(h,"display"),Nr([h]))),(bt==="inline"||bt==="inline-block"&&ut!=null)&&d.css(h,"float")==="none"&&(j||(mt.done(function(){Vt.display=ut}),ut==null&&(bt=Vt.display,ut=bt==="none"?"":bt)),Vt.display="inline-block")),b.overflow&&(Vt.overflow="hidden",mt.always(function(){Vt.overflow=b.overflow[0],Vt.overflowX=b.overflow[1],Vt.overflowY=b.overflow[2]})),j=!1;for(S in kt)j||(le?"hidden"in le&&(de=le.hidden):le=Mt.access(h,"fxshow",{display:ut}),O&&(le.hidden=!de),de&&Nr([h],!0),mt.done(function(){de||Nr([h]),Mt.remove(h,"fxshow");for(S in kt)d.style(h,S,kt[S])})),j=fu(de?le[S]:0,S,mt),S in le||(le[S]=j.start,de&&(j.end=j.start,j.start=0))}}function lu(h,m){var b,S,R,O,N;for(b in h)if(S=ne(b),R=m[S],O=h[b],Array.isArray(O)&&(R=O[1],O=h[b]=O[0]),b!==S&&(h[S]=O,delete h[b]),N=d.cssHooks[S],N&&"expand"in N){O=N.expand(O),delete h[S];for(b in O)b in h||(h[b]=O[b],m[b]=R)}else m[S]=R}function pr(h,m,b){var S,R,O=0,N=pr.prefilters.length,J=d.Deferred().always(function(){delete j.elem}),j=function(){if(R)return!1;for(var At=Vi||cu(),mt=Math.max(0,ut.startTime+ut.duration-At),kt=mt/ut.duration||0,Vt=1-kt,de=0,le=ut.tweens.length;de<le;de++)ut.tweens[de].run(Vt);return J.notifyWith(h,[ut,Vt,mt]),Vt<1&&le?mt:(le||J.notifyWith(h,[ut,1,0]),J.resolveWith(h,[ut]),!1)},ut=J.promise({elem:h,props:d.extend({},m),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},b),originalProperties:m,originalOptions:b,startTime:Vi||cu(),duration:b.duration,tweens:[],createTween:function(At,mt){var kt=d.Tween(h,ut.opts,At,mt,ut.opts.specialEasing[At]||ut.opts.easing);return ut.tweens.push(kt),kt},stop:function(At){var mt=0,kt=At?ut.tweens.length:0;if(R)return this;for(R=!0;mt<kt;mt++)ut.tweens[mt].run(1);return At?(J.notifyWith(h,[ut,1,0]),J.resolveWith(h,[ut,At])):J.rejectWith(h,[ut,At]),this}}),bt=ut.props;for(lu(bt,ut.opts.specialEasing);O<N;O++)if(S=pr.prefilters[O].call(ut,h,bt,ut.opts),S)return x(S.stop)&&(d._queueHooks(ut.elem,ut.opts.queue).stop=S.stop.bind(S)),S;return d.map(bt,fu,ut),x(ut.opts.start)&&ut.opts.start.call(h,ut),ut.progress(ut.opts.progress).done(ut.opts.done,ut.opts.complete).fail(ut.opts.fail).always(ut.opts.always),d.fx.timer(d.extend(j,{elem:h,anim:ut,queue:ut.opts.queue})),ut}d.Animation=d.extend(pr,{tweeners:{"*":[function(h,m){var b=this.createTween(h,m);return Js(b.elem,h,wn.exec(m),b),b}]},tweener:function(h,m){x(h)?(m=h,h=["*"]):h=h.match(Gt);for(var b,S=0,R=h.length;S<R;S++)b=h[S],pr.tweeners[b]=pr.tweeners[b]||[],pr.tweeners[b].unshift(m)},prefilters:[Of],prefilter:function(h,m){m?pr.prefilters.unshift(h):pr.prefilters.push(h)}}),d.speed=function(h,m,b){var S=h&&typeof h=="object"?d.extend({},h):{complete:b||!b&&m||x(h)&&h,duration:h,easing:b&&m||m&&!x(m)&&m};return d.fx.off?S.duration=0:typeof S.duration!="number"&&(S.duration in d.fx.speeds?S.duration=d.fx.speeds[S.duration]:S.duration=d.fx.speeds._default),(S.queue==null||S.queue===!0)&&(S.queue="fx"),S.old=S.complete,S.complete=function(){x(S.old)&&S.old.call(this),S.queue&&d.dequeue(this,S.queue)},S},d.fn.extend({fadeTo:function(h,m,b,S){return this.filter(Qr).css("opacity",0).show().end().animate({opacity:m},h,b,S)},animate:function(h,m,b,S){var R=d.isEmptyObject(h),O=d.speed(m,b,S),N=function(){var J=pr(this,d.extend({},h),O);(R||Mt.get(this,"finish"))&&J.stop(!0)};return N.finish=N,R||O.queue===!1?this.each(N):this.queue(O.queue,N)},stop:function(h,m,b){var S=function(R){var O=R.stop;delete R.stop,O(b)};return typeof h!="string"&&(b=m,m=h,h=void 0),m&&this.queue(h||"fx",[]),this.each(function(){var R=!0,O=h!=null&&h+"queueHooks",N=d.timers,J=Mt.get(this);if(O)J[O]&&J[O].stop&&S(J[O]);else for(O in J)J[O]&&J[O].stop&&Rf.test(O)&&S(J[O]);for(O=N.length;O--;)N[O].elem===this&&(h==null||N[O].queue===h)&&(N[O].anim.stop(b),R=!1,N.splice(O,1));(R||!b)&&d.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var m,b=Mt.get(this),S=b[h+"queue"],R=b[h+"queueHooks"],O=d.timers,N=S?S.length:0;for(b.finish=!0,d.queue(this,h,[]),R&&R.stop&&R.stop.call(this,!0),m=O.length;m--;)O[m].elem===this&&O[m].queue===h&&(O[m].anim.stop(!0),O.splice(m,1));for(m=0;m<N;m++)S[m]&&S[m].finish&&S[m].finish.call(this);delete b.finish})}}),d.each(["toggle","show","hide"],function(h,m){var b=d.fn[m];d.fn[m]=function(S,R,O){return S==null||typeof S=="boolean"?b.apply(this,arguments):this.animate(Ja(m,!0),S,R,O)}}),d.each({slideDown:Ja("show"),slideUp:Ja("hide"),slideToggle:Ja("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,m){d.fn[h]=function(b,S,R){return this.animate(m,b,S,R)}}),d.timers=[],d.fx.tick=function(){var h,m=0,b=d.timers;for(Vi=Date.now();m<b.length;m++)h=b[m],!h()&&b[m]===h&&b.splice(m--,1);b.length||d.fx.stop(),Vi=void 0},d.fx.timer=function(h){d.timers.push(h),d.fx.start()},d.fx.interval=13,d.fx.start=function(){ys||(ys=!0,bs())},d.fx.stop=function(){ys=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(h,m){return h=d.fx&&d.fx.speeds[h]||h,m=m||"fx",this.queue(m,function(b,S){var R=e.setTimeout(b,h);S.stop=function(){e.clearTimeout(R)}})},function(){var h=P.createElement("input"),m=P.createElement("select"),b=m.appendChild(P.createElement("option"));h.type="checkbox",w.checkOn=h.value!=="",w.optSelected=b.selected,h=P.createElement("input"),h.value="t",h.type="radio",w.radioValue=h.value==="t"}();var hu,zi=d.expr.attrHandle;d.fn.extend({attr:function(h,m){return vt(this,d.attr,h,m,arguments.length>1)},removeAttr:function(h){return this.each(function(){d.removeAttr(this,h)})}}),d.extend({attr:function(h,m,b){var S,R,O=h.nodeType;if(!(O===3||O===8||O===2)){if(typeof h.getAttribute>"u")return d.prop(h,m,b);if((O!==1||!d.isXMLDoc(h))&&(R=d.attrHooks[m.toLowerCase()]||(d.expr.match.bool.test(m)?hu:void 0)),b!==void 0){if(b===null){d.removeAttr(h,m);return}return R&&"set"in R&&(S=R.set(h,b,m))!==void 0?S:(h.setAttribute(m,b+""),b)}return R&&"get"in R&&(S=R.get(h,m))!==null?S:(S=d.find.attr(h,m),S??void 0)}},attrHooks:{type:{set:function(h,m){if(!w.radioValue&&m==="radio"&&L(h,"input")){var b=h.value;return h.setAttribute("type",m),b&&(h.value=b),m}}}},removeAttr:function(h,m){var b,S=0,R=m&&m.match(Gt);if(R&&h.nodeType===1)for(;b=R[S++];)h.removeAttribute(b)}}),hu={set:function(h,m,b){return m===!1?d.removeAttr(h,b):h.setAttribute(b,b),b}},d.each(d.expr.match.bool.source.match(/\w+/g),function(h,m){var b=zi[m]||d.find.attr;zi[m]=function(S,R,O){var N,J,j=R.toLowerCase();return O||(J=zi[j],zi[j]=N,N=b(S,R,O)!=null?j:null,zi[j]=J),N}});var du=/^(?:input|select|textarea|button)$/i,_s=/^(?:a|area)$/i;d.fn.extend({prop:function(h,m){return vt(this,d.prop,h,m,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[d.propFix[h]||h]})}}),d.extend({prop:function(h,m,b){var S,R,O=h.nodeType;if(!(O===3||O===8||O===2))return(O!==1||!d.isXMLDoc(h))&&(m=d.propFix[m]||m,R=d.propHooks[m]),b!==void 0?R&&"set"in R&&(S=R.set(h,b,m))!==void 0?S:h[m]=b:R&&"get"in R&&(S=R.get(h,m))!==null?S:h[m]},propHooks:{tabIndex:{get:function(h){var m=d.find.attr(h,"tabindex");return m?parseInt(m,10):du.test(h.nodeName)||_s.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(d.propHooks.selected={get:function(h){var m=h.parentNode;return m&&m.parentNode&&m.parentNode.selectedIndex,null},set:function(h){var m=h.parentNode;m&&(m.selectedIndex,m.parentNode&&m.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});function wi(h){var m=h.match(Gt)||[];return m.join(" ")}function xi(h){return h.getAttribute&&h.getAttribute("class")||""}function pu(h){return Array.isArray(h)?h:typeof h=="string"?h.match(Gt)||[]:[]}d.fn.extend({addClass:function(h){var m,b,S,R,O,N;return x(h)?this.each(function(J){d(this).addClass(h.call(this,J,xi(this)))}):(m=pu(h),m.length?this.each(function(){if(S=xi(this),b=this.nodeType===1&&" "+wi(S)+" ",b){for(O=0;O<m.length;O++)R=m[O],b.indexOf(" "+R+" ")<0&&(b+=R+" ");N=wi(b),S!==N&&this.setAttribute("class",N)}}):this)},removeClass:function(h){var m,b,S,R,O,N;return x(h)?this.each(function(J){d(this).removeClass(h.call(this,J,xi(this)))}):arguments.length?(m=pu(h),m.length?this.each(function(){if(S=xi(this),b=this.nodeType===1&&" "+wi(S)+" ",b){for(O=0;O<m.length;O++)for(R=m[O];b.indexOf(" "+R+" ")>-1;)b=b.replace(" "+R+" "," ");N=wi(b),S!==N&&this.setAttribute("class",N)}}):this):this.attr("class","")},toggleClass:function(h,m){var b,S,R,O,N=typeof h,J=N==="string"||Array.isArray(h);return x(h)?this.each(function(j){d(this).toggleClass(h.call(this,j,xi(this),m),m)}):typeof m=="boolean"&&J?m?this.addClass(h):this.removeClass(h):(b=pu(h),this.each(function(){if(J)for(O=d(this),R=0;R<b.length;R++)S=b[R],O.hasClass(S)?O.removeClass(S):O.addClass(S);else(h===void 0||N==="boolean")&&(S=xi(this),S&&Mt.set(this,"__className__",S),this.setAttribute&&this.setAttribute("class",S||h===!1?"":Mt.get(this,"__className__")||""))}))},hasClass:function(h){var m,b,S=0;for(m=" "+h+" ";b=this[S++];)if(b.nodeType===1&&(" "+wi(xi(b))+" ").indexOf(m)>-1)return!0;return!1}});var kf=/\r/g;d.fn.extend({val:function(h){var m,b,S,R=this[0];return arguments.length?(S=x(h),this.each(function(O){var N;this.nodeType===1&&(S?N=h.call(this,O,d(this).val()):N=h,N==null?N="":typeof N=="number"?N+="":Array.isArray(N)&&(N=d.map(N,function(J){return J==null?"":J+""})),m=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],(!m||!("set"in m)||m.set(this,N,"value")===void 0)&&(this.value=N))})):R?(m=d.valHooks[R.type]||d.valHooks[R.nodeName.toLowerCase()],m&&"get"in m&&(b=m.get(R,"value"))!==void 0?b:(b=R.value,typeof b=="string"?b.replace(kf,""):b??"")):void 0}}),d.extend({valHooks:{option:{get:function(h){var m=d.find.attr(h,"value");return m??wi(d.text(h))}},select:{get:function(h){var m,b,S,R=h.options,O=h.selectedIndex,N=h.type==="select-one",J=N?null:[],j=N?O+1:R.length;for(O<0?S=j:S=N?O:0;S<j;S++)if(b=R[S],(b.selected||S===O)&&!b.disabled&&(!b.parentNode.disabled||!L(b.parentNode,"optgroup"))){if(m=d(b).val(),N)return m;J.push(m)}return J},set:function(h,m){for(var b,S,R=h.options,O=d.makeArray(m),N=R.length;N--;)S=R[N],(S.selected=d.inArray(d.valHooks.option.get(S),O)>-1)&&(b=!0);return b||(h.selectedIndex=-1),O}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(h,m){if(Array.isArray(m))return h.checked=d.inArray(d(h).val(),m)>-1}},w.checkOn||(d.valHooks[this].get=function(h){return h.getAttribute("value")===null?"on":h.value})});var ws=e.location,gu={guid:Date.now()},Qa=/\?/;d.parseXML=function(h){var m,b;if(!h||typeof h!="string")return null;try{m=new e.DOMParser().parseFromString(h,"text/xml")}catch{}return b=m&&m.getElementsByTagName("parsererror")[0],(!m||b)&&d.error("Invalid XML: "+(b?d.map(b.childNodes,function(S){return S.textContent}).join(`
`):h)),m};var Mf=/^(?:focusinfocus|focusoutblur)$/,If=function(h){h.stopPropagation()};d.extend(d.event,{trigger:function(h,m,b,S){var R,O,N,J,j,ut,bt,At,mt=[b||P],kt=p.call(h,"type")?h.type:h,Vt=p.call(h,"namespace")?h.namespace.split("."):[];if(O=At=N=b=b||P,!(b.nodeType===3||b.nodeType===8)&&!Mf.test(kt+d.event.triggered)&&(kt.indexOf(".")>-1&&(Vt=kt.split("."),kt=Vt.shift(),Vt.sort()),j=kt.indexOf(":")<0&&"on"+kt,h=h[d.expando]?h:new d.Event(kt,typeof h=="object"&&h),h.isTrigger=S?2:3,h.namespace=Vt.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+Vt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=b),m=m==null?[h]:d.makeArray(m,[h]),bt=d.event.special[kt]||{},!(!S&&bt.trigger&&bt.trigger.apply(b,m)===!1))){if(!S&&!bt.noBubble&&!T(b)){for(J=bt.delegateType||kt,Mf.test(J+kt)||(O=O.parentNode);O;O=O.parentNode)mt.push(O),N=O;N===(b.ownerDocument||P)&&mt.push(N.defaultView||N.parentWindow||e)}for(R=0;(O=mt[R++])&&!h.isPropagationStopped();)At=O,h.type=R>1?J:bt.bindType||kt,ut=(Mt.get(O,"events")||Object.create(null))[h.type]&&Mt.get(O,"handle"),ut&&ut.apply(O,m),ut=j&&O[j],ut&&ut.apply&&he(O)&&(h.result=ut.apply(O,m),h.result===!1&&h.preventDefault());return h.type=kt,!S&&!h.isDefaultPrevented()&&(!bt._default||bt._default.apply(mt.pop(),m)===!1)&&he(b)&&j&&x(b[kt])&&!T(b)&&(N=b[j],N&&(b[j]=null),d.event.triggered=kt,h.isPropagationStopped()&&At.addEventListener(kt,If),b[kt](),h.isPropagationStopped()&&At.removeEventListener(kt,If),d.event.triggered=void 0,N&&(b[j]=N)),h.result}},simulate:function(h,m,b){var S=d.extend(new d.Event,b,{type:h,isSimulated:!0});d.event.trigger(S,null,m)}}),d.fn.extend({trigger:function(h,m){return this.each(function(){d.event.trigger(h,m,this)})},triggerHandler:function(h,m){var b=this[0];if(b)return d.event.trigger(h,m,b,!0)}});var M0=/\[\]$/,vu=/\r?\n/g,I0=/^(?:submit|button|image|reset|file)$/i,N0=/^(?:input|select|textarea|keygen)/i;function mu(h,m,b,S){var R;if(Array.isArray(m))d.each(m,function(O,N){b||M0.test(h)?S(h,N):mu(h+"["+(typeof N=="object"&&N!=null?O:"")+"]",N,b,S)});else if(!b&&B(m)==="object")for(R in m)mu(h+"["+R+"]",m[R],b,S);else S(h,m)}d.param=function(h,m){var b,S=[],R=function(O,N){var J=x(N)?N():N;S[S.length]=encodeURIComponent(O)+"="+encodeURIComponent(J??"")};if(h==null)return"";if(Array.isArray(h)||h.jquery&&!d.isPlainObject(h))d.each(h,function(){R(this.name,this.value)});else for(b in h)mu(b,h[b],m,R);return S.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=d.prop(this,"elements");return h?d.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!d(this).is(":disabled")&&N0.test(this.nodeName)&&!I0.test(h)&&(this.checked||!ti.test(h))}).map(function(h,m){var b=d(this).val();return b==null?null:Array.isArray(b)?d.map(b,function(S){return{name:m.name,value:S.replace(vu,`\r
`)}}):{name:m.name,value:b.replace(vu,`\r
`)}}).get()}});var D0=/%20/g,yu=/#.*$/,q0=/([?&])_=[^&]*/,B0=/^(.*?):[ \t]*([^\r\n]*)$/mg,F0=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,V0=/^(?:GET|HEAD)$/,z0=/^\/\//,Ue={},Be={},Nf="*/".concat("*"),bu=P.createElement("a");bu.href=ws.href;function Df(h){return function(m,b){typeof m!="string"&&(b=m,m="*");var S,R=0,O=m.toLowerCase().match(Gt)||[];if(x(b))for(;S=O[R++];)S[0]==="+"?(S=S.slice(1)||"*",(h[S]=h[S]||[]).unshift(b)):(h[S]=h[S]||[]).push(b)}}function qf(h,m,b,S){var R={},O=h===Be;function N(J){var j;return R[J]=!0,d.each(h[J]||[],function(ut,bt){var At=bt(m,b,S);if(typeof At=="string"&&!O&&!R[At])return m.dataTypes.unshift(At),N(At),!1;if(O)return!(j=At)}),j}return N(m.dataTypes[0])||!R["*"]&&N("*")}function _u(h,m){var b,S,R=d.ajaxSettings.flatOptions||{};for(b in m)m[b]!==void 0&&((R[b]?h:S||(S={}))[b]=m[b]);return S&&d.extend(!0,h,S),h}function G0(h,m,b){for(var S,R,O,N,J=h.contents,j=h.dataTypes;j[0]==="*";)j.shift(),S===void 0&&(S=h.mimeType||m.getResponseHeader("Content-Type"));if(S){for(R in J)if(J[R]&&J[R].test(S)){j.unshift(R);break}}if(j[0]in b)O=j[0];else{for(R in b){if(!j[0]||h.converters[R+" "+j[0]]){O=R;break}N||(N=R)}O=O||N}if(O)return O!==j[0]&&j.unshift(O),b[O]}function Bf(h,m,b,S){var R,O,N,J,j,ut={},bt=h.dataTypes.slice();if(bt[1])for(N in h.converters)ut[N.toLowerCase()]=h.converters[N];for(O=bt.shift();O;)if(h.responseFields[O]&&(b[h.responseFields[O]]=m),!j&&S&&h.dataFilter&&(m=h.dataFilter(m,h.dataType)),j=O,O=bt.shift(),O){if(O==="*")O=j;else if(j!=="*"&&j!==O){if(N=ut[j+" "+O]||ut["* "+O],!N){for(R in ut)if(J=R.split(" "),J[1]===O&&(N=ut[j+" "+J[0]]||ut["* "+J[0]],N)){N===!0?N=ut[R]:ut[R]!==!0&&(O=J[0],bt.unshift(J[1]));break}}if(N!==!0)if(N&&h.throws)m=N(m);else try{m=N(m)}catch(At){return{state:"parsererror",error:N?At:"No conversion from "+j+" to "+O}}}}return{state:"success",data:m}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ws.href,type:"GET",isLocal:F0.test(ws.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,m){return m?_u(_u(h,d.ajaxSettings),m):_u(d.ajaxSettings,h)},ajaxPrefilter:Df(Ue),ajaxTransport:Df(Be),ajax:function(h,m){typeof h=="object"&&(m=h,h=void 0),m=m||{};var b,S,R,O,N,J,j,ut,bt,At,mt=d.ajaxSetup({},m),kt=mt.context||mt,Vt=mt.context&&(kt.nodeType||kt.jquery)?d(kt):d.event,de=d.Deferred(),le=d.Callbacks("once memory"),pn=mt.statusCode||{},Ze={},Dr={},qr="canceled",Se={readyState:0,getResponseHeader:function(Te){var Ve;if(j){if(!O)for(O={};Ve=B0.exec(R);)O[Ve[1].toLowerCase()+" "]=(O[Ve[1].toLowerCase()+" "]||[]).concat(Ve[2]);Ve=O[Te.toLowerCase()+" "]}return Ve==null?null:Ve.join(", ")},getAllResponseHeaders:function(){return j?R:null},setRequestHeader:function(Te,Ve){return j==null&&(Te=Dr[Te.toLowerCase()]=Dr[Te.toLowerCase()]||Te,Ze[Te]=Ve),this},overrideMimeType:function(Te){return j==null&&(mt.mimeType=Te),this},statusCode:function(Te){var Ve;if(Te)if(j)Se.always(Te[Se.status]);else for(Ve in Te)pn[Ve]=[pn[Ve],Te[Ve]];return this},abort:function(Te){var Ve=Te||qr;return b&&b.abort(Ve),Ai(0,Ve),this}};if(de.promise(Se),mt.url=((h||mt.url||ws.href)+"").replace(z0,ws.protocol+"//"),mt.type=m.method||m.type||mt.method||mt.type,mt.dataTypes=(mt.dataType||"*").toLowerCase().match(Gt)||[""],mt.crossDomain==null){J=P.createElement("a");try{J.href=mt.url,J.href=J.href,mt.crossDomain=bu.protocol+"//"+bu.host!=J.protocol+"//"+J.host}catch{mt.crossDomain=!0}}if(mt.data&&mt.processData&&typeof mt.data!="string"&&(mt.data=d.param(mt.data,mt.traditional)),qf(Ue,mt,m,Se),j)return Se;ut=d.event&&mt.global,ut&&d.active++===0&&d.event.trigger("ajaxStart"),mt.type=mt.type.toUpperCase(),mt.hasContent=!V0.test(mt.type),S=mt.url.replace(yu,""),mt.hasContent?mt.data&&mt.processData&&(mt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(mt.data=mt.data.replace(D0,"+")):(At=mt.url.slice(S.length),mt.data&&(mt.processData||typeof mt.data=="string")&&(S+=(Qa.test(S)?"&":"?")+mt.data,delete mt.data),mt.cache===!1&&(S=S.replace(q0,"$1"),At=(Qa.test(S)?"&":"?")+"_="+gu.guid+++At),mt.url=S+At),mt.ifModified&&(d.lastModified[S]&&Se.setRequestHeader("If-Modified-Since",d.lastModified[S]),d.etag[S]&&Se.setRequestHeader("If-None-Match",d.etag[S])),(mt.data&&mt.hasContent&&mt.contentType!==!1||m.contentType)&&Se.setRequestHeader("Content-Type",mt.contentType),Se.setRequestHeader("Accept",mt.dataTypes[0]&&mt.accepts[mt.dataTypes[0]]?mt.accepts[mt.dataTypes[0]]+(mt.dataTypes[0]!=="*"?", "+Nf+"; q=0.01":""):mt.accepts["*"]);for(bt in mt.headers)Se.setRequestHeader(bt,mt.headers[bt]);if(mt.beforeSend&&(mt.beforeSend.call(kt,Se,mt)===!1||j))return Se.abort();if(qr="abort",le.add(mt.complete),Se.done(mt.success),Se.fail(mt.error),b=qf(Be,mt,m,Se),!b)Ai(-1,"No Transport");else{if(Se.readyState=1,ut&&Vt.trigger("ajaxSend",[Se,mt]),j)return Se;mt.async&&mt.timeout>0&&(N=e.setTimeout(function(){Se.abort("timeout")},mt.timeout));try{j=!1,b.send(Ze,Ai)}catch(Te){if(j)throw Te;Ai(-1,Te)}}function Ai(Te,Ve,ia,eo){var gr,Gi,sr,ni,Si,In=Ve;j||(j=!0,N&&e.clearTimeout(N),b=void 0,R=eo||"",Se.readyState=Te>0?4:0,gr=Te>=200&&Te<300||Te===304,ia&&(ni=G0(mt,Se,ia)),!gr&&d.inArray("script",mt.dataTypes)>-1&&d.inArray("json",mt.dataTypes)<0&&(mt.converters["text script"]=function(){}),ni=Bf(mt,ni,Se,gr),gr?(mt.ifModified&&(Si=Se.getResponseHeader("Last-Modified"),Si&&(d.lastModified[S]=Si),Si=Se.getResponseHeader("etag"),Si&&(d.etag[S]=Si)),Te===204||mt.type==="HEAD"?In="nocontent":Te===304?In="notmodified":(In=ni.state,Gi=ni.data,sr=ni.error,gr=!sr)):(sr=In,(Te||!In)&&(In="error",Te<0&&(Te=0))),Se.status=Te,Se.statusText=(Ve||In)+"",gr?de.resolveWith(kt,[Gi,In,Se]):de.rejectWith(kt,[Se,In,sr]),Se.statusCode(pn),pn=void 0,ut&&Vt.trigger(gr?"ajaxSuccess":"ajaxError",[Se,mt,gr?Gi:sr]),le.fireWith(kt,[Se,In]),ut&&(Vt.trigger("ajaxComplete",[Se,mt]),--d.active||d.event.trigger("ajaxStop")))}return Se},getJSON:function(h,m,b){return d.get(h,m,b,"json")},getScript:function(h,m){return d.get(h,void 0,m,"script")}}),d.each(["get","post"],function(h,m){d[m]=function(b,S,R,O){return x(S)&&(O=O||R,R=S,S=void 0),d.ajax(d.extend({url:b,type:m,dataType:O,data:S,success:R},d.isPlainObject(b)&&b))}}),d.ajaxPrefilter(function(h){var m;for(m in h.headers)m.toLowerCase()==="content-type"&&(h.contentType=h.headers[m]||"")}),d._evalUrl=function(h,m,b){return d.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(S){d.globalEval(S,m,b)}})},d.fn.extend({wrapAll:function(h){var m;return this[0]&&(x(h)&&(h=h.call(this[0])),m=d(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(h){return x(h)?this.each(function(m){d(this).wrapInner(h.call(this,m))}):this.each(function(){var m=d(this),b=m.contents();b.length?b.wrapAll(h):m.append(h)})},wrap:function(h){var m=x(h);return this.each(function(b){d(this).wrapAll(m?h.call(this,b):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(h){return!d.expr.pseudos.visible(h)},d.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var U0={0:200,1223:204},Ke=d.ajaxSettings.xhr();w.cors=!!Ke&&"withCredentials"in Ke,w.ajax=Ke=!!Ke,d.ajaxTransport(function(h){var m,b;if(w.cors||Ke&&!h.crossDomain)return{send:function(S,R){var O,N=h.xhr();if(N.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(O in h.xhrFields)N[O]=h.xhrFields[O];h.mimeType&&N.overrideMimeType&&N.overrideMimeType(h.mimeType),!h.crossDomain&&!S["X-Requested-With"]&&(S["X-Requested-With"]="XMLHttpRequest");for(O in S)N.setRequestHeader(O,S[O]);m=function(J){return function(){m&&(m=b=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,J==="abort"?N.abort():J==="error"?typeof N.status!="number"?R(0,"error"):R(N.status,N.statusText):R(U0[N.status]||N.status,N.statusText,(N.responseType||"text")!=="text"||typeof N.responseText!="string"?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=m(),b=N.onerror=N.ontimeout=m("error"),N.onabort!==void 0?N.onabort=b:N.onreadystatechange=function(){N.readyState===4&&e.setTimeout(function(){m&&b()})},m=m("abort");try{N.send(h.hasContent&&h.data||null)}catch(J){if(m)throw J}},abort:function(){m&&m()}}}),d.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return d.globalEval(h),h}}}),d.ajaxPrefilter("script",function(h){h.cache===void 0&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),d.ajaxTransport("script",function(h){if(h.crossDomain||h.scriptAttrs){var m,b;return{send:function(S,R){m=d("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",b=function(O){m.remove(),b=null,O&&R(O.type==="error"?404:200,O.type)}),P.head.appendChild(m[0])},abort:function(){b&&b()}}}});var to=[],ei=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=to.pop()||d.expando+"_"+gu.guid++;return this[h]=!0,h}}),d.ajaxPrefilter("json jsonp",function(h,m,b){var S,R,O,N=h.jsonp!==!1&&(ei.test(h.url)?"url":typeof h.data=="string"&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ei.test(h.data)&&"data");if(N||h.dataTypes[0]==="jsonp")return S=h.jsonpCallback=x(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,N?h[N]=h[N].replace(ei,"$1"+S):h.jsonp!==!1&&(h.url+=(Qa.test(h.url)?"&":"?")+h.jsonp+"="+S),h.converters["script json"]=function(){return O||d.error(S+" was not called"),O[0]},h.dataTypes[0]="json",R=e[S],e[S]=function(){O=arguments},b.always(function(){R===void 0?d(e).removeProp(S):e[S]=R,h[S]&&(h.jsonpCallback=m.jsonpCallback,to.push(S)),O&&x(R)&&R(O[0]),O=R=void 0}),"script"}),w.createHTMLDocument=function(){var h=P.implementation.createHTMLDocument("").body;return h.innerHTML="<form></form><form></form>",h.childNodes.length===2}(),d.parseHTML=function(h,m,b){if(typeof h!="string")return[];typeof m=="boolean"&&(b=m,m=!1);var S,R,O;return m||(w.createHTMLDocument?(m=P.implementation.createHTMLDocument(""),S=m.createElement("base"),S.href=P.location.href,m.head.appendChild(S)):m=P),R=Ae.exec(h),O=!b&&[],R?[m.createElement(R[1])]:(R=vf([h],m,O),O&&O.length&&d(O).remove(),d.merge([],R.childNodes))},d.fn.load=function(h,m,b){var S,R,O,N=this,J=h.indexOf(" ");return J>-1&&(S=wi(h.slice(J)),h=h.slice(0,J)),x(m)?(b=m,m=void 0):m&&typeof m=="object"&&(R="POST"),N.length>0&&d.ajax({url:h,type:R||"GET",dataType:"html",data:m}).done(function(j){O=arguments,N.html(S?d("<div>").append(d.parseHTML(j)).find(S):j)}).always(b&&function(j,ut){N.each(function(){b.apply(this,O||[j.responseText,ut,j])})}),this},d.expr.pseudos.animated=function(h){return d.grep(d.timers,function(m){return h===m.elem}).length},d.offset={setOffset:function(h,m,b){var S,R,O,N,J,j,ut,bt=d.css(h,"position"),At=d(h),mt={};bt==="static"&&(h.style.position="relative"),J=At.offset(),O=d.css(h,"top"),j=d.css(h,"left"),ut=(bt==="absolute"||bt==="fixed")&&(O+j).indexOf("auto")>-1,ut?(S=At.position(),N=S.top,R=S.left):(N=parseFloat(O)||0,R=parseFloat(j)||0),x(m)&&(m=m.call(h,b,d.extend({},J))),m.top!=null&&(mt.top=m.top-J.top+N),m.left!=null&&(mt.left=m.left-J.left+R),"using"in m?m.using.call(h,mt):At.css(mt)}},d.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(R){d.offset.setOffset(this,h,R)});var m,b,S=this[0];if(S)return S.getClientRects().length?(m=S.getBoundingClientRect(),b=S.ownerDocument.defaultView,{top:m.top+b.pageYOffset,left:m.left+b.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var h,m,b,S=this[0],R={top:0,left:0};if(d.css(S,"position")==="fixed")m=S.getBoundingClientRect();else{for(m=this.offset(),b=S.ownerDocument,h=S.offsetParent||b.documentElement;h&&(h===b.body||h===b.documentElement)&&d.css(h,"position")==="static";)h=h.parentNode;h&&h!==S&&h.nodeType===1&&(R=d(h).offset(),R.top+=d.css(h,"borderTopWidth",!0),R.left+=d.css(h,"borderLeftWidth",!0))}return{top:m.top-R.top-d.css(S,"marginTop",!0),left:m.left-R.left-d.css(S,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&d.css(h,"position")==="static";)h=h.offsetParent;return h||Xe})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,m){var b=m==="pageYOffset";d.fn[h]=function(S){return vt(this,function(R,O,N){var J;if(T(R)?J=R:R.nodeType===9&&(J=R.defaultView),N===void 0)return J?J[m]:R[O];J?J.scrollTo(b?J.pageXOffset:N,b?N:J.pageYOffset):R[O]=N},h,S,arguments.length)}}),d.each(["top","left"],function(h,m){d.cssHooks[m]=ra(w.pixelPosition,function(b,S){if(S)return S=na(b,m),su.test(S)?d(b).position()[m]+"px":S})}),d.each({Height:"height",Width:"width"},function(h,m){d.each({padding:"inner"+h,content:m,"":"outer"+h},function(b,S){d.fn[S]=function(R,O){var N=arguments.length&&(b||typeof R!="boolean"),J=b||(R===!0||O===!0?"margin":"border");return vt(this,function(j,ut,bt){var At;return T(j)?S.indexOf("outer")===0?j["inner"+h]:j.document.documentElement["client"+h]:j.nodeType===9?(At=j.documentElement,Math.max(j.body["scroll"+h],At["scroll"+h],j.body["offset"+h],At["offset"+h],At["client"+h])):bt===void 0?d.css(j,ut,J):d.style(j,ut,bt,J)},m,N?R:void 0,N)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,m){d.fn[m]=function(b){return this.on(m,b)}}),d.fn.extend({bind:function(h,m,b){return this.on(h,null,m,b)},unbind:function(h,m){return this.off(h,null,m)},delegate:function(h,m,b,S){return this.on(m,h,b,S)},undelegate:function(h,m,b){return arguments.length===1?this.off(h,"**"):this.off(m,h||"**",b)},hover:function(h,m){return this.on("mouseenter",h).on("mouseleave",m||h)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,m){d.fn[m]=function(b,S){return arguments.length>0?this.on(m,null,b,S):this.trigger(m)}});var Ff=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(h,m){var b,S,R;if(typeof m=="string"&&(b=h[m],m=h,h=b),!!x(h))return S=s.call(arguments,2),R=function(){return h.apply(m||this,S.concat(s.call(arguments)))},R.guid=h.guid=h.guid||d.guid++,R},d.holdReady=function(h){h?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=L,d.isFunction=x,d.isWindow=T,d.camelCase=ne,d.type=B,d.now=Date.now,d.isNumeric=function(h){var m=d.type(h);return(m==="number"||m==="string")&&!isNaN(h-parseFloat(h))},d.trim=function(h){return h==null?"":(h+"").replace(Ff,"$1")};var wu=e.jQuery,ir=e.$;return d.noConflict=function(h){return e.$===d&&(e.$=ir),h&&e.jQuery===d&&(e.jQuery=wu),d},typeof n>"u"&&(e.jQuery=e.$=d),d})}(dc)),dc.exports}var o1;function kk(){return o1||(o1=1,function(t){(function(e){var n=typeof self=="object"&&self.self===self&&self||typeof Sr=="object"&&Sr.global===Sr&&Sr;{var r=Rk,i;try{i=a1()}catch{}e(n,t,r,i)}})(function(e,n,r,i){var s=e.Backbone,a=Array.prototype.slice;n.VERSION="1.4.1",n.$=i,n.noConflict=function(){return e.Backbone=s,this},n.emulateHTTP=!1,n.emulateJSON=!1;var u=n.Events={},c=/\s+/,l,g=function(C,D,U,$,vt){var _t=0,Nt;if(U&&typeof U=="object")for($!==void 0&&("context"in vt)&&vt.context===void 0&&(vt.context=$),Nt=r.keys(U);_t<Nt.length;_t++)D=g(C,D,Nt[_t],U[Nt[_t]],vt);else if(U&&c.test(U))for(Nt=U.split(c);_t<Nt.length;_t++)D=C(D,Nt[_t],$,vt);else D=C(D,U,$,vt);return D};u.on=function(C,D,U){if(this._events=g(p,this._events||{},C,D,{context:U,ctx:this,listening:l}),l){var $=this._listeners||(this._listeners={});$[l.id]=l,l.interop=!1}return this},u.listenTo=function(C,D,U){if(!C)return this;var $=C._listenId||(C._listenId=r.uniqueId("l")),vt=this._listeningTo||(this._listeningTo={}),_t=l=vt[$];_t||(this._listenId||(this._listenId=r.uniqueId("l")),_t=l=vt[$]=new P(this,C));var Nt=y(C,D,U,this);if(l=void 0,Nt)throw Nt;return _t.interop&&_t.on(D,U),this};var p=function(C,D,U,$){if(U){var vt=C[D]||(C[D]=[]),_t=$.context,Nt=$.ctx,Yt=$.listening;Yt&&Yt.count++,vt.push({callback:U,context:_t,ctx:_t||Nt,listening:Yt})}return C},y=function(C,D,U,$){try{C.on(D,U,$)}catch(vt){return vt}};u.off=function(C,D,U){return this._events?(this._events=g(_,this._events,C,D,{context:U,listeners:this._listeners}),this):this},u.stopListening=function(C,D,U){var $=this._listeningTo;if(!$)return this;for(var vt=C?[C._listenId]:r.keys($),_t=0;_t<vt.length;_t++){var Nt=$[vt[_t]];if(!Nt)break;Nt.obj.off(D,U,this),Nt.interop&&Nt.off(D,U)}return r.isEmpty($)&&(this._listeningTo=void 0),this};var _=function(C,D,U,$){if(C){var vt=$.context,_t=$.listeners,Nt=0,Yt;if(!D&&!vt&&!U){for(Yt=r.keys(_t);Nt<Yt.length;Nt++)_t[Yt[Nt]].cleanup();return}for(Yt=D?[D]:r.keys(C);Nt<Yt.length;Nt++){D=Yt[Nt];var ne=C[D];if(!ne)break;for(var he=[],ke=0;ke<ne.length;ke++){var Mt=ne[ke];if(U&&U!==Mt.callback&&U!==Mt.callback._callback||vt&&vt!==Mt.context)he.push(Mt);else{var oe=Mt.listening;oe&&oe.off(D,U)}}he.length?C[D]=he:delete C[D]}return C}};u.once=function(C,D,U){var $=g(w,{},C,D,this.off.bind(this));return typeof C=="string"&&U==null&&(D=void 0),this.on($,D,U)},u.listenToOnce=function(C,D,U){var $=g(w,{},D,U,this.stopListening.bind(this,C));return this.listenTo(C,$)};var w=function(C,D,U,$){if(U){var vt=C[D]=r.once(function(){$(D,vt),U.apply(this,arguments)});vt._callback=U}return C};u.trigger=function(C){if(!this._events)return this;for(var D=Math.max(0,arguments.length-1),U=Array(D),$=0;$<D;$++)U[$]=arguments[$+1];return g(x,this._events,C,void 0,U),this};var x=function(C,D,U,$){if(C){var vt=C[D],_t=C.all;vt&&_t&&(_t=_t.slice()),vt&&T(vt,$),_t&&T(_t,[D].concat($))}return C},T=function(C,D){var U,$=-1,vt=C.length,_t=D[0],Nt=D[1],Yt=D[2];switch(D.length){case 0:for(;++$<vt;)(U=C[$]).callback.call(U.ctx);return;case 1:for(;++$<vt;)(U=C[$]).callback.call(U.ctx,_t);return;case 2:for(;++$<vt;)(U=C[$]).callback.call(U.ctx,_t,Nt);return;case 3:for(;++$<vt;)(U=C[$]).callback.call(U.ctx,_t,Nt,Yt);return;default:for(;++$<vt;)(U=C[$]).callback.apply(U.ctx,D);return}},P=function(C,D){this.id=C._listenId,this.listener=C,this.obj=D,this.interop=!0,this.count=0,this._events=void 0};P.prototype.on=u.on,P.prototype.off=function(C,D){var U;this.interop?(this._events=g(_,this._events,C,D,{context:void 0,listeners:void 0}),U=!this._events):(this.count--,U=this.count===0),U&&this.cleanup()},P.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},u.bind=u.on,u.unbind=u.off,r.extend(n,u);var k=n.Model=function(C,D){var U=C||{};D||(D={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},D.collection&&(this.collection=D.collection),D.parse&&(U=this.parse(U,D)||{});var $=r.result(this,"defaults");U=r.defaults(r.extend({},$,U),$),this.set(U,D),this.changed={},this.initialize.apply(this,arguments)};r.extend(k.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(C){return r.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(C){return this.attributes[C]},escape:function(C){return r.escape(this.get(C))},has:function(C){return this.get(C)!=null},matches:function(C){return!!r.iteratee(C,this)(this.attributes)},set:function(C,D,U){if(C==null)return this;var $;if(typeof C=="object"?($=C,U=D):($={})[C]=D,U||(U={}),!this._validate($,U))return!1;var vt=U.unset,_t=U.silent,Nt=[],Yt=this._changing;this._changing=!0,Yt||(this._previousAttributes=r.clone(this.attributes),this.changed={});var ne=this.attributes,he=this.changed,ke=this._previousAttributes;for(var Mt in $)D=$[Mt],r.isEqual(ne[Mt],D)||Nt.push(Mt),r.isEqual(ke[Mt],D)?delete he[Mt]:he[Mt]=D,vt?delete ne[Mt]:ne[Mt]=D;if(this.idAttribute in $){var oe=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,oe,U)}if(!_t){Nt.length&&(this._pending=U);for(var ve=0;ve<Nt.length;ve++)this.trigger("change:"+Nt[ve],this,ne[Nt[ve]],U)}if(Yt)return this;if(!_t)for(;this._pending;)U=this._pending,this._pending=!1,this.trigger("change",this,U);return this._pending=!1,this._changing=!1,this},unset:function(C,D){return this.set(C,void 0,r.extend({},D,{unset:!0}))},clear:function(C){var D={};for(var U in this.attributes)D[U]=void 0;return this.set(D,r.extend({},C,{unset:!0}))},hasChanged:function(C){return C==null?!r.isEmpty(this.changed):r.has(this.changed,C)},changedAttributes:function(C){if(!C)return this.hasChanged()?r.clone(this.changed):!1;var D=this._changing?this._previousAttributes:this.attributes,U={},$;for(var vt in C){var _t=C[vt];r.isEqual(D[vt],_t)||(U[vt]=_t,$=!0)}return $?U:!1},previous:function(C){return C==null||!this._previousAttributes?null:this._previousAttributes[C]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(C){C=r.extend({parse:!0},C);var D=this,U=C.success;return C.success=function($){var vt=C.parse?D.parse($,C):$;if(!D.set(vt,C))return!1;U&&U.call(C.context,D,$,C),D.trigger("sync",D,$,C)},Wt(this,C),this.sync("read",this,C)},save:function(C,D,U){var $;C==null||typeof C=="object"?($=C,U=D):($={})[C]=D,U=r.extend({validate:!0,parse:!0},U);var vt=U.wait;if($&&!vt){if(!this.set($,U))return!1}else if(!this._validate($,U))return!1;var _t=this,Nt=U.success,Yt=this.attributes;U.success=function(ke){_t.attributes=Yt;var Mt=U.parse?_t.parse(ke,U):ke;if(vt&&(Mt=r.extend({},$,Mt)),Mt&&!_t.set(Mt,U))return!1;Nt&&Nt.call(U.context,_t,ke,U),_t.trigger("sync",_t,ke,U)},Wt(this,U),$&&vt&&(this.attributes=r.extend({},Yt,$));var ne=this.isNew()?"create":U.patch?"patch":"update";ne==="patch"&&!U.attrs&&(U.attrs=$);var he=this.sync(ne,this,U);return this.attributes=Yt,he},destroy:function(C){C=C?r.clone(C):{};var D=this,U=C.success,$=C.wait,vt=function(){D.stopListening(),D.trigger("destroy",D,D.collection,C)};C.success=function(Nt){$&&vt(),U&&U.call(C.context,D,Nt,C),D.isNew()||D.trigger("sync",D,Nt,C)};var _t=!1;return this.isNew()?r.defer(C.success):(Wt(this,C),_t=this.sync("delete",this,C)),$||vt(),_t},url:function(){var C=r.result(this,"urlRoot")||r.result(this.collection,"url")||fe();if(this.isNew())return C;var D=this.get(this.idAttribute);return C.replace(/[^\/]$/,"$&/")+encodeURIComponent(D)},parse:function(C,D){return C},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(C){return this._validate({},r.extend({},C,{validate:!0}))},_validate:function(C,D){if(!D.validate||!this.validate)return!0;C=r.extend({},this.attributes,C);var U=this.validationError=this.validate(C,D)||null;return U?(this.trigger("invalid",this,U,r.extend(D,{validationError:U})),!1):!0}});var q=n.Collection=function(C,D){D||(D={}),this.preinitialize.apply(this,arguments),D.model&&(this.model=D.model),D.comparator!==void 0&&(this.comparator=D.comparator),this._reset(),this.initialize.apply(this,arguments),C&&this.reset(C,r.extend({silent:!0},D))},B={add:!0,remove:!0,merge:!0},H={add:!0,remove:!1},X=function(C,D,U){U=Math.min(Math.max(U,0),C.length);var $=Array(C.length-U),vt=D.length,_t;for(_t=0;_t<$.length;_t++)$[_t]=C[_t+U];for(_t=0;_t<vt;_t++)C[_t+U]=D[_t];for(_t=0;_t<$.length;_t++)C[_t+vt+U]=$[_t]};r.extend(q.prototype,u,{model:k,preinitialize:function(){},initialize:function(){},toJSON:function(C){return this.map(function(D){return D.toJSON(C)})},sync:function(){return n.sync.apply(this,arguments)},add:function(C,D){return this.set(C,r.extend({merge:!1},D,H))},remove:function(C,D){D=r.extend({},D);var U=!r.isArray(C);C=U?[C]:C.slice();var $=this._removeModels(C,D);return!D.silent&&$.length&&(D.changes={added:[],merged:[],removed:$},this.trigger("update",this,D)),U?$[0]:$},set:function(C,D){if(C!=null){D=r.extend({},B,D),D.parse&&!this._isModel(C)&&(C=this.parse(C,D)||[]);var U=!r.isArray(C);C=U?[C]:C.slice();var $=D.at;$!=null&&($=+$),$>this.length&&($=this.length),$<0&&($+=this.length+1);var vt=[],_t=[],Nt=[],Yt=[],ne={},he=D.add,ke=D.merge,Mt=D.remove,oe=!1,ve=this.comparator&&$==null&&D.sort!==!1,sn=r.isString(this.comparator)?this.comparator:null,qe,He;for(He=0;He<C.length;He++){qe=C[He];var an=this.get(qe);if(an){if(ke&&qe!==an){var wn=this._isModel(qe)?qe.attributes:qe;D.parse&&(wn=an.parse(wn,D)),an.set(wn,D),Nt.push(an),ve&&!oe&&(oe=an.hasChanged(sn))}ne[an.cid]||(ne[an.cid]=!0,vt.push(an)),C[He]=an}else he&&(qe=C[He]=this._prepareModel(qe,D),qe&&(_t.push(qe),this._addReference(qe,D),ne[qe.cid]=!0,vt.push(qe)))}if(Mt){for(He=0;He<this.length;He++)qe=this.models[He],ne[qe.cid]||Yt.push(qe);Yt.length&&this._removeModels(Yt,D)}var $e=!1,Xe=!ve&&he&&Mt;if(vt.length&&Xe?($e=this.length!==vt.length||r.some(this.models,function(rr,yi){return rr!==vt[yi]}),this.models.length=0,X(this.models,vt,0),this.length=this.models.length):_t.length&&(ve&&(oe=!0),X(this.models,_t,$??this.length),this.length=this.models.length),oe&&this.sort({silent:!0}),!D.silent){for(He=0;He<_t.length;He++)$!=null&&(D.index=$+He),qe=_t[He],qe.trigger("add",qe,this,D);(oe||$e)&&this.trigger("sort",this,D),(_t.length||Yt.length||Nt.length)&&(D.changes={added:_t,removed:Yt,merged:Nt},this.trigger("update",this,D))}return U?C[0]:C}},reset:function(C,D){D=D?r.clone(D):{};for(var U=0;U<this.models.length;U++)this._removeReference(this.models[U],D);return D.previousModels=this.models,this._reset(),C=this.add(C,r.extend({silent:!0},D)),D.silent||this.trigger("reset",this,D),C},push:function(C,D){return this.add(C,r.extend({at:this.length},D))},pop:function(C){var D=this.at(this.length-1);return this.remove(D,C)},unshift:function(C,D){return this.add(C,r.extend({at:0},D))},shift:function(C){var D=this.at(0);return this.remove(D,C)},slice:function(){return a.apply(this.models,arguments)},get:function(C){if(C!=null)return this._byId[C]||this._byId[this.modelId(this._isModel(C)?C.attributes:C,C.idAttribute)]||C.cid&&this._byId[C.cid]},has:function(C){return this.get(C)!=null},at:function(C){return C<0&&(C+=this.length),this.models[C]},where:function(C,D){return this[D?"find":"filter"](C)},findWhere:function(C){return this.where(C,!0)},sort:function(C){var D=this.comparator;if(!D)throw new Error("Cannot sort a set without a comparator");C||(C={});var U=D.length;return r.isFunction(D)&&(D=D.bind(this)),U===1||r.isString(D)?this.models=this.sortBy(D):this.models.sort(D),C.silent||this.trigger("sort",this,C),this},pluck:function(C){return this.map(C+"")},fetch:function(C){C=r.extend({parse:!0},C);var D=C.success,U=this;return C.success=function($){var vt=C.reset?"reset":"set";U[vt]($,C),D&&D.call(C.context,U,$,C),U.trigger("sync",U,$,C)},Wt(this,C),this.sync("read",this,C)},create:function(C,D){D=D?r.clone(D):{};var U=D.wait;if(C=this._prepareModel(C,D),!C)return!1;U||this.add(C,D);var $=this,vt=D.success;return D.success=function(_t,Nt,Yt){U&&$.add(_t,Yt),vt&&vt.call(Yt.context,_t,Nt,Yt)},C.save(null,D),C},parse:function(C,D){return C},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(C,D){return C[D||this.model.prototype.idAttribute||"id"]},values:function(){return new E(this,L)},keys:function(){return new E(this,I)},entries:function(){return new E(this,G)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(C,D){if(this._isModel(C))return C.collection||(C.collection=this),C;D=D?r.clone(D):{},D.collection=this;var U;return this.model.prototype?U=new this.model(C,D):U=this.model(C,D),U.validationError?(this.trigger("invalid",this,U.validationError,D),!1):U},_removeModels:function(C,D){for(var U=[],$=0;$<C.length;$++){var vt=this.get(C[$]);if(vt){var _t=this.indexOf(vt);this.models.splice(_t,1),this.length--,delete this._byId[vt.cid];var Nt=this.modelId(vt.attributes,vt.idAttribute);Nt!=null&&delete this._byId[Nt],D.silent||(D.index=_t,vt.trigger("remove",vt,this,D)),U.push(vt),this._removeReference(vt,D)}}return U},_isModel:function(C){return C instanceof k},_addReference:function(C,D){this._byId[C.cid]=C;var U=this.modelId(C.attributes,C.idAttribute);U!=null&&(this._byId[U]=C),C.on("all",this._onModelEvent,this)},_removeReference:function(C,D){delete this._byId[C.cid];var U=this.modelId(C.attributes,C.idAttribute);U!=null&&delete this._byId[U],this===C.collection&&delete C.collection,C.off("all",this._onModelEvent,this)},_onModelEvent:function(C,D,U,$){if(D){if((C==="add"||C==="remove")&&U!==this)return;if(C==="destroy"&&this.remove(D,$),C==="changeId"){var vt=this.modelId(D.previousAttributes(),D.idAttribute),_t=this.modelId(D.attributes,D.idAttribute);vt!=null&&delete this._byId[vt],_t!=null&&(this._byId[_t]=D)}}this.trigger.apply(this,arguments)}});var d=typeof Symbol=="function"&&Symbol.iterator;d&&(q.prototype[d]=q.prototype.values);var E=function(C,D){this._collection=C,this._kind=D,this._index=0},L=1,I=2,G=3;d&&(E.prototype[d]=function(){return this}),E.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var C=this._collection.at(this._index);this._index++;var D;if(this._kind===L)D=C;else{var U=this._collection.modelId(C.attributes,C.idAttribute);this._kind===I?D=U:D=[U,C]}return{value:D,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var K=n.View=function(C){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(C,pt)),this._ensureElement(),this.initialize.apply(this,arguments)},Y=/^(\S+)\s*(.*)$/,pt=["model","collection","el","id","attributes","className","tagName","events"];r.extend(K.prototype,u,{tagName:"div",$:function(C){return this.$el.find(C)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(C){return this.undelegateEvents(),this._setElement(C),this.delegateEvents(),this},_setElement:function(C){this.$el=C instanceof n.$?C:n.$(C),this.el=this.$el[0]},delegateEvents:function(C){if(C||(C=r.result(this,"events")),!C)return this;this.undelegateEvents();for(var D in C){var U=C[D];if(r.isFunction(U)||(U=this[U]),!!U){var $=D.match(Y);this.delegate($[1],$[2],U.bind(this))}}return this},delegate:function(C,D,U){return this.$el.on(C+".delegateEvents"+this.cid,D,U),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(C,D,U){return this.$el.off(C+".delegateEvents"+this.cid,D,U),this},_createElement:function(C){return document.createElement(C)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var C=r.extend({},r.result(this,"attributes"));this.id&&(C.id=r.result(this,"id")),this.className&&(C.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(C)}},_setAttributes:function(C){this.$el.attr(C)}});var Tt=function(C,D,U,$){switch(D){case 1:return function(){return C[U](this[$])};case 2:return function(vt){return C[U](this[$],vt)};case 3:return function(vt,_t){return C[U](this[$],ft(vt,this),_t)};case 4:return function(vt,_t,Nt){return C[U](this[$],ft(vt,this),_t,Nt)};default:return function(){var vt=a.call(arguments);return vt.unshift(this[$]),C[U].apply(C,vt)}}},at=function(C,D,U,$){r.each(U,function(vt,_t){D[_t]&&(C.prototype[_t]=Tt(D,vt,_t,$))})},ft=function(C,D){return r.isFunction(C)?C:r.isObject(C)&&!D._isModel(C)?lt(C):r.isString(C)?function(U){return U.get(C)}:C},lt=function(C){var D=r.matches(C);return function(U){return D(U.attributes)}},dt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Xt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[q,dt,"models"],[k,Xt,"attributes"]],function(C){var D=C[0],U=C[1],$=C[2];D.mixin=function(vt){var _t=r.reduce(r.functions(vt),function(Nt,Yt){return Nt[Yt]=0,Nt},{});at(D,vt,_t,$)},at(D,r,U,$)}),n.sync=function(C,D,U){var $=Ft[C];r.defaults(U||(U={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var vt={type:$,dataType:"json"};if(U.url||(vt.url=r.result(D,"url")||fe()),U.data==null&&D&&(C==="create"||C==="update"||C==="patch")&&(vt.contentType="application/json",vt.data=JSON.stringify(U.attrs||D.toJSON(U))),U.emulateJSON&&(vt.contentType="application/x-www-form-urlencoded",vt.data=vt.data?{model:vt.data}:{}),U.emulateHTTP&&($==="PUT"||$==="DELETE"||$==="PATCH")){vt.type="POST",U.emulateJSON&&(vt.data._method=$);var _t=U.beforeSend;U.beforeSend=function(ne){if(ne.setRequestHeader("X-HTTP-Method-Override",$),_t)return _t.apply(this,arguments)}}vt.type!=="GET"&&!U.emulateJSON&&(vt.processData=!1);var Nt=U.error;U.error=function(ne,he,ke){U.textStatus=he,U.errorThrown=ke,Nt&&Nt.call(U.context,ne,he,ke)};var Yt=U.xhr=n.ajax(r.extend(vt,U));return D.trigger("request",D,Yt,U),Yt};var Ft={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var Ae=n.Router=function(C){C||(C={}),this.preinitialize.apply(this,arguments),C.routes&&(this.routes=C.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ee=/\((.*?)\)/g,ot=/(\(\?)?:\w+/g,ht=/\*\w+/g,tt=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(Ae.prototype,u,{preinitialize:function(){},initialize:function(){},route:function(C,D,U){r.isRegExp(C)||(C=this._routeToRegExp(C)),r.isFunction(D)&&(U=D,D=""),U||(U=this[D]);var $=this;return n.history.route(C,function(vt){var _t=$._extractParameters(C,vt);$.execute(U,_t,D)!==!1&&($.trigger.apply($,["route:"+D].concat(_t)),$.trigger("route",D,_t),n.history.trigger("route",$,D,_t))}),this},execute:function(C,D,U){C&&C.apply(this,D)},navigate:function(C,D){return n.history.navigate(C,D),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var C,D=r.keys(this.routes);(C=D.pop())!=null;)this.route(C,this.routes[C])}},_routeToRegExp:function(C){return C=C.replace(tt,"\\$&").replace(Ee,"(?:$1)?").replace(ot,function(D,U){return U?D:"([^/?]+)"}).replace(ht,"([^?]*?)"),new RegExp("^"+C+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(C,D){var U=C.exec(D).slice(1);return r.map(U,function($,vt){return vt===U.length-1?$||null:$?decodeURIComponent($):null})}});var it=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},wt=/^[#\/]|\s+$/g,Ht=/^\/+|\/+$/g,Gt=/#.*$/;it.started=!1,r.extend(it.prototype,u,{interval:50,atRoot:function(){var C=this.location.pathname.replace(/[^\/]$/,"$&/");return C===this.root&&!this.getSearch()},matchRoot:function(){var C=this.decodeFragment(this.location.pathname),D=C.slice(0,this.root.length-1)+"/";return D===this.root},decodeFragment:function(C){return decodeURI(C.replace(/%25/g,"%2525"))},getSearch:function(){var C=this.location.href.replace(/#.*/,"").match(/\?.+/);return C?C[0]:""},getHash:function(C){var D=(C||this).location.href.match(/#(.*)$/);return D?D[1]:""},getPath:function(){var C=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return C.charAt(0)==="/"?C.slice(1):C},getFragment:function(C){return C==null&&(this._usePushState||!this._wantsHashChange?C=this.getPath():C=this.getHash()),C.replace(wt,"")},start:function(C){if(it.started)throw new Error("Backbone.history has already been started");if(it.started=!0,this.options=r.extend({root:"/"},this.options,C),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ht,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var D=this.root.slice(0,-1)||"/";return this.location.replace(D+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var U=document.body,$=U.insertBefore(this.iframe,U.firstChild).contentWindow;$.document.open(),$.document.close(),$.location.hash="#"+this.fragment}var vt=window.addEventListener||function(_t,Nt){return attachEvent("on"+_t,Nt)};if(this._usePushState?vt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?vt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var C=window.removeEventListener||function(D,U){return detachEvent("on"+D,U)};this._usePushState?C("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&C("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),it.started=!1},route:function(C,D){this.handlers.unshift({route:C,callback:D})},checkUrl:function(C){var D=this.getFragment();if(D===this.fragment&&this.iframe&&(D=this.getHash(this.iframe.contentWindow)),D===this.fragment)return!1;this.iframe&&this.navigate(D),this.loadUrl()},loadUrl:function(C){return this.matchRoot()?(C=this.fragment=this.getFragment(C),r.some(this.handlers,function(D){if(D.route.test(C))return D.callback(C),!0})):!1},navigate:function(C,D){if(!it.started)return!1;(!D||D===!0)&&(D={trigger:!!D}),C=this.getFragment(C||"");var U=this.root;(C===""||C.charAt(0)==="?")&&(U=U.slice(0,-1)||"/");var $=U+C;C=C.replace(Gt,"");var vt=this.decodeFragment(C);if(this.fragment!==vt){if(this.fragment=vt,this._usePushState)this.history[D.replace?"replaceState":"pushState"]({},document.title,$);else if(this._wantsHashChange){if(this._updateHash(this.location,C,D.replace),this.iframe&&C!==this.getHash(this.iframe.contentWindow)){var _t=this.iframe.contentWindow;D.replace||(_t.document.open(),_t.document.close()),this._updateHash(_t.location,C,D.replace)}}else return this.location.assign($);if(D.trigger)return this.loadUrl(C)}},_updateHash:function(C,D,U){if(U){var $=C.href.replace(/(javascript:|#).*$/,"");C.replace($+"#"+D)}else C.hash="#"+D}}),n.history=new it;var zt=function(C,D){var U=this,$;return C&&r.has(C,"constructor")?$=C.constructor:$=function(){return U.apply(this,arguments)},r.extend($,U,D),$.prototype=r.create(U.prototype,C),$.prototype.constructor=$,$.__super__=U.prototype,$};k.extend=q.extend=Ae.extend=K.extend=it.extend=zt;var fe=function(){throw new Error('A "url" property or function must be specified')},Wt=function(C,D){var U=D.error;D.error=function($){U&&U.call(D.context,C,$,D),C.trigger("error",C,$,D)}};return n})}(Fl)),Fl}var Mk=kk(),Rn=ma(Mk),Ik=a1(),se=ma(Ik);const xt=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",r=Math,i=r.PI,s=r.atan2,a=r.sqrt,u=r.min,c=r.max,l=r.cos,g=r.sin,p=function(d,E,L){if(!(this instanceof p))return p.apply(Object.create(p.prototype),arguments);if(d){if(p.isV(d)&&(d=d.node),E=E||{},p.isString(d)){if(d=d.trim(),d.toLowerCase()==="svg")d=p.createSvgDocument();else if(d[0]==="<"){var I=p.createSvgDocument(d);if(I.childNodes.length>1){var G=[],K,Y;for(K=0,Y=I.childNodes.length;K<Y;K++){var pt=I.childNodes[K];G.push(new p(document.importNode(pt,!0)))}return G}d=document.importNode(I.firstChild,!0)}else d=document.createElementNS(e.svg,d);p.ensureId(d)}return this.node=d,this.setAttributes(E),L&&this.append(L),this}},y=p.prototype;Object.defineProperty(y,"id",{enumerable:!0,get:function(){return this.node.id},set:function(d){this.node.id=d}}),y.getTransformToElement=function(d){var E=this.node;if(p.isSVGGraphicsElement(d)&&p.isSVGGraphicsElement(E)){var L=p.toNode(d).getScreenCTM(),I=E.getScreenCTM();if(L&&I)return L.inverse().multiply(I)}return p.createSVGMatrix()},y.transform=function(d,E){var L=this.node;if(p.isUndefined(d))return p.transformStringToMatrix(this.attr("transform"));if(E&&E.absolute)return this.attr("transform",p.matrixToTransformString(d));var I=p.createSVGTransform(d);return L.transform.baseVal.appendItem(I),this},y.translate=function(d,E,L){L=L||{},E=E||0;var I=this.attr("transform")||"",G=p.parseTransformString(I);if(I=G.value,p.isUndefined(d))return G.translate;I=I.replace(/translate\([^)]*\)/g,"").trim();var K=L.absolute?d:G.translate.tx+d,Y=L.absolute?E:G.translate.ty+E,pt="translate("+K+","+Y+")";return this.attr("transform",(pt+" "+I).trim()),this},y.rotate=function(d,E,L,I){I=I||{};var G=this.attr("transform")||"",K=p.parseTransformString(G);if(G=K.value,p.isUndefined(d))return K.rotate;G=G.replace(/rotate\([^)]*\)/g,"").trim(),d%=360;var Y=I.absolute?d:K.rotate.angle+d,pt=E!==void 0&&L!==void 0?","+E+","+L:"",Tt="rotate("+Y+pt+")";return this.attr("transform",(G+" "+Tt).trim()),this},y.scale=function(d,E){E=p.isUndefined(E)?d:E;var L=this.attr("transform")||"",I=p.parseTransformString(L);if(L=I.value,p.isUndefined(d))return I.scale;L=L.replace(/scale\([^)]*\)/g,"").trim();var G="scale("+d+","+E+")";return this.attr("transform",(L+" "+G).trim()),this},y.bbox=function(d,E){var L,I=this.node,G=I.ownerSVGElement;if(!G)return new It(0,0,0,0);try{L=I.getBBox()}catch{L={x:I.clientLeft,y:I.clientTop,width:I.clientWidth,height:I.clientHeight}}if(d)return new It(L);var K=this.getTransformToElement(E||G);return p.transformRect(L,K)},y.getBBox=function(d){var E={},L,I=this.node,G=I.ownerSVGElement;if(!G||!p.isSVGGraphicsElement(I))return new It(0,0,0,0);if(d&&(d.target&&(E.target=p.toNode(d.target)),d.recursive&&(E.recursive=d.recursive)),E.recursive){var Y=this.children(),pt=Y.length;if(pt===0)return this.getBBox({target:E.target,recursive:!1});E.target||(E.target=this);for(var Tt=0;Tt<pt;Tt++){var at=Y[Tt],ft;at.children().length===0?ft=at.getBBox({target:E.target,recursive:!1}):ft=at.getBBox({target:E.target,recursive:!0}),L?L=L.union(ft):L=ft}return L}else{try{L=I.getBBox()}catch{L={x:I.clientLeft,y:I.clientTop,width:I.clientWidth,height:I.clientHeight}}if(E.target){var K=this.getTransformToElement(E.target);return p.transformRect(L,K)}else return new It(L)}};function _(d,E){d||(d={});var L=p("textPath"),I=d.d;if(I&&d["xlink:href"]===void 0){var G=p("path").attr("d",I).appendTo(E.defs());L.attr("xlink:href","#"+G.id)}return p.isObject(d)&&L.attr(d),L.node}function w(d,E,L){L||(L={});for(var I=L.includeAnnotationIndices,G=L.eol,K=L.lineHeight,Y=L.baseSize,pt=0,Tt={},at=E.length-1,ft=0;ft<=at;ft++){var lt=E[ft],dt=null;if(p.isObject(lt)){var Xt=lt.attrs,Ft=p("tspan",Xt),Ae=Ft.node,Ee=lt.t;G&&ft===at&&(Ee+=G),Ae.textContent=Ee;var ot=Xt.class;ot&&Ft.addClass(ot),I&&Ft.attr("annotations",lt.annotations),dt=parseFloat(Xt["font-size"]),isFinite(dt)||(dt=Y),dt&&dt>pt&&(pt=dt)}else G&&ft===at&&(lt+=G),Ae=document.createTextNode(lt||" "),Y&&Y>pt&&(pt=Y);d.appendChild(Ae)}return pt&&(Tt.maxFontSize=pt),K?Tt.lineHeight=K:pt&&(Tt.lineHeight=pt*1.2),Tt}var x=/em$/;function T(d,E){var L=parseFloat(d);return x.test(d)?L*E:L}function P(d,E,L,I){if(!Array.isArray(E))return 0;var G=E.length;if(!G)return 0;for(var K=E[0],Y=T(K.maxFontSize,L)||L,pt=0,Tt=T(I,L),at=1;at<G;at++){K=E[at];var ft=T(K.lineHeight,L)||Tt;pt+=ft}var lt=T(K.maxFontSize,L)||L,dt;switch(d){case"middle":dt=Y/2-.15*lt-pt/2;break;case"bottom":dt=-(.25*lt)-pt;break;default:case"top":dt=.8*Y;break}return dt}y.text=function(d,E){if(d&&typeof d!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");d=p.sanitizeText(d),E||(E={});var L=E.displayEmpty,I=E.eol,G=E.textPath,K=E.textVerticalAnchor,Y=K==="middle"||K==="bottom"||K==="top",pt=E.x;pt===void 0&&(pt=this.attr("x")||0);var Tt=E.includeAnnotationIndices,at=E.annotations;at&&!p.isArray(at)&&(at=[at]);var ft=E.lineHeight,lt=ft==="auto",dt=lt?"1.5em":ft||"1em";this.empty(),this.attr({"xml:space":"preserve",display:d||L?null:"none"});var Xt=parseFloat(this.attr("font-size"));Xt||(Xt=16,(Y||at)&&this.attr("font-size",Xt));var Ft=document,Ae;G?(typeof G=="string"&&(G={d:G}),Ae=_(G,this)):Ae=Ft.createDocumentFragment();for(var Ee=0,ot=d.split(`
`),ht=[],tt,it=0,wt=ot.length-1;it<=wt;it++){var Ht=dt,Gt="v-line",zt=Ft.createElementNS(e.svg,"tspan"),fe=ot[it],Wt;if(fe)if(at){var C=p.annotateString(fe,at,{offset:-Ee,includeAnnotationIndices:Tt});Wt=w(zt,C,{includeAnnotationIndices:Tt,eol:it!==wt&&I,lineHeight:lt?null:dt,baseSize:Xt});var D=Wt.lineHeight;D&&lt&&it!==0&&(Ht=D),it===0&&(tt=Wt.maxFontSize*.8)}else I&&it!==wt&&(fe+=I),zt.textContent=fe;else{zt.textContent="-",Gt+=" v-empty-line";var U=zt.style;if(U.fillOpacity=0,U.strokeOpacity=0,at){Wt={},C=p.findAnnotationsAtIndex(at,Ee);let vt=Xt;for(let _t=C.length;_t>0;_t--){const Nt=C[_t-1].attrs;if(!Nt||!("font-size"in Nt))continue;const Yt=parseFloat(Nt["font-size"]);if(isFinite(Yt)){vt=Yt;break}}lt&&(it>0?Ht=vt*1.2:tt=vt*.8),zt.setAttribute("font-size",vt),Wt.maxFontSize=vt}}Wt&&ht.push(Wt),it>0&&zt.setAttribute("dy",Ht),(it>0||G)&&zt.setAttribute("x",pt),zt.className.baseVal=Gt,Ae.appendChild(zt),Ee+=fe.length+1}if(Y)if(at)Ht=P(K,ht,Xt,dt);else if(K==="top")Ht="0.8em";else{var $;switch(wt>0?($=parseFloat(dt)||1,$*=wt,x.test(dt)||($/=Xt)):$=0,K){case"middle":Ht=.3-$/2+"em";break;case"bottom":Ht=-$-.3+"em";break}}else K===0?Ht="0em":K?Ht=K:(Ht=0,this.attr("y")===null&&this.attr("y",tt||"0.8em"));return Ae.firstChild.setAttribute("dy",Ht),this.append(Ae),this},y.removeAttr=function(d){const E=H[d],{ns:L,local:I}=p.qualifyAttr(E),G=this.node;return L?G.hasAttributeNS(L,I)&&G.removeAttributeNS(L,I):G.hasAttribute(E)&&G.removeAttribute(E),this},y.attr=function(d,E){if(p.isUndefined(d)){for(var L=this.node.attributes,I={},G=0;G<L.length;G++)I[L[G].name]=L[G].value;return I}if(p.isString(d)&&p.isUndefined(E))return this.node.getAttribute(H[d]);if(typeof d=="object")for(var K in d)d.hasOwnProperty(K)&&this.setAttribute(K,d[K]);else this.setAttribute(d,E);return this},y.normalizePath=function(){var d=this.tagName();return d==="PATH"&&this.attr("d",p.normalizePathData(this.attr("d"))),this},y.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},y.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},y.setAttributes=function(d){for(var E in d)d.hasOwnProperty(E)&&this.setAttribute(E,d[E]);return this},y.append=function(d){p.isArray(d)||(d=[d]);for(var E=0,L=d.length;E<L;E++)this.node.appendChild(p.toNode(d[E]));return this},y.prepend=function(d){var E=this.node.firstChild;return E?p(E).before(d):this.append(d)},y.before=function(d){var E=this.node,L=E.parentNode;if(L){p.isArray(d)||(d=[d]);for(var I=0,G=d.length;I<G;I++)L.insertBefore(p.toNode(d[I]),E)}return this},y.appendTo=function(d){return p.toNode(d).appendChild(this.node),this},y.svg=function(){return this.node instanceof window.SVGSVGElement?this:p(this.node.ownerSVGElement)},y.tagName=function(){return this.node.tagName.toUpperCase()},y.defs=function(){var d=this.svg()||this,E=d.node.getElementsByTagName("defs")[0];return E?p(E):p("defs").appendTo(d)},y.clone=function(){var d=p(this.node.cloneNode(!0));return d.node.id=p.uniqueId(),d},y.findOne=function(d){var E=this.node.querySelector(d);return E?p(E):void 0},y.find=function(d){var E=[],L=this.node.querySelectorAll(d);if(L)for(var I=0;I<L.length;I++)E.push(p(L[I]));return E},y.children=function(){for(var d=this.node.childNodes,E=[],L=0;L<d.length;L++){var I=d[L];I.nodeType===1&&E.push(p(d[L]))}return E},y.parent=function(){return p(this.node.parentNode)||null},y.index=function(){for(var d=0,E=this.node.previousSibling;E;)E.nodeType===1&&d++,E=E.previousSibling;return d},y.findParentByClass=function(d,E){for(var L=this.node.ownerSVGElement,I=this.node.parentNode;I&&I!==E&&I!==L;){var G=p(I);if(G.hasClass(d))return G;I=I.parentNode}return null},y.contains=function(d){var E=this.node,L=p.toNode(d),I=L&&L.parentNode;return E===I||!!(I&&I.nodeType===1&&E.compareDocumentPosition(I)&16)},y.toLocalPoint=function(d,E){var L=this.svg().node,I=L.createSVGPoint();I.x=d,I.y=E;try{var G=I.matrixTransform(L.getScreenCTM().inverse()),K=this.getTransformToElement(L).inverse()}catch{return I}return G.matrixTransform(K)},y.translateCenterToPoint=function(d){var E=this.getBBox({target:this.svg()}),L=E.center();return this.translate(d.x-L.x,d.y-L.y),this},y.translateAndAutoOrient=function(d,E,L){d=new Q(d),E=new Q(E),L||(L=this.svg());var I=this.scale();this.attr("transform","");var G=this.getBBox({target:L}).scale(I.sx,I.sy),K=p.createSVGTransform();K.setTranslate(-G.x-G.width/2,-G.y-G.height/2);var Y=p.createSVGTransform(),pt=d.angleBetween(E,d.clone().offset(1,0));pt&&Y.setRotate(pt,0,0);var Tt=p.createSVGTransform(),at=d.clone().move(E,G.width/2);Tt.setTranslate(2*d.x-at.x,2*d.y-at.y);var ft=this.getTransformToElement(L),lt=p.createSVGTransform();return lt.setMatrix(Tt.matrix.multiply(Y.matrix.multiply(K.matrix.multiply(ft.scale(I.sx,I.sy))))),this.attr("transform",p.matrixToTransformString(lt.matrix)),this},y.animateAlongPath=function(d,E){E=p.toNode(E);var L=p.ensureId(E),I=p("animateMotion",d),G=p("mpath",{"xlink:href":"#"+L});I.append(G),this.append(I);try{I.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var K=I.node;K.animators=[];var Y=K.getAttribute("id");Y&&(id2anim[Y]=K);for(var pt=getTargets(K),Tt=0,at=pt.length;Tt<at;Tt++){var ft=pt[Tt],lt=new Animator(K,ft,Tt);animators.push(lt),K.animators[Tt]=lt,lt.register()}}}return this};const k=/[^\x20\t\r\n\f]+/g;function q(d){return p.isString(d)?d.trim().match(k)||[]:[]}y.hasClass=function(d){return p.isString(d)?this.node.classList.contains(d.trim()):!1},y.addClass=function(d){return this.node.classList.add(...q(d)),this},y.removeClass=function(d){return this.node.classList.remove(...q(d)),this},y.toggleClass=function(d,E){const L=q(d);for(let I=0;I<L.length;I++)this.node.classList.toggle(L[I],E);return this},y.sample=function(d){d=d||1;for(var E=this.node,L=E.getTotalLength(),I=[],G=0,K;G<L;)K=E.getPointAtLength(G),I.push({x:K.x,y:K.y,distance:G}),G+=d;return I},y.convertToPath=function(){var d=p("path");d.attr(this.attr());var E=this.convertToPathData();return E&&d.attr("d",E),d},y.convertToPathData=function(){var d=this.tagName();switch(d){case"PATH":return this.attr("d");case"LINE":return p.convertLineToPathData(this.node);case"POLYGON":return p.convertPolygonToPathData(this.node);case"POLYLINE":return p.convertPolylineToPathData(this.node);case"ELLIPSE":return p.convertEllipseToPathData(this.node);case"CIRCLE":return p.convertCircleToPathData(this.node);case"RECT":return p.convertRectToPathData(this.node)}throw new Error(d+" cannot be converted to PATH.")},p.prototype.toGeometryShape=function(){var d,E,L,I,G,K,Y,pt,Tt,at,ft,lt,dt,Xt,Ft;switch(this.tagName()){case"RECT":return d=parseFloat(this.attr("x"))||0,E=parseFloat(this.attr("y"))||0,L=parseFloat(this.attr("width"))||0,I=parseFloat(this.attr("height"))||0,new It(d,E,L,I);case"CIRCLE":return G=parseFloat(this.attr("cx"))||0,K=parseFloat(this.attr("cy"))||0,Y=parseFloat(this.attr("r"))||0,new qn({x:G,y:K},Y,Y);case"ELLIPSE":return G=parseFloat(this.attr("cx"))||0,K=parseFloat(this.attr("cy"))||0,pt=parseFloat(this.attr("rx"))||0,Tt=parseFloat(this.attr("ry"))||0,new qn({x:G,y:K},pt,Tt);case"POLYLINE":return at=p.getPointsFromSvgNode(this),new ze(at);case"POLYGON":return at=p.getPointsFromSvgNode(this),at.length>1&&at.push(at[0]),new ze(at);case"PATH":return ft=this.attr("d"),jt.isDataSupported(ft)||(ft=p.normalizePathData(ft)),new jt(ft);case"LINE":return lt=parseFloat(this.attr("x1"))||0,Xt=parseFloat(this.attr("y1"))||0,dt=parseFloat(this.attr("x2"))||0,Ft=parseFloat(this.attr("y2"))||0,new Dt({x:lt,y:Xt},{x:dt,y:Ft})}return this.getBBox()},y.findIntersection=function(d,E){var L=this.svg().node;E=E||L;var I=this.getBBox({target:E}),G=I.center();if(I.intersectionWithLineFromCenterToPoint(d)){var K,Y=this.tagName();if(Y==="RECT"){var pt=new It(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),Tt=this.getTransformToElement(E),at=p.decomposeMatrix(Tt),ft=L.createSVGTransform();ft.setRotate(-at.rotation,G.x,G.y);var lt=p.transformRect(pt,ft.matrix.multiply(Tt));K=new It(lt).intersectionWithLineFromCenterToPoint(d,at.rotation)}else if(Y==="PATH"||Y==="POLYGON"||Y==="POLYLINE"||Y==="CIRCLE"||Y==="ELLIPSE"){var dt=Y==="PATH"?this:this.convertToPath(),Xt=dt.sample(),Ft=1/0,Ae=[],Ee,ot,ht,tt,it,wt;for(Ee=0;Ee<Xt.length;Ee++)ot=Xt[Ee],ht=p.createSVGPoint(ot.x,ot.y),ht=ht.matrixTransform(this.getTransformToElement(E)),ot=new Q(ht),tt=ot.distance(G),it=ot.distance(d)*1.1,wt=tt+it,wt<Ft?(Ft=wt,Ae=[{sample:ot,refDistance:it}]):wt<Ft+1&&Ae.push({sample:ot,refDistance:it});Ae.sort(function(Ht,Gt){return Ht.refDistance-Gt.refDistance}),Ae[0]&&(K=Ae[0].sample)}return K}},y.setAttribute=function(d,E){const L=this.node;if(E===null)return this.removeAttr(d),this;const I=H[d],{ns:G}=p.qualifyAttr(I);return G?L.setAttributeNS(G,I,E):I==="id"?L.id=E:L.setAttribute(I,E),this},p.createSvgDocument=function(d){if(d){const L=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${n}">${d}</svg>`,{documentElement:I}=p.parseXML(L,{async:!1});return I}const E=document.createElementNS(e.svg,"svg");return E.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),E.setAttribute("version",n),E},p.createSVGStyle=function(d){const{node:E}=p("style",{type:"text/css"},[p.createCDATASection(d)]);return E},p.createCDATASection=function(d=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(d)},p.idCounter=0,p.uniqueId=function(){return"v-"+ ++p.idCounter},p.toNode=function(d){return p.isV(d)?d.node:d.nodeName&&d||d[0]},p.ensureId=function(d){return d=p.toNode(d),d.id||(d.id=p.uniqueId())},p.sanitizeText=function(d){return(d||"").replace(/ /g," ")},p.isUndefined=function(d){return typeof d>"u"},p.isString=function(d){return typeof d=="string"},p.isObject=function(d){return d&&typeof d=="object"},p.isArray=Array.isArray,p.parseXML=function(d,E){E=E||{};var L;try{var I=new DOMParser;p.isUndefined(E.async)||(I.async=E.async),L=I.parseFromString(d,"text/xml")}catch{L=void 0}if(!L||L.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+d);return L};const B=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(d=>B[d]=d);const H=new Proxy(B,{get(d,E){return p.supportCamelCaseAttributes?E in d?d[E]:d[E]=E.replace(/[A-Z]/g,"-$&").toLowerCase():E}});Object.defineProperty(p,"attributeNames",{value:H,writable:!1}),Object.defineProperty(p,"supportCamelCaseAttributes",{value:!1,writable:!0}),p.qualifyAttr=function(d){if(d.indexOf(":")!==-1){var E=d.split(":");return{ns:e[E[0]],local:E[1]}}return{ns:null,local:d}},p.transformSeparatorRegex=/[ ,]+/,p.transformRegex=/\b\w+\([^()]+\)/g,p.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,p.transformTranslateRegex=/\btranslate\(([^()]+)\)/,p.transformRotateRegex=/\brotate\(([^()]+)\)/,p.transformScaleRegex=/\bscale\(([^()]+)\)/,p.transformStringToMatrix=function(d){let E=p.createSVGMatrix();const L=d&&d.match(p.transformRegex);if(!L)return E;const I=L.length;for(let G=0;G<I;G++){const Y=L[G].match(p.transformFunctionRegex);if(Y){let pt,Tt,at,ft,lt,dt=p.createSVGMatrix();const Xt=Y[1].toLowerCase(),Ft=Y[2].split(p.transformSeparatorRegex);switch(Xt){case"scale":pt=parseFloat(Ft[0]),Tt=Ft[1]===void 0?pt:parseFloat(Ft[1]),dt=dt.scaleNonUniform(pt,Tt);break;case"translate":at=parseFloat(Ft[0]),ft=parseFloat(Ft[1]),dt=dt.translate(at,ft);break;case"rotate":lt=parseFloat(Ft[0]),at=parseFloat(Ft[1])||0,ft=parseFloat(Ft[2])||0,at!==0||ft!==0?dt=dt.translate(at,ft).rotate(lt).translate(-at,-ft):dt=dt.rotate(lt);break;case"skewx":lt=parseFloat(Ft[0]),dt=dt.skewX(lt);break;case"skewy":lt=parseFloat(Ft[0]),dt=dt.skewY(lt);break;case"matrix":dt.a=parseFloat(Ft[0]),dt.b=parseFloat(Ft[1]),dt.c=parseFloat(Ft[2]),dt.d=parseFloat(Ft[3]),dt.e=parseFloat(Ft[4]),dt.f=parseFloat(Ft[5]);break;default:continue}E=E.multiply(dt)}}return E},p.matrixToTransformString=function(d){return d||(d=!0),"matrix("+(d.a!==void 0?d.a:1)+","+(d.b!==void 0?d.b:0)+","+(d.c!==void 0?d.c:0)+","+(d.d!==void 0?d.d:1)+","+(d.e!==void 0?d.e:0)+","+(d.f!==void 0?d.f:0)+")"},p.parseTransformString=function(d){var E,L,I;if(d){var G=p.transformSeparatorRegex;if(d.trim().indexOf("matrix")>=0){var K=p.transformStringToMatrix(d),Y=p.decomposeMatrix(K);E=[Y.translateX,Y.translateY],I=[Y.scaleX,Y.scaleY],L=[Y.rotation];var pt=[];(E[0]!==0||E[1]!==0)&&pt.push("translate("+E+")"),(I[0]!==1||I[1]!==1)&&pt.push("scale("+I+")"),L[0]!==0&&pt.push("rotate("+L+")"),d=pt.join(" ")}else{const at=d.match(p.transformTranslateRegex);at&&(E=at[1].split(G));const ft=d.match(p.transformRotateRegex);ft&&(L=ft[1].split(G));const lt=d.match(p.transformScaleRegex);lt&&(I=lt[1].split(G))}}var Tt=I&&I[0]?parseFloat(I[0]):1;return{value:d,translate:{tx:E&&E[0]?parseInt(E[0],10):0,ty:E&&E[1]?parseInt(E[1],10):0},rotate:{angle:L&&L[0]?parseInt(L[0],10):0,cx:L&&L[1]?parseInt(L[1],10):void 0,cy:L&&L[2]?parseInt(L[2],10):void 0},scale:{sx:Tt,sy:I&&I[1]?parseFloat(I[1]):Tt}}},p.deltaTransformPoint=function(d,E){var L=E.x*d.a+E.y*d.c+0,I=E.x*d.b+E.y*d.d+0;return{x:L,y:I}},p.decomposeMatrix=function(d){var E=p.deltaTransformPoint(d,{x:0,y:1}),L=p.deltaTransformPoint(d,{x:1,y:0}),I=180/i*s(E.y,E.x)-90,G=180/i*s(L.y,L.x);return{translateX:d.e,translateY:d.f,scaleX:a(d.a*d.a+d.b*d.b),scaleY:a(d.c*d.c+d.d*d.d),skewX:I,skewY:G,rotation:I}},p.matrixToScale=function(d){var E,L,I,G;return d?(E=p.isUndefined(d.a)?1:d.a,G=p.isUndefined(d.d)?1:d.d,L=d.b,I=d.c):E=G=1,{sx:L?a(E*E+L*L):E,sy:I?a(I*I+G*G):G}},p.matrixToRotate=function(d){var E={x:0,y:1};return d&&(E=p.deltaTransformPoint(d,E)),{angle:Hr(Vu(s(E.y,E.x))-90)}},p.matrixToTranslate=function(d){return{tx:d&&d.e||0,ty:d&&d.f||0}},p.isV=function(d){return d instanceof p},p.isVElement=p.isV,p.isSVGGraphicsElement=function(d){return d?(d=p.toNode(d),d instanceof SVGElement&&typeof d.getScreenCTM=="function"):!1};var X=p("svg").node;return p.createSVGMatrix=function(d){var E=X.createSVGMatrix();for(var L in d)E[L]=d[L];return E},p.createSVGTransform=function(d){return p.isUndefined(d)?X.createSVGTransform():(d instanceof SVGMatrix||(d=p.createSVGMatrix(d)),X.createSVGTransformFromMatrix(d))},p.createSVGPoint=function(d,E){var L=X.createSVGPoint();return L.x=d,L.y=E,L},p.transformRect=function(d,E){var L=X.createSVGPoint();L.x=d.x,L.y=d.y;var I=L.matrixTransform(E);L.x=d.x+d.width,L.y=d.y;var G=L.matrixTransform(E);L.x=d.x+d.width,L.y=d.y+d.height;var K=L.matrixTransform(E);L.x=d.x,L.y=d.y+d.height;var Y=L.matrixTransform(E),pt=u(I.x,G.x,K.x,Y.x),Tt=c(I.x,G.x,K.x,Y.x),at=u(I.y,G.y,K.y,Y.y),ft=c(I.y,G.y,K.y,Y.y);return new It(pt,at,Tt-pt,ft-at)},p.transformPoint=function(d,E){return new Q(p.createSVGPoint(d.x,d.y).matrixTransform(E))},p.transformLine=function(d,E){return new Dt(p.transformPoint(d.start,E),p.transformPoint(d.end,E))},p.transformPolyline=function(d,E){var L=d instanceof ze?d.points:d;p.isArray(L)||(L=[]);for(var I=[],G=0,K=L.length;G<K;G++)I[G]=p.transformPoint(L[G],E);return new ze(I)},p.styleToObject=function(d){for(var E={},L=d.split(";"),I=0;I<L.length;I++){var G=L[I],K=G.split("=");E[K[0].trim()]=K[1].trim()}return E},p.createSlicePathData=function(d,E,L,I){var G=2*i-1e-6,K=d,Y=E,pt=L,Tt=I,at=(Tt<pt&&(at=pt,pt=Tt,Tt=at),Tt-pt),ft=at<i?"0":"1",lt=l(pt),dt=g(pt),Xt=l(Tt),Ft=g(Tt);return at>=G?K?"M0,"+Y+"A"+Y+","+Y+" 0 1,1 0,"+-Y+"A"+Y+","+Y+" 0 1,1 0,"+Y+"M0,"+K+"A"+K+","+K+" 0 1,0 0,"+-K+"A"+K+","+K+" 0 1,0 0,"+K+"Z":"M0,"+Y+"A"+Y+","+Y+" 0 1,1 0,"+-Y+"A"+Y+","+Y+" 0 1,1 0,"+Y+"Z":K?"M"+Y*lt+","+Y*dt+"A"+Y+","+Y+" 0 "+ft+",1 "+Y*Xt+","+Y*Ft+"L"+K*Xt+","+K*Ft+"A"+K+","+K+" 0 "+ft+",0 "+K*lt+","+K*dt+"Z":"M"+Y*lt+","+Y*dt+"A"+Y+","+Y+" 0 "+ft+",1 "+Y*Xt+","+Y*Ft+"L0,0Z"},p.mergeAttrs=function(d,E){for(var L in E)L==="class"?d[L]=d[L]?d[L]+" "+E[L]:E[L]:L==="style"?p.isObject(d[L])&&p.isObject(E[L])?d[L]=p.mergeAttrs(d[L],E[L]):p.isObject(d[L])?d[L]=p.mergeAttrs(d[L],p.styleToObject(E[L])):p.isObject(E[L])?d[L]=p.mergeAttrs(p.styleToObject(d[L]),E[L]):d[L]=p.mergeAttrs(p.styleToObject(d[L]),p.styleToObject(E[L])):d[L]=E[L];return d},p.annotateString=function(d,E,L){E=E||[],L=L||{};for(var I=L.offset||0,G=[],K,Y=[],pt,Tt,at=0;at<d.length;at++){pt=Y[at]=d[at];for(var ft=0;ft<E.length;ft++){var lt=E[ft],dt=lt.start+I,Xt=lt.end+I;at>=dt&&at<Xt&&(p.isObject(pt)?pt.attrs=p.mergeAttrs(p.mergeAttrs({},pt.attrs),lt.attrs):pt=Y[at]={t:d[at],attrs:lt.attrs},L.includeAnnotationIndices&&(pt.annotations||(pt.annotations=[])).push(ft))}Tt=Y[at-1],Tt?p.isObject(pt)&&p.isObject(Tt)?JSON.stringify(pt.attrs)===JSON.stringify(Tt.attrs)?K.t+=pt.t:(G.push(K),K=pt):p.isObject(pt)||p.isObject(Tt)?(G.push(K),K=pt):K=(K||"")+pt:K=pt}return K&&G.push(K),G},p.findAnnotationsAtIndex=function(d,E){var L=[];return d&&d.forEach(function(I){I.start<E&&E<=I.end&&L.push(I)}),L},p.findAnnotationsBetweenIndexes=function(d,E,L){var I=[];return d&&d.forEach(function(G){(E>=G.start&&E<G.end||L>G.start&&L<=G.end||G.start>=E&&G.end<L)&&I.push(G)}),I},p.shiftAnnotations=function(d,E,L){return d&&d.forEach(function(I){I.start<E&&I.end>=E?I.end+=L:I.start>=E&&(I.start+=L,I.end+=L)}),d},p.convertLineToPathData=function(d){d=p(d);var E=["M",d.attr("x1"),d.attr("y1"),"L",d.attr("x2"),d.attr("y2")].join(" ");return E},p.convertPolygonToPathData=function(d){var E=p.getPointsFromSvgNode(d);return E.length===0?null:p.svgPointsToPath(E)+" Z"},p.convertPolylineToPathData=function(d){var E=p.getPointsFromSvgNode(d);return E.length===0?null:p.svgPointsToPath(E)},p.svgPointsToPath=function(d){for(var E=0,L=d.length;E<L;E++)d[E]=d[E].x+" "+d[E].y;return"M "+d.join(" L")},p.getPointsFromSvgNode=function(d){d=p.toNode(d);var E=[],L=d.points;if(L)for(var I=0,G=L.numberOfItems;I<G;I++)E.push(L.getItem(I));return E},p.KAPPA=.551784,p.convertCircleToPathData=function(d){d=p(d);var E=parseFloat(d.attr("cx"))||0,L=parseFloat(d.attr("cy"))||0,I=parseFloat(d.attr("r")),G=I*p.KAPPA,K=["M",E,L-I,"C",E+G,L-I,E+I,L-G,E+I,L,"C",E+I,L+G,E+G,L+I,E,L+I,"C",E-G,L+I,E-I,L+G,E-I,L,"C",E-I,L-G,E-G,L-I,E,L-I,"Z"].join(" ");return K},p.convertEllipseToPathData=function(d){d=p(d);var E=parseFloat(d.attr("cx"))||0,L=parseFloat(d.attr("cy"))||0,I=parseFloat(d.attr("rx")),G=parseFloat(d.attr("ry"))||I,K=I*p.KAPPA,Y=G*p.KAPPA,pt=["M",E,L-G,"C",E+K,L-G,E+I,L-Y,E+I,L,"C",E+I,L+Y,E+K,L+G,E,L+G,"C",E-K,L+G,E-I,L+Y,E-I,L,"C",E-I,L-Y,E-K,L-G,E,L-G,"Z"].join(" ");return pt},p.convertRectToPathData=function(d){return d=p(d),p.rectToPath({x:parseFloat(d.attr("x"))||0,y:parseFloat(d.attr("y"))||0,width:parseFloat(d.attr("width"))||0,height:parseFloat(d.attr("height"))||0,rx:parseFloat(d.attr("rx"))||0,ry:parseFloat(d.attr("ry"))||0})},p.rectToPath=function(d){var E,L=d.x,I=d.y,G=d.width,K=d.height,Y=u(d.rx||d["top-rx"]||0,G/2),pt=u(d.rx||d["bottom-rx"]||0,G/2),Tt=u(d.ry||d["top-ry"]||0,K/2),at=u(d.ry||d["bottom-ry"]||0,K/2);return Y||pt||Tt||at?E=["M",L,I+Tt,"v",K-Tt-at,"a",pt,at,0,0,0,pt,at,"h",G-2*pt,"a",pt,at,0,0,0,pt,-at,"v",-(K-at-Tt),"a",Y,Tt,0,0,0,-Y,-Tt,"h",-(G-2*Y),"a",Y,Tt,0,0,0,-Y,Tt,"Z"]:E=["M",L,I,"H",L+G,"V",I+K,"H",L,"V",I,"Z"],E.join(" ")},p.normalizePathData=function(){var d=`	
\v\f\r   ᠎             　\u2028\u2029`,E=new RegExp("([a-z])["+d+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+d+"]*,?["+d+"]*)+)","ig"),L=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+d+"]*,?["+d+"]*","ig"),I=Math,G=I.PI,K=I.sin,Y=I.cos,pt=I.tan,Tt=I.asin,at=I.sqrt,ft=I.abs;function lt(ot,ht,tt,it,wt,Ht){var Gt=.3333333333333333,zt=2/3;return[Gt*ot+zt*tt,Gt*ht+zt*it,Gt*wt+zt*tt,Gt*Ht+zt*it,wt,Ht]}function dt(ot,ht,tt){var it=ot*Y(tt)-ht*K(tt),wt=ot*K(tt)+ht*Y(tt);return{x:it,y:wt}}function Xt(ot,ht,tt,it,wt,Ht,Gt,zt,fe,Wt){var C=G*120/180,D=G/180*(+wt||0),U=[],$;if(Wt)oe=Wt[0],ve=Wt[1],ke=Wt[2],Mt=Wt[3];else{$=dt(ot,ht,-D),ot=$.x,ht=$.y,$=dt(zt,fe,-D),zt=$.x,fe=$.y;var vt=(ot-zt)/2,_t=(ht-fe)/2,Nt=vt*vt/(tt*tt)+_t*_t/(it*it);Nt>1&&(Nt=at(Nt),tt=Nt*tt,it=Nt*it);var Yt=tt*tt,ne=it*it,he=(Ht==Gt?-1:1)*at(ft((Yt*ne-Yt*_t*_t-ne*vt*vt)/(Yt*_t*_t+ne*vt*vt))),ke=he*tt*_t/it+(ot+zt)/2,Mt=he*-it*vt/tt+(ht+fe)/2,oe=Tt(((ht-Mt)/it).toFixed(9)),ve=Tt(((fe-Mt)/it).toFixed(9));oe=ot<ke?G-oe:oe,ve=zt<ke?G-ve:ve,oe<0&&(oe=G*2+oe),ve<0&&(ve=G*2+ve),Gt&&oe>ve&&(oe=oe-G*2),!Gt&&ve>oe&&(ve=ve-G*2)}var sn=ve-oe;if(ft(sn)>C){var qe=ve,He=zt,an=fe;ve=oe+C*(Gt&&ve>oe?1:-1),zt=ke+tt*Y(ve),fe=Mt+it*K(ve),U=Xt(zt,fe,tt,it,wt,0,Gt,He,an,[ve,qe,ke,Mt])}sn=ve-oe;var wn=Y(oe),$e=K(oe),Xe=Y(ve),rr=K(ve),yi=pt(sn/4),Qr=4/3*(tt*yi),Js=4/3*(it*yi),Qs=[ot,ht],bi=[ot+Qr*$e,ht-Js*wn],Nr=[zt+Qr*rr,fe-Js*Xe],ti=[zt,fe];if(bi[0]=2*Qs[0]-bi[0],bi[1]=2*Qs[1]-bi[1],Wt)return[bi,Nr,ti].concat(U);U=[bi,Nr,ti].concat(U).join().split(",");for(var ta=[],Wa=U.length,Ye=0;Ye<Wa;Ye++)ta[Ye]=Ye%2?dt(U[Ye-1],U[Ye],D).y:dt(U[Ye],U[Ye+1],D).x;return ta}function Ft(ot){if(!ot)return null;var ht={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},tt=[];return String(ot).replace(E,function(it,wt,Ht){var Gt=[],zt=wt.toLowerCase();for(Ht.replace(L,function(fe,Wt){Wt&&Gt.push(+Wt)}),zt==="m"&&Gt.length>2&&(tt.push([wt].concat(Gt.splice(0,2))),zt="l",wt=wt==="m"?"l":"L");Gt.length>=ht[zt]&&(tt.push([wt].concat(Gt.splice(0,ht[zt]))),!!ht[zt]););}),tt}function Ae(ot){if((!Array.isArray(ot)||!Array.isArray(ot&&ot[0]))&&(ot=Ft(ot)),!ot||!ot.length)return[["M",0,0]];for(var ht=[],tt=0,it=0,wt=0,Ht=0,Gt=0,zt,fe=ot.length,Wt=Gt;Wt<fe;Wt++){var C=[];ht.push(C);var D=ot[Wt];if(zt=D[0],zt!=zt.toUpperCase()){C[0]=zt.toUpperCase();var U,$;switch(C[0]){case"A":C[1]=D[1],C[2]=D[2],C[3]=D[3],C[4]=D[4],C[5]=D[5],C[6]=+D[6]+tt,C[7]=+D[7]+it;break;case"V":C[1]=+D[1]+it;break;case"H":C[1]=+D[1]+tt;break;case"M":for(wt=+D[1]+tt,Ht=+D[2]+it,U=D.length,$=1;$<U;$++)C[$]=+D[$]+($%2?tt:it);break;default:for(U=D.length,$=1;$<U;$++)C[$]=+D[$]+($%2?tt:it);break}}else for(var vt=D.length,_t=0;_t<vt;_t++)C[_t]=D[_t];switch(C[0]){case"Z":tt=+wt,it=+Ht;break;case"H":tt=C[1];break;case"V":it=C[1];break;case"M":wt=C[C.length-2],Ht=C[C.length-1],tt=C[C.length-2],it=C[C.length-1];break;default:tt=C[C.length-2],it=C[C.length-1];break}}return ht}function Ee(ot){var ht=Ae(ot),tt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function it(U,$,vt){var _t,Nt;if(!U)return["C",$.x,$.y,$.x,$.y,$.x,$.y];switch(U[0]in{T:1,Q:1}||($.qx=null,$.qy=null),U[0]){case"M":$.X=U[1],$.Y=U[2];break;case"A":parseFloat(U[1])===0||parseFloat(U[2])===0?U=["L",U[6],U[7]]:U=["C"].concat(Xt.apply(0,[$.x,$.y].concat(U.slice(1))));break;case"S":vt==="C"||vt==="S"?(_t=$.x*2-$.bx,Nt=$.y*2-$.by):(_t=$.x,Nt=$.y),U=["C",_t,Nt].concat(U.slice(1));break;case"T":vt==="Q"||vt==="T"?($.qx=$.x*2-$.qx,$.qy=$.y*2-$.qy):($.qx=$.x,$.qy=$.y),U=["C"].concat(lt($.x,$.y,$.qx,$.qy,U[1],U[2]));break;case"Q":$.qx=U[1],$.qy=U[2],U=["C"].concat(lt($.x,$.y,U[1],U[2],U[3],U[4]));break;case"H":U=["L"].concat(U[1],$.y);break;case"V":U=["L"].concat($.x,U[1]);break}return U}function wt(U,$){if(U[$].length>7){U[$].shift();for(var vt=U[$];vt.length;)Ht[$]="A",U.splice($++,0,["C"].concat(vt.splice(0,6)));U.splice($,1),fe=ht.length}}for(var Ht=[],Gt="",zt="",fe=ht.length,Wt=0;Wt<fe;Wt++){ht[Wt]&&(Gt=ht[Wt][0]),Gt!=="C"&&(Ht[Wt]=Gt,Wt>0&&(zt=Ht[Wt-1])),ht[Wt]=it(ht[Wt],tt,zt),Ht[Wt]!=="A"&&Gt==="C"&&(Ht[Wt]="C"),wt(ht,Wt);var C=ht[Wt],D=C.length;tt.x=C[D-2],tt.y=C[D-1],tt.bx=parseFloat(C[D-4])||tt.x,tt.by=parseFloat(C[D-3])||tt.y}return(!ht[0][0]||ht[0][0]!=="M")&&ht.unshift(["M",0,0]),ht}return function(ot){return Ee(ot).join(",").split(",").join(" ")}}(),p.namespace=e,p.g=ek,p}(),is={classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},So="[object Arguments]",Ch="[object Array]",pc="[object Boolean]",Lh="[object Date]",u1="[object Error]",Nk="[object Function]",To="[object Map]",gc="[object Number]",Dk="[object Null]",Aa="[object Object]",Rh="[object RegExp]",Eo="[object Set]",vc="[object String]",mc="[object Symbol]",qk="[object Undefined]",Bk="[object WeakMap]",Oh="[object ArrayBuffer]",kh="[object DataView]",c1="[object Float32Array]",f1="[object Float64Array]",l1="[object Int8Array]",h1="[object Int16Array]",d1="[object Int32Array]",p1="[object Uint8Array]",g1="[object Uint8ClampedArray]",v1="[object Uint16Array]",m1="[object Uint32Array]",Fk={[So]:!0,[Ch]:!0,[Oh]:!0,[kh]:!0,[pc]:!0,[Lh]:!0,[c1]:!0,[f1]:!0,[l1]:!0,[h1]:!0,[d1]:!0,[To]:!0,[gc]:!0,[Aa]:!0,[Rh]:!0,[Eo]:!0,[vc]:!0,[mc]:!0,[p1]:!0,[g1]:!0,[v1]:!0,[m1]:!0,[u1]:!1,[Nk]:!1,[Bk]:!1},Mh="\\ud800-\\udfff",Vk="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",y1="\\u2700-\\u27bf",b1="a-z\\xdf-\\xf6\\xf8-\\xff",zk="\\xac\\xb1\\xd7\\xf7",Gk="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Uk="\\u2000-\\u206f",Hk=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_1="A-Z\\xc0-\\xd6\\xd8-\\xde",$k="\\ufe0e\\ufe0f",w1=zk+Gk+Uk+Hk,x1="['’]",A1=`[${w1}]`,Ih=`[${Vk}]`,S1="\\d",Wk=`[${y1}]`,T1=`[${b1}]`,E1=`[^${Mh}${w1+S1+y1+b1+_1}]`,Nh="\\ud83c[\\udffb-\\udfff]",jk=`(?:${Ih}|${Nh})`,P1=`[^${Mh}]`,Dh="(?:\\ud83c[\\udde6-\\uddff]){2}",qh="[\\ud800-\\udbff][\\udc00-\\udfff]",Sa=`[${_1}]`,Xk="\\u200d",C1=`(?:${T1}|${E1})`,Yk=`(?:${Sa}|${E1})`,L1=`(?:${x1}(?:d|ll|m|re|s|t|ve))?`,R1=`(?:${x1}(?:D|LL|M|RE|S|T|VE))?`,O1=`${jk}?`,k1=`[${$k}]?`,Kk=`(?:${Xk}(?:${[P1,Dh,qh].join("|")})${k1+O1})*`,Zk="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jk="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",M1=k1+O1+Kk,Qk=`(?:${[Wk,Dh,qh].join("|")})${M1}`,tM=RegExp([`${Sa}?${T1}+${L1}(?=${[A1,Sa,"$"].join("|")})`,`${Yk}+${R1}(?=${[A1,Sa+C1,"$"].join("|")})`,`${Sa}?${C1}+${L1}`,`${Sa}+${R1}`,Jk,Zk,`${S1}+`,Qk].join("|"),"g"),Bh=200,Fh="__hash_undefined__",eM=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,nM=`[${Mh}]`,rM=`(?:${[`${P1}${Ih}?`,Ih,Dh,qh,nM].join("|")})`,I1=RegExp(`${Nh}(?=${Nh})|${rM+M1}`,"g"),iM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sM=/^\w*$/,aM=46,oM=/\\(\\)?/g,uM=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),cM=/^(?:0|[1-9]\d*)$/,fM=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),lM=4294967294,hM=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,N1=t=>I1.test(t),dM=t=>t.match(I1)||[],pM=t=>t.split(""),D1=t=>N1(t)?dM(t):pM(t),gM=t=>t==null?[]:Po(t).map(e=>t[e]),Po=t=>Er(t)?q1(t):Object.keys(Object(t)),vM=t=>{if(!_c(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&n!="constructor"&&e.push(n);return e},q1=(t,e)=>{const n=Array.isArray(t),r=!n&&Wr(t)&&Pr(t)===So,i=!n&&!r&&Lo(t),s=n||r||i,a=t.length,u=new Array(s?a:0);let c=s?-1:a;for(;++c<a;)u[c]=`${c}`;for(const l in t)(e||hasOwnProperty.call(t,l))&&!(s&&(l==="length"||$h(l,a)))&&u.push(l);return u},yc=(t,e)=>{let{length:n}=t;for(;n--;)if(Ta(t[n][0],e))return n;return-1},Ta=(t,e)=>t===e||t!==t&&e!==e,Wr=t=>t!=null&&typeof t=="object",bc=(t,e,n)=>{if(!Me(n))return!1;const r=typeof e;return(r=="number"?Er(n)&&e>-1&&e<n.length:r=="string"&&e in n)?Ta(n[e],t):!1},mM=t=>Wr(t)&&Pr(t)==Eo,yM=t=>Wr(t)&&Pr(t)==To,_c=t=>{const e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Object.prototype;return t===n},Ea=(t,e,n)=>{const r=t[e];(!(hasOwnProperty.call(t,e)&&Ta(r,n))||n===void 0&&!(e in t))&&(t[e]=n)},Co=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const s=e[r];Ea(n,s,t[s])}return n},Er=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,Pa=t=>typeof t=="symbol"||Wr(t)&&Pr(t)===mc,bM=t=>{const e=t.length;let n=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n},Vh=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},Pr=t=>t==null?t===void 0?qk:Dk:Object.prototype.toString.call(t),zh=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},B1=(t,e)=>{const n=e?zh(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},_M=t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},F1=t=>typeof t.constructor=="function"&&!_c(t)?Object.create(Object.getPrototypeOf(t)):{},Gh=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(n=>propertyIsEnumerable.call(t,n))),wM=(t,e)=>Co(t,Gh(t),e);function xM(t,e){const n=e?zh(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}const AM=(t,e,n)=>{const r=t.constructor;switch(e){case Oh:return zh(t);case pc:case Lh:return new r(+t);case kh:return xM(t,n);case c1:case f1:case l1:case h1:case d1:case p1:case g1:case v1:case m1:return B1(t,n);case To:return new r(t);case gc:case vc:return new r(t);case Rh:return _M(t);case Eo:return new r;case mc:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},Lo=t=>Wr(t)&&eM.test(Pr(t)),Uh=t=>{const e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...Gh(Object(t))),e},V1=t=>{const e=[];for(;t;)e.push(...Gh(t)),t=Object.getPrototypeOf(Object(t));return e},z1=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...V1(t)),e},wc=({__data__:t},e)=>{const n=t;return NM(e)?n[typeof e=="string"?"string":"hash"]:n.map},SM=(t,e,n,r)=>{const i=Uh(t),s=i.length,u=Uh(e).length;if(s!=u)return!1;let c,l=s;for(;l--;)if(c=i[l],!hasOwnProperty.call(e,c))return!1;const g=r.get(t),p=r.get(e);if(g&&p)return g==e&&p==t;let y=!0;r.set(t,e),r.set(e,t);let _;for(;++l<s;){c=i[l];const w=t[c],x=e[c];if(!(w===x||n(w,x,r))){y=!1;break}_||(_=c=="constructor")}if(y&&!_){const w=t.constructor,x=e.constructor;w!=x&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(y=!1)}return r.delete(t),r.delete(e),y},xc=(t,e,n)=>t===e?!0:t==null||e==null||!Wr(t)&&!Wr(e)?t!==t&&e!==e:TM(t,e,xc,n),TM=(t,e,n,r)=>{let i=Array.isArray(t);const s=Array.isArray(e);let a=i?Ch:Pr(t),u=s?Ch:Pr(e);a=a==So?Aa:a,u=u==So?Aa:u;let c=a==Aa;const l=u==Aa,g=a==u;if(g&&!c)return r||(r=new La),i||Lo(t)?G1(t,e,!1,n,r):CM(t,e,a,n,r);const p=c&&hasOwnProperty.call(t,"__wrapped__"),y=l&&hasOwnProperty.call(e,"__wrapped__");if(p||y){const _=p?t.value():t,w=y?e.value():e;return r||(r=new La),n(_,w,r)}return g?(r||(r=new La),SM(t,e,n,r)):!1},G1=(t,e,n,r,i)=>{const s=t.length,a=e.length;if(s!=a)return!1;const u=i.get(t),c=i.get(e);if(u&&c)return u==e&&c==t;let l=-1,g=!0;const p=n?new ko:void 0;for(i.set(t,e),i.set(e,t);++l<s;){const y=t[l],_=e[l];if(p){if(!EM(e,(w,x)=>{if(!PM(p,x)&&(y===w||r(y,w,i)))return p.push(x)})){g=!1;break}}else if(!(y===_||r(y,_,i))){g=!1;break}}return i.delete(t),i.delete(e),g},EM=(t,e)=>{let n=-1;const r=t==null?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},PM=(t,e)=>t.has(e),U1=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),CM=(t,e,n,r,i)=>{switch(n){case kh:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,U1(t,e,r,i));case Oh:return U1(t,e,r,i);case pc:case Lh:case gc:return Ta(+t,+e);case u1:return t.name==e.name&&t.message==e.message;case Rh:case vc:return t==`${e}`;case To:let s=H1;case Eo:if(s||(s=Ac),t.size!=e.size)return!1;const a=i.get(t);if(a)return a==e;i.set(t,e);const u=G1(s(t),s(e),!0,r,i);return i.delete(t),u;case mc:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},H1=t=>{let e=-1,n=Array(t.size);return t.forEach((r,i)=>{n[++e]=[i,r]}),n},Ac=t=>{let e=-1;const n=new Array(t.size);return t.forEach(r=>{n[++e]=r}),n},Hh=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return n==="number"||n==="boolean"||t==null||Pa(t)?!0:sM.test(t)||!iM.test(t)||e!=null&&t in Object(e)},LM=t=>{const e=[];return t.charCodeAt(0)===aM&&e.push(""),t.replace(uM,(n,r,i,s)=>{let a=n;i?a=s.replace(oM,"$1"):r&&(a=r.trim()),e.push(a)}),e},ss=(t,e)=>Array.isArray(t)?t:Hh(t,e)?[t]:LM(`${t}`),Ro=(t,e)=>{e=ss(e,t);let n=0;const r=e.length;for(;t!=null&&n<r;)t=t[as(e[n])],n++;return n&&n==r?t:void 0};function RM(t,e){if(t!==e){const n=t!==void 0,r=t===null,i=t===t,s=Pa(t),a=e!==void 0,u=e===null,c=e===e,l=Pa(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!l&&t<e||l&&n&&i&&!r&&!s||u&&n&&i||!a&&i||!c)return-1}return 0}function OM(t,e,n){let r=-1;const i=t.criteria,s=e.criteria,a=i.length,u=n.length;for(;++r<a;){const c=r<u?n[r]:null,g=(c&&typeof c=="function"?c:RM)(i[r],s[r]);if(g)return c&&typeof c!="function"?g*(c=="desc"?-1:1):g}return t.index-e.index}const $1=(t,e)=>{let n=(a,u)=>!!(a==null?0:a.length)&&a.indexOf(u)>-1,r=!0;const i=[],s=e.length;if(!t.length)return i;e.length>=Bh&&(n=(a,u)=>a.has(u),r=!1,e=new ko(e));t:for(let a in t){let u=t[a];const c=u;if(u=u!==0?u:0,r&&c===c){let l=s;for(;l--;)if(e[l]===c)continue t;i.push(u)}else n(e,c)||i.push(u)}return i},as=t=>{if(typeof t=="string"||Pa(t))return t;const e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},Ca=(t,e=!1,n=!1,r=!0,i,s,a,u)=>{let c;if(i&&(c=a?i(t,s,a,u):i(t)),c!==void 0)return c;if(!Me(t))return t;const l=Array.isArray(t),g=Pr(t);if(l){if(c=bM(t),!e)return Vh(t,c)}else{const w=typeof t=="function";if(g===Aa||g===So||w&&!a){if(c=n||w?{}:F1(t),!e)return n?kM(t,Co(t,Object.keys(t),c)):wM(t,Object.assign(c,t))}else{if(w||!Fk[g])return a?t:{};c=AM(t,g,e)}}u||(u=new La);const p=u.get(t);if(p)return p;if(u.set(t,c),yM(t))return t.forEach((w,x)=>{c.set(x,Ca(w,e,n,r,i,x,t,u))}),c;if(mM(t))return t.forEach(w=>{c.add(Ca(w,e,n,r,i,w,t,u))}),c;if(Lo(t))return c;const _=l?void 0:(r?n?z1:Uh:n?j1:Po)(t);return(_||t).forEach((w,x)=>{_&&(x=w,w=t[x]),Ea(c,x,Ca(w,e,n,r,i,x,t,u))}),c},kM=(t,e)=>Co(t,V1(t),e),W1=(t,e)=>e.length<2?t:Ro(t,e.slice(0,-1)),MM=(t,e,n)=>{if(!Me(t))return t;e=ss(e,t);const r=e.length,i=r-1;let s=-1,a=t;for(;a!=null&&++s<r;){const u=as(e[s]);let c=n;if(s!=i){const l=a[u];c=void 0,c===void 0&&(c=Me(l)?l:$h(e[s+1])?[]:{})}Ea(a,u,c),a=a[u]}return t},$h=(t,e)=>{const n=typeof t;return e=e??Number.MAX_SAFE_INTEGER,!!e&&(n==="number"||n!=="symbol"&&cM.test(t))&&t>-1&&t%1==0&&t<e},IM=(t,e)=>{e=ss(e,t),t=W1(t,e);const n=e[e.length-1];return t==null||delete t[as(n)]},NM=t=>{const e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},j1=t=>{const e=[];for(const n in t)e.push(n);return e},DM=t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e},X1=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function Y1(t,e=!1){return(n,...r)=>{let i=-1,s=r.length,a=s>1?r[s-1]:void 0;const u=s>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(s--,a):e?(c,l)=>{if(Array.isArray(c)&&!Array.isArray(l))return l}:void 0,u&&bc(r[0],r[1],u)&&(a=s<3?void 0:a,s=1),n=Object(n);++i<s;){const c=r[i];c&&t(n,c,i,a)}return n}}const Wh=(t,e,n,r,i)=>{t!==e&&Lr(e,(s,a)=>{if(Me(s))i||(i=new La),qM(t,e,a,n,Wh,r,i);else{let u=r?r(t[a],s,`${a}`,t,e,i):void 0;u===void 0&&(u=s),jh(t,a,u)}})},qM=(t,e,n,r,i,s,a)=>{const u=X1(t,n),c=X1(e,n),l=a.get(c);if(l){jh(t,n,l);return}let g=s?s(u,c,`${n}`,t,e,a):void 0,p=g===void 0;if(p){const y=Array.isArray(c),_=!y&&Lo(c);g=c,y||_?Array.isArray(u)?g=u:Wr(u)&&Er(u)?g=Vh(u):_?(p=!1,g=B1(c,!0)):g=[]:en(c)||Oo(c)?(g=u,Oo(u)?g=DM(u):(typeof u=="function"||!Me(u))&&(g=F1(c))):p=!1}p&&(a.set(c,g),i(g,c,r,s,a),a.delete(c)),jh(t,n,g)},jh=(t,e,n)=>{(n!==void 0&&!Ta(t[e],n)||n===void 0&&!(e in t))&&Ea(t,e,n)};function BM(t,e,n){const r=Object(t),i=n(t);let{length:s}=i,a=-1;for(;s--;){const u=i[++a];if(e(r[u],u,r)===!1)break}return t}const FM=(t,e)=>t&&BM(t,e,Po),Xh=(t,e)=>{if(t==null)return t;if(!Er(t))return FM(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&e(r[i],i,r)!==!1;);return t};function VM(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}const zM=Set&&1/Ac(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function K1(t,e,n,r,i,s){return Me(t)&&Me(e)&&(s.set(e,t),Wh(t,e,void 0,K1,s),s.delete(e)),t}function GM(t,e,n){e.length?e=e.map(a=>Array.isArray(a)?u=>Ro(u,a.length===1?a[0]:a):a):e=[a=>a];let r=-1,i=-1;const s=Er(t)?new Array(t.length):[];return Xh(t,a=>{const u=e.map(c=>c(a));s[++i]={criteria:u,index:++r,value:a}}),UM(s,(a,u)=>OM(a,u,n))}function UM(t,e){let{length:n}=t;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Z1(t){return t===t&&!Me(t)}function J1(t,e){return n=>n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}function Q1(t,e){return t!=null&&aI(t,e,sI)}function HM(t,e){return Hh(t)&&Z1(e)?J1(as(t),e):n=>{const r=Ro(n,t);return r===void 0&&r===e?Q1(n,t):xc(e,r)}}function $M(t){const e=WM(t);return e.length===1&&e[0][2]?J1(e[0][0],e[0][1]):n=>n===t||jM(n,t,e)}function WM(t){const e=Po(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,Z1(i)]}return e}function jM(t,e,n,r){let i=n.length;const s=i;if(t==null)return!s;let a;for(t=Object(t);i--;)if(a=n[i],a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1;for(;++i<s;){a=n[i];const u=a[0],c=t[u],l=a[1];if(a[2]){if(c===void 0&&!(u in t))return!1}else{const g=new La;if(!xc(l,c,g))return!1}}return!0}function XM(t){return Hh(t)?YM(as(t)):KM(t)}function YM(t){return e=>e==null?void 0:e[t]}function KM(t){return e=>Ro(e,t)}function ZM(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?HM(t[0],t[1]):$M(t):XM(t)}function Sc(){const t=ZM;return arguments.length?t(arguments[0]):t}const JM=(t,e,n,r)=>{let i=-1;const s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n},QM=(t,e,n,r,i)=>(i(t,(s,a,u)=>{n=r?(r=!1,s):e(n,s,a,u)}),n);function tI(t,e,n){const r=Array.isArray(t)?JM:QM,i=arguments.length<3;return r(t,e,n,i,Xh)}const eI=t=>Array.isArray(t)||Oo(t)||!!(t&&t[Symbol.isConcatSpreadable]);function tx(t,e,n,r,i){let s=-1;const a=t.length;for(n||(n=eI),i||(i=[]);++s<a;){var u=t[s];e>0&&n(u)?e>1?tx(u,e-1,n,r,i):i.push(...u):i[i.length]=u}return i}const Oo=t=>Wr(t)&&Pr(t)=="[object Arguments]",nI=(t,e)=>rI(t,e,(n,r)=>Q1(t,r)),rI=(t,e,n)=>{let r=-1;const i=e.length,s={};for(;++r<i;){const a=e[r],u=Ro(t,a);n(u,a)&&MM(s,ss(a,t),u)}return s},iI=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,sI=(t,e)=>t!=null&&e in Object(t),aI=(t,e,n)=>{e=ss(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=as(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&iI(i)&&$h(a,i)&&(Array.isArray(t)||Oo(t)))},oI=t=>t.match(hM),uI=t=>t.match(tM),cI=(t,e)=>(fM(t)?uI(t):oI(t))||[],fI=(t,e,n)=>{const{length:r}=t;return n=n===void 0?r:n,t.slice(e,n)},lI=hI("toUpperCase");function hI(t){return e=>{if(!e)return"";const n=N1(e)?D1(e):void 0,r=n?n[0]:e[0],i=n?fI(n,1).join(""):e.slice(1);return r[t]()+i}}class La{constructor(e){const n=this.__data__=new Yh(e);this.size=n.size}clear(){this.__data__=new Yh,this.size=0}delete(e){const n=this.__data__,r=n.delete(e);return this.size=n.size,r}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,n){let r=this.__data__;if(r instanceof Yh){const i=r.__data__;if(i.length<Bh-1)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new ex(i)}return r.set(e,n),this.size=r.size,this}}class Yh{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){const n=this.__data__,r=yc(n,e);if(r<0)return!1;const i=n.length-1;return r==i?n.pop():n.splice(r,1),--this.size,!0}get(e){const n=this.__data__,r=yc(n,e);return r<0?void 0:n[r][1]}has(e){return yc(this.__data__,e)>-1}set(e,n){const r=this.__data__,i=yc(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this}}class ex{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new nx,map:new Map,string:new nx}}delete(e){const n=wc(this,e).delete(e);return this.size-=n?1:0,n}get(e){return wc(this,e).get(e)}has(e){return wc(this,e).has(e)}set(e,n){const r=wc(this,e),i=r.size;return r.set(e,n),this.size+=r.size==i?0:1,this}}class nx{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){const n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}get(e){const r=this.__data__[e];return r===Fh?void 0:r}has(e){return this.__data__[e]!==void 0}set(e,n){const r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n===void 0?Fh:n,this}}class ko{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.__data__=new ex;++n<r;)this.add(e[n])}add(e){return this.__data__.set(e,Fh),this}has(e){return this.__data__.has(e)}}ko.prototype.push=ko.prototype.add;const dI=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===pc},Me=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},Qn=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===gc},On=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===vc},Jt=Y1((t,e)=>{if(_c(e)||Er(e)){Co(e,Po(e),t);return}for(var n in e)hasOwnProperty.call(e,n)&&Ea(t,n,e[n])}),dr=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&bc(e[0],e[1],i)&&(r=1);++n<r;){const s=e[n];if(s==null)continue;const a=Object.keys(s),u=a.length;let c=-1;for(;++c<u;){const l=a[c],g=t[l];(g===void 0||Ta(g,Object.prototype[l])&&!hasOwnProperty.call(t,l))&&(t[l]=s[l])}}return t},Kh=function(...e){return e.push(void 0,K1),cn.apply(void 0,e)},jr=(t,e,...n)=>{let r=-1;const i=typeof e=="function",s=Er(t)?new Array(t.length):[];return Xh(t,a=>{s[++r]=i?e.apply(a,n):pI(a,e,...n)}),s},pI=(t,e,...n)=>{e=ss(e,t),t=W1(t,e);const r=t==null?t:t[as(VM(e))];return r==null?void 0:r.apply(t,n)},rx=(t,e,n)=>{let r=0,i=t==null?0:t.length;if(i==0)return 0;n=Sc(n,2),e=n(e);const s=e!==e,a=e===null,u=Pa(e),c=e===void 0;for(;r<i;){let l;const g=Math.floor((r+i)/2),p=n(t[g]),y=p!==void 0,_=p===null,w=p===p,x=Pa(p);s?l=w:c?l=w&&y:a?l=w&&y&&!_:u?l=w&&y&&!_&&!x:_||x?l=!1:l=p<e,l?r=g+1:i=g}return Math.min(i,lM)},Mo=(t,e)=>{let n=-1,r=(c,l)=>!!(c==null?0:c.length)&&c.indexOf(l)>-1;e=Sc(e,2);let i=!0;const{length:s}=t,a=[];let u=a;if(s>=Bh){const c=e?null:zM(t);if(c)return Ac(c);i=!1,r=(l,g)=>l.has(g),u=new ko}else u=e?[]:a;t:for(;++n<s;){let c=t[n];const l=e?e(c):c;if(c=c!==0?c:0,i&&l===l){let g=u.length;for(;g--;)if(u[g]===l)continue t;e&&u.push(l),a.push(c)}else r(u,l)||(u!==a&&u.push(l),a.push(c))}return a},ci=t=>Ca(t),Cr=t=>Ca(t,!0),ki=t=>{if(t==null)return!0;if(Er(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||Lo(t)||Oo(t)))return!t.length;const e=Pr(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(_c(t))return!vM(t).length;for(const n in t)if(hasOwnProperty.call(t,n))return!1;return!0},Ra=(t,e)=>xc(t,e),Ge=t=>typeof t=="function",en=t=>{if(!Wr(t)||Pr(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ce=t=>{if(!t)return[];if(Er(t))return On(t)?D1(t):Vh(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const r=t[Symbol.iterator]();let i;const s=[];for(;!(i=r.next()).done;)s.push(i.value);return s}const e=Pr(t);return(e==To?H1:e==Eo?Ac:gM)(t)};function gI(t,e,n){if(typeof t!="function")throw new TypeError("Expected a function");let r,i,s,a,u,c,l=0,g=!1,p=!1,y=!0;const _=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,Me(n)&&(g=!!n.leading,p="maxWait"in n,s=p?Math.max(20,e):s,y="trailing"in n?!!n.trailing:y);function w(d){const E=r,L=i;return r=i=void 0,l=d,a=t.apply(L,E),a}function x(d,E){return _?(window.cancelAnimationFrame(u),window.requestAnimationFrame(d)):setTimeout(d,E)}function T(d){if(_)return window.cancelAnimationFrame(d);clearTimeout(d)}function P(d){return l=d,u=x(B,e),g?w(d):a}function k(d){const E=d-c,L=d-l,I=e-E;return p?Math.min(I,s-L):I}function q(d){const E=d-c,L=d-l;return c===void 0||E>=e||E<0||p&&L>=s}function B(){const d=Date.now();if(q(d))return H(d);u=x(B,k(d))}function H(d){return u=void 0,y&&r?w(d):(r=i=void 0,a)}function X(...d){const E=Date.now(),L=q(E);if(r=d,i=this,c=E,L){if(u===void 0)return P(c);if(p)return u=x(B,e),w(c)}return u===void 0&&(u=x(B,e)),a}return X.cancel=()=>{u!==void 0&&T(u),l=0,r=c=i=u=void 0},X.flush=()=>u===void 0?a:H(Date.now()),X.pending=()=>u!==void 0,X}const vI=(t,e)=>(e=Sc(e,2),tI(t,(n,r,i)=>(i=e(r),hasOwnProperty.call(n,i)?n[i].push(r):Ea(n,i,[r]),n),{})),Zh=(t,e=[])=>{if(t==null)return[];const n=e.length;return n>1&&bc(t,e[0],e[1])?e=[]:n>2&&bc(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[Sc(e,2)]),GM(t,e.flat(1),[])},mI=t=>(t==null?0:t.length)?tx(t,1/0):[],ix=(t,...e)=>Er(t)?$1(t,e):[],yI=(t,...e)=>Wr(t)&&Er(t)?$1(t,e.flat(1)):[],Jh=(...t)=>{const e=t.flat(1);return Mo(e)},Mi=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},nn=(t,e,n)=>{e=ss(e,t);let r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){let s=t==null?void 0:t[as(e[r])];s===void 0&&(r=i,s=n),t=typeof s=="function"?s.call(t):s}return t},Vs=(t,...e)=>{let n={};if(t==null)return n;let r=!1;e=e.flat(1).map(s=>(s=ss(s,t),r||(r=s.length>1),s)),Co(t,z1(t),n),r&&(n=Ca(n,!0,!0,!0,s=>en(s)?void 0:s));let i=e.length;for(;i--;)IM(n,e[i]);return n},bI=(t,...e)=>t==null?{}:nI(t,e.flat(1/0)),Lr=(t,e=n=>n)=>{let n=-1;const r=Object(t),i=Er(t)?q1(t,!0):j1(t);let s=i.length;for(;s--;){const a=i[++n];if(e(r[a],a,r)===!1)break}},_I=(t="")=>cI(`${t}`.replace(/['\u2019]/g,"")).reduce((e,n,r)=>(n=n.toLowerCase(),e+(r?lI(n):n)),"");let wI=0;const xI=(t="")=>{const e=++wI;return`${t}`+e},cn=Y1((t,e,n,r)=>{Wh(t,e,n,r)},!0),Xr=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,is.classNamePrefix.length)!==is.classNamePrefix&&(e=is.classNamePrefix+e),e}).join(" ")},AI=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,is.classNamePrefix.length)===is.classNamePrefix&&(e=e.substr(is.classNamePrefix.length)),e}).join(" ")},Tc=function(t,e){const n={},r={},i=xt.namespace.svg,s=e||i,a=document.createDocumentFragment(),u=function(c,l,g){for(let p=0;p<c.length;p++){const y=c[p];if(typeof y=="string"){const B=document.createTextNode(y);l.appendChild(B);continue}if(!y.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const _=y.tagName;let w;y.hasOwnProperty("namespaceURI")&&(g=y.namespaceURI),w=document.createElementNS(g,_);const x=g===i,T=x?xt:se,P=y.attributes;P&&T(w).attr(P);const k=y.style;if(k&&se(w).css(k),y.hasOwnProperty("className")){const B=y.className;x?w.className.baseVal=B:w.className=B}if(y.hasOwnProperty("textContent")&&(w.textContent=y.textContent),y.hasOwnProperty("selector")){const B=y.selector;if(n[B])throw new Error("json-dom-parser: selector must be unique");n[B]=w,T(w).attr("joint-selector",B)}if(y.hasOwnProperty("groupSelector")){let B=y.groupSelector;Array.isArray(B)||(B=[B]);for(let H=0;H<B.length;H++){const X=B[H];let d=r[X];d||(d=r[X]=[]),d.push(w)}}l.appendChild(w);const q=y.children;Array.isArray(q)&&u(q,w,g)}};return u(t,a,s),{fragment:a,selectors:n,groupSelectors:r}},Ec=function(t){let e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return e},Io=function(t,e,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),i,s=0,a=r.length;s<a;)if(i=r[s++],Object(t)===t&&i in t)t=t[i];else return;return t},sx=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},Qh=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),s=i.length-1;let a=t,u=0;for(;u<s;u++){const c=i[u];if(!sx(a,c))return t;a=a[c]||(a[c]={})}return a[i[s]]=n,t},ax=function(t,e,n){const r=Array.isArray(e)?e:e.split(n),i=r.length-1;let s=t,a=0;for(;a<i;a++){const u=r[a];if(!sx(s,u))return t;const c=s[u];if(!c)return t;s=c}return delete s[r[i]],t},SI=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})},Oa=function(t){return Oa.id=Oa.id||1,t===void 0?"j_"+Oa.id++:(t.id=t.id===void 0?"j_"+Oa.id++:t.id,t.id)},TI=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},rn=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let i in r)t[i]===void 0&&(t[i]=r[i]);if(n){const i=n.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},EI=function(t){let i=0,s=0,a=0,u=0;return"detail"in t&&(s=t.detail),"wheelDelta"in t&&(s=-t.wheelDelta/120),"wheelDeltaY"in t&&(s=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=s,s=0),a="deltaX"in t?t.deltaX:i*10,u="deltaY"in t?t.deltaY:s*10,(a||u)&&t.deltaMode&&(t.deltaMode==1?(a*=40,u*=40):(a*=800,u*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(a=u,u=0,i=s,s=0),a&&!i&&(i=a<1?-1:1),u&&!s&&(s=u<1?-1:1),{spinX:i,spinY:s,deltaX:a,deltaY:u}},PI=function(t,e){return t>e?e:t<-50?-50:t},td=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=new Date().getTime(),i=Math.max(0,16-(r-e)),s=setTimeout(function(){n(r+i)},i);return e=r+i,s}}return function(n,r,...i){return t(r!==void 0?n.bind(r,...i):n)}}(),ed=function(){var t,e=typeof window<"u";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),Tn=function(t){return On(t)&&t.slice(-1)==="%"},CI=function(t,e){function n(u){var c=new RegExp("(?:\\d+(?:\\.\\d+)*)("+u+")$").exec(t);return c?c[1]:null}var r=parseFloat(t);if(Number.isNaN(r))return null;var i={};i.value=r;var s;if(e==null)s="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;s=e.join("|")}else On(e)&&(s=e);var a=n(s);return a===null?null:(i.unit=a,i)},No=0;function LI(t,e){const n=t.split(e);let r=1;for(let i=0,s=n.length-1;i<s;i++){const a=[];(i>0||n[0]!=="")&&a.push(No),a.push(e),(i<s-1||n[s]!=="")&&a.push(No),n.splice(r,0,...a),r+=a.length+1}return n.filter(i=>i!=="")}function ox(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const ux=function(t,e,n={},r={}){var i=e.width,s=e.height,a=r.svgDocument||xt("svg").node,u=xt("tspan").node,c=xt("text").attr(n).append(u).node,l=document.createTextNode("");c.style.opacity=0,c.style.display="block",u.style.display="block",u.appendChild(l),a.appendChild(c),r.svgDocument||document.body.appendChild(a);const g=r.preserveSpaces,p=" ",y=r.separator||r.separator===""?r.separator:p,_=typeof y=="string"?y:p;var w=r.eol||`
`,x=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,T=r.maxLineCount;Qn(T)||(T=1/0);var P=t.split(y),k=[],q=[],B,H,X;g&&xt(u).attr("xml:space","preserve");for(var d=0,E=0,L=P.length;d<L;d++){var I=P[d];if(!(!I&&!g)&&typeof I=="string"){var G=!1;if(I.indexOf(w)>=0)if(I.length>1){const Xt=LI(P[d],w);P.splice(d,1,...Xt),d--,L=P.length;continue}else{if(g&&typeof P[d-1]=="string"){P.splice(d,No,"",No),L+=2,d--;continue}q[++E]=!g||typeof P[d+1]=="string"?"":void 0,G=!0}if(!G){let Xt;if(g?Xt=q[E]!==void 0?q[E]+_+I:I:Xt=q[E]?q[E]+_+I:I,l.data=Xt,u.getComputedTextLength()<=i)q[E]=Xt,(B||H)&&(k[E++]=!0,B=0,H=0);else{if(!q[E]||B){var K=!!B;if(B=I.length-1,K||!B){if(!B){if(!q[E]){q=[];break}P.splice(d,2,I+P[d+1]),L--,k[E++]=!0,d--;continue}P[d]=I.substring(0,B);const Ft=P[d+1];P[d+1]=I.substring(B)+(Ft===void 0||Ft===No?"":Ft)}else{if(H)P.splice(d,2,P[d]+P[d+1]),H=0;else{var Y=I.search(x);Y>-1&&Y!==I.length-1&&Y!==0&&(H=Y+1,B=0),P.splice(d,1,I.substring(0,H||B),I.substring(H||B)),L++}E&&!k[E-1]&&E--}(!g||q[E]!=="")&&d--;continue}E++,d--}}var pt=null;if(q.length>T)pt=T-1;else if(s!==void 0){if(X===void 0&&l.data!=="")if(n.lineHeight==="auto")X=ox({value:1.5,unit:"em"},c);else{const Xt=CI(n.lineHeight,["em","px",""]);X=ox(Xt,c)}X*q.length>s&&(pt=Math.floor(s/X)-1)}if(pt!==null){q.splice(pt+1);var Tt=r.ellipsis;if(!Tt||pt<0)break;typeof Tt!="string"&&(Tt="…");var at=q[pt];if(!at&&!G)break;var ft=at.length,lt,dt;do{if(dt=at[ft],lt=at.substring(0,ft),dt?dt.match(y)&&(lt+=dt):lt+=_,lt+=Tt,l.data=lt,u.getComputedTextLength()<=i){q[pt]=lt;break}ft--}while(ft>=0);break}}}return r.svgDocument?a.removeChild(c):document.body.removeChild(a),q.join(w)},RI=function(t){var e=se(se.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;se.each(n.attributes,function(){var r=this,i=r.name,s=r.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&se(n).removeAttr(i)})}),e.html()},OI=function(t,e){var n=se(t),r=n.map(function(){var i=this,s=i.parentNode,a=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,a),s.removeChild(a)}});return Array.prototype.sort.call(n,e).each(function(i){r[i].call(this)})},zs=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,s;return n=r=i=s=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=s=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(s=+t.left),{top:n,right:r,bottom:i,left:s}},kI={linear:function(t){return t}},cx={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var i,s,a={};for(i=n.length-1;i!=-1;i--)s=n[i],a[s]=t[s]+(e[s]-t[s])*r;return a}}},MI={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return Fn(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return Fn(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Fn('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Fn(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fn('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fn('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fn('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Fn('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fn('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Fn('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Fn('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Fn=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(c){return!!c}),a=s.split("."),u=n[a.shift()];u!==void 0&&a.length;)u=u[a.shift()];return u!==void 0?u:""})}},Do=function(){};function fx(t){t=Mo(t);const e=Ce(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return Ce(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const a=r.source(),u=r.target();a.id&&e[a.id]&&r.prop("source/id",e[a.id].id),u.id&&e[u.id]&&r.prop("target/id",e[u.id].id)}const i=n.get("parent");i&&e[i]&&r.set("parent",e[i].id);const s=Ce(n.get("embeds")).reduce(function(a,u){return e[u]&&a.push(e[u].id),a},[]);ki(s)||r.set("embeds",s)}),e}const II=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"].reduce((t,e)=>(t[e]=!0,t),{}),NI={qualify:function(t){return en(t)},set:function(t,e,n){Object.keys(t).forEach(function(r){if(II[r]&&r in n){const i=t[r];n.tagName==="SELECT"&&Array.isArray(i)?Array.from(n.options).forEach(function(s,a){s.selected=i.includes(s.value)}):n[r]=i}})}};function os(t,e){return function(n,r){var i=Tn(n);n=parseFloat(n),i&&(n/=100);var s={};if(isFinite(n)){var a=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);s[t]=a}return s}}function Pc(t,e,n){return function(r,i){var s=Tn(r);r=parseFloat(r),s&&(r/=100);var a;if(isFinite(r)){var u=i[n]();s||r>0&&r<1?a=u[t]+i[e]*r:a=u[t]+r}var c=Q();return c[t]=a||0,c}}function lx(t,e,n){return function(r,i){var s;r==="middle"?s=i[e]/2:r===n?s=i[e]:isFinite(r)?s=r>-1&&r<1?-i[e]*r:-r:Tn(r)?s=i[e]*parseFloat(r)/100:s=0;var a=Q();return a[t]=-(i[t]+s),a}}function hx(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(i,s,a){var u=se(a),c=u.data(n);if(!c||c.value!==i){var l=t(i);c={value:i,shape:l,shapeBBox:l.bbox()},u.data(n,c)}var g=c.shape.clone(),p=c.shapeBBox.clone(),y=p.origin(),_=s.origin();p.x=_.x,p.y=_.y;var w=s.maxRectScaleToFit(p,_),x=p.width===0||s.width===0?1:w.sx,T=p.height===0||s.height===0?1:w.sy;return g.scale(x,T,y),r&&g.translate(-y.x,-y.y),g}}function dx(t){function e(r){return new jt(xt.normalizePathData(r))}var n=hx(e,t);return function(r,i,s){var a=n(r,i,s);return{d:a.serialize()}}}function px(t){var e=hx(ze,t);return function(n,r,i){var s=e(n,r,i);return{points:s.serialize()}}}function Cc(t,e){var n=new Q(1,0);return function(r){var i,s,a=this[t](r);return a?(s=e.rotate?a.vector().vectorAngle(n):0,i=a.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function gx(t){return function(n,r,i){const s=xt(i);s.attr(t)!==n&&s.attr(t,n)}}function ka(t,e,n){return n.text!==void 0}function qo(){return this.model.isLink()}function nd(t){var e={},n=t.stroke;typeof n=="string"&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return r===void 0&&(r=t["stroke-opacity"]),r===void 0&&(r=t.opacity),r!==void 0&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function vx(t){const{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}const ce={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:gx("href")},xlinkHref:{set:gx("xlink:href")},filter:{qualify:en,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:en,set:vx},stroke:{qualify:en,set:vx},sourceMarker:{qualify:en,set:function(t,e,n,r){return t=Jt(nd(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:en,set:function(t,e,n,r){return t=Jt(nd(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:en,set:function(t,e,n,r){return t=Jt(nd(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!en(n.textWrap)},set:function(t,e,n,r){const i=se(n),s="joint-text",a=i.data(s),{lineHeight:u,annotations:c,textVerticalAnchor:l,eol:g,displayEmpty:p}=r;let y=r.textPath,_=r.x;xr(_)&&(_=Ar(_,e));let w=r["font-size"]||r.fontSize;xr(w)&&(w=Ar(w,e));const x=JSON.stringify([t,u,c,l,g,p,y,_,w]);if(a===void 0||a!==x){if(w&&n.setAttribute("font-size",w),Me(y)){const T=y.selector;if(typeof T=="string"){const[P]=this.findBySelector(T);P instanceof SVGPathElement&&(y=Jt({"xlink:href":"#"+P.id},y))}}xt(n).text(""+t,{lineHeight:u,annotations:c,textPath:y,x:_,textVerticalAnchor:l,eol:g,displayEmpty:p}),i.data(s,x)}}},textWrap:{qualify:en,set:function(t,e,n,r){var i={},s=t.width||0;Tn(s)?i.width=e.width*parseFloat(s)/100:xr(s)?i.width=Number(Ar(s,e)):t.width===null?i.width=1/0:s<=0?i.width=e.width+s:i.width=s;var a=t.height||0;Tn(a)?i.height=e.height*parseFloat(a)/100:xr(a)?i.height=Number(Ar(a,e)):t.height===null||(a<=0?i.height=e.height+a:i.height=a);var u,c=t.text;if(c===void 0&&(c=r.text),c!==void 0){const l=t.breakText||ux,g=r["font-size"]||r.fontSize;u=l(""+c,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":xr(g)?Ar(g,e):g,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else u="";ce.text.set.call(this,u,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=se(n),i="joint-title",s=r.data(i);if(s===void 0||s!==t){if(r.data(i,t),n.tagName==="title"){n.textContent=t;return}var a=n.firstElementChild;if(a&&a.tagName==="title")a.textContent=t;else{var u=document.createElementNS(n.namespaceURI,"title");u.textContent=t,n.insertBefore(u,a)}}}},lineHeight:{qualify:ka},textVerticalAnchor:{qualify:ka},textPath:{qualify:ka},annotations:{qualify:ka},eol:{qualify:ka},displayEmpty:{qualify:ka},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:en,set:function(t,e,n){se(n).css(t)}},html:{set:function(t,e,n){se(n).html(t+"")}},props:NI,ref:{},refX:{position:Pc("x","width","origin")},refY:{position:Pc("y","height","origin")},refDx:{position:Pc("x","width","corner")},refDy:{position:Pc("y","height","corner")},refWidth:{set:os("width","width")},refHeight:{set:os("height","height")},refRx:{set:os("rx","width")},refRy:{set:os("ry","height")},refRInscribed:{set:function(t){var e=os(t,"width"),n=os(t,"height");return function(r,i){var s=i.height>i.width?e:n;return s(r,i)}}("r")},refRCircumscribed:{set:function(t,e){var n=Tn(t);t=parseFloat(t),n&&(t/=100);var r=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(n||t>=0&&t<=1?i=t*r:i=Math.max(t+r,0)),{r:i}}},refCx:{set:os("cx","width")},refCy:{set:os("cy","height")},xAlignment:{offset:lx("x","width","right")},yAlignment:{offset:lx("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:dx({resetOffset:!0})},refDKeepOffset:{set:dx({resetOffset:!1})},refPointsResetOffset:{set:px({resetOffset:!0})},refPointsKeepOffset:{set:px({resetOffset:!1})},connection:{qualify:qo,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let n;t<0?n=(this.getConnectionLength()+t)/2:n=t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),s=r.divideAtLength(n,{segmentSubdivisions:i}),a=r.divideAtLength(-n,{segmentSubdivisions:i});s&&a&&(e=`${s[0].serialize()} ${a[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:qo,set:Cc("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:qo,set:Cc("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:qo,set:Cc("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:qo,set:Cc("getTangentAtRatio",{rotate:!1})}};ce["xlink:href"]=ce.xlinkHref,["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{ce[t]={qualify:xr,set:function(n,r){return{[t]:Ar(n,r)}}}}),["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{ce[t]={qualify:xr,set:function(n,r){return{[t]:Math.max(0,Ar(n,r))}}}}),ce.refR=ce.refRInscribed,ce.refD=ce.refDResetOffset,ce.refPoints=ce.refPointsResetOffset,ce.atConnectionLength=ce.atConnectionLengthKeepGradient,ce.atConnectionRatio=ce.atConnectionRatioKeepGradient,ce.fontSize=ce["font-size"],ce.strokeWidth=ce["stroke-width"],ce.refX2=ce.refX,ce.refY2=ce.refY,ce.refWidth2=ce.refWidth,ce.refHeight2=ce.refHeight,ce["ref-x"]=ce.refX,ce["ref-y"]=ce.refY,ce["ref-dy"]=ce.refDy,ce["ref-dx"]=ce.refDx,ce["ref-width"]=ce.refWidth,ce["ref-height"]=ce.refHeight,ce["x-alignment"]=ce.xAlignment,ce["y-alignment"]=ce.yAlignment;const mx=ce,fi=Rn.Model.extend({constructor:function(t,e){var n,r=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=xI("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=nn(this,"defaults"))&&(r=cn({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=nn(this.constructor.prototype,"defaults").attrs||{},n=this.attributes.attrs,r={};Lr(n,function(s,a){const u=e[a];Lr(s,function(c,l){Me(c)&&!Array.isArray(c)?Lr(c,function(g,p){(!u||!u[l]||!Ra(u[l][p],g))&&(r[a]=r[a]||{},(r[a][l]||(r[a][l]={}))[p]=g)}):(!u||!Ra(u[l],c))&&(r[a]=r[a]||{},r[a][l]=c)})});const i=Cr(Vs(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(t){const e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return SI()},processPorts:function(){var t=this.ports,e={};Lr(this.get("attrs"),function(s,a){s&&s.port&&(s.port.id!==void 0?e[s.port.id]=s.port:e[s.port]={id:s.port})});var n={};if(Lr(t,function(s,a){e[a]||(n[a]=!0)}),this.graph&&!ki(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});r.forEach(function(s){n[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){n[s.get("source").port]&&s.remove()})}this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let s=0,a=i.length;s<a;s++){const u=i[s];u&&u.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=dr(t||{},{foregroundEmbeds:!0});let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];const r=t.foregroundEmbeds?n:Zh(n,c=>c.z());let s=e.maxZIndex()-n.length+1;const a=e.get("cells");let u=a.indexOf(r[0])!==a.length-n.length;u||(u=r.some(function(c,l){return c.z()!==s+l})),u&&(this.startBatch("to-front"),s=s+n.length,r.forEach(function(c,l){c.set("z",s+l,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=dr(t||{},{foregroundEmbeds:!0});let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),r.unshift(this)):r=[this];const i=t.foregroundEmbeds?r:Zh(r,u=>u.z());let s=e.minZIndex();var n=e.get("cells");let a=n.indexOf(i[0])!==0;a||(a=i.some(function(u,c){return u.z()!==s+c})),a&&(this.startBatch("to-back"),s-=r.length,i.forEach(function(u,c){u.set("z",s+c,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Jt([],this.get("embeds"));t.forEach(i=>{r[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",Mo(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",ix(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);const e=this.get("embeds");if(ki(e))return[];let n=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(n=Zh(n,r=>r.z())),n},_getEmbeddedCellsBfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.shift();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});n.push(...i)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.pop();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});for(let s=i.length-1;s>=0;--s)n.push(i[s])}return e.shift(),e},isEmbeddedIn:function(t,e){var n=On(t)?t:t.id,r=this.parent();if(e=Jt({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}else return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return Ce(fx([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Rn.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",i=On(t);if(i||Array.isArray(t))if(arguments.length>1){var s,a;i?(s=t,a=s.split("/")):(s=t.join(r),a=t.slice());var u=a[0],c=a.length;const q=n||{};q.propertyPath=s,q.propertyValue=e,q.propertyPathArray=a,"rewrite"in q||(q.rewrite=!1);for(var l={},g=l,p=u,y=1;y<c;y++){var _=a[y],w=Number.isFinite(i?Number(_):_);g=g[p]=w?[]:{},p=_}l=Qh(l,a,e,"/");var x=cn({},this.attributes);q.rewrite&&ax(x,s,"/");var T=cn(x,l);return this.set(u,T[u],q)}else return Io(this.attributes,t,r);const P=e||{};P.propertyPath=null,P.propertyValue=t,P.propertyPathArray=[],"rewrite"in P||(P.rewrite=!1);const k={};for(const q in t){const{changedValue:B}=cn({},{changedValue:this.attributes[q]},{changedValue:t[q]});k[q]=B}return this.set(k,P)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(r==="attrs"&&(e.dirty=!0),n.length===1)return this.unset(t,e);var i=n.slice(1),s=this.get(r);return s==null?this:(s=Cr(s),ax(s,i,"/"),this.set(r,s,e))},attr:function(t,e,n){var r=Array.from(arguments);return r.length===0?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):On(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var i={duration:100,delay:10,timingFunction:kI.linear,valueFunction:cx.number};n=Jt(i,n);var s=0,a,u=(function(p){var y,_,w;s=s||p,p-=s,_=p/n.duration,_<1?this._transitionIds[t]=y=td(u):(_=1,delete this._transitionIds[t]),w=a(n.timingFunction(_)),n.transitionId=y,this.prop(t,w,n),y||this.trigger("transition:end",this,t)}).bind(this);const{_scheduledTransitionIds:c}=this;let l;var g=p=>{c[t]&&(c[t]=ix(c[t],l),c[t].length===0&&delete c[t]),this.stopPendingTransitions(t,r),a=n.valueFunction(Io(this.attributes,t,r),e),this._transitionIds[t]=td(p),this.trigger("transition:start",this,t)};return l=setTimeout(g,n.delay,u),c[t]||(c[t]=[]),c[t].push(l),l},getTransitions:function(){return Jh(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(s=>Ra(i,s.split(e).slice(0,i.length)))}return r.forEach(i=>{n[i].forEach(a=>clearTimeout(a)),delete n[i]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(s=>Ra(i,s.split(e).slice(0,i.length)))}r.forEach(i=>{const s=n[i];ed(s),delete n[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Jt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Jt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new Q(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new Q},getBBox:function(){return new It(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new Q(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=mx;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Jt({defaults:Kh({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return typeof joint<"u"&&Mi(joint,"shapes")&&Qh(joint.shapes,t,i,"."),i}}),DI=function(t,e,n){if(On(n)){if(!rd[n])throw new Error('Unknown wrapper: "'+n+'"');n=rd[n]}if(!Ge(n))throw new Error("Wrapper must be a function.");Ce(e).forEach(function(r){t[r]=n(t[r])})},rd={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof fi?r=e:r instanceof fi&&(e.length>1&&e.pop(),r=e)),i instanceof fi&&(i={}),t.call(this,r,i)}}},Qe={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function yx(t,e){const n=new It(t);switch(e){case void 0:throw new Error("Position required");case Qe.LEFT:case"leftMiddle":return n.leftMiddle();case Qe.RIGHT:case"rightMiddle":return n.rightMiddle();case Qe.TOP:case"topMiddle":return n.topMiddle();case Qe.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Qe.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Qe.TOP_RIGHT:case"topRight":return n.topRight();case Qe.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Qe.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Qe.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}function bx(t,e,n){var r=t.toJSON();return r.angle=e||0,dr({},n,r)}function Bo(t,e,n,r){return t.map(function(i,s,a){var u=this.pointAt((s+.5)/a.length);return(i.dx||i.dy)&&u.offset(i.dx||0,i.dy||0),bx(u.round(),0,id(r,i))},Os(e,n))}function _x(t,e,n,r){var i=e.center(),s=e.width/e.height,a=e.topMiddle(),u=qn.fromRect(e);return t.map(function(c,l,g){var p=n+r(l,g.length),y=a.clone().rotate(i,-p).scale(s,1,i),_=c.compensateRotation?-u.tangentTheta(y):0;return(c.dx||c.dy)&&y.offset(c.dx||0,c.dy||0),c.dr&&y.move(i,c.dr),bx(y.round(),_,id(e,c))})}function id(t,e){let{x:n,y:r,angle:i}=e;return Tn(n)?n=parseFloat(n)/100*t.width:xr(n)&&(n=Number(Ar(n,t))),Tn(r)?r=parseFloat(r)/100*t.height:xr(r)&&(r=Number(Ar(r,t))),{x:n,y:r,angle:i}}function sd(t,e){const{x:n,y:r}=id(t,e);return new Q(n||0,r||0)}var qI=Object.freeze({__proto__:null,absolute:function(t,e){return t.map(n=>{const r=sd(e,n).round().toJSON();return r.angle=n.angle||0,r})},bottom:function(t,e,n){return Bo(t,e.bottomLeft(),e.corner(),e)},ellipse:function(t,e,n){var r=n.startAngle||0,i=n.step||20;return _x(t,e,r,function(s,a){return(s+.5-a/2)*i})},ellipseSpread:function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return _x(t,e,r,function(s){return s*i})},fn:function(t,e,n){return n.fn(t,e,n)},left:function(t,e,n){return Bo(t,e.origin(),e.bottomLeft(),e)},line:function(t,e,n){var r=sd(e,n.start||e.origin()),i=sd(e,n.end||e.corner());return Bo(t,r,i,e)},right:function(t,e,n){return Bo(t,e.topRight(),e.corner(),e)},top:function(t,e,n){return Bo(t,e.origin(),e.topRight(),e)}});function us(t,e){return Kh({},t,e,{x:0,y:0,angle:0,attrs:{}})}function wx(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner()),s=e.theta(t.topRight());return[n,s,i,r]}function xx(t,e,n,r){r=dr({},r,{offset:15});var i=e.center().theta(t),s,a,u,c,l=r.offset,g=0;const[p,y,_,w]=wx(e);i<y||i>_?(u=".3em",s=l,a=0,c="start"):i<p?(s=0,a=-l,n?(g=-90,c="start",u=".3em"):(c="middle",u="0")):i<w?(u=".3em",s=-l,a=0,c="end"):(s=0,a=l,n?(g=90,c="start",u=".3em"):(c="middle",u=".6em"));var x=Math.round;return us(r,{x:x(s),y:x(a),angle:g,attrs:{labelText:{y:u,textAnchor:c}}})}function Ax(t,e,n,r){r=dr({},r,{offset:15});var i=e.center().theta(t),s,a,u,c,l=r.offset,g=0;const[p,y,_,w]=wx(e);i<y||i>_?(u=".3em",s=-l,a=0,c="end"):i<p?(s=0,a=l,n?(g=90,c="start",u=".3em"):(c="middle",u=".6em")):i<w?(u=".3em",s=l,a=0,c="start"):(s=0,a=-l,n?(g=-90,c="start",u=".3em"):(c="middle",u="0"));var x=Math.round;return us(r,{x:x(s),y:x(a),angle:g,attrs:{labelText:{y:u,textAnchor:c}}})}function Sx(t,e,n){n=dr({},n,{offset:20});var r=Uu(0,0),i=-t.theta(r),s=i,a=t.clone().move(r,n.offset).difference(t).round(),u=".3em",c;(i+90)%180===0?(c=e?"end":"middle",!e&&i===-270&&(u="0em")):i>-270&&i<-90?(c="start",s=i-180):c="end";var l=Math.round;return us(n,{x:l(a.x),y:l(a.y),angle:e?s:0,attrs:{labelText:{y:u,textAnchor:c}}})}var BI=Object.freeze({__proto__:null,bottom:function(t,e,n){return us(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},inside:function(t,e,n){return Ax(t,e,!1,n)},insideOriented:function(t,e,n){return Ax(t,e,!0,n)},left:function(t,e,n){return us(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},manual:function(t,e,n){return us(n)},outside:function(t,e,n){return xx(t,e,!1,n)},outsideOriented:function(t,e,n){return xx(t,e,!0,n)},radial:function(t,e,n){return Sx(t.difference(e.center()),!1,n)},radialOriented:function(t,e,n){return Sx(t.difference(e.center()),!0,n)},right:function(t,e,n){return us(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},top:function(t,e,n){return us(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})}});const Ma=fi.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){if(t===void 0)return ci(this.get("source"));var r,i,s=t instanceof fi;if(s)return r=ci(e)||{},r.id=t.id,i=n,this.set("source",r,i);var a=!en(t);return a?(r=ci(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("source",r,i)):(r=t,i=e,this.set("source",r,i))},target:function(t,e,n){if(t===void 0)return ci(this.get("target"));var r,i,s=t instanceof fi;if(s)return r=ci(e)||{},r.id=t.id,i=n,this.set("target",r,i);var a=!en(t);return a?(r=ci(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("target",r,i)):(r=t,i=e,this.set("target",r,i))},router:function(t,e,n){if(t===void 0){var r=this.get("router");return r?typeof r=="object"?ci(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",s=i?t:{name:t,args:e},a=i?e:n;return this.set("router",s,a)},connector:function(t,e,n){if(t===void 0){var r=this.get("connector");return r?typeof r=="object"?ci(r):r:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",s=i?t:{name:t,args:e},a=i?e:n;return this.set("connector",s,a)},label:function(t,e,n){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],s=this._normalizeVertex(i);n.push(s)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var s=this._normalizeVertex(e);return r.splice(t,0,s),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){var e=!en(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(i){return Q(i).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!Ge(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var s=this.vertices();return s.length>0&&(n.vertices=s.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new Q(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new Q(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(Q),this.getTargetPoint()];return new ze(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(n===r||n.isEmbeddedIn(r)?e=r:r.isEmbeddedIn(n)?e=n:e=this.graph.getCommonAncestor(n,r)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var s=r===i;if(!s&&t.deep&&this.graph){var a=this.getSourceCell(),u=this.getTargetCell();s=a.isEmbeddedIn(u)||u.isEmbeddedIn(a)}return s},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=On(t)||Qn(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}});var Tx=function(t){var e=Cr(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=qI,this.portLabelLayoutNamespace=BI,this._init(e)};Tx.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},s=i.name,a=this.portLayoutNamespace;a[s]||(s="left");var u=i.args||{},c=r.map(function(p){return p&&p.position&&p.position.args}),l=a[s](c,e,u),g={ports:r,result:[]};return Ce(l).reduce((function(p,y,_){var w=p.ports[_];return p.result.push({portId:w.id,portTransformation:y,labelTransformation:this._getPortLabelLayout(w,Q(y),e),portAttrs:w.attrs,portSize:w.size,labelSize:w.label.size}),p}).bind(this),g),g.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(Me(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var s=Ce(t.items),a=0,u=s.length;a<u;a++)this.ports.push(this._evaluatePort(s[a]))},_evaluateGroup:function(t){return cn(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Jt({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=cn({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=cn({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Jt({},n.size,e.size),e},_getZIndex:function(t,e){return Qn(e.z)?e.z:Qn(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return cn({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n={},r;Ge(t)?(r="fn",n.fn=t):On(t)?r=t:t===void 0?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):Me(t)&&(r=t.name,Jt(n,t.args));var i={args:n};return r&&(i.name=r),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const FI={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Ce(t.items).forEach(function(u){e[u.id]=!0});var n=this.previous("ports")||{},r={};Ce(n.items).forEach(function(u){e[u.id]||(r[u.id]=!0)});var i=this.graph;if(i&&!ki(r)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(u){r[u.get("target").port]&&u.remove()});var a=i.getConnectedLinks(this,{outbound:!0});a.forEach(function(u){r[u.get("source").port]&&u.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return Cr(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=Ce(this.prop(["ports","items"])).filter(n=>n.group===t);return Cr(e)},getPort:function(t){return Cr(Ce(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,It(this.size()));return e.reduce(function(n,r){var i=r.portTransformation;return n[r.portId]={x:i.x,y:i.y,angle:i.angle},n},{})},getPortIndex:function(t){var e=Me(t)?t.id:t;return this._isValidPortId(e)?Ce(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!Me(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Jt([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r=typeof t=="number"?t:this.getPortIndex(t);if(!Me(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Jt([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?s[0]=["ports","items",i].concat(e):On(e)?s[0]=["ports/items/",i,"/",e].join(""):(s=["ports/items/"+i],en(e)&&(s.push(e),s.push(n))),this.prop.apply(this,s)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var n=Ce(t.items);return n.forEach(function(r){typeof r!="object"&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),Mo(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!Me(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Jt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(r!==-1){const i=Jt([],this.prop(["ports","items"]));i.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},t.length===0)return this.this;r=Jt([],this.prop(["ports","items"])).filter(function(s){return!t.some(function(a){const u=Me(a)?a.id:a;return s.id===u})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new Tx(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(s){if(!e.find(function(a){return a.id===s.id}))return s}),i=e.filter(function(s){if(!n.find(function(a){return a.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},VI={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i=vI(this.model._portSettingsData.getPorts(),"z"),s="auto";Ce(i[s]).forEach(function(g){var p=this._getPortElement(g);e.append(p),t.push(p)},this);for(var a=Object.keys(i),u=0;u<a.length;u++){var c=a[u];if(c!==s){var l=parseInt(c,10);this._appendPorts(i[c],l,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=Ce(t).map(this._getPortElement,this);n[e]||e<0?xt(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;if(!e)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[s=null]=this.findBySelector(e,r,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){jr(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var s=xt(this.portContainerMarkup).addClass("joint-port"),a=this._getPortMarkup(t);if(Array.isArray(a)){var u=this.parseDOMJSON(a,s.node),c=u.fragment;c.childNodes.length>1?e=xt("g").append(c):e=xt(c.firstChild),i=u.selectors}else e=xt(a),Array.isArray(e)&&(e=xt("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const l=this._getPortLabelMarkup(t.label);if(Array.isArray(l)){const{fragment:x,selectors:T}=this.parseDOMJSON(l,s.node),P=x.childNodes.length;P>0&&(r=T,n=P===1?xt(x.firstChild):xt("g").append(x))}else n=xt(l),Array.isArray(n)&&(n=xt("g").append(n));var g;if(i&&r){for(var p in r)if(i[p]&&p!==this.selector)throw new Error("ElementView: selectors within port must be unique.");g=Jt({},i,r)}else g=i||r||{};const y="portRoot",_="labelRoot",w="labelText";if(y in g||(g[y]=e.node),n){const x=n.node;if(_ in g||(g[_]=x),!(w in g)){const T=n.tagName()==="TEXT"?x:Array.from(x.querySelectorAll("text"));g[w]=T,r||(r={}),r[w]=T}}return s.append(e.addClass("joint-port-body")),n&&s.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:s,portLabelElement:n,portSelectors:g,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},s},_updatePortGroup:function(t){for(var e=It(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var s=n[r],a=s.portId,u=this._portElementsCache[a]||{},c=s.portTransformation,l=s.labelTransformation;l&&u.portLabelElement&&(this.updateDOMSubtreeAttributes(u.portLabelElement.node,l.attrs,{rootBBox:new It(s.labelSize),selectors:u.portLabelSelectors}),this.applyPortTransform(u.portLabelElement,l,-c.angle||0)),this.updateDOMSubtreeAttributes(u.portElement.node,s.portAttrs,{rootBBox:new It(s.portSize),selectors:u.portSelectors}),this.applyPortTransform(u.portElement,c)}},applyPortTransform:function(t,e,n){var r=xt.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},kn=fi.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),fi.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=Qn(e);n=(r?n:t)||{};const{parentRelative:i,deep:s,restrictedArea:a}=n;let u;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const c=this.getParentCell();c&&!c.isLink()&&(u=c.get("position"))}if(r){if(u&&(t+=u.x,e+=u.y),s||a){const{x:c,y:l}=this.get("position");this.translate(t-c,e-l,n)}else this.set("position",{x:t,y:e},n);return this}else{const c=Q(this.get("position"));return i?c.difference(u):c}},translate:function(t,e,n){if(t=t||0,e=e||0,t===0&&e===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,r.x+t,r.y+e,n);t=s.x-r.x,e=s.y-r.y}else{var a=this.getBBox({deep:!0}),u=r.x-a.x,c=r.y-a.y,l=Math.max(i.x+u,Math.min(i.x+i.width+u-a.width,r.x+t)),g=Math.max(i.y+c,Math.min(i.y+i.height+c-a.height,r.y+e));t=l-r.x,e=g-r.y}var p={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(Me(n.transition)||(n.transition={}),this.transition("position",p,Jt({},n.transition,{valueFunction:cx.object})),jr(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",p,n),jr(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return t===void 0?{width:r.width,height:r.height}:(Me(t)&&(n=e,e=Qn(t.height)?t.height:r.height,t=Qn(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width;break}var i=Hr(this.get("angle")||0),s=this.getBBox(),a;if(i){var u={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(u+=Math.floor((i+45)/90),u%=4);var c=s[["bottomLeft","corner","topRight","origin"][u]](),l=Q(c).rotate(s.center(),-i),g=Math.sqrt(t*t+e*e)/2,p=u*Math.PI/2;p+=Math.atan(u%2==0?e/t:t/e),p-=Yn(i);var y=Q.fromPolar(g,p,l);a=Q(y).offset(t/-2,e/-2)}else switch(a=s.topLeft(),n.direction){case"top":case"top-right":a.offset(0,s.height-e);break;case"left":case"bottom-left":a.offset(s.width-t,0);break;case"top-left":a.offset(s.width-t,s.height-e);break}this.set("size",{width:t,height:e},n),this.position(a.x,a.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return n.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&jr(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(i=>i.isElement());return r.length===0?this:(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:s,width:a,height:u}=e;const{left:c,right:l,top:g,bottom:p}=zs(t.padding);i-=c,s-=g,a+=c+l,u+=p+g;let y=new It(i,s,a,u);if(n)y=this.getBBox().union(y);else if(r){const _=this.getBBox().intersect(y);if(!_)return;y=_}this.set({position:{x:y.x,y:y.y},size:{width:y.width,height:y.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),s=this.get("size"),a=this.get("position");i.rotate(n,this.get("angle")-t);var u=i.x-s.width/2-a.x,c=i.y-s.height/2-a.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(a.x+u,a.y+c,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return Hr(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const p=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return p.push(this),e.getCellsBBox(p,t)}const{angle:s=0,position:{x:a,y:u},size:{width:c,height:l}}=n,g=new It(a,u,c,l);return i&&g.rotateAroundCenter(s),g},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var s=i.port;if(!s||!this.hasPort(s))return r;var a=this.portProp(s,["group"]),u=this.getPortsPositions(a),c=new Q(u[s]).offset(n.origin()),l=this.angle();return l&&c.rotate(r,-l),c}});Jt(kn.prototype,FI);const zI=Rn.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint<"u"&&Mi(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=t.type==="link"?Ma:Io(r,t.type,".")||kn,s=new i(t,e);return e.dry||(s.graph=n.graph),s},comparator:function(t){return t.get("z")||0}}),li=Rn.Model.extend({initialize:function(t,e){e=e||{};var n=new zI([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Rn.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Rn.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return typeof t=="object"?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=Vs(r,"cells")),Rn.Model.prototype.set.call(this,r,n)},clear:function(t){t=Jt({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do n.shift().remove(t);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Rn.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!On(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Rn.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=mI(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var n=Ce(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),jr(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var n=e.indirect,r=e.inbound,i=e.outbound;r===void 0&&i===void 0&&(r=i=!0);var s=[],a={};i&&u(this,t),r&&c(this,t);function u(p,y){if(Lr(p.getOutboundEdges(y.id),(function(w,x){if(!a[x]){var T=p.getCell(x);s.push(T),a[x]=!0,n&&(r&&c(p,T),i&&u(p,T))}}).bind(p)),n&&y.isLink()){var _=y.getTargetCell();_&&_.isLink()&&(a[_.id]||(s.push(_),u(p,_)))}}function c(p,y){if(Lr(p.getInboundEdges(y.id),(function(w,x){if(!a[x]){var T=p.getCell(x);s.push(T),a[x]=!0,n&&(r&&c(p,T),i&&u(p,T))}}).bind(p)),n&&y.isLink()){var _=y.getSourceCell();_&&_.isLink()&&(a[_.id]||(s.push(_),c(p,_)))}}if(e.deep){var l=t.getEmbeddedCells({deep:!0}),g={};l.forEach(function(p){p.isElement()&&(g[p.id]=!0)}),l.forEach(function(p){p.isLink()||(i&&Lr(this.getOutboundEdges(p.id),(function(y,_){if(!a[_]){var w=this.getCell(_),{source:x,target:T}=w.attributes,P=x.id,k=T.id;if(!e.includeEnclosed&&P&&g[P]&&k&&g[k])return;s.push(this.getCell(_)),a[_]=!0}}).bind(this)),r&&Lr(this.getInboundEdges(p.id),(function(y,_){if(!a[_]){var w=this.getCell(_),{source:x,target:T}=w.attributes,P=x.id,k=T.id;if(!e.includeEnclosed&&P&&g[P]&&k&&g[k])return;s.push(this.getCell(_)),a[_]=!0}}).bind(this)))},this)}return s},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;n===void 0&&r===void 0&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce((function(u,c){var{source:l,target:g}=c.attributes,p=c.hasLoop(e);if(n&&Mi(l,"id")&&!u[l.id]){var y=this.getCell(l.id);y.isElement()&&(p||y&&y!==t&&(!e.deep||!y.isEmbeddedIn(t)))&&(u[l.id]=y)}if(r&&Mi(g,"id")&&!u[g.id]){var _=this.getCell(g.id);_.isElement()&&(p||_&&_!==t&&(!e.deep||!_.isEmbeddedIn(t)))&&(u[g.id]=_)}return u}).bind(this),{});if(t.isLink()){if(n){var s=t.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(r){var a=t.getTargetCell();a&&a.isElement()&&!i[a.id]&&(i[a.id]=a)}}return Ce(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],i=n.get("parent");i;)r.push(i),i=this.getCell(i).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=Ce(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Jt({},e,{outbound:!0})),n},cloneCells:fx,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],s=[];return Ce(t).forEach(function(a){if(r[a.id]||(n.push(a),r[a.id]=a,a.isLink()?s.push(a):i.push(a)),e.deep){var u=a.getEmbeddedCells({deep:!0});u.forEach(function(c){r[c.id]||(n.push(c),r[c.id]=c,c.isLink()?s.push(c):i.push(c))})}}),s.forEach(function(a){var{source:u,target:c}=a.attributes;if(u.id&&!r[u.id]){var l=this.getCell(u.id);n.push(l),r[l.id]=l,i.push(l)}if(c.id&&!r[c.id]){var g=this.getCell(c.id);n.push(this.getCell(c.id)),r[g.id]=g,i.push(g)}},this),i.forEach(function(a){var u=this.getConnectedLinks(a,e);u.forEach(function(c){var{source:l,target:g}=c.attributes;!r[c.id]&&l.id&&r[l.id]&&g.id&&r[g.id]&&(n.push(c),r[c.id]=c)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Jt({},e,{inbound:!0})),n},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},s=[];for(s.push(t),i[t.id]=0;s.length>0;){var a=s.shift();if(r[a.id]||(r[a.id]=!0,e.call(this,a,i[a.id])===!1))continue;const u=this.getNeighbors(a,n);for(let c=0,l=u.length;c<l;c++){const g=u[c];i[g.id]=i[a.id]+1,s.push(g)}}},dfs:function(t,e,n={}){const r={},i={},s=[];for(s.push(t),i[t.id]=0;s.length>0;){const a=s.pop();if(r[a.id]||(r[a.id]=!0,e.call(this,a,i[a.id])===!1))continue;const u=this.getNeighbors(a,n),c=s.length;for(let l=0,g=u.length;l<g;l++){const p=u[l];i[p.id]=i[a.id]+1,s.splice(c,0,p)}}},getSources:function(){var t=[];return Lr(this._nodes,(function(e,n){(!this._in[n]||ki(this._in[n]))&&t.push(this.getCell(n))}).bind(this)),t},getSinks:function(){var t=[];return Lr(this._nodes,(function(e,n){(!this._out[n]||ki(this._out[n]))&&t.push(this.getCell(n))}).bind(this)),t},isSource:function(t){return!this._in[t.id]||ki(this._in[t.id])},isSink:function(t){return!this._out[t.id]||ki(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){n=n||{};var r=n.inbound,i=n.outbound;r===void 0&&i===void 0&&(r=i=!0);var s=!1;return this.getConnectedLinks(t,n).forEach(function(a){var{source:u,target:c}=a.attributes;if(r&&Mi(u,"id")&&u.id===e.id||i&&Mi(c,"id")&&c.id===e.id)return s=!0,!1}),s},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){jr(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new It(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter(s=>n[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return(n==="bbox"?this.findModelsInArea(r):this.findModelsFromPoint(yx(r,n))).filter(s=>t.id!==s.id&&!s.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return Ce(t).reduce(function(r,i){const s=i.getBBox({rotate:n});return s?r?r.union(s):s:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(i){return!i.isEmbedded()});return jr(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var s=Math.max(t/i.width,0),a=Math.max(e/i.height,0);jr(n,"scale",s,a,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Jt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Jt({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return arguments.length===0?n=Object.keys(e):Array.isArray(t)?n=t:n=[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i){var s=t.getConnectedLinks(i,{outbound:!0}),a=s.filter(function(u){var{source:c,target:l}=u.attributes;return c&&c.id===n.id&&(!c.port||c.port===n.port)&&l&&l.id===r.id&&(!l.port||l.port===r.port)});if(a.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});DI(li.prototype,["resetCells","addCells","removeCells"],rd.cells);const Gs={},Ii=Rn.View.extend({options:{},theme:null,themeClassNamePrefix:Xr("theme-"),requireSetThemeOverride:!1,defaultTheme:is.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Jt({},this.options,t),Rn.View.call(this,t)},initialize:function(){Gs[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=nn(this,"children")),t){var e=this.svgElement,n=xt.namespace[e?"svg":"xhtml"],r=Tc(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&n.nodeType===1;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(nn(this,"el"));else{var t=nn(this,"tagName"),e=Jt({},nn(this,"attributes")),n=Jt({},nn(this,"style"));this.id&&(e.id=nn(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(xt.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Rn.$?t:Rn.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=xt(this.el))},_ensureElClassName:function(){var t=nn(this,"className");if(t){var e=Xr(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Gs[this.cid]=null,Rn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var s=e[i];typeof s!="function"&&(s=this[s]),s&&se(t).on(i+r,n,s.bind(this))}return this},undelegateElementEvents:function(t){return se(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=nn(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return e===void 0?n?n[r]||{}:{}:(n||(n=t.data={}),n[r]||(n[r]={}),Jt(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Jt({},t[0])||{},n=t[1]&&Jt({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof r=="function"&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Rn.View.extend.call(this,e,n)}}),Ex="dbltap";if(se.event&&!(Ex in se.event.special)){const t=is.doubleTapInterval,e=30;se.event.special[Ex]={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:s}=n,a=se.data(s),u=new Date().getTime(),c="lastTouch"in a?u-a.lastTouch:0;c<t&&c>e?(a.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):a.lastTouch=u}}}const Rr={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},GI=Ii.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Xr(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;t=+t,t||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let s in n)s=+s,s<t&&s>i&&(i=s,t-1);if(i!==-1/0){const s=n[i];e.insertBefore(r,s.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}});function Fo(t){return t?Array.isArray(t)?t:[t]:[]}const Yr=Ii.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let n;if(typeof e=="string")[n]=t.findBySelector(e);else if(en(e)){const r=t.model.isLink(),{label:i=null,port:s,selector:a}=e;r&&i!==null?n=t.findLabelNode(i,a):!r&&s?n=t.findPortNode(s,a):[n]=t.findBySelector(a)}else e&&(n=xt.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,s=t.getNodeMatrix(e);return i?r?i.contains(e)?s:t.getRootRotateMatrix().inverse().multiply(s):t.getNodeRotateMatrix(e).multiply(s):s},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:s,postponedUpdate:a,nodeSelector:u}=this;if(!t||i)return;if(a){this.update(e,u),this.transform();return}const{vel:c,paper:l}=e,{layer:g}=r;if(g){let p;s?(p=s,this.detachedTransformGroup=null):p=xt("g").addClass("highlight-transform").append(n),this.transformGroup=p,l.getLayerView(g).insertSortedNode(p.node,r.z)}else(!n.parentNode||n.nextSibling)&&c.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),s=r.multiply(i);t.attr("transform",xt.matrixToTransformString(s))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const s=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),s?(this.highlight(e,s),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=nn(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;nn(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(e===null){const s=[];if(!i)return s;for(let a in i){const u=i[a];u instanceof this&&s.push(u)}return s}else{if(!i)return null;if(e in i){const s=i[e];if(s instanceof this)return s}return null}},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=Yr.get(t,n);i&&i.remove();const s=new this(r);return s.id=n,this._addRef(t,n,s),s.requestUpdate(t,e),s.listenToUpdateAttributes(t),s},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let s=i[r];s||(s=i[r]={}),s[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let s in i)return;delete r[n]}},remove(t,e=null){Fo(this.get(t,e)).forEach(n=>{n.remove()})},removeAll(t,e=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const s=n[r][i];s.cellView.paper===t&&s instanceof this&&(e===null||i===e)&&s.remove()}},update(t,e=null,n=!1){Fo(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){Fo(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(t,e=null){Fo(this.get(t,e)).forEach(n=>n.unmount())},mount(t,e=null){Fo(this.get(t,e)).forEach(n=>n.mount())},uniqueId(t,e=""){return xt.ensureId(t)+JSON.stringify(e)}}),Ia={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},UI={TOOLS:"TOOLS"},_e=Ii.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,i){t.push("type-"+i.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},n=0,r,i,s,a=nn(this,"presentationAttributes");for(var u in a)if(a.hasOwnProperty(u)){var c=a[u];for(Array.isArray(c)||(c=[c]),r=0,i=c.length;r<i;r++){s=c[r];var l=t[s];l||(l=t[s]=1<<n++),e[u]|=l}}var g=nn(this,"initFlag");for(Array.isArray(g)||(g=[g]),r=0,i=g.length;r<i;r++)s=g[r],t[s]||(t[s]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Oa(this),Ii.call(this,t)},initialize:function(){this.setFlags(),Ii.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=Tc(t),r=n.selectors,i=n.groupSelectors;for(var s in i){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=i[s]}if(e){var a=this.selector;if(r[a])throw new Error("dia.CellView: ambiguous root selector.");r[a]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=Ge(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Me(e)&&e[t]!==!1||dI(e)&&e!==!1},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||t===".")return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return se(e).find(t).toArray()},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return xt.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():xt.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return xt.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),n=xt.createSVGMatrix().translate(e.x,e.y);return n},getRootRotateMatrix:function(){var t=xt.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,s=r.height/2;t=t.translate(i,s).rotate(n).translate(-i,-s)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if(typeof e=="string"?[i=r]=this.findBySelector(e):[i=r]=this.$(e),n.partial=i!==r,n.type===void 0){let s;switch(!0){case n.embedding:s=Ia.EMBEDDING;break;case n.connecting:s=Ia.CONNECTING;break;case n.magnetAvailability:s=Ia.MAGNET_AVAILABILITY;break;case n.elementAvailability:s=Ia.ELEMENT_AVAILABILITY;break;default:s=Ia.DEFAULT;break}n.type=s}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),i=n===e;if((r||i)&&r!=="false")return n;if(i)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return typeof e=="string"&&(n="> "+e),n;if(t){var r=xt(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,s=r.getDefaultLink(this,t);return s.set({source:this.getLinkEnd(t,e,n,s,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),s=t.getAttribute("joint-selector"),a={id:r};return s!=null&&(a.magnet=s),i!=null?(a.port=i,!n.hasPort(i)&&!s&&(a.selector=this.getSelector(t))):s==null&&this.el!==t&&(a.selector=this.getSelector(t)),this.customizeLinkEnd(a,t,...e)},customizeLinkEnd:function(t,e,n,r,i,s){const{paper:a}=this,{connectionStrategy:u}=a.options;if(typeof u=="function"){var c=u.call(a,t,this,e,new Q(n,r),i,s,a);if(c)return c}return t},getMagnetFromLinkEnd:function(t){var e=this.el,n=t.port,r=t.magnet,i=this.model,s;return n!=null&&i.isElement()&&i.hasPort(n)?s=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&n!=null&&(r='[port="'+n+'"]'),s=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var s=this.paper,a=s.options.magnetThreshold,u=this.getEventTarget(t),c=r.targetMagnet;if(a==="onleave"){if(c===u||xt(c).contains(u))return}else if(s.eventData(t).mousemoved<=a)return;this.dragLinkStart(t,c,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t),i=r.linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){ki(e)||(t instanceof SVGElement?xt(t).attr(e):se(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,s,a,u,c,l,g,p=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],i=this.getAttributeDefinition(n),i&&(!Ge(i.qualify)||i.qualify.call(this,r,t,e,this))?(On(i.set)&&(u||(u={}),u[i.set]=r),r!==null&&p.push(n,i)):(u||(u={}),u[TI(n)]=r));for(s=0,a=p.length;s<a;s+=2)n=p[s],i=p[s+1],r=e[n],Ge(i.set)&&(c||(c={}),c[n]=r),Ge(i.position)&&(l||(l={}),l[n]=r),Ge(i.offset)&&(g||(g={}),g[n]=r);return{raw:e,normal:u,set:c,position:l,offset:g}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var i,s,a,u=e.raw||{},c=e.normal||{},l=e.set,g=e.position,p=e.offset;for(i in l){s=l[i],a=this.getAttributeDefinition(i);var y=a.set.call(this,s,n.clone(),t,u,this);Me(y)?Jt(c,y):y!==void 0&&(c[i]=y)}if(t instanceof HTMLElement){this.setNodeAttributes(t,c);return}var _=c.transform,w=xt.transformStringToMatrix(_),x=Q(w.e,w.f);_&&(c=Vs(c,"transform"),w.e=w.f=0);var T,P,k;if(g||p){var q=this.getNodeScale(t,r.scalableNode);T=q.sx,P=q.sy}var B=!1;for(i in g)s=g[i],a=this.getAttributeDefinition(i),k=a.position.call(this,s,n.clone(),t,u,this),k&&(x.offset(Q(k).scale(T,P)),B||(B=!0));this.setNodeAttributes(t,c);var H=!1;if(p){var X=this.getNodeBoundingRect(t);if(X.width>0&&X.height>0){var d=xt.transformRect(X,w).scale(1/T,1/P);for(i in p)s=p[i],a=this.getAttributeDefinition(i),k=a.offset.call(this,s,d,t,u,this),k&&(x.offset(Q(k).scale(T,P)),H||(H=!0))}}(_!==void 0||B||H)&&(x.round(1),w.e=x.x,w.f=x.y,t.setAttribute("transform",xt.matrixToTransformString(w)))},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=xt.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=xt(t).getBBox()),new It(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(e.magnetMatrix===void 0){const{rotatableNode:n,el:r}=this;let i;n&&n.contains(t)?i=n:i=r,e.magnetMatrix=xt(t).getTransformToElement(i)}return xt.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=xt(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,s,a,u,c={},l=[];for(var g in t)if(t.hasOwnProperty(g)&&(a=t[g],!!en(a))){var p=n[g]=this.findBySelector(g,e,r);for(i=0,s=p.length;i<s;i++){var y=p[i];u=xt.ensureId(y);var _=r&&r[g]===y,w=c[u];if(w){w.array||(l.push(u),w.array=!0,w.attributes=[w.attributes],w.selectedLength=[w.selectedLength]);var x=w.attributes,T=w.selectedLength;if(_)x.unshift(a),T.unshift(-1);else{var P=rx(T,s);x.splice(P,0,a),T.splice(P,0,s)}}else c[u]={attributes:a,selectedLength:_?-1:s,node:y,array:!1}}}for(i=0,s=l.length;i<s;i++)u=l[i],a=c[u],a.attributes=cn({},...a.attributes.reverse());return c},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:s=0}=t;return e.fromPoint||r==="touchmove"||r==="touchend"||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,s):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=It()),n.selectors||(n.selectors=this.selectors);var r={},i={},s=[],a=[],u,c,l,g,p,y=n.roAttributes,_=this.findNodesAttributes(y||e,t,r,n.selectors),w=y?this.findNodesAttributes(e,t,r,n.selectors):_;for(var x in _)if(g=_[x],l=g.attributes,c=g.node,p=this.processNodeAttributes(c,l),!p.set&&!p.position&&!p.offset)this.setNodeAttributes(c,p.normal);else{var T=w[x]&&w[x].attributes,P=T&&l.ref===void 0?T.ref:l.ref,k;if(P){if(k=(r[P]||this.findBySelector(P,t,n.selectors))[0],!k)throw new Error('dia.CellView: "'+P+'" reference does not exist.')}else k=null;if(u={node:c,refNode:k,processedAttributes:p,allAttributes:T},k){var q=a.findIndex(function(B){return B.refNode===c});q>-1?a.splice(q,0,u):a.push(u)}else s.push(u)}s.push(...a);for(let B=0,H=s.length;B<H;B++){u=s[B],c=u.node,k=u.refNode;const X=k?xt.ensureId(k):"";let d=i[X];d||(d=i[X]=k?xt(k).getBBox({target:HI(c,k)}):n.rootBBox),y?(p=this.processNodeAttributes(c,u.allAttributes),this.mergeProcessedAttributes(p,u.processedAttributes)):p=u.processedAttributes,this.updateRelativeAttributes(c,p,d,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Jt(t.set,e.set),Jt(t.position,e.position),Jt(t.offset,e.offset);var n=t.normal&&t.normal.transform;n!==void 0&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),Yr.mount(this))},onDetach(){this.unmountTools(),Yr.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Yr.remove(this)},updateHighlighters:function(t=!1){Yr.update(this,null,t)},transformHighlighters:function(){Yr.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const s=n.getSourceElement();if(s){const u=e.findViewByModel(s);u&&(e.dumpView(u),e.checkViewVisibility(u))}const a=n.getTargetElement();if(a){const u=e.findViewByModel(a);u&&(e.dumpView(u),e.checkViewVisibility(u))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:UI,Highlighting:Ia,addPresentationAttributes:function(t){return cn({},nn(this.prototype,"presentationAttributes"),t,function(e,n){if(!(!e||!n)&&(typeof e=="string"&&(e=[e]),typeof n=="string"&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return Mo(e.concat(n))})}});function HI(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}const Le={TOOLS:_e.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Na={MOVE:"move",MAGNET:"magnet"},yn=_e.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=_e.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){_e.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Le.UPDATE],position:[Le.TRANSLATE,Le.TOOLS],size:[Le.RESIZE,Le.PORTS,Le.TOOLS],angle:[Le.ROTATE,Le.TOOLS],markup:[Le.RENDER],ports:[Le.PORTS]},initFlag:[Le.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){this.hasFlag(t,Le.PORTS)&&(this._removePorts(),this._cleanPortsCache());let n=!1;if(this.hasFlag(t,Le.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),n=!0,t=this.removeFlag(t,[Le.RENDER,Le.UPDATE,Le.RESIZE,Le.TRANSLATE,Le.ROTATE,Le.PORTS,Le.TOOLS]);else{let r=!1;this.hasFlag(t,Le.RESIZE)&&(this.resize(e),r=!0,t=this.removeFlag(t,[Le.RESIZE,Le.UPDATE]),t=this.removeFlag(t,Le.PORTS)),this.hasFlag(t,Le.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Le.UPDATE),r=!0,t=this.removeFlag(t,Le.PORTS)),this.hasFlag(t,Le.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Le.TRANSLATE),n=!0),this.hasFlag(t,Le.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Le.ROTATE),n=!0),this.hasFlag(t,Le.PORTS)&&(this._renderPorts(),r=!0,t=this.removeFlag(t,Le.PORTS)),r&&this.updateHighlighters(!1)}return n&&this.transformHighlighters(),this.hasFlag(t,Le.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Le.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache(),this._removePorts();var n=this.model,r=n.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new It(n.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===r?null:e}),this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=xt(n[this.rotatableSelector])||null,this.scalableNode=xt(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(xt(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var a=i.getBBox({recursive:s}),u=r.width/(a.width||1),c=r.height/(a.height||1);i.attr("transform","scale("+u+","+c+")");var l=this.rotatableNode,g=l&&l.attr("transform");if(g){l.attr("transform",g+" rotate("+-n+","+r.width/2+","+r.height/2+")");var p=i.getBBox({target:this.paper.cells});e.set("position",{x:p.x,y:p.y},Jt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,i=t.initialZIndices={},s=e.getEmbeddedCells({deep:!0}),a=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...s,...a].forEach(l=>i[l.id]=l.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const u=r.getElements().reduce((l,g)=>Math.max(l,g.attributes.z||0),0);a.forEach(l=>{l.attributes.z<=u&&l.set("z",u+1,{ui:!0})}),e.stopBatch("to-front");const c=e.parent();c?(r.getCell(c).unembed(e,{ui:!0}),t.initialParentId=c):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,s=t.paper||this.paper,a=s.model,{findParentBy:u,frontParentOnly:c,validateEmbedding:l}=s.options;let g;Ge(u)?g=Ce(u.call(a,this,e,n,r)):u==="pointer"?g=Ce(a.findModelsFromPoint({x:n,y:r})):g=a.findModelsUnderElement(i,{searchBy:u}),g=g.filter(_=>_ instanceof fi&&i.id!==_.id&&!_.isEmbeddedIn(i)),c&&(g=g.slice(-1));let p=null;const y=t.candidateEmbedView;for(let _=g.length-1;_>=0;_--){const w=g[_];if(y&&y.model.id==w.id){p=y;break}else{const x=w.findView(s);if(!Ge(l)||l.call(s,this,x)){p=x;break}}}p&&p!=y&&(this.clearEmbedding(t),t.candidateEmbedView=p.highlight(p.findProxyNode(null,"container"),{embedding:!0})),!p&&y&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:i}=r.options,{initialParentId:s}=t;if(s&&typeof i=="function"&&!i.call(r,this)){this._disallowUnembed(t);return}}r.model.getConnectedLinks(n,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,s=(t.paper||this.paper).model;switch(n){case"remove":{r.remove({ui:!0});break}case"revert":{const{initialParentId:a,initialPosition:u,initialZIndices:c}=t;if(u){const{x:g,y:p}=u;r.position(g,p,{deep:!0,ui:!0})}c&&Object.keys(c).forEach(g=>{const p=s.getCell(g);p&&p.set("z",c[g],{ui:!0})});const l=s.getCell(a);l&&l.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const i=this.findPortNode(r,n);if(i)return i}else{const[i]=this.findBySelector(n);if(i)return i}}return t},notifyPointerdown(t,e,n){_e.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){_e.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),_e.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){_e.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){_e.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){_e.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:s,delegatedView:a}=r;switch(i&&this.magnetpointermove(t,i,e,n),s){case Na.MAGNET:this.dragMagnet(t,e,n);break;case Na.MOVE:(a||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n);break}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:s,delegatedView:a}=r;switch(i&&this.magnetpointerup(t,i,e,n),s){case Na.MAGNET:this.dragMagnetEnd(t,e,n);break;case Na.MOVE:(a||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){_e.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){_e.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){_e.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){_e.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){_e.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Na.MOVE,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!r.options.validateMagnet.call(r,this,s,t)){i?this.dragStart(t,e,n):this.pointerdown(t,e,n);return}r.options.magnetThreshold<=0&&this.dragLinkStart(t,s,e,n),this.eventData(t,{action:Na.MAGNET})},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,s=this.model,a=this.eventData(t),{pointerOffset:u,restrictedArea:c,embedding:l}=a,g=Rs(e+u.x,i),p=Rs(n+u.y,i);s.position(g,p,{restrictedArea:c,deep:!0,ui:!0}),r.options.embeddingMode&&(l||(this.prepareEmbedding(a),l=!0),this.processEmbedding(a,t,e,n)),this.eventData(t,{embedding:l})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:Le});Jt(yn.prototype,VI);const $I=function(t,e,n){return t},WI=function(t,e,n){var r=e.side||"bottom",i=zs(e.padding||40),s=n.sourceBBox,a=n.targetBBox,u=s.center(),c=a.center(),l,g,p;switch(r){case"bottom":p=1,l="y",g="height";break;case"top":p=-1,l="y",g="height";break;case"left":p=-1,l="x",g="width";break;case"right":p=1,l="x",g="width";break;default:throw new Error("Router: invalid side")}return u[l]+=p*(s[g]/2+i[r]),c[l]+=p*(a[g]/2+i[r]),p*(u[l]-c[l])>0?c[l]=u[l]:u[l]=c[l],[u].concat(t,c)};var jI={N:"S",S:"N",E:"W",W:"E"},XI={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Lc(t,e,n){var r=new Q(t.x,e.y);return n.containsPoint(r)&&(r=new Q(e.x,t.y)),r}function ad(t,e){return t[e==="W"||e==="E"?"width":"height"]}function Vn(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Rc(t){return new It(t.x,t.y,0,0)}function Oc(t){var e=zs(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Px(t,e){return t.sourceBBox.clone().moveAndExpand(Oc(e))}function Cx(t,e){return t.targetBBox.clone().moveAndExpand(Oc(e))}function YI(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=Px(t,e);return n.center()}function KI(t,e){if(t.targetAnchor)return t.targetAnchor;var n=Cx(t,e);return n.center()}function Lx(t,e,n){var r=new Q(t.x,e.y),i=new Q(e.x,t.y),s=Vn(t,r),a=Vn(t,i),u=jI[n],c=s===n||s!==u&&(a===u||a!==n)?r:i;return{points:[c],direction:Vn(c,e)}}function kc(t,e,n){var r=Lc(t,e,n);return{points:[r],direction:Vn(r,e)}}function ZI(t,e,n,r){var i={},s=[new Q(t.x,e.y),new Q(e.x,t.y)],a=s.filter(function(p){return!n.containsPoint(p)}),u=a.filter(function(p){return Vn(p,t)!==r}),c;if(u.length>0)c=u.filter(function(p){return Vn(t,p)===r}).pop(),c=c||u[0],i.points=[c],i.direction=Vn(c,e);else{c=yI(s,a)[0];var l=new Q(e).move(c,-ad(n,r)/2),g=Lc(l,t,n);i.points=[g,l],i.direction=Vn(l,e)}return i}function JI(t,e,n,r){var i=kc(e,t,r),s=i.points[0];if(n.containsPoint(s)){i=kc(t,e,n);var a=i.points[0];if(r.containsPoint(a)){var u=new Q(t).move(a,-ad(n,Vn(t,a))/2),c=new Q(e).move(s,-ad(r,Vn(e,s))/2),l=new Dt(u,c).midpoint(),g=kc(t,l,n),p=Lx(l,e,g.direction);i.points=[g.points[0],p.points[0]],i.direction=p.direction}}return i}function od(t,e,n,r,i){var s={},a=n.union(r).inflate(1),u=a.center().distance(e)>a.center().distance(t),c=u?e:t,l=u?t:e,g,p,y;return i?(g=Q.fromPolar(a.width+a.height,XI[i],c),g=a.pointNearestToPoint(g).move(g,-1)):g=a.pointNearestToPoint(c).move(c,1),p=Lc(g,l,a),g.round().equals(p.round())?(p=Q.fromPolar(a.width+a.height,Yn(g.theta(c))+Math.PI/2,l),p=a.pointNearestToPoint(p).move(l,1).round(),y=Lc(g,p,a),s.points=u?[p,y,g]:[g,y,p]):s.points=u?[p,g]:[g,p],s.direction=Vn(u?g:p,e),s}function ud(t,e,n){var r=Px(n,e),i=Cx(n,e),s=YI(n,e),a=KI(n,e);r=r.union(Rc(s)),i=i.union(Rc(a)),t=Ce(t).map(Q),t.unshift(s),t.push(a);for(var u,c=[],l=0,g=t.length-1;l<g;l++){var p=null,y=t[l],_=t[l+1],w=!!Vn(y,_);if(l===0)l+1===g?r.intersect(i.clone().inflate(1))?p=od(y,_,r,i):w||(p=JI(y,_,r,i)):r.containsPoint(_)?p=od(y,_,r,Rc(_).moveAndExpand(Oc(e))):w||(p=kc(y,_,r));else if(l+1===g){var x=w&&Vn(_,y)===u;i.containsPoint(y)||x?p=od(y,_,Rc(y).moveAndExpand(Oc(e)),i,u):w||(p=ZI(y,_,i,u))}else w||(p=Lx(y,_,u));p?(Array.prototype.push.apply(c,p.points),u=p.direction):u=Vn(y,_),l+1<g&&c.push(_)}return c}var Rx={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!Ge(ud))throw new Error("Manhattan requires the orthogonal router as default fallback.");return ud(t,Jt({},Rx,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function cd(t){this.map={},this.options=t,this.mapGridSize=100}cd.prototype.build=function(t,e){var n=this.options,r=Ce(n.excludeEnds).reduce(function(c,l){var g=e.get(l);if(g){var p=t.getCell(g.id);p&&c.push(p)}return c},[]),i=[],s=t.getCell(e.get("source").id);s&&(i=Jh(i,s.getAncestors().map(function(c){return c.id})));var a=t.getCell(e.get("target").id);a&&(i=Jh(i,a.getAncestors().map(function(c){return c.id})));var u=this.mapGridSize;return t.getElements().reduce(function(c,l){var g=Ce(n.excludeTypes).includes(l.get("type")),p=r.find(function(B){return B.id===l.id}),y=i.includes(l.id),_=g||p||y;if(!_)for(var w=l.getBBox().moveAndExpand(n.paddingBox),x=w.origin().snapToGrid(u),T=w.corner().snapToGrid(u),P=x.x;P<=T.x;P+=u)for(var k=x.y;k<=T.y;k+=u){var q=P+"@"+k;c[q]=c[q]||[],c[q].push(w)}return c},this.map),this},cd.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return Ce(this.map[e]).every(function(n){return!n.containsPoint(t)})};function Us(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Us.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=rx(this.items,t,(function(r){return this.values[r]}).bind(this));this.items.splice(n,0,t)},Us.prototype.remove=function(t){this.hash[t]=this.CLOSE},Us.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},Us.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},Us.prototype.isEmpty=function(){return this.items.length===0},Us.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function Ox(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function kx(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Mx(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=Ox(t,e);return n.center()}function QI(t,e){if(t.targetAnchor)return t.targetAnchor;var n=kx(t,e);return n.center()}function fd(t,e,n,r,i){var s=360/n,a=t.theta(tN(t,e,r,i)),u=Hr(a+s/2);return s*Math.floor(u/s)}function tN(t,e,n,r){var i=r.step,s=e.x-t.x,a=e.y-t.y,u=s/n.x,c=a/n.y,l=u*i,g=c*i;return new Q(t.x+l,t.y+g)}function Ix(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function eN(t,e,n){var r=n.step;Ce(n.directions).forEach(function(i){i.gridOffsetX=i.offsetX/r*e.x,i.gridOffsetY=i.offsetY/r*e.y})}function nN(t,e,n){return{source:e.clone(),x:Nx(n.x-e.x,t),y:Nx(n.y-e.y,t)}}function Nx(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);if(!r)return n;var i=r*e,s=n-i,a=s/r;return e+a}function rN(t,e){var n=e.source,r=Rs(t.x-n.x,e.x)+n.x,i=Rs(t.y-n.y,e.y)+n.y;return new Q(r,i)}function Vo(t,e){return t.round(e)}function Mc(t,e,n){return Vo(rN(t.clone(),e),n)}function zo(t){return t.clone().toString()}function ld(t){return new Q(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function iN(t,e,n,r,i,s,a){for(var u=[],c=ld(i.difference(n)),l=zo(n),g=t[l],p;g;){p=e[l];var y=ld(p.difference(g));y.equals(c)||(u.unshift(p),c=y),l=zo(g),g=t[l]}var _=e[l],w=ld(_.difference(r));return w.equals(c)||u.unshift(_),u}function Dx(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var s=t.manhattanDistance(e[r]);s<n&&(n=s)}return n}function qx(t,e,n,r,i){var s=i.precision,a=i.directionMap,u=t.difference(e.center()),c=Me(a)?Object.keys(a):[],l=Ce(n),g=c.reduce(function(p,y){if(l.includes(y)){for(var _=a[y],w=new Q(t.x+_.x*(Math.abs(u.x)+e.width),t.y+_.y*(Math.abs(u.y)+e.height)),x=new Dt(t,w),T=x.intersect(e)||[],P=T.length,k,q=null,B=0;B<P;B++){var H=T[B],X=t.squaredDistance(H);(k===void 0||X>k)&&(k=X,q=H)}if(q){var d=Mc(q,r,s);e.containsPoint(d)&&(d=Mc(d.offset(_.x*r.x,_.y*r.y),r,s)),p.push(d)}}return p},[]);return e.containsPoint(t)||g.push(Mc(t,r,s)),g}function sN(t,e,n,r){var i=r.precision,s,a;t instanceof It?s=Vo(Mx(this,r).clone(),i):s=Vo(t.clone(),i),e instanceof It?a=Vo(QI(this,r).clone(),i):a=Vo(e.clone(),i);var u=nN(r.step,s,a),c,l,g,p;if(t instanceof It?(c=s,g=qx(c,t,r.startDirections,u,r)):(c=s,g=[c]),e instanceof It?(l=a,p=qx(a,e,r.endDirections,u,r)):(l=a,p=[l]),g=g.filter(zt=>!n(zt)),p=p.filter(zt=>!n(zt)),g.length>0&&p.length>0){for(var y=new Us,_={},w={},x={},T=0,P=g.length;T<P;T++){var k=g[T],q=zo(k);y.add(q,Dx(k,p)),_[q]=k,x[q]=0}var B=r.previousDirectionAngle,H=B===void 0,X,d,E=r.directions;eN(E,u,r);for(var L=E.length,I=Ce(p).reduce(function(zt,fe){var Wt=zo(fe);return zt.push(Wt),zt},[]),G=r.maximumLoops;!y.isEmpty()&&G>0;){var K=y.pop(),Y=_[K],pt=w[K],Tt=x[K],at=pt===void 0,ft=Y.equals(c),lt;at?H?ft?lt=null:lt=fd(c,Y,L,u,r):lt=B:lt=fd(pt,Y,L,u,r);var dt=g.length===p.length;if(dt){for(var Xt=0;Xt<g.length;Xt++)if(!g[Xt].equals(p[Xt])){dt=!1;break}}var Ft=at&&dt;if(!Ft&&I.indexOf(K)>=0)return r.previousDirectionAngle=lt,iN(w,_,Y,c,l);for(T=0;T<L;T++){X=E[T];var Ae=X.angle;if(d=Ix(lt,Ae),!(!(H&&ft)&&d>r.maxAllowedDirectionChange)){var Ee=Mc(Y.clone().offset(X.gridOffsetX,X.gridOffsetY),u,i),ot=zo(Ee);if(!(y.isClose(ot)||n(Ee))){if(I.indexOf(ot)>=0){var ht=Ee.equals(l);if(!ht){var tt=fd(Ee,l,L,u,r),it=Ix(Ae,tt);if(it>r.maxAllowedDirectionChange)continue}}var wt=X.cost,Ht=ft?0:r.penalties[d],Gt=Tt+wt+Ht;(!y.isOpen(ot)||Gt<x[ot])&&(_[ot]=Ee,w[ot]=Y,x[ot]=Gt,y.add(ot,Gt+Dx(Ee,p)))}}}G--}}return r.fallbackRoute.call(this,c,l,r)}function aN(t){if(t.directions=nn(t,"directions"),t.penalties=nn(t,"penalties"),t.paddingBox=nn(t,"paddingBox"),t.padding=nn(t,"padding"),t.padding){var e=zs(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Ce(t.directions).forEach(function(n){var r=new Q(0,0),i=new Q(n.offsetX,n.offsetY);n.angle=Hr(r.theta(i))})}function oN(t,e,n){aN(e),n.options.perpendicular=!!e.perpendicular;var r=Ox(n,e),i=kx(n,e),s=Mx(n,e);let a;if(typeof e.isPointObstacle=="function")a=e.isPointObstacle;else{const q=new cd(e);q.build(n.paper.model,n.model),a=B=>!q.isPointAccessible(B)}for(var u=Ce(t).map(Q),c=[],l=s,g,p,y=0,_=u.length;y<=_;y++){var w=null;if(p=g||r,g=u[y],!g){g=i;var x=!n.model.get("source").id||!n.model.get("target").id;if(x&&Ge(e.draggingRoute)){var T=p===r?s:p,P=g.origin();w=e.draggingRoute.call(n,T,P,e)}}if(w=w||sN.call(n,p,g,a,e),w===null)return e.fallbackRouter(t,e,n);var k=w[0];k&&k.equals(l)&&w.shift(),l=w[w.length-1]||l,Array.prototype.push.apply(c,w)}return c}const hd=function(t,e,n){return oN(t,Jt({},Rx,e),n)};var uN={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],s={x:e.x,y:t.y},a={x:t.x,y:e.y};if(r%180>90){var u=s;s=a,a=u}var c=r%90<45?s:a,l=new Dt(t,c),g=90*Math.ceil(r/90),p=Q.fromPolar(l.squaredLength(),Yn(g+135),c),y=new Dt(e,p),_=l.intersection(y),w=_||e,x=_?w:t,T=360/n.directions.length,P=x.theta(e),k=Hr(P+T/2),q=T*Math.floor(k/T);return n.previousDirectionAngle=q,w&&i.push(w.round()),i.push(e),i}};const cN=function(t,e,n){if(!Ge(hd))throw new Error("Metro requires the manhattan router.");return hd(t,Jt({},uN,e),n)},Lt={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},Bx=[Lt.LEFT,Lt.RIGHT,Lt.TOP,Lt.BOTTOM],Da={[Lt.LEFT]:Lt.RIGHT,[Lt.RIGHT]:Lt.LEFT,[Lt.TOP]:Lt.BOTTOM,[Lt.BOTTOM]:Lt.TOP},fN=[Lt.TOP,Lt.BOTTOM],Ic={0:Lt.RIGHT,180:Lt.LEFT,270:Lt.TOP,90:Lt.BOTTOM};function Go(t){return t.angle()}function Nc(t){return new ze(t).simplify({threshold:1}).points}function Dc(t,e){const{point:n,x0:r,y0:i,view:s,bbox:a,direction:u}=t,{point:c,x0:l,y0:g,view:p,bbox:y,direction:_}=e;let w;if(s)s.model.isLink()?w=Fx(c,n,s):u===Lt.ANCHOR_SIDE?w=a.sideNearestToPoint(n):u===Lt.MAGNET_SIDE?w=s.model.getBBox().sideNearestToPoint(n):w=u;else{const T=new It(r,i,0,0);w=Bx.includes(u)?u:T.sideNearestToPoint(c)}let x;if(p)p.model.isLink()?x=Fx(n,c,p):_===Lt.ANCHOR_SIDE?x=y.sideNearestToPoint(c):_===Lt.MAGNET_SIDE?x=p.model.getBBox().sideNearestToPoint(c):x=_;else{const T=new It(l,g,0,0);x=Bx.includes(_)?_:T.sideNearestToPoint(n)}return[w,x]}function lN(t,e,n){const{x0:r,y0:i,width:s,height:a,point:u,margin:c}=t,l=r+s,g=i+a,p=r-c,y=l+c,_=i-c,{x:w}=u,{x0:x,y0:T}=e;return x===w&&T<i?Lt.BOTTOM:x<w&&T<_?Lt.RIGHT:x>w&&T<_?Lt.LEFT:x<p&&T>=i||x>y&&T>=i?Lt.TOP:x>=p&&x<=w&&T>g||x<=y&&x>=w&&T>g?n.point.x<x?Lt.RIGHT:Lt.LEFT:Lt.TOP}function hN(t,e,n){const{x0:r,y0:i,width:s,height:a,point:u,margin:c}=t,l=r+s,g=i+a,p=r-c,y=l+c,_=g+c,{x:w}=u,{x0:x,y0:T}=e;return x===w&&T>g?Lt.TOP:x<w&&T>_?Lt.RIGHT:x>w&&T>_?Lt.LEFT:x<p&&T<=g||x>y&&T<=g?Lt.BOTTOM:x>=p&&x<=w&&T<i||x<=y&&x>=w&&T<i?n.point.x<x?Lt.RIGHT:Lt.LEFT:Lt.BOTTOM}function dN(t,e,n){const{y0:r,x0:i,width:s,height:a,point:u,margin:c}=t,l=i+s,g=r+a,p=i-c,y=r-c,_=g+c,{x:w,y:x}=u,{x0:T,y0:P}=e;return T<w&&P===x?Lt.RIGHT:T<=p&&P<x?Lt.BOTTOM:T<=p&&P>x?Lt.TOP:T>=i&&P<=y||T>=i&&P>=_?Lt.LEFT:T>l&&P>=y&&P<=x||T>l&&P<=_&&P>=x?n.point.y<P?Lt.BOTTOM:Lt.TOP:Lt.LEFT}function pN(t,e,n){const{y0:r,x0:i,width:s,height:a,point:u,margin:c}=t,l=i+s,g=r+a,p=l+c,y=r-c,_=g+c,{x:w,y:x}=u,{x0:T,y0:P}=e;return T>w&&P===x?Lt.LEFT:T>=p&&P<x?Lt.BOTTOM:T>=p&&P>x?Lt.TOP:T<=l&&P<=y||T<=l&&P>=_?Lt.RIGHT:T<i&&P>=y&&P<=x||T<i&&P<=_&&P>=x?n.point.y<P?Lt.BOTTOM:Lt.TOP:Lt.RIGHT}function gN(t,e,n){const[r]=Dc(t,e);switch(r){case Lt.TOP:return lN(t,e,n);case Lt.RIGHT:return pN(t,e,n);case Lt.BOTTOM:return hN(t,e,n);case Lt.LEFT:return dN(t,e,n)}}function Fx(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e)),i=Math.round(Go(r)/90)*90;if(i%180===0&&t.y===e.y)return t.x<e.x?Lt.LEFT:Lt.RIGHT;if(t.x===e.x)return t.y<e.y?Lt.TOP:Lt.BOTTOM;switch(i){case 0:case 180:case 360:return t.y<e.y?Lt.TOP:Lt.BOTTOM;case 90:case 270:return t.x<e.x?Lt.LEFT:Lt.RIGHT}}function Vx(t,e,n,r,i,s,a){r===Lt.AUTO&&(r=i?Lt.MAGNET_SIDE:Lt.ANCHOR_SIDE);const u=t&&t.model.isElement(),{x:c,y:l,width:g=0,height:p=0}=u?It.fromRectUnion(n,t.model.getBBox()):s;return{point:e,x0:c,y0:l,view:t,bbox:n,width:g,height:p,direction:r,margin:u?a:0}}function dd({x:t,y:e}){const n=new Q(t,e);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new It(t,e,0,0),width:0,height:0,direction:null,margin:0}}function zx(t,e,n){const r=e.point.clone(),{x0:i,y0:s,width:a,height:u}=e;switch(t){case"left":r.x=i-n;break;case"right":r.x=i+a+n;break;case"top":r.y=s-n;break;case"bottom":r.y=s+u+n;break}return r}function cs(t,e){const{point:n,x0:r,y0:i,view:s,width:a,height:u,margin:c}=t,{point:l,x0:g,y0:p,width:y,height:_,margin:w}=e,x=g+y,T=p+_,P=r+a,k=i+u,q=s&&s.model.isElement(),B=r-c,H=P+c,X=i-c,d=k+c,E=g-w,L=x+w,I=p-w,G=T+w,[K,Y]=Dc(t,e),pt=zx(K,{point:n,x0:r,y0:i,width:a,height:u},c),Tt=zx(Y,{point:l,x0:g,y0:p,width:y,height:_},w),{x:at,y:ft}=pt,{x:lt,y:dt}=Tt,Xt=(g+x)/2,Ft=(p+T)/2,Ae=(r+P)/2,Ee=(i+k)/2,ot=(Ae<Xt?P+g:x+r)/2,ht=(Ee<Ft?k+p:T+i)/2;if(K==="left"&&Y==="right"){if(B<=L){let it=ht;return P<=g&&(T>=X&&dt<ft?it=Math.min(I,X):p<=d&&dt>=ft&&(it=Math.max(G,d))),[{x:at,y:ft},{x:at,y:it},{x:lt,y:it},{x:lt,y:dt}]}const tt=(at+lt)/2;return[{x:tt,y:ft},{x:tt,y:dt}]}else if(K==="right"&&Y==="left"){if(H>=E){let it=ht;return at>x&&(T>=X&&dt<ft?it=Math.min(I,X):p<=d&&dt>=ft&&(it=Math.max(G,d))),[{x:at,y:ft},{x:at,y:it},{x:lt,y:it},{x:lt,y:dt}]}const tt=(at+lt)/2;return[{x:tt,y:ft},{x:tt,y:dt}]}else if(K==="top"&&Y==="bottom"){if(ft<dt){let it=ot,wt=ft;return ft<p&&(x>=B&&lt<at?it=Math.min(E,B):g<=H&&lt>=at&&(it=Math.max(L,H))),[{x:at,y:wt},{x:it,y:wt},{x:it,y:dt},{x:lt,y:dt}]}const tt=(ft+dt)/2;return[{x:at,y:tt},{x:lt,y:tt}]}else if(K==="bottom"&&Y==="top"){if(ft-c>dt){let it=ot,wt=ft;return ft>T&&(x>=B&&lt<at?it=Math.min(E,B):g<=H&&lt>=at&&(it=Math.max(L,H))),[{x:at,y:wt},{x:it,y:wt},{x:it,y:dt},{x:lt,y:dt}]}const tt=(ft+dt)/2;return[{x:at,y:tt},{x:lt,y:tt}]}else if(K==="top"&&Y==="top"){let tt,it=Math.min((k+p)/2,dt),wt=Math.min((i+T)/2,ft);if(dt<ft){if(at>=L||at<=E)return[{x:at,y:Math.min(ft,dt)},{x:lt,y:Math.min(ft,dt)}];lt>at?tt=Math.min(at,E):tt=Math.max(at,L)}else{if(lt>=H||lt<=B)return[{x:at,y:Math.min(ft,dt)},{x:lt,y:Math.min(ft,dt)}];lt>=at?tt=Math.max(lt,H):tt=Math.min(lt,B)}return[{x:at,y:wt},{x:tt,y:wt},{x:tt,y:it},{x:lt,y:it}]}else if(K==="bottom"&&Y==="bottom"){let tt,it=Math.max((i+T)/2,dt),wt=Math.max((k+p)/2,ft);if(dt>ft){if(at>=L||at<=E)return[{x:at,y:Math.max(ft,dt)},{x:lt,y:Math.max(ft,dt)}];lt>at?tt=Math.min(at,E):tt=Math.max(at,L)}else{if(lt>=H||lt<=B)return[{x:at,y:Math.max(ft,dt)},{x:lt,y:Math.max(ft,dt)}];lt>=at?tt=Math.max(lt,H):tt=Math.min(lt,B)}return[{x:at,y:wt},{x:tt,y:wt},{x:tt,y:it},{x:lt,y:it}]}else if(K==="left"&&Y==="left"){let tt,it=Math.min((P+g)/2,lt),wt=Math.min((r+x)/2,at);return lt>at?dt<=ft?tt=Math.min(X,dt):tt=Math.max(d,dt):dt>=ft?tt=Math.min(I,ft):tt=Math.max(G,ft),[{x:wt,y:ft},{x:wt,y:tt},{x:it,y:tt},{x:it,y:dt}]}else if(K==="right"&&Y==="right"){let tt,it=Math.max((r+x)/2,lt),wt=Math.max((P+g)/2,at);return lt<at?dt<=ft?tt=Math.min(X,dt):tt=Math.max(d,dt):dt>=ft?tt=Math.min(I,ft):tt=Math.max(G,ft),[{x:wt,y:ft},{x:wt,y:tt},{x:it,y:tt},{x:it,y:dt}]}else if(K==="top"&&Y==="right"){if(ft>dt){if(at<lt){let it=ht;return(it>Ft||!q)&&it<G&&at<g&&(it=I),[{x:at,y:it},{x:lt,y:it},{x:lt,y:dt}]}return[{x:at,y:dt}]}const tt=Math.max(ot,L);if(lt<at&&dt>i&&dt<k)return[{x:at,y:ft},{x:tt,y:ft},{x:tt,y:dt}];if(tt>B&&dt>i||g>P){const it=Math.min(i-c,p-w),wt=Math.max(P+c,x+w);return[{x:at,y:it},{x:wt,y:it},{x:wt,y:dt}]}return[{x:at,y:ft},{x:Math.max(tt,lt),y:ft},{x:Math.max(tt,lt),y:dt}]}else if(K==="top"&&Y==="left"){if(ft>dt){if(at>lt){let it=ht;return(it>Ft||!q)&&it<G&&at>x&&(it=I),[{x:at,y:it},{x:lt,y:it},{x:lt,y:dt}]}return[{x:at,y:dt}]}const tt=Math.min(E,ot);if(at<lt&&k>=dt)return[{x:at,y:ft},{x:tt,y:ft},{x:tt,y:dt}];if(tt<H&&ft<T){const it=Math.min(X,I),wt=Math.min(B,E);return[{x:at,y:it},{x:wt,y:it},{x:wt,y:dt}]}return[{x:at,y:ft},{x:tt,y:ft},{x:tt,y:dt}]}else if(K==="bottom"&&Y==="right"){if(ft<dt){if(at<lt){let it=ht;return(it<Ft||!q)&&it>I&&at<g&&(it=G),[{x:at,y:it},{x:lt,y:it},{x:lt,y:dt}]}return[{x:at,y:dt}]}else if(r<lt){const it=Math.max(d,G),wt=Math.max(H,L);return[{x:at,y:it},{x:wt,y:it},{x:wt,y:dt}]}const tt=ot;return[{x:at,y:ft},{x:tt,y:ft},{x:tt,y:dt}]}else if(K==="bottom"&&Y==="left"){if(ft<dt){if(at>lt){let it=ht;return(it<Ft||!q)&&it>I&&at>x&&(it=G),[{x:at,y:it},{x:lt,y:it},{x:lt,y:dt}]}return[{x:at,y:dt}]}else if(P>lt){const it=Math.max(d,G),wt=Math.min(B,E);return[{x:at,y:it},{x:wt,y:it},{x:wt,y:dt}]}const tt=ot;return[{x:at,y:ft},{x:tt,y:ft},{x:tt,y:dt}]}else if(K==="left"&&Y==="bottom"){if(at>=lt&&ft>=G)return[{x:lt,y:ft}];if(at>=x&&ft<dt){const wt=ot;return[{x:wt,y:ft},{x:wt,y:dt},{x:lt,y:dt}]}if(lt<P&&T<=i){const wt=ht;return[{x:at,y:ft},{x:at,y:wt},{x:lt,y:wt}]}const tt=Math.min(E,at),it=Math.max(d,G);return[{x:tt,y:ft},{x:tt,y:it},{x:lt,y:it}]}else if(K==="left"&&Y==="top"){if(at>lt&&ft<I)return[{x:lt,y:ft}];if(at>=x&&ft>dt){const wt=ot;return[{x:wt,y:ft},{x:wt,y:dt},{x:lt,y:dt}]}if(lt<=P&&dt>ft){const wt=ht;return[{x:at,y:ft},{x:at,y:wt},{x:lt,y:wt}]}const tt=dt<ft?Math.min(B,E):B,it=Math.min(X,I);return[{x:tt,y:ft},{x:tt,y:it},{x:lt,y:it}]}else if(K==="right"&&Y==="top"){if(at<=lt&&ft<I)return[{x:lt,y:ft}];if(P<g&&ft>dt){let wt=ot;return[{x:wt,y:ft},{x:wt,y:dt},{x:lt,y:dt}]}if(lt<at&&p>k){const wt=ht;return[{x:at,y:ft},{x:at,y:wt},{x:lt,y:wt}]}const tt=Math.max(H,L),it=Math.min(X,I);return[{x:tt,y:ft},{x:tt,y:it},{x:lt,y:it}]}else if(K==="right"&&Y==="bottom"){if(at<=lt&&ft>=G)return[{x:lt,y:ft}];if(at<=E&&ft<dt){const wt=ot;return[{x:wt,y:ft},{x:wt,y:dt},{x:lt,y:dt}]}if(lt>r&&T<i){const wt=ht;return[{x:at,y:ft},{x:at,y:wt},{x:lt,y:wt}]}const tt=Math.max(L,at),it=Math.max(d,G);return[{x:tt,y:ft},{x:tt,y:it},{x:lt,y:it}]}}function Gx(t,e,n){const{sourceDirection:r=Lt.AUTO,targetDirection:i=Lt.AUTO}=e,s=e.margin||20,a=e.useVertices||!1,u=!!n.model.source().port,c=Vx(n.sourceView,n.sourceAnchor,n.sourceBBox,r,u,n.sourceAnchor,s),l=!!n.model.target().port,g=Vx(n.targetView,n.targetAnchor,n.targetBBox,i,l,n.targetAnchor,s);let p=[];if(!a||t.length===0)return Nc(cs(c,g));const y=t.map(x=>dd(x)),[_]=y;if(c.view&&c.view.model.isElement()&&c.view.model.getBBox().inflate(s).containsPoint(_.point)){const[x]=Dc(c,_),T=x,P=dd(c.point);P.margin=s,P.direction=x,_.direction=T,p.push(...cs(P,_),_.point)}else{const x=y[1]||g,T=gN(c,_,x);_.direction=T,p.push(...cs(c,_),_.point)}for(let x=0;x<y.length-1;x++){const T=y[x],P=y[x+1],k=new Dt(T.point,P.point),q=Go(k);if(q%90===0){const X=Ic[q],d=Da[X];if(X!==T.direction)p.push(T.point,P.point),P.direction=d;else{const E=Hr(q-90);let L=0,I=0;E===90?I=-s:E===180?L=-s:E===270?I=s:E===0&&(L=s);const G={x:T.point.x+L,y:T.point.y+I},K={x:P.point.x+L,y:P.point.y+I},Y=new Dt(P.point,K);P.direction=Ic[Go(Y)],p.push(T.point,G,K,P.point)}continue}const[B,H]=pd(T,P);T.direction=B,P.direction=H,p.push(...cs(T,P),P.point)}const w=y[y.length-1];if(g.view&&g.view.model.isElement())if(g.view.model.getBBox().inflate(s).containsPoint(w.point)){const[x]=pd(w,g),T=dd(g.point),[,P]=Dc(w,g);T.margin=s,T.direction=P,w.direction=x,p.push(...cs(w,T))}else{const x=Nc(p),T=new Dt(x[x.length-2],w.point),P=Ic[Math.round(Go(T))];w.direction=P;let k=cs(w,g);const[q,B]=Nc([...k,g.point]),H=new Dt(q,B),X=Math.round(Go(H)),d=Ic[X];d!==P&&P===Da[d]&&(w.margin=s,k=cs(w,g)),p.push(...k)}else{const[x]=pd(w,g);w.direction=x,p.push(...cs(w,g))}return Nc(p)}function pd(t,e){const n=t.direction,r=fN.includes(n);let i=t.direction,s=e.direction;if(r){const a=t.point.y>e.point.y,u=e.point.x-t.point.x;n===Lt.BOTTOM?(i=a?Da[n]:u>=0?Lt.RIGHT:Lt.LEFT,u>0?s=a?Lt.LEFT:Lt.TOP:u<0&&(s=a?Lt.RIGHT:Lt.TOP)):(i=a?u>=0?Lt.RIGHT:Lt.LEFT:Da[n],u>0?s=a?Lt.BOTTOM:Lt.LEFT:u<0&&(s=a?Lt.BOTTOM:Lt.RIGHT))}else{const a=t.point.x>e.point.x,u=e.point.y-t.point.y;n===Lt.RIGHT?(i=a?Da[n]:u>=0?Lt.BOTTOM:Lt.TOP,u>0?s=a?Lt.TOP:Lt.LEFT:u<0&&(s=a?Lt.BOTTOM:Lt.LEFT)):(i=a?u>=0?Lt.BOTTOM:Lt.TOP:Da[n],u>0?s=a?Lt.RIGHT:Lt.TOP:u<0&&(s=a?Lt.RIGHT:Lt.BOTTOM))}return[i,s]}Gx.Directions=Lt;var vN=Object.freeze({__proto__:null,manhattan:hd,metro:cN,normal:$I,oneSide:WI,orthogonal:ud,rightAngle:Gx});const qa={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},mN=Object.values(qa),yN=10,bN=1,gd=function(t,e,n=[],r={}){const{cornerType:i=qa.POINT,cornerRadius:s=yN,cornerPreserveAspectRatio:a=!1,precision:u=bN,raw:c=!1}=r;if(mN.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let l;if(i===qa.POINT||!s){const g=[t].concat(n).concat([e]),p=new ze(g);l=new jt(p)}else{l=new jt,l.appendSegment(jt.createSegment("M",t));let g;const p=n.length;for(let y=0;y<p;y++){const _=new Q(n[y]),w=n[y-1]||t,x=n[y+1]||e,T=g||_.distance(w)/2;g=_.distance(x)/2;let P,k;a?P=k=-Math.min(s,T,g):(P=-Math.min(s,T),k=-Math.min(s,g));const q=_.clone().move(w,P).round(u),B=_.clone().move(x,k).round(u);switch(l.appendSegment(jt.createSegment("L",q)),i){case qa.CUBIC:{const H=.3333333333333333,X=2/3,d=new Q(H*q.x+X*_.x,X*_.y+H*q.y),E=new Q(H*B.x+X*_.x,X*_.y+H*B.y);l.appendSegment(jt.createSegment("C",d,E,B));break}case qa.LINE:{l.appendSegment(jt.createSegment("L",B));break}case qa.GAP:{l.appendSegment(jt.createSegment("M",B));break}}}l.appendSegment(jt.createSegment("L",e))}return c?l:l.serialize()};var _N=5,Ux=["arc","gap","cubic"],wN=0,Hx=1,xN=["smooth"],qc=1/3,Bc=2/3;function $x(t,e){let{x:n,y:r}=t,{x:i,y:s}=e;if(n>i){let a=n;n=i,i=a,a=r,r=s,s=a}if(r>s){let a=n;n=i,i=a,a=r,r=s,s=a}return[new Q(n,r),new Q(i,s)]}function AN(t,e){const[{x:n,y:r},{x:i,y:s}]=$x(t.start,t.end),[{x:a,y:u},{x:c,y:l}]=$x(e.start,e.end),g=n<=c&&a<=i,p=r<=l&&u<=s;return g&&p}function vd(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(i,s,a){var u=r[a+1];return u!=null&&(i[a]=Os(s,u)),i},[])}function SN(t){var e=t.paper,n=e._jumpOverUpdateList;if(n==null){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||TN(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}function TN(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],i=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(i)}}function EN(t,e){return Ce(e).reduce(function(n,r){var i=t.intersection(r);return i&&n.push(i),n},[])}function Wx(t,e){return Os(t,e).squaredLength()}function PN(t,e,n){return e.reduce(function(r,i,s){if(i.skip===!0)return r;var a=r.pop()||t,u=Uu(i).move(a.start,-n),c=Uu(i).move(a.start,+n),l=e[s+1];if(l!=null){var g=c.distance(l);g<=n&&(c=l.move(a.start,g),l.skip=!0)}else{var p=u.distance(a.end);if(p<n*2+Hx)return r.push(a),r}var y=c.distance(a.start);if(y<n*2+Hx)return r.push(a),r;var _=Os(u,c);return _.isJump=!0,r.push(Os(a.start,u),_,Os(c,a.end)),r},[])}function jx(t,e,n,r){var i=new jt,s;return s=jt.createSegment("M",t[0].start),i.appendSegment(s),Ce(t).forEach(function(a,u){if(a.isJump){var c,l,g,p;if(n==="arc"){c=-90,l=a.start.difference(a.end);var y=+(l.x<0||l.x===0&&l.y<0);y&&(c+=180);var _=a.midpoint(),w=new Dt(_,a.end).rotate(_,c),x;x=new Dt(a.start,_),g=x.pointAt(2/3).rotate(a.start,c),p=w.pointAt(1/3).rotate(w.end,-c),s=jt.createSegment("C",g,p,w.end),i.appendSegment(s),x=new Dt(_,a.end),g=w.pointAt(1/3).rotate(w.end,c),p=x.pointAt(1/3).rotate(a.end,-c),s=jt.createSegment("C",g,p,a.end),i.appendSegment(s)}else if(n==="gap")s=jt.createSegment("M",a.end),i.appendSegment(s);else if(n==="cubic"){c=a.start.theta(a.end);var T=e*.6,P=e*1.35;l=a.start.difference(a.end),y=+(l.x<0||l.x===0&&l.y<0),y&&(P*=-1),g=Q(a.start.x+T,a.start.y+P).rotate(a.start,c),p=Q(a.end.x-T,a.end.y+P).rotate(a.end,c),s=jt.createSegment("C",g,p,a.end),i.appendSegment(s)}}else{var k=t[u+1];r==0||!k||k.isJump?(s=jt.createSegment("L",a.end),i.appendSegment(s)):CN(r,i,a.end,a.start,k.end)}}),i}function CN(t,e,n,r,i){var s=n.distance(r)/2,a=n.distance(i)/2,u=-Math.min(t,s),c=-Math.min(t,a),l=n.clone().move(r,u).round(),g=n.clone().move(i,c).round(),p=new Q(qc*l.x+Bc*n.x,Bc*n.y+qc*l.y),y=new Q(qc*g.x+Bc*n.x,Bc*n.y+qc*g.y),_;_=jt.createSegment("L",l),e.appendSegment(_),_=jt.createSegment("C",p,y,g),e.appendSegment(_)}const LN=function(t,e,n,r){SN(this);var i=r.raw,s=r.size||_N,a=r.jump&&(""+r.jump).toLowerCase(),u=r.radius||wN,c=r.ignoreConnectors||xN;Ux.indexOf(a)===-1&&(a=Ux[0]);var l=this.paper,g=l.model,p=g.getLinks();if(p.length===1)return jx(vd(t,e,n),s,a,u);var y=this.model,_=p.indexOf(y),w=l.options.defaultConnector||{},x=p.filter(function(H,X){var d=H.get("connector")||w;return Ce(c).includes(d.name)?!1:X>_?d.name!=="jumpover":!0}),T=x.map(function(H){return l.findViewByModel(H)}),P=vd(t,e,n),k=T.map(function(H){return H==null?[]:H===this?P:vd(H.sourcePoint,H.targetPoint,H.route)},this),q=P.reduce(function(H,X){var d=x.reduce(function(E,L,I){if(L!==y){const G=k[I].slice(),K=G.findIndex(pt=>AN(X,pt));K>-1&&X.containsPoint(G[K].end)&&G.splice(K+1,1);const Y=EN(X,G);E.push.apply(E,Y)}return E},[]).sort(function(E,L){return Wx(X.start,E)-Wx(X.start,L)});return d.length>0?H.push.apply(H,PN(X,d,s)):H.push(X),H},[]),B=jx(q,s,a,u);return i?B:B.serialize()},RN=function(t,e,n=[],r={}){const{raw:i}=r;return gd(t,e,n,{cornerType:"point",raw:i})},ON=10,kN=0,MN=function(t,e,n=[],r={}){const{radius:i=ON,raw:s}=r;return gd(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:kN,raw:s})},IN=function(t,e,n,r){var i=r&&r.raw,s;if(n&&n.length!==0){var a=[t].concat(n).concat([e]),u=Ie.throughPoints(a);s=new jt(u)}else{s=new jt;var c;if(c=jt.createSegment("M",t),s.appendSegment(c),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var l=(t.x+e.x)/2;c=jt.createSegment("C",l,t.y,l,e.y,e.x,e.y),s.appendSegment(c)}else{var g=(t.y+e.y)/2;c=jt.createSegment("C",t.x,g,e.x,g,e.x,e.y),s.appendSegment(c)}}return i?s:s.serialize()},Or={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},zn={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},md=function(t,e,n=[],r={},i){const s=!!r.raw,{direction:a=Or.AUTO,precision:u=3}=r,c={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new Q(r.sourceTangent):null,targetTangent:r.targetTangent?new Q(r.targetTangent):null,rotate:!!r.rotate};typeof r.sourceDirection=="string"?c.sourceDirection=r.sourceDirection:typeof r.sourceDirection=="number"?c.sourceDirection=new Q(1,0).rotate(null,r.sourceDirection):c.sourceDirection=r.sourceDirection?new Q(r.sourceDirection).normalize():null,typeof r.targetDirection=="string"?c.targetDirection=r.targetDirection:typeof r.targetDirection=="number"?c.targetDirection=new Q(1,0).rotate(null,r.targetDirection):c.targetDirection=r.targetDirection?new Q(r.targetDirection).normalize():null;const l=[t,...n,e].map(x=>new Q(x));let g;if(c.sourceTangent)g=c.sourceTangent;else{const x=FN(i,l,a,c),T=l[0].distance(l[1])*c.coeff,P=l[1].difference(l[0]).normalize(),k=yd(x,P);if(k>Math.PI/4){const q=T+(k-Math.PI/4)*c.angleTangentCoefficient;g=x.clone().scale(q,q)}else g=x.clone().scale(T,T)}let p;if(c.targetTangent)p=c.targetTangent;else{const x=VN(i,l,a,c),T=l.length-1,P=l[T-1].distance(l[T])*c.coeff,k=l[T-1].difference(l[T]).normalize(),q=yd(x,k);if(q>Math.PI/4){const B=P+(q-Math.PI/4)*c.angleTangentCoefficient;p=x.clone().scale(B,B)}else p=x.clone().scale(P,P)}const _=GN(l,g,p,c).map(x=>UN(x,c)),w=new jt(_).round(u);return s?w:w.serialize()};md.Directions=Or,md.TangentDirections=zn;function NN(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)r.x>e[1].x?i="right":i="left";else if(s=t.sourceView.model.angle(),n.rotate&&s){const u=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),c=e[0].clone();c.rotate(r.center(),s),i=u.sideNearestToPoint(c)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"left":a=new Q(-1,0);break;case"right":default:a=new Q(1,0);break}return n.rotate&&s&&a.rotate(null,-s),a}function DN(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)r.x>e[e.length-2].x?i="left":i="right";else if(s=t.targetView.model.angle(),n.rotate&&s){const u=t.targetView.getNodeUnrotatedBBox(t.targetView.el),c=e[e.length-1].clone();c.rotate(r.center(),s),i=u.sideNearestToPoint(c)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"left":a=new Q(-1,0);break;case"right":default:a=new Q(1,0);break}return n.rotate&&s&&a.rotate(null,-s),a}function qN(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)r.y>e[1].y?i="bottom":i="top";else if(s=t.sourceView.model.angle(),n.rotate&&s){const u=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),c=e[0].clone();c.rotate(r.center(),s),i=u.sideNearestToPoint(c)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"top":a=new Q(0,-1);break;case"bottom":default:a=new Q(0,1);break}return n.rotate&&s&&a.rotate(null,-s),a}function BN(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)r.y>e[e.length-2].y?i="top":i="bottom";else if(s=t.targetView.model.angle(),n.rotate&&s){const u=t.targetView.getNodeUnrotatedBBox(t.targetView.el),c=e[e.length-1].clone();c.rotate(r.center(),s),i=u.sideNearestToPoint(c)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"top":a=new Q(0,-1);break;case"bottom":default:a=new Q(0,1);break}return n.rotate&&s&&a.rotate(null,-s),a}function Xx(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)i=r.sideNearestToPoint(e[1]);else if(s=t.sourceView.model.angle(),n.rotate&&s){const u=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),c=e[0].clone();c.rotate(r.center(),s),i=u.sideNearestToPoint(c)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"top":a=new Q(0,-1);break;case"bottom":a=new Q(0,1);break;case"right":a=new Q(1,0);break;case"left":a=new Q(-1,0);break}return n.rotate&&s&&a.rotate(null,-s),a}function Yx(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)i=r.sideNearestToPoint(e[e.length-2]);else if(s=t.targetView.model.angle(),n.rotate&&s){const u=t.targetView.getNodeUnrotatedBBox(t.targetView.el),c=e[e.length-1].clone();c.rotate(r.center(),s),i=u.sideNearestToPoint(c)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"top":a=new Q(0,-1);break;case"bottom":a=new Q(0,1);break;case"right":a=new Q(1,0);break;case"left":a=new Q(-1,0);break}return n.rotate&&s&&a.rotate(null,-s),a}function Kx(t,e,n){return e[1].difference(e[0]).normalize()}function Zx(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function Jx(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function Qx(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function FN(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case zn.UP:return new Q(0,-1);case zn.DOWN:return new Q(0,1);case zn.LEFT:return new Q(-1,0);case zn.RIGHT:return new Q(1,0);case zn.AUTO:return Xx(t,e,r);case zn.CLOSEST_POINT:return Kx(t,e);case zn.OUTWARDS:return Jx(t,e);default:return r.sourceDirection}switch(n){case Or.HORIZONTAL:return NN(t,e,r);case Or.VERTICAL:return qN(t,e,r);case Or.CLOSEST_POINT:return Kx(t,e);case Or.OUTWARDS:return Jx(t,e);case Or.AUTO:default:return Xx(t,e,r)}}function VN(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case zn.UP:return new Q(0,-1);case zn.DOWN:return new Q(0,1);case zn.LEFT:return new Q(-1,0);case zn.RIGHT:return new Q(1,0);case zn.AUTO:return Yx(t,e,r);case zn.CLOSEST_POINT:return Zx(t,e);case zn.OUTWARDS:return Qx(t,e);default:return r.targetDirection}switch(n){case Or.HORIZONTAL:return DN(t,e,r);case Or.VERTICAL:return BN(t,e,r);case Or.CLOSEST_POINT:return Zx(t,e);case Or.OUTWARDS:return Qx(t,e);case Or.AUTO:default:return Yx(t,e,r)}}function zN(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,s=r*t.x+n*t.y;t.x=i,t.y=s}function yd(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function tA(t,e){return t.x*e.y-t.y*e.x}function GN(t,e,n,r){const{tau:i,coeff:s}=r,a=[],u=[],c=[],l=t.length-1;for(let g=0;g<l;g++)a[g]=t[g].distance(t[g+1]);u[0]=e,u[l]=n;for(let g=1;g<l;g++){let p,y;g===1?p=t[g-1].clone().offset(u[g-1].x,u[g-1].y):p=t[g-1].clone(),g===l-1?y=t[g+1].clone().offset(u[g+1].x,u[g+1].y):y=t[g+1].clone();const _=p.difference(t[g]).normalize(),w=y.difference(t[g]).normalize(),x=yd(_,w);let T=(Math.PI-x)/2,P;const k=tA(_,w);let q;q=tA(t[g].difference(t[g+1]),t[g].difference(t[g-1])),k<0&&(T=-T),x<Math.PI/2&&(T<0&&q<0||T>0&&q>0)&&(T=T-Math.PI),P=w.clone(),zN(P,T);const B=P.clone(),H=P.clone(),X=a[g-1]*s,d=a[g]*s;B.scale(X,X),H.scale(d,d),u[g]=[B,H]}for(let g=0;g<l;g++){let p,y;g===0?p=t[g+1].difference(u[g].x/i,u[g].y/i):p=t[g+1].difference(u[g][1].x/i,u[g][1].y/i),g===l-1?y=t[g].clone().offset(u[g+1].x/i,u[g+1].y/i):y=t[g].difference(u[g+1][0].x/i,u[g+1][0].y/i),c[g]=[p,t[g],t[g+1],y]}return c}function UN(t,e){const{tau:n}=e,r=new Q;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new Q;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new Ie(t[1],r,i,t[2])}var HN=Object.freeze({__proto__:null,curve:md,jumpover:LN,normal:RN,rounded:MN,smooth:IN,straight:gd});const ae={TOOLS:_e.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Gn=_e.extend({className:function(){var t=_e.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){_e.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[ae.RENDER],attrs:[ae.UPDATE],router:[ae.UPDATE],connector:[ae.CONNECTOR],smooth:[ae.UPDATE],manhattan:[ae.UPDATE],toolMarkup:[ae.LEGACY_TOOLS],labels:[ae.LABELS],labelMarkup:[ae.LABELS],vertices:[ae.VERTICES,ae.UPDATE],vertexMarkup:[ae.VERTICES],source:[ae.SOURCE,ae.UPDATE],target:[ae.TARGET,ae.UPDATE]},initFlag:[ae.RENDER,ae.SOURCE,ae.TARGET,ae.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,ae.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,ae.SOURCE)}if(this.hasFlag(t,ae.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,ae.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,ae.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[ae.RENDER,ae.UPDATE,ae.VERTICES,ae.LABELS,ae.TOOLS,ae.LEGACY_TOOLS,ae.CONNECTOR]),t;let s=!1;this.hasFlag(t,ae.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,ae.VERTICES));const{model:a}=this,{attributes:u}=a;let c=this.hasFlag(t,ae.LABELS),l=this.hasFlag(t,ae.LEGACY_TOOLS);c&&(this.onLabelsChange(a,u.labels,e),t=this.removeFlag(t,ae.LABELS),s=!0),l&&(this.renderTools(),t=this.removeFlag(t,ae.LEGACY_TOOLS));const g=this.hasFlag(t,ae.UPDATE),p=this.hasFlag(t,ae.CONNECTOR);return(g||p)&&(g?e.translateBy&&a.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[ae.UPDATE,ae.TOOLS,ae.CONNECTOR]),c=!1,l=!1,s=!0),c&&this.updateLabelPositions(),l&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(t,ae.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,ae.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(ae.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1){var i=!!e[n[1]];if(i){if(r===2)return"markup"in Object(t.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=xt(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var s=e[r],a=s.attr("class");a&&(a=AI(a),n[se.camelCase(a)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=xt(t),n=document.createDocumentFragment();if(!Array.isArray(e))n.appendChild(e.node);else for(var r=0,i=e.length;r<i;r++){var s=e[r].node;n.appendChild(s)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?n=xt("g").append(e):n=xt(r[0]),n.addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],a=s.length;if(a===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=xt("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(Xr(nn(this,"className"))),e.attr("model-id",i.id)));for(var u=0;u<a;u++){var c=s[u],l=this._normalizeLabelMarkup(this._getLabelMarkup(c.markup)),g,p;if(l)g=l.node,p=l.selectors;else{var y=i._builtins.defaultLabel,_=this._normalizeLabelMarkup(this._getLabelMarkup(y.markup)),w=i._getDefaultLabel(),x=this._normalizeLabelMarkup(this._getLabelMarkup(w.markup)),T=x||_;g=T.node,p=T.selectors}g.setAttribute("label-idx",u),e.append(g),n[u]=g;var P=this.selector;if(p[P])throw new Error("dia.LinkView: ambiguous label root selector.");p[P]=g,r[u]=p}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:s}=r;if(!s||!n.hasLabels())return;const{node:a}=s;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(a,n.get("z")):a.parentNode!==t&&t.appendChild(a)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){return e===null?null:e===void 0?n===null?null:n===void 0?t?void 0:r:t?n:cn({},r,n):t?cn({},n,e):cn({},r,n,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:cn({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel,i=r.attrs,s=t._getDefaultLabel(),a=s.markup,u=s.attrs,c=s.size,l=0,g=e.length;l<g;l++){var p=this._labelCache[l];p.setAttribute("cursor",n?"move":"default");var y=this._labelSelectors[l],_=e[l],w=_.markup,x=_.attrs,T=_.size,P=this._mergeLabelAttrs(w||a,x,u,i),k=this._mergeLabelSize(T,c);this.updateDOMSubtreeAttributes(p,P,{rootBBox:new It(k),selectors:y})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=se(this._V.linkTools.node).empty(),e=Fn(this.model.get("toolMarkup")||this.model.toolMarkup),n=xt(e());if(t.append(n.node),this._toolCache=n,this.options.doubleLinkTools){var r;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=Fn(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=xt(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=se(this._V.markerVertices.node).empty(),e=Fn(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(xt(e(Jt({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=se(this._V.markerArrowheads.node);t.empty();var e=Fn(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=xt(e({end:"source"})),this._V.targetArrowhead=xt(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],s=i.length,a=new ze(i);a.simplify({threshold:.001});const u=a.points.map(l=>l.toJSON()),c=u.length;return s===c?0:(n.vertices(u.slice(1,c-1),t),s-c)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new Q(this.sourceAnchor);case"target":return new Q(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new Q(this.sourcePoint);case"target":return new Q(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new ze(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,s=this.findRoute(e);this.route=s;var a=this.findConnectionPoints(s,r,i);this.sourcePoint=a.source,this.targetPoint=a.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r=t[0],i=t[t.length-1],s=this._markerCache,a,u;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),a=Q(e).move(r||n,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),u=Q(n).move(i||e,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=a||e.clone(),s.targetPoint=u||n.clone(),{source:a,target:u}},findAnchorsOrdered:function(t,e,n,r){var i,s,a,u,c=this.model,l=c.get(t),g=c.get(n),p=this.getEndView(t),y=this.getEndView(n),_=this.getEndMagnet(t),w=this.getEndMagnet(n);p?(e?a=new Q(e):y?a=w:a=new Q(g),i=this.getAnchor(l.anchor,p,_,a,t)):i=new Q(l),y?(u=new Q(r||i),s=this.getAnchor(g.anchor,y,w,u,n)):s=new Q(g);var x={};return x[t]=i,x[n]=s,x},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r=t[0],i=t[t.length-1],s=this.model,a=s.get("source"),u=s.get("target"),c=this.sourceView,l=this.targetView,g=this.paper.options,p,y,_;if(c&&!c.isNodeConnection(this.sourceMagnet)){p=this.sourceMagnet||c.el;var w=a.connectionPoint||g.defaultConnectionPoint,x=r||n,T=new Dt(x,e);_=this.getConnectionPoint(w,c,p,T,"source")}else _=e;var P;if(l&&!l.isNodeConnection(this.targetMagnet)){y=this.targetMagnet||l.el;var k=u.connectionPoint||g.defaultConnectionPoint,q=i||e,B=new Dt(q,n);P=this.getConnectionPoint(k,l,y,B,"target")}else P=n;return{source:_,target:P}},getAnchor:function(t,e,n,r,i){var s=e.isNodeConnection(n),a=this.paper.options;if(t||(s?t=a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=a.defaultAnchor),!t)throw new Error("Anchor required.");var u;if(typeof t=="function")u=t;else{var c=t.name,l=s?"linkAnchorNamespace":"anchorNamespace";if(u=a[l][c],typeof u!="function")throw new Error("Unknown anchor: "+c)}var g=u.call(this,e,n,r,t.args||{},i,this);return g?g.round(this.decimalsRounding):new Q},getConnectionPoint:function(t,e,n,r,i){var s,a=r.end,u=this.paper.options;if(typeof u.linkConnectionPoint=="function"){var c=n===e.el?void 0:n;if(s=u.linkConnectionPoint(this,e,c,r.start,i),s)return s}if(!t)return a;var l;if(typeof t=="function")l=t;else{var g=t.name;if(l=u.connectionPointNamespace[g],typeof l!="function")throw new Error("Unknown connection point: "+g)}return s=l.call(this,r,e,n,t.args||{},i,this),s?s.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,n=e.position,r=t._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return cn({},n,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:cn({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),i=0,s=n.length;i<s;i++){var a=this._labelCache[i];if(a){var u=n[i],c=this._normalizeLabelPosition(u.position),l=this._mergeLabelPositionProperty(c,r),g=this._getLabelTransformationMatrix(l);a.setAttribute("transform",xt.matrixToTransformString(g)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let i in r){const{id:s}=r[i];s&&s in e&&delete e[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(se.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),s=i&&i.id;if(!s)return this[r]=null,this.updateEndMagnet(t),!0;const a=n.getModelById(s);if(!a)throw new Error("LinkView: invalid "+t+" cell.");const u=a.findView(n);return u?(this[r]=u,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=Ce(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:cn({},e,t)},addLabel:function(t,e,n,r){var i,s,a=0,u;typeof t!="number"?(i=t.x,s=t.y,typeof e=="number"?(a=e,u=n):u=e):(i=t,s=e,typeof n=="number"?(a=n,u=r):u=n);var c=this._getDefaultLabelPositionArgs(),l=u,g=this._mergeLabelPositionArgs(l,c),p={position:this.getLabelPosition(i,s,a,g)},y=-1;return this.model.insertLabel(y,p,u),y},addVertex:function(t,e,n){var r=typeof t!="number",i=r?t.x:t,s=r?t.y:e,a=r?e:n,u={x:i,y:s},c=this.getVertexIndex(i,s);return this.model.insertVertex(c,u,a),c},sendToken:function(t,e,n){function r(p,y){return function(){p.remove(),typeof y=="function"&&y()}}var i,s,a;Me(e)?(i=e.duration,s=e.direction==="reverse",a=e.connection):(i=e,s=!1,a=null),i=i||1e3;var u={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(u.keyPoints="1;0",u.keyTimes="0;1");var c=xt(t),l;if(typeof a=="string")l=this.findBySelector(a,this.el,this.selectors)[0];else{var g=this._V;l=g.connection?g.connection.node:this.el.querySelector("path")}if(!(l instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");c.appendTo(this.paper.cells).animateAlongPath(u,l),setTimeout(r(c,n),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||vN,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n)if(r)n=r;else return t.map(Q);var i=Ge(n)?n:e[n.name];if(!Ge(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var s=n.args||{},a=i.call(this,t,s,this);return a||t.map(Q)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||HN,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var a=Ge(i)?i:r[i.name];if(!Ge(a))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var u=ci(i.args||{});u.raw=!0;var c=a.call(this,e,n,t,u,this);return typeof c=="string"&&(c=new jt(xt.normalizePathData(c))),c},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Tn(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i={},s=0,a;typeof n=="number"?(s=n,a=r):a=n,a&&(i.args=a);var u=!(a&&a.absoluteDistance),c=a&&a.absoluteDistance&&a.reverseDistance,l=a&&a.absoluteOffset,g=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},y=new Q(t,e),_=g.closestPointT(y,p),w=g.lengthAtT(_,p);u&&(w=w/this.getConnectionLength()||0),c&&(w=-1*(this.getConnectionLength()-w)||1),i.distance=w;var x;l||(x=g.tangentAtT(_));var T;if(x)T=x.pointOffset(y);else{var P=g.pointAtT(_),k=y.difference(P);T={x:k.x,y:k.y}}return i.offset=T,i.angle=s,i},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")r=t.args||{},e=t.distance,n=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,s=0,a={x:0,y:0};if(t.offset){var u=t.offset;typeof u=="number"&&(s=u),u.x&&(a.x=u.x),u.y&&(a.y=u.y)}var c=a.x!==0||a.y!==0||s===0,l=r.keepGradient,g=r.ensureLegibility,p=this.path,y={segmentSubdivisions:this.getConnectionSubdivisions()},_=i?e*this.getConnectionLength():e,w=p.tangentAtLength(_,y),x,T=n;if(w){if(c)x=w.start.clone(),x.offset(a);else{var P=w.clone();P.rotate(w.start,-90),P.setLength(s),x=P.end}l&&(T=w.angle()+n,g&&(T=Hr((T+90)%180-90)))}else x=p.start.clone(),c&&x.offset(a);return xt.createSVGMatrix().translate(x.x,x.y).rotate(T)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new Q(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model,r=n.vertices(),i=this.getClosestPointLength(new Q(t,e)),s=0,a=r.length;s<a;s++){var u=r[s],c=this.getClosestPointLength(u);if(i<c)break}return s},notifyPointerdown(t,e,n){_e.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){_e.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),_e.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){_e.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){_e.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){_e.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n);var r=t.target.getAttribute("class");switch(r){case"marker-vertex":this.dragVertexStart(t,e,n);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,n);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,n);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,n);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;r&&this.eventData(t,r);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n);break}r&&Jt(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;r&&(this.eventData(t,r),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){_e.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){_e.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){_e.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){_e.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){_e.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var i=xt(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,n,r);this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else _e.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n);var r=this.eventData(t).stopPropagation;r&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),a=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),u=this._mergeLabelPositionProperty(a,s),c=this.getLabelCoordinates(u),l=c.x-e,g=c.y-n,p=this._getLabelPositionAngle(i),y=this._getLabelPositionArgs(i),_=this._getDefaultLabelPositionArgs(),w=this._mergeLabelPositionArgs(y,_);this.eventData(t,{action:"label-move",labelIdx:i,dx:l,dy:g,positionAngle:p,positionArgs:w,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target,i=r.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,s)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(s.async=!1),this.model.label(r.labelIdx,i,s)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n),s=i&&!Ma.endsEqual(r,i);if(s){var a=this.paper;r.id&&this.notify("link:disconnect",e,a.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,a.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,s=null,a=1/0,u=t.x,c=t.y;for(let l=0;l<e.length;l++){const g=Math.abs(e[l].x-t.x);g<i&&(i=g,r=e[l]);const p=Math.abs(e[l].y-t.y);p<a&&(a=p,s=e[l])}return i<n&&(u=r.x),a<n&&(c=s.y),{x:u,y:c}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:s}=r.options,a=this.eventData(t),u=s.radius||20,c=this.getEndAnchor(a.arrowhead==="source"?"target":"source"),l=i.vertices(),g=[c,...l],p=this._snapToPoints({x:e,y:n},g,u),y=r.localToClientPoint(p);this._connectArrowhead(document.elementFromPoint(y.x,y.y),p.x,p.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:s}=r.options,a=this.eventData(t);let u=!1;var c=i.radius||50,l=r.findViewsInArea({x:e-c,y:n-c,width:2*c,height:2*c}),g=a.closestView||null,p=a.closestMagnet||null,y=a.magnetProxy||null;a.closestView=a.closestMagnet=a.magnetProxy=null;var _=Number.MAX_VALUE,w=new Q(e,n);l.forEach(function(H){const X=[];H.el.getAttribute("magnet")!=="false"&&X.push({bbox:H.model.getBBox(),magnet:H.el}),H.$("[magnet]").toArray().forEach(d=>{X.push({bbox:H.getNodeBBox(d),magnet:d})}),X.forEach(d=>{const{magnet:E,bbox:L}=d,I=L.center().squaredDistance(w);I<_&&(p===E||r.options.validateConnection.apply(r,a.validateConnectionArgs(H,H.el===E?null:E)))&&(_=I,a.closestView=H,a.closestMagnet=E)})},this);var x,T=null,P=a.closestView,k=a.closestMagnet;k&&(T=a.magnetProxy=P.findProxyNode(k,"highlighter"));var q=a.arrowhead,B=p!==k;if(g&&B&&g.unhighlight(y,{connecting:!0,snapping:!0}),P){const{prevEnd:H,prevX:X,prevY:d}=a;if(a.prevX=e,a.prevY=n,u=!0,!B&&(typeof s!="function"||X===e&&d===n)||(x=P.getLinkEnd(k,e,n,this.model,q),!B&&Ra(H,x)))return u;a.prevEnd=x,B&&P.highlight(T,{connecting:!0,snapping:!0})}else x={x:e,y:n};return this.model.set(q,x||{x:e,y:n},{ui:!0}),g&&this.notify("link:snap:disconnect",t,g,p,q),P&&this.notify("link:snap:connect",t,P,k,q),u},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:s}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const a=r.viewUnderPointer=i.findView(t);if(a){const u=r.magnetUnderPointer=a.findMagnet(t),c=r.magnetProxy=a.findProxyNode(u,"highlighter");u&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(a,u))?c&&a.highlight(c,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,s.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:a,arrowhead:u}=t;if(!s||!a||!i)return;i.unhighlight(a,{connecting:!0});const c=i.getLinkEnd(s,e,n,r,u);r.set(u,c,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,i=0;t==="source"?(r=2,n="target"):(i=2,n="source");var s=this.model.get(n);if(s.id){var a=e[r]=this.paper.findViewByModel(s.id),u=a.getMagnetFromLinkEnd(s);u===a.el&&(u=void 0),e[r+1]=u}function c(l,g){return e[i]=l,e[i+1]=l.el===g?void 0:g,e}return c},_markAvailableMagnets:function(t){function e(p,y){var _=p.paper,w=_.options.validateConnection;return w.apply(_,this.validateConnectionArgs(p,y))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,s=r.length;i<s;i++){var a=r[i].findView(n);if(a){var u=Array.prototype.slice.call(a.el.querySelectorAll("[magnet]"));a.el.getAttribute("magnet")!=="false"&&u.push(a.el);var c=u.filter(e.bind(t,a));if(c.length>0){for(var l=0,g=c.length;l<g;l++)a.highlight(c[l],{magnetAvailability:!0});a.highlight(null,{elementAvailability:!0}),t.marked[a.model.id]=c}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),n,r,i=0,s=e.length;i<s;i++){n=e[i],r=t.marked[n];var a=this.paper.findViewByModel(n);if(a){for(var u=0,c=r.length;u<c;u++)a.unhighlight(r[u],{magnetAvailability:!0});a.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:ci(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){_e.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){_e.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){_e.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:ae});Object.defineProperty(Gn.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new It(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new It(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(Gn.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new It(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new It(this.targetAnchor):t.getNodeBBox(n||t.el)}});const $N=Yr.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const s=xt(e);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&r){const a=i.search(/.M/i)+1;a>0&&(i=i.substr(0,a))}}catch{const a=t.getNodeBoundingRect(e);i=xt.rectToPath(Jt({},n,a.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:s}=r;let a=this.getNodeMatrix(t,e);if(i){!s&&e===t.el&&n.remove();let u=t.getNodeBoundingRect(e);const c=u.x+u.width/2,l=u.y+u.height/2;u=xt.transformRect(u,a);const g=Math.max(u.width,1),p=Math.max(u.height,1),y=(g+i)/g,_=(p+i)/p,w=xt.createSVGMatrix({a:y,b:0,c:0,d:_,e:c-y*c,f:l-_*l});a=a.multiply(w)}n.attr({d:this.getPathData(t,e),transform:xt.matrixToTransformString(a)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),eA=20;function WN(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}const jN=Yr.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:eA,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,s=e.tagName();if(!xt.isSVGGraphicsElement(e)||i.includes(s))return e.remove(),!1;if(r.includes(s)){const a=t.vel.findOne(`#${e.id}`);if(a){const{node:u}=a;let c=t.getNodeBoundingRect(u);t.model.isElement()&&(c=xt.transformRect(c,t.getNodeMatrix(u)));const l=xt("rect",c.toJSON()),{x:g,y:p}=c.center(),{angle:y,cx:_=g,cy:w=p}=a.rotate();y&&l.rotate(y,_,w),e.parent().append(l)}return e.remove(),!1}return n.forEach(a=>{a==="fill"&&e.attr("fill")==="none"||e.removeAttr(a)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,s=e.tagName();let a;if(s==="G"){if(!i)return null;a=e.clone(),WN(a,u=>this.transformMaskChild(t,u))}else{if(r.includes(s))return null;a=e.clone()}return this.transformMaskRoot(t,a),a},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:s,attrs:a}=i,u="stroke-width"in a?a["stroke-width"]:1,c=e.attr("fill")!=="none";let l=parseFloat(e.attr("stroke-width"));isNaN(l)&&(l=1);const g=l+s*2,p=g+u*2;let y=this.getMaskShape(t,e);if(!y){const _=t.getNodeBoundingRect(e.node);_.inflate(_.width?0:.5,_.height?0:.5),y=xt("rect",_.toJSON())}return y.attr(a),xt("mask",{id:this.getMaskId()}).append([y.clone().attr({fill:c?n:"none",stroke:n,"stroke-width":p}),y.clone().attr({fill:c?r:"none",stroke:r,"stroke-width":g})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:s,maskClip:a=eA,layer:u}=n,c="stroke"in s?s.stroke:"#000000";!u&&e===t.el&&r.remove();const l=t.getNodeBoundingRect(e).inflate(i+a),g=this.getNodeMatrix(t,e),p=this.getMask(t,xt(e));this.addMask(t.paper,p),r.attr(l.toJSON()),r.attr({transform:xt.matrixToTransformString(g),mask:`url(#${p.id})`,fill:c})},unhighlight(t){this.removeMask(t.paper)}}),XN=Yr.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Xr("highlight-opacity"),highlight:function(t,e){xt(e).addClass(this.opacityClassName)},unhighlight:function(t,e){xt(e).removeClass(this.opacityClassName)}}),nA=Xr("highlighted"),YN=Yr.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:nA},highlight:function(t,e){xt(e).addClass(this.options.className)},unhighlight:function(t,e){xt(e).removeClass(this.options.className)}},{className:nA}),bd={ROW:"row",COLUMN:"column"},KN=Yr.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:s=5,direction:a=bd.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const u=typeof i=="number"?{width:i,height:i}:i,c=a===bd.ROW,l=c?u.width:u.height;let g=n.get(r);Array.isArray(g)||(g=[]);const p=this._prevItems||[],y=g.map((T,P)=>Ra(p[P],g[P]));if(p.length!==g.length||y.some(T=>!T)){const T=this.vel.children(),P=g.map((k,q)=>{const B=q in T?T[q].node:null;if(y[q])return B;const H=this.createListItem(k,u,B);if(!H)return null;if(!(H instanceof SVGElement))throw new Error("List: item must be an SVGElement");H.dataset.index=q,H.dataset.attribute=r;const X=q*(l+s);return H.setAttribute("transform",c?`translate(${X}, 0)`:`translate(0, ${X})`),H});this.vel.empty().append(P),this._prevItems=g}const _=g.length,w=_===0?0:_*l+(_-1)*s,x=c?{width:w,height:u.height}:{width:u.width,height:w};this.position(n,x)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:s="top-left"}=r,{width:a,height:u}=t.size(),{left:c,right:l,top:g,bottom:p}=zs(i),y=new It(c,g,a-(c+l),u-(g+p));let{x:_,y:w}=yx(y,s);switch(s){case Qe.CENTER:case Qe.TOP:case Qe.BOTTOM:{_-=e.width/2;break}case Qe.RIGHT:case Qe.BOTTOM_RIGHT:case Qe.TOP_RIGHT:{_-=e.width;break}}switch(s){case Qe.CENTER:case Qe.RIGHT:case Qe.LEFT:{w-=e.height/2;break}case Qe.BOTTOM:case Qe.BOTTOM_RIGHT:case Qe.BOTTOM_LEFT:{w-=e.height;break}}n.attr("transform",`translate(${_}, ${w})`)}},{Directions:bd,Positions:Qe});var ZN=Object.freeze({__proto__:null,addClass:YN,list:KN,mask:jN,opacity:XN,stroke:$N});function JN(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function QN(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function t2(t,e,n,r){var i=1e6,s=t.getConnection(),a=t.getConnectionSubdivisions(),u=new Dt(n.clone().offset(0,i),n.clone().offset(0,-1e6)),c=new Dt(n.clone().offset(i,0),n.clone().offset(-1e6,0)),l=u.intersect(s,{segmentSubdivisions:a}),g=c.intersect(s,{segmentSubdivisions:a}),p=[];return l&&Array.prototype.push.apply(p,l),g&&Array.prototype.push.apply(p,g),p.length>0?n.chooseClosest(p):"fallbackAt"in r?rA(t,r.fallbackAt):iA(t,e,n,r)}function e2(t,e,n,r){var i=t.getClosestPoint(n);return i||new Q}function Uo(t){return function(e,n,r,i){if(r instanceof Element){var s=this.paper.findView(r),a;if(s)if(s.isNodeConnection(r)){var u="fixedAt"in i?i.fixedAt:"50%";a=rA(s,u)}else a=s.getNodeBBox(r).center();else a=new Q;return t.call(this,e,n,a,i)}return t.apply(this,arguments)}}function rA(t,e){var n=parseFloat(e);return Tn(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const n2=Uo(t2),iA=Uo(e2);var r2=Object.freeze({__proto__:null,connectionClosest:iA,connectionLength:QN,connectionPerpendicular:n2,connectionRatio:JN,resolveRef:Uo});function Fc(t,e,n){if(en(n)){const{x:i,y:s}=n;if(isFinite(s)){const a=new Dt(e,t),{start:u,end:c}=a.parallel(s);e=u,t=c}n=i}if(!isFinite(n))return t;var r=t.distance(e);return n===0&&r>0?t:t.move(e,-Math.min(n,r-1))}function _d(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function i2(t,e,n=0){let r,i,s,a;const{start:u,end:c}=t;switch(e){case"left":r="x",i=c,s=u,a=-1;break;case"right":r="x",i=u,s=c,a=1;break;case"top":r="y",i=c,s=u,a=-1;break;case"bottom":r="y",i=u,s=c,a=1;break;default:return}u[r]<c[r]?i[r]=s[r]:s[r]=i[r],isFinite(n)&&(i[r]+=a*n,s[r]+=a*n)}function s2(t,e,n,r){let{offset:i,alignOffset:s,align:a}=r;return a&&i2(t,a,s),Fc(t.end,t.start,i)}function sA(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(_d(n)/2);var s=t.intersect(i),a=s?t.start.chooseClosest(s):t.end;return Fc(a,t.start,r.offset)}function a2(t,e,n,r){var i=e.model.angle();if(i===0)return sA(t,e,n,r);var s=e.getNodeUnrotatedBBox(n);r.stroke&&s.inflate(_d(n)/2);var a=s.center(),u=t.clone().rotate(a,i),c=u.setLength(1e6).intersect(s),l=c?u.start.chooseClosest(c).rotate(a,-i):t.end;return Fc(l,t.start,r.offset)}function o2(t){if(!t)return null;var e=t;do{var n=e.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")e=e.firstElementChild;else if(n==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var wd="segmentSubdivisons",xd="shapeBBox";function u2(t,e,n,r){var i,s,a=r.selector,u=t.end;if(typeof a=="string"?i=e.findBySelector(a)[0]:a===!1?i=n:Array.isArray(a)?i=Io(n,a):i=o2(n),!xt.isSVGGraphicsElement(i)){if(i===n||!xt.isSVGGraphicsElement(n))return u;i=n}var c=e.getNodeShape(i),l=e.getNodeMatrix(i),g=e.getRootTranslateMatrix(),p=e.getRootRotateMatrix(),y=g.multiply(p).multiply(l),_=y.inverse(),w=xt.transformLine(t,_),x=w.start.clone(),T=e.getNodeData(i);if(r.insideout===!1){T[xd]||(T[xd]=c.bbox());var P=T[xd];if(P.containsPoint(x))return u}var k;if(c instanceof jt){var q=r.precision||2;T[wd]||(T[wd]=c.getSegmentSubdivisions({precision:q})),k={precision:q,segmentSubdivisions:T[wd]}}r.extrapolate===!0&&w.setLength(1e6),s=w.intersect(c,k),s?xt.isArray(s)&&(s=x.chooseClosest(s)):r.sticky===!0&&(c instanceof It?s=c.pointNearestToPoint(x):c instanceof qn?s=c.intersectionWithLineFromCenterToPoint(x):s=c.closestPoint(x,k));var B=s?xt.transformPoint(s,y):u,H=r.offset||0;return r.stroke&&(H+=_d(i)/2),Fc(B,t.start,H)}var c2=Object.freeze({__proto__:null,anchor:s2,bbox:sA,boundary:u2,rectangle:a2});function Ni(t){return function(e,n,r,i){var s=!!i.rotate,a=s?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),u=a[t](),c=i.dx;if(c){var l=Tn(c);c=parseFloat(c),isFinite(c)&&(l&&(c/=100,c*=a.width),u.x+=c)}var g=i.dy;if(g){var p=Tn(g);g=parseFloat(g),isFinite(g)&&(p&&(g/=100,g*=a.height),u.y+=g)}return s?u.rotate(e.model.getBBox().center(),-e.model.angle()):u}}function f2(t,e,n,r){var i=t.model.angle(),s=t.getNodeBBox(e),a=s.center(),u=s.origin(),c=s.corner(),l=r.padding;if(isFinite(l)||(l=0),u.y+l<=n.y&&n.y<=c.y-l){var g=n.y-a.y;a.x+=i===0||i===180?0:g*1/Math.tan(Yn(i)),a.y+=g}else if(u.x+l<=n.x&&n.x<=c.x-l){var p=n.x-a.x;a.y+=i===90||i===270?0:p*Math.tan(Yn(i)),a.x+=p}return a}function l2(t,e,n,r){var i=!!r.rotate,s,a,u;i?(s=t.getNodeUnrotatedBBox(e),u=t.model.getBBox().center(),a=t.model.angle()):s=t.getNodeBBox(e);var c=r.padding;isFinite(c)&&s.inflate(c),i&&n.rotate(u,a);var l=s.sideNearestToPoint(n),g;switch(l){case"left":g=s.leftMiddle();break;case"right":g=s.rightMiddle();break;case"top":g=s.topMiddle();break;case"bottom":g=s.bottomMiddle();break}return i?g.rotate(u,-a):g}function h2(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)}const d2=Ni("center"),p2=Ni("topMiddle"),g2=Ni("bottomMiddle"),v2=Ni("leftMiddle"),m2=Ni("rightMiddle"),y2=Ni("origin"),b2=Ni("topRight"),_2=Ni("bottomLeft"),w2=Ni("corner"),x2=Uo(f2),A2=Uo(l2);var S2=Object.freeze({__proto__:null,bottom:g2,bottomLeft:_2,bottomRight:w2,center:d2,left:v2,midSide:A2,modelCenter:h2,perpendicular:x2,right:m2,top:p2,topLeft:y2,topRight:b2});const Ba={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},T2=50,aA=20,oA=1e3,E2=1/0,Vc=9007199254740991,Ad=_e.Highlighting,uA={[Ad.DEFAULT]:{name:"stroke",options:{padding:3}},[Ad.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Ad.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},P2=[{name:Rr.BACK},{name:Rr.CELLS},{name:Rr.LABELS},{name:Rr.FRONT},{name:Rr.TOOLS}],C2=Ii.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:yn,linkView:Gn,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:uA,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Ma,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,n,r,i,s){return(i==="target"?n:t)instanceof yn},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Ba.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:ZN,anchorNamespace:S2,linkAnchorNamespace:r2,connectionPointNamespace:c2,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&Mi(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new li;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=se(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!Qn(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),r===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Ba.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:s,origin:a,highlighting:u,cellViewNamespace:c,interactive:l}=t;!c&&typeof joint<"u"&&Mi(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),Ge(e)||(t.defaultConnector=Cr(e)),Ge(n)||(t.defaultRouter=Cr(n)),Ge(r)||(t.defaultConnectionPoint=Cr(r)),Ge(i)||(t.defaultAnchor=Cr(i)),Ge(s)||(t.defaultLinkAnchor=Cr(s)),en(l)&&(t.interactive=Jt({},l)),en(u)&&(t.highlighting=Kh({},u,uA)),t.origin=Jt({},a)},children:function(){var t=xt.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Xr("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Xr("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Xr("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:s,grid:a}=t;return n.style.overflow=e.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=se(s),this.$grid=se(a),this.renderLayers(),xt.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=P2){this.removeLayers(),t.forEach(({name:i,sorted:s})=>{const a=new GI({name:i});this.layers.appendChild(a.el),this._layers[i]=a});const e=this.getLayerView(Rr.CELLS),n=this.getLayerView(Rr.TOOLS),r=this.getLayerView(Rr.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(Xr("viewport")),r.vel.addClass(Xr("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),xt.createSVGMatrix(t)}t=xt.createSVGMatrix(t);var r=xt.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return xt.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof _e)for(var r=t.model,i=this.model.getConnectedLinks(r),s=0,a=i.length;s<a;s++){var u=i[s],c=this.findViewByModel(u);if(c){var l=["UPDATE"];u.getTargetCell()===r&&l.push("TARGET"),u.getSourceCell()===r&&l.push("SOURCE");var g=Math.max(e+1,c.UPDATE_PRIORITY);this.scheduleViewUpdate(c,c.getFlag(l),g,n)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof _e))return!1;var n=t.model;if(n.isElement())return!1;if((e&t.getFlag(["SOURCE","TARGET"]))===0){var r={silent:!0},i=0,s=this.findViewByModel(n.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,r),t.updateEndMagnet("source"));var a=0,u=this.findViewByModel(n.getTargetCell());if(u&&!this.isViewMounted(u)&&(a=this.dumpView(u,r),t.updateEndMagnet("target")),i===0&&a===0)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&r.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(r);i&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:a,FLAG_INSERT:u,UPDATE_PRIORITY:c,cid:l}=t;let g=i.priorities[n];if(g||(g=i.priorities[n]={}),n>c)for(let _=n-1;_>=c;_--){const w=i.priorities[_];!w||!(l in w)||(g[l]|=w[l],delete w[l])}let p=g[l]||0;if((p&e)===e)return;p||i.count++,e&a&&p&u?g[l]^=u:e&u&&p&a&&(g[l]^=a),g[l]|=e;const y=s.onViewUpdate;typeof y=="function"&&y.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const s={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(s,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:s,model:a}=t;if(t instanceof _e){if(e&r)return this.removeView(a),0;if(e&i){const u=!!(e&s);u&&(e^=s),this.insertView(t,u),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){if(!t)return!1;var e=t.cid,n=this._updates;return e in n.mounted},dumpViews:function(t){var e=dr({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,i=Vc;do r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i);while(!e.empty);const s={updated:n,batches:r,priority:i};return this.notifyAfterRender(s,t),s},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:Vc});const{_updates:n,options:r}=this,i=n.id;if(i){ed(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const s=this.updateViewsBatch(t),a=dr({},t,{mountBatchSize:oA-s.mounted,unmountBatchSize:oA-s.unmounted}),u=this.checkViewport(a),c=u.unmounted,l=u.mounted;let g=e.processed;const p=n.count;s.updated>0?(g+=s.updated+s.unmounted,s.processed=g,e.priority=Math.min(s.priority,e.priority),s.empty&&l===0?(s.unmounted+=c,s.mounted+=l,s.priority=e.priority,this.notifyAfterRender(s,t),e.processed=0,e.priority=Vc,n.count=0):e.processed=g):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const y=t.progress;if(p&&typeof y=="function"&&y.call(this,s.empty,g,p,s,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=td(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||E2,n=this._updates,r=0,i=0,s=0,a=0,u=Vc,c=!0,l=this.options,g=n.priorities,p="viewport"in t?t.viewport:l.viewport;typeof p!="function"&&(p=null);var y=l.onViewPostponed;typeof y!="function"&&(y=null);var _=Object.keys(g);t:for(var w=0,x=_.length;w<x;w++){var T=+_[w],P=g[T];for(var k in P){if(r>=e){c=!1;break t}var q=Gs[k];if(!q){delete P[k];continue}var B=P[k];if((B&q.FLAG_REMOVE)===0){var H=k in n.unmounted;if(q.DETACHABLE&&p&&!p.call(this,q,!H,this)){H||(this.registerUnmountedView(q),this.detachView(q)),n.unmounted[k]|=B,delete P[k],s++;continue}H&&(B|=q.FLAG_INSERT,a++),B|=this.registerMountedView(q)}var X=this.updateView(q,B,t);if(X>0&&(P[k]=X,!y||!y.call(this,q,X,this)||P[k])){i++,c=!1;continue}u>T&&(u=T),r++,delete P[k]}}return{priority:u,updated:r,postponed:i,unmounted:s,mounted:a,empty:c}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Gs[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Gs[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;typeof t!="function"&&(t=null);for(var r=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,a=i.unmounted,u=0,c=Math.min(s.length,r);u<c;u++){var l=s[u];if(l in a){var g=Gs[l];if(g){if(g.DETACHABLE&&t&&!t.call(this,g,!1,this)){s.push(l);continue}n++;var p=this.registerMountedView(g);p&&this.scheduleViewUpdate(g,p,g.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,u),n},checkMountedViews:function(t,e){e||(e={});var n=0;if(typeof t!="function")return n;for(var r=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,a=i.mounted,u=0,c=Math.min(s.length,r);u<c;u++){var l=s[u];if(l in a){var g=Gs[l];if(g){if(!g.DETACHABLE||t.call(this,g,!0,this)){s.push(l);continue}n++;var p=this.registerUnmountedView(g);p&&this.detachView(g)}}}return s.splice(0,u),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;typeof n!="function"&&(n=null);const r=this._updates,{mounted:i,unmounted:s}=r,a=!t.DETACHABLE||!n||n.call(this,t,!1,this);let u=!1,c=!1;if(t.cid in i&&!a){this.registerUnmountedView(t)&&this.detachView(t);const p=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(p,1),u=!0}if(!u&&t.cid in s&&a){const g=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(g,1);var l=this.registerMountedView(t);l&&this.scheduleViewUpdate(t,l,t.UPDATE_PRIORITY,{mounting:!0}),c=!0}return{mounted:c?1:0,unmounted:u?1:0}},checkViewport:function(t){var e=dr({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}var s=this.checkUnmountedViews(n,e);return{mounted:s,unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var s=e.id;e.id=null,this.isAsync()&&s&&ed(s)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,!(n&&n===r&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Ba.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return Qn(e)||(e=this.el.clientWidth),Qn(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let s=t===void 0?r:t,a=e===void 0?i:e;if(r===s&&i===a)return;n.width=s,n.height=a,this._setDimensions();const u=this.getComputedSize();this.trigger("resize",u.width,u.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;Qn(e)&&(e=Math.round(e)),Qn(n)&&(n=Math.round(n)),this.$el.css({width:e===null?"":e,height:n===null?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){Me(t)?r=t:r=Jt({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:s,width:a,height:u}=this.getFitToContentArea(r),{sx:c,sy:l}=this.scale();return this.setOrigin(-i*c,-s*l),this.setDimensions(a*c,u*l),new It(i,s,a,u)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=zs(t.padding||0),i=Math.max(t.minWidth||0,e),s=Math.max(t.minHeight||0,n),a=t.maxWidth||Number.MAX_VALUE,u=t.maxHeight||Number.MAX_VALUE,c=t.allowNewOrigin,l="contentArea"in t?new It(t.contentArea):this.getContentArea(t),{sx:g,sy:p}=this.scale();l.x*=g,l.y*=p,l.width*=g,l.height*=p;let y=Math.ceil((l.width+l.x)/e),_=Math.ceil((l.height+l.y)/n);t.allowNegativeBottomRight||(y=Math.max(y,1),_=Math.max(_,1)),y*=e,_*=n;let w=0;(c==="negative"&&l.x<0||c==="positive"&&l.x>=0||c==="any")&&(w=Math.ceil(-l.x/e)*e,w+=r.left,y+=w);let x=0;return(c==="negative"&&l.y<0||c==="positive"&&l.y>=0||c==="any")&&(x=Math.ceil(-l.y/n)*n,x+=r.top,_+=x),y+=r.right,_+=r.bottom,y=Math.max(y,i),_=Math.max(_,s),y=Math.min(y,a),_=Math.min(_,u),new It(-w/g,-x/p,y/g,_/p)},transformToFitContent:function(t){t||(t={});let e,n;if("contentArea"in t){const T=t.contentArea;e=this.localToPaperRect(T),n=new Q(T)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;dr(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=zs(t.padding),i=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,a=t.minScaleY||t.minScale,u=t.maxScaleY||t.maxScale;let c;if(t.fittingBBox)c=t.fittingBBox;else{const T=this.translate(),P=this.getComputedSize();c={x:T.tx,y:T.ty,width:P.width,height:P.height}}c=new It(c).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const l=this.scale();let g=c.width/e.width*l.sx,p=c.height/e.height*l.sy;if(t.preserveAspectRatio&&(g=p=Math.min(g,p)),t.scaleGrid){const T=t.scaleGrid;g=T*Math.floor(g/T),p=T*Math.floor(p/T)}g=Math.min(s,Math.max(i,g)),p=Math.min(u,Math.max(a,p));const y={x:g/l.sx,y:p/l.sy},_=this.options.origin;let w=c.x-n.x*g-_.x,x=c.y-n.y*p-_.y;switch(t.verticalAlign){case"middle":x=x+(c.height-e.height*y.y)/2;break;case"bottom":x=x+(c.height-e.height*y.y);break}switch(t.horizontalAlign){case"middle":w=w+(c.width-e.width*y.x)/2;break;case"right":w=w+(c.width-e.width*y.x);break}this.scale(g,p),this.translate(w,x)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new It:xt(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return Ge(e)?n=e.apply(this,t):e===!0?n=this.getArea():e?n=new It(e):n=null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,s=t.get("type")+"View",a=Io(i,s,".");t.isLink()?(n=e.linkView,r=Gn):(n=e.elementView,r=yn);var u=n.prototype instanceof Rn.View?a||n:n.call(this,t)||a||r;return new u({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?Rr.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:s}=i;const{mounted:a,unmounted:u}=r;i.remove(),delete n[e],delete a[s],delete u[s]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,s,a=!0;return n in r&&(i=r[n],i.model===t?(s=i.FLAG_INSERT,a=!1):this.removeView(t)),a&&(i=r[n]=this.createViewForModel(t),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(nn(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){jr(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=se(this.cells).children("[model-id]"),e=this.model.get("cells");OI(t,function(n,r){var i=e.get(n.getAttribute("model-id")),s=e.get(r.getAttribute("model-id")),a=i.attributes.z||0,u=s.attributes.z||0;return a===u?0:a<u?-1:1})},insertView:function(t,e){const n=this.getLayerView(Rr.CELLS),{el:r,model:i}=t;switch(this.options.sorting){case Ba.APPROX:n.insertSortedNode(r,i.get("z"));break;case Ba.EXACT:default:n.insertNode(r);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,n,r){if(t===void 0)return xt.matrixToScale(this.matrix());e===void 0&&(e=t),n===void 0&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var s=i.tx-n*(t-1),a=i.ty-r*(e-1);this.translate(s,a)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var u=this.matrix();return u.a=t,u.d=e,this.matrix(u),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(t===void 0)return xt.matrixToRotate(this.matrix());if(e===void 0){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return xt.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const s=this.matrix();if(s.e===t&&s.f===e)return this;s.e=t,s.f=e,this.matrix(s);const{tx:a,ty:u}=this.translate();return r.x=a,r.y=u,this.trigger("translate",a,u),i&&this.drawGrid(),this},findView:function(t){var e=On(t)?this.cells.querySelector(t):t instanceof se?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=On(t)||Qn(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new Q(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=dr(e||{},{strict:!1}),t=new It(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(i){return i&&t[r](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new Q(t,e),r=xt.transformPoint(n,this.matrix());return r},localToPaperRect:function(t,e,n,r){var i=new It(t,e,n,r),s=xt.transformRect(i,this.matrix());return s},paperToLocalPoint:function(t,e){var n=new Q(t,e),r=xt.transformPoint(n,this.matrix().inverse());return r},paperToLocalRect:function(t,e,n,r){var i=new It(t,e,n,r),s=xt.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(t,e){var n=new Q(t,e),r=xt.transformPoint(n,this.clientMatrix());return r},localToClientRect:function(t,e,n,r){var i=new It(t,e,n,r),s=xt.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(t,e){var n=new Q(t,e),r=xt.transformPoint(n,this.clientMatrix().inverse());return r},clientToLocalRect:function(t,e,n,r){var i=new It(t,e,n,r),s=xt.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new Q(t,e),r=n.difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),s=new It(t,e,n,r);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new Q(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Gn))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||typeof n.allowLink=="function"&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return Ge(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(e===void 0){if(!r||n&&(e=r[n],e===!1))return!1;e||(e=r.default)}if(!e)return!1;On(e)&&(e={name:e});const s=e.name,a=i[s];if(!a)throw new Error('Unknown highlighter ("'+s+'")');if(typeof a.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof a.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:a,options:e.options||{},name:s}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:s}=r;i.highlight(t,e,s)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:s}=r;i.unhighlight(t,e,s)},pointerdblclick:function(t){t.preventDefault(),t=rn(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=rn(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=rn(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=rn(t);const{target:e,button:n}=t,r=this.findView(e),i=n===2;if(r){if(!i&&this.guard(t,r))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!s&&t.preventDefault(),s&&r.preventDefaultInteraction(t);const a=this.customEventTrigger(t,r);if(a){if(a.isPropagationStopped())return;t.data=a.data}const u=e.closest("[magnet]");if(u&&r.el!==u&&r.el.contains(u)){const c=rn(se.Event(t.originalEvent,{data:t.data,currentTarget:u}));if(this.onmagnet(c),c.isDefaultPrevented()&&t.preventDefault(),c.isPropagationStopped()){if(i)return;this.delegateDragEvents(r,c.data);return}t.data=c.data}}if(i){this.contextMenuFired=!0;const s=se.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,s.x,s.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,s.x,s.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var n=++e.mousemoved;if(!(n<=this.options.moveThreshold)){t=rn(t);var r=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=rn(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(se.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=rn(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=rn(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=rn(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const s=this.findView(n);i&&(s===i||(i.mouseenter(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=rn(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const s=this.findView(n);i&&(s===i||(i.mouseleave(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:gI(function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce((a,u)=>a+PI(u,T2),0),r=Math.pow(.995,n),{x:i,y:s}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,s,r),this._mw_evt_buffer={event:null,deltas:[]}},aA,{maxWait:aA}),mousewheel:function(t){t=rn(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:s}=EI(n),a=this._events["paper:pinch"];if(t.ctrlKey&&a&&a.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const u=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,u):this.trigger("blank:mousewheel",t,r.x,r.y,u),this.trigger("paper:pan",t,i,s)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=rn(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r){var i=this.findView(n);if(i){if(t=rn(t),this.guard(t,i))return;var s=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,s.x,s.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=se.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,n,r,i,s){e.onmagnet(n,i,s)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,i,s){e.magnetpointerdblclick(n,r,i,s)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,n,r,i,s){e.magnetcontextmenu(n,r,i,s)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(!n||(t=rn(t),this.guard(t,n)))return;const r=this.customEventTrigger(t,n,e);if(r){if(r.isPropagationStopped())return;t.data=r.data}var i=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,i.x,i.y)},getPointerArgs(t){const e=rn(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;const{target:n}=t;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(e&&e.model&&e.model instanceof fi||this.svg===n||this.el===n||se.contains(this.svg,n))},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:xt("svg",{width:"100%",height:"100%"},xt("defs")),patterns:{},add:function(t,e){xt(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(xt("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(On(t)&&Array.isArray(e[t]))return e[t].map(function(c){return Jt({},c)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(!r&&!i&&!n.markup&&(i="dot"),i&&Array.isArray(e[i])){var s=e[i].map(function(c){return Jt({},c)}),a=Array.isArray(n.args)?n.args:[n.args||{}];dr(a[0],Vs(t,"args"));for(var u=0;u<a.length;u++)s[u]&&Jt(s[u],a[u]);return s}return r?n:[n]},drawGrid:function(t){const e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(a,u){var c="pattern_"+u,l=cn(a,n[u],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});l.width=e*(r.a||1)*(l.scaleFactor||1),l.height=e*(r.d||1)*(l.scaleFactor||1),i.exist(c)||i.add(c,xt("pattern",{id:c,patternUnits:"userSpaceOnUse"},xt(l.markup)));var g=i.get(c);Ge(l.update)&&l.update(g.node.childNodes[0],l);var p=l.ox%l.width;p<0&&(p+=l.width);var y=l.oy%l.height;y<0&&(y+=l.height),g.attr({x:p,y,width:l.width,height:l.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();if(Me(e)){var s=i.tx+r.sx*(e.x||0),a=i.ty+r.sy*(e.y||0);e=s+"px "+a+"px"}Me(n)&&(n=new It(n).scale(r.sx,r.sy),n=n.width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var n,r=e.size,i=e.repeat||"no-repeat",s=e.opacity||1,a=Math.abs(e.quality)||1,u=this.constructor.backgroundPatterns[_I(i)];if(Ge(u)){t.width*=a,t.height*=a;var c=u(t,e);if(!(c instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=c.toDataURL("image/png"),i="repeat",Me(r)?(r.width*=c.width/t.width,r.height*=c.height/t.height):r===void 0&&(e.size={width:c.width/a,height:c.height/a})}else n=t.src,r===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Cr(t),Oa(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,jr(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Me(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+Ec(JSON.stringify(t))),!this.isDefined(e)){var r=MI,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var s=Jt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});xt(i,s).appendTo(this.defs)}return e},defineGradient:function(t){if(!Me(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+Ec(JSON.stringify(t)),stops:s,attrs:a={}}=t;if(this.isDefined(i))return i;const u=Ce(s).map(({offset:l,color:g,opacity:p})=>xt("stop").attr({offset:l,"stop-color":g,"stop-opacity":Number.isFinite(p)?p:1})),c=xt(r,a,u);return c.id=i,c.appendTo(n),i},definePattern:function(t){if(!Me(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+Ec(JSON.stringify(t)),markup:i,attrs:s={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const a=xt("pattern",{patternUnits:"userSpaceOnUse"});if(a.id=r,a.attr(s),typeof i=="string")a.append(xt(i));else{const{fragment:u}=Tc(i);a.append(u)}return a.appendTo(n),r},defineMarker:function(t){if(!Me(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+Ec(JSON.stringify(t)),markup:i,attrs:s={},markerUnits:a="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const u=xt("marker",{orient:"auto",overflow:"visible",markerUnits:a});u.id=r,u.attr(s);let c;if(i){let p;if(typeof i=="string")p=xt(i),p=Array.isArray(p)?p:[p];else{const{fragment:y}=Tc(i);p=xt(y).children()}p.length>1?c=xt("g").append(p):c=p[0]}else{const{type:p="path"}=t;c=xt(p)}const l=Vs(t,"type","id","markup","attrs","markerUnits");return Object.keys(l).forEach(p=>{const y=l[p],_=c.attr(p);if(_==null)c.attr(p,y);else switch(p){case"transform":c.attr(p,y+" "+_);break}}),c.appendTo(u),u.appendTo(n),r},customEventTrigger:function(t,e,n=e.el){const r=t.target.closest("[event]");if(r&&n!==r&&e.el.contains(r)){const i=rn(se.Event(t.originalEvent,{data:t.data,currentTarget:r}));return this.onevent(i),i.isDefaultPrevented()&&t.preventDefault(),i}return null}},{sorting:Ba,Layers:Rr,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n*2,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=r*2;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=n*3,i.height=r*3;for(var s=i.getContext("2d"),a=Qn(e.watermarkAngle)?-e.watermarkAngle:-20,u=Yn(a),c=i.width/4,l=i.height/4,g=0;g<4;g++)for(var p=0;p<4;p++)(g+p)%2>0&&(s.setTransform(1,0,0,1,(2*g-1)*c,(2*p-1)*l),s.rotate(u),s.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){xt(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;xt(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",xt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",xt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",xt(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),zc=Ii.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n?!0:e.guard(t,n)}}),L2=Ii.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){t=Jt(this.options,t);var e=t.tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof _e))return this;for(var r=this.tools=[],i=0,s=e.length;i<s;i++){var a=e[i];a instanceof zc&&(a.configure(n,this),this.vel.append(a.el),r.push(a))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,i=e.length;r<i;r++){var s=e[r];n?t.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i!==t&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=Rr.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}}),Ho={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{},n={minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0};return n},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){const i=this.getCell(e.name),s=n.edge(e),a=s.points||[],u=new ze(a);if(t.setVertices||t.setLinkVertices)if(Ge(t.setVertices))t.setVertices(i,a);else{u.simplify({threshold:.001});const c=u.points.map(g=>g.toJSON()),l=c.length;i.set("vertices",c.slice(1,l-1))}if(t.setLabels&&"x"in s&&"y"in s){const c={x:s.x,y:s.y};if(Ge(t.setLabels))t.setLabels(i,c,a);else{const l=u.closestPointLength(c),g=u.pointAtLength(l),p=l/u.length(),y=new Q(c).difference(g).toJSON();i.label(0,{position:{distance:p,offset:y}})}}},layout:function(t,e){var n;t instanceof li?n=t:n=new li().resetCells(t,{dry:!0,sort:!1}),t=null,e=dr(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const r=e.dagre||(typeof dagre<"u"?dagre:void 0);if(r===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=Ho.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(g){return g.id}}),s={},a=e.marginX||0,u=e.marginY||0;if(e.rankDir&&(s.rankdir=e.rankDir),e.align&&(s.align=e.align),e.nodeSep&&(s.nodesep=e.nodeSep),e.edgeSep&&(s.edgesep=e.edgeSep),e.rankSep&&(s.ranksep=e.rankSep),e.ranker&&(s.ranker=e.ranker),a&&(s.marginx=a),u&&(s.marginy=u),i.setGraph(s),r.layout(i,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),Ho.fromGraphLib(i,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var c=i.nodes().filter(function(g){return i.children(g).length>0}).map(n.getCell.bind(n)).sort(function(g,p){return p.getAncestors().length-g.getAncestors().length});jr(c,"fitToChildren",{padding:e.clusterPadding})}n.stopBatch("layout");var l=i.graph();return new It(a,u,Math.abs(l.width-2*a),Math.abs(l.height-2*u))},fromGraphLib:function(t,e){e=e||{};var n=e.importNode||Do,r=e.importEdge||Do,i=this instanceof li?this:new li;return t.nodes().forEach(function(s){n.call(i,s,t,i,e)}),t.edges().forEach(function(s){r.call(i,s,t,i,e)}),i},toGraphLib:function(t,e){e=e||{};const n=e.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(n===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=bI(e,"directed","compound","multigraph"),i=new n.Graph(r),s=e.setNodeLabel||Do,a=e.setEdgeLabel||Do,u=e.setEdgeName||Do,c=t.get("cells"),l=0,g=c.length;l<g;l++){var p=c.at(l);if(p.isLink()){var y=p.get("source"),_=p.get("target");if(!y.id||!_.id)break;i.setEdge(y.id,_.id,a(p),u(p))}else if(i.setNode(p.id,s(p)),i.isCompound()&&p.has("parent")){var w=p.get("parent");c.has(w)&&i.setParent(p.id,w)}}return i}};li.prototype.toGraphLib=function(t){return Ho.toGraphLib(this,t)},li.prototype.fromGraphLib=function(t,e){return Ho.fromGraphLib.call(this,t,e)};const cA={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(typeof n<"u")return n;try{n=e()}catch{n=!1}return this._results[t]=n,n}},tr=kn.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});tr.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),yn.extend({presentationAttributes:yn.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=yn.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),tr.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),tr.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),tr.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),tr.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),tr.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),tr.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),tr.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}).define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const Gc=cA.test("svgforeignobject");tr.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Gc?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),tr.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Jt({},e),div:{style:Jt({},e)}})},updateContent:function(t,e){Gc?this.attr({".content":{html:RI(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),yn.extend({presentationAttributes:Gc?yn.prototype.presentationAttributes:yn.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=yn.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(Gc)yn.prototype.update.call(this,n,e);else{var r=Vs(e||n.get("attrs"),".content");yn.prototype.update.call(this,n,r),(!e||Mi(e,".content"))&&this.updateContent(n,e)}},updateContent:function(t,e){var n=cn({},(e||t.get("attrs"))[".content"]);n=Vs(n,"text");var r=ux(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=Qh({},".content",n,"/");i[".content"].text=r,yn.prototype.update.call(this,t,i)}}),kn.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});const R2=kn.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]});kn.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),kn.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),kn.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),kn.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),kn.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),kn.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),kn.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),kn.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),kn.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var Sd=10;kn.define("standard.Cylinder",{attrs:{body:{lateralArea:Sd,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:Sd,refRx:"50%",ry:Sd,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var n=Tn(t),r={lateralArea:t},i=n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:r,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Tn(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,s=e.width,a=e.height,u=s/2,c=n?a*t:t,l=xt.KAPPA,g=l*u,p=l*(n?a*t:t),y=r,_=r+s/2,w=r+s,x=i+c,T=x-c,P=i+a-c,k=i+a,q=["M",y,x,"L",y,P,"C",r,P+p,_-g,k,_,k,"C",_+g,k,w,P+p,w,P,"L",w,x,"C",w,x-p,_+g,T,_,T,"C",_-g,T,y,x-p,y,x,"Z"];return{d:q.join(" ")}}}}});var O2={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},k2={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},M2=cA.test("svgforeignobject")?O2:k2;kn.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},M2]},{attributes:{text:{set:function(t,e,n,r){if(n instanceof HTMLElement)n.textContent=t;else{var i=r.style||{},s={text:t,width:-5,height:"100%"},a=Jt({textVerticalAnchor:"middle"},i);return mx.textWrap.set.call(this,s,e,n,a),{fill:i.color||null}}},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}});const Uc=Ma.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Ma.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Ma.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var fA=Ii.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){const{vel:n,options:r}=this,{scale:i}=r;let s=xt.createSVGMatrix().translate(t,e);i&&(s=s.scale(i)),n.transform(s,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const I2=zc.extend({name:"vertices",options:{handleClass:fA,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var t=this.relatedView,e=t.model.vertices();return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],s=new this.options.handleClass({index:n,paper:this.paper,scale:this.options.scale,guard:a=>this.guard(a)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],s=this.handles[n];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new Q(r),next:new Q(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[s,a,u]=r.paper.getPointerArgs(e),c={x:a,y:u};this.snapVertex(c,i),r.model.vertex(i,c,{ui:!0,tool:this.cid}),t.position(c.x,c.y),n.stopPropagation||r.notifyPointermove(s,a,u)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),!!n.redundancyRemoval){var i=r.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,a,u]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(s,a,u),r.checkMouseleave(s)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,s=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-s.x)<n&&(t.x=s.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-s.y)<n&&(t.y=s.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(rn(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=rn(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(e,{vertexAdded:!0}),s.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:fA});function N2(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}const lA=zc.extend({tagName:"path",xAxisVector:new Q(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var t=this.ratio,e=this.relatedView,n=e.getTangentAtRatio(t),r,i;if(n?(r=n.start,i=n.vector().vectorAngle(this.xAxisVector)||0):(r=e.getPointAtRatio(t),i=0),!r)return this;var s=xt.createSVGMatrix().translate(r.x,r.y).rotate(i);const{scale:a}=this.options;return a&&(s=s.scale(a)),this.vel.transform(s,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=rn(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,r=rn(t),i=n.snapToGrid(r.clientX,r.clientY);e.pointerup(r,i.x,i.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),D2=lA.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),q2=lA.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),Td=zc.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:s,rotate:a,scale:u}=e,c=N2(t,s);const l=t.model.angle();a||(c=c.bbox(l));const{x:g=0,y:p=0}=i;Tn(n)?n=parseFloat(n)/100*c.width:xr(n)&&(n=Number(Ar(n,c))),Tn(r)?r=parseFloat(r)/100*c.height:xr(r)&&(r=Number(Ar(r,c)));let y=xt.createSVGMatrix().translate(c.x+c.width/2,c.y+c.height/2);return a&&(y=y.rotate(l)),y=y.translate(n+g-c.width/2,r+p-c.height/2),u&&(y=y.scale(u)),y},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i,scale:s}=e;let a,u,c;Tn(r)?a=t.getTangentAtRatio(parseFloat(r)/100):a=t.getTangentAtLength(r),a?(u=a.start,c=a.vector().vectorAngle(new Q(1,0))||0):(u=t.getConnection().start,c=0);let l=xt.createSVGMatrix().translate(u.x,u.y).rotate(c).translate(0,n);return i||(l=l.rotate(-c)),s&&(l=l.scale(s)),l},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;typeof e=="function"&&e.call(this.relatedView,t,this.relatedView,this)}}}),hA=Td.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}});var $o={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var B2=$o.exports,dA;function F2(){return dA||(dA=1,function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",l=500,g="__lodash_placeholder__",p=1,y=2,_=4,w=1,x=2,T=1,P=2,k=4,q=8,B=16,H=32,X=64,d=128,E=256,L=512,I=30,G="...",K=800,Y=16,pt=1,Tt=2,at=3,ft=1/0,lt=9007199254740991,dt=17976931348623157e292,Xt=NaN,Ft=4294967295,Ae=Ft-1,Ee=Ft>>>1,ot=[["ary",d],["bind",T],["bindKey",P],["curry",q],["curryRight",B],["flip",L],["partial",H],["partialRight",X],["rearg",E]],ht="[object Arguments]",tt="[object Array]",it="[object AsyncFunction]",wt="[object Boolean]",Ht="[object Date]",Gt="[object DOMException]",zt="[object Error]",fe="[object Function]",Wt="[object GeneratorFunction]",C="[object Map]",D="[object Number]",U="[object Null]",$="[object Object]",vt="[object Promise]",_t="[object Proxy]",Nt="[object RegExp]",Yt="[object Set]",ne="[object String]",he="[object Symbol]",ke="[object Undefined]",Mt="[object WeakMap]",oe="[object WeakSet]",ve="[object ArrayBuffer]",sn="[object DataView]",qe="[object Float32Array]",He="[object Float64Array]",an="[object Int8Array]",wn="[object Int16Array]",$e="[object Int32Array]",Xe="[object Uint8Array]",rr="[object Uint8ClampedArray]",yi="[object Uint16Array]",Qr="[object Uint32Array]",Js=/\b__p \+= '';/g,Qs=/\b(__p \+=) '' \+/g,bi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nr=/&(?:amp|lt|gt|quot|#39);/g,ti=/[&<>"']/g,ta=RegExp(Nr.source),Wa=RegExp(ti.source),Ye=/<%-([\s\S]+?)%>/g,Mn=/<%([\s\S]+?)%>/g,ja=/<%=([\s\S]+?)%>/g,T0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vf=/^\w*$/,mf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_i=/[\\^$.*+?()[\]{}|]/g,vs=RegExp(_i.source),ea=/^\s+/,Xa=/\s/,E0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,P0=/\{\n\/\* \[wrapped with (.+)\] \*/,C0=/,? & /,yf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,L0=/[()=,{}\[\]\/\s]/,R0=/\\(\\)?/g,bf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_f=/\w*$/,ms=/^[-+]0x[0-9a-f]+$/i,wf=/^0b[01]+$/i,su=/^\[object .+?Constructor\]$/,au=/^0o[0-7]+$/i,Ya=/^(?:0|[1-9]\d*)$/,xf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ka=/($^)/,na=/['\n\r\u2028\u2029\\]/g,ra="\\ud800-\\udfff",Af="\\u0300-\\u036f",Sf="\\ufe20-\\ufe2f",Tf="\\u20d0-\\u20ff",Ef=Af+Sf+Tf,Za="\\u2700-\\u27bf",Pf="a-z\\xdf-\\xf6\\xf8-\\xff",O0="\\xac\\xb1\\xd7\\xf7",Cf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Lf="\\u2000-\\u206f",ou=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uu="A-Z\\xc0-\\xd6\\xd8-\\xde",En="\\ufe0e\\ufe0f",Vi=O0+Cf+Lf+ou,ys="['’]",k0="["+ra+"]",Rf="["+Vi+"]",bs="["+Ef+"]",cu="\\d+",Ja="["+Za+"]",fu="["+Pf+"]",Of="[^"+ra+Vi+cu+Za+Pf+uu+"]",lu="\\ud83c[\\udffb-\\udfff]",pr="(?:"+bs+"|"+lu+")",hu="[^"+ra+"]",zi="(?:\\ud83c[\\udde6-\\uddff]){2}",du="[\\ud800-\\udbff][\\udc00-\\udfff]",_s="["+uu+"]",wi="\\u200d",xi="(?:"+fu+"|"+Of+")",pu="(?:"+_s+"|"+Of+")",kf="(?:"+ys+"(?:d|ll|m|re|s|t|ve))?",ws="(?:"+ys+"(?:D|LL|M|RE|S|T|VE))?",gu=pr+"?",Qa="["+En+"]?",Mf="(?:"+wi+"(?:"+[hu,zi,du].join("|")+")"+Qa+gu+")*",If="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",M0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vu=Qa+gu+Mf,I0="(?:"+[Ja,zi,du].join("|")+")"+vu,N0="(?:"+[hu+bs+"?",bs,zi,du,k0].join("|")+")",mu=RegExp(ys,"g"),D0=RegExp(bs,"g"),yu=RegExp(lu+"(?="+lu+")|"+N0+vu,"g"),q0=RegExp([_s+"?"+fu+"+"+kf+"(?="+[Rf,_s,"$"].join("|")+")",pu+"+"+ws+"(?="+[Rf,_s+xi,"$"].join("|")+")",_s+"?"+xi+"+"+kf,_s+"+"+ws,M0,If,cu,I0].join("|"),"g"),B0=RegExp("["+wi+ra+Ef+En+"]"),F0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,V0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],z0=-1,Ue={};Ue[qe]=Ue[He]=Ue[an]=Ue[wn]=Ue[$e]=Ue[Xe]=Ue[rr]=Ue[yi]=Ue[Qr]=!0,Ue[ht]=Ue[tt]=Ue[ve]=Ue[wt]=Ue[sn]=Ue[Ht]=Ue[zt]=Ue[fe]=Ue[C]=Ue[D]=Ue[$]=Ue[Nt]=Ue[Yt]=Ue[ne]=Ue[Mt]=!1;var Be={};Be[ht]=Be[tt]=Be[ve]=Be[sn]=Be[wt]=Be[Ht]=Be[qe]=Be[He]=Be[an]=Be[wn]=Be[$e]=Be[C]=Be[D]=Be[$]=Be[Nt]=Be[Yt]=Be[ne]=Be[he]=Be[Xe]=Be[rr]=Be[yi]=Be[Qr]=!0,Be[zt]=Be[fe]=Be[Mt]=!1;var Nf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},bu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Df={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_u=parseFloat,G0=parseInt,Bf=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr,U0=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Bf||U0||Function("return this")(),to=e&&!e.nodeType&&e,ei=to&&!0&&t&&!t.nodeType&&t,Ff=ei&&ei.exports===to,wu=Ff&&Bf.process,ir=function(){try{var z=ei&&ei.require&&ei.require("util").types;return z||wu&&wu.binding&&wu.binding("util")}catch{}}(),h=ir&&ir.isArrayBuffer,m=ir&&ir.isDate,b=ir&&ir.isMap,S=ir&&ir.isRegExp,R=ir&&ir.isSet,O=ir&&ir.isTypedArray;function N(z,nt,et){switch(et.length){case 0:return z.call(nt);case 1:return z.call(nt,et[0]);case 2:return z.call(nt,et[0],et[1]);case 3:return z.call(nt,et[0],et[1],et[2])}return z.apply(nt,et)}function J(z,nt,et,St){for(var Et=-1,Ut=z==null?0:z.length;++Et<Ut;){var $t=z[Et];nt(St,$t,et($t),z)}return St}function j(z,nt){for(var et=-1,St=z==null?0:z.length;++et<St&&nt(z[et],et,z)!==!1;);return z}function ut(z,nt){for(var et=z==null?0:z.length;et--&&nt(z[et],et,z)!==!1;);return z}function bt(z,nt){for(var et=-1,St=z==null?0:z.length;++et<St;)if(!nt(z[et],et,z))return!1;return!0}function At(z,nt){for(var et=-1,St=z==null?0:z.length,Et=0,Ut=[];++et<St;){var $t=z[et];nt($t,et,z)&&(Ut[Et++]=$t)}return Ut}function mt(z,nt){var et=z==null?0:z.length;return!!et&&Ve(z,nt,0)>-1}function kt(z,nt,et){for(var St=-1,Et=z==null?0:z.length;++St<Et;)if(et(nt,z[St]))return!0;return!1}function Vt(z,nt){for(var et=-1,St=z==null?0:z.length,Et=Array(St);++et<St;)Et[et]=nt(z[et],et,z);return Et}function de(z,nt){for(var et=-1,St=nt.length,Et=z.length;++et<St;)z[Et+et]=nt[et];return z}function le(z,nt,et,St){var Et=-1,Ut=z==null?0:z.length;for(St&&Ut&&(et=z[++Et]);++Et<Ut;)et=nt(et,z[Et],Et,z);return et}function pn(z,nt,et,St){var Et=z==null?0:z.length;for(St&&Et&&(et=z[--Et]);Et--;)et=nt(et,z[Et],Et,z);return et}function Ze(z,nt){for(var et=-1,St=z==null?0:z.length;++et<St;)if(nt(z[et],et,z))return!0;return!1}var Dr=Gi("length");function qr(z){return z.split("")}function Se(z){return z.match(yf)||[]}function Ai(z,nt,et){var St;return et(z,function(Et,Ut,$t){if(nt(Et,Ut,$t))return St=Ut,!1}),St}function Te(z,nt,et,St){for(var Et=z.length,Ut=et+(St?1:-1);St?Ut--:++Ut<Et;)if(nt(z[Ut],Ut,z))return Ut;return-1}function Ve(z,nt,et){return nt===nt?W0(z,nt,et):Te(z,eo,et)}function ia(z,nt,et,St){for(var Et=et-1,Ut=z.length;++Et<Ut;)if(St(z[Et],nt))return Et;return-1}function eo(z){return z!==z}function gr(z,nt){var et=z==null?0:z.length;return et?In(z,nt)/et:Xt}function Gi(z){return function(nt){return nt==null?n:nt[z]}}function sr(z){return function(nt){return z==null?n:z[nt]}}function ni(z,nt,et,St,Et){return Et(z,function(Ut,$t,Bt){et=St?(St=!1,Ut):nt(et,Ut,$t,Bt)}),et}function Si(z,nt){var et=z.length;for(z.sort(nt);et--;)z[et]=z[et].value;return z}function In(z,nt){for(var et,St=-1,Et=z.length;++St<Et;){var Ut=nt(z[St]);Ut!==n&&(et=et===n?Ut:et+Ut)}return et}function sa(z,nt){for(var et=-1,St=Array(z);++et<z;)St[et]=nt(et);return St}function ri(z,nt){return Vt(nt,function(et){return[et,z[et]]})}function Br(z){return z&&z.slice(0,zf(z)+1).replace(ea,"")}function Un(z){return function(nt){return z(nt)}}function xu(z,nt){return Vt(nt,function(et){return z[et]})}function aa(z,nt){return z.has(nt)}function Ne(z,nt){for(var et=-1,St=z.length;++et<St&&Ve(nt,z[et],0)>-1;);return et}function oa(z,nt){for(var et=z.length;et--&&Ve(nt,z[et],0)>-1;);return et}function vr(z,nt){for(var et=z.length,St=0;et--;)z[et]===nt&&++St;return St}var xs=sr(Nf),H0=sr(bu);function $0(z){return"\\"+qf[z]}function Vf(z,nt){return z==null?n:z[nt]}function ar(z){return B0.test(z)}function Au(z){return F0.test(z)}function Ti(z){for(var nt,et=[];!(nt=z.next()).done;)et.push(nt.value);return et}function no(z){var nt=-1,et=Array(z.size);return z.forEach(function(St,Et){et[++nt]=[Et,St]}),et}function As(z,nt){return function(et){return z(nt(et))}}function mr(z,nt){for(var et=-1,St=z.length,Et=0,Ut=[];++et<St;){var $t=z[et];($t===nt||$t===g)&&(z[et]=g,Ut[Et++]=et)}return Ut}function Ui(z){var nt=-1,et=Array(z.size);return z.forEach(function(St){et[++nt]=St}),et}function Su(z){var nt=-1,et=Array(z.size);return z.forEach(function(St){et[++nt]=[St,St]}),et}function W0(z,nt,et){for(var St=et-1,Et=z.length;++St<Et;)if(z[St]===nt)return St;return-1}function ro(z,nt,et){for(var St=et+1;St--;)if(z[St]===nt)return St;return St}function Ei(z){return ar(z)?Gf(z):Dr(z)}function Hn(z){return ar(z)?W(z):qr(z)}function zf(z){for(var nt=z.length;nt--&&Xa.test(z.charAt(nt)););return nt}var Tu=sr(Df);function Gf(z){for(var nt=yu.lastIndex=0;yu.test(z);)++nt;return nt}function W(z){return z.match(yu)||[]}function st(z){return z.match(q0)||[]}var gt=function z(nt){nt=nt==null?Ke:yt.defaults(Ke.Object(),nt,yt.pick(Ke,V0));var et=nt.Array,St=nt.Date,Et=nt.Error,Ut=nt.Function,$t=nt.Math,Bt=nt.Object,me=nt.RegExp,Qt=nt.String,we=nt.TypeError,gn=et.prototype,xn=Ut.prototype,vn=Bt.prototype,$n=nt["__core-js_shared__"],ii=xn.toString,ue=vn.hasOwnProperty,U3=0,$L=function(){var o=/[^.]+$/.exec($n&&$n.keys&&$n.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Uf=vn.toString,H3=ii.call(Bt),$3=Ke._,W3=me("^"+ii.call(ue).replace(_i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hf=Ff?nt.Buffer:n,Ss=nt.Symbol,$f=nt.Uint8Array,WL=Hf?Hf.allocUnsafe:n,Wf=As(Bt.getPrototypeOf,Bt),jL=Bt.create,XL=vn.propertyIsEnumerable,jf=gn.splice,YL=Ss?Ss.isConcatSpreadable:n,Eu=Ss?Ss.iterator:n,ua=Ss?Ss.toStringTag:n,Xf=function(){try{var o=da(Bt,"defineProperty");return o({},"",{}),o}catch{}}(),j3=nt.clearTimeout!==Ke.clearTimeout&&nt.clearTimeout,X3=St&&St.now!==Ke.Date.now&&St.now,Y3=nt.setTimeout!==Ke.setTimeout&&nt.setTimeout,Yf=$t.ceil,Kf=$t.floor,j0=Bt.getOwnPropertySymbols,K3=Hf?Hf.isBuffer:n,KL=nt.isFinite,Z3=gn.join,J3=As(Bt.keys,Bt),mn=$t.max,Nn=$t.min,Q3=St.now,tz=nt.parseInt,ZL=$t.random,ez=gn.reverse,X0=da(nt,"DataView"),Pu=da(nt,"Map"),Y0=da(nt,"Promise"),io=da(nt,"Set"),Cu=da(nt,"WeakMap"),Lu=da(Bt,"create"),Zf=Cu&&new Cu,so={},nz=pa(X0),rz=pa(Pu),iz=pa(Y0),sz=pa(io),az=pa(Cu),Jf=Ss?Ss.prototype:n,Ru=Jf?Jf.valueOf:n,JL=Jf?Jf.toString:n;function F(o){if(tn(o)&&!pe(o)&&!(o instanceof Re)){if(o instanceof Fr)return o;if(ue.call(o,"__wrapped__"))return QR(o)}return new Fr(o)}var ao=function(){function o(){}return function(f){if(!Je(f))return{};if(jL)return jL(f);o.prototype=f;var v=new o;return o.prototype=n,v}}();function Qf(){}function Fr(o,f){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=n}F.templateSettings={escape:Ye,evaluate:Mn,interpolate:ja,variable:"",imports:{_:F}},F.prototype=Qf.prototype,F.prototype.constructor=F,Fr.prototype=ao(Qf.prototype),Fr.prototype.constructor=Fr;function Re(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ft,this.__views__=[]}function oz(){var o=new Re(this.__wrapped__);return o.__actions__=or(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=or(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=or(this.__views__),o}function uz(){if(this.__filtered__){var o=new Re(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function cz(){var o=this.__wrapped__.value(),f=this.__dir__,v=pe(o),A=f<0,M=v?o.length:0,V=wG(0,M,this.__views__),Z=V.start,rt=V.end,ct=rt-Z,Pt=A?rt:Z-1,Ct=this.__iteratees__,Rt=Ct.length,qt=0,Kt=Nn(ct,this.__takeCount__);if(!v||!A&&M==ct&&Kt==ct)return xR(o,this.__actions__);var re=[];t:for(;ct--&&qt<Kt;){Pt+=f;for(var be=-1,ie=o[Pt];++be<Rt;){var Pe=Ct[be],Oe=Pe.iteratee,_r=Pe.type,Xn=Oe(ie);if(_r==Tt)ie=Xn;else if(!Xn){if(_r==pt)continue t;break t}}re[qt++]=ie}return re}Re.prototype=ao(Qf.prototype),Re.prototype.constructor=Re;function ca(o){var f=-1,v=o==null?0:o.length;for(this.clear();++f<v;){var A=o[f];this.set(A[0],A[1])}}function fz(){this.__data__=Lu?Lu(null):{},this.size=0}function lz(o){var f=this.has(o)&&delete this.__data__[o];return this.size-=f?1:0,f}function hz(o){var f=this.__data__;if(Lu){var v=f[o];return v===c?n:v}return ue.call(f,o)?f[o]:n}function dz(o){var f=this.__data__;return Lu?f[o]!==n:ue.call(f,o)}function pz(o,f){var v=this.__data__;return this.size+=this.has(o)?0:1,v[o]=Lu&&f===n?c:f,this}ca.prototype.clear=fz,ca.prototype.delete=lz,ca.prototype.get=hz,ca.prototype.has=dz,ca.prototype.set=pz;function Hi(o){var f=-1,v=o==null?0:o.length;for(this.clear();++f<v;){var A=o[f];this.set(A[0],A[1])}}function gz(){this.__data__=[],this.size=0}function vz(o){var f=this.__data__,v=tl(f,o);if(v<0)return!1;var A=f.length-1;return v==A?f.pop():jf.call(f,v,1),--this.size,!0}function mz(o){var f=this.__data__,v=tl(f,o);return v<0?n:f[v][1]}function yz(o){return tl(this.__data__,o)>-1}function bz(o,f){var v=this.__data__,A=tl(v,o);return A<0?(++this.size,v.push([o,f])):v[A][1]=f,this}Hi.prototype.clear=gz,Hi.prototype.delete=vz,Hi.prototype.get=mz,Hi.prototype.has=yz,Hi.prototype.set=bz;function $i(o){var f=-1,v=o==null?0:o.length;for(this.clear();++f<v;){var A=o[f];this.set(A[0],A[1])}}function _z(){this.size=0,this.__data__={hash:new ca,map:new(Pu||Hi),string:new ca}}function wz(o){var f=hl(this,o).delete(o);return this.size-=f?1:0,f}function xz(o){return hl(this,o).get(o)}function Az(o){return hl(this,o).has(o)}function Sz(o,f){var v=hl(this,o),A=v.size;return v.set(o,f),this.size+=v.size==A?0:1,this}$i.prototype.clear=_z,$i.prototype.delete=wz,$i.prototype.get=xz,$i.prototype.has=Az,$i.prototype.set=Sz;function fa(o){var f=-1,v=o==null?0:o.length;for(this.__data__=new $i;++f<v;)this.add(o[f])}function Tz(o){return this.__data__.set(o,c),this}function Ez(o){return this.__data__.has(o)}fa.prototype.add=fa.prototype.push=Tz,fa.prototype.has=Ez;function si(o){var f=this.__data__=new Hi(o);this.size=f.size}function Pz(){this.__data__=new Hi,this.size=0}function Cz(o){var f=this.__data__,v=f.delete(o);return this.size=f.size,v}function Lz(o){return this.__data__.get(o)}function Rz(o){return this.__data__.has(o)}function Oz(o,f){var v=this.__data__;if(v instanceof Hi){var A=v.__data__;if(!Pu||A.length<i-1)return A.push([o,f]),this.size=++v.size,this;v=this.__data__=new $i(A)}return v.set(o,f),this.size=v.size,this}si.prototype.clear=Pz,si.prototype.delete=Cz,si.prototype.get=Lz,si.prototype.has=Rz,si.prototype.set=Oz;function QL(o,f){var v=pe(o),A=!v&&ga(o),M=!v&&!A&&Ls(o),V=!v&&!A&&!M&&fo(o),Z=v||A||M||V,rt=Z?sa(o.length,Qt):[],ct=rt.length;for(var Pt in o)(f||ue.call(o,Pt))&&!(Z&&(Pt=="length"||M&&(Pt=="offset"||Pt=="parent")||V&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||Yi(Pt,ct)))&&rt.push(Pt);return rt}function tR(o){var f=o.length;return f?o[ab(0,f-1)]:n}function kz(o,f){return dl(or(o),la(f,0,o.length))}function Mz(o){return dl(or(o))}function K0(o,f,v){(v!==n&&!ai(o[f],v)||v===n&&!(f in o))&&Wi(o,f,v)}function Ou(o,f,v){var A=o[f];(!(ue.call(o,f)&&ai(A,v))||v===n&&!(f in o))&&Wi(o,f,v)}function tl(o,f){for(var v=o.length;v--;)if(ai(o[v][0],f))return v;return-1}function Iz(o,f,v,A){return Ts(o,function(M,V,Z){f(A,M,v(M),Z)}),A}function eR(o,f){return o&&Ci(f,An(f),o)}function Nz(o,f){return o&&Ci(f,cr(f),o)}function Wi(o,f,v){f=="__proto__"&&Xf?Xf(o,f,{configurable:!0,enumerable:!0,value:v,writable:!0}):o[f]=v}function Z0(o,f){for(var v=-1,A=f.length,M=et(A),V=o==null;++v<A;)M[v]=V?n:Ob(o,f[v]);return M}function la(o,f,v){return o===o&&(v!==n&&(o=o<=v?o:v),f!==n&&(o=o>=f?o:f)),o}function Vr(o,f,v,A,M,V){var Z,rt=f&p,ct=f&y,Pt=f&_;if(v&&(Z=M?v(o,A,M,V):v(o)),Z!==n)return Z;if(!Je(o))return o;var Ct=pe(o);if(Ct){if(Z=AG(o),!rt)return or(o,Z)}else{var Rt=Dn(o),qt=Rt==fe||Rt==Wt;if(Ls(o))return TR(o,rt);if(Rt==$||Rt==ht||qt&&!M){if(Z=ct||qt?{}:HR(o),!rt)return ct?hG(o,Nz(Z,o)):lG(o,eR(Z,o))}else{if(!Be[Rt])return M?o:{};Z=SG(o,Rt,rt)}}V||(V=new si);var Kt=V.get(o);if(Kt)return Kt;V.set(o,Z),bO(o)?o.forEach(function(ie){Z.add(Vr(ie,f,v,ie,o,V))}):mO(o)&&o.forEach(function(ie,Pe){Z.set(Pe,Vr(ie,f,v,Pe,o,V))});var re=Pt?ct?mb:vb:ct?cr:An,be=Ct?n:re(o);return j(be||o,function(ie,Pe){be&&(Pe=ie,ie=o[Pe]),Ou(Z,Pe,Vr(ie,f,v,Pe,o,V))}),Z}function Dz(o){var f=An(o);return function(v){return nR(v,o,f)}}function nR(o,f,v){var A=v.length;if(o==null)return!A;for(o=Bt(o);A--;){var M=v[A],V=f[M],Z=o[M];if(Z===n&&!(M in o)||!V(Z))return!1}return!0}function rR(o,f,v){if(typeof o!="function")throw new we(a);return Bu(function(){o.apply(n,v)},f)}function ku(o,f,v,A){var M=-1,V=mt,Z=!0,rt=o.length,ct=[],Pt=f.length;if(!rt)return ct;v&&(f=Vt(f,Un(v))),A?(V=kt,Z=!1):f.length>=i&&(V=aa,Z=!1,f=new fa(f));t:for(;++M<rt;){var Ct=o[M],Rt=v==null?Ct:v(Ct);if(Ct=A||Ct!==0?Ct:0,Z&&Rt===Rt){for(var qt=Pt;qt--;)if(f[qt]===Rt)continue t;ct.push(Ct)}else V(f,Rt,A)||ct.push(Ct)}return ct}var Ts=RR(Pi),iR=RR(Q0,!0);function qz(o,f){var v=!0;return Ts(o,function(A,M,V){return v=!!f(A,M,V),v}),v}function el(o,f,v){for(var A=-1,M=o.length;++A<M;){var V=o[A],Z=f(V);if(Z!=null&&(rt===n?Z===Z&&!br(Z):v(Z,rt)))var rt=Z,ct=V}return ct}function Bz(o,f,v,A){var M=o.length;for(v=ye(v),v<0&&(v=-v>M?0:M+v),A=A===n||A>M?M:ye(A),A<0&&(A+=M),A=v>A?0:wO(A);v<A;)o[v++]=f;return o}function sR(o,f){var v=[];return Ts(o,function(A,M,V){f(A,M,V)&&v.push(A)}),v}function Pn(o,f,v,A,M){var V=-1,Z=o.length;for(v||(v=EG),M||(M=[]);++V<Z;){var rt=o[V];f>0&&v(rt)?f>1?Pn(rt,f-1,v,A,M):de(M,rt):A||(M[M.length]=rt)}return M}var J0=OR(),aR=OR(!0);function Pi(o,f){return o&&J0(o,f,An)}function Q0(o,f){return o&&aR(o,f,An)}function nl(o,f){return At(f,function(v){return Ki(o[v])})}function ha(o,f){f=Ps(f,o);for(var v=0,A=f.length;o!=null&&v<A;)o=o[Li(f[v++])];return v&&v==A?o:n}function oR(o,f,v){var A=f(o);return pe(o)?A:de(A,v(o))}function Wn(o){return o==null?o===n?ke:U:ua&&ua in Bt(o)?_G(o):MG(o)}function tb(o,f){return o>f}function Fz(o,f){return o!=null&&ue.call(o,f)}function Vz(o,f){return o!=null&&f in Bt(o)}function zz(o,f,v){return o>=Nn(f,v)&&o<mn(f,v)}function eb(o,f,v){for(var A=v?kt:mt,M=o[0].length,V=o.length,Z=V,rt=et(V),ct=1/0,Pt=[];Z--;){var Ct=o[Z];Z&&f&&(Ct=Vt(Ct,Un(f))),ct=Nn(Ct.length,ct),rt[Z]=!v&&(f||M>=120&&Ct.length>=120)?new fa(Z&&Ct):n}Ct=o[0];var Rt=-1,qt=rt[0];t:for(;++Rt<M&&Pt.length<ct;){var Kt=Ct[Rt],re=f?f(Kt):Kt;if(Kt=v||Kt!==0?Kt:0,!(qt?aa(qt,re):A(Pt,re,v))){for(Z=V;--Z;){var be=rt[Z];if(!(be?aa(be,re):A(o[Z],re,v)))continue t}qt&&qt.push(re),Pt.push(Kt)}}return Pt}function Gz(o,f,v,A){return Pi(o,function(M,V,Z){f(A,v(M),V,Z)}),A}function Mu(o,f,v){f=Ps(f,o),o=XR(o,f);var A=o==null?o:o[Li(Gr(f))];return A==null?n:N(A,o,v)}function uR(o){return tn(o)&&Wn(o)==ht}function Uz(o){return tn(o)&&Wn(o)==ve}function Hz(o){return tn(o)&&Wn(o)==Ht}function Iu(o,f,v,A,M){return o===f?!0:o==null||f==null||!tn(o)&&!tn(f)?o!==o&&f!==f:$z(o,f,v,A,Iu,M)}function $z(o,f,v,A,M,V){var Z=pe(o),rt=pe(f),ct=Z?tt:Dn(o),Pt=rt?tt:Dn(f);ct=ct==ht?$:ct,Pt=Pt==ht?$:Pt;var Ct=ct==$,Rt=Pt==$,qt=ct==Pt;if(qt&&Ls(o)){if(!Ls(f))return!1;Z=!0,Ct=!1}if(qt&&!Ct)return V||(V=new si),Z||fo(o)?zR(o,f,v,A,M,V):yG(o,f,ct,v,A,M,V);if(!(v&w)){var Kt=Ct&&ue.call(o,"__wrapped__"),re=Rt&&ue.call(f,"__wrapped__");if(Kt||re){var be=Kt?o.value():o,ie=re?f.value():f;return V||(V=new si),M(be,ie,v,A,V)}}return qt?(V||(V=new si),bG(o,f,v,A,M,V)):!1}function Wz(o){return tn(o)&&Dn(o)==C}function nb(o,f,v,A){var M=v.length,V=M,Z=!A;if(o==null)return!V;for(o=Bt(o);M--;){var rt=v[M];if(Z&&rt[2]?rt[1]!==o[rt[0]]:!(rt[0]in o))return!1}for(;++M<V;){rt=v[M];var ct=rt[0],Pt=o[ct],Ct=rt[1];if(Z&&rt[2]){if(Pt===n&&!(ct in o))return!1}else{var Rt=new si;if(A)var qt=A(Pt,Ct,ct,o,f,Rt);if(!(qt===n?Iu(Ct,Pt,w|x,A,Rt):qt))return!1}}return!0}function cR(o){if(!Je(o)||CG(o))return!1;var f=Ki(o)?W3:su;return f.test(pa(o))}function jz(o){return tn(o)&&Wn(o)==Nt}function Xz(o){return tn(o)&&Dn(o)==Yt}function Yz(o){return tn(o)&&bl(o.length)&&!!Ue[Wn(o)]}function fR(o){return typeof o=="function"?o:o==null?fr:typeof o=="object"?pe(o)?dR(o[0],o[1]):hR(o):kO(o)}function rb(o){if(!qu(o))return J3(o);var f=[];for(var v in Bt(o))ue.call(o,v)&&v!="constructor"&&f.push(v);return f}function Kz(o){if(!Je(o))return kG(o);var f=qu(o),v=[];for(var A in o)A=="constructor"&&(f||!ue.call(o,A))||v.push(A);return v}function ib(o,f){return o<f}function lR(o,f){var v=-1,A=ur(o)?et(o.length):[];return Ts(o,function(M,V,Z){A[++v]=f(M,V,Z)}),A}function hR(o){var f=bb(o);return f.length==1&&f[0][2]?WR(f[0][0],f[0][1]):function(v){return v===o||nb(v,o,f)}}function dR(o,f){return wb(o)&&$R(f)?WR(Li(o),f):function(v){var A=Ob(v,o);return A===n&&A===f?kb(v,o):Iu(f,A,w|x)}}function rl(o,f,v,A,M){o!==f&&J0(f,function(V,Z){if(M||(M=new si),Je(V))Zz(o,f,Z,v,rl,A,M);else{var rt=A?A(Ab(o,Z),V,Z+"",o,f,M):n;rt===n&&(rt=V),K0(o,Z,rt)}},cr)}function Zz(o,f,v,A,M,V,Z){var rt=Ab(o,v),ct=Ab(f,v),Pt=Z.get(ct);if(Pt){K0(o,v,Pt);return}var Ct=V?V(rt,ct,v+"",o,f,Z):n,Rt=Ct===n;if(Rt){var qt=pe(ct),Kt=!qt&&Ls(ct),re=!qt&&!Kt&&fo(ct);Ct=ct,qt||Kt||re?pe(rt)?Ct=rt:on(rt)?Ct=or(rt):Kt?(Rt=!1,Ct=TR(ct,!0)):re?(Rt=!1,Ct=ER(ct,!0)):Ct=[]:Fu(ct)||ga(ct)?(Ct=rt,ga(rt)?Ct=xO(rt):(!Je(rt)||Ki(rt))&&(Ct=HR(ct))):Rt=!1}Rt&&(Z.set(ct,Ct),M(Ct,ct,A,V,Z),Z.delete(ct)),K0(o,v,Ct)}function pR(o,f){var v=o.length;if(v)return f+=f<0?v:0,Yi(f,v)?o[f]:n}function gR(o,f,v){f.length?f=Vt(f,function(V){return pe(V)?function(Z){return ha(Z,V.length===1?V[0]:V)}:V}):f=[fr];var A=-1;f=Vt(f,Un(ee()));var M=lR(o,function(V,Z,rt){var ct=Vt(f,function(Pt){return Pt(V)});return{criteria:ct,index:++A,value:V}});return Si(M,function(V,Z){return fG(V,Z,v)})}function Jz(o,f){return vR(o,f,function(v,A){return kb(o,A)})}function vR(o,f,v){for(var A=-1,M=f.length,V={};++A<M;){var Z=f[A],rt=ha(o,Z);v(rt,Z)&&Nu(V,Ps(Z,o),rt)}return V}function Qz(o){return function(f){return ha(f,o)}}function sb(o,f,v,A){var M=A?ia:Ve,V=-1,Z=f.length,rt=o;for(o===f&&(f=or(f)),v&&(rt=Vt(o,Un(v)));++V<Z;)for(var ct=0,Pt=f[V],Ct=v?v(Pt):Pt;(ct=M(rt,Ct,ct,A))>-1;)rt!==o&&jf.call(rt,ct,1),jf.call(o,ct,1);return o}function mR(o,f){for(var v=o?f.length:0,A=v-1;v--;){var M=f[v];if(v==A||M!==V){var V=M;Yi(M)?jf.call(o,M,1):cb(o,M)}}return o}function ab(o,f){return o+Kf(ZL()*(f-o+1))}function tG(o,f,v,A){for(var M=-1,V=mn(Yf((f-o)/(v||1)),0),Z=et(V);V--;)Z[A?V:++M]=o,o+=v;return Z}function ob(o,f){var v="";if(!o||f<1||f>lt)return v;do f%2&&(v+=o),f=Kf(f/2),f&&(o+=o);while(f);return v}function xe(o,f){return Sb(jR(o,f,fr),o+"")}function eG(o){return tR(lo(o))}function nG(o,f){var v=lo(o);return dl(v,la(f,0,v.length))}function Nu(o,f,v,A){if(!Je(o))return o;f=Ps(f,o);for(var M=-1,V=f.length,Z=V-1,rt=o;rt!=null&&++M<V;){var ct=Li(f[M]),Pt=v;if(ct==="__proto__"||ct==="constructor"||ct==="prototype")return o;if(M!=Z){var Ct=rt[ct];Pt=A?A(Ct,ct,rt):n,Pt===n&&(Pt=Je(Ct)?Ct:Yi(f[M+1])?[]:{})}Ou(rt,ct,Pt),rt=rt[ct]}return o}var yR=Zf?function(o,f){return Zf.set(o,f),o}:fr,rG=Xf?function(o,f){return Xf(o,"toString",{configurable:!0,enumerable:!1,value:Ib(f),writable:!0})}:fr;function iG(o){return dl(lo(o))}function zr(o,f,v){var A=-1,M=o.length;f<0&&(f=-f>M?0:M+f),v=v>M?M:v,v<0&&(v+=M),M=f>v?0:v-f>>>0,f>>>=0;for(var V=et(M);++A<M;)V[A]=o[A+f];return V}function sG(o,f){var v;return Ts(o,function(A,M,V){return v=f(A,M,V),!v}),!!v}function il(o,f,v){var A=0,M=o==null?A:o.length;if(typeof f=="number"&&f===f&&M<=Ee){for(;A<M;){var V=A+M>>>1,Z=o[V];Z!==null&&!br(Z)&&(v?Z<=f:Z<f)?A=V+1:M=V}return M}return ub(o,f,fr,v)}function ub(o,f,v,A){var M=0,V=o==null?0:o.length;if(V===0)return 0;f=v(f);for(var Z=f!==f,rt=f===null,ct=br(f),Pt=f===n;M<V;){var Ct=Kf((M+V)/2),Rt=v(o[Ct]),qt=Rt!==n,Kt=Rt===null,re=Rt===Rt,be=br(Rt);if(Z)var ie=A||re;else Pt?ie=re&&(A||qt):rt?ie=re&&qt&&(A||!Kt):ct?ie=re&&qt&&!Kt&&(A||!be):Kt||be?ie=!1:ie=A?Rt<=f:Rt<f;ie?M=Ct+1:V=Ct}return Nn(V,Ae)}function bR(o,f){for(var v=-1,A=o.length,M=0,V=[];++v<A;){var Z=o[v],rt=f?f(Z):Z;if(!v||!ai(rt,ct)){var ct=rt;V[M++]=Z===0?0:Z}}return V}function _R(o){return typeof o=="number"?o:br(o)?Xt:+o}function yr(o){if(typeof o=="string")return o;if(pe(o))return Vt(o,yr)+"";if(br(o))return JL?JL.call(o):"";var f=o+"";return f=="0"&&1/o==-1/0?"-0":f}function Es(o,f,v){var A=-1,M=mt,V=o.length,Z=!0,rt=[],ct=rt;if(v)Z=!1,M=kt;else if(V>=i){var Pt=f?null:vG(o);if(Pt)return Ui(Pt);Z=!1,M=aa,ct=new fa}else ct=f?[]:rt;t:for(;++A<V;){var Ct=o[A],Rt=f?f(Ct):Ct;if(Ct=v||Ct!==0?Ct:0,Z&&Rt===Rt){for(var qt=ct.length;qt--;)if(ct[qt]===Rt)continue t;f&&ct.push(Rt),rt.push(Ct)}else M(ct,Rt,v)||(ct!==rt&&ct.push(Rt),rt.push(Ct))}return rt}function cb(o,f){return f=Ps(f,o),o=XR(o,f),o==null||delete o[Li(Gr(f))]}function wR(o,f,v,A){return Nu(o,f,v(ha(o,f)),A)}function sl(o,f,v,A){for(var M=o.length,V=A?M:-1;(A?V--:++V<M)&&f(o[V],V,o););return v?zr(o,A?0:V,A?V+1:M):zr(o,A?V+1:0,A?M:V)}function xR(o,f){var v=o;return v instanceof Re&&(v=v.value()),le(f,function(A,M){return M.func.apply(M.thisArg,de([A],M.args))},v)}function fb(o,f,v){var A=o.length;if(A<2)return A?Es(o[0]):[];for(var M=-1,V=et(A);++M<A;)for(var Z=o[M],rt=-1;++rt<A;)rt!=M&&(V[M]=ku(V[M]||Z,o[rt],f,v));return Es(Pn(V,1),f,v)}function AR(o,f,v){for(var A=-1,M=o.length,V=f.length,Z={};++A<M;){var rt=A<V?f[A]:n;v(Z,o[A],rt)}return Z}function lb(o){return on(o)?o:[]}function hb(o){return typeof o=="function"?o:fr}function Ps(o,f){return pe(o)?o:wb(o,f)?[o]:JR(Fe(o))}var aG=xe;function Cs(o,f,v){var A=o.length;return v=v===n?A:v,!f&&v>=A?o:zr(o,f,v)}var SR=j3||function(o){return Ke.clearTimeout(o)};function TR(o,f){if(f)return o.slice();var v=o.length,A=WL?WL(v):new o.constructor(v);return o.copy(A),A}function db(o){var f=new o.constructor(o.byteLength);return new $f(f).set(new $f(o)),f}function oG(o,f){var v=f?db(o.buffer):o.buffer;return new o.constructor(v,o.byteOffset,o.byteLength)}function uG(o){var f=new o.constructor(o.source,_f.exec(o));return f.lastIndex=o.lastIndex,f}function cG(o){return Ru?Bt(Ru.call(o)):{}}function ER(o,f){var v=f?db(o.buffer):o.buffer;return new o.constructor(v,o.byteOffset,o.length)}function PR(o,f){if(o!==f){var v=o!==n,A=o===null,M=o===o,V=br(o),Z=f!==n,rt=f===null,ct=f===f,Pt=br(f);if(!rt&&!Pt&&!V&&o>f||V&&Z&&ct&&!rt&&!Pt||A&&Z&&ct||!v&&ct||!M)return 1;if(!A&&!V&&!Pt&&o<f||Pt&&v&&M&&!A&&!V||rt&&v&&M||!Z&&M||!ct)return-1}return 0}function fG(o,f,v){for(var A=-1,M=o.criteria,V=f.criteria,Z=M.length,rt=v.length;++A<Z;){var ct=PR(M[A],V[A]);if(ct){if(A>=rt)return ct;var Pt=v[A];return ct*(Pt=="desc"?-1:1)}}return o.index-f.index}function CR(o,f,v,A){for(var M=-1,V=o.length,Z=v.length,rt=-1,ct=f.length,Pt=mn(V-Z,0),Ct=et(ct+Pt),Rt=!A;++rt<ct;)Ct[rt]=f[rt];for(;++M<Z;)(Rt||M<V)&&(Ct[v[M]]=o[M]);for(;Pt--;)Ct[rt++]=o[M++];return Ct}function LR(o,f,v,A){for(var M=-1,V=o.length,Z=-1,rt=v.length,ct=-1,Pt=f.length,Ct=mn(V-rt,0),Rt=et(Ct+Pt),qt=!A;++M<Ct;)Rt[M]=o[M];for(var Kt=M;++ct<Pt;)Rt[Kt+ct]=f[ct];for(;++Z<rt;)(qt||M<V)&&(Rt[Kt+v[Z]]=o[M++]);return Rt}function or(o,f){var v=-1,A=o.length;for(f||(f=et(A));++v<A;)f[v]=o[v];return f}function Ci(o,f,v,A){var M=!v;v||(v={});for(var V=-1,Z=f.length;++V<Z;){var rt=f[V],ct=A?A(v[rt],o[rt],rt,v,o):n;ct===n&&(ct=o[rt]),M?Wi(v,rt,ct):Ou(v,rt,ct)}return v}function lG(o,f){return Ci(o,_b(o),f)}function hG(o,f){return Ci(o,GR(o),f)}function al(o,f){return function(v,A){var M=pe(v)?J:Iz,V=f?f():{};return M(v,o,ee(A,2),V)}}function oo(o){return xe(function(f,v){var A=-1,M=v.length,V=M>1?v[M-1]:n,Z=M>2?v[2]:n;for(V=o.length>3&&typeof V=="function"?(M--,V):n,Z&&jn(v[0],v[1],Z)&&(V=M<3?n:V,M=1),f=Bt(f);++A<M;){var rt=v[A];rt&&o(f,rt,A,V)}return f})}function RR(o,f){return function(v,A){if(v==null)return v;if(!ur(v))return o(v,A);for(var M=v.length,V=f?M:-1,Z=Bt(v);(f?V--:++V<M)&&A(Z[V],V,Z)!==!1;);return v}}function OR(o){return function(f,v,A){for(var M=-1,V=Bt(f),Z=A(f),rt=Z.length;rt--;){var ct=Z[o?rt:++M];if(v(V[ct],ct,V)===!1)break}return f}}function dG(o,f,v){var A=f&T,M=Du(o);function V(){var Z=this&&this!==Ke&&this instanceof V?M:o;return Z.apply(A?v:this,arguments)}return V}function kR(o){return function(f){f=Fe(f);var v=ar(f)?Hn(f):n,A=v?v[0]:f.charAt(0),M=v?Cs(v,1).join(""):f.slice(1);return A[o]()+M}}function uo(o){return function(f){return le(RO(LO(f).replace(mu,"")),o,"")}}function Du(o){return function(){var f=arguments;switch(f.length){case 0:return new o;case 1:return new o(f[0]);case 2:return new o(f[0],f[1]);case 3:return new o(f[0],f[1],f[2]);case 4:return new o(f[0],f[1],f[2],f[3]);case 5:return new o(f[0],f[1],f[2],f[3],f[4]);case 6:return new o(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new o(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var v=ao(o.prototype),A=o.apply(v,f);return Je(A)?A:v}}function pG(o,f,v){var A=Du(o);function M(){for(var V=arguments.length,Z=et(V),rt=V,ct=co(M);rt--;)Z[rt]=arguments[rt];var Pt=V<3&&Z[0]!==ct&&Z[V-1]!==ct?[]:mr(Z,ct);if(V-=Pt.length,V<v)return qR(o,f,ol,M.placeholder,n,Z,Pt,n,n,v-V);var Ct=this&&this!==Ke&&this instanceof M?A:o;return N(Ct,this,Z)}return M}function MR(o){return function(f,v,A){var M=Bt(f);if(!ur(f)){var V=ee(v,3);f=An(f),v=function(rt){return V(M[rt],rt,M)}}var Z=o(f,v,A);return Z>-1?M[V?f[Z]:Z]:n}}function IR(o){return Xi(function(f){var v=f.length,A=v,M=Fr.prototype.thru;for(o&&f.reverse();A--;){var V=f[A];if(typeof V!="function")throw new we(a);if(M&&!Z&&ll(V)=="wrapper")var Z=new Fr([],!0)}for(A=Z?A:v;++A<v;){V=f[A];var rt=ll(V),ct=rt=="wrapper"?yb(V):n;ct&&xb(ct[0])&&ct[1]==(d|q|H|E)&&!ct[4].length&&ct[9]==1?Z=Z[ll(ct[0])].apply(Z,ct[3]):Z=V.length==1&&xb(V)?Z[rt]():Z.thru(V)}return function(){var Pt=arguments,Ct=Pt[0];if(Z&&Pt.length==1&&pe(Ct))return Z.plant(Ct).value();for(var Rt=0,qt=v?f[Rt].apply(this,Pt):Ct;++Rt<v;)qt=f[Rt].call(this,qt);return qt}})}function ol(o,f,v,A,M,V,Z,rt,ct,Pt){var Ct=f&d,Rt=f&T,qt=f&P,Kt=f&(q|B),re=f&L,be=qt?n:Du(o);function ie(){for(var Pe=arguments.length,Oe=et(Pe),_r=Pe;_r--;)Oe[_r]=arguments[_r];if(Kt)var Xn=co(ie),wr=vr(Oe,Xn);if(A&&(Oe=CR(Oe,A,M,Kt)),V&&(Oe=LR(Oe,V,Z,Kt)),Pe-=wr,Kt&&Pe<Pt){var un=mr(Oe,Xn);return qR(o,f,ol,ie.placeholder,v,Oe,un,rt,ct,Pt-Pe)}var oi=Rt?v:this,Ji=qt?oi[o]:o;return Pe=Oe.length,rt?Oe=IG(Oe,rt):re&&Pe>1&&Oe.reverse(),Ct&&ct<Pe&&(Oe.length=ct),this&&this!==Ke&&this instanceof ie&&(Ji=be||Du(Ji)),Ji.apply(oi,Oe)}return ie}function NR(o,f){return function(v,A){return Gz(v,o,f(A),{})}}function ul(o,f){return function(v,A){var M;if(v===n&&A===n)return f;if(v!==n&&(M=v),A!==n){if(M===n)return A;typeof v=="string"||typeof A=="string"?(v=yr(v),A=yr(A)):(v=_R(v),A=_R(A)),M=o(v,A)}return M}}function pb(o){return Xi(function(f){return f=Vt(f,Un(ee())),xe(function(v){var A=this;return o(f,function(M){return N(M,A,v)})})})}function cl(o,f){f=f===n?" ":yr(f);var v=f.length;if(v<2)return v?ob(f,o):f;var A=ob(f,Yf(o/Ei(f)));return ar(f)?Cs(Hn(A),0,o).join(""):A.slice(0,o)}function gG(o,f,v,A){var M=f&T,V=Du(o);function Z(){for(var rt=-1,ct=arguments.length,Pt=-1,Ct=A.length,Rt=et(Ct+ct),qt=this&&this!==Ke&&this instanceof Z?V:o;++Pt<Ct;)Rt[Pt]=A[Pt];for(;ct--;)Rt[Pt++]=arguments[++rt];return N(qt,M?v:this,Rt)}return Z}function DR(o){return function(f,v,A){return A&&typeof A!="number"&&jn(f,v,A)&&(v=A=n),f=Zi(f),v===n?(v=f,f=0):v=Zi(v),A=A===n?f<v?1:-1:Zi(A),tG(f,v,A,o)}}function fl(o){return function(f,v){return typeof f=="string"&&typeof v=="string"||(f=Ur(f),v=Ur(v)),o(f,v)}}function qR(o,f,v,A,M,V,Z,rt,ct,Pt){var Ct=f&q,Rt=Ct?Z:n,qt=Ct?n:Z,Kt=Ct?V:n,re=Ct?n:V;f|=Ct?H:X,f&=~(Ct?X:H),f&k||(f&=-4);var be=[o,f,M,Kt,Rt,re,qt,rt,ct,Pt],ie=v.apply(n,be);return xb(o)&&YR(ie,be),ie.placeholder=A,KR(ie,o,f)}function gb(o){var f=$t[o];return function(v,A){if(v=Ur(v),A=A==null?0:Nn(ye(A),292),A&&KL(v)){var M=(Fe(v)+"e").split("e"),V=f(M[0]+"e"+(+M[1]+A));return M=(Fe(V)+"e").split("e"),+(M[0]+"e"+(+M[1]-A))}return f(v)}}var vG=io&&1/Ui(new io([,-0]))[1]==ft?function(o){return new io(o)}:qb;function BR(o){return function(f){var v=Dn(f);return v==C?no(f):v==Yt?Su(f):ri(f,o(f))}}function ji(o,f,v,A,M,V,Z,rt){var ct=f&P;if(!ct&&typeof o!="function")throw new we(a);var Pt=A?A.length:0;if(Pt||(f&=-97,A=M=n),Z=Z===n?Z:mn(ye(Z),0),rt=rt===n?rt:ye(rt),Pt-=M?M.length:0,f&X){var Ct=A,Rt=M;A=M=n}var qt=ct?n:yb(o),Kt=[o,f,v,A,M,Ct,Rt,V,Z,rt];if(qt&&OG(Kt,qt),o=Kt[0],f=Kt[1],v=Kt[2],A=Kt[3],M=Kt[4],rt=Kt[9]=Kt[9]===n?ct?0:o.length:mn(Kt[9]-Pt,0),!rt&&f&(q|B)&&(f&=-25),!f||f==T)var re=dG(o,f,v);else f==q||f==B?re=pG(o,f,rt):(f==H||f==(T|H))&&!M.length?re=gG(o,f,v,A):re=ol.apply(n,Kt);var be=qt?yR:YR;return KR(be(re,Kt),o,f)}function FR(o,f,v,A){return o===n||ai(o,vn[v])&&!ue.call(A,v)?f:o}function VR(o,f,v,A,M,V){return Je(o)&&Je(f)&&(V.set(f,o),rl(o,f,n,VR,V),V.delete(f)),o}function mG(o){return Fu(o)?n:o}function zR(o,f,v,A,M,V){var Z=v&w,rt=o.length,ct=f.length;if(rt!=ct&&!(Z&&ct>rt))return!1;var Pt=V.get(o),Ct=V.get(f);if(Pt&&Ct)return Pt==f&&Ct==o;var Rt=-1,qt=!0,Kt=v&x?new fa:n;for(V.set(o,f),V.set(f,o);++Rt<rt;){var re=o[Rt],be=f[Rt];if(A)var ie=Z?A(be,re,Rt,f,o,V):A(re,be,Rt,o,f,V);if(ie!==n){if(ie)continue;qt=!1;break}if(Kt){if(!Ze(f,function(Pe,Oe){if(!aa(Kt,Oe)&&(re===Pe||M(re,Pe,v,A,V)))return Kt.push(Oe)})){qt=!1;break}}else if(!(re===be||M(re,be,v,A,V))){qt=!1;break}}return V.delete(o),V.delete(f),qt}function yG(o,f,v,A,M,V,Z){switch(v){case sn:if(o.byteLength!=f.byteLength||o.byteOffset!=f.byteOffset)return!1;o=o.buffer,f=f.buffer;case ve:return!(o.byteLength!=f.byteLength||!V(new $f(o),new $f(f)));case wt:case Ht:case D:return ai(+o,+f);case zt:return o.name==f.name&&o.message==f.message;case Nt:case ne:return o==f+"";case C:var rt=no;case Yt:var ct=A&w;if(rt||(rt=Ui),o.size!=f.size&&!ct)return!1;var Pt=Z.get(o);if(Pt)return Pt==f;A|=x,Z.set(o,f);var Ct=zR(rt(o),rt(f),A,M,V,Z);return Z.delete(o),Ct;case he:if(Ru)return Ru.call(o)==Ru.call(f)}return!1}function bG(o,f,v,A,M,V){var Z=v&w,rt=vb(o),ct=rt.length,Pt=vb(f),Ct=Pt.length;if(ct!=Ct&&!Z)return!1;for(var Rt=ct;Rt--;){var qt=rt[Rt];if(!(Z?qt in f:ue.call(f,qt)))return!1}var Kt=V.get(o),re=V.get(f);if(Kt&&re)return Kt==f&&re==o;var be=!0;V.set(o,f),V.set(f,o);for(var ie=Z;++Rt<ct;){qt=rt[Rt];var Pe=o[qt],Oe=f[qt];if(A)var _r=Z?A(Oe,Pe,qt,f,o,V):A(Pe,Oe,qt,o,f,V);if(!(_r===n?Pe===Oe||M(Pe,Oe,v,A,V):_r)){be=!1;break}ie||(ie=qt=="constructor")}if(be&&!ie){var Xn=o.constructor,wr=f.constructor;Xn!=wr&&"constructor"in o&&"constructor"in f&&!(typeof Xn=="function"&&Xn instanceof Xn&&typeof wr=="function"&&wr instanceof wr)&&(be=!1)}return V.delete(o),V.delete(f),be}function Xi(o){return Sb(jR(o,n,nO),o+"")}function vb(o){return oR(o,An,_b)}function mb(o){return oR(o,cr,GR)}var yb=Zf?function(o){return Zf.get(o)}:qb;function ll(o){for(var f=o.name+"",v=so[f],A=ue.call(so,f)?v.length:0;A--;){var M=v[A],V=M.func;if(V==null||V==o)return M.name}return f}function co(o){var f=ue.call(F,"placeholder")?F:o;return f.placeholder}function ee(){var o=F.iteratee||Nb;return o=o===Nb?fR:o,arguments.length?o(arguments[0],arguments[1]):o}function hl(o,f){var v=o.__data__;return PG(f)?v[typeof f=="string"?"string":"hash"]:v.map}function bb(o){for(var f=An(o),v=f.length;v--;){var A=f[v],M=o[A];f[v]=[A,M,$R(M)]}return f}function da(o,f){var v=Vf(o,f);return cR(v)?v:n}function _G(o){var f=ue.call(o,ua),v=o[ua];try{o[ua]=n;var A=!0}catch{}var M=Uf.call(o);return A&&(f?o[ua]=v:delete o[ua]),M}var _b=j0?function(o){return o==null?[]:(o=Bt(o),At(j0(o),function(f){return XL.call(o,f)}))}:Bb,GR=j0?function(o){for(var f=[];o;)de(f,_b(o)),o=Wf(o);return f}:Bb,Dn=Wn;(X0&&Dn(new X0(new ArrayBuffer(1)))!=sn||Pu&&Dn(new Pu)!=C||Y0&&Dn(Y0.resolve())!=vt||io&&Dn(new io)!=Yt||Cu&&Dn(new Cu)!=Mt)&&(Dn=function(o){var f=Wn(o),v=f==$?o.constructor:n,A=v?pa(v):"";if(A)switch(A){case nz:return sn;case rz:return C;case iz:return vt;case sz:return Yt;case az:return Mt}return f});function wG(o,f,v){for(var A=-1,M=v.length;++A<M;){var V=v[A],Z=V.size;switch(V.type){case"drop":o+=Z;break;case"dropRight":f-=Z;break;case"take":f=Nn(f,o+Z);break;case"takeRight":o=mn(o,f-Z);break}}return{start:o,end:f}}function xG(o){var f=o.match(P0);return f?f[1].split(C0):[]}function UR(o,f,v){f=Ps(f,o);for(var A=-1,M=f.length,V=!1;++A<M;){var Z=Li(f[A]);if(!(V=o!=null&&v(o,Z)))break;o=o[Z]}return V||++A!=M?V:(M=o==null?0:o.length,!!M&&bl(M)&&Yi(Z,M)&&(pe(o)||ga(o)))}function AG(o){var f=o.length,v=new o.constructor(f);return f&&typeof o[0]=="string"&&ue.call(o,"index")&&(v.index=o.index,v.input=o.input),v}function HR(o){return typeof o.constructor=="function"&&!qu(o)?ao(Wf(o)):{}}function SG(o,f,v){var A=o.constructor;switch(f){case ve:return db(o);case wt:case Ht:return new A(+o);case sn:return oG(o,v);case qe:case He:case an:case wn:case $e:case Xe:case rr:case yi:case Qr:return ER(o,v);case C:return new A;case D:case ne:return new A(o);case Nt:return uG(o);case Yt:return new A;case he:return cG(o)}}function TG(o,f){var v=f.length;if(!v)return o;var A=v-1;return f[A]=(v>1?"& ":"")+f[A],f=f.join(v>2?", ":" "),o.replace(E0,`{
/* [wrapped with `+f+`] */
`)}function EG(o){return pe(o)||ga(o)||!!(YL&&o&&o[YL])}function Yi(o,f){var v=typeof o;return f=f??lt,!!f&&(v=="number"||v!="symbol"&&Ya.test(o))&&o>-1&&o%1==0&&o<f}function jn(o,f,v){if(!Je(v))return!1;var A=typeof f;return(A=="number"?ur(v)&&Yi(f,v.length):A=="string"&&f in v)?ai(v[f],o):!1}function wb(o,f){if(pe(o))return!1;var v=typeof o;return v=="number"||v=="symbol"||v=="boolean"||o==null||br(o)?!0:vf.test(o)||!T0.test(o)||f!=null&&o in Bt(f)}function PG(o){var f=typeof o;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?o!=="__proto__":o===null}function xb(o){var f=ll(o),v=F[f];if(typeof v!="function"||!(f in Re.prototype))return!1;if(o===v)return!0;var A=yb(v);return!!A&&o===A[0]}function CG(o){return!!$L&&$L in o}var LG=$n?Ki:Fb;function qu(o){var f=o&&o.constructor,v=typeof f=="function"&&f.prototype||vn;return o===v}function $R(o){return o===o&&!Je(o)}function WR(o,f){return function(v){return v==null?!1:v[o]===f&&(f!==n||o in Bt(v))}}function RG(o){var f=ml(o,function(A){return v.size===l&&v.clear(),A}),v=f.cache;return f}function OG(o,f){var v=o[1],A=f[1],M=v|A,V=M<(T|P|d),Z=A==d&&v==q||A==d&&v==E&&o[7].length<=f[8]||A==(d|E)&&f[7].length<=f[8]&&v==q;if(!(V||Z))return o;A&T&&(o[2]=f[2],M|=v&T?0:k);var rt=f[3];if(rt){var ct=o[3];o[3]=ct?CR(ct,rt,f[4]):rt,o[4]=ct?mr(o[3],g):f[4]}return rt=f[5],rt&&(ct=o[5],o[5]=ct?LR(ct,rt,f[6]):rt,o[6]=ct?mr(o[5],g):f[6]),rt=f[7],rt&&(o[7]=rt),A&d&&(o[8]=o[8]==null?f[8]:Nn(o[8],f[8])),o[9]==null&&(o[9]=f[9]),o[0]=f[0],o[1]=M,o}function kG(o){var f=[];if(o!=null)for(var v in Bt(o))f.push(v);return f}function MG(o){return Uf.call(o)}function jR(o,f,v){return f=mn(f===n?o.length-1:f,0),function(){for(var A=arguments,M=-1,V=mn(A.length-f,0),Z=et(V);++M<V;)Z[M]=A[f+M];M=-1;for(var rt=et(f+1);++M<f;)rt[M]=A[M];return rt[f]=v(Z),N(o,this,rt)}}function XR(o,f){return f.length<2?o:ha(o,zr(f,0,-1))}function IG(o,f){for(var v=o.length,A=Nn(f.length,v),M=or(o);A--;){var V=f[A];o[A]=Yi(V,v)?M[V]:n}return o}function Ab(o,f){if(!(f==="constructor"&&typeof o[f]=="function")&&f!="__proto__")return o[f]}var YR=ZR(yR),Bu=Y3||function(o,f){return Ke.setTimeout(o,f)},Sb=ZR(rG);function KR(o,f,v){var A=f+"";return Sb(o,TG(A,NG(xG(A),v)))}function ZR(o){var f=0,v=0;return function(){var A=Q3(),M=Y-(A-v);if(v=A,M>0){if(++f>=K)return arguments[0]}else f=0;return o.apply(n,arguments)}}function dl(o,f){var v=-1,A=o.length,M=A-1;for(f=f===n?A:f;++v<f;){var V=ab(v,M),Z=o[V];o[V]=o[v],o[v]=Z}return o.length=f,o}var JR=RG(function(o){var f=[];return o.charCodeAt(0)===46&&f.push(""),o.replace(mf,function(v,A,M,V){f.push(M?V.replace(R0,"$1"):A||v)}),f});function Li(o){if(typeof o=="string"||br(o))return o;var f=o+"";return f=="0"&&1/o==-1/0?"-0":f}function pa(o){if(o!=null){try{return ii.call(o)}catch{}try{return o+""}catch{}}return""}function NG(o,f){return j(ot,function(v){var A="_."+v[0];f&v[1]&&!mt(o,A)&&o.push(A)}),o.sort()}function QR(o){if(o instanceof Re)return o.clone();var f=new Fr(o.__wrapped__,o.__chain__);return f.__actions__=or(o.__actions__),f.__index__=o.__index__,f.__values__=o.__values__,f}function DG(o,f,v){(v?jn(o,f,v):f===n)?f=1:f=mn(ye(f),0);var A=o==null?0:o.length;if(!A||f<1)return[];for(var M=0,V=0,Z=et(Yf(A/f));M<A;)Z[V++]=zr(o,M,M+=f);return Z}function qG(o){for(var f=-1,v=o==null?0:o.length,A=0,M=[];++f<v;){var V=o[f];V&&(M[A++]=V)}return M}function BG(){var o=arguments.length;if(!o)return[];for(var f=et(o-1),v=arguments[0],A=o;A--;)f[A-1]=arguments[A];return de(pe(v)?or(v):[v],Pn(f,1))}var FG=xe(function(o,f){return on(o)?ku(o,Pn(f,1,on,!0)):[]}),VG=xe(function(o,f){var v=Gr(f);return on(v)&&(v=n),on(o)?ku(o,Pn(f,1,on,!0),ee(v,2)):[]}),zG=xe(function(o,f){var v=Gr(f);return on(v)&&(v=n),on(o)?ku(o,Pn(f,1,on,!0),n,v):[]});function GG(o,f,v){var A=o==null?0:o.length;return A?(f=v||f===n?1:ye(f),zr(o,f<0?0:f,A)):[]}function UG(o,f,v){var A=o==null?0:o.length;return A?(f=v||f===n?1:ye(f),f=A-f,zr(o,0,f<0?0:f)):[]}function HG(o,f){return o&&o.length?sl(o,ee(f,3),!0,!0):[]}function $G(o,f){return o&&o.length?sl(o,ee(f,3),!0):[]}function WG(o,f,v,A){var M=o==null?0:o.length;return M?(v&&typeof v!="number"&&jn(o,f,v)&&(v=0,A=M),Bz(o,f,v,A)):[]}function tO(o,f,v){var A=o==null?0:o.length;if(!A)return-1;var M=v==null?0:ye(v);return M<0&&(M=mn(A+M,0)),Te(o,ee(f,3),M)}function eO(o,f,v){var A=o==null?0:o.length;if(!A)return-1;var M=A-1;return v!==n&&(M=ye(v),M=v<0?mn(A+M,0):Nn(M,A-1)),Te(o,ee(f,3),M,!0)}function nO(o){var f=o==null?0:o.length;return f?Pn(o,1):[]}function jG(o){var f=o==null?0:o.length;return f?Pn(o,ft):[]}function XG(o,f){var v=o==null?0:o.length;return v?(f=f===n?1:ye(f),Pn(o,f)):[]}function YG(o){for(var f=-1,v=o==null?0:o.length,A={};++f<v;){var M=o[f];A[M[0]]=M[1]}return A}function rO(o){return o&&o.length?o[0]:n}function KG(o,f,v){var A=o==null?0:o.length;if(!A)return-1;var M=v==null?0:ye(v);return M<0&&(M=mn(A+M,0)),Ve(o,f,M)}function ZG(o){var f=o==null?0:o.length;return f?zr(o,0,-1):[]}var JG=xe(function(o){var f=Vt(o,lb);return f.length&&f[0]===o[0]?eb(f):[]}),QG=xe(function(o){var f=Gr(o),v=Vt(o,lb);return f===Gr(v)?f=n:v.pop(),v.length&&v[0]===o[0]?eb(v,ee(f,2)):[]}),tU=xe(function(o){var f=Gr(o),v=Vt(o,lb);return f=typeof f=="function"?f:n,f&&v.pop(),v.length&&v[0]===o[0]?eb(v,n,f):[]});function eU(o,f){return o==null?"":Z3.call(o,f)}function Gr(o){var f=o==null?0:o.length;return f?o[f-1]:n}function nU(o,f,v){var A=o==null?0:o.length;if(!A)return-1;var M=A;return v!==n&&(M=ye(v),M=M<0?mn(A+M,0):Nn(M,A-1)),f===f?ro(o,f,M):Te(o,eo,M,!0)}function rU(o,f){return o&&o.length?pR(o,ye(f)):n}var iU=xe(iO);function iO(o,f){return o&&o.length&&f&&f.length?sb(o,f):o}function sU(o,f,v){return o&&o.length&&f&&f.length?sb(o,f,ee(v,2)):o}function aU(o,f,v){return o&&o.length&&f&&f.length?sb(o,f,n,v):o}var oU=Xi(function(o,f){var v=o==null?0:o.length,A=Z0(o,f);return mR(o,Vt(f,function(M){return Yi(M,v)?+M:M}).sort(PR)),A});function uU(o,f){var v=[];if(!(o&&o.length))return v;var A=-1,M=[],V=o.length;for(f=ee(f,3);++A<V;){var Z=o[A];f(Z,A,o)&&(v.push(Z),M.push(A))}return mR(o,M),v}function Tb(o){return o==null?o:ez.call(o)}function cU(o,f,v){var A=o==null?0:o.length;return A?(v&&typeof v!="number"&&jn(o,f,v)?(f=0,v=A):(f=f==null?0:ye(f),v=v===n?A:ye(v)),zr(o,f,v)):[]}function fU(o,f){return il(o,f)}function lU(o,f,v){return ub(o,f,ee(v,2))}function hU(o,f){var v=o==null?0:o.length;if(v){var A=il(o,f);if(A<v&&ai(o[A],f))return A}return-1}function dU(o,f){return il(o,f,!0)}function pU(o,f,v){return ub(o,f,ee(v,2),!0)}function gU(o,f){var v=o==null?0:o.length;if(v){var A=il(o,f,!0)-1;if(ai(o[A],f))return A}return-1}function vU(o){return o&&o.length?bR(o):[]}function mU(o,f){return o&&o.length?bR(o,ee(f,2)):[]}function yU(o){var f=o==null?0:o.length;return f?zr(o,1,f):[]}function bU(o,f,v){return o&&o.length?(f=v||f===n?1:ye(f),zr(o,0,f<0?0:f)):[]}function _U(o,f,v){var A=o==null?0:o.length;return A?(f=v||f===n?1:ye(f),f=A-f,zr(o,f<0?0:f,A)):[]}function wU(o,f){return o&&o.length?sl(o,ee(f,3),!1,!0):[]}function xU(o,f){return o&&o.length?sl(o,ee(f,3)):[]}var AU=xe(function(o){return Es(Pn(o,1,on,!0))}),SU=xe(function(o){var f=Gr(o);return on(f)&&(f=n),Es(Pn(o,1,on,!0),ee(f,2))}),TU=xe(function(o){var f=Gr(o);return f=typeof f=="function"?f:n,Es(Pn(o,1,on,!0),n,f)});function EU(o){return o&&o.length?Es(o):[]}function PU(o,f){return o&&o.length?Es(o,ee(f,2)):[]}function CU(o,f){return f=typeof f=="function"?f:n,o&&o.length?Es(o,n,f):[]}function Eb(o){if(!(o&&o.length))return[];var f=0;return o=At(o,function(v){if(on(v))return f=mn(v.length,f),!0}),sa(f,function(v){return Vt(o,Gi(v))})}function sO(o,f){if(!(o&&o.length))return[];var v=Eb(o);return f==null?v:Vt(v,function(A){return N(f,n,A)})}var LU=xe(function(o,f){return on(o)?ku(o,f):[]}),RU=xe(function(o){return fb(At(o,on))}),OU=xe(function(o){var f=Gr(o);return on(f)&&(f=n),fb(At(o,on),ee(f,2))}),kU=xe(function(o){var f=Gr(o);return f=typeof f=="function"?f:n,fb(At(o,on),n,f)}),MU=xe(Eb);function IU(o,f){return AR(o||[],f||[],Ou)}function NU(o,f){return AR(o||[],f||[],Nu)}var DU=xe(function(o){var f=o.length,v=f>1?o[f-1]:n;return v=typeof v=="function"?(o.pop(),v):n,sO(o,v)});function aO(o){var f=F(o);return f.__chain__=!0,f}function qU(o,f){return f(o),o}function pl(o,f){return f(o)}var BU=Xi(function(o){var f=o.length,v=f?o[0]:0,A=this.__wrapped__,M=function(V){return Z0(V,o)};return f>1||this.__actions__.length||!(A instanceof Re)||!Yi(v)?this.thru(M):(A=A.slice(v,+v+(f?1:0)),A.__actions__.push({func:pl,args:[M],thisArg:n}),new Fr(A,this.__chain__).thru(function(V){return f&&!V.length&&V.push(n),V}))});function FU(){return aO(this)}function VU(){return new Fr(this.value(),this.__chain__)}function zU(){this.__values__===n&&(this.__values__=_O(this.value()));var o=this.__index__>=this.__values__.length,f=o?n:this.__values__[this.__index__++];return{done:o,value:f}}function GU(){return this}function UU(o){for(var f,v=this;v instanceof Qf;){var A=QR(v);A.__index__=0,A.__values__=n,f?M.__wrapped__=A:f=A;var M=A;v=v.__wrapped__}return M.__wrapped__=o,f}function HU(){var o=this.__wrapped__;if(o instanceof Re){var f=o;return this.__actions__.length&&(f=new Re(this)),f=f.reverse(),f.__actions__.push({func:pl,args:[Tb],thisArg:n}),new Fr(f,this.__chain__)}return this.thru(Tb)}function $U(){return xR(this.__wrapped__,this.__actions__)}var WU=al(function(o,f,v){ue.call(o,v)?++o[v]:Wi(o,v,1)});function jU(o,f,v){var A=pe(o)?bt:qz;return v&&jn(o,f,v)&&(f=n),A(o,ee(f,3))}function XU(o,f){var v=pe(o)?At:sR;return v(o,ee(f,3))}var YU=MR(tO),KU=MR(eO);function ZU(o,f){return Pn(gl(o,f),1)}function JU(o,f){return Pn(gl(o,f),ft)}function QU(o,f,v){return v=v===n?1:ye(v),Pn(gl(o,f),v)}function oO(o,f){var v=pe(o)?j:Ts;return v(o,ee(f,3))}function uO(o,f){var v=pe(o)?ut:iR;return v(o,ee(f,3))}var tH=al(function(o,f,v){ue.call(o,v)?o[v].push(f):Wi(o,v,[f])});function eH(o,f,v,A){o=ur(o)?o:lo(o),v=v&&!A?ye(v):0;var M=o.length;return v<0&&(v=mn(M+v,0)),_l(o)?v<=M&&o.indexOf(f,v)>-1:!!M&&Ve(o,f,v)>-1}var nH=xe(function(o,f,v){var A=-1,M=typeof f=="function",V=ur(o)?et(o.length):[];return Ts(o,function(Z){V[++A]=M?N(f,Z,v):Mu(Z,f,v)}),V}),rH=al(function(o,f,v){Wi(o,v,f)});function gl(o,f){var v=pe(o)?Vt:lR;return v(o,ee(f,3))}function iH(o,f,v,A){return o==null?[]:(pe(f)||(f=f==null?[]:[f]),v=A?n:v,pe(v)||(v=v==null?[]:[v]),gR(o,f,v))}var sH=al(function(o,f,v){o[v?0:1].push(f)},function(){return[[],[]]});function aH(o,f,v){var A=pe(o)?le:ni,M=arguments.length<3;return A(o,ee(f,4),v,M,Ts)}function oH(o,f,v){var A=pe(o)?pn:ni,M=arguments.length<3;return A(o,ee(f,4),v,M,iR)}function uH(o,f){var v=pe(o)?At:sR;return v(o,yl(ee(f,3)))}function cH(o){var f=pe(o)?tR:eG;return f(o)}function fH(o,f,v){(v?jn(o,f,v):f===n)?f=1:f=ye(f);var A=pe(o)?kz:nG;return A(o,f)}function lH(o){var f=pe(o)?Mz:iG;return f(o)}function hH(o){if(o==null)return 0;if(ur(o))return _l(o)?Ei(o):o.length;var f=Dn(o);return f==C||f==Yt?o.size:rb(o).length}function dH(o,f,v){var A=pe(o)?Ze:sG;return v&&jn(o,f,v)&&(f=n),A(o,ee(f,3))}var pH=xe(function(o,f){if(o==null)return[];var v=f.length;return v>1&&jn(o,f[0],f[1])?f=[]:v>2&&jn(f[0],f[1],f[2])&&(f=[f[0]]),gR(o,Pn(f,1),[])}),vl=X3||function(){return Ke.Date.now()};function gH(o,f){if(typeof f!="function")throw new we(a);return o=ye(o),function(){if(--o<1)return f.apply(this,arguments)}}function cO(o,f,v){return f=v?n:f,f=o&&f==null?o.length:f,ji(o,d,n,n,n,n,f)}function fO(o,f){var v;if(typeof f!="function")throw new we(a);return o=ye(o),function(){return--o>0&&(v=f.apply(this,arguments)),o<=1&&(f=n),v}}var Pb=xe(function(o,f,v){var A=T;if(v.length){var M=mr(v,co(Pb));A|=H}return ji(o,A,f,v,M)}),lO=xe(function(o,f,v){var A=T|P;if(v.length){var M=mr(v,co(lO));A|=H}return ji(f,A,o,v,M)});function hO(o,f,v){f=v?n:f;var A=ji(o,q,n,n,n,n,n,f);return A.placeholder=hO.placeholder,A}function dO(o,f,v){f=v?n:f;var A=ji(o,B,n,n,n,n,n,f);return A.placeholder=dO.placeholder,A}function pO(o,f,v){var A,M,V,Z,rt,ct,Pt=0,Ct=!1,Rt=!1,qt=!0;if(typeof o!="function")throw new we(a);f=Ur(f)||0,Je(v)&&(Ct=!!v.leading,Rt="maxWait"in v,V=Rt?mn(Ur(v.maxWait)||0,f):V,qt="trailing"in v?!!v.trailing:qt);function Kt(un){var oi=A,Ji=M;return A=M=n,Pt=un,Z=o.apply(Ji,oi),Z}function re(un){return Pt=un,rt=Bu(Pe,f),Ct?Kt(un):Z}function be(un){var oi=un-ct,Ji=un-Pt,MO=f-oi;return Rt?Nn(MO,V-Ji):MO}function ie(un){var oi=un-ct,Ji=un-Pt;return ct===n||oi>=f||oi<0||Rt&&Ji>=V}function Pe(){var un=vl();if(ie(un))return Oe(un);rt=Bu(Pe,be(un))}function Oe(un){return rt=n,qt&&A?Kt(un):(A=M=n,Z)}function _r(){rt!==n&&SR(rt),Pt=0,A=ct=M=rt=n}function Xn(){return rt===n?Z:Oe(vl())}function wr(){var un=vl(),oi=ie(un);if(A=arguments,M=this,ct=un,oi){if(rt===n)return re(ct);if(Rt)return SR(rt),rt=Bu(Pe,f),Kt(ct)}return rt===n&&(rt=Bu(Pe,f)),Z}return wr.cancel=_r,wr.flush=Xn,wr}var vH=xe(function(o,f){return rR(o,1,f)}),mH=xe(function(o,f,v){return rR(o,Ur(f)||0,v)});function yH(o){return ji(o,L)}function ml(o,f){if(typeof o!="function"||f!=null&&typeof f!="function")throw new we(a);var v=function(){var A=arguments,M=f?f.apply(this,A):A[0],V=v.cache;if(V.has(M))return V.get(M);var Z=o.apply(this,A);return v.cache=V.set(M,Z)||V,Z};return v.cache=new(ml.Cache||$i),v}ml.Cache=$i;function yl(o){if(typeof o!="function")throw new we(a);return function(){var f=arguments;switch(f.length){case 0:return!o.call(this);case 1:return!o.call(this,f[0]);case 2:return!o.call(this,f[0],f[1]);case 3:return!o.call(this,f[0],f[1],f[2])}return!o.apply(this,f)}}function bH(o){return fO(2,o)}var _H=aG(function(o,f){f=f.length==1&&pe(f[0])?Vt(f[0],Un(ee())):Vt(Pn(f,1),Un(ee()));var v=f.length;return xe(function(A){for(var M=-1,V=Nn(A.length,v);++M<V;)A[M]=f[M].call(this,A[M]);return N(o,this,A)})}),Cb=xe(function(o,f){var v=mr(f,co(Cb));return ji(o,H,n,f,v)}),gO=xe(function(o,f){var v=mr(f,co(gO));return ji(o,X,n,f,v)}),wH=Xi(function(o,f){return ji(o,E,n,n,n,f)});function xH(o,f){if(typeof o!="function")throw new we(a);return f=f===n?f:ye(f),xe(o,f)}function AH(o,f){if(typeof o!="function")throw new we(a);return f=f==null?0:mn(ye(f),0),xe(function(v){var A=v[f],M=Cs(v,0,f);return A&&de(M,A),N(o,this,M)})}function SH(o,f,v){var A=!0,M=!0;if(typeof o!="function")throw new we(a);return Je(v)&&(A="leading"in v?!!v.leading:A,M="trailing"in v?!!v.trailing:M),pO(o,f,{leading:A,maxWait:f,trailing:M})}function TH(o){return cO(o,1)}function EH(o,f){return Cb(hb(f),o)}function PH(){if(!arguments.length)return[];var o=arguments[0];return pe(o)?o:[o]}function CH(o){return Vr(o,_)}function LH(o,f){return f=typeof f=="function"?f:n,Vr(o,_,f)}function RH(o){return Vr(o,p|_)}function OH(o,f){return f=typeof f=="function"?f:n,Vr(o,p|_,f)}function kH(o,f){return f==null||nR(o,f,An(f))}function ai(o,f){return o===f||o!==o&&f!==f}var MH=fl(tb),IH=fl(function(o,f){return o>=f}),ga=uR(function(){return arguments}())?uR:function(o){return tn(o)&&ue.call(o,"callee")&&!XL.call(o,"callee")},pe=et.isArray,NH=h?Un(h):Uz;function ur(o){return o!=null&&bl(o.length)&&!Ki(o)}function on(o){return tn(o)&&ur(o)}function DH(o){return o===!0||o===!1||tn(o)&&Wn(o)==wt}var Ls=K3||Fb,qH=m?Un(m):Hz;function BH(o){return tn(o)&&o.nodeType===1&&!Fu(o)}function FH(o){if(o==null)return!0;if(ur(o)&&(pe(o)||typeof o=="string"||typeof o.splice=="function"||Ls(o)||fo(o)||ga(o)))return!o.length;var f=Dn(o);if(f==C||f==Yt)return!o.size;if(qu(o))return!rb(o).length;for(var v in o)if(ue.call(o,v))return!1;return!0}function VH(o,f){return Iu(o,f)}function zH(o,f,v){v=typeof v=="function"?v:n;var A=v?v(o,f):n;return A===n?Iu(o,f,n,v):!!A}function Lb(o){if(!tn(o))return!1;var f=Wn(o);return f==zt||f==Gt||typeof o.message=="string"&&typeof o.name=="string"&&!Fu(o)}function GH(o){return typeof o=="number"&&KL(o)}function Ki(o){if(!Je(o))return!1;var f=Wn(o);return f==fe||f==Wt||f==it||f==_t}function vO(o){return typeof o=="number"&&o==ye(o)}function bl(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=lt}function Je(o){var f=typeof o;return o!=null&&(f=="object"||f=="function")}function tn(o){return o!=null&&typeof o=="object"}var mO=b?Un(b):Wz;function UH(o,f){return o===f||nb(o,f,bb(f))}function HH(o,f,v){return v=typeof v=="function"?v:n,nb(o,f,bb(f),v)}function $H(o){return yO(o)&&o!=+o}function WH(o){if(LG(o))throw new Et(s);return cR(o)}function jH(o){return o===null}function XH(o){return o==null}function yO(o){return typeof o=="number"||tn(o)&&Wn(o)==D}function Fu(o){if(!tn(o)||Wn(o)!=$)return!1;var f=Wf(o);if(f===null)return!0;var v=ue.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&ii.call(v)==H3}var Rb=S?Un(S):jz;function YH(o){return vO(o)&&o>=-9007199254740991&&o<=lt}var bO=R?Un(R):Xz;function _l(o){return typeof o=="string"||!pe(o)&&tn(o)&&Wn(o)==ne}function br(o){return typeof o=="symbol"||tn(o)&&Wn(o)==he}var fo=O?Un(O):Yz;function KH(o){return o===n}function ZH(o){return tn(o)&&Dn(o)==Mt}function JH(o){return tn(o)&&Wn(o)==oe}var QH=fl(ib),t$=fl(function(o,f){return o<=f});function _O(o){if(!o)return[];if(ur(o))return _l(o)?Hn(o):or(o);if(Eu&&o[Eu])return Ti(o[Eu]());var f=Dn(o),v=f==C?no:f==Yt?Ui:lo;return v(o)}function Zi(o){if(!o)return o===0?o:0;if(o=Ur(o),o===ft||o===-1/0){var f=o<0?-1:1;return f*dt}return o===o?o:0}function ye(o){var f=Zi(o),v=f%1;return f===f?v?f-v:f:0}function wO(o){return o?la(ye(o),0,Ft):0}function Ur(o){if(typeof o=="number")return o;if(br(o))return Xt;if(Je(o)){var f=typeof o.valueOf=="function"?o.valueOf():o;o=Je(f)?f+"":f}if(typeof o!="string")return o===0?o:+o;o=Br(o);var v=wf.test(o);return v||au.test(o)?G0(o.slice(2),v?2:8):ms.test(o)?Xt:+o}function xO(o){return Ci(o,cr(o))}function e$(o){return o?la(ye(o),-9007199254740991,lt):o===0?o:0}function Fe(o){return o==null?"":yr(o)}var n$=oo(function(o,f){if(qu(f)||ur(f)){Ci(f,An(f),o);return}for(var v in f)ue.call(f,v)&&Ou(o,v,f[v])}),AO=oo(function(o,f){Ci(f,cr(f),o)}),wl=oo(function(o,f,v,A){Ci(f,cr(f),o,A)}),r$=oo(function(o,f,v,A){Ci(f,An(f),o,A)}),i$=Xi(Z0);function s$(o,f){var v=ao(o);return f==null?v:eR(v,f)}var a$=xe(function(o,f){o=Bt(o);var v=-1,A=f.length,M=A>2?f[2]:n;for(M&&jn(f[0],f[1],M)&&(A=1);++v<A;)for(var V=f[v],Z=cr(V),rt=-1,ct=Z.length;++rt<ct;){var Pt=Z[rt],Ct=o[Pt];(Ct===n||ai(Ct,vn[Pt])&&!ue.call(o,Pt))&&(o[Pt]=V[Pt])}return o}),o$=xe(function(o){return o.push(n,VR),N(SO,n,o)});function u$(o,f){return Ai(o,ee(f,3),Pi)}function c$(o,f){return Ai(o,ee(f,3),Q0)}function f$(o,f){return o==null?o:J0(o,ee(f,3),cr)}function l$(o,f){return o==null?o:aR(o,ee(f,3),cr)}function h$(o,f){return o&&Pi(o,ee(f,3))}function d$(o,f){return o&&Q0(o,ee(f,3))}function p$(o){return o==null?[]:nl(o,An(o))}function g$(o){return o==null?[]:nl(o,cr(o))}function Ob(o,f,v){var A=o==null?n:ha(o,f);return A===n?v:A}function v$(o,f){return o!=null&&UR(o,f,Fz)}function kb(o,f){return o!=null&&UR(o,f,Vz)}var m$=NR(function(o,f,v){f!=null&&typeof f.toString!="function"&&(f=Uf.call(f)),o[f]=v},Ib(fr)),y$=NR(function(o,f,v){f!=null&&typeof f.toString!="function"&&(f=Uf.call(f)),ue.call(o,f)?o[f].push(v):o[f]=[v]},ee),b$=xe(Mu);function An(o){return ur(o)?QL(o):rb(o)}function cr(o){return ur(o)?QL(o,!0):Kz(o)}function _$(o,f){var v={};return f=ee(f,3),Pi(o,function(A,M,V){Wi(v,f(A,M,V),A)}),v}function w$(o,f){var v={};return f=ee(f,3),Pi(o,function(A,M,V){Wi(v,M,f(A,M,V))}),v}var x$=oo(function(o,f,v){rl(o,f,v)}),SO=oo(function(o,f,v,A){rl(o,f,v,A)}),A$=Xi(function(o,f){var v={};if(o==null)return v;var A=!1;f=Vt(f,function(V){return V=Ps(V,o),A||(A=V.length>1),V}),Ci(o,mb(o),v),A&&(v=Vr(v,p|y|_,mG));for(var M=f.length;M--;)cb(v,f[M]);return v});function S$(o,f){return TO(o,yl(ee(f)))}var T$=Xi(function(o,f){return o==null?{}:Jz(o,f)});function TO(o,f){if(o==null)return{};var v=Vt(mb(o),function(A){return[A]});return f=ee(f),vR(o,v,function(A,M){return f(A,M[0])})}function E$(o,f,v){f=Ps(f,o);var A=-1,M=f.length;for(M||(M=1,o=n);++A<M;){var V=o==null?n:o[Li(f[A])];V===n&&(A=M,V=v),o=Ki(V)?V.call(o):V}return o}function P$(o,f,v){return o==null?o:Nu(o,f,v)}function C$(o,f,v,A){return A=typeof A=="function"?A:n,o==null?o:Nu(o,f,v,A)}var EO=BR(An),PO=BR(cr);function L$(o,f,v){var A=pe(o),M=A||Ls(o)||fo(o);if(f=ee(f,4),v==null){var V=o&&o.constructor;M?v=A?new V:[]:Je(o)?v=Ki(V)?ao(Wf(o)):{}:v={}}return(M?j:Pi)(o,function(Z,rt,ct){return f(v,Z,rt,ct)}),v}function R$(o,f){return o==null?!0:cb(o,f)}function O$(o,f,v){return o==null?o:wR(o,f,hb(v))}function k$(o,f,v,A){return A=typeof A=="function"?A:n,o==null?o:wR(o,f,hb(v),A)}function lo(o){return o==null?[]:xu(o,An(o))}function M$(o){return o==null?[]:xu(o,cr(o))}function I$(o,f,v){return v===n&&(v=f,f=n),v!==n&&(v=Ur(v),v=v===v?v:0),f!==n&&(f=Ur(f),f=f===f?f:0),la(Ur(o),f,v)}function N$(o,f,v){return f=Zi(f),v===n?(v=f,f=0):v=Zi(v),o=Ur(o),zz(o,f,v)}function D$(o,f,v){if(v&&typeof v!="boolean"&&jn(o,f,v)&&(f=v=n),v===n&&(typeof f=="boolean"?(v=f,f=n):typeof o=="boolean"&&(v=o,o=n)),o===n&&f===n?(o=0,f=1):(o=Zi(o),f===n?(f=o,o=0):f=Zi(f)),o>f){var A=o;o=f,f=A}if(v||o%1||f%1){var M=ZL();return Nn(o+M*(f-o+_u("1e-"+((M+"").length-1))),f)}return ab(o,f)}var q$=uo(function(o,f,v){return f=f.toLowerCase(),o+(v?CO(f):f)});function CO(o){return Mb(Fe(o).toLowerCase())}function LO(o){return o=Fe(o),o&&o.replace(xf,xs).replace(D0,"")}function B$(o,f,v){o=Fe(o),f=yr(f);var A=o.length;v=v===n?A:la(ye(v),0,A);var M=v;return v-=f.length,v>=0&&o.slice(v,M)==f}function F$(o){return o=Fe(o),o&&Wa.test(o)?o.replace(ti,H0):o}function V$(o){return o=Fe(o),o&&vs.test(o)?o.replace(_i,"\\$&"):o}var z$=uo(function(o,f,v){return o+(v?"-":"")+f.toLowerCase()}),G$=uo(function(o,f,v){return o+(v?" ":"")+f.toLowerCase()}),U$=kR("toLowerCase");function H$(o,f,v){o=Fe(o),f=ye(f);var A=f?Ei(o):0;if(!f||A>=f)return o;var M=(f-A)/2;return cl(Kf(M),v)+o+cl(Yf(M),v)}function $$(o,f,v){o=Fe(o),f=ye(f);var A=f?Ei(o):0;return f&&A<f?o+cl(f-A,v):o}function W$(o,f,v){o=Fe(o),f=ye(f);var A=f?Ei(o):0;return f&&A<f?cl(f-A,v)+o:o}function j$(o,f,v){return v||f==null?f=0:f&&(f=+f),tz(Fe(o).replace(ea,""),f||0)}function X$(o,f,v){return(v?jn(o,f,v):f===n)?f=1:f=ye(f),ob(Fe(o),f)}function Y$(){var o=arguments,f=Fe(o[0]);return o.length<3?f:f.replace(o[1],o[2])}var K$=uo(function(o,f,v){return o+(v?"_":"")+f.toLowerCase()});function Z$(o,f,v){return v&&typeof v!="number"&&jn(o,f,v)&&(f=v=n),v=v===n?Ft:v>>>0,v?(o=Fe(o),o&&(typeof f=="string"||f!=null&&!Rb(f))&&(f=yr(f),!f&&ar(o))?Cs(Hn(o),0,v):o.split(f,v)):[]}var J$=uo(function(o,f,v){return o+(v?" ":"")+Mb(f)});function Q$(o,f,v){return o=Fe(o),v=v==null?0:la(ye(v),0,o.length),f=yr(f),o.slice(v,v+f.length)==f}function tW(o,f,v){var A=F.templateSettings;v&&jn(o,f,v)&&(f=n),o=Fe(o),f=wl({},f,A,FR);var M=wl({},f.imports,A.imports,FR),V=An(M),Z=xu(M,V),rt,ct,Pt=0,Ct=f.interpolate||Ka,Rt="__p += '",qt=me((f.escape||Ka).source+"|"+Ct.source+"|"+(Ct===ja?bf:Ka).source+"|"+(f.evaluate||Ka).source+"|$","g"),Kt="//# sourceURL="+(ue.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++z0+"]")+`
`;o.replace(qt,function(ie,Pe,Oe,_r,Xn,wr){return Oe||(Oe=_r),Rt+=o.slice(Pt,wr).replace(na,$0),Pe&&(rt=!0,Rt+=`' +
__e(`+Pe+`) +
'`),Xn&&(ct=!0,Rt+=`';
`+Xn+`;
__p += '`),Oe&&(Rt+=`' +
((__t = (`+Oe+`)) == null ? '' : __t) +
'`),Pt=wr+ie.length,ie}),Rt+=`';
`;var re=ue.call(f,"variable")&&f.variable;if(!re)Rt=`with (obj) {
`+Rt+`
}
`;else if(L0.test(re))throw new Et(u);Rt=(ct?Rt.replace(Js,""):Rt).replace(Qs,"$1").replace(bi,"$1;"),Rt="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(rt?", __e = _.escape":"")+(ct?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Rt+`return __p
}`;var be=OO(function(){return Ut(V,Kt+"return "+Rt).apply(n,Z)});if(be.source=Rt,Lb(be))throw be;return be}function eW(o){return Fe(o).toLowerCase()}function nW(o){return Fe(o).toUpperCase()}function rW(o,f,v){if(o=Fe(o),o&&(v||f===n))return Br(o);if(!o||!(f=yr(f)))return o;var A=Hn(o),M=Hn(f),V=Ne(A,M),Z=oa(A,M)+1;return Cs(A,V,Z).join("")}function iW(o,f,v){if(o=Fe(o),o&&(v||f===n))return o.slice(0,zf(o)+1);if(!o||!(f=yr(f)))return o;var A=Hn(o),M=oa(A,Hn(f))+1;return Cs(A,0,M).join("")}function sW(o,f,v){if(o=Fe(o),o&&(v||f===n))return o.replace(ea,"");if(!o||!(f=yr(f)))return o;var A=Hn(o),M=Ne(A,Hn(f));return Cs(A,M).join("")}function aW(o,f){var v=I,A=G;if(Je(f)){var M="separator"in f?f.separator:M;v="length"in f?ye(f.length):v,A="omission"in f?yr(f.omission):A}o=Fe(o);var V=o.length;if(ar(o)){var Z=Hn(o);V=Z.length}if(v>=V)return o;var rt=v-Ei(A);if(rt<1)return A;var ct=Z?Cs(Z,0,rt).join(""):o.slice(0,rt);if(M===n)return ct+A;if(Z&&(rt+=ct.length-rt),Rb(M)){if(o.slice(rt).search(M)){var Pt,Ct=ct;for(M.global||(M=me(M.source,Fe(_f.exec(M))+"g")),M.lastIndex=0;Pt=M.exec(Ct);)var Rt=Pt.index;ct=ct.slice(0,Rt===n?rt:Rt)}}else if(o.indexOf(yr(M),rt)!=rt){var qt=ct.lastIndexOf(M);qt>-1&&(ct=ct.slice(0,qt))}return ct+A}function oW(o){return o=Fe(o),o&&ta.test(o)?o.replace(Nr,Tu):o}var uW=uo(function(o,f,v){return o+(v?" ":"")+f.toUpperCase()}),Mb=kR("toUpperCase");function RO(o,f,v){return o=Fe(o),f=v?n:f,f===n?Au(o)?st(o):Se(o):o.match(f)||[]}var OO=xe(function(o,f){try{return N(o,n,f)}catch(v){return Lb(v)?v:new Et(v)}}),cW=Xi(function(o,f){return j(f,function(v){v=Li(v),Wi(o,v,Pb(o[v],o))}),o});function fW(o){var f=o==null?0:o.length,v=ee();return o=f?Vt(o,function(A){if(typeof A[1]!="function")throw new we(a);return[v(A[0]),A[1]]}):[],xe(function(A){for(var M=-1;++M<f;){var V=o[M];if(N(V[0],this,A))return N(V[1],this,A)}})}function lW(o){return Dz(Vr(o,p))}function Ib(o){return function(){return o}}function hW(o,f){return o==null||o!==o?f:o}var dW=IR(),pW=IR(!0);function fr(o){return o}function Nb(o){return fR(typeof o=="function"?o:Vr(o,p))}function gW(o){return hR(Vr(o,p))}function vW(o,f){return dR(o,Vr(f,p))}var mW=xe(function(o,f){return function(v){return Mu(v,o,f)}}),yW=xe(function(o,f){return function(v){return Mu(o,v,f)}});function Db(o,f,v){var A=An(f),M=nl(f,A);v==null&&!(Je(f)&&(M.length||!A.length))&&(v=f,f=o,o=this,M=nl(f,An(f)));var V=!(Je(v)&&"chain"in v)||!!v.chain,Z=Ki(o);return j(M,function(rt){var ct=f[rt];o[rt]=ct,Z&&(o.prototype[rt]=function(){var Pt=this.__chain__;if(V||Pt){var Ct=o(this.__wrapped__),Rt=Ct.__actions__=or(this.__actions__);return Rt.push({func:ct,args:arguments,thisArg:o}),Ct.__chain__=Pt,Ct}return ct.apply(o,de([this.value()],arguments))})}),o}function bW(){return Ke._===this&&(Ke._=$3),this}function qb(){}function _W(o){return o=ye(o),xe(function(f){return pR(f,o)})}var wW=pb(Vt),xW=pb(bt),AW=pb(Ze);function kO(o){return wb(o)?Gi(Li(o)):Qz(o)}function SW(o){return function(f){return o==null?n:ha(o,f)}}var TW=DR(),EW=DR(!0);function Bb(){return[]}function Fb(){return!1}function PW(){return{}}function CW(){return""}function LW(){return!0}function RW(o,f){if(o=ye(o),o<1||o>lt)return[];var v=Ft,A=Nn(o,Ft);f=ee(f),o-=Ft;for(var M=sa(A,f);++v<o;)f(v);return M}function OW(o){return pe(o)?Vt(o,Li):br(o)?[o]:or(JR(Fe(o)))}function kW(o){var f=++U3;return Fe(o)+f}var MW=ul(function(o,f){return o+f},0),IW=gb("ceil"),NW=ul(function(o,f){return o/f},1),DW=gb("floor");function qW(o){return o&&o.length?el(o,fr,tb):n}function BW(o,f){return o&&o.length?el(o,ee(f,2),tb):n}function FW(o){return gr(o,fr)}function VW(o,f){return gr(o,ee(f,2))}function zW(o){return o&&o.length?el(o,fr,ib):n}function GW(o,f){return o&&o.length?el(o,ee(f,2),ib):n}var UW=ul(function(o,f){return o*f},1),HW=gb("round"),$W=ul(function(o,f){return o-f},0);function WW(o){return o&&o.length?In(o,fr):0}function jW(o,f){return o&&o.length?In(o,ee(f,2)):0}return F.after=gH,F.ary=cO,F.assign=n$,F.assignIn=AO,F.assignInWith=wl,F.assignWith=r$,F.at=i$,F.before=fO,F.bind=Pb,F.bindAll=cW,F.bindKey=lO,F.castArray=PH,F.chain=aO,F.chunk=DG,F.compact=qG,F.concat=BG,F.cond=fW,F.conforms=lW,F.constant=Ib,F.countBy=WU,F.create=s$,F.curry=hO,F.curryRight=dO,F.debounce=pO,F.defaults=a$,F.defaultsDeep=o$,F.defer=vH,F.delay=mH,F.difference=FG,F.differenceBy=VG,F.differenceWith=zG,F.drop=GG,F.dropRight=UG,F.dropRightWhile=HG,F.dropWhile=$G,F.fill=WG,F.filter=XU,F.flatMap=ZU,F.flatMapDeep=JU,F.flatMapDepth=QU,F.flatten=nO,F.flattenDeep=jG,F.flattenDepth=XG,F.flip=yH,F.flow=dW,F.flowRight=pW,F.fromPairs=YG,F.functions=p$,F.functionsIn=g$,F.groupBy=tH,F.initial=ZG,F.intersection=JG,F.intersectionBy=QG,F.intersectionWith=tU,F.invert=m$,F.invertBy=y$,F.invokeMap=nH,F.iteratee=Nb,F.keyBy=rH,F.keys=An,F.keysIn=cr,F.map=gl,F.mapKeys=_$,F.mapValues=w$,F.matches=gW,F.matchesProperty=vW,F.memoize=ml,F.merge=x$,F.mergeWith=SO,F.method=mW,F.methodOf=yW,F.mixin=Db,F.negate=yl,F.nthArg=_W,F.omit=A$,F.omitBy=S$,F.once=bH,F.orderBy=iH,F.over=wW,F.overArgs=_H,F.overEvery=xW,F.overSome=AW,F.partial=Cb,F.partialRight=gO,F.partition=sH,F.pick=T$,F.pickBy=TO,F.property=kO,F.propertyOf=SW,F.pull=iU,F.pullAll=iO,F.pullAllBy=sU,F.pullAllWith=aU,F.pullAt=oU,F.range=TW,F.rangeRight=EW,F.rearg=wH,F.reject=uH,F.remove=uU,F.rest=xH,F.reverse=Tb,F.sampleSize=fH,F.set=P$,F.setWith=C$,F.shuffle=lH,F.slice=cU,F.sortBy=pH,F.sortedUniq=vU,F.sortedUniqBy=mU,F.split=Z$,F.spread=AH,F.tail=yU,F.take=bU,F.takeRight=_U,F.takeRightWhile=wU,F.takeWhile=xU,F.tap=qU,F.throttle=SH,F.thru=pl,F.toArray=_O,F.toPairs=EO,F.toPairsIn=PO,F.toPath=OW,F.toPlainObject=xO,F.transform=L$,F.unary=TH,F.union=AU,F.unionBy=SU,F.unionWith=TU,F.uniq=EU,F.uniqBy=PU,F.uniqWith=CU,F.unset=R$,F.unzip=Eb,F.unzipWith=sO,F.update=O$,F.updateWith=k$,F.values=lo,F.valuesIn=M$,F.without=LU,F.words=RO,F.wrap=EH,F.xor=RU,F.xorBy=OU,F.xorWith=kU,F.zip=MU,F.zipObject=IU,F.zipObjectDeep=NU,F.zipWith=DU,F.entries=EO,F.entriesIn=PO,F.extend=AO,F.extendWith=wl,Db(F,F),F.add=MW,F.attempt=OO,F.camelCase=q$,F.capitalize=CO,F.ceil=IW,F.clamp=I$,F.clone=CH,F.cloneDeep=RH,F.cloneDeepWith=OH,F.cloneWith=LH,F.conformsTo=kH,F.deburr=LO,F.defaultTo=hW,F.divide=NW,F.endsWith=B$,F.eq=ai,F.escape=F$,F.escapeRegExp=V$,F.every=jU,F.find=YU,F.findIndex=tO,F.findKey=u$,F.findLast=KU,F.findLastIndex=eO,F.findLastKey=c$,F.floor=DW,F.forEach=oO,F.forEachRight=uO,F.forIn=f$,F.forInRight=l$,F.forOwn=h$,F.forOwnRight=d$,F.get=Ob,F.gt=MH,F.gte=IH,F.has=v$,F.hasIn=kb,F.head=rO,F.identity=fr,F.includes=eH,F.indexOf=KG,F.inRange=N$,F.invoke=b$,F.isArguments=ga,F.isArray=pe,F.isArrayBuffer=NH,F.isArrayLike=ur,F.isArrayLikeObject=on,F.isBoolean=DH,F.isBuffer=Ls,F.isDate=qH,F.isElement=BH,F.isEmpty=FH,F.isEqual=VH,F.isEqualWith=zH,F.isError=Lb,F.isFinite=GH,F.isFunction=Ki,F.isInteger=vO,F.isLength=bl,F.isMap=mO,F.isMatch=UH,F.isMatchWith=HH,F.isNaN=$H,F.isNative=WH,F.isNil=XH,F.isNull=jH,F.isNumber=yO,F.isObject=Je,F.isObjectLike=tn,F.isPlainObject=Fu,F.isRegExp=Rb,F.isSafeInteger=YH,F.isSet=bO,F.isString=_l,F.isSymbol=br,F.isTypedArray=fo,F.isUndefined=KH,F.isWeakMap=ZH,F.isWeakSet=JH,F.join=eU,F.kebabCase=z$,F.last=Gr,F.lastIndexOf=nU,F.lowerCase=G$,F.lowerFirst=U$,F.lt=QH,F.lte=t$,F.max=qW,F.maxBy=BW,F.mean=FW,F.meanBy=VW,F.min=zW,F.minBy=GW,F.stubArray=Bb,F.stubFalse=Fb,F.stubObject=PW,F.stubString=CW,F.stubTrue=LW,F.multiply=UW,F.nth=rU,F.noConflict=bW,F.noop=qb,F.now=vl,F.pad=H$,F.padEnd=$$,F.padStart=W$,F.parseInt=j$,F.random=D$,F.reduce=aH,F.reduceRight=oH,F.repeat=X$,F.replace=Y$,F.result=E$,F.round=HW,F.runInContext=z,F.sample=cH,F.size=hH,F.snakeCase=K$,F.some=dH,F.sortedIndex=fU,F.sortedIndexBy=lU,F.sortedIndexOf=hU,F.sortedLastIndex=dU,F.sortedLastIndexBy=pU,F.sortedLastIndexOf=gU,F.startCase=J$,F.startsWith=Q$,F.subtract=$W,F.sum=WW,F.sumBy=jW,F.template=tW,F.times=RW,F.toFinite=Zi,F.toInteger=ye,F.toLength=wO,F.toLower=eW,F.toNumber=Ur,F.toSafeInteger=e$,F.toString=Fe,F.toUpper=nW,F.trim=rW,F.trimEnd=iW,F.trimStart=sW,F.truncate=aW,F.unescape=oW,F.uniqueId=kW,F.upperCase=uW,F.upperFirst=Mb,F.each=oO,F.eachRight=uO,F.first=rO,Db(F,function(){var o={};return Pi(F,function(f,v){ue.call(F.prototype,v)||(o[v]=f)}),o}(),{chain:!1}),F.VERSION=r,j(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){F[o].placeholder=F}),j(["drop","take"],function(o,f){Re.prototype[o]=function(v){v=v===n?1:mn(ye(v),0);var A=this.__filtered__&&!f?new Re(this):this.clone();return A.__filtered__?A.__takeCount__=Nn(v,A.__takeCount__):A.__views__.push({size:Nn(v,Ft),type:o+(A.__dir__<0?"Right":"")}),A},Re.prototype[o+"Right"]=function(v){return this.reverse()[o](v).reverse()}}),j(["filter","map","takeWhile"],function(o,f){var v=f+1,A=v==pt||v==at;Re.prototype[o]=function(M){var V=this.clone();return V.__iteratees__.push({iteratee:ee(M,3),type:v}),V.__filtered__=V.__filtered__||A,V}}),j(["head","last"],function(o,f){var v="take"+(f?"Right":"");Re.prototype[o]=function(){return this[v](1).value()[0]}}),j(["initial","tail"],function(o,f){var v="drop"+(f?"":"Right");Re.prototype[o]=function(){return this.__filtered__?new Re(this):this[v](1)}}),Re.prototype.compact=function(){return this.filter(fr)},Re.prototype.find=function(o){return this.filter(o).head()},Re.prototype.findLast=function(o){return this.reverse().find(o)},Re.prototype.invokeMap=xe(function(o,f){return typeof o=="function"?new Re(this):this.map(function(v){return Mu(v,o,f)})}),Re.prototype.reject=function(o){return this.filter(yl(ee(o)))},Re.prototype.slice=function(o,f){o=ye(o);var v=this;return v.__filtered__&&(o>0||f<0)?new Re(v):(o<0?v=v.takeRight(-o):o&&(v=v.drop(o)),f!==n&&(f=ye(f),v=f<0?v.dropRight(-f):v.take(f-o)),v)},Re.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Re.prototype.toArray=function(){return this.take(Ft)},Pi(Re.prototype,function(o,f){var v=/^(?:filter|find|map|reject)|While$/.test(f),A=/^(?:head|last)$/.test(f),M=F[A?"take"+(f=="last"?"Right":""):f],V=A||/^find/.test(f);M&&(F.prototype[f]=function(){var Z=this.__wrapped__,rt=A?[1]:arguments,ct=Z instanceof Re,Pt=rt[0],Ct=ct||pe(Z),Rt=function(Pe){var Oe=M.apply(F,de([Pe],rt));return A&&qt?Oe[0]:Oe};Ct&&v&&typeof Pt=="function"&&Pt.length!=1&&(ct=Ct=!1);var qt=this.__chain__,Kt=!!this.__actions__.length,re=V&&!qt,be=ct&&!Kt;if(!V&&Ct){Z=be?Z:new Re(this);var ie=o.apply(Z,rt);return ie.__actions__.push({func:pl,args:[Rt],thisArg:n}),new Fr(ie,qt)}return re&&be?o.apply(this,rt):(ie=this.thru(Rt),re?A?ie.value()[0]:ie.value():ie)})}),j(["pop","push","shift","sort","splice","unshift"],function(o){var f=gn[o],v=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",A=/^(?:pop|shift)$/.test(o);F.prototype[o]=function(){var M=arguments;if(A&&!this.__chain__){var V=this.value();return f.apply(pe(V)?V:[],M)}return this[v](function(Z){return f.apply(pe(Z)?Z:[],M)})}}),Pi(Re.prototype,function(o,f){var v=F[f];if(v){var A=v.name+"";ue.call(so,A)||(so[A]=[]),so[A].push({name:f,func:v})}}),so[ol(n,P).name]=[{name:"wrapper",func:n}],Re.prototype.clone=oz,Re.prototype.reverse=uz,Re.prototype.value=cz,F.prototype.at=BU,F.prototype.chain=FU,F.prototype.commit=VU,F.prototype.next=zU,F.prototype.plant=UU,F.prototype.reverse=HU,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=$U,F.prototype.first=F.prototype.head,Eu&&(F.prototype[Eu]=GU),F},yt=gt();ei?((ei.exports=yt)._=yt,to._=yt):Ke._=yt}).call(B2)}($o,$o.exports)),$o.exports}var V2=F2(),dn=ma(V2);function kr(t,e,n){return e.map((r,i)=>t(r,n[i]))}function Hc(t,e,n,r,i){return e.map((s,a)=>t(s,n[a],r[a],i[a]))}function hi(t,e,n,r){if(e.length==0)return r==1?1:0;let i=e[e.length-1];r==1?i|=~n:i&=n;for(let s=0;s<e.length-1;s++)i=t(i,e[s]);return i=t(i,i>>>16),i=t(i,i>>>8),i=t(i,i>>>4),i=t(i,i>>>2),i=t(i,i>>>1),i&1}function z2(t){return t>>5}function di(t){return t&31}function Fa(t,e,n,r,i){const s=t>0&&!(r[e]&1<<t-1)&&i[e]&1<<t-1;s&&di(t)&&(i[e]|=-1<<t),s&&e+1<n&&i.fill(-1,e+1)}function Ed(t,e){const n={};function r(i,s){if(n[i]=s,!(i.length*t>=e)){for(let a=0;a<1<<t;a+=1)r(i+a.toString(1<<t),s<<t|a|a<<16);r(i+"x",s<<t|(1<<t)-1)}}return r("",0),Object.seal(n),n}const G2=Ed(1,8),U2=Ed(3,3),H2=Ed(4,8);function pA(t,e,n,r){const i=[];let s=0,a=t;for(;s<e;){const u="00000000"+n[a].toString(16),c=n[a]^r[a];a++;for(let l=0;l<8&&s<e;l++,s+=4)c&15<<4*l?i.push("x"):i.push(u[u.length-1-l])}return i.reverse().join("")}function gA(t,e,n,r){const i=[];let s=0,a=t;for(;s<e;){const u="00000000000000000000000000000000"+n[a].toString(2),c=n[a]^r[a];a++;for(let l=0;l<32&&s<e;l++,s++)c&1<<l?i.push("x"):i.push(u[u.length-1-l])}return i.reverse().join("")}function Pd(t,e,n,r,i){const a=n+31>>>5;let u=0,c=-1+e;for(let l=t.length;l>0;){const g=t.slice(Math.max(0,l-2),l);l-=g.length;const p=H2[g];di(u)==0&&c++;const y=(1<<4*g.length)-1;r[c]|=(p>>>16&y)<<u,i[c]|=(p&y)<<u,u+=4*g.length}u<n&&Fa(u,c,a,r,i)}function vA(t,e,n,r,i){const a=n+31>>>5;let u=0,c=-1+e;for(let l=t.length;l>0;){const g=t.slice(Math.max(0,l-8),l);l-=g.length;const p=G2[g];di(u)==0&&c++;const y=(1<<1*g.length)-1;r[c]|=(p>>>16&y)<<u,i[c]|=(p&y)<<u,u+=1*g.length}u<n&&Fa(u,c,a,r,i)}class Cd extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Cd.prototype)}}function bn(t,e){if(!t)throw new Cd("Assertion failed: "+e)}class Ot{constructor(e,n,r){this._bits=e,this._avec=n,this._bvec=r}static make(e,n){e=e|0;let r,i;switch(n){case!0:case"1":case 1:r=i=-1;break;case!1:case"0":case-1:case void 0:r=i=0;break;case"x":case 0:r=0,i=-1;break;default:bn(!1,"Vector3vl.make() called with invalid initializer")}const s=(e+31)/32|0;return new Ot(e,new Uint32Array(s).fill(r),new Uint32Array(s).fill(i))}static zeros(e){return Ot.make(e,-1)}static ones(e){return Ot.make(e,1)}static xes(e){return Ot.make(e,0)}static fromBool(e,n=1){return Ot.make(n,e?1:-1)}static concat(...e){const r=e.reduce((c,l)=>l.bits+c,0)+31>>>5;let i=0,s=-1,a=new Uint32Array(r),u=new Uint32Array(r);for(const c of e)if(c.normalize(),di(i)==0)a.set(c._avec,s+1),u.set(c._bvec,s+1),i+=c._bits,s+=c._bits+31>>>5;else{for(const l in c._avec){if(a[s]|=c._avec[l]<<i,u[s]|=c._bvec[l]<<i,s++,s==r)break;a[s]=c._avec[l]>>>-i,u[s]=c._bvec[l]>>>-i}i+=c._bits,s+1>i+31>>>5&&s--}return new Ot(i,a,u)}static fromIterator(e,n,r){return(n&n-1)==0?Ot.fromIteratorPow2(e,n,r):Ot.fromIteratorAnySkip(e,n,r)}static fromIteratorAnySkip(e,n,r){const i=r+31>>>5;let s=0,a=-1,u=new Uint32Array(i),c=new Uint32Array(i);const l=(1<<n)-1;for(const g of e)di(s)==0&&a++,u[a]|=(g>>>n&l)<<s,c[a]|=(g&l)<<s,l<<s>>>s!=l&&(a++,u[a]=(g>>>n&l)>>>-s,c[a]=(g&l)>>>-s),s+=n;return s<r&&Fa(s,a,i,u,c),new Ot(r,u,c)}static fromIteratorPow2(e,n,r){const i=r+31>>>5;let s=0,a=-1,u=new Uint32Array(i),c=new Uint32Array(i);const l=(1<<n)-1;for(const g of e)di(s)==0&&a++,u[a]|=(g>>>n&l)<<s,c[a]|=(g&l)<<s,s+=n;return s<r&&Fa(s,a,i,u,c),new Ot(r,u,c)}static fromArray(e){const n=e.length,r=1,i=n+31>>>5;let s=0,a=-1,u=new Uint32Array(i),c=new Uint32Array(i);const l=(1<<r)-1;for(const g of e){const p=g+1+ +(g>0);di(s)==0&&a++,u[a]|=(p>>>r&l)<<s,c[a]|=(p&l)<<s,s+=r}return s<n&&Fa(s,a,i,u,c),new Ot(n,u,c)}static fromBin(e,n){n===void 0&&(n=e.length);const r=n+31>>>5,i=new Uint32Array(r),s=new Uint32Array(r);return vA(e,0,n,i,s),new Ot(n,i,s)}static fromOct(e,n){n===void 0&&(n=e.length*3);const i=n+31>>>5;let s=0,a=-1,u=new Uint32Array(i),c=new Uint32Array(i);const l=7;for(let g=e.length-1;g>=0;g--){const p=U2[e[g]];di(s)==0&&a++,u[a]|=(p>>>16&l)<<s,c[a]|=(p&l)<<s,l<<s>>>s!=l&&(a++,u[a]=(p>>>16&l)>>>-s,c[a]=(p&l)>>>-s),s+=3}return s<n&&Fa(s,a,i,u,c),new Ot(n,u,c)}static fromHex(e,n){n===void 0&&(n=e.length*4);const r=n+31>>>5,i=new Uint32Array(r),s=new Uint32Array(r);return Pd(e,0,n,i,s),new Ot(n,i,s)}static fromString(e){const r=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(e);bn(r!=null,"Vector3vl.fromString() Invalid string");const i=r[1].length?Number(r[1]):void 0,s=r[2].slice(1);switch(r[2][0]){case"b":return Ot.fromBin(s,i);case"o":return Ot.fromOct(s,i);case"h":return Ot.fromHex(s,i);case"d":return Ot.fromNumber(BigInt(s),i)}}static fromClonable(e){return new Ot(e._bits,e._avec,e._bvec)}static fromNumber(e,n){const r=n===void 0?0:n,i=BigInt(e);if(i>=BigInt(0)){let s=i.toString(2);return Ot.fromBin("0".repeat(Math.max(0,r-s.length))+s,n)}else{const s=(-i).toString(2).length;let u=(i+(BigInt(1)<<BigInt(s))).toString(2);return Ot.fromBin("1".repeat(Math.max(1,r-s))+"0".repeat(s-u.length)+u,n)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(e){const n=di(e),r=z2(e),i=this._avec[r]>>>n&1,s=this._bvec[r]>>>n&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const e=this._lastmask,n=r=>r.slice(0,r.length-1).every(i=>~i==0)&&(r[r.length-1]&e)==e;return n(this._avec)&&n(this._bvec)}get isLow(){if(this._bits==0)return!0;const e=this._lastmask,n=r=>r.slice(0,r.length-1).every(i=>i==0)&&(r[r.length-1]&e)==0;return n(this._avec)&&n(this._bvec)}get isDefined(){if(this._bits==0)return!1;const e=kr((n,r)=>n^r,this._avec,this._bvec);return e[e.length-1]|=~this._lastmask,!e.every(n=>~n==0)}get isFullyDefined(){if(this._bits==0)return!0;const e=kr((n,r)=>n^r,this._avec,this._bvec);return e[e.length-1]&=this._lastmask,!e.some(n=>!!n)}and(e){return bn(e._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Ot(this._bits,kr((n,r)=>n&r,e._avec,this._avec),kr((n,r)=>n&r,e._bvec,this._bvec))}or(e){return bn(e._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Ot(this._bits,kr((n,r)=>n|r,e._avec,this._avec),kr((n,r)=>n|r,e._bvec,this._bvec))}xor(e){return bn(e._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Ot(this._bits,Hc((n,r,i,s)=>(n|i)&(r^s),e._avec,e._bvec,this._avec,this._bvec),Hc((n,r,i,s)=>n&i^(r|s),e._avec,e._bvec,this._avec,this._bvec))}nand(e){return bn(e._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Ot(this._bits,kr((n,r)=>~(n&r),e._bvec,this._bvec),kr((n,r)=>~(n&r),e._avec,this._avec))}nor(e){return bn(e._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Ot(this._bits,kr((n,r)=>~(n|r),e._bvec,this._bvec),kr((n,r)=>~(n|r),e._avec,this._avec))}xnor(e){return bn(e._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Ot(this._bits,Hc((n,r,i,s)=>~(n&i^(r|s)),e._avec,e._bvec,this._avec,this._bvec),Hc((n,r,i,s)=>~((n|i)&(r^s)),e._avec,e._bvec,this._avec,this._bvec))}not(){return new Ot(this._bits,this._bvec.map(e=>~e),this._avec.map(e=>~e))}xmask(){const e=kr((n,r)=>n^r,this._avec,this._bvec);return new Ot(this._bits,e,e)}reduceAnd(){return new Ot(1,Uint32Array.of(hi((e,n)=>e&n,this._avec,this._lastmask,1)),Uint32Array.of(hi((e,n)=>e&n,this._bvec,this._lastmask,1)))}reduceOr(){return new Ot(1,Uint32Array.of(hi((e,n)=>e|n,this._avec,this._lastmask,0)),Uint32Array.of(hi((e,n)=>e|n,this._bvec,this._lastmask,0)))}reduceNand(){return new Ot(1,Uint32Array.of(~hi((e,n)=>e&n,this._bvec,this._lastmask,1)),Uint32Array.of(~hi((e,n)=>e&n,this._avec,this._lastmask,1)))}reduceNor(){return new Ot(1,Uint32Array.of(~hi((e,n)=>e|n,this._bvec,this._lastmask,0)),Uint32Array.of(~hi((e,n)=>e|n,this._avec,this._lastmask,0)))}reduceXor(){const e=kr((i,s)=>~i&s,this._avec,this._bvec),n=hi((i,s)=>i|s,e,this._lastmask,0),r=hi((i,s)=>i^s,this._avec,this._lastmask,0);return new Ot(1,Uint32Array.of(r&~n),Uint32Array.of(r|n))}reduceXnor(){return this.reduceXor().not()}concat(...e){return Ot.concat(this,...e)}slice(e,n){if(e===void 0&&(e=0),n===void 0&&(n=this._bits),n>this.bits&&(n=this.bits),e>n&&(n=e),di(e)==0){const r=this._avec.slice(e>>>5,n+31>>>5),i=this._bvec.slice(e>>>5,n+31>>>5);return new Ot(n-e,r,i)}else{const r=n-e+31>>>5,i=new Uint32Array(r),s=new Uint32Array(r);let a=0;i[a]=this._avec[e>>5]>>>e,s[a]=this._bvec[e>>5]>>>e;for(let u=(e>>5)+1;u<=n>>>5&&(i[a]|=this._avec[u]<<-e,s[a]|=this._bvec[u]<<-e,a++,a!=r);u++)i[a]=this._avec[u]>>>e,s[a]=this._bvec[u]>>>e;return new Ot(n-e,i,s)}}toIterator(e){return(e&e-1)==0?this.toIteratorPow2(e):this.toIteratorAnySkip(e)}*toIteratorAnySkip(e){this.normalize();const n=(1<<e)-1;let r=0,i=0,s=n;for(;r<this._bits;){let a=(this._avec[i]&s)>>>r,u=(this._bvec[i]&s)>>>r;if(s>>>r!=n&&i+1!=this._avec.length){const c=n>>-r;a|=(this._avec[i+1]&c)<<-r,u|=(this._bvec[i+1]&c)<<-r}yield a<<e|u,s<<=e,r+=e,s==0&&(i++,s=n<<r)}}*toIteratorPow2(e){this.normalize();const n=(1<<e)-1;let r=0,i=0,s=n;for(;r<this._bits;){const a=(this._avec[i]&s)>>>r,u=(this._bvec[i]&s)>>>r;yield a<<e|u,s<<=e,r+=e,s==0&&(i++,s=n)}}toArray(){this.normalize();const e=1,n=(1<<e)-1;let r=0,i=0,s=n,a=[];for(;r<this._bits;){const u=(this._avec[i]&s)>>>r,c=(this._bvec[i]&s)>>>r,l=u<<e|c;a.push(l-1-+(l>1)),s<<=e,r+=e,s==0&&(i++,s=n)}return a}toBin(){return gA(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const e=3,n=(1<<e)-1;let r=0,i=0,s=n,a=[];for(;r<this._bits;){let u=(this._avec[i]&s)>>>r,c=(this._bvec[i]&s)>>>r;if(s>>>r!=n&&i+1!=this._avec.length){const g=n>>-r;u|=(this._avec[i+1]&g)<<-r,c|=(this._bvec[i+1]&g)<<-r}const l=u<<e|c;7&l&~(l>>3)?a.push("x"):a.push((l>>3).toString()),s<<=e,r+=e,s==0&&(i++,s=n<<r)}return a.reverse().join("")}toHex(){return this.normalize(),pA(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(e=!1){return e?this.toNumberSigned():(bn(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),bn(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return bn(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),bn(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),bn(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(e=!1){return e?this.toBigIntSigned():(bn(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return bn(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),bn(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(e){if(e._bits!=this._bits)return!1;this.normalize(),e.normalize();for(const n in this._avec)if(this._avec[n]!=e._avec[n]||this._bvec[n]!=e._bvec[n])return!1;return!0}normalize(){const e=this._lastmask;this._avec[this._avec.length-1]&=e,this._bvec[this._bvec.length-1]&=e}get _lastmask(){return-1>>>-this.bits}}Ot.empty=Ot.zeros(0),Ot.one=Ot.ones(1),Ot.zero=Ot.zeros(1),Ot.x=Ot.xes(1);class Va{constructor(e,n,r){r===void 0&&(r=0),this._bits=e|0,this._size=n|0,this._wpc=(e+31)/32|0,this._avec=new Uint32Array(n*this._wpc).fill(r>0?-1:0),this._bvec=new Uint32Array(n*this._wpc).fill(r>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(e){if(e.length==0)return new Va(0,0);const n=new Va(e[0].bits,e.length);for(const r in e){e[r].normalize(),bn(e[r].bits==n._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let i=0;i<n._wpc;i++){const s=Number(r)*n._wpc+i;n._avec[s]=e[r]._avec[i],n._bvec[s]=e[r]._bvec[i]}}return n}get bits(){return this._bits}get words(){return this._size}get(e){const n=this._wpc*e;return new Ot(this._bits,this._avec.slice(n,n+this._wpc),this._bvec.slice(n,n+this._wpc))}set(e,n){bn(n.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),n.normalize();for(let r=0;r<this._wpc;r++)this._avec[e*this._wpc+r]=n._avec[r],this._bvec[e*this._wpc+r]=n._bvec[r]}toJSON(){const e=[];let n=[],r,i=0;const s=()=>{if(n.length!=0){if(n.reduce((c,l)=>c+l.length,0)==this._bits){const c=n.pop();n.length>0&&e.push(n.join("")),e.push(c)}else e.push(n.join(""));n=[]}},a=()=>{i!=0&&(i==1?r.length==this._bits?(s(),e.push(r)):n.push(r):(s(),e.push(i),e.push(r)),r=void 0,i=0)},u=c=>{r==c?i++:(a(),r=c,i=1)};for(let c=0;c<this._size;c++){const l=()=>{for(let g=0;g<this._wpc;g++){const p=this._avec[c*this._wpc+g]^this._bvec[c*this._wpc+g];for(let y=0;y<4;y++){const _=255<<y*16,w=p&_;if(w!=_||w!=0)return!1}}return!0};this._bits>0&&l()?u(pA(c*this._wpc,this._bits,this._avec,this._bvec)):u(gA(c*this._wpc,this._bits,this._avec,this._bvec))}return a(),s(),e}static fromJSON(e,n){const r=Math.ceil(e/4);let i=0;const s=l=>l.length==e||l.length==r?1:l.length/r;for(let l=0;l<n.length;l++)typeof n[l]=="string"?i+=s(n[l]):typeof n[l]=="number"&&(i+=n[l]*s(n[l+1]),l++);const a=new Va(e,i,-1);let u=0;const c=l=>{if(l.length==e)vA(l,u,e,a._avec,a._bvec),u+=a._wpc;else if(l.length==r)Pd(l,u,e,a._avec,a._bvec),u+=a._wpc;else for(let g=0;g<l.length/r;g++)Pd(l.slice(g*r,(g+1)*r),u,e,a._avec,a._bvec),u+=a._wpc};for(let l=0;l<n.length;l++)if(typeof n[l]=="string")c(n[l]);else if(typeof n[l]=="number"){for(const g of Array(n[l]).keys())c(n[l+1]);l++}return a}toArray(){return Array(this._size).fill(0).map((e,n)=>this.get(n))}toHex(){return this.toArray().map(e=>e.toHex())}eq(e){if(e._bits!=this._bits||e._size!=this._size)return!1;for(let n=0;n<this._size;n++)if(!e.get(n).eq(this.get(n)))return!1;return!0}}const mA={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},$2=q2.extend(dn.merge({},mA)),W2=D2.extend(dn.merge({},mA)),yA=Td.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,Td.prototype.update.apply(this,arguments)}}),bA=yA.extend({name:"remove",children:hA.prototype.children,options:hA.prototype.options}),_A=yA.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(t){this.notify("link:monitor")}}}),$c={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},We=tr.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:dn.merge({},$c,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:dn.merge({},$c,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation(){return{}},initialize(){const t=this.get("ports");t.items&&this._preprocessPorts(t.items),tr.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(e=>"change:"+e).join(" "),(e,n,r)=>{if(r.init)return;const i=dn.intersection(Object.keys(this.changed),this._unsupportedPropChanges);i.forEach(s=>{this.set(s,this.previous(s),{init:!0})}),console.warn('Beta property change support: "'+i+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(t,e){this.attr(t,this.get(e)),this.on("change:"+e,(n,r)=>this.attr(t,r))},_changeOutputSignals(t){dn.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(e=>e.get("source").port).forEach((e,n)=>e.forEach(r=>r.set("signal",t[n]))).value()},_setInput(t,e){const n=dn.clone(this.get("inputSignals"));n[e]=t,this.set("inputSignals",n)},_clearInput(t){const e=this.getPort(t).bits;this._setInput(Ot.xes(e),t)},_preprocessPorts(t){this._resetPortsSignals(t);for(const e of t){if(e.attrs={},e.attrs.bits={text:this._getBitsText(e.bits)},e.labelled){const n={text:"portlabel"in e?e.portlabel:e.id};e.polarity===!1&&(n["text-decoration"]="overline"),e.decor&&(console.assert(e.group=="in"),n.refX=10),e.attrs.iolabel=n}e.decor&&(e.attrs.decor={d:e.decor})}},_setPortsBits(t){const e=dn.cloneDeep(this.get("ports")),n=[];for(const r in t){const i=t[r],s=e.items.find(function(a){return a.id&&a.id===r});s.bits=i,s.attrs.bits.text=this._getBitsText(i),n.push(s)}this._resetPortsSignals(n),this.set("ports",e),this.graph.getConnectedLinks(this,{outbound:!0}).filter(r=>r.get("source").port in t).forEach(r=>r._changeSource(r.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(r=>r.get("target").port in t).forEach(r=>r._changeTarget(r.get("target")))},_getBitsText(t){return t>1?t:""},_resetPortValue(t){return Ot.xes(t.bits)},_resetPortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)console.assert(n.bits>=0),e[n.dir][n.id]=this._resetPortValue(n);this.set("inputSignals",e.in),this.set("outputSignals",e.out)},_removePortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)delete e[n.dir][n.id];this.set("inputSignals",e.in),this.set("outputSignals",e.out)},addPort(t){this.addPorts([t])},addPorts(t){this._preprocessPorts(t),tr.prototype.addPorts.apply(this,arguments)},removePort(t,e){this.removePorts([t])},removePorts(t,e){this._removePortsSignals(t),tr.prototype.removePorts.apply(this,arguments)},_getStackedPosition(t){return function(e,n){const r=t.side||"left",i=t.step||16,s=t.offset||12,a=r=="left"?n.topLeft().x:r=="right"?n.topRight().x:void 0,u=r=="top"?n.topLeft().y:r=="bottom"?n.bottomRight().y:void 0;return a!==void 0?dn.map(e,function(c,l){return l+=c.idxOffset||0,Q({x:a,y:l*i+s})}):dn.map(e,function(c,l){return l+=c.idxOffset||0,Q({x:l*i+s,y:u})})}},getLayoutSize(){return this.size()},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(t){return dn.cloneDeep(dn.pick(this.attributes,this._gateParams.concat(t?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),te=yn.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:yn.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(t){t.stopPropagation()},confirmUpdate(t){this.hasFlag(t,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(t,"SIGNAL2")&&this._updatePortSignals("out"),yn.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(t){const e=t==="in"?this.model.get("inputSignals"):t==="out"?this.model.get("outputSignals"):dn.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const n in e){const r=e[n],i=this.attrs.signal[r.isDefined?r.isHigh?"high":r.isLow?"low":"def":"undef"];this._applyPortAttrs(n,i)}},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},_applyPortAttrs(t,e){if(t in this._portElementsCache)for(const n in e){const r=this._portElementsCache[t].portSelectors[n];this.setNodeAttributes(r,e[n])}},_updatePorts(){yn.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),j2=Uc.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:Ot.xes(1),bits:1,warning:!1,z:0},{initialize(){Uc.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const t=this.get("target"),e=this.graph.getCell(t.id);e&&"port"in t&&e._clearInput(t.port),Uc.prototype.remove.apply(this,arguments)},_propagateSignal(t,e){const n=this.getTargetElement();n&&(this.get("warning")?n._clearInput(t.port):n._setInput(e,t.port))},_changeSignal(t){this._propagateSignal(this.get("target"),t)},_changeSource(t){const e=this.getSourceElement();e&&"port"in t?(this.set("bits",e.getPort(t.port).bits),this._checkConnection(),this.set("signal",e.get("outputSignals")[t.port])):this.set("signal",Ot.xes(this.get("bits")))},_changeTarget(t){if(this._checkConnection(),"port"in t&&this._propagateSignal(t,this.get("signal")),!this.hasChanged("target"))return;const e=this.previous("target"),n=this.graph.getCell(e.id);n&&"port"in e&&n._clearInput(e.port)},_checkConnection(){const t=this.get("target"),e=this.graph.getCell(t.id);this.set("warning",e&&e.getPort(t.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(t){const e={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(e.name=this.get("netname")),t&&this.has("vertices")&&this.get("vertices").length>0&&(e.vertices=dn.cloneDeep(this.get("vertices"))),e},getWirePath(){const t=[];for(let e=this.graph.get("subcircuit");e!=null;e=e.graph.get("subcircuit")){if(!e.has("label"))return null;t.push(e.get("label"))}return t.reverse()}}),X2=Gn.extend({initFlag:Gn.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:typeof window<"u"?new L2({tools:[new I2({focusOpacity:.5}),new $2,new W2,new bA({distanceShort:"75%",distanceLong:"50"}),new bA({distance:"-50",secondary:!0}),new _A({distanceShort:"25%",distanceLong:"30"}),new _A({distance:"-30",secondary:!0})]}):null,presentationAttributes:Gn.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){Gn.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(t){Gn.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateSignal(),this.hasFlag(t,"BITS")&&this._updateBits(),this.hasFlag(t,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const t=this.model.get("signal"),e=this.attrs.signal[t.isDefined?t.isHigh?"high":t.isLow?"low":"def":"undef"];this._applyAttrs(e)},_updateBits(){const t=this.model.get("bits"),e=this.attrs.bits[t>1?"bus":"single"];this._applyAttrs(e)},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},update(){Gn.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){Gn.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(t){Gn.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:t.clientX+5,y:t.clientY+5})},mouseleave(t){Gn.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(t){this.model.get("bits")!=1&&(this.wire_hover||(this.wire_hover=se('<div class="wire_hover">').css("left",t.x).css("top",t.y).appendTo(se(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const t=this.model.get("signal"),e=this.model.graph._display3vl,n=["Hex: "+e.show("hex",t)+"<br>","Dec: "+e.show("dec",t)+"<br>","Oct: "+e.show("oct",t)+"<br>","Bin: "+e.show("bin",t)].join("");this.wire_hover.html(n)},onEndModelChange(t,e,n){typeof e=="object"&&e!=null&&e==this.prevModels[t]&&Object.keys(e.changed).length>0&&!("position"in e.changed)||(Gn.prototype.onEndModelChange.apply(this,arguments),this.prevModels[t]=e)}}),Zt=We.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){We.prototype.initialize.apply(this,arguments),this.on("change:size",(t,e)=>{e.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:We.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"🔍",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(t=>t.join(" ")).join(" L")}),fn=te.extend({_autoResizeBox:!1,render(){te.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const t=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),e=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),n=Math.max(...t.map(a=>a.getBBox().width)),r=Math.max(...e.map(a=>a.getBBox().width)),i=a=>a==-1/0?-5:a;return i(n)+i(r)+25}}),er=Zt.define("NumBase",{numbase:"hex",bits:1},{initialize(){Zt.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:Zt.prototype._gateParams.concat(["numbase"])}),fs=fn.extend({presentationAttributes:fn.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(t){this.model.set("numbase",t.target.value||"bin")},_calculateBoxWidth(){const t=document.createElementNS("http://www.w3.org/2000/svg","text");se(t).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const e=t.getBBox().width+20;return t.remove(),e},confirmUpdate(t){fn.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"BITS")||this.hasFlag(t,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(t,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const t=this.model.get("numbase"),e=this.model.graph._display3vl;for(const n of e.usableDisplays(this.model.numbaseType,this.model.get("bits")))se("<option>").attr("value",n).prop("selected",n==t).text(n).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),Kr=er.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:t}],er.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{const r={};r[this._portDirection]=n,this._setPortsBits(r),this.get("mode")!=0&&this._checkMode()}),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const t=this.graph&&this.graph.has("subcircuit"),e=this.get("bits"),n=t?0:e==1?1:2;return this.set("mode",n),this.set("box_resized",!1),this.set("markup",n==0?this.markupInSubcircuit:n==1?this.markupSingle:this.markupBus),n},_setPortsBits(t){if(er.prototype._setPortsBits.apply(this,arguments),this.get("mode")!=0)return;const e=this.graph.get("subcircuit");console.assert(e!=null);const n={};n[this.get("net")]=t[this._portDirection],e._setPortsBits(n)},markupSingle:er.prototype.markup,markupBus:er.prototype.markup.concat(er.prototype.markupTooltip),markupInSubcircuit:er.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:er.prototype._gateParams.concat(["bits","net","order"])}),pi=fs.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const t=this.selectors.ioname;return t.getAttribute("display")!=="none"?t.getBBox().width+10:20;case 1:return 30;case 2:return fs.prototype._calculateBoxWidth.call(this)}}}),Wc=Kr.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(t){if(t.id=="out"&&t.dir=="out"){const e=this.get("bits");return this.get("mode")==1?Ot.zeros(e):Ot.xes(e)}else return Kr.prototype._resetPortValue.call(this,t)},_checkMode(){Kr.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(t){this._setInput(t),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(t){if(t.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:t})},markupSingle:Kr.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:Kr.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),Ld=pi.extend({attrs:dn.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},pi.prototype.attrs),confirmUpdate(t){pi.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL2")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry();break}},_updateButton(){const t=this.model.get("outputSignals").out,e=this.attrs.button[t.isHigh?"high":"low"];this._applyAttrs(e)},_updateNumEntry(){const t=this.model.graph._display3vl;this.$("input").val(t.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){pi.prototype.render.apply(this,arguments),this._updateView()},events:dn.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},fs.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(t){const e=this.model.get("numbase"),n=this.model.get("bits"),r=this.model.graph._display3vl;if(r.validate(e,t.target.value,n)){const i=r.read(e,t.target.value,n);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),Y2=Wc,K2=Ld,Z2=Wc,J2=Ld,jc=Kr.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:Kr.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:Kr.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),Rd=pi.extend({attrs:dn.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},pi.prototype.attrs),confirmUpdate(t){pi.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay();break}},_updateLamp(){const t=this.model.get("inputSignals").in,e=this.attrs.lamp[t.isHigh?"high":t.isLow?"low":"undef"];this._applyAttrs(e)},_updateNumDisplay(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){pi.prototype.render.apply(this,arguments),this._updateView()}}),Q2=jc,tD=Rd,eD=jc,nD=Rd,rD=er.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const e=this.get("constant").length;this.set("bits",e),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:e}],er.prototype.initialize.apply(this,arguments),this.on("change:constant",(n,r)=>{const i=r.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",Ot.fromBin(r,i))})},prepare(){const t=this.get("constant"),e=t.length;this.set("constantCache",Ot.fromBin(t,e))},operation(){return{out:this.get("constantCache")}},markup:er.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:er.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),iD=fs.extend({presentationAttributes:fs.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(t){fs.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"CONSTANT")||this.hasFlag(t,"NUMBASE"))&&this._showText()},_showText(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){fs.prototype.update.apply(this,arguments),this._showText()}}),sD=Zt.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue(t){return t.id=="out"&&t.dir=="out"?Ot.zero:Zt.prototype._resetPortValue(t)},operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:Zt.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:Zt.prototype._unsupportedPropChanges.concat(["bits"])}),aD=fn.extend({presentationAttributes:fn.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(t){fn.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(t){fn.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this.updatePropagation()},_changePropagation(t){const e=t.target.value,n=String(e)==String(Number(e));n&&this.model.set("propagation",Number(e)||1),this.$("input").toggleClass("invalid",!n)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}});function oD(t,e,n){return'<select name="base">'+t.usableDisplays("read",e).map(i=>'<option value="'+i+'"'+(i==n?' selected="selected"':"")+">"+i+"</option>").join("")+"</select>"}const Xc="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",ls="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",wA="M18-2v36l2-1 32-17h0L20-1z",Yc={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:"M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z"}},Hs={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Di(t=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(t)}}const gi=We.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:We.prototype.markup.concat([Di()]),_gateParams:We.prototype._gateParams.concat(["bits"])}),Od=gi.define("Gate11",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:t}],gi.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{this._setPortsBits({in:n,out:n})})}}),$s=gi.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const t=this.get("bits"),e=this.get("inputs"),n=[];for(let i=1;i<=e;i++)n.push({id:"in"+i,group:"in",dir:"in",bits:t});n.push({id:"out",group:"out",dir:"out",bits:t}),this.get("ports").items=n;const r=e/2;this.set("size",{width:60*r,height:32*r}),this.attr("body/transform","translate(-4, 0) scale("+r+")"),this.prop("ports/groups/in/position/args/dx",30*r),this.prop("ports/groups/in/attrs/wire/x2",-30*r-20),this.prop("ports/groups/in/attrs/port/refX",-30*r-20),this.prop("ports/groups/out/position/args/dx",-30*r),this.prop("ports/groups/out/attrs/wire/x2",30*r+20),this.prop("ports/groups/out/attrs/port/refX",30*r+20),gi.prototype.initialize.apply(this,arguments),this.on("change:bits",(i,s)=>{const a=this.get("inputs"),u={out:s};for(let c=1;c<=a;c++)u["in"+c]=s;this._setPortsBits(u)})},operation(t){let e=t.in1;for(let n=2;n<=this.get("inputs");n++)e=this.binoperation(e,t["in"+n]);return{out:this.finoperation(e)}},finoperation(t){return t},_gateParams:gi.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:gi.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:gi.prototype._operationHelpers.concat(["binoperation","finoperation"])}),hs=gi.define("GateReduce",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:1}],gi.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{this._setPortsBits({in:n})})}}),uD=Od.define("Repeater",{attrs:{gate:{d:wA}}},{operation(t){return{out:t.in}}}),cD=te,fD=Od.define("Not",{attrs:{gate:{d:wA}}},{operation(t){return{out:t.in.not()}},markup:We.prototype.markup.concat([Di([Hs])])}),lD=te,hD=$s.define("Or",{attrs:{gate:{d:ls}}},{binoperation(t,e){return t.or(e)}}),dD=te,pD=$s.define("And",{attrs:{gate:{d:Xc}}},{binoperation(t,e){return t.and(e)}}),gD=te,vD=$s.define("Nor",{attrs:{gate:{d:ls}}},{binoperation(t,e){return t.or(e)},finoperation(t){return t.not()},markup:We.prototype.markup.concat([Di([Hs])])}),mD=te,yD=$s.define("Nand",{attrs:{gate:{d:Xc}}},{binoperation(t,e){return t.and(e)},finoperation(t){return t.not()},markup:We.prototype.markup.concat([Di([Hs])])}),bD=te,_D=$s.define("Xor",{attrs:{gate:{d:ls}}},{binoperation(t,e){return t.xor(e)},markup:We.prototype.markup.concat([Di([Yc])])}),wD=te,xD=$s.define("Xnor",{attrs:{gate:{d:ls}}},{binoperation(t,e){return t.xor(e)},finoperation(t){return t.not()},markup:We.prototype.markup.concat([Di([Yc,Hs])])}),AD=te,SD=hs.define("OrReduce",{attrs:{gate:{d:ls}}},{operation(t){return{out:t.in.reduceOr()}}}),TD=te,ED=hs.define("NorReduce",{attrs:{gate:{d:ls}}},{operation(t){return{out:t.in.reduceNor()}},markup:hs.prototype.markup.concat([Hs])}),PD=te,CD=hs.define("AndReduce",{attrs:{gate:{d:Xc}}},{operation(t){return{out:t.in.reduceAnd()}}}),LD=te,RD=hs.define("NandReduce",{attrs:{gate:{d:Xc}}},{operation(t){return{out:t.in.reduceNand()}},markup:We.prototype.markup.concat([Di([Hs])])}),OD=te,kD=hs.define("XorReduce",{attrs:{gate:{d:ls}}},{operation(t){return{out:t.in.reduceXor()}},markup:We.prototype.markup.concat([Di([Yc])])}),MD=te,ID=hs.define("XnorReduce",{attrs:{gate:{d:ls}}},{operation(t){return{out:t.in.reduceXnor()}},markup:We.prototype.markup.concat([Di([Yc,Hs])])}),ND=te;function kd(t){return t<=Number.MAX_SAFE_INTEGER&&t>=-Number.MAX_SAFE_INTEGER}const _n=We.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:We.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:We.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:We.prototype._unsupportedPropChanges.concat(["signed"])}),Md=_n.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],_n.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{this._setPortsBits(n)})},operation(t){const e=this.get("bits");return t.in.isFullyDefined?{out:Ot.fromNumber(this.arithop(t.in.toBigInt(this.get("signed"))),e.out)}:{out:Ot.xes(e.out)}},_operationHelpers:_n.prototype._operationHelpers.concat(["arithop"])}),Ws=_n.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],_n.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{this._setPortsBits(n)})},operation(t){const e=this.get("bits"),n=this.get("signed");return!t.in1.isFullyDefined||!t.in2.isFullyDefined?{out:Ot.xes(e.out)}:{out:Ot.fromNumber(this.arithop(t.in1.toBigInt(n.in1&&n.in2),t.in2.toBigInt(n.in1&&n.in2)),e.out)}},_operationHelpers:_n.prototype._operationHelpers.concat(["arithop"])});function Id(t,e,n,r,i,s,a){const u=t.get(t.bits-1),c=Ot.make(Math.max(0,r-n),a?0:i?u:-1),l=t.concat(c);return(e<0?Ot.make(-e,a?0:-1).concat(l):l.slice(e).concat(Ot.make(e,a?0:s?l.get(l.bits-1):-1))).slice(0,r)}const Nd=_n.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],_n.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{this._setPortsBits(n)})},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx");if(!t.in2.isFullyDefined)return{out:Ot.xes(e.out)};const i=t.in2.toNumber(n.in2)*this.shiftdir;return{out:Id(t.in1,i,e.in1,e.out,n.in1,n.out,r)}},_gateParams:_n.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:_n.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:_n.prototype._operationHelpers.concat(["shiftdir"])}),Wo=_n.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:1}],_n.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,n)=>{this._setPortsBits(n)})}}),jo=Wo.define("Compare",{},{operation(t){this.get("bits");const e=this.get("signed");return!t.in1.isFullyDefined||!t.in2.isFullyDefined?{out:Ot.xes(1)}:{out:Ot.fromBool(this.arithcomp(t.in1.toBigInt(e.in1&&e.in2),t.in2.toBigInt(e.in1&&e.in2)))}},_operationHelpers:Wo.prototype._operationHelpers.concat(["arithcomp"])}),Dd=Wo.define("EqCompare",{},{operation(t){const e=this.get("bits"),n=this.get("signed"),r=e.in1>=e.in2?t.in1:t.in1.concat(Ot.make(e.in2-e.in1,n.in1&&n.in2?t.in1.msb:-1)),i=e.in2>=e.in1?t.in2:t.in2.concat(Ot.make(e.in1-e.in2,n.in1&&n.in2?t.in2.msb:-1));return{out:this.bincomp(r,i)}},_operationHelpers:Wo.prototype._operationHelpers.concat(["bincomp"])}),DD=Md.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:t=>-t}),qD=te,BD=Md.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:t=>t}),FD=te,VD=Ws.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(t,e)=>t+e}),zD=te,GD=Ws.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(t,e)=>t-e}),UD=te,HD=Ws.define("Multiplication",{attrs:{oper:{text:"×"}}},{arithop:(t,e)=>t*e}),$D=te,WD=Ws.define("Division",{attrs:{oper:{text:"÷"}}},{arithop:(t,e)=>e==0n?t:t/e}),jD=te,XD=Ws.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(t,e)=>e==0n?t:t%e}),YD=te,KD=Ws.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(t,e)=>e>=0n?t**e:t==1n?1n:t==-1n?e%2n?-1n:1n:0n}),ZD=te,JD=Nd.define("ShiftLeft",{attrs:{oper:{text:"≪"}}},{shiftdir:-1}),QD=te,tq=Nd.define("ShiftRight",{attrs:{oper:{text:"≫"}}},{shiftdir:1}),eq=te,nq=jo.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(t,e)=>t<e}),rq=te,iq=jo.define("Le",{attrs:{oper:{text:"≤"}}},{arithcomp:(t,e)=>t<=e}),sq=te,aq=jo.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(t,e)=>t>e}),oq=te,uq=jo.define("Ge",{attrs:{oper:{text:"≥"}}},{arithcomp:(t,e)=>t>=e}),cq=te,fq=Dd.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(t,e)=>t.xnor(e).reduceAnd()}),lq=te,hq=Dd.define("Ne",{attrs:{oper:{text:"≠"}}},{bincomp:(t,e)=>t.xor(e).reduceOr()}),dq=te,vi=_n.define("OpConst",{leftOp:!1,constant:0},{initialize(){_n.prototype.initialize.apply(this,arguments);let t=this.get("constant");(typeof t=="string"||t instanceof String)&&(t=BigInt(t),kd(t)&&(t=Number(t)),this.set("constant",t));const e=()=>{const r=30+String(this.get("constant")).length*10;this.prop("size",{width:r,height:r}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};e(),this.on("change:bits",(n,r)=>{this._setPortsBits(r)}),this.on("change:constant",()=>e()),this.on("change:leftOp",()=>e())},getGateParams(){const t=_n.prototype.getGateParams.apply(this,arguments);return typeof t.constant=="bigint"&&(kd(t.constant)?t.constant=Number(t.constant):t.constant=String(t.constant)),t},_gateParams:_n.prototype._gateParams.concat(["leftOp","constant"])}),js=vi.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],vi.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:Ot.fromNumber(this.arithop(BigInt(r),t.in.toBigInt(n.in)),e.out)}:{out:Ot.fromNumber(this.arithop(t.in.toBigInt(n.in),BigInt(r)),e.out)}:{out:Ot.xes(e.out)}},_operationHelpers:vi.prototype._operationHelpers.concat(["arithop"])}),qd=vi.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],vi.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!t.in.isFullyDefined)return{out:Ot.xes(e.out)};const s=t.in.toNumber(n.in),a=Ot.fromNumber(i);return{out:Id(a,s*this.shiftdir,a.bits,e.out,i<0,n.out,r)}}else return console.assert(kd(i)),{out:Id(t.in,Number(i)*this.shiftdir,e.in,e.out,n.in,n.out,r)}},_gateParams:vi.prototype._gateParams.concat(["fillx"]),_operationHelpers:vi.prototype._operationHelpers.concat(["shiftdir"])}),Xo=vi.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:1}],vi.prototype.initialize.apply(this,arguments)}}),Yo=Xo.define("CompareConst",{},{operation(t){this.get("bits");const e=this.get("signed"),n=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:Ot.fromBool(this.arithcomp(BigInt(n),t.in.toBigInt(e.in)))}:{out:Ot.fromBool(this.arithcomp(t.in.toBigInt(e.in),BigInt(n)))}:{out:Ot.x}},_operationHelpers:Xo.prototype._operationHelpers.concat(["arithcomp"])}),Bd=Xo.define("EqCompareConst",{},{operation(t){const e=this.get("bits");this.get("signed");const n=this.get("constant");return this.get("leftOp")?{out:this.bincomp(Ot.fromNumber(n,e.in),t.in)}:{out:this.bincomp(t.in,Ot.fromNumber(n,e.in))}},_operationHelpers:Xo.prototype._operationHelpers.concat(["bincomp"])}),pq=js.define("AdditionConst",{},{operSymbol:"+",arithop:(t,e)=>t+e}),gq=te,vq=js.define("SubtractionConst",{},{operSymbol:"-",arithop:(t,e)=>t-e}),mq=te,yq=js.define("MultiplicationConst",{},{operSymbol:"×",arithop:(t,e)=>t*e}),bq=te,_q=js.define("DivisionConst",{},{operSymbol:"÷",arithop:(t,e)=>e==0n?t:t/e}),wq=te,xq=js.define("ModuloConst",{},{operSymbol:"%",arithop:(t,e)=>e==0n?t:t%e}),Aq=te,Sq=js.define("PowerConst",{},{operSymbol:"^",arithop:(t,e)=>e>=0n?t**e:t==1n?1n:t==-1n?e%2n?-1n:1n:0n}),Tq=te,Eq=qd.define("ShiftLeftConst",{},{operSymbol:"≪",shiftdir:-1}),Pq=te,Cq=qd.define("ShiftRightConst",{},{operSymbol:"≫",shiftdir:1}),Lq=te,Rq=Yo.define("LtConst",{},{operSymbol:"<",arithcomp:(t,e)=>t<e}),Oq=te,kq=Yo.define("LeConst",{},{operSymbol:"≤",arithcomp:(t,e)=>t<=e}),Mq=te,Iq=Yo.define("GtConst",{},{operSymbol:">",arithcomp:(t,e)=>t>e}),Nq=te,Dq=Yo.define("GeConst",{},{operSymbol:"≥",arithcomp:(t,e)=>t>=e}),qq=te,Bq=Bd.define("EqConst",{},{operSymbol:"=",bincomp:(t,e)=>t.xnor(e).reduceAnd()}),Fq=te,Vq=Bd.define("NeConst",{},{operSymbol:"≠",bincomp:(t,e)=>t.xor(e).reduceOr()}),zq=te,Fd=Zt.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const t=this.get("extend");console.assert(t.input<=t.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.input},{id:"out",group:"out",dir:"out",bits:t.output}],Zt.prototype.initialize.apply(this,arguments),this.on("change:extend",(e,n)=>{this._setPortsBits({in:n.input,out:n.output})})},operation(t){const e=this.get("extend");return{out:t.in.concat(Ot.make(e.output-e.input,this._extBit(t.in)))}},markup:Zt.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:Zt.prototype._gateParams.concat(["extend"]),_operationHelpers:Zt.prototype._operationHelpers.concat(["_extBit"])}),Vd=fn.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),Gq=Fd.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit(t){return-1}}),Uq=Vd,Hq=Fd.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit(t){return t.get(t.bits-1)}}),$q=Vd,Wq=Zt.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const t=this.get("slice"),e=t.count==1?t.first:t.first+"-"+(t.first+t.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.total},{id:"out",group:"out",dir:"out",bits:t.count,portlabel:e,labelled:!0}],Zt.prototype.initialize.apply(this,arguments),this.on("change:slice",(n,r)=>{this._setPortsBits({in:r.total,out:r.count})})},operation(t){const e=this.get("slice");return{out:t.in.slice(e.first,e.first+e.count)}},_gateParams:Zt.prototype._gateParams.concat(["slice"])}),jq=fn.extend({_autoResizeBox:!0}),zd=Zt.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var t=0;const e=[],n=this.get("groups");this.get("size").height=n.length*16+8;for(const[i,s]of n.entries()){const a=t+(s>1?"-"+(t+s-1):"");t+=s,e.push({id:this.group_dir+i,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:a,labelled:!0})}this.set("bits",t);const r=this.group_dir=="out"?"in":"out";e.push({id:r,group:r,dir:r,bits:t}),this.get("ports").items=e,Zt.prototype.initialize.apply(this,arguments)},_gateParams:Zt.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:Zt.prototype._unsupportedPropChanges.concat(["groups"])}),Gd=fn.extend({_autoResizeBox:!0}),Xq=zd.define("BusGroup",{},{group_dir:"in",operation(t){const e=[];for(const n of this.get("groups").keys())e.push(t["in"+n]);return{out:Ot.concat(...e)}}}),Yq=Gd,Kq=zd.define("BusUngroup",{},{group_dir:"out",operation(t){const e={};let n=0;for(const[r,i]of this.get("groups").entries())e["out"+r]=t.in.slice(n,n+i),n+=i;return e}}),Zq=Gd,xA=10,Jq=10,Qq=Zt.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const t=this.get("graph");console.assert(t instanceof li),t.set("subcircuit",this);const e=t.getCells().filter(l=>l instanceof Kr),n=e.filter(l=>l instanceof Wc),r=e.filter(l=>l instanceof jc);function i(l,g){return l.has("order")||g.has("order")?l.get("order")-g.get("order"):l.get("net").localeCompare(g.get("net"))}n.sort(i),r.sort(i);const a={width:80,height:Math.max(n.length,r.length)*16+8},u=[],c={};for(const[l,g]of n.entries())u.push({id:g.get("net"),group:"in",dir:"in",bits:g.get("bits"),labelled:!0});for(const[l,g]of r.entries())u.push({id:g.get("net"),group:"out",dir:"out",bits:g.get("bits"),labelled:!0});for(const l of e)c[l.get("net")]=l.get("id");this.set("size",a),this.set("circuitIOmap",c),this.get("ports").items=u,this.set("warning",t._warnings>0),Zt.prototype.initialize.apply(this,arguments)},_resetPortValue(t){const e=this.get("circuitIOmap"),n=this.get("graph");return t.dir=="in"?n.getCell(e[t.id]).get("outputSignals").out:t.dir=="out"?n.getCell(e[t.id]).get("inputSignals").in:Zt.prototype._resetPortValue.call(this,t)},getLayoutSize(){const t=this.size();return t.height+=Jq,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+xA})},getPortsPositions(){const t=Zt.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+xA;return e},markup:[{tagName:"rect",selector:"wrapper"}].concat(Zt.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],Zt.prototype.markupZoom),_gateParams:Zt.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:Zt.prototype._unsupportedPropChanges.concat(["celltype"])}),tB=fn.extend({attrs:dn.merge({},fn.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:fn.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(t){fn.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"WARNING")&&this._updateWarning()},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},update(){fn.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(t){return t.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),AA=20,eB=30,ds=We.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:dn.merge({},$c,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const t=this.get("bits"),e=[{id:"sel",group:"in2",dir:"in",bits:t.sel},{id:"out",group:"out",dir:"out",bits:t.in}],n=this.muxInputs(t.sel);this.get("size").height=n.length*16+8;const i="M"+[[2,0],[5,5],[10,-5]].map(a=>a.join(" ")).join(" L");for(const[a,u]of n.entries()){const c={id:"in"+a,group:"in",dir:"in",bits:t.in,decor:i};u&&(c.portlabel=String(u),c.labelled=!0),e.push(c)}this.get("ports").items=e,We.prototype.initialize.apply(this,arguments);const s=a=>this.attr(["body","points"],[[0,-5],[a.width,5],[a.width,a.height-5],[0,a.height+5]].map(u=>u.join(",")).join(" "));s(this.get("size")),this.on("change:size",(a,u)=>s(u))},operation(t){const e=this.muxInput(t.sel);return e===void 0?{out:Ot.xes(this.get("bits").in)}:{out:t["in"+e]}},getLayoutSize(){const t=this.size();return t.height+=eB,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+AA})},getPortsPositions(){const t=We.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+AA;return e},markup:We.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:We.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:We.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:We.prototype._operationHelpers.concat(["muxInput"])}),Kc=te.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),te.prototype.initialize.apply(this,arguments)},confirmUpdate(t){te.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){te.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(t){const e=this.model.muxInput(t.sel);for(const n of this.ins.keys())this.$("[port=in"+n+"] path.decor").css("visibility",e==n?"visible":"hidden")}}),nB=ds.define("Mux",{},{muxInputs:t=>Array(1<<t),muxInput:t=>t.isFullyDefined?t.toBigInt().toString():void 0}),rB=Kc,iB=ds.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:ds.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:t=>Array(t+1),muxInput:t=>{const e=t.toArray();return t.isFullyDefined&&e.filter(n=>n==1).length<=1?String(e.indexOf(1)+1):void 0}}),sB=Kc,aB=ds.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const t=this.get("inputs");for(let e=0;e<t.length;e++)typeof t[e]!="bigint"&&(t[e]=BigInt(t[e]));ds.prototype.initialize.apply(this,arguments)},muxInputs(t){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(t){const e=this.get("default_input");if(!t.isFullyDefined)return;const n=this.get("inputs").indexOf(t.toBigInt());return n<0?e?0:void 0:e?n+1:n},_gateParams:ds.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:ds.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),oB=Kc,uB=Zt.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:Zt.prototype._getStackedPosition({side:"left"})},out:{position:Zt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits");this.get("initial");const e=this.get("polarity")||{},n=[];this.get("no_data")||n.push({id:"in",group:"in",dir:"in",bits:t,portlabel:"D",labelled:!0}),n.push({id:"out",group:"out",dir:"out",bits:t,portlabel:"Q",labelled:!0}),"arst"in e&&!this.get("arst_value")&&this.set("arst_value",Array(t).fill("0").join("")),"srst"in e&&!this.get("srst_value")&&this.set("srst_value",Array(t).fill("0").join(""));let r=1;"aload"in e&&(r+=2,n.push({id:"ain",group:"in",dir:"in",bits:t,portlabel:"AD",labelled:!0}),n.push({id:"aload",group:"in",dir:"in",bits:1,polarity:e.aload,labelled:!0})),"clock"in e&&(r++,n.push({id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:Zt.prototype.decorClock,labelled:!0})),"set"in e&&(r++,n.push({id:"set",group:"in",dir:"in",bits:t,polarity:e.set,portlabel:"S",labelled:!0})),"clr"in e&&(r++,n.push({id:"clr",group:"in",dir:"in",bits:t,polarity:e.clr,portlabel:"R",labelled:!0})),"srst"in e&&(r++,n.push({id:"srst",group:"in",dir:"in",bits:1,polarity:e.srst,labelled:!0})),"arst"in e&&(r++,n.push({id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0})),"enable"in e&&(r++,n.push({id:"en",group:"in",dir:"in",bits:1,polarity:e.enable,labelled:!0})),this.get("size").height=r*16+8,this.get("ports").items=n,this.last_clk=0,Zt.prototype.initialize.apply(this,arguments)},_resetPortValue(t){return t.id=="out"&&t.dir=="out"?Ot.fromBin(this.get("initial"),t.bits):Zt.prototype._resetPortValue.call(this,t)},operation(t){const e=this.get("polarity"),n=u=>e[u]?1:-1;let r,i,s;const a=u=>({out:i?u.and(s).or(i):u});if("clock"in e&&(r=this.last_clk,this.last_clk=t.clk.get(0)),"arst"in e&&t.arst.get(0)==n("arst"))return{out:Ot.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in e&&t.aload.get(0)==n("aload"))return{out:t.ain};if("set"in e&&(i=e.set?t.set:t.set.not(),s=e.set?t.set.not():t.set),"clr"in e){i=i||Ot.zeros(this.get("bits"));const u=e.clr?t.clr.not():t.clr;s=s?u.and(s):u}return"enable"in e&&t.en.get(0)!=n("enable")&&this.get("enable_srst")?a(this.get("outputSignals").out):!("clock"in e)||t.clk.get(0)==n("clock")&&r==-n("clock")?"srst"in e&&t.srst.get(0)==n("srst")?a(Ot.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in e&&t.en.get(0)!=n("enable")&&!this.get("enable_srst")?a(this.get("outputSignals").out):this.get("no_data")?a(this.get("outputSignals").out):a(t.in):a(this.get("outputSignals").out)},_gateParams:Zt.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:Zt.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),cB=fn.extend({_autoResizeBox:!0}),fB=Zt.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:Zt.prototype._getStackedPosition({side:"left"})},out:{position:Zt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("abits");this.get("rdports"),this.get("wrports");let n=0,r=0;const i=[],s=[];for(const[a,u]of this._memrdports())i.push({id:a+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0},{id:a+"data",group:"out",dir:"out",bits:t,portlabel:"data",labelled:!0,args:{idxOffset:r}}),n+=1,"srst_polarity"in u&&(n++,r++,i.push({id:a+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:u.srst_polarity,labelled:!0})),"arst_polarity"in u&&(n++,r++,i.push({id:a+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:u.arst_polarity,labelled:!0})),"enable_polarity"in u&&(n++,r++,i.push({id:a+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:u.enable_polarity,labelled:!0})),"clock_polarity"in u&&(n++,r++,i.push({id:a+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:u.clock_polarity,decor:Zt.prototype.decorClock,labelled:!0})),s.push(n);for(const[a,u]of this._memwrports())n+=2,i.push({id:a+"data",group:"in",dir:"in",bits:t,portlabel:"data",labelled:!0},{id:a+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0}),"enable_polarity"in u&&(n++,i.push({id:a+"en",group:"in",dir:"in",bits:u.no_bit_enable?1:t,portlabel:"en",polarity:u.enable_polarity,labelled:!0})),"clock_polarity"in u&&(n++,i.push({id:a+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:u.clock_polarity,decor:Zt.prototype.decorClock,labelled:!0})),s.push(n);s.pop(),this.get("size").height=n*16+8,this.get("ports").items=i,Zt.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(a,u)=>{const c=[];for(const l of s)c.push([[0,16*l+4],[u.width,16*l+4]].map(g=>g.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+c.join(" M "))})},_resetPortValue(t){if(t.dir=="out"){const e=/^rd([0-9]+)data$/.exec(t.id),n=e?this.get("rdports")[e[1]]:{};if("init_value"in n)return Ot.fromBin(n.init_value,t.bits)}return Zt.prototype._resetPortValue.call(this,t)},prepare(){const t=this.get("bits");var e=this.get("words");const n=this.get("memdata");e||(e=1<<this.get("abits"),this.prop("words",e,{init:!0})),n?this.memdata=Va.fromJSON(t,n):this.memdata=new Va(t,e),console.assert(this.memdata.words==e),this.last_clk={};for(const[r,i]of this._memports())"clock_polarity"in i&&(this.last_clk[r+"clk"]=0)},operation(t){const e=this.get("bits"),n={},r=(w,x)=>w[x+"_polarity"]?1:-1,i=(w,x)=>!("enable_polarity"in x&&!t[w+"en"].toArray().some(T=>T==r(x,"enable"))),s=(w,x)=>{const T=w+"clk";return"clock_polarity"in x?t[T].get(0)==r(x,"clock")&&this.last_clk[T]==-r(x,"clock"):!0},a=w=>w>=0&&w<this.get("words"),u=(w,x)=>{const T=this._calcaddr(t[w+"addr"]);a(T)?n[w+"data"]=this.memdata.get(T):n[w+"data"]=Ot.xes(e)},c=(w,x,T,P)=>{if(x.no_bit_enable||!("enable_polarity"in x))return P;const k=x.enable_polarity?t[w+"en"]:t[w+"en"].not();return P.and(k).or(T.and(k.not()))},l=(w,x)=>{u(w);for(const[T,P]of this.get("wrports").entries()){const k="wr"+T,q=(B,H)=>typeof B=="boolean"?B:B[H];"transparent"in x&&q(x.transparent,T)&&s(k,P)&&i(k,P)&&t[w+"addr"]==t[k+"addr"]&&(n[w+"data"]=c(k,P,n[w+"data"],t[k+"data"])),"collision"in x&&q(x.collision,T)&&s(k,P)&&i(k,P)&&t[w+"addr"]==t[k+"addr"]&&(n[w+"data"]=c(k,P,n[w+"data"],Ot.xes(e)))}},g=(w,x)=>{const T=this._calcaddr(t[w+"addr"]);if(a(T)){const P=this.memdata.get(T),k=c(w,x,P,t[w+"data"]),q=!P.eq(k);this.memdata.set(T,k),q&&this.trigger("memChange",T,k)}},p=(w,x)=>{t[w+"srst"].get(0)==r(x,"srst")&&(n[w+"data"]="srst_value"in x?Ot.fromBin(x.srst_value,e):Ot.zeros(e))},y=(w,x)=>{t[w+"arst"].get(0)==r(x,"arst")&&(n[w+"data"]="arst_value"in x?Ot.fromBin(x.arst_value,e):Ot.zeros(e))},_=(w,x)=>{if("clock_polarity"in x){const T=w+"clk";this.last_clk[T]=t[T].get(0)}};for(const[w,x]of this._memrdports())n[w+"data"]=this.get("outputSignals")[w+"data"],"clock_polarity"in x&&i(w,x)&&s(w,x)&&l(w,x);for(const[w,x]of this._memwrports())i(w,x)&&s(w,x)&&g(w,x);for(const[w,x]of this._memrdports())!("clock_polarity"in x)&&i(w,x)&&u(w);for(const[w,x]of this._memrdports())"srst_polarity"in x&&(i(w,x)||!("enable_srst"in x))&&s(w,x)&&p(w,x),"arst_polarity"in x&&y(w,x);for(const[w,x]of this._memrdports())_(w,x);for(const[w,x]of this._memwrports())_(w,x);return n},_calcaddr(t){return t.isFullyDefined?t.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[t,e]of this.get("rdports").entries())yield["rd"+t,e]},*_memwrports(){for(const[t,e]of this.get("wrports").entries())yield["wr"+t,e]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:Zt.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],Zt.prototype.markupZoom),getGateParams(){const t=Zt.prototype.getGateParams.apply(this,arguments);return t.memdata=this.memdata.toJSON(),t},_gateParams:Zt.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:Zt.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:Zt.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),lB=fn.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=this.model,n=e.graph._display3vl,r=se("<div>",{title:"Memory contents: "+e.get("label")}).appendTo("html > body");r.append(se('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">←</button><button name="next" type="button" class="btn btn-secondary" title="Next page">→</button></div><div class="input-group">'+oD(n,e.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=e.get("words"),s=e.memdata,a=Math.ceil(e.get("abits")/4),u=8;let c,l=0;const g=()=>r.find("select[name=base]").val(),p=k=>{const q=Math.floor((k-l)/c),B=k-l-q*c;return r.find("table tr:nth-child("+(q+1)+") td:nth-child("+(B+2)+") input")},y=k=>{for(const[q,B]of e._memrdports())p(e._calcaddr(k[q+"addr"])).removeClass("isread");for(const[q,B]of e._memwrports())p(e._calcaddr(k[q+"addr"])).removeClass("iswrite")},_=k=>{for(const[q,B]of e._memrdports())p(e._calcaddr(k[q+"addr"])).addClass("isread");for(const[q,B]of e._memwrports())p(e._calcaddr(k[q+"addr"])).addClass("iswrite")},w=()=>{const k=g();r.find("button[name=prev]").prop("disabled",l<=0),r.find("button[name=next]").prop("disabled",l+u*c>=i);let q=r.find("table tr:first-child");const B=e.memdata;for(let H=0;H<u&&!(l+H*c>=i);H++,q=q.next()){const X=(l+H*c).toString(16);let d=q.find("td:first-child");d.text("0".repeat(a-X.length)+X),d=d.next();for(let E=0;E<c&&!(l+H*c+E>=i);E++,d=d.next())d.find("input").val(n.show(k,B.get(l+H*c+E))).removeClass("invalid")}_(e.get("inputSignals"))},x=()=>{const k=g(),q=n.pattern(k),B=n.size(k,e.get("bits"));c=Math.min(i,16,Math.ceil(32/B)),l=Math.max(0,Math.min(i-u*c,l));const H=r.find("table");H.empty();for(let X=0;X<u&&!(l+X*c>=i);X++){const d=se("<tr>");se("<td>").appendTo(d);for(let E=0;E<c&&!(l+X*c+E>=i);E++){const L=se("<td>");se('<input type="text">').attr("size",B).attr("maxlength",B).attr("pattern",q).appendTo(L),L.appendTo(d)}d.appendTo(H)}w()};x(),r.find("select[name=base]").on("change",x),r.find("button[name=prev]").on("click",()=>{y(e.get("inputSignals")),l=Math.max(0,l-u*c),w()}),r.find("button[name=next]").on("click",()=>{y(e.get("inputSignals")),l=Math.min(i-u*c,l+u*c),w()}),r.on("change","input",k=>{const q=g(),B=se(k.target),H=B.closest("td").index()-1,X=B.closest("tr").index(),d=l+X*c+H,E=e.get("bits");if(n.validate(q,k.target.value,E)){const L=n.read(q,k.target.value,E);s.set(d,L),e.trigger("manualMemChange",e,d,L),B.removeClass("invalid")}else B.addClass("invalid")});const T=(k,q)=>{if(k<l||k>l+u*c)return;const B=g(),H=p(k).val(n.show(B,s.get(k))).removeClass("invalid").removeClass("flash");setTimeout(()=>{H.addClass("flash")},10)},P=(k,q)=>{y(e.previous("inputSignals")),_(q)};return e.on("memChange",T),e.on("change:inputSignals",P),this.paper.trigger("open:memorycontent",r,()=>{r.remove(),e.off("memChange",T),e.off("change:inputSignals",P)}),!1}});function Ud(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hd,SA;function hB(){if(SA)return Hd;SA=1;function t(){this.__data__=[],this.size=0}return Hd=t,Hd}var $d,TA;function za(){if(TA)return $d;TA=1;function t(e,n){return e===n||e!==e&&n!==n}return $d=t,$d}var Wd,EA;function Zc(){if(EA)return Wd;EA=1;var t=za();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Wd=e,Wd}var jd,PA;function dB(){if(PA)return jd;PA=1;var t=Zc(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,a=t(s,i);if(a<0)return!1;var u=s.length-1;return a==u?s.pop():n.call(s,a,1),--this.size,!0}return jd=r,jd}var Xd,CA;function pB(){if(CA)return Xd;CA=1;var t=Zc();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Xd=e,Xd}var Yd,LA;function gB(){if(LA)return Yd;LA=1;var t=Zc();function e(n){return t(this.__data__,n)>-1}return Yd=e,Yd}var Kd,RA;function vB(){if(RA)return Kd;RA=1;var t=Zc();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Kd=e,Kd}var Zd,OA;function Jc(){if(OA)return Zd;OA=1;var t=hB(),e=dB(),n=pB(),r=gB(),i=vB();function s(a){var u=-1,c=a==null?0:a.length;for(this.clear();++u<c;){var l=a[u];this.set(l[0],l[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Zd=s,Zd}var Jd,kA;function mB(){if(kA)return Jd;kA=1;var t=Jc();function e(){this.__data__=new t,this.size=0}return Jd=e,Jd}var Qd,MA;function yB(){if(MA)return Qd;MA=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Qd=t,Qd}var tp,IA;function bB(){if(IA)return tp;IA=1;function t(e){return this.__data__.get(e)}return tp=t,tp}var ep,NA;function _B(){if(NA)return ep;NA=1;function t(e){return this.__data__.has(e)}return ep=t,ep}var np,DA;function qA(){if(DA)return np;DA=1;var t=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr;return np=t,np}var rp,BA;function Zr(){if(BA)return rp;BA=1;var t=qA(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return rp=n,rp}var ip,FA;function Ga(){if(FA)return ip;FA=1;var t=Zr(),e=t.Symbol;return ip=e,ip}var sp,VA;function wB(){if(VA)return sp;VA=1;var t=Ga(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(a){var u=n.call(a,i),c=a[i];try{a[i]=void 0;var l=!0}catch{}var g=r.call(a);return l&&(u?a[i]=c:delete a[i]),g}return sp=s,sp}var ap,zA;function xB(){if(zA)return ap;zA=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return ap=n,ap}var op,GA;function Xs(){if(GA)return op;GA=1;var t=Ga(),e=wB(),n=xB(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function a(u){return u==null?u===void 0?i:r:s&&s in Object(u)?e(u):n(u)}return op=a,op}var up,UA;function Mr(){if(UA)return up;UA=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return up=t,up}var cp,HA;function Ko(){if(HA)return cp;HA=1;var t=Xs(),e=Mr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(u){if(!e(u))return!1;var c=t(u);return c==r||c==i||c==n||c==s}return cp=a,cp}var fp,$A;function AB(){if($A)return fp;$A=1;var t=Zr(),e=t["__core-js_shared__"];return fp=e,fp}var lp,WA;function SB(){if(WA)return lp;WA=1;var t=AB(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return lp=n,lp}var hp,jA;function XA(){if(jA)return hp;jA=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return hp=n,hp}var dp,YA;function TB(){if(YA)return dp;YA=1;var t=Ko(),e=SB(),n=Mr(),r=XA(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,u=Object.prototype,c=a.toString,l=u.hasOwnProperty,g=RegExp("^"+c.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!n(y)||e(y))return!1;var _=t(y)?g:s;return _.test(r(y))}return dp=p,dp}var pp,KA;function EB(){if(KA)return pp;KA=1;function t(e,n){return e==null?void 0:e[n]}return pp=t,pp}var gp,ZA;function Ys(){if(ZA)return gp;ZA=1;var t=TB(),e=EB();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return gp=n,gp}var vp,JA;function mp(){if(JA)return vp;JA=1;var t=Ys(),e=Zr(),n=t(e,"Map");return vp=n,vp}var yp,QA;function Qc(){if(QA)return yp;QA=1;var t=Ys(),e=t(Object,"create");return yp=e,yp}var bp,tS;function PB(){if(tS)return bp;tS=1;var t=Qc();function e(){this.__data__=t?t(null):{},this.size=0}return bp=e,bp}var _p,eS;function CB(){if(eS)return _p;eS=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return _p=t,_p}var wp,nS;function LB(){if(nS)return wp;nS=1;var t=Qc(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(t){var u=a[s];return u===e?void 0:u}return r.call(a,s)?a[s]:void 0}return wp=i,wp}var xp,rS;function RB(){if(rS)return xp;rS=1;var t=Qc(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return xp=r,xp}var Ap,iS;function OB(){if(iS)return Ap;iS=1;var t=Qc(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return Ap=n,Ap}var Sp,sS;function kB(){if(sS)return Sp;sS=1;var t=PB(),e=CB(),n=LB(),r=RB(),i=OB();function s(a){var u=-1,c=a==null?0:a.length;for(this.clear();++u<c;){var l=a[u];this.set(l[0],l[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Sp=s,Sp}var Tp,aS;function MB(){if(aS)return Tp;aS=1;var t=kB(),e=Jc(),n=mp();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return Tp=r,Tp}var Ep,oS;function IB(){if(oS)return Ep;oS=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return Ep=t,Ep}var Pp,uS;function tf(){if(uS)return Pp;uS=1;var t=IB();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Pp=e,Pp}var Cp,cS;function NB(){if(cS)return Cp;cS=1;var t=tf();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return Cp=e,Cp}var Lp,fS;function DB(){if(fS)return Lp;fS=1;var t=tf();function e(n){return t(this,n).get(n)}return Lp=e,Lp}var Rp,lS;function qB(){if(lS)return Rp;lS=1;var t=tf();function e(n){return t(this,n).has(n)}return Rp=e,Rp}var Op,hS;function BB(){if(hS)return Op;hS=1;var t=tf();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Op=e,Op}var kp,dS;function Mp(){if(dS)return kp;dS=1;var t=MB(),e=NB(),n=DB(),r=qB(),i=BB();function s(a){var u=-1,c=a==null?0:a.length;for(this.clear();++u<c;){var l=a[u];this.set(l[0],l[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,kp=s,kp}var Ip,pS;function FB(){if(pS)return Ip;pS=1;var t=Jc(),e=mp(),n=Mp(),r=200;function i(s,a){var u=this.__data__;if(u instanceof t){var c=u.__data__;if(!e||c.length<r-1)return c.push([s,a]),this.size=++u.size,this;u=this.__data__=new n(c)}return u.set(s,a),this.size=u.size,this}return Ip=i,Ip}var Np,gS;function ef(){if(gS)return Np;gS=1;var t=Jc(),e=mB(),n=yB(),r=bB(),i=_B(),s=FB();function a(u){var c=this.__data__=new t(u);this.size=c.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,Np=a,Np}var Dp,vS;function qp(){if(vS)return Dp;vS=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Dp=t,Dp}var Bp,mS;function yS(){if(mS)return Bp;mS=1;var t=Ys(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Bp=e,Bp}var Fp,bS;function nf(){if(bS)return Fp;bS=1;var t=yS();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Fp=e,Fp}var Vp,_S;function rf(){if(_S)return Vp;_S=1;var t=nf(),e=za(),n=Object.prototype,r=n.hasOwnProperty;function i(s,a,u){var c=s[a];(!(r.call(s,a)&&e(c,u))||u===void 0&&!(a in s))&&t(s,a,u)}return Vp=i,Vp}var zp,wS;function Zo(){if(wS)return zp;wS=1;var t=rf(),e=nf();function n(r,i,s,a){var u=!s;s||(s={});for(var c=-1,l=i.length;++c<l;){var g=i[c],p=a?a(s[g],r[g],g,s,r):void 0;p===void 0&&(p=r[g]),u?e(s,g,p):t(s,g,p)}return s}return zp=n,zp}var Gp,xS;function VB(){if(xS)return Gp;xS=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Gp=t,Gp}var Up,AS;function mi(){if(AS)return Up;AS=1;function t(e){return e!=null&&typeof e=="object"}return Up=t,Up}var Hp,SS;function zB(){if(SS)return Hp;SS=1;var t=Xs(),e=mi(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return Hp=r,Hp}var $p,TS;function Jo(){if(TS)return $p;TS=1;var t=zB(),e=mi(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return $p=s,$p}var Wp,ES;function ln(){if(ES)return Wp;ES=1;var t=Array.isArray;return Wp=t,Wp}var Qo={exports:{}},jp,PS;function GB(){if(PS)return jp;PS=1;function t(){return!1}return jp=t,jp}Qo.exports;var CS;function Ua(){return CS||(CS=1,function(t,e){var n=Zr(),r=GB(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?n.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||r;t.exports=l}(Qo,Qo.exports)),Qo.exports}var Xp,LS;function sf(){if(LS)return Xp;LS=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Xp=n,Xp}var Yp,RS;function Kp(){if(RS)return Yp;RS=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Yp=e,Yp}var Zp,OS;function UB(){if(OS)return Zp;OS=1;var t=Xs(),e=Kp(),n=mi(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",u="[object Error]",c="[object Function]",l="[object Map]",g="[object Number]",p="[object Object]",y="[object RegExp]",_="[object Set]",w="[object String]",x="[object WeakMap]",T="[object ArrayBuffer]",P="[object DataView]",k="[object Float32Array]",q="[object Float64Array]",B="[object Int8Array]",H="[object Int16Array]",X="[object Int32Array]",d="[object Uint8Array]",E="[object Uint8ClampedArray]",L="[object Uint16Array]",I="[object Uint32Array]",G={};G[k]=G[q]=G[B]=G[H]=G[X]=G[d]=G[E]=G[L]=G[I]=!0,G[r]=G[i]=G[T]=G[s]=G[P]=G[a]=G[u]=G[c]=G[l]=G[g]=G[p]=G[y]=G[_]=G[w]=G[x]=!1;function K(Y){return n(Y)&&e(Y.length)&&!!G[t(Y)]}return Zp=K,Zp}var Jp,kS;function af(){if(kS)return Jp;kS=1;function t(e){return function(n){return e(n)}}return Jp=t,Jp}var tu={exports:{}};tu.exports;var MS;function Qp(){return MS||(MS=1,function(t,e){var n=qA(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,u=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=u}(tu,tu.exports)),tu.exports}var tg,IS;function eu(){if(IS)return tg;IS=1;var t=UB(),e=af(),n=Qp(),r=n&&n.isTypedArray,i=r?e(r):t;return tg=i,tg}var eg,NS;function DS(){if(NS)return eg;NS=1;var t=VB(),e=Jo(),n=ln(),r=Ua(),i=sf(),s=eu(),a=Object.prototype,u=a.hasOwnProperty;function c(l,g){var p=n(l),y=!p&&e(l),_=!p&&!y&&r(l),w=!p&&!y&&!_&&s(l),x=p||y||_||w,T=x?t(l.length,String):[],P=T.length;for(var k in l)(g||u.call(l,k))&&!(x&&(k=="length"||_&&(k=="offset"||k=="parent")||w&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,P)))&&T.push(k);return T}return eg=c,eg}var ng,qS;function of(){if(qS)return ng;qS=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return ng=e,ng}var rg,BS;function FS(){if(BS)return rg;BS=1;function t(e,n){return function(r){return e(n(r))}}return rg=t,rg}var ig,VS;function HB(){if(VS)return ig;VS=1;var t=FS(),e=t(Object.keys,Object);return ig=e,ig}var sg,zS;function ag(){if(zS)return sg;zS=1;var t=of(),e=HB(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var a=[];for(var u in Object(s))r.call(s,u)&&u!="constructor"&&a.push(u);return a}return sg=i,sg}var og,GS;function qi(){if(GS)return og;GS=1;var t=Ko(),e=Kp();function n(r){return r!=null&&e(r.length)&&!t(r)}return og=n,og}var ug,US;function ps(){if(US)return ug;US=1;var t=DS(),e=ag(),n=qi();function r(i){return n(i)?t(i):e(i)}return ug=r,ug}var cg,HS;function $B(){if(HS)return cg;HS=1;var t=Zo(),e=ps();function n(r,i){return r&&t(i,e(i),r)}return cg=n,cg}var fg,$S;function WB(){if($S)return fg;$S=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return fg=t,fg}var lg,WS;function jB(){if(WS)return lg;WS=1;var t=Mr(),e=of(),n=WB(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!t(a))return n(a);var u=e(a),c=[];for(var l in a)l=="constructor"&&(u||!i.call(a,l))||c.push(l);return c}return lg=s,lg}var hg,jS;function Ks(){if(jS)return hg;jS=1;var t=DS(),e=jB(),n=qi();function r(i){return n(i)?t(i,!0):e(i)}return hg=r,hg}var dg,XS;function XB(){if(XS)return dg;XS=1;var t=Zo(),e=Ks();function n(r,i){return r&&t(i,e(i),r)}return dg=n,dg}var nu={exports:{}};nu.exports;var YS;function KS(){return YS||(YS=1,function(t,e){var n=Zr(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s?n.Buffer:void 0,u=a?a.allocUnsafe:void 0;function c(l,g){if(g)return l.slice();var p=l.length,y=u?u(p):new l.constructor(p);return l.copy(y),y}t.exports=c}(nu,nu.exports)),nu.exports}var pg,ZS;function JS(){if(ZS)return pg;ZS=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return pg=t,pg}var gg,QS;function tT(){if(QS)return gg;QS=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var u=e[r];n(u,r,e)&&(a[s++]=u)}return a}return gg=t,gg}var vg,eT;function nT(){if(eT)return vg;eT=1;function t(){return[]}return vg=t,vg}var mg,rT;function yg(){if(rT)return mg;rT=1;var t=tT(),e=nT(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),t(i(a),function(u){return r.call(a,u)}))}:e;return mg=s,mg}var bg,iT;function YB(){if(iT)return bg;iT=1;var t=Zo(),e=yg();function n(r,i){return t(r,e(r),i)}return bg=n,bg}var _g,sT;function wg(){if(sT)return _g;sT=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return _g=t,_g}var xg,aT;function uf(){if(aT)return xg;aT=1;var t=FS(),e=t(Object.getPrototypeOf,Object);return xg=e,xg}var Ag,oT;function uT(){if(oT)return Ag;oT=1;var t=wg(),e=uf(),n=yg(),r=nT(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var u=[];a;)t(u,n(a)),a=e(a);return u}:r;return Ag=s,Ag}var Sg,cT;function KB(){if(cT)return Sg;cT=1;var t=Zo(),e=uT();function n(r,i){return t(r,e(r),i)}return Sg=n,Sg}var Tg,fT;function lT(){if(fT)return Tg;fT=1;var t=wg(),e=ln();function n(r,i,s){var a=i(r);return e(r)?a:t(a,s(r))}return Tg=n,Tg}var Eg,hT;function dT(){if(hT)return Eg;hT=1;var t=lT(),e=yg(),n=ps();function r(i){return t(i,n,e)}return Eg=r,Eg}var Pg,pT;function ZB(){if(pT)return Pg;pT=1;var t=lT(),e=uT(),n=Ks();function r(i){return t(i,n,e)}return Pg=r,Pg}var Cg,gT;function JB(){if(gT)return Cg;gT=1;var t=Ys(),e=Zr(),n=t(e,"DataView");return Cg=n,Cg}var Lg,vT;function QB(){if(vT)return Lg;vT=1;var t=Ys(),e=Zr(),n=t(e,"Promise");return Lg=n,Lg}var Rg,mT;function yT(){if(mT)return Rg;mT=1;var t=Ys(),e=Zr(),n=t(e,"Set");return Rg=n,Rg}var Og,bT;function tF(){if(bT)return Og;bT=1;var t=Ys(),e=Zr(),n=t(e,"WeakMap");return Og=n,Og}var kg,_T;function Ha(){if(_T)return kg;_T=1;var t=JB(),e=mp(),n=QB(),r=yT(),i=tF(),s=Xs(),a=XA(),u="[object Map]",c="[object Object]",l="[object Promise]",g="[object Set]",p="[object WeakMap]",y="[object DataView]",_=a(t),w=a(e),x=a(n),T=a(r),P=a(i),k=s;return(t&&k(new t(new ArrayBuffer(1)))!=y||e&&k(new e)!=u||n&&k(n.resolve())!=l||r&&k(new r)!=g||i&&k(new i)!=p)&&(k=function(q){var B=s(q),H=B==c?q.constructor:void 0,X=H?a(H):"";if(X)switch(X){case _:return y;case w:return u;case x:return l;case T:return g;case P:return p}return B}),kg=k,kg}var Mg,wT;function eF(){if(wT)return Mg;wT=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Mg=n,Mg}var Ig,xT;function AT(){if(xT)return Ig;xT=1;var t=Zr(),e=t.Uint8Array;return Ig=e,Ig}var Ng,ST;function Dg(){if(ST)return Ng;ST=1;var t=AT();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return Ng=e,Ng}var qg,TT;function nF(){if(TT)return qg;TT=1;var t=Dg();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return qg=e,qg}var Bg,ET;function rF(){if(ET)return Bg;ET=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return Bg=e,Bg}var Fg,PT;function iF(){if(PT)return Fg;PT=1;var t=Ga(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Fg=r,Fg}var Vg,CT;function LT(){if(CT)return Vg;CT=1;var t=Dg();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Vg=e,Vg}var zg,RT;function sF(){if(RT)return zg;RT=1;var t=Dg(),e=nF(),n=rF(),r=iF(),i=LT(),s="[object Boolean]",a="[object Date]",u="[object Map]",c="[object Number]",l="[object RegExp]",g="[object Set]",p="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",T="[object Float64Array]",P="[object Int8Array]",k="[object Int16Array]",q="[object Int32Array]",B="[object Uint8Array]",H="[object Uint8ClampedArray]",X="[object Uint16Array]",d="[object Uint32Array]";function E(L,I,G){var K=L.constructor;switch(I){case _:return t(L);case s:case a:return new K(+L);case w:return e(L,G);case x:case T:case P:case k:case q:case B:case H:case X:case d:return i(L,G);case u:return new K;case c:case p:return new K(L);case l:return n(L);case g:return new K;case y:return r(L)}}return zg=E,zg}var Gg,OT;function kT(){if(OT)return Gg;OT=1;var t=Mr(),e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Gg=n,Gg}var Ug,MT;function IT(){if(MT)return Ug;MT=1;var t=kT(),e=uf(),n=of();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Ug=r,Ug}var Hg,NT;function aF(){if(NT)return Hg;NT=1;var t=Ha(),e=mi(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return Hg=r,Hg}var $g,DT;function oF(){if(DT)return $g;DT=1;var t=aF(),e=af(),n=Qp(),r=n&&n.isMap,i=r?e(r):t;return $g=i,$g}var Wg,qT;function uF(){if(qT)return Wg;qT=1;var t=Ha(),e=mi(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return Wg=r,Wg}var jg,BT;function cF(){if(BT)return jg;BT=1;var t=uF(),e=af(),n=Qp(),r=n&&n.isSet,i=r?e(r):t;return jg=i,jg}var Xg,FT;function VT(){if(FT)return Xg;FT=1;var t=ef(),e=qp(),n=rf(),r=$B(),i=XB(),s=KS(),a=JS(),u=YB(),c=KB(),l=dT(),g=ZB(),p=Ha(),y=eF(),_=sF(),w=IT(),x=ln(),T=Ua(),P=oF(),k=Mr(),q=cF(),B=ps(),H=Ks(),X=1,d=2,E=4,L="[object Arguments]",I="[object Array]",G="[object Boolean]",K="[object Date]",Y="[object Error]",pt="[object Function]",Tt="[object GeneratorFunction]",at="[object Map]",ft="[object Number]",lt="[object Object]",dt="[object RegExp]",Xt="[object Set]",Ft="[object String]",Ae="[object Symbol]",Ee="[object WeakMap]",ot="[object ArrayBuffer]",ht="[object DataView]",tt="[object Float32Array]",it="[object Float64Array]",wt="[object Int8Array]",Ht="[object Int16Array]",Gt="[object Int32Array]",zt="[object Uint8Array]",fe="[object Uint8ClampedArray]",Wt="[object Uint16Array]",C="[object Uint32Array]",D={};D[L]=D[I]=D[ot]=D[ht]=D[G]=D[K]=D[tt]=D[it]=D[wt]=D[Ht]=D[Gt]=D[at]=D[ft]=D[lt]=D[dt]=D[Xt]=D[Ft]=D[Ae]=D[zt]=D[fe]=D[Wt]=D[C]=!0,D[Y]=D[pt]=D[Ee]=!1;function U($,vt,_t,Nt,Yt,ne){var he,ke=vt&X,Mt=vt&d,oe=vt&E;if(_t&&(he=Yt?_t($,Nt,Yt,ne):_t($)),he!==void 0)return he;if(!k($))return $;var ve=x($);if(ve){if(he=y($),!ke)return a($,he)}else{var sn=p($),qe=sn==pt||sn==Tt;if(T($))return s($,ke);if(sn==lt||sn==L||qe&&!Yt){if(he=Mt||qe?{}:w($),!ke)return Mt?c($,i(he,$)):u($,r(he,$))}else{if(!D[sn])return Yt?$:{};he=_($,sn,ke)}}ne||(ne=new t);var He=ne.get($);if(He)return He;ne.set($,he),q($)?$.forEach(function($e){he.add(U($e,vt,_t,$e,$,ne))}):P($)&&$.forEach(function($e,Xe){he.set(Xe,U($e,vt,_t,Xe,$,ne))});var an=oe?Mt?g:l:Mt?H:B,wn=ve?void 0:an($);return e(wn||$,function($e,Xe){wn&&(Xe=$e,$e=$[Xe]),n(he,Xe,U($e,vt,_t,Xe,$,ne))}),he}return Xg=U,Xg}var Yg,zT;function fF(){if(zT)return Yg;zT=1;var t=VT(),e=4;function n(r){return t(r,e)}return Yg=n,Yg}var Kg,GT;function Zg(){if(GT)return Kg;GT=1;function t(e){return function(){return e}}return Kg=t,Kg}var Jg,UT;function lF(){if(UT)return Jg;UT=1;function t(e){return function(n,r,i){for(var s=-1,a=Object(n),u=i(n),c=u.length;c--;){var l=u[e?c:++s];if(r(a[l],l,a)===!1)break}return n}}return Jg=t,Jg}var Qg,HT;function tv(){if(HT)return Qg;HT=1;var t=lF(),e=t();return Qg=e,Qg}var ev,$T;function nv(){if($T)return ev;$T=1;var t=tv(),e=ps();function n(r,i){return r&&t(r,i,e)}return ev=n,ev}var rv,WT;function hF(){if(WT)return rv;WT=1;var t=qi();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var a=i.length,u=r?a:-1,c=Object(i);(r?u--:++u<a)&&s(c[u],u,c)!==!1;);return i}}return rv=e,rv}var iv,jT;function cf(){if(jT)return iv;jT=1;var t=nv(),e=hF(),n=e(t);return iv=n,iv}var sv,XT;function Zs(){if(XT)return sv;XT=1;function t(e){return e}return sv=t,sv}var av,YT;function KT(){if(YT)return av;YT=1;var t=Zs();function e(n){return typeof n=="function"?n:t}return av=e,av}var ov,ZT;function JT(){if(ZT)return ov;ZT=1;var t=qp(),e=cf(),n=KT(),r=ln();function i(s,a){var u=r(s)?t:e;return u(s,n(a))}return ov=i,ov}var uv,QT;function tE(){return QT||(QT=1,uv=JT()),uv}var cv,eE;function dF(){if(eE)return cv;eE=1;var t=cf();function e(n,r){var i=[];return t(n,function(s,a,u){r(s,a,u)&&i.push(s)}),i}return cv=e,cv}var fv,nE;function pF(){if(nE)return fv;nE=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return fv=e,fv}var lv,rE;function gF(){if(rE)return lv;rE=1;function t(e){return this.__data__.has(e)}return lv=t,lv}var hv,iE;function sE(){if(iE)return hv;iE=1;var t=Mp(),e=pF(),n=gF();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new t;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,hv=r,hv}var dv,aE;function vF(){if(aE)return dv;aE=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return dv=t,dv}var pv,oE;function uE(){if(oE)return pv;oE=1;function t(e,n){return e.has(n)}return pv=t,pv}var gv,cE;function fE(){if(cE)return gv;cE=1;var t=sE(),e=vF(),n=uE(),r=1,i=2;function s(a,u,c,l,g,p){var y=c&r,_=a.length,w=u.length;if(_!=w&&!(y&&w>_))return!1;var x=p.get(a),T=p.get(u);if(x&&T)return x==u&&T==a;var P=-1,k=!0,q=c&i?new t:void 0;for(p.set(a,u),p.set(u,a);++P<_;){var B=a[P],H=u[P];if(l)var X=y?l(H,B,P,u,a,p):l(B,H,P,a,u,p);if(X!==void 0){if(X)continue;k=!1;break}if(q){if(!e(u,function(d,E){if(!n(q,E)&&(B===d||g(B,d,c,l,p)))return q.push(E)})){k=!1;break}}else if(!(B===H||g(B,H,c,l,p))){k=!1;break}}return p.delete(a),p.delete(u),k}return gv=s,gv}var vv,lE;function mF(){if(lE)return vv;lE=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return vv=t,vv}var mv,hE;function yv(){if(hE)return mv;hE=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return mv=t,mv}var bv,dE;function yF(){if(dE)return bv;dE=1;var t=Ga(),e=AT(),n=za(),r=fE(),i=mF(),s=yv(),a=1,u=2,c="[object Boolean]",l="[object Date]",g="[object Error]",p="[object Map]",y="[object Number]",_="[object RegExp]",w="[object Set]",x="[object String]",T="[object Symbol]",P="[object ArrayBuffer]",k="[object DataView]",q=t?t.prototype:void 0,B=q?q.valueOf:void 0;function H(X,d,E,L,I,G,K){switch(E){case k:if(X.byteLength!=d.byteLength||X.byteOffset!=d.byteOffset)return!1;X=X.buffer,d=d.buffer;case P:return!(X.byteLength!=d.byteLength||!G(new e(X),new e(d)));case c:case l:case y:return n(+X,+d);case g:return X.name==d.name&&X.message==d.message;case _:case x:return X==d+"";case p:var Y=i;case w:var pt=L&a;if(Y||(Y=s),X.size!=d.size&&!pt)return!1;var Tt=K.get(X);if(Tt)return Tt==d;L|=u,K.set(X,d);var at=r(Y(X),Y(d),L,I,G,K);return K.delete(X),at;case T:if(B)return B.call(X)==B.call(d)}return!1}return bv=H,bv}var _v,pE;function bF(){if(pE)return _v;pE=1;var t=dT(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,u,c,l,g){var p=u&e,y=t(s),_=y.length,w=t(a),x=w.length;if(_!=x&&!p)return!1;for(var T=_;T--;){var P=y[T];if(!(p?P in a:r.call(a,P)))return!1}var k=g.get(s),q=g.get(a);if(k&&q)return k==a&&q==s;var B=!0;g.set(s,a),g.set(a,s);for(var H=p;++T<_;){P=y[T];var X=s[P],d=a[P];if(c)var E=p?c(d,X,P,a,s,g):c(X,d,P,s,a,g);if(!(E===void 0?X===d||l(X,d,u,c,g):E)){B=!1;break}H||(H=P=="constructor")}if(B&&!H){var L=s.constructor,I=a.constructor;L!=I&&"constructor"in s&&"constructor"in a&&!(typeof L=="function"&&L instanceof L&&typeof I=="function"&&I instanceof I)&&(B=!1)}return g.delete(s),g.delete(a),B}return _v=i,_v}var wv,gE;function _F(){if(gE)return wv;gE=1;var t=ef(),e=fE(),n=yF(),r=bF(),i=Ha(),s=ln(),a=Ua(),u=eu(),c=1,l="[object Arguments]",g="[object Array]",p="[object Object]",y=Object.prototype,_=y.hasOwnProperty;function w(x,T,P,k,q,B){var H=s(x),X=s(T),d=H?g:i(x),E=X?g:i(T);d=d==l?p:d,E=E==l?p:E;var L=d==p,I=E==p,G=d==E;if(G&&a(x)){if(!a(T))return!1;H=!0,L=!1}if(G&&!L)return B||(B=new t),H||u(x)?e(x,T,P,k,q,B):n(x,T,d,P,k,q,B);if(!(P&c)){var K=L&&_.call(x,"__wrapped__"),Y=I&&_.call(T,"__wrapped__");if(K||Y){var pt=K?x.value():x,Tt=Y?T.value():T;return B||(B=new t),q(pt,Tt,P,k,B)}}return G?(B||(B=new t),r(x,T,P,k,q,B)):!1}return wv=w,wv}var xv,vE;function mE(){if(vE)return xv;vE=1;var t=_F(),e=mi();function n(r,i,s,a,u){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,a,n,u)}return xv=n,xv}var Av,yE;function wF(){if(yE)return Av;yE=1;var t=ef(),e=mE(),n=1,r=2;function i(s,a,u,c){var l=u.length,g=l,p=!c;if(s==null)return!g;for(s=Object(s);l--;){var y=u[l];if(p&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++l<g;){y=u[l];var _=y[0],w=s[_],x=y[1];if(p&&y[2]){if(w===void 0&&!(_ in s))return!1}else{var T=new t;if(c)var P=c(w,x,_,s,a,T);if(!(P===void 0?e(x,w,n|r,c,T):P))return!1}}return!0}return Av=i,Av}var Sv,bE;function _E(){if(bE)return Sv;bE=1;var t=Mr();function e(n){return n===n&&!t(n)}return Sv=e,Sv}var Tv,wE;function xF(){if(wE)return Tv;wE=1;var t=_E(),e=ps();function n(r){for(var i=e(r),s=i.length;s--;){var a=i[s],u=r[a];i[s]=[a,u,t(u)]}return i}return Tv=n,Tv}var Ev,xE;function AE(){if(xE)return Ev;xE=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return Ev=t,Ev}var Pv,SE;function AF(){if(SE)return Pv;SE=1;var t=wF(),e=xF(),n=AE();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||t(a,i,s)}}return Pv=r,Pv}var Cv,TE;function $a(){if(TE)return Cv;TE=1;var t=Xs(),e=mi(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return Cv=r,Cv}var Lv,EE;function Rv(){if(EE)return Lv;EE=1;var t=ln(),e=$a(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(t(s))return!1;var u=typeof s;return u=="number"||u=="symbol"||u=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return Lv=i,Lv}var Ov,PE;function SF(){if(PE)return Ov;PE=1;var t=Mp(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,u=i?i.apply(this,a):a[0],c=s.cache;if(c.has(u))return c.get(u);var l=r.apply(this,a);return s.cache=c.set(u,l)||c,l};return s.cache=new(n.Cache||t),s}return n.Cache=t,Ov=n,Ov}var kv,CE;function TF(){if(CE)return kv;CE=1;var t=SF(),e=500;function n(r){var i=t(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return kv=n,kv}var Mv,LE;function EF(){if(LE)return Mv;LE=1;var t=TF(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,u,c,l){s.push(c?l.replace(n,"$1"):u||a)}),s});return Mv=r,Mv}var Iv,RE;function ff(){if(RE)return Iv;RE=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return Iv=t,Iv}var Nv,OE;function PF(){if(OE)return Nv;OE=1;var t=Ga(),e=ff(),n=ln(),r=$a(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function a(u){if(typeof u=="string")return u;if(n(u))return e(u,a)+"";if(r(u))return s?s.call(u):"";var c=u+"";return c=="0"&&1/u==-1/0?"-0":c}return Nv=a,Nv}var Dv,kE;function ME(){if(kE)return Dv;kE=1;var t=PF();function e(n){return n==null?"":t(n)}return Dv=e,Dv}var qv,IE;function lf(){if(IE)return qv;IE=1;var t=ln(),e=Rv(),n=EF(),r=ME();function i(s,a){return t(s)?s:e(s,a)?[s]:n(r(s))}return qv=i,qv}var Bv,NE;function ru(){if(NE)return Bv;NE=1;var t=$a();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Bv=e,Bv}var Fv,DE;function hf(){if(DE)return Fv;DE=1;var t=lf(),e=ru();function n(r,i){i=t(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return Fv=n,Fv}var Vv,qE;function CF(){if(qE)return Vv;qE=1;var t=hf();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return Vv=e,Vv}var zv,BE;function LF(){if(BE)return zv;BE=1;function t(e,n){return e!=null&&n in Object(e)}return zv=t,zv}var Gv,FE;function VE(){if(FE)return Gv;FE=1;var t=lf(),e=Jo(),n=ln(),r=sf(),i=Kp(),s=ru();function a(u,c,l){c=t(c,u);for(var g=-1,p=c.length,y=!1;++g<p;){var _=s(c[g]);if(!(y=u!=null&&l(u,_)))break;u=u[_]}return y||++g!=p?y:(p=u==null?0:u.length,!!p&&i(p)&&r(_,p)&&(n(u)||e(u)))}return Gv=a,Gv}var Uv,zE;function GE(){if(zE)return Uv;zE=1;var t=LF(),e=VE();function n(r,i){return r!=null&&e(r,i,t)}return Uv=n,Uv}var Hv,UE;function RF(){if(UE)return Hv;UE=1;var t=mE(),e=CF(),n=GE(),r=Rv(),i=_E(),s=AE(),a=ru(),u=1,c=2;function l(g,p){return r(g)&&i(p)?s(a(g),p):function(y){var _=e(y,g);return _===void 0&&_===p?n(y,g):t(p,_,u|c)}}return Hv=l,Hv}var $v,HE;function $E(){if(HE)return $v;HE=1;function t(e){return function(n){return n==null?void 0:n[e]}}return $v=t,$v}var Wv,WE;function OF(){if(WE)return Wv;WE=1;var t=hf();function e(n){return function(r){return t(r,n)}}return Wv=e,Wv}var jv,jE;function kF(){if(jE)return jv;jE=1;var t=$E(),e=OF(),n=Rv(),r=ru();function i(s){return n(s)?t(r(s)):e(s)}return jv=i,jv}var Xv,XE;function Bi(){if(XE)return Xv;XE=1;var t=AF(),e=RF(),n=Zs(),r=ln(),i=kF();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?e(a[0],a[1]):t(a):i(a)}return Xv=s,Xv}var Yv,YE;function KE(){if(YE)return Yv;YE=1;var t=tT(),e=dF(),n=Bi(),r=ln();function i(s,a){var u=r(s)?t:e;return u(s,n(a,3))}return Yv=i,Yv}var Kv,ZE;function MF(){if(ZE)return Kv;ZE=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return Kv=n,Kv}var Zv,JE;function QE(){if(JE)return Zv;JE=1;var t=MF(),e=VE();function n(r,i){return r!=null&&e(r,i,t)}return Zv=n,Zv}var Jv,tP;function IF(){if(tP)return Jv;tP=1;var t=ag(),e=Ha(),n=Jo(),r=ln(),i=qi(),s=Ua(),a=of(),u=eu(),c="[object Map]",l="[object Set]",g=Object.prototype,p=g.hasOwnProperty;function y(_){if(_==null)return!0;if(i(_)&&(r(_)||typeof _=="string"||typeof _.splice=="function"||s(_)||u(_)||n(_)))return!_.length;var w=e(_);if(w==c||w==l)return!_.size;if(a(_))return!t(_).length;for(var x in _)if(p.call(_,x))return!1;return!0}return Jv=y,Jv}var Qv,eP;function nP(){if(eP)return Qv;eP=1;function t(e){return e===void 0}return Qv=t,Qv}var tm,rP;function iP(){if(rP)return tm;rP=1;var t=cf(),e=qi();function n(r,i){var s=-1,a=e(r)?Array(r.length):[];return t(r,function(u,c,l){a[++s]=i(u,c,l)}),a}return tm=n,tm}var em,sP;function aP(){if(sP)return em;sP=1;var t=ff(),e=Bi(),n=iP(),r=ln();function i(s,a){var u=r(s)?t:n;return u(s,e(a,3))}return em=i,em}var nm,oP;function NF(){if(oP)return nm;oP=1;function t(e,n,r,i){var s=-1,a=e==null?0:e.length;for(i&&a&&(r=e[++s]);++s<a;)r=n(r,e[s],s,e);return r}return nm=t,nm}var rm,uP;function DF(){if(uP)return rm;uP=1;function t(e,n,r,i,s){return s(e,function(a,u,c){r=i?(i=!1,a):n(r,a,u,c)}),r}return rm=t,rm}var im,cP;function fP(){if(cP)return im;cP=1;var t=NF(),e=cf(),n=Bi(),r=DF(),i=ln();function s(a,u,c){var l=i(a)?t:r,g=arguments.length<3;return l(a,n(u,4),c,g,e)}return im=s,im}var sm,lP;function qF(){if(lP)return sm;lP=1;var t=Xs(),e=ln(),n=mi(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return sm=i,sm}var am,hP;function BF(){if(hP)return am;hP=1;var t=$E(),e=t("length");return am=e,am}var om,dP;function FF(){if(dP)return om;dP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",u=RegExp("["+a+t+i+s+"]");function c(l){return u.test(l)}return om=c,om}var um,pP;function VF(){if(pP)return um;pP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="["+t+"]",u="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",l="(?:"+u+"|"+c+")",g="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",w=l+"?",x="["+s+"]?",T="(?:"+_+"(?:"+[g,p,y].join("|")+")"+x+w+")*",P=x+w+T,k="(?:"+[g+u+"?",u,p,y,a].join("|")+")",q=RegExp(c+"(?="+c+")|"+k+P,"g");function B(H){for(var X=q.lastIndex=0;q.test(H);)++X;return X}return um=B,um}var cm,gP;function zF(){if(gP)return cm;gP=1;var t=BF(),e=FF(),n=VF();function r(i){return e(i)?n(i):t(i)}return cm=r,cm}var fm,vP;function GF(){if(vP)return fm;vP=1;var t=ag(),e=Ha(),n=qi(),r=qF(),i=zF(),s="[object Map]",a="[object Set]";function u(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var l=e(c);return l==s||l==a?c.size:t(c).length}return fm=u,fm}var lm,mP;function UF(){if(mP)return lm;mP=1;var t=qp(),e=kT(),n=nv(),r=Bi(),i=uf(),s=ln(),a=Ua(),u=Ko(),c=Mr(),l=eu();function g(p,y,_){var w=s(p),x=w||a(p)||l(p);if(y=r(y,4),_==null){var T=p&&p.constructor;x?_=w?new T:[]:c(p)?_=u(T)?e(i(p)):{}:_={}}return(x?t:n)(p,function(P,k,q){return y(_,P,k,q)}),_}return lm=g,lm}var hm,yP;function HF(){if(yP)return hm;yP=1;var t=Ga(),e=Jo(),n=ln(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return hm=i,hm}var dm,bP;function pm(){if(bP)return dm;bP=1;var t=wg(),e=HF();function n(r,i,s,a,u){var c=-1,l=r.length;for(s||(s=e),u||(u=[]);++c<l;){var g=r[c];i>0&&s(g)?i>1?n(g,i-1,s,a,u):t(u,g):a||(u[u.length]=g)}return u}return dm=n,dm}var gm,_P;function $F(){if(_P)return gm;_P=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return gm=t,gm}var vm,wP;function xP(){if(wP)return vm;wP=1;var t=$F(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,u=-1,c=e(a.length-i,0),l=Array(c);++u<c;)l[u]=a[i+u];u=-1;for(var g=Array(i+1);++u<i;)g[u]=a[u];return g[i]=s(l),t(r,this,g)}}return vm=n,vm}var mm,AP;function WF(){if(AP)return mm;AP=1;var t=Zg(),e=yS(),n=Zs(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return mm=r,mm}var ym,SP;function jF(){if(SP)return ym;SP=1;var t=800,e=16,n=Date.now;function r(i){var s=0,a=0;return function(){var u=n(),c=e-(u-a);if(a=u,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return ym=r,ym}var bm,TP;function EP(){if(TP)return bm;TP=1;var t=WF(),e=jF(),n=e(t);return bm=n,bm}var _m,PP;function df(){if(PP)return _m;PP=1;var t=Zs(),e=xP(),n=EP();function r(i,s){return n(e(i,s,t),i+"")}return _m=r,_m}var wm,CP;function LP(){if(CP)return wm;CP=1;function t(e,n,r,i){for(var s=e.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(e[a],a,e))return a;return-1}return wm=t,wm}var xm,RP;function XF(){if(RP)return xm;RP=1;function t(e){return e!==e}return xm=t,xm}var Am,OP;function YF(){if(OP)return Am;OP=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return Am=t,Am}var Sm,kP;function KF(){if(kP)return Sm;kP=1;var t=LP(),e=XF(),n=YF();function r(i,s,a){return s===s?n(i,s,a):t(i,e,a)}return Sm=r,Sm}var Tm,MP;function ZF(){if(MP)return Tm;MP=1;var t=KF();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return Tm=e,Tm}var Em,IP;function JF(){if(IP)return Em;IP=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return Em=t,Em}var Pm,NP;function QF(){if(NP)return Pm;NP=1;function t(){}return Pm=t,Pm}var Cm,DP;function tV(){if(DP)return Cm;DP=1;var t=yT(),e=QF(),n=yv(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return Cm=i,Cm}var Lm,qP;function eV(){if(qP)return Lm;qP=1;var t=sE(),e=ZF(),n=JF(),r=uE(),i=tV(),s=yv(),a=200;function u(c,l,g){var p=-1,y=e,_=c.length,w=!0,x=[],T=x;if(g)w=!1,y=n;else if(_>=a){var P=l?null:i(c);if(P)return s(P);w=!1,y=r,T=new t}else T=l?[]:x;t:for(;++p<_;){var k=c[p],q=l?l(k):k;if(k=g||k!==0?k:0,w&&q===q){for(var B=T.length;B--;)if(T[B]===q)continue t;l&&T.push(q),x.push(k)}else y(T,q,g)||(T!==x&&T.push(q),x.push(k))}return x}return Lm=u,Lm}var Rm,BP;function FP(){if(BP)return Rm;BP=1;var t=qi(),e=mi();function n(r){return e(r)&&t(r)}return Rm=n,Rm}var Om,VP;function nV(){if(VP)return Om;VP=1;var t=pm(),e=df(),n=eV(),r=FP(),i=e(function(s){return n(t(s,1,r,!0))});return Om=i,Om}var km,zP;function rV(){if(zP)return km;zP=1;var t=ff();function e(n,r){return t(r,function(i){return n[i]})}return km=e,km}var Mm,GP;function UP(){if(GP)return Mm;GP=1;var t=rV(),e=ps();function n(r){return r==null?[]:t(r,e(r))}return Mm=n,Mm}var Im,HP;function Ir(){if(HP)return Im;HP=1;var t;if(typeof Ud=="function")try{t={clone:fF(),constant:Zg(),each:tE(),filter:KE(),has:QE(),isArray:ln(),isEmpty:IF(),isFunction:Ko(),isUndefined:nP(),keys:ps(),map:aP(),reduce:fP(),size:GF(),transform:UF(),union:nV(),values:UP()}}catch{}return t||(t=window._),Im=t,Im}var Nm,$P;function Dm(){if($P)return Nm;$P=1;var t=Ir();Nm=i;var e="\0",n="\0",r="";function i(g){this._isDirected=t.has(g,"directed")?g.directed:!0,this._isMultigraph=t.has(g,"multigraph")?g.multigraph:!1,this._isCompound=t.has(g,"compound")?g.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(g){return this._label=g,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(g){return t.isFunction(g)||(g=t.constant(g)),this._defaultNodeLabelFn=g,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var g=this;return t.filter(this.nodes(),function(p){return t.isEmpty(g._in[p])})},i.prototype.sinks=function(){var g=this;return t.filter(this.nodes(),function(p){return t.isEmpty(g._out[p])})},i.prototype.setNodes=function(g,p){var y=arguments,_=this;return t.each(g,function(w){y.length>1?_.setNode(w,p):_.setNode(w)}),this},i.prototype.setNode=function(g,p){return t.has(this._nodes,g)?(arguments.length>1&&(this._nodes[g]=p),this):(this._nodes[g]=arguments.length>1?p:this._defaultNodeLabelFn(g),this._isCompound&&(this._parent[g]=n,this._children[g]={},this._children[n][g]=!0),this._in[g]={},this._preds[g]={},this._out[g]={},this._sucs[g]={},++this._nodeCount,this)},i.prototype.node=function(g){return this._nodes[g]},i.prototype.hasNode=function(g){return t.has(this._nodes,g)},i.prototype.removeNode=function(g){var p=this;if(t.has(this._nodes,g)){var y=function(_){p.removeEdge(p._edgeObjs[_])};delete this._nodes[g],this._isCompound&&(this._removeFromParentsChildList(g),delete this._parent[g],t.each(this.children(g),function(_){p.setParent(_)}),delete this._children[g]),t.each(t.keys(this._in[g]),y),delete this._in[g],delete this._preds[g],t.each(t.keys(this._out[g]),y),delete this._out[g],delete this._sucs[g],--this._nodeCount}return this},i.prototype.setParent=function(g,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(p))p=n;else{p+="";for(var y=p;!t.isUndefined(y);y=this.parent(y))if(y===g)throw new Error("Setting "+p+" as parent of "+g+" would create a cycle");this.setNode(p)}return this.setNode(g),this._removeFromParentsChildList(g),this._parent[g]=p,this._children[p][g]=!0,this},i.prototype._removeFromParentsChildList=function(g){delete this._children[this._parent[g]][g]},i.prototype.parent=function(g){if(this._isCompound){var p=this._parent[g];if(p!==n)return p}},i.prototype.children=function(g){if(t.isUndefined(g)&&(g=n),this._isCompound){var p=this._children[g];if(p)return t.keys(p)}else{if(g===n)return this.nodes();if(this.hasNode(g))return[]}},i.prototype.predecessors=function(g){var p=this._preds[g];if(p)return t.keys(p)},i.prototype.successors=function(g){var p=this._sucs[g];if(p)return t.keys(p)},i.prototype.neighbors=function(g){var p=this.predecessors(g);if(p)return t.union(p,this.successors(g))},i.prototype.isLeaf=function(g){var p;return this.isDirected()?p=this.successors(g):p=this.neighbors(g),p.length===0},i.prototype.filterNodes=function(g){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var y=this;t.each(this._nodes,function(x,T){g(T)&&p.setNode(T,x)}),t.each(this._edgeObjs,function(x){p.hasNode(x.v)&&p.hasNode(x.w)&&p.setEdge(x,y.edge(x))});var _={};function w(x){var T=y.parent(x);return T===void 0||p.hasNode(T)?(_[x]=T,T):T in _?_[T]:w(T)}return this._isCompound&&t.each(p.nodes(),function(x){p.setParent(x,w(x))}),p},i.prototype.setDefaultEdgeLabel=function(g){return t.isFunction(g)||(g=t.constant(g)),this._defaultEdgeLabelFn=g,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(g,p){var y=this,_=arguments;return t.reduce(g,function(w,x){return _.length>1?y.setEdge(w,x,p):y.setEdge(w,x),x}),this},i.prototype.setEdge=function(){var g,p,y,_,w=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(g=x.v,p=x.w,y=x.name,arguments.length===2&&(_=arguments[1],w=!0)):(g=x,p=arguments[1],y=arguments[3],arguments.length>2&&(_=arguments[2],w=!0)),g=""+g,p=""+p,t.isUndefined(y)||(y=""+y);var T=u(this._isDirected,g,p,y);if(t.has(this._edgeLabels,T))return w&&(this._edgeLabels[T]=_),this;if(!t.isUndefined(y)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(p),this._edgeLabels[T]=w?_:this._defaultEdgeLabelFn(g,p,y);var P=c(this._isDirected,g,p,y);return g=P.v,p=P.w,Object.freeze(P),this._edgeObjs[T]=P,s(this._preds[p],g),s(this._sucs[g],p),this._in[p][T]=P,this._out[g][T]=P,this._edgeCount++,this},i.prototype.edge=function(g,p,y){var _=arguments.length===1?l(this._isDirected,arguments[0]):u(this._isDirected,g,p,y);return this._edgeLabels[_]},i.prototype.hasEdge=function(g,p,y){var _=arguments.length===1?l(this._isDirected,arguments[0]):u(this._isDirected,g,p,y);return t.has(this._edgeLabels,_)},i.prototype.removeEdge=function(g,p,y){var _=arguments.length===1?l(this._isDirected,arguments[0]):u(this._isDirected,g,p,y),w=this._edgeObjs[_];return w&&(g=w.v,p=w.w,delete this._edgeLabels[_],delete this._edgeObjs[_],a(this._preds[p],g),a(this._sucs[g],p),delete this._in[p][_],delete this._out[g][_],this._edgeCount--),this},i.prototype.inEdges=function(g,p){var y=this._in[g];if(y){var _=t.values(y);return p?t.filter(_,function(w){return w.v===p}):_}},i.prototype.outEdges=function(g,p){var y=this._out[g];if(y){var _=t.values(y);return p?t.filter(_,function(w){return w.w===p}):_}},i.prototype.nodeEdges=function(g,p){var y=this.inEdges(g,p);if(y)return y.concat(this.outEdges(g,p))};function s(g,p){g[p]?g[p]++:g[p]=1}function a(g,p){--g[p]||delete g[p]}function u(g,p,y,_){var w=""+p,x=""+y;if(!g&&w>x){var T=w;w=x,x=T}return w+r+x+r+(t.isUndefined(_)?e:_)}function c(g,p,y,_){var w=""+p,x=""+y;if(!g&&w>x){var T=w;w=x,x=T}var P={v:w,w:x};return _&&(P.name=_),P}function l(g,p){return u(g,p.v,p.w,p.name)}return Nm}var qm,WP;function iV(){return WP||(WP=1,qm="2.1.8"),qm}var Bm,jP;function sV(){return jP||(jP=1,Bm={Graph:Dm(),version:iV()}),Bm}var Fm,XP;function aV(){if(XP)return Fm;XP=1;var t=Ir(),e=Dm();Fm={write:n,read:s};function n(a){var u={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return t.isUndefined(a.graph())||(u.value=t.clone(a.graph())),u}function r(a){return t.map(a.nodes(),function(u){var c=a.node(u),l=a.parent(u),g={v:u};return t.isUndefined(c)||(g.value=c),t.isUndefined(l)||(g.parent=l),g})}function i(a){return t.map(a.edges(),function(u){var c=a.edge(u),l={v:u.v,w:u.w};return t.isUndefined(u.name)||(l.name=u.name),t.isUndefined(c)||(l.value=c),l})}function s(a){var u=new e(a.options).setGraph(a.value);return t.each(a.nodes,function(c){u.setNode(c.v,c.value),c.parent&&u.setParent(c.v,c.parent)}),t.each(a.edges,function(c){u.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),u}return Fm}var Vm,YP;function oV(){if(YP)return Vm;YP=1;var t=Ir();Vm=e;function e(n){var r={},i=[],s;function a(u){t.has(r,u)||(r[u]=!0,s.push(u),t.each(n.successors(u),a),t.each(n.predecessors(u),a))}return t.each(n.nodes(),function(u){s=[],a(u),s.length&&i.push(s)}),i}return Vm}var zm,KP;function ZP(){if(KP)return zm;KP=1;var t=Ir();zm=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var s=this._arr,a=s.length;return i[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},e.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,a=i[n],u=i[r];i[n]=u,i[r]=a,s[u.key]=n,s[a.key]=r},zm}var Gm,JP;function QP(){if(JP)return Gm;JP=1;var t=Ir(),e=ZP();Gm=r;var n=t.constant(1);function r(s,a,u,c){return i(s,String(a),u||n,c||function(l){return s.outEdges(l)})}function i(s,a,u,c){var l={},g=new e,p,y,_=function(w){var x=w.v!==p?w.v:w.w,T=l[x],P=u(w),k=y.distance+P;if(P<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+P);k<T.distance&&(T.distance=k,T.predecessor=p,g.decrease(x,k))};for(s.nodes().forEach(function(w){var x=w===a?0:Number.POSITIVE_INFINITY;l[w]={distance:x},g.add(w,x)});g.size()>0&&(p=g.removeMin(),y=l[p],y.distance!==Number.POSITIVE_INFINITY);)c(p).forEach(_);return l}return Gm}var Um,tC;function uV(){if(tC)return Um;tC=1;var t=QP(),e=Ir();Um=n;function n(r,i,s){return e.transform(r.nodes(),function(a,u){a[u]=t(r,u,i,s)},{})}return Um}var Hm,eC;function nC(){if(eC)return Hm;eC=1;var t=Ir();Hm=e;function e(n){var r=0,i=[],s={},a=[];function u(c){var l=s[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(y){t.has(s,y)?s[y].onStack&&(l.lowlink=Math.min(l.lowlink,s[y].index)):(u(y),l.lowlink=Math.min(l.lowlink,s[y].lowlink))}),l.lowlink===l.index){var g=[],p;do p=i.pop(),s[p].onStack=!1,g.push(p);while(c!==p);a.push(g)}}return n.nodes().forEach(function(c){t.has(s,c)||u(c)}),a}return Hm}var $m,rC;function cV(){if(rC)return $m;rC=1;var t=Ir(),e=nC();$m=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return $m}var Wm,iC;function fV(){if(iC)return Wm;iC=1;var t=Ir();Wm=n;var e=t.constant(1);function n(i,s,a){return r(i,s||e,a||function(u){return i.outEdges(u)})}function r(i,s,a){var u={},c=i.nodes();return c.forEach(function(l){u[l]={},u[l][l]={distance:0},c.forEach(function(g){l!==g&&(u[l][g]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(g){var p=g.v===l?g.w:g.v,y=s(g);u[l][p]={distance:y,predecessor:l}})}),c.forEach(function(l){var g=u[l];c.forEach(function(p){var y=u[p];c.forEach(function(_){var w=y[l],x=g[_],T=y[_],P=w.distance+x.distance;P<T.distance&&(T.distance=P,T.predecessor=x.predecessor)})})}),u}return Wm}var jm,sC;function aC(){if(sC)return jm;sC=1;var t=Ir();jm=e,e.CycleException=n;function e(r){var i={},s={},a=[];function u(c){if(t.has(s,c))throw new n;t.has(i,c)||(s[c]=!0,i[c]=!0,t.each(r.predecessors(c),u),delete s[c],a.push(c))}if(t.each(r.sinks(),u),t.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,jm}var Xm,oC;function lV(){if(oC)return Xm;oC=1;var t=aC();Xm=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return Xm}var Ym,uC;function cC(){if(uC)return Ym;uC=1;var t=Ir();Ym=e;function e(r,i,s){t.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),u=[],c={};return t.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,s==="post",c,a,u)}),u}function n(r,i,s,a,u,c){t.has(a,i)||(a[i]=!0,s||c.push(i),t.each(u(i),function(l){n(r,l,s,a,u,c)}),s&&c.push(i))}return Ym}var Km,fC;function hV(){if(fC)return Km;fC=1;var t=cC();Km=e;function e(n,r){return t(n,r,"post")}return Km}var Zm,lC;function dV(){if(lC)return Zm;lC=1;var t=cC();Zm=e;function e(n,r){return t(n,r,"pre")}return Zm}var Jm,hC;function pV(){if(hC)return Jm;hC=1;var t=Ir(),e=Dm(),n=ZP();Jm=r;function r(i,s){var a=new e,u={},c=new n,l;function g(y){var _=y.v===l?y.w:y.v,w=c.priority(_);if(w!==void 0){var x=s(y);x<w&&(u[_]=l,c.decrease(_,x))}}if(i.nodeCount()===0)return a;t.each(i.nodes(),function(y){c.add(y,Number.POSITIVE_INFINITY),a.setNode(y)}),c.decrease(i.nodes()[0],0);for(var p=!1;c.size()>0;){if(l=c.removeMin(),t.has(u,l))a.setEdge(l,u[l]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(l).forEach(g)}return a}return Jm}var Qm,dC;function gV(){return dC||(dC=1,Qm={components:oV(),dijkstra:QP(),dijkstraAll:uV(),findCycles:cV(),floydWarshall:fV(),isAcyclic:lV(),postorder:hV(),preorder:dV(),prim:pV(),tarjan:nC(),topsort:aC()}),Qm}var ty,pC;function gC(){if(pC)return ty;pC=1;var t=sV();return ty={Graph:t.Graph,json:aV(),alg:gV(),version:t.version},ty}var ey,vC;function Jr(){if(vC)return ey;vC=1;var t;if(typeof Ud=="function")try{t=gC()}catch{}return t||(t=window.graphlib),ey=t,ey}var ny,mC;function vV(){if(mC)return ny;mC=1;var t=VT(),e=1,n=4;function r(i){return t(i,e|n)}return ny=r,ny}var ry,yC;function pf(){if(yC)return ry;yC=1;var t=za(),e=qi(),n=sf(),r=Mr();function i(s,a,u){if(!r(u))return!1;var c=typeof a;return(c=="number"?e(u)&&n(a,u.length):c=="string"&&a in u)?t(u[a],s):!1}return ry=i,ry}var iy,bC;function mV(){if(bC)return iy;bC=1;var t=df(),e=za(),n=pf(),r=Ks(),i=Object.prototype,s=i.hasOwnProperty,a=t(function(u,c){u=Object(u);var l=-1,g=c.length,p=g>2?c[2]:void 0;for(p&&n(c[0],c[1],p)&&(g=1);++l<g;)for(var y=c[l],_=r(y),w=-1,x=_.length;++w<x;){var T=_[w],P=u[T];(P===void 0||e(P,i[T])&&!s.call(u,T))&&(u[T]=y[T])}return u});return iy=a,iy}var sy,_C;function yV(){if(_C)return sy;_C=1;var t=Bi(),e=qi(),n=ps();function r(i){return function(s,a,u){var c=Object(s);if(!e(s)){var l=t(a,3);s=n(s),a=function(p){return l(c[p],p,c)}}var g=i(s,a,u);return g>-1?c[l?s[g]:g]:void 0}}return sy=r,sy}var ay,wC;function bV(){if(wC)return ay;wC=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return ay=e,ay}var oy,xC;function _V(){if(xC)return oy;xC=1;var t=bV(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return oy=n,oy}var uy,AC;function wV(){if(AC)return uy;AC=1;var t=_V(),e=Mr(),n=$a(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(e(l)){var g=typeof l.valueOf=="function"?l.valueOf():l;l=e(g)?g+"":g}if(typeof l!="string")return l===0?l:+l;l=t(l);var p=s.test(l);return p||a.test(l)?u(l.slice(2),p?2:8):i.test(l)?r:+l}return uy=c,uy}var cy,SC;function TC(){if(SC)return cy;SC=1;var t=wV(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return cy=r,cy}var fy,EC;function xV(){if(EC)return fy;EC=1;var t=TC();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return fy=e,fy}var ly,PC;function AV(){if(PC)return ly;PC=1;var t=LP(),e=Bi(),n=xV(),r=Math.max;function i(s,a,u){var c=s==null?0:s.length;if(!c)return-1;var l=u==null?0:n(u);return l<0&&(l=r(c+l,0)),t(s,e(a,3),l)}return ly=i,ly}var hy,CC;function SV(){if(CC)return hy;CC=1;var t=yV(),e=AV(),n=t(e);return hy=n,hy}var dy,LC;function RC(){if(LC)return dy;LC=1;var t=pm();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return dy=e,dy}var py,OC;function TV(){if(OC)return py;OC=1;var t=tv(),e=KT(),n=Ks();function r(i,s){return i==null?i:t(i,e(s),n)}return py=r,py}var gy,kC;function EV(){if(kC)return gy;kC=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return gy=t,gy}var vy,MC;function PV(){if(MC)return vy;MC=1;var t=nf(),e=nv(),n=Bi();function r(i,s){var a={};return s=n(s,3),e(i,function(u,c,l){t(a,c,s(u,c,l))}),a}return vy=r,vy}var my,IC;function yy(){if(IC)return my;IC=1;var t=$a();function e(n,r,i){for(var s=-1,a=n.length;++s<a;){var u=n[s],c=r(u);if(c!=null&&(l===void 0?c===c&&!t(c):i(c,l)))var l=c,g=u}return g}return my=e,my}var by,NC;function CV(){if(NC)return by;NC=1;function t(e,n){return e>n}return by=t,by}var _y,DC;function LV(){if(DC)return _y;DC=1;var t=yy(),e=CV(),n=Zs();function r(i){return i&&i.length?t(i,n,e):void 0}return _y=r,_y}var wy,qC;function BC(){if(qC)return wy;qC=1;var t=nf(),e=za();function n(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&t(r,i,s)}return wy=n,wy}var xy,FC;function RV(){if(FC)return xy;FC=1;var t=Xs(),e=uf(),n=mi(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,u=s.hasOwnProperty,c=a.call(Object);function l(g){if(!n(g)||t(g)!=r)return!1;var p=e(g);if(p===null)return!0;var y=u.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&a.call(y)==c}return xy=l,xy}var Ay,VC;function zC(){if(VC)return Ay;VC=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return Ay=t,Ay}var Sy,GC;function OV(){if(GC)return Sy;GC=1;var t=Zo(),e=Ks();function n(r){return t(r,e(r))}return Sy=n,Sy}var Ty,UC;function kV(){if(UC)return Ty;UC=1;var t=BC(),e=KS(),n=LT(),r=JS(),i=IT(),s=Jo(),a=ln(),u=FP(),c=Ua(),l=Ko(),g=Mr(),p=RV(),y=eu(),_=zC(),w=OV();function x(T,P,k,q,B,H,X){var d=_(T,k),E=_(P,k),L=X.get(E);if(L){t(T,k,L);return}var I=H?H(d,E,k+"",T,P,X):void 0,G=I===void 0;if(G){var K=a(E),Y=!K&&c(E),pt=!K&&!Y&&y(E);I=E,K||Y||pt?a(d)?I=d:u(d)?I=r(d):Y?(G=!1,I=e(E,!0)):pt?(G=!1,I=n(E,!0)):I=[]:p(E)||s(E)?(I=d,s(d)?I=w(d):(!g(d)||l(d))&&(I=i(E))):G=!1}G&&(X.set(E,I),B(I,E,q,H,X),X.delete(E)),t(T,k,I)}return Ty=x,Ty}var Ey,HC;function MV(){if(HC)return Ey;HC=1;var t=ef(),e=BC(),n=tv(),r=kV(),i=Mr(),s=Ks(),a=zC();function u(c,l,g,p,y){c!==l&&n(l,function(_,w){if(y||(y=new t),i(_))r(c,l,w,g,u,p,y);else{var x=p?p(a(c,w),_,w+"",c,l,y):void 0;x===void 0&&(x=_),e(c,w,x)}},s)}return Ey=u,Ey}var Py,$C;function IV(){if($C)return Py;$C=1;var t=df(),e=pf();function n(r){return t(function(i,s){var a=-1,u=s.length,c=u>1?s[u-1]:void 0,l=u>2?s[2]:void 0;for(c=r.length>3&&typeof c=="function"?(u--,c):void 0,l&&e(s[0],s[1],l)&&(c=u<3?void 0:c,u=1),i=Object(i);++a<u;){var g=s[a];g&&r(i,g,a,c)}return i})}return Py=n,Py}var Cy,WC;function NV(){if(WC)return Cy;WC=1;var t=MV(),e=IV(),n=e(function(r,i,s){t(r,i,s)});return Cy=n,Cy}var Ly,jC;function XC(){if(jC)return Ly;jC=1;function t(e,n){return e<n}return Ly=t,Ly}var Ry,YC;function DV(){if(YC)return Ry;YC=1;var t=yy(),e=XC(),n=Zs();function r(i){return i&&i.length?t(i,n,e):void 0}return Ry=r,Ry}var Oy,KC;function qV(){if(KC)return Oy;KC=1;var t=yy(),e=Bi(),n=XC();function r(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return Oy=r,Oy}var ky,ZC;function BV(){if(ZC)return ky;ZC=1;var t=Zr(),e=function(){return t.Date.now()};return ky=e,ky}var My,JC;function FV(){if(JC)return My;JC=1;var t=rf(),e=lf(),n=sf(),r=Mr(),i=ru();function s(a,u,c,l){if(!r(a))return a;u=e(u,a);for(var g=-1,p=u.length,y=p-1,_=a;_!=null&&++g<p;){var w=i(u[g]),x=c;if(w==="__proto__"||w==="constructor"||w==="prototype")return a;if(g!=y){var T=_[w];x=l?l(T,w,_):void 0,x===void 0&&(x=r(T)?T:n(u[g+1])?[]:{})}t(_,w,x),_=_[w]}return a}return My=s,My}var Iy,QC;function VV(){if(QC)return Iy;QC=1;var t=hf(),e=FV(),n=lf();function r(i,s,a){for(var u=-1,c=s.length,l={};++u<c;){var g=s[u],p=t(i,g);a(p,g)&&e(l,n(g,i),p)}return l}return Iy=r,Iy}var Ny,tL;function zV(){if(tL)return Ny;tL=1;var t=VV(),e=GE();function n(r,i){return t(r,i,function(s,a){return e(r,a)})}return Ny=n,Ny}var Dy,eL;function GV(){if(eL)return Dy;eL=1;var t=RC(),e=xP(),n=EP();function r(i){return n(e(i,void 0,t),i+"")}return Dy=r,Dy}var qy,nL;function UV(){if(nL)return qy;nL=1;var t=zV(),e=GV(),n=e(function(r,i){return r==null?{}:t(r,i)});return qy=n,qy}var By,rL;function HV(){if(rL)return By;rL=1;var t=Math.ceil,e=Math.max;function n(r,i,s,a){for(var u=-1,c=e(t((i-r)/(s||1)),0),l=Array(c);c--;)l[a?c:++u]=r,r+=s;return l}return By=n,By}var Fy,iL;function $V(){if(iL)return Fy;iL=1;var t=HV(),e=pf(),n=TC();function r(i){return function(s,a,u){return u&&typeof u!="number"&&e(s,a,u)&&(a=u=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),u=u===void 0?s<a?1:-1:n(u),t(s,a,u,i)}}return Fy=r,Fy}var Vy,sL;function WV(){if(sL)return Vy;sL=1;var t=$V(),e=t();return Vy=e,Vy}var zy,aL;function jV(){if(aL)return zy;aL=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return zy=t,zy}var Gy,oL;function XV(){if(oL)return Gy;oL=1;var t=$a();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,u=t(n),c=r!==void 0,l=r===null,g=r===r,p=t(r);if(!l&&!p&&!u&&n>r||u&&c&&g&&!l&&!p||s&&c&&g||!i&&g||!a)return 1;if(!s&&!u&&!p&&n<r||p&&i&&a&&!s&&!u||l&&i&&a||!c&&a||!g)return-1}return 0}return Gy=e,Gy}var Uy,uL;function YV(){if(uL)return Uy;uL=1;var t=XV();function e(n,r,i){for(var s=-1,a=n.criteria,u=r.criteria,c=a.length,l=i.length;++s<c;){var g=t(a[s],u[s]);if(g){if(s>=l)return g;var p=i[s];return g*(p=="desc"?-1:1)}}return n.index-r.index}return Uy=e,Uy}var Hy,cL;function KV(){if(cL)return Hy;cL=1;var t=ff(),e=hf(),n=Bi(),r=iP(),i=jV(),s=af(),a=YV(),u=Zs(),c=ln();function l(g,p,y){p.length?p=t(p,function(x){return c(x)?function(T){return e(T,x.length===1?x[0]:x)}:x}):p=[u];var _=-1;p=t(p,s(n));var w=r(g,function(x,T,P){var k=t(p,function(q){return q(x)});return{criteria:k,index:++_,value:x}});return i(w,function(x,T){return a(x,T,y)})}return Hy=l,Hy}var $y,fL;function ZV(){if(fL)return $y;fL=1;var t=pm(),e=KV(),n=df(),r=pf(),i=n(function(s,a){if(s==null)return[];var u=a.length;return u>1&&r(s,a[0],a[1])?a=[]:u>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(s,t(a,1),[])});return $y=i,$y}var Wy,lL;function JV(){if(lL)return Wy;lL=1;var t=ME(),e=0;function n(r){var i=++e;return t(r)+i}return Wy=n,Wy}var jy,hL;function QV(){if(hL)return jy;hL=1;function t(e,n,r){for(var i=-1,s=e.length,a=n.length,u={};++i<s;){var c=i<a?n[i]:void 0;r(u,e[i],c)}return u}return jy=t,jy}var Xy,dL;function t3(){if(dL)return Xy;dL=1;var t=rf(),e=QV();function n(r,i){return e(r||[],i||[],t)}return Xy=n,Xy}var Yy,pL;function je(){if(pL)return Yy;pL=1;var t;if(typeof Ud=="function")try{t={cloneDeep:vV(),constant:Zg(),defaults:mV(),each:tE(),filter:KE(),find:SV(),flatten:RC(),forEach:JT(),forIn:TV(),has:QE(),isUndefined:nP(),last:EV(),map:aP(),mapValues:PV(),max:LV(),merge:NV(),min:DV(),minBy:qV(),now:BV(),pick:UV(),range:WV(),reduce:fP(),sortBy:ZV(),uniqueId:JV(),values:UP(),zipObject:t3()}}catch{}return t||(t=window._),Yy=t,Yy}var Ky,gL;function e3(){if(gL)return Ky;gL=1,Ky=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Ky}var Zy,vL;function n3(){if(vL)return Zy;vL=1;var t=je(),e=Jr().Graph,n=e3();Zy=i;var r=t.constant(1);function i(l,g){if(l.nodeCount()<=1)return[];var p=u(l,g||r),y=s(p.graph,p.buckets,p.zeroIdx);return t.flatten(t.map(y,function(_){return l.outEdges(_.v,_.w)}),!0)}function s(l,g,p){for(var y=[],_=g[g.length-1],w=g[0],x;l.nodeCount();){for(;x=w.dequeue();)a(l,g,p,x);for(;x=_.dequeue();)a(l,g,p,x);if(l.nodeCount()){for(var T=g.length-2;T>0;--T)if(x=g[T].dequeue(),x){y=y.concat(a(l,g,p,x,!0));break}}}return y}function a(l,g,p,y,_){var w=_?[]:void 0;return t.forEach(l.inEdges(y.v),function(x){var T=l.edge(x),P=l.node(x.v);_&&w.push({v:x.v,w:x.w}),P.out-=T,c(g,p,P)}),t.forEach(l.outEdges(y.v),function(x){var T=l.edge(x),P=x.w,k=l.node(P);k.in-=T,c(g,p,k)}),l.removeNode(y.v),w}function u(l,g){var p=new e,y=0,_=0;t.forEach(l.nodes(),function(T){p.setNode(T,{v:T,in:0,out:0})}),t.forEach(l.edges(),function(T){var P=p.edge(T.v,T.w)||0,k=g(T),q=P+k;p.setEdge(T.v,T.w,q),_=Math.max(_,p.node(T.v).out+=k),y=Math.max(y,p.node(T.w).in+=k)});var w=t.range(_+y+3).map(function(){return new n}),x=y+1;return t.forEach(p.nodes(),function(T){c(w,x,p.node(T))}),{graph:p,buckets:w,zeroIdx:x}}function c(l,g,p){p.out?p.in?l[p.out-p.in+g].enqueue(p):l[l.length-1].enqueue(p):l[0].enqueue(p)}return Zy}var Jy,mL;function r3(){if(mL)return Jy;mL=1;var t=je(),e=n3();Jy={run:n,undo:i};function n(s){var a=s.graph().acyclicer==="greedy"?e(s,u(s)):r(s);t.forEach(a,function(c){var l=s.edge(c);s.removeEdge(c),l.forwardName=c.name,l.reversed=!0,s.setEdge(c.w,c.v,l,t.uniqueId("rev"))});function u(c){return function(l){return c.edge(l).weight}}}function r(s){var a=[],u={},c={};function l(g){t.has(c,g)||(c[g]=!0,u[g]=!0,t.forEach(s.outEdges(g),function(p){t.has(u,p.w)?a.push(p):l(p.w)}),delete u[g])}return t.forEach(s.nodes(),l),a}function i(s){t.forEach(s.edges(),function(a){var u=s.edge(a);if(u.reversed){s.removeEdge(a);var c=u.forwardName;delete u.reversed,delete u.forwardName,s.setEdge(a.w,a.v,u,c)}})}return Jy}var Qy,yL;function nr(){if(yL)return Qy;yL=1;var t=je(),e=Jr().Graph;Qy={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:a,intersectRect:u,buildLayerMatrix:c,normalizeRanks:l,removeEmptyRanks:g,addBorderNode:p,maxRank:y,partition:_,time:w,notime:x};function n(T,P,k,q){var B;do B=t.uniqueId(q);while(T.hasNode(B));return k.dummy=P,T.setNode(B,k),B}function r(T){var P=new e().setGraph(T.graph());return t.forEach(T.nodes(),function(k){P.setNode(k,T.node(k))}),t.forEach(T.edges(),function(k){var q=P.edge(k.v,k.w)||{weight:0,minlen:1},B=T.edge(k);P.setEdge(k.v,k.w,{weight:q.weight+B.weight,minlen:Math.max(q.minlen,B.minlen)})}),P}function i(T){var P=new e({multigraph:T.isMultigraph()}).setGraph(T.graph());return t.forEach(T.nodes(),function(k){T.children(k).length||P.setNode(k,T.node(k))}),t.forEach(T.edges(),function(k){P.setEdge(k,T.edge(k))}),P}function s(T){var P=t.map(T.nodes(),function(k){var q={};return t.forEach(T.outEdges(k),function(B){q[B.w]=(q[B.w]||0)+T.edge(B).weight}),q});return t.zipObject(T.nodes(),P)}function a(T){var P=t.map(T.nodes(),function(k){var q={};return t.forEach(T.inEdges(k),function(B){q[B.v]=(q[B.v]||0)+T.edge(B).weight}),q});return t.zipObject(T.nodes(),P)}function u(T,P){var k=T.x,q=T.y,B=P.x-k,H=P.y-q,X=T.width/2,d=T.height/2;if(!B&&!H)throw new Error("Not possible to find intersection inside of the rectangle");var E,L;return Math.abs(H)*X>Math.abs(B)*d?(H<0&&(d=-d),E=d*B/H,L=d):(B<0&&(X=-X),E=X,L=X*H/B),{x:k+E,y:q+L}}function c(T){var P=t.map(t.range(y(T)+1),function(){return[]});return t.forEach(T.nodes(),function(k){var q=T.node(k),B=q.rank;t.isUndefined(B)||(P[B][q.order]=k)}),P}function l(T){var P=t.min(t.map(T.nodes(),function(k){return T.node(k).rank}));t.forEach(T.nodes(),function(k){var q=T.node(k);t.has(q,"rank")&&(q.rank-=P)})}function g(T){var P=t.min(t.map(T.nodes(),function(H){return T.node(H).rank})),k=[];t.forEach(T.nodes(),function(H){var X=T.node(H).rank-P;k[X]||(k[X]=[]),k[X].push(H)});var q=0,B=T.graph().nodeRankFactor;t.forEach(k,function(H,X){t.isUndefined(H)&&X%B!==0?--q:q&&t.forEach(H,function(d){T.node(d).rank+=q})})}function p(T,P,k,q){var B={width:0,height:0};return arguments.length>=4&&(B.rank=k,B.order=q),n(T,"border",B,P)}function y(T){return t.max(t.map(T.nodes(),function(P){var k=T.node(P).rank;if(!t.isUndefined(k))return k}))}function _(T,P){var k={lhs:[],rhs:[]};return t.forEach(T,function(q){P(q)?k.lhs.push(q):k.rhs.push(q)}),k}function w(T,P){var k=t.now();try{return P()}finally{console.log(T+" time: "+(t.now()-k)+"ms")}}function x(T,P){return P()}return Qy}var t0,bL;function i3(){if(bL)return t0;bL=1;var t=je(),e=nr();t0={run:n,undo:i};function n(s){s.graph().dummyChains=[],t.forEach(s.edges(),function(a){r(s,a)})}function r(s,a){var u=a.v,c=s.node(u).rank,l=a.w,g=s.node(l).rank,p=a.name,y=s.edge(a),_=y.labelRank;if(g!==c+1){s.removeEdge(a);var w,x,T;for(T=0,++c;c<g;++T,++c)y.points=[],x={width:0,height:0,edgeLabel:y,edgeObj:a,rank:c},w=e.addDummyNode(s,"edge",x,"_d"),c===_&&(x.width=y.width,x.height=y.height,x.dummy="edge-label",x.labelpos=y.labelpos),s.setEdge(u,w,{weight:y.weight},p),T===0&&s.graph().dummyChains.push(w),u=w;s.setEdge(u,l,{weight:y.weight},p)}}function i(s){t.forEach(s.graph().dummyChains,function(a){var u=s.node(a),c=u.edgeLabel,l;for(s.setEdge(u.edgeObj,c);u.dummy;)l=s.successors(a)[0],s.removeNode(a),c.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(c.x=u.x,c.y=u.y,c.width=u.width,c.height=u.height),a=l,u=s.node(a)})}return t0}var e0,_L;function gf(){if(_L)return e0;_L=1;var t=je();e0={longestPath:e,slack:n};function e(r){var i={};function s(a){var u=r.node(a);if(t.has(i,a))return u.rank;i[a]=!0;var c=t.min(t.map(r.outEdges(a),function(l){return s(l.w)-r.edge(l).minlen}));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),u.rank=c}t.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return e0}var n0,wL;function xL(){if(wL)return n0;wL=1;var t=je(),e=Jr().Graph,n=gf().slack;n0=r;function r(u){var c=new e({directed:!1}),l=u.nodes()[0],g=u.nodeCount();c.setNode(l,{});for(var p,y;i(c,u)<g;)p=s(c,u),y=c.hasNode(p.v)?n(u,p):-n(u,p),a(c,u,y);return c}function i(u,c){function l(g){t.forEach(c.nodeEdges(g),function(p){var y=p.v,_=g===y?p.w:y;!u.hasNode(_)&&!n(c,p)&&(u.setNode(_,{}),u.setEdge(g,_,{}),l(_))})}return t.forEach(u.nodes(),l),u.nodeCount()}function s(u,c){return t.minBy(c.edges(),function(l){if(u.hasNode(l.v)!==u.hasNode(l.w))return n(c,l)})}function a(u,c,l){t.forEach(u.nodes(),function(g){c.node(g).rank+=l})}return n0}var r0,AL;function s3(){if(AL)return r0;AL=1;var t=je(),e=xL(),n=gf().slack,r=gf().longestPath,i=Jr().alg.preorder,s=Jr().alg.postorder,a=nr().simplify;r0=u,u.initLowLimValues=p,u.initCutValues=c,u.calcCutValue=g,u.leaveEdge=_,u.enterEdge=w,u.exchangeEdges=x;function u(q){q=a(q),r(q);var B=e(q);p(B),c(B,q);for(var H,X;H=_(B);)X=w(B,q,H),x(B,q,H,X)}function c(q,B){var H=s(q,q.nodes());H=H.slice(0,H.length-1),t.forEach(H,function(X){l(q,B,X)})}function l(q,B,H){var X=q.node(H),d=X.parent;q.edge(H,d).cutvalue=g(q,B,H)}function g(q,B,H){var X=q.node(H),d=X.parent,E=!0,L=B.edge(H,d),I=0;return L||(E=!1,L=B.edge(d,H)),I=L.weight,t.forEach(B.nodeEdges(H),function(G){var K=G.v===H,Y=K?G.w:G.v;if(Y!==d){var pt=K===E,Tt=B.edge(G).weight;if(I+=pt?Tt:-Tt,P(q,H,Y)){var at=q.edge(H,Y).cutvalue;I+=pt?-at:at}}}),I}function p(q,B){arguments.length<2&&(B=q.nodes()[0]),y(q,{},1,B)}function y(q,B,H,X,d){var E=H,L=q.node(X);return B[X]=!0,t.forEach(q.neighbors(X),function(I){t.has(B,I)||(H=y(q,B,H,I,X))}),L.low=E,L.lim=H++,d?L.parent=d:delete L.parent,H}function _(q){return t.find(q.edges(),function(B){return q.edge(B).cutvalue<0})}function w(q,B,H){var X=H.v,d=H.w;B.hasEdge(X,d)||(X=H.w,d=H.v);var E=q.node(X),L=q.node(d),I=E,G=!1;E.lim>L.lim&&(I=L,G=!0);var K=t.filter(B.edges(),function(Y){return G===k(q,q.node(Y.v),I)&&G!==k(q,q.node(Y.w),I)});return t.minBy(K,function(Y){return n(B,Y)})}function x(q,B,H,X){var d=H.v,E=H.w;q.removeEdge(d,E),q.setEdge(X.v,X.w,{}),p(q),c(q,B),T(q,B)}function T(q,B){var H=t.find(q.nodes(),function(d){return!B.node(d).parent}),X=i(q,H);X=X.slice(1),t.forEach(X,function(d){var E=q.node(d).parent,L=B.edge(d,E),I=!1;L||(L=B.edge(E,d),I=!0),B.node(d).rank=B.node(E).rank+(I?L.minlen:-L.minlen)})}function P(q,B,H){return q.hasEdge(B,H)}function k(q,B,H){return H.low<=B.lim&&B.lim<=H.lim}return r0}var i0,SL;function a3(){if(SL)return i0;SL=1;var t=gf(),e=t.longestPath,n=xL(),r=s3();i0=i;function i(c){switch(c.graph().ranker){case"network-simplex":u(c);break;case"tight-tree":a(c);break;case"longest-path":s(c);break;default:u(c)}}var s=e;function a(c){e(c),n(c)}function u(c){r(c)}return i0}var s0,TL;function o3(){if(TL)return s0;TL=1;var t=je();s0=e;function e(i){var s=r(i);t.forEach(i.graph().dummyChains,function(a){for(var u=i.node(a),c=u.edgeObj,l=n(i,s,c.v,c.w),g=l.path,p=l.lca,y=0,_=g[y],w=!0;a!==c.w;){if(u=i.node(a),w){for(;(_=g[y])!==p&&i.node(_).maxRank<u.rank;)y++;_===p&&(w=!1)}if(!w){for(;y<g.length-1&&i.node(_=g[y+1]).minRank<=u.rank;)y++;_=g[y]}i.setParent(a,_),a=i.successors(a)[0]}})}function n(i,s,a,u){var c=[],l=[],g=Math.min(s[a].low,s[u].low),p=Math.max(s[a].lim,s[u].lim),y,_;y=a;do y=i.parent(y),c.push(y);while(y&&(s[y].low>g||p>s[y].lim));for(_=y,y=u;(y=i.parent(y))!==_;)l.push(y);return{path:c.concat(l.reverse()),lca:_}}function r(i){var s={},a=0;function u(c){var l=a;t.forEach(i.children(c),u),s[c]={low:l,lim:a++}}return t.forEach(i.children(),u),s}return s0}var a0,EL;function u3(){if(EL)return a0;EL=1;var t=je(),e=nr();a0={run:n,cleanup:a};function n(u){var c=e.addDummyNode(u,"root",{},"_root"),l=i(u),g=t.max(t.values(l))-1,p=2*g+1;u.graph().nestingRoot=c,t.forEach(u.edges(),function(_){u.edge(_).minlen*=p});var y=s(u)+1;t.forEach(u.children(),function(_){r(u,c,p,y,g,l,_)}),u.graph().nodeRankFactor=p}function r(u,c,l,g,p,y,_){var w=u.children(_);if(!w.length){_!==c&&u.setEdge(c,_,{weight:0,minlen:l});return}var x=e.addBorderNode(u,"_bt"),T=e.addBorderNode(u,"_bb"),P=u.node(_);u.setParent(x,_),P.borderTop=x,u.setParent(T,_),P.borderBottom=T,t.forEach(w,function(k){r(u,c,l,g,p,y,k);var q=u.node(k),B=q.borderTop?q.borderTop:k,H=q.borderBottom?q.borderBottom:k,X=q.borderTop?g:2*g,d=B!==H?1:p-y[_]+1;u.setEdge(x,B,{weight:X,minlen:d,nestingEdge:!0}),u.setEdge(H,T,{weight:X,minlen:d,nestingEdge:!0})}),u.parent(_)||u.setEdge(c,x,{weight:0,minlen:p+y[_]})}function i(u){var c={};function l(g,p){var y=u.children(g);y&&y.length&&t.forEach(y,function(_){l(_,p+1)}),c[g]=p}return t.forEach(u.children(),function(g){l(g,1)}),c}function s(u){return t.reduce(u.edges(),function(c,l){return c+u.edge(l).weight},0)}function a(u){var c=u.graph();u.removeNode(c.nestingRoot),delete c.nestingRoot,t.forEach(u.edges(),function(l){var g=u.edge(l);g.nestingEdge&&u.removeEdge(l)})}return a0}var o0,PL;function c3(){if(PL)return o0;PL=1;var t=je(),e=nr();o0=n;function n(i){function s(a){var u=i.children(a),c=i.node(a);if(u.length&&t.forEach(u,s),t.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var l=c.minRank,g=c.maxRank+1;l<g;++l)r(i,"borderLeft","_bl",a,c,l),r(i,"borderRight","_br",a,c,l)}}t.forEach(i.children(),s)}function r(i,s,a,u,c,l){var g={width:0,height:0,rank:l,borderType:s},p=c[s][l-1],y=e.addDummyNode(i,"border",g,a);c[s][l]=y,i.setParent(y,u),p&&i.setEdge(p,y,{weight:1})}return o0}var u0,CL;function f3(){if(CL)return u0;CL=1;var t=je();u0={adjust:e,undo:n};function e(l){var g=l.graph().rankdir.toLowerCase();(g==="lr"||g==="rl")&&r(l)}function n(l){var g=l.graph().rankdir.toLowerCase();(g==="bt"||g==="rl")&&s(l),(g==="lr"||g==="rl")&&(u(l),r(l))}function r(l){t.forEach(l.nodes(),function(g){i(l.node(g))}),t.forEach(l.edges(),function(g){i(l.edge(g))})}function i(l){var g=l.width;l.width=l.height,l.height=g}function s(l){t.forEach(l.nodes(),function(g){a(l.node(g))}),t.forEach(l.edges(),function(g){var p=l.edge(g);t.forEach(p.points,a),t.has(p,"y")&&a(p)})}function a(l){l.y=-l.y}function u(l){t.forEach(l.nodes(),function(g){c(l.node(g))}),t.forEach(l.edges(),function(g){var p=l.edge(g);t.forEach(p.points,c),t.has(p,"x")&&c(p)})}function c(l){var g=l.x;l.x=l.y,l.y=g}return u0}var c0,LL;function l3(){if(LL)return c0;LL=1;var t=je();c0=e;function e(n){var r={},i=t.filter(n.nodes(),function(l){return!n.children(l).length}),s=t.max(t.map(i,function(l){return n.node(l).rank})),a=t.map(t.range(s+1),function(){return[]});function u(l){if(!t.has(r,l)){r[l]=!0;var g=n.node(l);a[g.rank].push(l),t.forEach(n.successors(l),u)}}var c=t.sortBy(i,function(l){return n.node(l).rank});return t.forEach(c,u),a}return c0}var f0,RL;function h3(){if(RL)return f0;RL=1;var t=je();f0=e;function e(r,i){for(var s=0,a=1;a<i.length;++a)s+=n(r,i[a-1],i[a]);return s}function n(r,i,s){for(var a=t.zipObject(s,t.map(s,function(y,_){return _})),u=t.flatten(t.map(i,function(y){return t.sortBy(t.map(r.outEdges(y),function(_){return{pos:a[_.w],weight:r.edge(_).weight}}),"pos")}),!0),c=1;c<s.length;)c<<=1;var l=2*c-1;c-=1;var g=t.map(new Array(l),function(){return 0}),p=0;return t.forEach(u.forEach(function(y){var _=y.pos+c;g[_]+=y.weight;for(var w=0;_>0;)_%2&&(w+=g[_+1]),_=_-1>>1,g[_]+=y.weight;p+=y.weight*w})),p}return f0}var l0,OL;function d3(){if(OL)return l0;OL=1;var t=je();l0=e;function e(n,r){return t.map(r,function(i){var s=n.inEdges(i);if(s.length){var a=t.reduce(s,function(u,c){var l=n.edge(c),g=n.node(c.v);return{sum:u.sum+l.weight*g.order,weight:u.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return l0}var h0,kL;function p3(){if(kL)return h0;kL=1;var t=je();h0=e;function e(i,s){var a={};t.forEach(i,function(c,l){var g=a[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:l};t.isUndefined(c.barycenter)||(g.barycenter=c.barycenter,g.weight=c.weight)}),t.forEach(s.edges(),function(c){var l=a[c.v],g=a[c.w];!t.isUndefined(l)&&!t.isUndefined(g)&&(g.indegree++,l.out.push(a[c.w]))});var u=t.filter(a,function(c){return!c.indegree});return n(u)}function n(i){var s=[];function a(l){return function(g){g.merged||(t.isUndefined(g.barycenter)||t.isUndefined(l.barycenter)||g.barycenter>=l.barycenter)&&r(l,g)}}function u(l){return function(g){g.in.push(l),--g.indegree===0&&i.push(g)}}for(;i.length;){var c=i.pop();s.push(c),t.forEach(c.in.reverse(),a(c)),t.forEach(c.out,u(c))}return t.map(t.filter(s,function(l){return!l.merged}),function(l){return t.pick(l,["vs","i","barycenter","weight"])})}function r(i,s){var a=0,u=0;i.weight&&(a+=i.barycenter*i.weight,u+=i.weight),s.weight&&(a+=s.barycenter*s.weight,u+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=a/u,i.weight=u,i.i=Math.min(s.i,i.i),s.merged=!0}return h0}var d0,ML;function g3(){if(ML)return d0;ML=1;var t=je(),e=nr();d0=n;function n(s,a){var u=e.partition(s,function(x){return t.has(x,"barycenter")}),c=u.lhs,l=t.sortBy(u.rhs,function(x){return-x.i}),g=[],p=0,y=0,_=0;c.sort(i(!!a)),_=r(g,l,_),t.forEach(c,function(x){_+=x.vs.length,g.push(x.vs),p+=x.barycenter*x.weight,y+=x.weight,_=r(g,l,_)});var w={vs:t.flatten(g,!0)};return y&&(w.barycenter=p/y,w.weight=y),w}function r(s,a,u){for(var c;a.length&&(c=t.last(a)).i<=u;)a.pop(),s.push(c.vs),u++;return u}function i(s){return function(a,u){return a.barycenter<u.barycenter?-1:a.barycenter>u.barycenter?1:s?u.i-a.i:a.i-u.i}}return d0}var p0,IL;function v3(){if(IL)return p0;IL=1;var t=je(),e=d3(),n=p3(),r=g3();p0=i;function i(u,c,l,g){var p=u.children(c),y=u.node(c),_=y?y.borderLeft:void 0,w=y?y.borderRight:void 0,x={};_&&(p=t.filter(p,function(H){return H!==_&&H!==w}));var T=e(u,p);t.forEach(T,function(H){if(u.children(H.v).length){var X=i(u,H.v,l,g);x[H.v]=X,t.has(X,"barycenter")&&a(H,X)}});var P=n(T,l);s(P,x);var k=r(P,g);if(_&&(k.vs=t.flatten([_,k.vs,w],!0),u.predecessors(_).length)){var q=u.node(u.predecessors(_)[0]),B=u.node(u.predecessors(w)[0]);t.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+q.order+B.order)/(k.weight+2),k.weight+=2}return k}function s(u,c){t.forEach(u,function(l){l.vs=t.flatten(l.vs.map(function(g){return c[g]?c[g].vs:g}),!0)})}function a(u,c){t.isUndefined(u.barycenter)?(u.barycenter=c.barycenter,u.weight=c.weight):(u.barycenter=(u.barycenter*u.weight+c.barycenter*c.weight)/(u.weight+c.weight),u.weight+=c.weight)}return p0}var g0,NL;function m3(){if(NL)return g0;NL=1;var t=je(),e=Jr().Graph;g0=n;function n(i,s,a){var u=r(i),c=new e({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(function(l){return i.node(l)});return t.forEach(i.nodes(),function(l){var g=i.node(l),p=i.parent(l);(g.rank===s||g.minRank<=s&&s<=g.maxRank)&&(c.setNode(l),c.setParent(l,p||u),t.forEach(i[a](l),function(y){var _=y.v===l?y.w:y.v,w=c.edge(_,l),x=t.isUndefined(w)?0:w.weight;c.setEdge(_,l,{weight:i.edge(y).weight+x})}),t.has(g,"minRank")&&c.setNode(l,{borderLeft:g.borderLeft[s],borderRight:g.borderRight[s]}))}),c}function r(i){for(var s;i.hasNode(s=t.uniqueId("_root")););return s}return g0}var v0,DL;function y3(){if(DL)return v0;DL=1;var t=je();v0=e;function e(n,r,i){var s={},a;t.forEach(i,function(u){for(var c=n.parent(u),l,g;c;){if(l=n.parent(c),l?(g=s[l],s[l]=c):(g=a,a=c),g&&g!==c){r.setEdge(g,c);return}c=l}})}return v0}var m0,qL;function b3(){if(qL)return m0;qL=1;var t=je(),e=l3(),n=h3(),r=v3(),i=m3(),s=y3(),a=Jr().Graph,u=nr();m0=c;function c(y){var _=u.maxRank(y),w=l(y,t.range(1,_+1),"inEdges"),x=l(y,t.range(_-1,-1,-1),"outEdges"),T=e(y);p(y,T);for(var P=Number.POSITIVE_INFINITY,k,q=0,B=0;B<4;++q,++B){g(q%2?w:x,q%4>=2),T=u.buildLayerMatrix(y);var H=n(y,T);H<P&&(B=0,k=t.cloneDeep(T),P=H)}p(y,k)}function l(y,_,w){return t.map(_,function(x){return i(y,x,w)})}function g(y,_){var w=new a;t.forEach(y,function(x){var T=x.graph().root,P=r(x,T,w,_);t.forEach(P.vs,function(k,q){x.node(k).order=q}),s(x,w,P.vs)})}function p(y,_){t.forEach(_,function(w){t.forEach(w,function(x,T){y.node(x).order=T})})}return m0}var y0,BL;function _3(){if(BL)return y0;BL=1;var t=je(),e=Jr().Graph,n=nr();y0={positionX:w,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:u,verticalAlignment:c,horizontalCompaction:l,alignCoordinates:y,findSmallestWidthAlignment:p,balance:_};function r(P,k){var q={};function B(H,X){var d=0,E=0,L=H.length,I=t.last(X);return t.forEach(X,function(G,K){var Y=s(P,G),pt=Y?P.node(Y).order:L;(Y||G===I)&&(t.forEach(X.slice(E,K+1),function(Tt){t.forEach(P.predecessors(Tt),function(at){var ft=P.node(at),lt=ft.order;(lt<d||pt<lt)&&!(ft.dummy&&P.node(Tt).dummy)&&a(q,at,Tt)})}),E=K+1,d=pt)}),X}return t.reduce(k,B),q}function i(P,k){var q={};function B(X,d,E,L,I){var G;t.forEach(t.range(d,E),function(K){G=X[K],P.node(G).dummy&&t.forEach(P.predecessors(G),function(Y){var pt=P.node(Y);pt.dummy&&(pt.order<L||pt.order>I)&&a(q,Y,G)})})}function H(X,d){var E=-1,L,I=0;return t.forEach(d,function(G,K){if(P.node(G).dummy==="border"){var Y=P.predecessors(G);Y.length&&(L=P.node(Y[0]).order,B(d,I,K,E,L),I=K,E=L)}B(d,I,d.length,L,X.length)}),d}return t.reduce(k,H),q}function s(P,k){if(P.node(k).dummy)return t.find(P.predecessors(k),function(q){return P.node(q).dummy})}function a(P,k,q){if(k>q){var B=k;k=q,q=B}var H=P[k];H||(P[k]=H={}),H[q]=!0}function u(P,k,q){if(k>q){var B=k;k=q,q=B}return t.has(P[k],q)}function c(P,k,q,B){var H={},X={},d={};return t.forEach(k,function(E){t.forEach(E,function(L,I){H[L]=L,X[L]=L,d[L]=I})}),t.forEach(k,function(E){var L=-1;t.forEach(E,function(I){var G=B(I);if(G.length){G=t.sortBy(G,function(at){return d[at]});for(var K=(G.length-1)/2,Y=Math.floor(K),pt=Math.ceil(K);Y<=pt;++Y){var Tt=G[Y];X[I]===I&&L<d[Tt]&&!u(q,I,Tt)&&(X[Tt]=I,X[I]=H[I]=H[Tt],L=d[Tt])}}})}),{root:H,align:X}}function l(P,k,q,B,H){var X={},d=g(P,k,q,H),E=H?"borderLeft":"borderRight";function L(K,Y){for(var pt=d.nodes(),Tt=pt.pop(),at={};Tt;)at[Tt]?K(Tt):(at[Tt]=!0,pt.push(Tt),pt=pt.concat(Y(Tt))),Tt=pt.pop()}function I(K){X[K]=d.inEdges(K).reduce(function(Y,pt){return Math.max(Y,X[pt.v]+d.edge(pt))},0)}function G(K){var Y=d.outEdges(K).reduce(function(Tt,at){return Math.min(Tt,X[at.w]-d.edge(at))},Number.POSITIVE_INFINITY),pt=P.node(K);Y!==Number.POSITIVE_INFINITY&&pt.borderType!==E&&(X[K]=Math.max(X[K],Y))}return L(I,d.predecessors.bind(d)),L(G,d.successors.bind(d)),t.forEach(B,function(K){X[K]=X[q[K]]}),X}function g(P,k,q,B){var H=new e,X=P.graph(),d=x(X.nodesep,X.edgesep,B);return t.forEach(k,function(E){var L;t.forEach(E,function(I){var G=q[I];if(H.setNode(G),L){var K=q[L],Y=H.edge(K,G);H.setEdge(K,G,Math.max(d(P,I,L),Y||0))}L=I})}),H}function p(P,k){return t.minBy(t.values(k),function(q){var B=Number.NEGATIVE_INFINITY,H=Number.POSITIVE_INFINITY;return t.forIn(q,function(X,d){var E=T(P,d)/2;B=Math.max(X+E,B),H=Math.min(X-E,H)}),B-H})}function y(P,k){var q=t.values(k),B=t.min(q),H=t.max(q);t.forEach(["u","d"],function(X){t.forEach(["l","r"],function(d){var E=X+d,L=P[E],I;if(L!==k){var G=t.values(L);I=d==="l"?B-t.min(G):H-t.max(G),I&&(P[E]=t.mapValues(L,function(K){return K+I}))}})})}function _(P,k){return t.mapValues(P.ul,function(q,B){if(k)return P[k.toLowerCase()][B];var H=t.sortBy(t.map(P,B));return(H[1]+H[2])/2})}function w(P){var k=n.buildLayerMatrix(P),q=t.merge(r(P,k),i(P,k)),B={},H;t.forEach(["u","d"],function(d){H=d==="u"?k:t.values(k).reverse(),t.forEach(["l","r"],function(E){E==="r"&&(H=t.map(H,function(K){return t.values(K).reverse()}));var L=(d==="u"?P.predecessors:P.successors).bind(P),I=c(P,H,q,L),G=l(P,H,I.root,I.align,E==="r");E==="r"&&(G=t.mapValues(G,function(K){return-K})),B[d+E]=G})});var X=p(P,B);return y(B,X),_(B,P.graph().align)}function x(P,k,q){return function(B,H,X){var d=B.node(H),E=B.node(X),L=0,I;if(L+=d.width/2,t.has(d,"labelpos"))switch(d.labelpos.toLowerCase()){case"l":I=-d.width/2;break;case"r":I=d.width/2;break}if(I&&(L+=q?I:-I),I=0,L+=(d.dummy?k:P)/2,L+=(E.dummy?k:P)/2,L+=E.width/2,t.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":I=E.width/2;break;case"r":I=-E.width/2;break}return I&&(L+=q?I:-I),I=0,L}}function T(P,k){return P.node(k).width}return y0}var b0,FL;function w3(){if(FL)return b0;FL=1;var t=je(),e=nr(),n=_3().positionX;b0=r;function r(s){s=e.asNonCompoundGraph(s),i(s),t.forEach(n(s),function(a,u){s.node(u).x=a})}function i(s){var a=e.buildLayerMatrix(s),u=s.graph().ranksep,c=0;t.forEach(a,function(l){var g=t.max(t.map(l,function(p){return s.node(p).height}));t.forEach(l,function(p){s.node(p).y=c+g/2}),c+=g+u})}return b0}var _0,VL;function x3(){if(VL)return _0;VL=1;var t=je(),e=r3(),n=i3(),r=a3(),i=nr().normalizeRanks,s=o3(),a=nr().removeEmptyRanks,u=u3(),c=c3(),l=f3(),g=b3(),p=w3(),y=nr(),_=Jr().Graph;_0=w;function w(ot,ht){var tt=ht&&ht.debugTiming?y.time:y.notime;tt("layout",function(){var it=tt("  buildLayoutGraph",function(){return L(ot)});tt("  runLayout",function(){x(it,tt)}),tt("  updateInputGraph",function(){T(ot,it)})})}function x(ot,ht){ht("    makeSpaceForEdgeLabels",function(){I(ot)}),ht("    removeSelfEdges",function(){dt(ot)}),ht("    acyclic",function(){e.run(ot)}),ht("    nestingGraph.run",function(){u.run(ot)}),ht("    rank",function(){r(y.asNonCompoundGraph(ot))}),ht("    injectEdgeLabelProxies",function(){G(ot)}),ht("    removeEmptyRanks",function(){a(ot)}),ht("    nestingGraph.cleanup",function(){u.cleanup(ot)}),ht("    normalizeRanks",function(){i(ot)}),ht("    assignRankMinMax",function(){K(ot)}),ht("    removeEdgeLabelProxies",function(){Y(ot)}),ht("    normalize.run",function(){n.run(ot)}),ht("    parentDummyChains",function(){s(ot)}),ht("    addBorderSegments",function(){c(ot)}),ht("    order",function(){g(ot)}),ht("    insertSelfEdges",function(){Xt(ot)}),ht("    adjustCoordinateSystem",function(){l.adjust(ot)}),ht("    position",function(){p(ot)}),ht("    positionSelfEdges",function(){Ft(ot)}),ht("    removeBorderNodes",function(){lt(ot)}),ht("    normalize.undo",function(){n.undo(ot)}),ht("    fixupEdgeLabelCoords",function(){at(ot)}),ht("    undoCoordinateSystem",function(){l.undo(ot)}),ht("    translateGraph",function(){pt(ot)}),ht("    assignNodeIntersects",function(){Tt(ot)}),ht("    reversePoints",function(){ft(ot)}),ht("    acyclic.undo",function(){e.undo(ot)})}function T(ot,ht){t.forEach(ot.nodes(),function(tt){var it=ot.node(tt),wt=ht.node(tt);it&&(it.x=wt.x,it.y=wt.y,ht.children(tt).length&&(it.width=wt.width,it.height=wt.height))}),t.forEach(ot.edges(),function(tt){var it=ot.edge(tt),wt=ht.edge(tt);it.points=wt.points,t.has(wt,"x")&&(it.x=wt.x,it.y=wt.y)}),ot.graph().width=ht.graph().width,ot.graph().height=ht.graph().height}var P=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},q=["acyclicer","ranker","rankdir","align"],B=["width","height"],H={width:0,height:0},X=["minlen","weight","width","height","labeloffset"],d={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function L(ot){var ht=new _({multigraph:!0,compound:!0}),tt=Ee(ot.graph());return ht.setGraph(t.merge({},k,Ae(tt,P),t.pick(tt,q))),t.forEach(ot.nodes(),function(it){var wt=Ee(ot.node(it));ht.setNode(it,t.defaults(Ae(wt,B),H)),ht.setParent(it,ot.parent(it))}),t.forEach(ot.edges(),function(it){var wt=Ee(ot.edge(it));ht.setEdge(it,t.merge({},d,Ae(wt,X),t.pick(wt,E)))}),ht}function I(ot){var ht=ot.graph();ht.ranksep/=2,t.forEach(ot.edges(),function(tt){var it=ot.edge(tt);it.minlen*=2,it.labelpos.toLowerCase()!=="c"&&(ht.rankdir==="TB"||ht.rankdir==="BT"?it.width+=it.labeloffset:it.height+=it.labeloffset)})}function G(ot){t.forEach(ot.edges(),function(ht){var tt=ot.edge(ht);if(tt.width&&tt.height){var it=ot.node(ht.v),wt=ot.node(ht.w),Ht={rank:(wt.rank-it.rank)/2+it.rank,e:ht};y.addDummyNode(ot,"edge-proxy",Ht,"_ep")}})}function K(ot){var ht=0;t.forEach(ot.nodes(),function(tt){var it=ot.node(tt);it.borderTop&&(it.minRank=ot.node(it.borderTop).rank,it.maxRank=ot.node(it.borderBottom).rank,ht=t.max(ht,it.maxRank))}),ot.graph().maxRank=ht}function Y(ot){t.forEach(ot.nodes(),function(ht){var tt=ot.node(ht);tt.dummy==="edge-proxy"&&(ot.edge(tt.e).labelRank=tt.rank,ot.removeNode(ht))})}function pt(ot){var ht=Number.POSITIVE_INFINITY,tt=0,it=Number.POSITIVE_INFINITY,wt=0,Ht=ot.graph(),Gt=Ht.marginx||0,zt=Ht.marginy||0;function fe(Wt){var C=Wt.x,D=Wt.y,U=Wt.width,$=Wt.height;ht=Math.min(ht,C-U/2),tt=Math.max(tt,C+U/2),it=Math.min(it,D-$/2),wt=Math.max(wt,D+$/2)}t.forEach(ot.nodes(),function(Wt){fe(ot.node(Wt))}),t.forEach(ot.edges(),function(Wt){var C=ot.edge(Wt);t.has(C,"x")&&fe(C)}),ht-=Gt,it-=zt,t.forEach(ot.nodes(),function(Wt){var C=ot.node(Wt);C.x-=ht,C.y-=it}),t.forEach(ot.edges(),function(Wt){var C=ot.edge(Wt);t.forEach(C.points,function(D){D.x-=ht,D.y-=it}),t.has(C,"x")&&(C.x-=ht),t.has(C,"y")&&(C.y-=it)}),Ht.width=tt-ht+Gt,Ht.height=wt-it+zt}function Tt(ot){t.forEach(ot.edges(),function(ht){var tt=ot.edge(ht),it=ot.node(ht.v),wt=ot.node(ht.w),Ht,Gt;tt.points?(Ht=tt.points[0],Gt=tt.points[tt.points.length-1]):(tt.points=[],Ht=wt,Gt=it),tt.points.unshift(y.intersectRect(it,Ht)),tt.points.push(y.intersectRect(wt,Gt))})}function at(ot){t.forEach(ot.edges(),function(ht){var tt=ot.edge(ht);if(t.has(tt,"x"))switch((tt.labelpos==="l"||tt.labelpos==="r")&&(tt.width-=tt.labeloffset),tt.labelpos){case"l":tt.x-=tt.width/2+tt.labeloffset;break;case"r":tt.x+=tt.width/2+tt.labeloffset;break}})}function ft(ot){t.forEach(ot.edges(),function(ht){var tt=ot.edge(ht);tt.reversed&&tt.points.reverse()})}function lt(ot){t.forEach(ot.nodes(),function(ht){if(ot.children(ht).length){var tt=ot.node(ht),it=ot.node(tt.borderTop),wt=ot.node(tt.borderBottom),Ht=ot.node(t.last(tt.borderLeft)),Gt=ot.node(t.last(tt.borderRight));tt.width=Math.abs(Gt.x-Ht.x),tt.height=Math.abs(wt.y-it.y),tt.x=Ht.x+tt.width/2,tt.y=it.y+tt.height/2}}),t.forEach(ot.nodes(),function(ht){ot.node(ht).dummy==="border"&&ot.removeNode(ht)})}function dt(ot){t.forEach(ot.edges(),function(ht){if(ht.v===ht.w){var tt=ot.node(ht.v);tt.selfEdges||(tt.selfEdges=[]),tt.selfEdges.push({e:ht,label:ot.edge(ht)}),ot.removeEdge(ht)}})}function Xt(ot){var ht=y.buildLayerMatrix(ot);t.forEach(ht,function(tt){var it=0;t.forEach(tt,function(wt,Ht){var Gt=ot.node(wt);Gt.order=Ht+it,t.forEach(Gt.selfEdges,function(zt){y.addDummyNode(ot,"selfedge",{width:zt.label.width,height:zt.label.height,rank:Gt.rank,order:Ht+ ++it,e:zt.e,label:zt.label},"_se")}),delete Gt.selfEdges})})}function Ft(ot){t.forEach(ot.nodes(),function(ht){var tt=ot.node(ht);if(tt.dummy==="selfedge"){var it=ot.node(tt.e.v),wt=it.x+it.width/2,Ht=it.y,Gt=tt.x-wt,zt=it.height/2;ot.setEdge(tt.e,tt.label),ot.removeNode(ht),tt.label.points=[{x:wt+2*Gt/3,y:Ht-zt},{x:wt+5*Gt/6,y:Ht-zt},{x:wt+Gt,y:Ht},{x:wt+5*Gt/6,y:Ht+zt},{x:wt+2*Gt/3,y:Ht+zt}],tt.label.x=tt.x,tt.label.y=tt.y}})}function Ae(ot,ht){return t.mapValues(t.pick(ot,ht),Number)}function Ee(ot){var ht={};return t.forEach(ot,function(tt,it){ht[it.toLowerCase()]=tt}),ht}return _0}var w0,zL;function A3(){if(zL)return w0;zL=1;var t=je(),e=nr(),n=Jr().Graph;w0={debugOrdering:r};function r(i){var s=e.buildLayerMatrix(i),a=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(u){a.setNode(u,{label:u}),a.setParent(u,"layer"+i.node(u).rank)}),t.forEach(i.edges(),function(u){a.setEdge(u.v,u.w,{},u.name)}),t.forEach(s,function(u,c){var l="layer"+c;a.setNode(l,{rank:"same"}),t.reduce(u,function(g,p){return a.setEdge(g,p,{style:"invis"}),p})}),a}return w0}var x0,GL;function S3(){return GL||(GL=1,x0="0.8.5"),x0}var A0,UL;function T3(){return UL||(UL=1,A0={graphlib:Jr(),layout:x3(),debug:A3(),util:{time:nr().time,notime:nr().notime},version:S3()}),A0}var E3=T3(),P3=ma(E3),C3=gC(),L3=ma(C3);const R3=Zt.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:3*16+8},ports:{groups:{in:{position:Zt.prototype._getStackedPosition({side:"left"})},out:{position:Zt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("polarity"),n=this.get("init_state"),r=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:Zt.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:t.out,labelled:!0}],Zt.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new li;for(let s=0;s<r;s++){const a=new R2({stateNo:s,id:"state"+s,isInit:s==n});a.attr("label/text",String(s)),a.resize(100,50),s==n&&a.attr("body/strokeWidth",3),s==i&&a.attr("body/class","current_state"),a.addTo(this.fsmgraph)}for(const[s,a]of this.transitions)for(const u of a){const c=new Uc({id:u.id,ctrlIn:u.ctrlIn,ctrlOut:u.ctrlOut});c.appendLabel({attrs:{text:{text:c.get("ctrlIn").toBin()+"/"+c.get("ctrlOut").toBin()}}}),c.source({id:"state"+s}),c.target({id:"state"+u.stateOut}),c.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(s,a)=>{const u=s.previous("current_state");this.fsmgraph.getCell("state"+u).removeAttr("body/class"),this.fsmgraph.getCell("state"+a).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(s,a)=>{const u=s.previous("next_trans");if(u){const c=this.fsmgraph.getCell(u);c.removeAttr("line/class"),c.removeAttr("line/targetMarker/class")}a&&this.fsmgraph.getCell(a).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const t=this.get("bits");this.transitions=new Map;var e=0;for(const r of this.get("trans_table"))this.transitions.has(r.state_in)||this.transitions.set(r.state_in,[]),this.transitions.get(r.state_in).push({id:"tr"+e,stateOut:r.state_out,ctrlIn:Ot.fromBin(r.ctrl_in,t.in),ctrlOut:Ot.fromBin(r.ctrl_out,t.out)}),e++;var n=this.get("current_state");n===void 0&&(n=this.get("init_state"),this.set("current_state",n)),this.last_clk=0},operation(t){const e=this.get("bits"),n=this.get("polarity"),r=()=>{const u=this.transitions.get(this.get("current_state"))||[];for(const c of u){const l=c.ctrlIn,g=l.xmask();if(t.in.or(g).eq(l.or(g)))return c}},i=()=>{const u=this.transitions.get(this.get("current_state"))||[],c=t.in.xmask(),l=[];for(const p of u){const y=p.ctrlIn,_=y.xmask().or(c);t.in.or(_).eq(y.or(_))&&l.push(p.ctrlOut)}const g=Ot.xes(e.out);if(l.length==0)return g;for(;l.length>1;){const p=l.pop(),y=l[0].xnor(p).or(g);l[0]=l[0].and(y).or(g.and(y.xmask()))}return l[0]},s=u=>n[u]?1:-1;if(t.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const u=this.last_clk;if(t.clk.get(0)==s("clock")&&u==-s("clock")){const c=r();this.set("current_state",c?c.stateOut:this.get("init_state"))}}this.last_clk=t.clk.get(0);const a=r();return a?this.set("next_trans",a.id):this.set("next_trans",void 0),{out:i()}},markup:Zt.prototype.markup.concat(Zt.prototype.markupZoom),_gateParams:Zt.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:Zt.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:Zt.prototype._presentationParams.concat(["current_state","next_trans"])}),O3=fn.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=se("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),n=se("<div>").appendTo(e),r=this.model.fsmgraph,i=new C2({el:n,model:r});return r.resetCells(r.getCells()),r.get("laid_out")||(Ho.layout(r,{dagre:P3,graphlib:L3}),r.set("laid_out",!0)),i.listenTo(r,"change:position",s=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",e,()=>{i.remove(),e.remove()}),!1}}),gs="#03c03c",Fi="#3c3c3c",k3=Kr.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:Fi,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:er.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),M3=pi.extend({_autoResizeBox:!1,confirmUpdate(t){fn.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const t=this.model.getOutput(),e={dp:{fill:t.get(7)===1?gs:Fi},a:{fill:t.get(6)===1?gs:Fi},b:{fill:t.get(5)===1?gs:Fi},c:{fill:t.get(4)===1?gs:Fi},d:{fill:t.get(3)===1?gs:Fi},e:{fill:t.get(2)===1?gs:Fi},f:{fill:t.get(1)===1?gs:Fi},g:{fill:t.get(0)===1?gs:Fi}};this._applyAttrs(e)}});var I3=Object.freeze({__proto__:null,Addition:VD,AdditionConst:pq,AdditionConstView:gq,AdditionView:zD,And:pD,AndReduce:CD,AndReduceView:LD,AndView:gD,Arith:_n,Arith11:Md,Arith21:Ws,ArithConst:js,BaseCompare:Wo,BaseCompareConst:Xo,BitExtend:Fd,BitExtendView:Vd,Box:Zt,BoxView:fn,BusGroup:Xq,BusGroupView:Yq,BusRegroup:zd,BusRegroupView:Gd,BusSlice:Wq,BusSliceView:jq,BusUngroup:Kq,BusUngroupView:Zq,Button:Y2,ButtonView:K2,Clock:sD,ClockView:aD,Compare:jo,CompareConst:Yo,Constant:rD,ConstantView:iD,Dff:uB,DffView:cB,Display7:k3,Display7View:M3,Division:WD,DivisionConst:_q,DivisionConstView:wq,DivisionView:jD,Eq:fq,EqCompare:Dd,EqCompareConst:Bd,EqConst:Bq,EqConstView:Fq,EqView:lq,FSM:R3,FSMView:O3,Gate:We,Gate11:Od,GateReduce:hs,GateSVG:gi,GateView:te,GateX1:$s,Ge:uq,GeConst:Dq,GeConstView:qq,GeView:cq,GenMux:ds,GenMuxView:Kc,Gt:aq,GtConst:Iq,GtConstView:Nq,GtView:oq,IO:Kr,IOView:pi,Input:Wc,InputView:Ld,Lamp:Q2,LampView:tD,Le:iq,LeConst:kq,LeConstView:Mq,LeView:sq,Lt:nq,LtConst:Rq,LtConstView:Oq,LtView:rq,Memory:fB,MemoryView:lB,Modulo:XD,ModuloConst:xq,ModuloConstView:Aq,ModuloView:YD,Multiplication:HD,MultiplicationConst:yq,MultiplicationConstView:bq,MultiplicationView:$D,Mux:nB,Mux1Hot:iB,Mux1HotView:sB,MuxSparse:aB,MuxSparseView:oB,MuxView:rB,Nand:yD,NandReduce:RD,NandReduceView:OD,NandView:bD,Ne:hq,NeConst:Vq,NeConstView:zq,NeView:dq,Negation:DD,NegationView:qD,Nor:vD,NorReduce:ED,NorReduceView:PD,NorView:mD,Not:fD,NotView:lD,NumBase:er,NumBaseView:fs,NumDisplay:eD,NumDisplayView:nD,NumEntry:Z2,NumEntryView:J2,OpConst:vi,Or:hD,OrReduce:SD,OrReduceView:TD,OrView:dD,Output:jc,OutputView:Rd,Power:KD,PowerConst:Sq,PowerConstView:Tq,PowerView:ZD,Repeater:uD,RepeaterView:cD,Shift:Nd,ShiftConst:qd,ShiftLeft:JD,ShiftLeftConst:Eq,ShiftLeftConstView:Pq,ShiftLeftView:QD,ShiftRight:tq,ShiftRightConst:Cq,ShiftRightConstView:Lq,ShiftRightView:eq,SignExtend:Hq,SignExtendView:$q,Subcircuit:Qq,SubcircuitView:tB,Subtraction:GD,SubtractionConst:vq,SubtractionConstView:mq,SubtractionView:UD,UnaryPlus:BD,UnaryPlusView:FD,Wire:j2,WireView:X2,Xnor:xD,XnorReduce:ID,XnorReduceView:ND,XnorView:AD,Xor:_D,XorReduce:kD,XorReduceView:MD,XorView:wD,ZeroExtend:Gq,ZeroExtendView:Uq,portGroupAttrs:$c}),S0,HL;function N3(){if(HL)return S0;HL=1;var t=function(n,r){return n<r};function e(n){if(!(this instanceof e))return new e(n);this.array=[],this.size=0,this.compare=n||t}return e.prototype.clone=function(){var n=new e(this.compare);return n.size=this.size,n.array=this.array.slice(0,this.size),n},e.prototype.add=function(n){var r=this.size;this.array[this.size]=n,this.size+=1;for(var i,s;r>0&&(i=r-1>>1,s=this.array[i],!!this.compare(n,s));)this.array[r]=s,r=i;this.array[r]=n},e.prototype.heapify=function(n){this.array=n,this.size=n.length;var r;for(r=this.size>>1;r>=0;r--)this._percolateDown(r)},e.prototype._percolateUp=function(n,r){for(var i=this.array[n],s,a;n>0&&(s=n-1>>1,a=this.array[s],!(!r&&!this.compare(i,a)));)this.array[n]=a,n=s;this.array[n]=i},e.prototype._percolateDown=function(n){for(var r=this.size,i=this.size>>>1,s=this.array[n],a,u,c;n<i&&(a=(n<<1)+1,u=a+1,c=this.array[a],u<r&&this.compare(this.array[u],c)&&(a=u,c=this.array[u]),!!this.compare(c,s));)this.array[n]=c,n=a;this.array[n]=s},e.prototype._removeAt=function(n){if(!(n>this.size-1||n<0))return this._percolateUp(n,!0),this.poll()},e.prototype.remove=function(n){for(var r=0;r<this.size;r++)if(!this.compare(this.array[r],n)&&!this.compare(n,this.array[r]))return this._removeAt(r),!0;return!1},e.prototype.removeOne=function(n){if(typeof n=="function"){for(var r=0;r<this.size;r++)if(n(this.array[r]))return this._removeAt(r)}},e.prototype.removeMany=function(n,r){if(typeof n!="function"||this.size<1)return[];r=r?Math.min(r,this.size):this.size;for(var i=0,s=new Array(r),a=0,u=new Array(this.size);i<r&&!this.isEmpty();){var c=this.poll();n(c)?s[i++]=c:u[a++]=c}s.length=i;for(var l=0;l<a;)this.add(u[l++]);return s},e.prototype.peek=function(){if(this.size!=0)return this.array[0]},e.prototype.poll=function(){if(this.size!=0){var n=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,n}},e.prototype.replaceTop=function(n){if(this.size!=0){var r=this.array[0];return this.array[0]=n,this._percolateDown(0),r}},e.prototype.trim=function(){this.array=this.array.slice(0,this.size)},e.prototype.isEmpty=function(){return this.size===0},e.prototype.forEach=function(n){if(!(this.isEmpty()||typeof n!="function"))for(var r=0,i=this.clone();!i.isEmpty();)n(i.poll(),r++)},e.prototype.kSmallest=function(n){if(this.size==0)return[];n=Math.min(this.size,n);var r=new e(this.compare);const i=Math.min((n>0?Math.pow(2,n-1):0)+1,this.size);r.size=i,r.array=this.array.slice(0,i);for(var s=new Array(n),a=0;a<n;a++)s[a]=r.poll();return s},S0=e,S0}var D3=N3(),q3=ma(D3);const B3=new Set(["Subcircuit","Input","Output","Button","Lamp","NumEntry","NumDisplay"]);class F3{constructor(e,n){this.source=e,this.target=n}}class V3{constructor(e,n,r,i,s,a){this.id=e,this.graph=n,this.special=B3.has(r.type),this.isSubcircuit=r.type=="Subcircuit",this.isOutput=r.type=="Output";const u=I3[r.type].prototype;this.operation=u.operation;for(const c of u._operationHelpers)this[c]=u[c];this.links=new Set,this._links_to=Object.create(null),this._params=r,this._params.inputSignals=Object.create(null),this._params.outputSignals=Object.create(null),this._presentationParams=u._presentationParams,this._presentationParamChanged=Object.create(null),this._monitors=Object.create(null),this._ports=Object.create(null);for(const c of i)this._ports[c.id]=c,this._monitors[c.id]=new Set,c.dir=="in"&&(this._params.inputSignals[c.id]=Ot.fromClonable(s[c.id])),c.dir=="out"&&(this._params.outputSignals[c.id]=Ot.fromClonable(a[c.id]),this._links_to[c.id]=new Set);u.prepare.call(this)}get(e){return this._params[e]}set(e,n){this._params[e]=n,this._presentationParams.includes(e)&&iu._markPresentationParam(this,e)}addLinkTo(e,n){this._links_to[e].add(n)}removeLinkTo(e,n){this._links_to[e].delete(n)}addLink(e){this.links.add(e)}removeLink(e){this.links.delete(e)}targets(e){return this._links_to[e]}getPort(e){return this._ports[e]}getPorts(){return Object.values(this._ports)}trigger(e,...n){postMessage({type:"gateTrigger",args:[this.graph.id,this.id,e,n]})}monitor(e,n){this._monitors[e].add(n)}unmonitor(e,n){this._monitors[e].delete(Number(n))}getMonitors(e){return this._monitors[e]}}class z3{constructor(e){this.id=e,this._gates={},this._links={},this._observed=!1,this._subcircuit=null}addLink(e,n,r){this._links[e]=new F3(n,r),this._gates[n.id].addLinkTo(n.port,r),this._gates[n.id].addLink(e),this._gates[r.id].addLink(e)}addGate(e,n,r,i,s){this._gates[e]=new V3(e,this,n,r,i,s)}removeLink(e){const n=this._links[e];this._gates[n.source.id].removeLinkTo(n.source.port,n.target),this._gates[n.source.id].removeLink(e),this._gates[n.target.id].removeLink(e),delete this._links[e]}removeGate(e){for(const n of this._gates[e].links)this.removeLink(n);this._gates[e].graph=null,delete this._gates[e]}getGate(e){return this._gates[e]}getLink(e){return this._links[e]}getGates(){return Object.values(this._gates)}observe(){this._observed=!0}unobserve(){this._observed=!1}get observed(){return this._observed}setSubcircuit(e){this._subcircuit=e}get subcircuit(){return this._subcircuit}}class G3{constructor(){this._interval=10,this._graphs=Object.create(null),this._monitors=Object.create(null),this._monitorChecks=Object.create(null),this._alarms=Object.create(null),this._alarmQueue=new Map,this._queue=new Map,this._pq=new q3,this._toUpdate=new Map,this._toUpdateParam=new Map,this._tick=0,this._sender=setInterval(()=>{this._sendUpdates()},25),this._updater=null}interval(e){this._interval=e}updateGates(e,n){const r=this._updateGates();n&&this._sendUpdates(),this._postMonitors(),this._sendAck(e,r)}_updateGates(){if(this._pq.peek()==this._tick)return this._updateGatesNext();{const e=this._tick|0;return this._tick=e+1|0,0}}updateGatesNext(e,n){const r=this._updateGatesNext();n&&this._sendUpdates(),this._postMonitors(),this._sendAck(e,r)}_updateGatesNext(){const e=this._pq.poll()|0;console.assert(e>=this._tick),this._tick=e;const n=this._queue.get(e);let r=0;for(;n.size;){const[i,s]=n.entries().next().value;if(n.delete(i),i.special||!i.graph)continue;const u=i.operation(s);"_clock_hack"in u&&(delete u._clock_hack,this._enqueue(i)),this._setGateOutputSignals(i,u),r++}return this._queue.delete(e),this._tick=e+1|0,r}ping(e,n){n&&this._sendUpdates(),this._sendAck(e)}start(){this._stop(),this._updater=setInterval(()=>{this._updateGates(),this._postMonitors()},this._interval)}startFast(){this._stop(),this._updater=setInterval(()=>{const e=Date.now();for(;Date.now()-e<10&&this._hasPendingEvents()&&this._updater;)this._updateGatesNext(),this._postMonitors()},10)}stop(e,n){this._stop(),n&&this._sendUpdates(),this._sendAck(e)}_stop(){this._updater&&(clearInterval(this._updater),this._updater=null)}addGraph(e){console.assert(!(e in this._graphs)),this._graphs[e]=new z3(e)}addLink(e,n,r,i){const s=this._graphs[e];s.addLink(n,r,i);const a=s.getGate(r.id),u=s.getGate(i.id),c=a.get("outputSignals")[r.port];this._setGateInputSignal(u,i.port,c)}addGate(e,n,r,i,s,a){const u=this._graphs[e];u.addGate(n,r,i,s,a),this._enqueue(u.getGate(n))}addSubcircuit(e,n,r,i){const a=this._graphs[e].getGate(n),u=this._graphs[r];a.set("subgraph",u),a.set("circuitIOmap",i),u.setSubcircuit(a);for(const[c,l]of Object.entries(i)){const g=u.getGate(l);a.getPort(c).dir=="in"&&this._setGateOutputSignal(g,"out",a.get("inputSignals")[c]),a.getPort(c).dir=="out"&&this._setGateOutputSignal(a,c,g.get("inputSignals").in)}}removeLink(e,n){const r=this._graphs[e],i=r.getLink(n);r.removeLink(n);const s=r.getGate(i.target.id),a=Ot.xes(s.getPort(i.target.port).bits);this._setGateInputSignal(s,i.target.port,a)}removeGate(e,n){this._graphs[e].removeGate(n)}observeGraph(e){const n=this._graphs[e];n.observe();for(const r of n.getGates())for(const i of r.getPorts())i.dir=="out"&&this._markUpdate(r,i.id)}unobserveGraph(e){this._graphs[e].unobserve()}changeInput(e,n,r){const i=this._graphs[e].getGate(n);this._setGateOutputSignals(i,{out:Ot.fromClonable(r)})}changeParam(e,n,r,i){this._graphs[e].getGate(n).set(r,i)}manualMemChange(e,n,r,i){const s=this._graphs[e].getGate(n);s.memdata.set(r,Ot.fromClonable(i)),this._enqueue(s)}monitor(e,n,r,i,{triggerValues:s,stopOnTrigger:a,oneShot:u,synchronous:c}){if(s!=null)for(const g of s.keys())s[g]=Ot.fromClonable(s[g]);const l=this._graphs[e].getGate(n);this._monitors[i]={gate:l,port:r,triggerValues:s,stopOnTrigger:a,oneShot:u,synchronous:c},l.monitor(r,i),s==null&&postMessage({type:"monitorValue",args:[i,this._tick,l.get("outputSignals")[r]]})}unmonitor(e){const n=this._monitors[e];n!=null&&(n.gate.unmonitor(n.port,e),delete this._monitors[e],delete this._monitorChecks[e])}alarm(e,n,{stopOnAlarm:r,synchronous:i}){e<=this._tick||(this._alarms[n]={tick:e,stopOnAlarm:r,synchronous:i},this._alarmQueue.has(e)||this._alarmQueue.set(e,new Set),this._alarmQueue.get(e).add(n),this._pq.add(e-1),this._queue.has(e-1)||this._queue.set(e-1,new Map))}unalarm(e){const n=this._alarms[e];if(n==null)return;const r=n.tick;this._alarmQueue.get(r).delete(e),this._alarmQueue.get(r).size==0&&this._alarmQueue.delete(r),delete this._alarms[e]}_enqueue(e){const n=this._tick+e.get("propagation")|0;(()=>{const i=this._queue.get(n);if(i!==void 0)return i;const s=new Map;return this._queue.set(n,s),this._pq.add(n),s})().set(e,Object.assign({},e.get("inputSignals")))}_postMonitors(){for(const[e,n]of Object.entries(this._monitorChecks)){const{triggerValues:r,stopOnTrigger:i,oneShot:s,synchronous:a}=this._monitors[e];let u=!0;r&&(u=r.some(c=>n.eq(c))),u&&(s&&this.unmonitor(e),a&&this._sendUpdates(),postMessage({type:"monitorValue",args:[e,this._tick,n,i,s]}),i&&this._stop())}if(this._monitorChecks=Object.create(null),this._alarmQueue.get(this._tick)){for(const e of this._alarmQueue.get(this._tick)){const{stopOnAlarm:n,synchronous:r}=this._alarms[e];r&&this._sendUpdates(),delete this._alarms[e],postMessage({type:"alarmReached",args:[e,this._tick,n]}),n&&this._stop()}this._alarmQueue.delete(this._tick)}}_setGateOutputSignals(e,n){for(const[r,i]of Object.entries(n))this._setGateOutputSignal(e,r,i)}_setGateOutputSignal(e,n,r){const i=e.get("outputSignals"),s=i[n];if(r.eq(s))return;i[n]=r,this._markUpdate(e,n);for(const u of e.targets(n)){const c=e.graph.getGate(u.id);this._setGateInputSignal(c,u.port,r)}const a=e.getMonitors(n);for(const u of a)this._monitorChecks[u]=r}_setGateInputSignal(e,n,r){const i=e.get("inputSignals"),s=i[n];if(!r.eq(s))if(i[n]=r,e.isSubcircuit){const a=e.get("subgraph");if(!a)return;const u=e.get("circuitIOmap"),c=a.getGate(u[n]);if(!c)return;this._setGateOutputSignals(c,{out:r})}else if(e.isOutput){const a=e.graph.subcircuit;if(!a)return;const u=e.get("net");this._setGateOutputSignal(a,u,r)}else this._enqueue(e)}_markUpdate(e,n){if(!e.graph.observed)return;(()=>{const i=this._toUpdate.get(e);if(i!==void 0)return i;const s=new Set;return this._toUpdate.set(e,s),s})().add(n)}_markPresentationParam(e,n){if(!e.graph.observed)return;(()=>{const i=this._toUpdateParam.get(e);if(i!==void 0)return i;const s=new Set;return this._toUpdateParam.set(e,s),s})().add(n)}_sendUpdates(){const e=[];for(const[r,i]of this._toUpdate){const s=r.get("outputSignals"),a={};for(const u of i)a[u]=s[u];e.push([r.graph.id,r.id,a])}this._toUpdate=new Map;const n=this._hasPendingEvents();if(postMessage({type:"update",args:[this._tick,n,e]}),this._toUpdateParam.size>0){for(const[r,i]of this._toUpdateParam)for(const s of i)postMessage({type:"gateSet",args:[r.graph.id,r.id,s,r.get(s)]});this._toUpdateParam=new Map}}_sendAck(e,n){postMessage({type:"ack",args:[e,n]})}_hasPendingEvents(){return this._queue.size>0}}const iu=new G3;self.onmessage=t=>{const e=t.data;"arg"in e?iu[e.type](e.arg):"args"in e?iu[e.type].apply(iu,e.args):iu[e.type]()}})();
