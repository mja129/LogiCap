const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-DeP16Zsy.js","./Icon-DtFA2OGd.js","./DrawerController-B0dpRfz_.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var $Z=Object.defineProperty;var zC=e=>{throw TypeError(e)};var UZ=(e,t,r)=>t in e?$Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var VC=(e,t,r)=>UZ(e,typeof t!="symbol"?t+"":t,r),Hm=(e,t,r)=>t.has(e)||zC("Cannot "+r);var ja=(e,t,r)=>(Hm(e,t,"read from private field"),r?r.call(e):t.get(e)),$f=(e,t,r)=>t.has(e)?zC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Wm=(e,t,r,n)=>(Hm(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),GC=(e,t,r)=>(Hm(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const $C=!1;var zh=Array.isArray,jZ=Array.prototype.indexOf,c2=Array.from,f7=Object.defineProperty,eu=Object.getOwnPropertyDescriptor,h7=Object.getOwnPropertyDescriptors,HZ=Object.prototype,WZ=Array.prototype,l2=Object.getPrototypeOf,UC=Object.isExtensible;function Uf(e){return typeof e=="function"}const Bs=()=>{};function XZ(e){return e()}function wh(e){for(var t=0;t<e.length;t++)e[t]()}function jC(e,t,r=!1){return e===void 0?r?t():t:e}const zo=2,d7=4,gv=8,f2=16,su=32,Yl=64,Vp=128,po=256,Gp=512,Ss=1024,ou=2048,Oc=4096,tu=8192,mv=16384,YZ=32768,yv=65536,p7=1<<17,KZ=1<<19,v7=1<<20,bE=1<<21,ba=Symbol("$state"),g7=Symbol("legacy props"),JZ=Symbol("");function m7(e){return e===this.v}function _v(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ZZ(e,t){return e!==t}function h2(e){return!_v(e,this.v)}function QZ(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function eQ(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function tQ(e){throw new Error("https://svelte.dev/e/effect_orphan")}function rQ(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function y7(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function nQ(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function iQ(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function sQ(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function oQ(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Kl=!1,aQ=!1;function uQ(){Kl=!0}const d2=1,p2=2,_7=4,cQ=8,lQ=16,fQ=1,hQ=2,b7=4,dQ=8,pQ=16,w7=1,vQ=2,Ki=Symbol(),gQ="http://www.w3.org/1999/xhtml";function bv(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function Jl(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let kr=null;function HC(e){kr=e}function gr(e){return x7().get(e)}function Hr(e,t){return x7().set(e,t),t}function nr(e,t=!1,r){var n=kr={p:kr,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Kl&&!t&&(kr.l={s:null,u:null,r1:[],r2:Dl(!1)}),Sv(()=>{n.d=!0})}function ir(e){const t=kr;if(t!==null){e!==void 0&&(t.x=e);const o=t.e;if(o!==null){var r=En,n=an;t.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];zu(s.effect),Ea(s.reaction),ts(s.fn)}}finally{zu(r),Ea(n)}}kr=t.p,t.m=!0}return e||{}}function Zl(){return!Kl||kr!==null&&kr.l===null}function x7(e){return kr===null&&Jl(),kr.c??(kr.c=new Map(mQ(kr)||void 0))}function mQ(e){let t=e.p;for(;t!==null;){const r=t.c;if(r!==null)return r;t=t.p}return null}function Ds(e,t){if(typeof e!="object"||e===null||ba in e)return e;const r=l2(e);if(r!==HZ&&r!==WZ)return e;var n=new Map,i=zh(e),s=bn(0),o=an,a=u=>{var c=an;Ea(o);var f;return f=u(),Ea(c),f};return i&&n.set("length",bn(e.length)),new Proxy(e,{defineProperty(u,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&iQ();var h=n.get(c);return h===void 0?(h=a(()=>bn(f.value)),n.set(c,h)):pe(h,a(()=>Ds(f.value))),!0},deleteProperty(u,c){var f=n.get(c);if(f===void 0)c in u&&n.set(c,a(()=>bn(Ki)));else{if(i&&typeof c=="string"){var h=n.get("length"),v=Number(c);Number.isInteger(v)&&v<h.v&&pe(h,v)}pe(f,Ki),WC(s)}return!0},get(u,c,f){var m;if(c===ba)return e;var h=n.get(c),v=c in u;if(h===void 0&&(!v||(m=eu(u,c))!=null&&m.writable)&&(h=a(()=>bn(Ds(v?u[c]:Ki))),n.set(c,h)),h!==void 0){var y=A(h);return y===Ki?void 0:y}return Reflect.get(u,c,f)},getOwnPropertyDescriptor(u,c){var f=Reflect.getOwnPropertyDescriptor(u,c);if(f&&"value"in f){var h=n.get(c);h&&(f.value=A(h))}else if(f===void 0){var v=n.get(c),y=v==null?void 0:v.v;if(v!==void 0&&y!==Ki)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return f},has(u,c){var y;if(c===ba)return!0;var f=n.get(c),h=f!==void 0&&f.v!==Ki||Reflect.has(u,c);if(f!==void 0||En!==null&&(!h||(y=eu(u,c))!=null&&y.writable)){f===void 0&&(f=a(()=>bn(h?Ds(u[c]):Ki)),n.set(c,f));var v=A(f);if(v===Ki)return!1}return h},set(u,c,f,h){var T;var v=n.get(c),y=c in u;if(i&&c==="length")for(var m=f;m<v.v;m+=1){var _=n.get(m+"");_!==void 0?pe(_,Ki):m in u&&(_=a(()=>bn(Ki)),n.set(m+"",_))}v===void 0?(!y||(T=eu(u,c))!=null&&T.writable)&&(v=a(()=>bn(void 0)),pe(v,a(()=>Ds(f))),n.set(c,v)):(y=v.v!==Ki,pe(v,a(()=>Ds(f))));var x=Reflect.getOwnPropertyDescriptor(u,c);if(x!=null&&x.set&&x.set.call(h,f),!y){if(i&&typeof c=="string"){var S=n.get("length"),P=Number(c);Number.isInteger(P)&&P>=S.v&&pe(S,P+1)}WC(s)}return!0},ownKeys(u){A(s);var c=Reflect.ownKeys(u).filter(v=>{var y=n.get(v);return y===void 0||y.v!==Ki});for(var[f,h]of n)h.v!==Ki&&!(f in u)&&c.push(f);return c},setPrototypeOf(){sQ()}})}function WC(e,t=1){pe(e,e.v+t)}function XC(e){try{if(e!==null&&typeof e=="object"&&ba in e)return e[ba]}catch{}return e}function yQ(e,t){return Object.is(XC(e),XC(t))}const xh=new Map;function Dl(e,t){var r={f:0,v:e,reactions:null,equals:m7,rv:0,wv:0};return r}function bn(e,t){const r=Dl(e);return q7(r),r}function Me(e,t=!1){var n;const r=Dl(e);return t||(r.equals=h2),Kl&&kr!==null&&kr.l!==null&&((n=kr.l).s??(n.s=[])).push(r),r}function dl(e,t){return pe(e,Tt(()=>A(e))),t}function pe(e,t,r=!1){an!==null&&!ga&&Zl()&&(an.f&(zo|f2))!==0&&!(is!=null&&is.includes(e))&&oQ();let n=r?Ds(t):t;return Sh(e,n)}function Sh(e,t){if(!e.equals(t)){var r=e.v;Gh?xh.set(e,t):xh.set(e,r),e.v=t,e.wv=F7(),S7(e,ou),Zl()&&En!==null&&(En.f&Ss)!==0&&(En.f&(su|Yl))===0&&(no===null?IQ([e]):no.push(e))}return t}function YC(e,t=1){var r=A(e),n=t===1?r++:r--;return pe(e,r),n}function S7(e,t){var r=e.reactions;if(r!==null)for(var n=Zl(),i=r.length,s=0;s<i;s++){var o=r[s],a=o.f;(a&ou)===0&&(!n&&o===En||(Vo(o,t),(a&(Ss|po))!==0&&((a&zo)!==0?S7(o,Oc):Pv(o))))}}let _Q=!1;var Sl,E7,A7,T7;function bQ(){if(Sl===void 0){Sl=window,E7=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;A7=eu(t,"firstChild").get,T7=eu(t,"nextSibling").get,UC(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),UC(r)&&(r.__t=void 0)}}function wv(e=""){return document.createTextNode(e)}function Ya(e){return A7.call(e)}function xv(e){return T7.call(e)}function gt(e,t){return Ya(e)}function _t(e,t){{var r=Ya(e);return r instanceof Comment&&r.data===""?xv(r):r}}function at(e,t=1,r=!1){let n=e;for(;t--;)n=xv(n);return n}function wQ(e){e.textContent=""}function Fl(e){var t=zo|ou,r=an!==null&&(an.f&zo)!==0?an:null;return En===null||r!==null&&(r.f&po)!==0?t|=po:En.f|=v7,{ctx:kr,deps:null,effects:null,equals:m7,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??En}}function qn(e){const t=Fl(e);return q7(t),t}function pn(e){const t=Fl(e);return t.equals=h2,t}function P7(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Bu(t[r])}}function xQ(e){for(var t=e.parent;t!==null;){if((t.f&zo)===0)return t;t=t.parent}return null}function SQ(e){var t,r=En;zu(xQ(e));try{P7(e),t=z7(e)}finally{zu(r)}return t}function C7(e){var t=SQ(e),r=(Lu||(e.f&po)!==0)&&e.deps!==null?Oc:Ss;Vo(e,r),e.equals(t)||(e.v=t,e.wv=F7())}function O7(e){En===null&&an===null&&tQ(),an!==null&&(an.f&po)!==0&&En===null&&eQ(),Gh&&QZ()}function EQ(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ql(e,t,r,n=!0){var i=En,s={ctx:kr,deps:null,nodes_start:null,nodes_end:null,f:e|ou,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{Tv(s),s.f|=YZ}catch(u){throw Bu(s),u}else t!==null&&Pv(s);var o=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(v7|Vp))===0;if(!o&&n&&(i!==null&&EQ(s,i),an!==null&&(an.f&zo)!==0)){var a=an;(a.effects??(a.effects=[])).push(s)}return s}function Sv(e){const t=Ql(gv,null,!1);return Vo(t,Ss),t.teardown=e,t}function Fu(e){O7();var t=En!==null&&(En.f&su)!==0&&kr!==null&&!kr.m;if(t){var r=kr;(r.e??(r.e=[])).push({fn:e,effect:En,reaction:an})}else{var n=ts(e);return n}}function AQ(e){return O7(),Ic(e)}function TQ(e){const t=Ql(Yl,e,!0);return(r={})=>new Promise(n=>{r.outro?Bl(t,()=>{Bu(t),n(void 0)}):(Bu(t),n(void 0))})}function ts(e){return Ql(d7,e,!1)}function Fe(e,t){var r=kr,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=Ic(()=>{e(),!n.ran&&(n.ran=!0,pe(r.l.r2,!0),Tt(t))})}function li(){var e=kr;Ic(()=>{if(A(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&Ss)!==0&&Vo(r,Oc),ef(r)&&Tv(r),t.ran=!1}e.l.r2.v=!1}})}function Ic(e){return Ql(gv,e,!0)}function It(e,t=[],r=Fl){const n=t.map(r);return Vh(()=>e(...n.map(A)))}function Vh(e,t=0){return Ql(gv|f2|t,e,!0)}function Sc(e,t=!0){return Ql(gv|su,e,!0,t)}function I7(e){var t=e.teardown;if(t!==null){const r=Gh,n=an;JC(!0),Ea(null);try{t.call(null)}finally{JC(r),Ea(n)}}}function R7(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&Yl)!==0?r.parent=null:Bu(r,t),r=n}}function PQ(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&su)===0&&Bu(t),t=r}}function Bu(e,t=!0){var r=!1;if((t||(e.f&KZ)!==0)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var s=n===i?null:xv(n);n.remove(),n=s}r=!0}R7(e,t&&!r),Wp(e,0),Vo(e,mv);var o=e.transitions;if(o!==null)for(const u of o)u.stop();I7(e);var a=e.parent;a!==null&&a.first!==null&&k7(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function k7(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Bl(e,t){var r=[];v2(e,r,!0),M7(r,()=>{Bu(e),t&&t()})}function M7(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function v2(e,t,r){if((e.f&tu)===0){if(e.f^=tu,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&yv)!==0||(n.f&su)!==0;v2(n,t,s?r:!1),n=i}}}function $p(e){L7(e,!0)}function L7(e,t){if((e.f&tu)!==0){e.f^=tu,(e.f&Ss)===0&&(e.f^=Ss),ef(e)&&(Vo(e,ou),Pv(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&yv)!==0||(r.f&su)!==0;L7(r,i?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let Eh=[],wE=[];function N7(){var e=Eh;Eh=[],wh(e)}function CQ(){var e=wE;wE=[],wh(e)}function Ev(e){Eh.length===0&&queueMicrotask(N7),Eh.push(e)}function KC(){Eh.length>0&&N7(),wE.length>0&&CQ()}let kp=!1,Up=!1,jp=null,yc=!1,Gh=!1;function JC(e){Gh=e}let ph=[];let an=null,ga=!1;function Ea(e){an=e}let En=null;function zu(e){En=e}let is=null;function OQ(e){is=e}function q7(e){an!==null&&an.f&bE&&(is===null?OQ([e]):is.push(e))}let Qi=null,Ls=0,no=null;function IQ(e){no=e}let D7=1,Hp=0,Lu=!1,Ru=null;function F7(){return++D7}function ef(e){var h;var t=e.f;if((t&ou)!==0)return!0;if((t&Oc)!==0){var r=e.deps,n=(t&po)!==0;if(r!==null){var i,s,o=(t&Gp)!==0,a=n&&En!==null&&!Lu,u=r.length;if(o||a){var c=e,f=c.parent;for(i=0;i<u;i++)s=r[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=Gp),a&&f!==null&&(f.f&po)===0&&(c.f^=po)}for(i=0;i<u;i++)if(s=r[i],ef(s)&&C7(s),s.wv>e.wv)return!0}(!n||En!==null&&!Lu)&&Vo(e,Ss)}return!1}function RQ(e,t){for(var r=t;r!==null;){if((r.f&Vp)!==0)try{r.fn(e);return}catch{r.f^=Vp}r=r.parent}throw kp=!1,e}function kQ(e){return(e.f&mv)===0&&(e.parent===null||(e.parent.f&Vp)===0)}function Av(e,t,r,n){if(kp){if(r===null&&(kp=!1),kQ(t))throw e;return}r!==null&&(kp=!0);{RQ(e,t);return}}function B7(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];is!=null&&is.includes(e)||((s.f&zo)!==0?B7(s,t,!1):t===s&&(r?Vo(s,ou):(s.f&Ss)!==0&&Vo(s,Oc),Pv(s)))}}function z7(e){var y;var t=Qi,r=Ls,n=no,i=an,s=Lu,o=is,a=kr,u=ga,c=e.f;Qi=null,Ls=0,no=null,Lu=(c&po)!==0&&(ga||!yc||an===null),an=(c&(su|Yl))===0?e:null,is=null,HC(e.ctx),ga=!1,Hp++,e.f|=bE;try{var f=(0,e.fn)(),h=e.deps;if(Qi!==null){var v;if(Wp(e,Ls),h!==null&&Ls>0)for(h.length=Ls+Qi.length,v=0;v<Qi.length;v++)h[Ls+v]=Qi[v];else e.deps=h=Qi;if(!Lu)for(v=Ls;v<h.length;v++)((y=h[v]).reactions??(y.reactions=[])).push(e)}else h!==null&&Ls<h.length&&(Wp(e,Ls),h.length=Ls);if(Zl()&&no!==null&&!ga&&h!==null&&(e.f&(zo|Oc|ou))===0)for(v=0;v<no.length;v++)B7(no[v],e);return i!==null&&(Hp++,no!==null&&(n===null?n=no:n.push(...no))),f}finally{Qi=t,Ls=r,no=n,an=i,Lu=s,is=o,HC(a),ga=u,e.f^=bE}}function MQ(e,t){let r=t.reactions;if(r!==null){var n=jZ.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&zo)!==0&&(Qi===null||!Qi.includes(t))&&(Vo(t,Oc),(t.f&(po|Gp))===0&&(t.f^=Gp),P7(t),Wp(t,0))}function Wp(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)MQ(e,r[n])}function Tv(e){var t=e.f;if((t&mv)===0){Vo(e,Ss);var r=En,n=kr,i=yc;En=e,yc=!0;try{(t&f2)!==0?PQ(e):R7(e),I7(e);var s=z7(e);e.teardown=typeof s=="function"?s:null,e.wv=D7;var o=e.deps,a;$C&&aQ&&e.f&ou}catch(u){Av(u,e,r,n||e.ctx)}finally{yc=i,En=r}}}function LQ(){try{rQ()}catch(e){if(jp!==null)Av(e,jp,null);else throw e}}function V7(){var e=yc;try{var t=0;for(yc=!0;ph.length>0;){t++>1e3&&LQ();var r=ph,n=r.length;ph=[];for(var i=0;i<n;i++){var s=qQ(r[i]);NQ(s)}}}finally{Up=!1,yc=e,jp=null,xh.clear()}}function NQ(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(mv|tu))===0)try{ef(n)&&(Tv(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?k7(n):n.fn=null))}catch(i){Av(i,n,null,n.ctx)}}}function Pv(e){Up||(Up=!0,queueMicrotask(V7));for(var t=jp=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(Yl|su))!==0){if((r&Ss)===0)return;t.f^=Ss}}ph.push(t)}function qQ(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&(su|Yl))!==0,s=i&&(n&Ss)!==0;if(!s&&(n&tu)===0){if((n&d7)!==0)t.push(r);else if(i)r.f^=Ss;else{var o=an;try{an=r,ef(r)&&Tv(r)}catch(c){Av(c,r,null,r.ctx)}finally{an=o}}var a=r.first;if(a!==null){r=a;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return t}function DQ(e){var t;for(KC();ph.length>0;)Up=!0,V7(),KC();return t}async function ih(){await Promise.resolve(),DQ()}function A(e){var t=e.f,r=(t&zo)!==0;if(Ru!==null&&Ru.add(e),an!==null&&!ga){if(!(is!=null&&is.includes(e))){var n=an.deps;e.rv<Hp&&(e.rv=Hp,Qi===null&&n!==null&&n[Ls]===e?Ls++:Qi===null?Qi=[e]:(!Lu||!Qi.includes(e))&&Qi.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&po)===0&&(i.f^=po)}return r&&(i=e,ef(i)&&C7(i)),Gh&&xh.has(e)?xh.get(e):e.v}function FQ(e){var t=Ru;Ru=new Set;var r=Ru,n;try{if(Tt(e),t!==null)for(n of Ru)t.add(n)}finally{Ru=t}return r}function $be(e){var t=FQ(()=>Tt(e));for(var r of t)if((r.f&p7)!==0)for(const n of r.deps||[])(n.f&zo)===0&&Sh(n,n.v);else Sh(r,r.v)}function Tt(e){var t=ga;try{return ga=!0,e()}finally{ga=t}}const BQ=-7169;function Vo(e,t){e.f=e.f&BQ|t}function zQ(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return r}function qt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ba in e)xE(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ba in r&&xE(r)}}}function xE(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{xE(e[n],t)}catch{}const r=l2(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=h7(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}function VQ(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const GQ=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function $Q(e){return GQ.includes(e)}const UQ={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function jQ(e){return e=e.toLowerCase(),UQ[e]??e}const HQ=["touchstart","touchmove"];function WQ(e){return HQ.includes(e)}function XQ(e,t){if(t){const r=document.body;e.autofocus=!0,Ev(()=>{document.activeElement===r&&e.focus()})}}let ZC=!1;function YQ(){ZC||(ZC=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function G7(e){var t=an,r=En;Ea(null),zu(null);try{return e()}finally{Ea(t),zu(r)}}function g2(e,t,r,n=r){e.addEventListener(t,()=>G7(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),YQ()}const $7=new Set,SE=new Set;function U7(e,t,r,n={}){function i(s){if(n.capture||sh.call(t,s),!s.cancelBubble)return G7(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ev(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function ar(e,t,r,n,i){var s={capture:n,passive:i},o=U7(e,t,r,s);(t===document.body||t===window||t===document)&&Sv(()=>{t.removeEventListener(e,o,s)})}function $u(e){for(var t=0;t<e.length;t++)$7.add(e[t]);for(var r of SE)r(e)}function sh(e){var P;var t=this,r=t.ownerDocument,n=e.type,i=((P=e.composedPath)==null?void 0:P.call(e))||[],s=i[0]||e.target,o=0,a=e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(o=u)}if(s=i[o]||e.target,s!==t){f7(e,"currentTarget",{configurable:!0,get(){return s||r}});var f=an,h=En;Ea(null),zu(null);try{for(var v,y=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+n];if(_!=null&&(!s.disabled||e.target===s))if(zh(_)){var[x,...S]=_;x.apply(s,[e,...S])}else _.call(s,e)}catch(T){v?y.push(T):v=T}if(e.cancelBubble||m===t||m===null)break;s=m}if(v){for(let T of y)queueMicrotask(()=>{throw T});throw v}}finally{e.__root=t,delete e.currentTarget,Ea(f),zu(h)}}}function j7(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function zl(e,t){var r=En;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function Gt(e,t){var r=(t&w7)!==0,n=(t&vQ)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=j7(s?e:"<!>"+e),r||(i=Ya(i)));var o=n||E7?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Ya(o),u=o.lastChild;zl(a,u)}else zl(o,o);return o}}function vn(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&w7)!==0,s=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var a=j7(s),u=Ya(a);if(i)for(o=document.createDocumentFragment();Ya(u);)o.appendChild(Ya(u));else o=Ya(u)}var c=o.cloneNode(!0);if(i){var f=Ya(c),h=c.lastChild;zl(f,h)}else zl(c,c);return c}}function QC(e=""){{var t=wv(e+"");return zl(t,t),t}}function Ut(){var e=document.createDocumentFragment(),t=document.createComment(""),r=wv();return e.append(t,r),zl(t,r),e}function De(e,t){e!==null&&e.before(t)}function Bi(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function KQ(e,t){return JQ(e,t)}const pl=new Map;function JQ(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:o=!0}){bQ();var a=new Set,u=h=>{for(var v=0;v<h.length;v++){var y=h[v];if(!a.has(y)){a.add(y);var m=WQ(y);t.addEventListener(y,sh,{passive:m});var _=pl.get(y);_===void 0?(document.addEventListener(y,sh,{passive:m}),pl.set(y,1)):pl.set(y,_+1)}}};u(c2($7)),SE.add(u);var c=void 0,f=TQ(()=>{var h=r??t.appendChild(wv());return Sc(()=>{if(s){nr({});var v=kr;v.c=s}i&&(n.$$events=i),c=e(h,n)||{},s&&ir()}),()=>{var m;for(var v of a){t.removeEventListener(v,sh);var y=pl.get(v);--y===0?(document.removeEventListener(v,sh),pl.delete(v)):pl.set(v,y)}SE.delete(u),h!==r&&((m=h.parentNode)==null||m.removeChild(h))}});return ZQ.set(c,f),c}let ZQ=new WeakMap;function Kt(e,t,[r,n]=[0,0]){var i=e,s=null,o=null,a=Ki,u=r>0?yv:0,c=!1;const f=(v,y=!0)=>{c=!0,h(y,v)},h=(v,y)=>{a!==(a=v)&&(a?(s?$p(s):y&&(s=Sc(()=>y(i))),o&&Bl(o,()=>{o=null})):(o?$p(o):y&&(o=Sc(()=>y(i,[r+1,n]))),s&&Bl(s,()=>{s=null})))};Vh(()=>{c=!1,t(f),c||h(null,null)},u)}function Ah(e,t,r){var n=e,i=Ki,s,o=Zl()?ZZ:_v;Vh(()=>{o(i,i=t())&&(s&&Bl(s),s=Sc(()=>r(n)))})}function Ka(e,t){return t}function QQ(e,t,r,n){for(var i=[],s=t.length,o=0;o<s;o++)v2(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var u=r.parentNode;wQ(u),u.append(r),n.clear(),Iu(e,t[0].prev,t[s-1].next)}M7(i,()=>{for(var c=0;c<s;c++){var f=t[c];a||(n.delete(f.k),Iu(e,f.prev,f.next)),Bu(f.e,!a)}})}function Pi(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},u=(t&_7)!==0;if(u){var c=e;o=c.appendChild(wv())}var f=null,h=!1,v=pn(()=>{var y=r();return zh(y)?y:y==null?[]:c2(y)});Vh(()=>{var y=A(v),m=y.length;h&&m===0||(h=m===0,eee(y,a,o,i,t,n,r),s!==null&&(m===0?f?$p(f):f=Sc(()=>s(o)):f!==null&&Bl(f,()=>{f=null})),A(v))})}function eee(e,t,r,n,i,s,o){var Y,oe,W,D;var a=(i&cQ)!==0,u=(i&(d2|p2))!==0,c=e.length,f=t.items,h=t.first,v=h,y,m=null,_,x=[],S=[],P,T,E,O;if(a)for(O=0;O<c;O+=1)P=e[O],T=s(P,O),E=f.get(T),E!==void 0&&((Y=E.a)==null||Y.measure(),(_??(_=new Set)).add(E));for(O=0;O<c;O+=1){if(P=e[O],T=s(P,O),E=f.get(T),E===void 0){var N=v?v.e.nodes_start:r;m=ree(N,t,m,m===null?t.first:m.next,P,T,O,n,i,o),f.set(T,m),x=[],S=[],v=m.next;continue}if(u&&tee(E,P,O,i),(E.e.f&tu)!==0&&($p(E.e),a&&((oe=E.a)==null||oe.unfix(),(_??(_=new Set)).delete(E))),E!==v){if(y!==void 0&&y.has(E)){if(x.length<S.length){var d=S[0],C;m=d.prev;var R=x[0],k=x[x.length-1];for(C=0;C<x.length;C+=1)eO(x[C],d,r);for(C=0;C<S.length;C+=1)y.delete(S[C]);Iu(t,R.prev,k.next),Iu(t,m,R),Iu(t,k,d),v=d,m=k,O-=1,x=[],S=[]}else y.delete(E),eO(E,v,r),Iu(t,E.prev,E.next),Iu(t,E,m===null?t.first:m.next),Iu(t,m,E),m=E;continue}for(x=[],S=[];v!==null&&v.k!==T;)(v.e.f&tu)===0&&(y??(y=new Set)).add(v),S.push(v),v=v.next;if(v===null)continue;E=v}x.push(E),m=E,v=E.next}if(v!==null||y!==void 0){for(var B=y===void 0?[]:c2(y);v!==null;)(v.e.f&tu)===0&&B.push(v),v=v.next;var z=B.length;if(z>0){var U=(i&_7)!==0&&c===0?r:null;if(a){for(O=0;O<z;O+=1)(W=B[O].a)==null||W.measure();for(O=0;O<z;O+=1)(D=B[O].a)==null||D.fix()}QQ(t,B,U,f)}}a&&Ev(()=>{var F;if(_!==void 0)for(E of _)(F=E.a)==null||F.apply()}),En.first=t.first&&t.first.e,En.last=m&&m.e}function tee(e,t,r,n){(n&d2)!==0&&Sh(e.v,t),(n&p2)!==0?Sh(e.i,r):e.i=r}function ree(e,t,r,n,i,s,o,a,u,c){var f=(u&d2)!==0,h=(u&lQ)===0,v=f?h?Me(i):Dl(i):i,y=(u&p2)===0?o:Dl(o),m={i:y,v,k:s,a:null,e:null,prev:r,next:n};try{return m.e=Sc(()=>a(e,v,y,c),_Q),m.e.prev=r&&r.e,m.e.next=n&&n.e,r===null?t.first=m:(r.next=m,r.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function eO(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=xv(s);i.before(s),s=o}}function Iu(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function mr(e,t,r,n,i){var a;var s=(a=t.$$slots)==null?void 0:a[r],o=!1;s===!0&&(s=t[r==="default"?"children":r],o=!0),s===void 0?i!==null&&i(e):s(e,o?()=>n:n)}function m2(e){const t={};e.children&&(t.default=!0);for(const r in e.$$slots)t[r]=!0;return t}function pc(e,t,r){var n=e,i,s;Vh(()=>{i!==(i=t())&&(s&&(Bl(s),s=null),i&&(s=Sc(()=>r(n,i))))},yv)}function so(e,t,r){ts(()=>{var n=Tt(()=>t(e,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var i=!1,s={};Ic(()=>{var o=r();qt(o),i&&_v(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function H7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=H7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nee(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=H7(e))&&(n&&(n+=" "),n+=t);return n}function y2(e){return typeof e=="object"?nee(e):e??""}const tO=[...` 	
\r\fÂ \v\uFEFF`];function iee(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var a=o+s;(o===0||tO.includes(n[o-1]))&&(a===n.length||tO.includes(n[a]))?n=(o===0?"":n.substring(0,o))+n.substring(a+1):o=a}}return n===""?null:n}function rO(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var s=e[i];s!=null&&s!==""&&(n+=" "+i+": "+s+r)}return n}function Xm(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function see(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,u=[];n&&u.push(...Object.keys(n).map(Xm)),i&&u.push(...Object.keys(i).map(Xm));var c=0,f=-1;const _=e.length;for(var h=0;h<_;h++){var v=e[h];if(a?v==="/"&&e[h-1]==="*"&&(a=!1):s?s===v&&(s=!1):v==="/"&&e[h+1]==="*"?a=!0:v==='"'||v==="'"?s=v:v==="("?o++:v===")"&&o--,!a&&s===!1&&o===0){if(v===":"&&f===-1)f=h;else if(v===";"||h===_-1){if(f!==-1){var y=Xm(e.substring(c,f).trim());if(!u.includes(y)){v!==";"&&h++;var m=e.substring(c,h).trim();r+=" "+m+";"}}c=h+1,f=-1}}}}return n&&(r+=rO(n)),i&&(r+=rO(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function on(e,t,r,n,i,s){var o=e.__className;if(o!==r||o===void 0){var a=iee(r,n,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=r}else if(s&&i!==s)for(var u in s){var c=!!s[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return s}function Ym(e,t={},r,n){for(var i in r){var s=r[i];t[i]!==s&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,s,n))}}function Nr(e,t,r,n){var i=e.__style;if(i!==t){var s=see(t,n);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}else n&&(Array.isArray(n)?(Ym(e,r==null?void 0:r[0],n[0]),Ym(e,r==null?void 0:r[1],n[1],"important")):Ym(e,r,n));return n}const jf=Symbol("class"),Hf=Symbol("style"),W7=Symbol("is custom element"),X7=Symbol("is html");function oee(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ht(e,t,r,n){var i=Y7(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[JZ]=r),r==null?e.removeAttribute(t):typeof r!="string"&&K7(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ci(e,t,r,n,i=!1){var s=Y7(e),o=s[W7],a=!s[X7],u=t||{},c=e.tagName==="OPTION";for(var f in t)f in r||(r[f]=null);r.class?r.class=y2(r.class):r[jf]&&(r.class=null),r[Hf]&&(r.style??(r.style=null));var h=K7(e);for(const P in r){let T=r[P];if(c&&P==="value"&&T==null){e.value=e.__value="",u[P]=T;continue}if(P==="class"){var v=e.namespaceURI==="http://www.w3.org/1999/xhtml";on(e,v,T,n,t==null?void 0:t[jf],r[jf]),u[P]=T,u[jf]=r[jf];continue}if(P==="style"){Nr(e,T,t==null?void 0:t[Hf],r[Hf]),u[P]=T,u[Hf]=r[Hf];continue}var y=u[P];if(T!==y){u[P]=T;var m=P[0]+P[1];if(m!=="$$")if(m==="on"){const E={},O="$$"+P;let N=P.slice(2);var _=$Q(N);if(VQ(N)&&(N=N.slice(0,-7),E.capture=!0),!_&&y){if(T!=null)continue;e.removeEventListener(N,u[O],E),u[O]=null}if(T!=null)if(_)e[`__${N}`]=T,$u([N]);else{let d=function(C){u[P].call(this,C)};u[O]=U7(N,e,d,E)}else _&&(e[`__${N}`]=void 0)}else if(P==="style")ht(e,P,T);else if(P==="autofocus")XQ(e,!!T);else if(!o&&(P==="__value"||P==="value"&&T!=null))e.value=e.__value=T;else if(P==="selected"&&c)oee(e,T);else{var x=P;a||(x=jQ(x));var S=x==="defaultValue"||x==="defaultChecked";if(T==null&&!o&&!S)if(s[P]=null,x==="value"||x==="checked"){let E=e;const O=t===void 0;if(x==="value"){let N=E.defaultValue;E.removeAttribute(x),E.defaultValue=N,E.value=E.__value=O?N:null}else{let N=E.defaultChecked;E.removeAttribute(x),E.defaultChecked=N,E.checked=O?N:!1}}else e.removeAttribute(P);else S||h.includes(x)&&(o||typeof T!="string")?e[x]=T:typeof T!="function"&&ht(e,x,T)}}}return u}function Y7(e){return e.__attributes??(e.__attributes={[W7]:e.nodeName.includes("-"),[X7]:e.namespaceURI===gQ})}var nO=new Map;function K7(e){var t=nO.get(e.nodeName);if(t)return t;nO.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=h7(n);for(var s in r)r[s].set&&t.push(s);n=l2(n)}return t}function _2(e,t,r=t){var n=Zl();g2(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=Km(e)?Jm(s):s,r(s),n&&s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),Tt(t)==null&&e.value&&r(Km(e)?Jm(e.value):e.value),Ic(()=>{var i=t();Km(e)&&i===Jm(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function iO(e,t,r=t){g2(e,"change",n=>{var i=n?e.defaultChecked:e.checked;r(i)}),Tt(t)==null&&r(e.checked),Ic(()=>{var n=t();e.checked=!!n})}function Km(e){var t=e.type;return t==="number"||t==="range"}function Jm(e){return e===""?null:+e}function b2(e,t,r){var n=eu(e,t);n&&n.set&&(e[t]=r,Sv(()=>{e[t]=null}))}function J7(e,t,r){if(e.multiple)return uee(e,t);for(var n of e.options){var i=vh(n);if(yQ(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function aee(e,t){ts(()=>{var r=new MutationObserver(()=>{var n=e.__value;J7(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function sO(e,t,r=t){var n=!0;g2(e,"change",i=>{var s=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),vh);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");o=a&&vh(a)}r(o)}),ts(()=>{var i=t();if(J7(e,i,n),n&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=vh(s),r(i))}e.__value=i,n=!1}),aee(e)}function uee(e,t){for(var r of e.options)r.selected=~t.indexOf(vh(r))}function vh(e){return"__value"in e?e.__value:e.value}var Mu,ql,Bh,pv,Z7;const vv=class vv{constructor(t){$f(this,pv);$f(this,Mu,new WeakMap);$f(this,ql);$f(this,Bh);Wm(this,Bh,t)}observe(t,r){var n=ja(this,Mu).get(t)||new Set;return n.add(r),ja(this,Mu).set(t,n),GC(this,pv,Z7).call(this).observe(t,ja(this,Bh)),()=>{var i=ja(this,Mu).get(t);i.delete(r),i.size===0&&(ja(this,Mu).delete(t),ja(this,ql).unobserve(t))}}};Mu=new WeakMap,ql=new WeakMap,Bh=new WeakMap,pv=new WeakSet,Z7=function(){return ja(this,ql)??Wm(this,ql,new ResizeObserver(t=>{for(var r of t){vv.entries.set(r.target,r);for(var n of ja(this,Mu).get(r.target)||[])n(r)}}))},VC(vv,"entries",new WeakMap);let EE=vv;var cee=new EE({box:"border-box"});function oO(e,t,r){var n=cee.observe(e,()=>r(e[t]));ts(()=>(Tt(()=>r(e[t])),n))}function aO(e,t){return e===t||(e==null?void 0:e[ba])===t}function Gs(e={},t,r,n){return ts(()=>{var i,s;return Ic(()=>{i=s,s=[],Tt(()=>{e!==r(...s)&&(t(e,...s),i&&aO(r(...i),e)&&t(null,...i))})}),()=>{Ev(()=>{s&&aO(r(...s),e)&&t(null,...s)})}}),e}function gh(e){return function(...t){var r=t[0];r.target===this&&(e==null||e.apply(this,t))}}function ho(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function Fs(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function gn(e=!1){const t=kr,r=t.l.u;if(!r)return;let n=()=>qt(t.s);if(e){let i=0,s={};const o=Fl(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],a=!0);return a&&i++,i});n=()=>A(o)}r.b.length&&AQ(()=>{uO(t,n),wh(r.b)}),Fu(()=>{const i=Tt(()=>r.m.map(XZ));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&Fu(()=>{uO(t,n),wh(r.a)})}function uO(e,t){if(e.l.s)for(const r of e.l.s)A(r);t()}function hn(e,t){var s;var r=(s=e.$$events)==null?void 0:s[t.type],n=zh(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function w2(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Bs;const n=Tt(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const vl=[];function ru(e,t){return{subscribe:Ve(e,t).subscribe}}function Ve(e,t=Bs){let r=null;const n=new Set;function i(a){if(_v(e,a)&&(e=a,r)){const u=!vl.length;for(const c of n)c[1](),vl.push(c,e);if(u){for(let c=0;c<vl.length;c+=2)vl[c][0](vl[c+1]);vl.length=0}}}function s(a){i(a(e))}function o(a,u=Bs){const c=[a,u];return n.add(c),n.size===1&&(r=t(i,s)||Bs),a(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function zs(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return ru(r,(o,a)=>{let u=!1;const c=[];let f=0,h=Bs;const v=()=>{if(f)return;h();const m=t(n?c[0]:c,o,a);s?o(m):h=typeof m=="function"?m:Bs},y=i.map((m,_)=>w2(m,x=>{c[_]=x,f&=~(1<<_),u&&v()},()=>{f|=1<<_}));return u=!0,v(),function(){wh(y),h(),u=!1}})}function st(e){let t;return w2(e,r=>t=r)(),t}let up=!1,AE=Symbol();function Be(e,t,r){const n=r[t]??(r[t]={store:null,source:Me(void 0),unsubscribe:Bs});if(n.store!==e&&!(AE in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Bs;else{var i=!0;n.unsubscribe=w2(e,s=>{i?n.source.v=s:pe(n.source,s)}),i=!1}return e&&AE in r?st(e):A(n.source)}function Ja(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=Bs),e}function St(e,t){return e.set(t),t}function Xr(){const e={};function t(){Sv(()=>{for(var r in e)e[r].unsubscribe();f7(e,AE,{enumerable:!1,value:!0})})}return[e,t]}function dn(e,t,r){return e.set(r),t}function lee(e,t,r=1){return e.set(t+r),t}function fee(e,t,r=1){const n=t+r;return e.set(n),n}function hee(e){var t=up;try{return up=!1,[e(),up]}finally{up=t}}const dee={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ho(e,t,r){return new Proxy({props:e,exclude:t},dee)}const pee={get(e,t){if(!e.exclude.includes(t))return A(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=he({get[t](){return e.props[t]}},t,b7)),e.special[t](r),YC(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),YC(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Aa(e,t){return new Proxy({props:e,exclude:t,special:{},version:Dl(0)},pee)}const vee={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Uf(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];Uf(i)&&(i=i());const s=eu(i,t);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Uf(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=eu(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===ba||t===g7)return!1;for(let r of e.props)if(Uf(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){Uf(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function Vl(...e){return new Proxy({props:e},vee)}function cO(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function he(e,t,r,n){var d;var i=(r&fQ)!==0,s=!Kl||(r&hQ)!==0,o=(r&dQ)!==0,a=(r&pQ)!==0,u=!1,c;o?[c,u]=hee(()=>e[t]):c=e[t];var f=ba in e||g7 in e,h=o&&(((d=eu(e,t))==null?void 0:d.set)??(f&&t in e&&(C=>e[t]=C)))||void 0,v=n,y=!0,m=!1,_=()=>(m=!0,y&&(y=!1,a?v=Tt(n):v=n),v);c===void 0&&n!==void 0&&(h&&s&&nQ(),c=_(),h&&h(c));var x;if(s)x=()=>{var C=e[t];return C===void 0?_():(y=!0,m=!1,C)};else{var S=(i?Fl:pn)(()=>e[t]);S.f|=p7,x=()=>{var C=A(S);return C!==void 0&&(v=void 0),C===void 0?v:C}}if((r&b7)===0)return x;if(h){var P=e.$$legacy;return function(C,R){return arguments.length>0?((!s||!R||P||u)&&h(R?x():C),C):x()}}var T=!1,E=!1,O=Me(c),N=Fl(()=>{var C=x(),R=A(O);return T?(T=!1,E=!0,R):(E=!1,O.v=C)});return o&&A(N),i||(N.equals=h2),function(C,R){if(Ru!==null&&(T=E,x(),A(O)),arguments.length>0){const k=R?A(N):s&&o?Ds(C):C;if(!N.equals(k)){if(T=!0,pe(O,k),m&&v!==void 0&&(v=k),cO(N))return C;Tt(()=>A(N))}return C}return cO(N)?N.v:A(N)}}function An(e){kr===null&&Jl(),Kl&&kr.l!==null?S2(kr).m.push(e):Fu(()=>{const t=Tt(e);if(typeof t=="function")return t})}function au(e){kr===null&&Jl(),An(()=>()=>Tt(e))}function gee(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Gl(){const e=kr;return e===null&&Jl(),(t,r,n)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const o=zh(i)?i.slice():[i],a=gee(t,r,n);for(const u of o)u.call(e.x,a);return!a.defaultPrevented}return!0}}function mee(e){kr===null&&Jl(),kr.l===null&&y7(),S2(kr).b.push(e)}function x2(e){kr===null&&Jl(),kr.l===null&&y7(),S2(kr).a.push(e)}function S2(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const yee="5";var l7;typeof window<"u"&&((l7=window.__svelte??(window.__svelte={})).v??(l7.v=new Set)).add(yee);uQ();const lO=1,_ee=.9,bee=.8,wee=.17,Zm=.1,Qm=.999,xee=.9999,See=.99,Eee=/[\\/_+.#"@[({&]/,Aee=/[\\/_+.#"@[({&]/g,Tee=/[\s-]/,Q7=/[\s-]/g;function TE(e,t,r,n,i,s,o){if(s===t.length)return i===e.length?lO:See;const a=`${i},${s}`;if(o[a]!==void 0)return o[a];const u=n.charAt(s);let c=r.indexOf(u,i),f=0,h,v,y,m;for(;c>=0;)h=TE(e,t,r,n,c+1,s+1,o),h>f&&(c===i?h*=lO:Eee.test(e.charAt(c-1))?(h*=bee,y=e.slice(i,c-1).match(Aee),y&&i>0&&(h*=Math.pow(Qm,y.length))):Tee.test(e.charAt(c-1))?(h*=_ee,m=e.slice(i,c-1).match(Q7),m&&i>0&&(h*=Math.pow(Qm,m.length))):(h*=wee,i>0&&(h*=Math.pow(Qm,c-i))),e.charAt(c)!==t.charAt(s)&&(h*=xee)),(h<Zm&&r.charAt(c-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(c-1)!==n.charAt(s))&&(v=TE(e,t,r,n,c+1,s+2,o),v*Zm>h&&(h=v*Zm)),h>f&&(f=h),c=r.indexOf(u,c+1);return o[a]=f,f}function fO(e){return e.toLowerCase().replace(Q7," ")}function Pee(e,t){return TE(e,t,fO(e),fO(t),0,0,{})}const Cee=typeof document<"u";function Oee(e){return e instanceof HTMLElement}function E2(e){return e===void 0}let Iee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ree=(e=21)=>{let t="",r=e|0;for(;r--;)t+=Iee[Math.random()*64|0];return t};function qo(){return Ree(10)}const Wf={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",END:"End",ENTER:"Enter",HOME:"Home"};function kee(e,...t){const r={};for(const n of Object.keys(e))t.includes(n)||(r[n]=e[n]);return r}function eV(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=n)}return t}function Mee(e){const t={};return Object.keys(e).forEach(r=>{const n=r,i=e[n];t[n]=Ve(i)}),t}function dc(e,t){const r=Lee(e,(n,i)=>({stores:n,onUnsubscribe:i})).subscribe(({stores:n,onUnsubscribe:i})=>{const s=t(n);s&&i(s)});return au(r),r}function Lee(e,t){let r=[];const n=a=>{r.push(a)},i=()=>{r.forEach(a=>a()),r=[]},s=zs(e,a=>(i(),t(a,n)));return au(i),{...s,subscribe:(...a)=>{const u=s.subscribe(...a);return()=>{u(),i()}}}}function Nee(e){return Object.keys(e).reduce((t,r)=>e[r]===void 0?t:t+`${r}:${e[r]};`,"")}const qee={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Xp(e,t,r,n){const i=Array.isArray(t)?t:[t];return i.forEach(s=>e.addEventListener(s,r,n)),()=>{i.forEach(s=>e.removeEventListener(s,r,n))}}function tV(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const rV="Command",nV="CommandState",iV="CommandGroup",Dee="[data-cmdk-list-sizer]",Xf="[data-cmdk-group]",hO="[data-cmdk-group-items]",Fee="[data-cmdk-group-heading]",sV="[data-cmdk-item]",e0=`${sV}:not([aria-disabled="true"])`,ko="data-value",oV=(e,t)=>Pee(e,t);function Cv(){return gr(rV)}function Ov(){return gr(nV)}function Bee(e){const t=qo();return Hr(iV,{id:t,alwaysRender:E2(e)?!1:e}),{id:t}}function zee(){const e=gr(iV);if(e)return e}function Vee(e){const t={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return Ve(e?{...t,...eV(e)}:t)}const Gee={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:oV,ids:{root:qo(),list:qo(),label:qo(),input:qo()}};function $ee(e){const t={root:qo(),list:qo(),label:qo(),input:qo(),...e.ids},r={...Gee,...eV(e)},n=e.state??Vee({value:r.value}),i=Ve(new Set),s=Ve(new Map),o=Ve(new Map),a=Ve(null),u=Mee(kee(r,"value","ids"));let c=st(i),f=st(s),h=st(o),v=st(u.shouldFilter),y=st(u.loop),m=st(u.label),_=st(u.filter);dc(u.shouldFilter,D=>{v=D}),dc(u.loop,D=>{y=D}),dc(u.filter,D=>{_=D}),dc(u.label,D=>{m=D}),dc(i,D=>{c=D}),dc(s,D=>{f=D}),dc(o,D=>{h=D});const x={value:(D,F)=>{F!==h.get(D)&&(o.update(H=>(H.set(D,F),H)),n.update(H=>(H.filtered.items.set(D,O(F,H.search)),H)))},item:(D,F)=>(i.update(H=>H.add(D)),F&&s.update(H=>{var ie;return H.has(F)?(ie=H.get(F))==null||ie.add(D):H.set(F,new Set([D])),H}),n.update(H=>{const ie=P(H,v);if(!ie.value){const se=E();ie.value=se??""}return ie}),()=>{o.update(H=>(H.delete(D),H)),i.update(H=>(H.delete(D),H)),n.update(H=>{H.filtered.items.delete(D);const ie=C(),se=P(H);return(ie==null?void 0:ie.getAttribute("id"))===D&&(se.value=E()??""),H})}),group:D=>(s.update(F=>(F.has(D)||F.set(D,new Set),F)),()=>{o.update(F=>(F.delete(D),F)),s.update(F=>(F.delete(D),F))}),filter:()=>v,label:m||e["aria-label"]||"",commandEl:a,ids:t,updateState:S};function S(D,F,H){n.update(ie=>{var se;return Object.is(ie[D],F)||(ie[D]=F,D==="search"?(ie=P(ie,v),ie=T(ie,v),ih().then(()=>n.update(te=>{var ue;return te.value=E()??"",(ue=e.onValueChange)==null||ue.call(e,te.value),te}))):D==="value"&&((se=e.onValueChange)==null||se.call(e,ie.value),H||ih().then(()=>N()))),ie})}function P(D,F){const H=F??v;if(!D.search||!H)return D.filtered.count=c.size,D;D.filtered.groups=new Set;let ie=0;for(const se of c){const we=h.get(se),ge=O(we,D.search);D.filtered.items.set(se,ge),ge>0&&ie++}for(const[se,we]of f)for(const ge of we){const te=D.filtered.items.get(ge);te&&te>0&&D.filtered.groups.add(se)}return D.filtered.count=ie,D}function T(D,F){var ue;const H=F??v;if(!D.search||!H)return D;const ie=D.filtered.items,se=[];for(const re of D.filtered.groups){const Q=f.get(re);if(!Q)continue;let le=0;for(const Ge of Q){const Ne=ie.get(Ge);E2(Ne)||(le=Math.max(Ne,le))}se.push([re,le])}const we=document.getElementById(t.root);if(!we)return D;const ge=we.querySelector(Dee),te=d(we).sort((re,Q)=>{const le=re.getAttribute(ko)??"",Ge=Q.getAttribute(ko)??"";return(ie.get(le)??0)-(ie.get(Ge)??0)});for(const re of te){const Q=re.closest(hO),le=re.closest(`${hO} > *`);if(Q)if(re.parentElement===Q)Q.appendChild(re);else{if(!le)continue;Q.appendChild(le)}else if(re.parentElement===ge)ge==null||ge.appendChild(re);else{if(!le)continue;ge==null||ge.appendChild(le)}}se.sort((re,Q)=>Q[1]-re[1]);for(const re of se){const Q=we.querySelector(`${Xf}[${ko}="${re[0]}"]`);(ue=Q==null?void 0:Q.parentElement)==null||ue.appendChild(Q)}return D}function E(){const D=d().find(H=>!H.ariaDisabled);if(!D)return;const F=D.getAttribute(ko);if(F)return F}function O(D,F){const H=D==null?void 0:D.toLowerCase().trim(),ie=_;return ie?H?ie(H,F):0:H?oV(H,F):0}function N(){var F;const D=C();D&&(((F=D.parentElement)==null?void 0:F.firstChild)===D&&ih().then(()=>{var H,ie;return(ie=(H=D.closest(Xf))==null?void 0:H.querySelector(Fee))==null?void 0:ie.scrollIntoView({block:"nearest"})}),ih().then(()=>D.scrollIntoView({block:"nearest"})))}function d(D){const F=D??document.getElementById(t.root);return F?Array.from(F.querySelectorAll(e0)).filter(H=>!!H):[]}function C(D){const F=document.getElementById(t.root);if(!F)return;const H=F.querySelector(`${e0}[aria-selected="true"]`);if(H)return H}function R(D){const F=document.getElementById(t.root);if(!F)return;const ie=d(F)[D];ie&&S("value",ie.getAttribute(ko)??"")}function k(D){const F=C(),H=d(),ie=H.findIndex(we=>we===F);let se=H[ie+D];y&&(ie+D<0?se=H[H.length-1]:ie+D===H.length?se=H[0]:se=H[ie+D]),se&&S("value",se.getAttribute(ko)??"")}function B(D){const F=C();let H=F==null?void 0:F.closest(Xf),ie;for(;H&&!ie;)H=D>0?Uee(H,Xf):jee(H,Xf),ie=H==null?void 0:H.querySelector(e0);ie?S("value",ie.getAttribute(ko)??""):k(D)}function z(){return R(d().length-1)}function U(D){D.preventDefault(),D.metaKey?z():D.altKey?B(1):k(1)}function Y(D){D.preventDefault(),D.metaKey?R(0):D.altKey?B(-1):k(-1)}function oe(D){switch(D.key){case Wf.ARROW_DOWN:U(D);break;case Wf.ARROW_UP:Y(D);break;case Wf.HOME:D.preventDefault(),R(0);break;case Wf.END:D.preventDefault(),z();break;case Wf.ENTER:{D.preventDefault();const F=C();F&&(F==null||F.click())}}}Hr(rV,x);const W={subscribe:n.subscribe,update:n.update,set:n.set,updateState:S};return Hr(nV,W),{state:W,handleRootKeydown:oe,commandEl:a,ids:t}}function Uee(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function jee(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}var Hee=Gt("<div><label> </label> <!></div>");function Wee(e,t){const r=Aa(t,["children","$$slots","$$events","$$legacy"]),n=Aa(r,["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"]);nr(t,!1);const[i,s]=Xr(),o=()=>Be(O,"$stateStore",i),a=Me();let u=he(t,"label",24,()=>{}),c=he(t,"shouldFilter",8,!0),f=he(t,"filter",24,()=>{}),h=he(t,"value",28,()=>{}),v=he(t,"onValueChange",24,()=>{}),y=he(t,"loop",24,()=>{}),m=he(t,"onKeydown",24,()=>{}),_=he(t,"state",24,()=>{}),x=he(t,"ids",24,()=>{}),S=he(t,"asChild",8,!1);const{commandEl:P,handleRootKeydown:T,ids:E,state:O}=$ee({label:u(),shouldFilter:c(),filter:f(),value:h(),onValueChange:W=>{var D;W!==h()&&(h(W),(D=v())==null||D(W))},loop:y(),state:_(),ids:x()});function N(W){W&&W!==o().value&&dn(O,Tt(o).value=W,Tt(o))}function d(W){return P.set(W),{destroy:tV(Xp(W,"keydown",k))}}const C={role:"application",id:E.root,"data-cmdk-root":""},R={"data-cmdk-label":"",for:E.input,id:E.label,style:Nee(qee)};function k(W){var D;(D=m())==null||D(W),!W.defaultPrevented&&T(W)}const B={action:d,attrs:C};Fe(()=>qt(h()),()=>{N(h())}),Fe(()=>o(),()=>{pe(a,{root:B,label:{attrs:R},stateStore:O,state:o()})}),li(),gn();var z=Ut(),U=_t(z);{var Y=W=>{var D=Ut(),F=_t(D);mr(F,t,"default",Vl({},()=>A(a)),null),De(W,D)},oe=W=>{var D=Hee();let F;var H=gt(D);let ie;var se=gt(H),we=at(H,2);mr(we,t,"default",Vl({},()=>A(a)),null),so(D,ge=>d==null?void 0:d(ge)),It(()=>{F=ci(D,F,{...C,...n}),ie=ci(H,ie,{...R}),Bi(se,u()??"")}),De(W,D)};Kt(U,W=>{S()?W(Y):W(oe,!1)})}De(e,z),ir(),s()}function Xee(e){return Object.keys(e).reduce((t,r)=>e[r]===void 0?t:t+`${r}:${e[r]};`,"")}Xee({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function dO(e){function t(r){return r(e),()=>{}}return{subscribe:t}}const cp=e=>new Proxy(e,{get(t,r,n){return Reflect.get(t,r,n)},ownKeys(t){return Reflect.ownKeys(t).filter(r=>r!=="action")}}),pO=e=>typeof e=="function";Yee("empty");function Yee(e,t){const{stores:r,action:n,returned:i}={},s=(()=>{if(r&&i)return zs(r,a=>{const u=i(a);if(pO(u)){const c=(...f)=>cp({...u(...f),[`data-melt-${e}`]:"",action:n??gl});return c.action=n??gl,c}return cp({...u,[`data-melt-${e}`]:"",action:n??gl})});{const a=i,u=a==null?void 0:a();if(pO(u)){const c=(...f)=>cp({...u(...f),[`data-melt-${e}`]:"",action:n??gl});return c.action=n??gl,dO(c)}return dO(cp({...u,[`data-melt-${e}`]:"",action:n??gl}))}})(),o=n??(()=>{});return o.subscribe=s.subscribe,o}function gl(){}function aV(e,t,r,n){const i=Array.isArray(t)?t:[t];return i.forEach(s=>e.addEventListener(s,r,n)),()=>{i.forEach(s=>e.removeEventListener(s,r,n))}}function Kee(e,...t){const r={};for(const n of Object.keys(e))t.includes(n)||(r[n]=e[n]);return r}const Jee={ESCAPE:"Escape"};ru(void 0,e=>{function t(n){e(n),e(void 0)}return aV(document,"pointerup",t,{passive:!1,capture:!0})});ru(void 0,e=>{function t(n){n&&n.key===Jee.ESCAPE&&e(n),e(void 0)}return aV(document,"keydown",t,{passive:!1})});ru(!1),ru(!1),ru(void 0);const Zee={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Kee(Zee,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});var Qee=Gt("<div> </div>"),ete=Gt("<div><!> <div><!></div></div>");function tte(e,t){const r=Aa(t,["children","$$slots","$$events","$$legacy"]),n=Aa(r,["heading","value","alwaysRender","asChild"]);nr(t,!1);const[i,s]=Xr(),o=()=>Be(T,"$render",i),a=Me(),u=Me(),c=Me(),f=Me();let h=he(t,"heading",24,()=>{}),v=he(t,"value",12,""),y=he(t,"alwaysRender",8,!1),m=he(t,"asChild",8,!1);const{id:_}=Bee(y()),x=Cv(),S=Ov(),P=qo(),T=zs(S,k=>y()||x.filter()===!1||!k.search?!0:k.filtered.groups.has(_));An(()=>x.group(_));function E(k){if(v()){x.value(_,v()),k.setAttribute(ko,v());return}h()?v(h().trim().toLowerCase()):k.textContent&&v(k.textContent.trim().toLowerCase()),x.value(_,v()),k.setAttribute(ko,v())}const O={"data-cmdk-group-heading":"","aria-hidden":!0,id:P};Fe(()=>(o(),qt(v())),()=>{pe(a,{"data-cmdk-group":"",role:"presentation",hidden:o()?void 0:!0,"data-value":v()})}),Fe(()=>qt(h()),()=>{pe(u,{"data-cmdk-group-items":"",role:"group","aria-labelledby":h()?P:void 0})}),Fe(()=>A(a),()=>{pe(c,{action:E,attrs:A(a)})}),Fe(()=>A(u),()=>{pe(f,{attrs:A(u)})}),li(),gn();var N=Ut(),d=_t(N);{var C=k=>{var B=Ut(),z=_t(B);mr(z,t,"default",{get container(){return A(c)},get group(){return A(f)},heading:{attrs:O}},null),De(k,B)},R=k=>{var B=ete();let z;var U=gt(B);{var Y=F=>{var H=Qee();let ie;var se=gt(H);It(()=>{ie=ci(H,ie,{...O}),Bi(se,h())}),De(F,H)};Kt(U,F=>{h()&&F(Y)})}var oe=at(U,2);let W;var D=gt(oe);mr(D,t,"default",{get container(){return A(c)},get group(){return A(f)},heading:{attrs:O}},null),so(B,F=>E==null?void 0:E(F)),It(()=>{z=ci(B,z,{...A(a),...n}),W=ci(oe,W,{...A(u)})}),De(k,B)};Kt(d,k=>{m()?k(C):k(R,!1)})}De(e,N),ir(),s()}function rte(e){return new Promise(t=>setTimeout(t,e))}var nte=Gt("<input>");function ite(e,t){const r=Aa(t,["children","$$slots","$$events","$$legacy"]),n=Aa(r,["autofocus","value","asChild","el"]);nr(t,!1);const[i,s]=Xr(),o=()=>Be(x,"$selectedItemId",i),{ids:a,commandEl:u}=Cv(),c=Ov(),f=zs(c,C=>C.search),h=zs(c,C=>C.value);let v=he(t,"autofocus",24,()=>{}),y=he(t,"value",28,()=>st(f)),m=he(t,"asChild",8,!1),_=he(t,"el",28,()=>{});const x=zs([h,u],([C,R])=>{if(!Cee)return;const k=R==null?void 0:R.querySelector(`${sV}[${ko}="${CSS.escape(C)}"]`);return k==null?void 0:k.getAttribute("id")});function S(C){c.updateState("search",C)}function P(C){if(v()&&rte(10).then(()=>C.focus()),m())return{destroy:Xp(C,"change",k=>{const B=k.currentTarget;c.updateState("search",B.value)})}}let T=Me();Fe(()=>qt(y()),()=>{S(y())}),Fe(()=>o(),()=>{pe(T,{type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.list,"aria-labelledby":a.label,"aria-activedescendant":o()??void 0,id:a.input})}),li(),gn();var E=Ut(),O=_t(E);{var N=C=>{var R=Ut(),k=_t(R);mr(k,t,"default",{action:P,get attrs(){return A(T)}},null),De(C,R)},d=C=>{var R=nte();let k;Gs(R,B=>_(B),()=>_()),ts(()=>_2(R,y)),so(R,B=>P==null?void 0:P(B)),ts(()=>ar("keydown",R,function(B){hn.call(this,t,B)})),ts(()=>ar("input",R,function(B){hn.call(this,t,B)})),ts(()=>ar("focus",R,function(B){hn.call(this,t,B)})),ts(()=>ar("blur",R,function(B){hn.call(this,t,B)})),ts(()=>ar("change",R,function(B){hn.call(this,t,B)})),It(()=>k=ci(R,k,{...A(T),...n})),De(C,R)};Kt(O,C=>{m()?C(N):C(d,!1)})}De(e,E),ir(),s()}var ste=Gt("<div><!></div>");function t0(e,t){const r=Aa(t,["children","$$slots","$$events","$$legacy"]),n=Aa(r,["disabled","value","onSelect","alwaysRender","asChild","id"]);nr(t,!1);const[i,s]=Xr(),o=()=>Be(O,"$selected",i),a=()=>Be(T,"$render",i),u=Me();let c=he(t,"disabled",8,!1),f=he(t,"value",12,""),h=he(t,"onSelect",24,()=>{}),v=he(t,"alwaysRender",8,!1),y=he(t,"asChild",8,!1),m=he(t,"id",24,qo);const _=zee(),x=Cv(),S=Ov(),P=v()??(_==null?void 0:_.alwaysRender),T=zs(S,z=>{if(P||x.filter()===!1||!z.search)return!0;const U=z.filtered.items.get(m());return E2(U)?!1:U>0});let E=Me(!0);An(()=>(pe(E,!1),x.item(m(),_==null?void 0:_.id)));const O=zs(S,z=>z.value===f());function N(z){!f()&&z.textContent&&f(z.textContent.trim().toLowerCase()),x.value(m(),f()),z.setAttribute(ko,f());const U=tV(Xp(z,"pointermove",()=>{c()||C()}),Xp(z,"click",()=>{c()||d()}));return{destroy(){U()}}}function d(){var z;C(),(z=h())==null||z(f())}function C(){S.updateState("value",f(),!0)}Fe(()=>(qt(c()),o(),qt(f()),qt(m())),()=>{pe(u,{"aria-disabled":c()?!0:void 0,"aria-selected":o()?!0:void 0,"data-disabled":c()?!0:void 0,"data-selected":o()?!0:void 0,"data-cmdk-item":"","data-value":f(),role:"option",id:m()})}),li(),gn();var R=Ut(),k=_t(R);{var B=z=>{var U=Ut(),Y=_t(U);{var oe=D=>{var F=Ut(),H=_t(F);mr(H,t,"default",{action:N,get attrs(){return A(u)}},null),De(D,F)},W=D=>{var F=ste();let H;var ie=gt(F);mr(ie,t,"default",{action:N,get attrs(){return A(u)}},null),so(F,se=>N==null?void 0:N(se)),It(()=>H=ci(F,H,{...A(u),...n})),De(D,F)};Kt(Y,D=>{y()?D(oe):D(W,!1)})}De(z,U)};Kt(k,z=>{(a()||A(E))&&z(B)})}De(e,R),ir(),s()}var ote=Gt("<div><div><!></div></div>");function r0(e,t){const r=Aa(t,["children","$$slots","$$events","$$legacy"]),n=Aa(r,["el","asChild"]);nr(t,!1);const[i,s]=Xr(),o=()=>Be(u,"$state",i),{ids:a}=Cv(),u=Ov();let c=he(t,"el",28,()=>{}),f=he(t,"asChild",8,!1);function h(E){let O;const N=E.closest("[data-cmdk-list]");if(!Oee(N))return;const d=new ResizeObserver(()=>{O=requestAnimationFrame(()=>{const C=E.offsetHeight;N.style.setProperty("--cmdk-list-height",C.toFixed(1)+"px")})});return d.observe(E),{destroy(){cancelAnimationFrame(O),d.unobserve(E)}}}const v={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:a.list,"aria-labelledby":a.input},y={"data-cmdk-list-sizer":""},m={attrs:v},_={attrs:y,action:h};gn();var x=Ut(),S=_t(x);{var P=E=>{var O=Ut(),N=_t(O);Ah(N,()=>o().search==="",d=>{var C=Ut(),R=_t(C);mr(R,t,"default",{list:m,sizer:_},null),De(d,C)}),De(E,O)},T=E=>{var O=ote();let N;var d=gt(O);let C;var R=gt(d);Ah(R,()=>o().search==="",k=>{var B=Ut(),z=_t(B);mr(z,t,"default",{},null),De(k,B)}),so(d,k=>h==null?void 0:h(k)),Gs(O,k=>c(k),()=>c()),It(()=>{N=ci(O,N,{...v,...n}),C=ci(d,C,{...y})}),De(E,O)};Kt(S,E=>{f()?E(P):E(T,!1)})}De(e,x),ir(),s()}const ate=""+new URL("And-vPRNnjli.webp",import.meta.url).href,ute=""+new URL("Buffer-B3Uvsw-c.webp",import.meta.url).href,cte=""+new URL("Or-D6Cm5Ena.webp",import.meta.url).href,lte=""+new URL("Nor-CgPoSiw3.webp",import.meta.url).href,fte=""+new URL("Xor-FwkKBC7T.webp",import.meta.url).href,hte=""+new URL("Xnor-D92Hxo_S.webp",import.meta.url).href,dte=""+new URL("Nand-CeX_LhnV.webp",import.meta.url).href,pte=""+new URL("Not-CKmu_FXd.webp",import.meta.url).href,PE=""+new URL("outputIcon-C9FYfgf8.png",import.meta.url).href,vO=""+new URL("inputIcon-6hipRhQs.png",import.meta.url).href;function vte(e,t){return{type:"Lamp",net:e,inputs:(t==null?void 0:t.inputs)||1,outputs:(t==null?void 0:t.outputs)||0,order:(t==null?void 0:t.order)||0,bits:(t==null?void 0:t.bits)||1,label:(t==null?void 0:t.label)||e,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}},...(t==null?void 0:t.rotation)&&{rotation:t.rotation}}}function gte(e,t){return{type:"Button",label:(t==null?void 0:t.label)||e,net:(t==null?void 0:t.net)||e,bits:(t==null?void 0:t.bits)||1,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}},...(t==null?void 0:t.rotation)&&{rotation:t.rotation}}}function Su(e,t,r){return{type:e,label:t,inputs:2,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y},...(r==null?void 0:r.rotation)&&{rotation:r.rotation}}}}function mte(e,t,r,n,i){return{type:"Subcircuit",label:e,inputs:r,outputs:n,celltype:t,...(i==null?void 0:i.position)&&{position:{x:i.position.x,y:i.position.y},...(i==null?void 0:i.rotation)&&{rotation:i.rotation}}}}function yte(e,t,r){return{type:"TunnelInput",label:e,celltype:"tunnel",...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y},...(r==null?void 0:r.rotation)&&{rotation:r.rotation}}}}function _te(e,t,r){return{type:"TunnelOutput",label:e,celltype:"tunnel",...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y},...(r==null?void 0:r.rotation)&&{rotation:r.rotation}}}}const gO={Button:gte,Lamp:vte,And:(e,t)=>Su("And",e,...t?[t]:[]),Nand:(e,t)=>Su("Nand",e,...t?[t]:[]),Or:(e,t)=>Su("Or",e,...t?[t]:[]),Nor:(e,t)=>Su("Nor",e,...t?[t]:[]),Xor:(e,t)=>Su("Xor",e,...t?[t]:[]),Xnor:(e,t)=>Su("Xnor",e,...t?[t]:[]),Not:(e,t)=>Su("Not",e,...t?[t]:[]),Repeater:(e,t)=>Su("Repeater",e,...t?[t]:[]),Subcircuit:(e,t)=>mte(e,t.celltype,t.inputs,t.outputs,...t?[t]:[]),TunnelInput:(e,t)=>yte(e,t.celltype,...t?[t]:[]),TunnelOutput:(e,t)=>_te(e,t.celltype,...t?[t]:[])};let uV=e=>{},cV=e=>{};function bte(e,t){uV=e,cV=t}const wte=()=>{const e={devices:{},connectors:{},subcircuits:[],wireManipulations:{}},{subscribe:t,set:r,update:n}=Ve(e);return{subscribe:t,set:r,update:n,reset:()=>n(()=>({devices:{},connectors:{},subcircuits:[],wireManipulations:{}})),addConnection:(i,s)=>{const o=s.substring(s.indexOf("_")+1);n(a=>(i in a.connectors||(a.connectors[i]=new Array),a.connectors[i]=[...a.connectors[i],[o,s]],console.log(a.connectors),a))},removeConnection:i=>{n(s=>{const o={};for(const a in s.connectors)o[a]=[...s.connectors[a].filter(([,u])=>u!==i)];return s.connectors=o,s})},addCircuitDevice:(i,s,o)=>{const a=`${i}_${s}`;let u=null,c=o==null?void 0:o.celltype;if(n(f=>{const h=o===void 0?gO[i](a):gO[i](a,o);return f.devices[a]=h,i=="Subcircuit"&&f.subcircuits.indexOf(c)==-1&&f.subcircuits.push(c),u=f.devices,f}),u===null)throw new Error("devices null after setting devices");return u},removeCircuitDevice(i){let s=null;if(n(o=>(delete o.devices[i],s=o.devices,o)),s===null)throw new Error("devices null after setting devices");return s}}},Sn=wte();function xte(e){let t;for(const r in st(Sn).connectors)st(Sn).connectors[r].forEach(([n,i])=>{i===e&&(t=r)});return t}function Ste(e){const t=JSON.parse(e);return t.nodes.length===0?(console.warn("save json exists but there are no nodes"),null):t.nodes.map(n=>{let[i,s]=n.id.substring(2).split("_");return{nodeType:i,uuid:s,position:n.position}})}function Iv(e){return localStorage.getItem(e)||(console.warn(`No saved "${e}" found in localStorage.`),null)}function Ete(){const t=Iv("state");if(!t)return console.warn("svelvet save unsucessful"),null;const r=Ste(t);if(r===null)return null;Sn.update(n=>(r.forEach(({nodeType:i,uuid:s,position:o})=>{const a=`${i}_${s}`;a in n.devices&&(n.devices[a].position=o)}),n))}function Ate(){Iv("circuitStoreSave"),localStorage.setItem("circuitStoreSave",JSON.stringify(st(Sn)))}function Tte(){const e=document.querySelector(".save-button"),t=new MouseEvent("click",{bubbles:!0,cancelable:!0});e==null||e.dispatchEvent(t)}async function ku(){Tte(),Ete(),Ate()}function Pte(e){if(!(e!=null&&e.devices)||!(e!=null&&e.connectors)||!(e!=null&&e.subcircuits)){let t="";throw e!=null&&e.devices||(t+="[Devices]"),e!=null&&e.devices||(t+="[Connectors]"),e!=null&&e.devices||(t+="[Subciruits]"),new Error("Parsed circuit object is missing required properties "+t)}else Object.keys(e.devices).length===0&&console.log("Loaded in a valid circuit with empty devices")}function A2(e="default"){let t=e==="default"?Iv("circuitStoreSave"):e;if(!t)return;const r=JSON.parse(t);Pte(r),Sn.set({devices:r.devices,connectors:r.connectors,subcircuits:r.subcircuits,wireManipulations:r.wireManipulations}),r.translation&&cV(r.translation),r.zoom&&(console.log(r.zoom),uV(r.zoom))}function Cte(){ku();const e=localStorage.getItem("circuitStoreSave");e?e==='{"devices":{},"connectors":[],"subcircuits":{}}'?console.warn("EMPTY on delete, do not set prevCircuitStore just empty stores."):localStorage.setItem("prevCircuitStore",e):console.warn("we saved before deleting so this should not be possible"),localStorage.removeItem("circuitStoreSave")}function Ote(e){ku();const t=Iv("circuitStoreSave");if(!t)return console.log("Tried to load empty circuit"),null;const r=JSON.parse(t),n=parseFloat(localStorage.getItem("canvasZoom")||"1"),i=JSON.parse(localStorage.getItem("canvasTranslation")||'{"x":0,"y":0}');r.zoom=n,r.translation=i;const s=JSON.stringify(r,null,2),o=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(o);e===""&&(e="Circuit");const u=document.createElement("a");u.href=a,u.download=e+".json",u.click(),URL.revokeObjectURL(a),u.remove()}async function Ite(){return new Promise(e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/JSON"),t.click(),t.addEventListener("change",async()=>{await Rte(t),e()}),t.remove()})}async function Rte(e){var n;const t=(n=e.files)==null?void 0:n[0];if(!t)return;const r=await new Promise((i,s)=>{const o=new FileReader;o.onload=a=>{var c;const u=(c=a.target)==null?void 0:c.result;i(u)},o.onerror=a=>{s(new Error("Error reading file"))},o.readAsText(t)});console.log(r),A2(r)}const kte="modulepreload",Mte=function(e,t){return new URL(e,t).href},mO={},Yf=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=Mte(c,n),c in mO)return;mO[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const _=o[m];if(_.href===c&&(!f||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":kte,f||(y.as="script"),y.crossOrigin="",y.href=c,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((m,_)=>{y.addEventListener("load",m),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function Lte(e,t){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function Nte(){const e=()=>Math.floor(Math.random()*256),t=e(),r=e(),n=e();return`rgb(${t},${r},${n})`}const qte={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},yO={"-":"straight","~":"bezier"},lV={"(":")","[":"]","{":"}"},Dte=/[-=~]*>(?:\s*\|(.+?)\|)?/g,Fte=e=>{const t=e.split(`
`),r={parentNodes:[],nodeList:{}};for(const n of t){const{parentNodes:i,childNodes:s,edge:o}=Bte(n);for(const a of i){r.nodeList[a.id]||r.parentNodes.push(a);for(const u of s){if(r.nodeList[a.id]){if(r.nodeList[u.id]&&r.nodeList[u.id].children.some(({node:c})=>c.id===a.id))throw new Error("Circular reference detected");r.nodeList[a.id].children.push({node:r.nodeList[u.id]||u,...o})}else a.children.push({node:r.nodeList[u.id]||u,...o}),r.nodeList[a.id]=a;r.nodeList[u.id]?r.nodeList[u.id].parents.push({node:r.nodeList[a.id]||a}):(u.parents.push({node:r.nodeList[a.id]||a}),r.nodeList[u.id]=u),r.parentNodes=r.parentNodes.filter(c=>c.id!==u.id)}}}return r},Bte=e=>{const t=[],r=[],n=e.trim();let i="";const s=n.match(Dte);if(s)i=s[0];else throw new Error("Invalid edge");const[o,a]=n.split(i);for(const c of o.split("&"))t.push(_O(c));for(const c of a.split("&"))r.push(_O(c));const u=zte(i);return{parentNodes:t,childNodes:r,edge:u}},_O=e=>{e=e.trim();const t=e[0],r=e.slice(1);let n="",i="";const s="Default",o={shape:""},a=[];for(let u=0;u<r.length;u++)if(Vte(r[u]))a.push(r[u]);else if(lV[a[a.length-1]]===r[u]){i=qte[a.join("")];break}else n+=r[u];return o.shape=i,o.content=n,{id:t,data:o,type:s,children:[],parents:[],depth:0,nesting:0}},zte=e=>{e=e.trim();let t="";const[r,n]=e.split("|"),i=r[0];if(i in yO)t=yO[i];else throw new Error("Not a valid edge type");return n?{shape:t,content:n.trim(),length:Math.floor((r.trim().length-1)/2)}:{shape:t,length:Math.floor((r.trim().length-1)/2)}};function Vte(e){return e in lV}function Gte(){return Math.random().toString(36).substring(7)}function $te(e,t){const r=Math.sign(e.x).toString(),n=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${r}${n}${i}${s}`}function Ute(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function bO(e,t){const r=t*(Math.PI/180),n=e.x*Math.cos(r)-e.y*Math.sin(r),i=e.x*Math.sin(r)+e.y*Math.cos(r);return{x:n,y:i}}const wO=(e,t,r,n)=>e+` l ${t} ${r} `+n,ms=Ve({x:0,y:0}),CE=Ve(0),vo=Ve(!1),OE=Ve(!1),fV=ru({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},r=s=>{if(s.touches.length===2){const o=Lte(s.touches[0],s.touches[1]);CE.set(o);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const o=s.touches[0].clientX,a=s.touches[0].clientY;e({x:o,y:a}),vo.set(!0)}},n=s=>{r(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",r)},i=()=>{vo.set(!1),CE.set(0),window.removeEventListener("touchmove",r)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",n,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",i)}});var jte=Gt("<div><div></div></div>");function Hte(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(O,"$groups",r),s=()=>Be(fV,"$cursorPositionRaw",r),o=()=>Be(A(a),"$selectedNodes",r),a=Me(),u=Me(),c=Me(),f=Me(),h=Me(),v=Me(),y=Me(),m=Me(),_=Me();let x=he(t,"graph",8),S=he(t,"anchor",8),P=he(t,"adding",8,!1),T=he(t,"creating",8,!1),E=he(t,"color",8,null);const{groups:O}=x();let N,d=Me();An(C);function C(){N=Array.from(document.querySelectorAll(".svelvet-node")).map(W=>{const{top:D,left:F,width:H,height:ie}=W.getBoundingClientRect();return{id:W.id,top:D,left:F,width:H,height:ie}})}function R(){if(!N)return;const oe=N.reduce((W,D)=>{if(A(h)+S().left<=D.left&&A(f)+S().top<=D.top&&A(h)+S().left+Math.abs(A(c))>=D.left+D.width&&A(f)+S().top+Math.abs(A(u))>=D.top+D.height){const F=D.id,H=x().nodes.get(F);if(!H)return W;W.push(H)}return W},[]);P()?oe.forEach(W=>{o().add(W)}):St(A(a),new Set(oe)),St(A(a),o())}Fe(()=>i(),()=>{Ja(pe(a,i().selected.nodes),"$selectedNodes",r)}),Fe(()=>(s(),qt(S())),()=>{pe(u,s().y-S().y-S().top)}),Fe(()=>(s(),qt(S())),()=>{pe(c,s().x-S().x-S().left)}),Fe(()=>(qt(S()),A(u)),()=>{pe(f,Math.min(S().y,S().y+A(u)))}),Fe(()=>(qt(S()),A(c)),()=>{pe(h,Math.min(S().x,S().x+A(c)))}),Fe(()=>A(f),()=>{pe(v,`${A(f)}px`)}),Fe(()=>A(h),()=>{pe(y,`${A(h)}px`)}),Fe(()=>A(u),()=>{pe(m,`${Math.abs(A(u))}px`)}),Fe(()=>A(c),()=>{pe(_,`${Math.abs(A(c))}px`)}),Fe(()=>(A(c),A(u)),()=>{(A(c)||A(u))&&R()}),li(),gn();var k=jte();let B,z;var U=gt(k);let Y;Gs(U,oe=>pe(d,oe),()=>A(d)),It((oe,W)=>{B=on(k,1,"selection-border svelte-10ds4jd",null,B,oe),z=Nr(k,"",z,{"--prop-selection-box-color":E(),height:A(m),width:A(_),top:A(v),left:A(y)}),Y=on(U,1,"selection-box svelte-10ds4jd",null,Y,W)},[()=>({creating:T()}),()=>({creating:T()})],pn),De(e,k),ir(),n()}const Wte=3,Xte=.1,Yte=10,Kte=100,Jte=50,Zte="#000",Qte="#fff",ere="12px",tre=22,rre=1.4,nre=40,oh={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var ire=vn('<circle class="background-dot svelte-rryw83"></circle>'),sre=vn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),ore=vn('<circle class="background-dot svelte-rryw83"></circle>'),are=vn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),ure=vn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),cre=vn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),lre=Gt('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function fre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(N,"$translationStore",r),s=()=>Be(O,"$scaleStore",r),o=Me(),a=Me(),u=Me(),c=Me(),f=Me(),h=gr("graph");let v=he(t,"style",8,"dots"),y=he(t,"gridWidth",8,tre),m=he(t,"dotSize",8,rre),_=he(t,"bgColor",8,null),x=he(t,"dotColor",8,null),S=he(t,"opacityThreshold",8,3),P=he(t,"majorGrid",8,0),T=he(t,"minOpacity",8,.4);const E=h.transforms,O=E.scale,N=E.translation;let d=Me(),C=Me(),R=Me(),k=Me(),B=Me(),z=Me(1),U=Me(1);Fe(()=>i(),()=>{pe(o,i())}),Fe(()=>s(),()=>{pe(a,s())}),Fe(()=>(A(a),qt(y())),()=>{pe(u,A(a)*y())}),Fe(()=>(A(a),qt(m())),()=>{pe(c,A(a)*m()/2)}),Fe(()=>A(u),()=>{pe(f,A(u)/2)}),Fe(()=>(A(C),A(d),A(R),A(c),A(a),A(o),qt(S()),qt(T())),()=>{var Q,le;pe(C,((Q=A(d))==null?void 0:Q.offsetWidth)||0),pe(R,((le=A(d))==null?void 0:le.offsetHeight)||0),pe(k,(A(C)+A(c))*(1-A(a))/2+A(o).x),pe(B,(A(R)+A(c))*(1-A(a))/2+A(o).y),pe(z,A(a)>S()?1:A(a)/S()+T()),pe(U,A(a)>S()/3?1:A(a)/(S()/3)+T())}),li(),gn();var Y=lre();let oe;var W=gt(Y),D=gt(W),F=gt(D),H=gt(F);{var ie=Q=>{var le=ire();let Ge;It(()=>{ht(le,"r",A(c)),ht(le,"cx",A(f)),ht(le,"cy",A(f)),Ge=Nr(le,"",Ge,{"--calculated-dot-color":x()})}),De(Q,le)},se=(Q,le)=>{{var Ge=Ne=>{var Oe=sre(),Ze=_t(Oe);ht(Ze,"y1",0);let $e;var q=at(Ze);ht(q,"x1",0);let G;It(()=>{ht(Ze,"x1",A(f)),ht(Ze,"x2",A(f)),ht(Ze,"y2",A(u)),ht(Ze,"stroke-width",A(c)),$e=Nr(Ze,"",$e,{"--calculated-dot-color":x()}),ht(q,"y1",A(f)),ht(q,"y2",A(f)),ht(q,"x2",A(u)),ht(q,"stroke-width",A(c)),G=Nr(q,"",G,{"--calculated-dot-color":x()})}),De(Ne,Oe)};Kt(Q,Ne=>{v()==="lines"&&Ne(Ge)},le)}};Kt(H,Q=>{v()==="dots"?Q(ie):Q(se,!1)})}var we=at(F);{var ge=Q=>{var le=ure(),Ge=gt(le);{var Ne=Ze=>{var $e=ore();let q;It(()=>{ht($e,"r",A(c)*2),ht($e,"cx",A(f)),ht($e,"cy",A(f)),q=Nr($e,"",q,{"--calculated-dot-color":x()})}),De(Ze,$e)},Oe=(Ze,$e)=>{{var q=G=>{var K=are(),J=_t(K);ht(J,"y1",0);let Ee;var fe=at(J);ht(fe,"x1",0);let Te;It(()=>{ht(J,"x1",A(f)),ht(J,"x2",A(f)),ht(J,"y2",A(u)*P()),ht(J,"stroke-width",A(c)*1.2),Ee=Nr(J,"",Ee,{"--calculated-dot-color":x()}),ht(fe,"y1",A(f)),ht(fe,"y2",A(f)),ht(fe,"x2",A(u)*P()),ht(fe,"stroke-width",A(c)*1.2),Te=Nr(fe,"",Te,{"--calculated-dot-color":x()})}),De(G,K)};Kt(Ze,G=>{v()==="lines"&&G(q)},$e)}};Kt(Ge,Ze=>{v()==="dots"?Ze(Ne):Ze(Oe,!1)})}It(()=>{ht(le,"x",A(k)),ht(le,"y",A(B)),ht(le,"width",A(u)*P()),ht(le,"height",A(u)*P())}),De(Q,le)};Kt(we,Q=>{P()>0&&Q(ge)})}var te=at(D),ue=at(te);{var re=Q=>{var le=cre();It(()=>ht(le,"opacity",A(U))),De(Q,le)};Kt(ue,Q=>{P()>0&&Q(re)})}Gs(Y,Q=>pe(d,Q),()=>A(d)),It(()=>{oe=Nr(Y,"",oe,{"--calculated-background-color":_()}),ht(F,"x",A(k)),ht(F,"y",A(B)),ht(F,"width",A(u)),ht(F,"height",A(u)),ht(te,"opacity",A(z))}),De(e,Y),ir(),n()}var hre=Gt('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function dre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(f(),"$position",r),s=()=>Be(y,"$width",r),o=()=>Be(m,"$height",r),a=()=>Be(h(),"$color",r),u=Me();let c=he(t,"dimensions",8),f=he(t,"position",8),h=he(t,"color",8),v=he(t,"groupName",8);const{width:y,height:m}=c(),_=Gl();function x(){_("groupClick",{groupName:v()})}Fe(()=>qt(v()),()=>{pe(u,`${v()}-bounding-box`)}),li(),gn();var S=hre();let P;var T=gt(S);let E;It(()=>{ht(S,"id",A(u)),P=Nr(S,`border: solid 4px ${a()??""};`,P,{top:`${i().y}px`,left:`${i().x}px`,width:`${s()}px`,height:`${o()}px`}),E=Nr(T,"",E,{"background-color":a()})}),ar("contextmenu",S,Fs(ho(function(O){hn.call(this,t,O)}))),ar("mousedown",S,Fs(ho(x))),De(e,S),ir(),n()}function pre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(o,"$groupBoxes",r),o=gr("graph").groupBoxes;gn();var a=Ut(),u=_t(a);Pi(u,1,()=>Array.from(i()),([c,f])=>c,(c,f)=>{let h=()=>A(f)[0];dre(c,Vl(()=>A(f)[1],{get groupName(){return h()},$$events:{groupClick(y){hn.call(this,t,y)}}}))}),De(e,a),ir(),n()}function n0(e){const t=e.style.width,r=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const n=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=r,[n,i]}function hV(e,t,r,n,i){const s={x:0,y:0},o=n.x-i.left-i.width/2,a=n.y-i.top-i.height/2,u=(o-r.x)/e,c=(a-r.y)/e;return s.x=o-u*t,s.y=a-c*t,s}function dV(e,t,r){const n=t*r,i=e-n;return Number(Math.max(Xte,Math.min(Wte,i)).toFixed(9))}const $h=(e,t,r,n,i,s,o)=>{const{clientX:a,clientY:u}=e,c=s,f=a-r,h=u-t,v=o.x,y=o.y,m=n*(1-s)/2,_=i*(1-s)/2,x=f-v-m,S=h-y-_,P=x/c,T=S/c;return{x:P,y:T}};function vre(e,t,r){const{top:n,left:i,width:s,height:o}=st(e),a=st(t.scale),u=st(t.translation);return{scaled:$h({clientX:r.x,clientY:r.y},n,i,s,o,a,u),scale:a}}function gre(e,t,r){const{scale:n,translation:i}=r,s=st(n),o=st(i),a=t.x-e.x,u=t.y-e.y,c=o.x+a*s,f=o.y+u*s;return{x:c,y:f}}function mre(e,t){return e.x*t.x+e.y*t.y}function yre(e,t,r){const n=[],i=t.x-e.x,s=t.y-e.y,o=bre(e.direction,t.direction),a=mre(e.direction,t.direction)===0,u=_re(e,t),c=Mn(e.direction,-1,-1),f=Mn(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},v=Mn(e.direction,i-r*e.direction.x*(a?1:o?0:2),s-r*e.direction.y*(a?1:o?0:2)),y=Mn(t.direction,i+r*t.direction.x*(a?1:o?0:2),s+r*t.direction.y*(a?1:o?0:2)),m=Math.sign(v.x)===-1||Math.sign(v.y)===-1,_=Math.sign(y.x)===1||Math.sign(y.y)===1,x=Math.abs(i),S=Math.abs(s),P=Mn(e.direction,r,r),T=Mn(f,r,r),E=Mn(t.direction,r,r),O=Mn(e.direction,x,S),N=Mn(f,x,S),d=Mn(e.direction,x/2,S/2),C=Mn(f,x/2,S/2),R=Mn(h,i,s),k=!u&&!_&&!m,B=e.x+P.x,z=e.y+P.y,U=t.x+E.x,Y=t.y+E.y;if(m&&n.push(P),u&&!_&&!m)n.push(O),n.push(N);else if(o)m||n.push(Mn(e.direction,r+x,r+S)),n.push(R),_||n.push(Mn(f,r+x,r+S));else if(k)n.push(d),n.push(R),n.push(C);else if(m&&_)if(a){const oe=Math.abs(B-U),W=Math.abs(z-Y);n.push(Mn(t.direction,x<r*2?t.direction.x*(i+t.direction.x*r):x+r,S<r*2?t.direction.y*(s+t.direction.y*r):S+r)),n.push(Mn(c,oe,W))}else{const oe=Math.abs(B-U),W=Math.abs(z-Y);n.push(Mn(h,i/2,s/2)),n.push(Mn(t.direction,oe,W)),n.push(Mn(h,i/2,s/2))}else if(m){const oe=Math.abs(B-t.x),W=Math.abs(z-t.y);n.push(Mn(f,x<r*2?x-r:x/2,S<r*2?S-r:S/2)),n.push(Mn(c,oe,W)),n.push(Mn(f,Math.max(r,x/2),Math.max(r,S/2)))}else if(_){const oe=Math.abs(U-e.x),W=Math.abs(Y-e.y);n.push(Mn(e.direction,Math.max(r,x/2),Math.max(r,S/2))),n.push(Mn(t.direction,oe,W)),n.push(Mn(e.direction,x<r*2?x-r:x/2,S<r*2?S-r:S/2))}return _&&n.push(T),n}function _re(e,t){const{x:r,y:n}=e.direction,{x:i,y:s}=t.direction,o=t.x-e.x,a=t.y-e.y;return r*s===i*n?!1:Math.sign(a)===Math.sign(n+s)!=(Math.sign(o)===Math.sign(r+i))}function Mn(e,t,r){return{x:e.x*t,y:e.y*r}}function bre(e,t){return e.x===t.x&&e.y===t.y}function wre(e,t){const{width:r,height:n}=e,{top:i,left:s,right:o,bottom:a}=t,u=o-s,c=a-i;if(!u||!c)return{x:null,y:null,scale:null};const f=s+u/2,h=i+c/2,v=Math.min(r/u,n/c)*.8,y=r/2,m=n/2,_=y-f,x=m-h;return{x:_*v,y:x*v,scale:v}}const lp=(e,t,r)=>Math.min(Math.abs(e||t)/2,r);function i0(e,t){const n=e.getTotalLength()*t;return e.getPointAtLength(n)}function Yp(){const e=new Map,{subscribe:t,set:r,update:n}=Ve(e);return{subscribe:t,set:r,update:n,add:(s,o)=>(n(a=>(a.set(o,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let o=!1;return n(a=>(a.delete(s),o=!0,a)),o},count:()=>e.size}}function xre(e){const{id:t,inputs:r,outputs:n,resizable:i,dimensions:s,editable:o,direction:a,zIndex:u,position:c,selectionColor:f,borderWidth:h,edge:v}=e,{bgColor:y,borderColor:m,rotation:_,borderRadius:x,connections:S,textColor:P,locked:T,group:E}=e,O=Yp(),N=(R="self")=>{st(O).forEach(k=>{(R==="self"||st(k.direction)===R)&&k.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:Ve({x:(c==null?void 0:c.x)||0,y:(c==null?void 0:c.y)||0}),dimensions:{width:Ve((s==null?void 0:s.width)||0),height:Ve((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:Ve(E||null),locked:Ve(T||!1),inputs:Ve(r),outputs:Ve(n),recalculateAnchors:N,rotation:Ve(_||0),moving:Ve(!1),resizingWidth:Ve(!1),resizingHeight:Ve(!1),rotating:Ve(!1),editable:Ve(o||!1),resizable:Ve(i),anchors:O,zIndex:Ve(u||2),collapsed:Ve(!1),edge:v||null,borderRadius:Ve(x),bgColor:Ve(y||null),direction:Ve(a),label:Ve(e.label||""),borderColor:Ve(m||null),borderWidth:Ve(h),selectionColor:Ve(f||null),textColor:Ve(P||null),connections:Ve(S)}}function Sre(e,t){const r=[e,t].sort();return`${r[0]}+${r[1]}`}function xO(e,t,r){var a,u,c,f,h;const{source:n,target:i}=e,o={id:n.id&&i.id?Sre(n.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:Ve((r==null?void 0:r.type)||null),color:(r==null?void 0:r.color)||Ve(null),width:Ve((r==null?void 0:r.width)||0),animated:Ve((r==null?void 0:r.animated)||!1),rendered:Ve(!1),start:(r==null?void 0:r.start)||null,end:(r==null?void 0:r.end)||null};if(r!=null&&r.disconnect&&(o.disconnect=!0),r!=null&&r.label){const v={text:Ve(r==null?void 0:r.label.text),color:Ve(((a=r==null?void 0:r.label)==null?void 0:a.color)||Zte),textColor:Ve(((u=r==null?void 0:r.label)==null?void 0:u.textColor)||Qte),fontSize:Ve(((c=r==null?void 0:r.label)==null?void 0:c.fontSize)||ere),dimensions:{width:Ve(((f=r==null?void 0:r.label.dimensions)==null?void 0:f.width)||Kte),height:Ve(((h=r==null?void 0:r.label.dimensions)==null?void 0:h.height)||Jte)},borderRadius:Ve((r==null?void 0:r.label.borderRadius)||Yte)};o.label=v}return o}function Ere(){const e=new Map,t=new Set,{subscribe:r,set:n,update:i}=Ve(e),s={subscribe:r,set:n,update:i,add:(o,a)=>{if(typeof a!="string"){const u=Array.from(a),c=u[0],f=u[1];if(c.connected.update(h=>h.add(f)),f.connected.update(h=>h.add(c)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(o,"connection"))}i(u=>(u.set(a,o),u))},getAll:()=>Array.from(e.values()),get:o=>e.get(o)||null,match:(...o)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:o.every(u=>u?a.has(u):!0)),fetch:(o,a)=>{const u=Array.from(e.keys()).filter(c=>c==="cursor"?!1:[o,a].every(f=>f?c.has(f):!0))[0];return e.get(u)||null},delete:o=>{if(typeof o!="string"){const u=Array.from(o),c=u[0],f=u[1];c.connected.update(h=>(h.delete(f),h)),f.connected.update(h=>(h.delete(c),h))}let a=!1;return i(u=>{const c=u.get(o);return c&&(u.delete(o),a=!0,typeof o!="string"&&t.forEach(f=>f(c,"disconnection"))),u}),a},onEdgeChange:o=>(t.add(o),()=>t.delete(o)),count:()=>e.size};return s}function Are(e,t,r,n){return zs([e,t,r,n],([s,o,a,u])=>{const c={clientX:s.x,clientY:s.y};return $h(c,o.top,o.left,o.width,o.height,u,a)})}function Tre(e,t,r,n){const i=Ve({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=Ve({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let o,a=st(t),u=st(r),c=st(n),f=a.width/u,h=a.height/u;function v(){const{x:m,y:_}=$h({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,u,c),x=st(s);i.set({top:Math.min(x.top,_),left:Math.min(x.left,m),right:Math.max(x.right,m+f),bottom:Math.max(x.bottom,h+_)})}function y(m=!1){let _=1/0,x=1/0,S=-1/0,P=-1/0;for(const T of e.getAll()){console.log("dentro del for, este es e node:",T);const{x:E,y:O}=st(T.position),N=st(T.dimensions.width),d=st(T.dimensions.height);x=Math.min(x,E),_=Math.min(_,O),S=Math.max(S,E+N),P=Math.max(P,O+d)}s.set({top:_,left:x,right:S,bottom:P}),v(),m&&(o=requestAnimationFrame(()=>y(m)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),y()}),OE.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),vo.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),t.subscribe(()=>{a=st(t),f=a.width/u,h=a.height/u,v()}),r.subscribe(()=>{u=st(r),f=a.width/u,h=a.height/u,v()}),n.subscribe(()=>{c=st(n),v()}),{graphBounds:i,nodeBounds:s}}function Pre(e,t,r){const{width:n,height:i,top:s,left:o}=e,a={clientX:n/2,clientY:i/2};return $h(a,s,o,n,i,r,t)}function pV(e,t){const{zoom:r,editable:n,translation:i,direction:s,locked:o,edge:a,nodes:u}=t,c=Ve({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),f=Ve({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=Ve(r),v=Ve(!1),y=Yp(),m=Tre(y,f,h,c),_=zs([f,c,h],([S,P,T])=>Pre(S,P,T));return{id:e,nodes:y,edges:Ere(),transforms:{translation:c,scale:h},maxZIndex:Ve(2),dimensions:f,bounds:m,center:_,mounted:v,direction:s||"LR",editable:n||!1,edge:a||null,editing:Ve(null),cursor:Are(fV,f,c,h),locked:Ve(o||!1),groups:Ve({selected:{parent:Ve(null),nodes:Ve(new Set)},hidden:{parent:Ve(null),nodes:Ve(new Set)}}),groupBoxes:Yp(),activeGroup:Ve(null),initialNodePositions:Ve([])}}function Cre(e,t,r,n,i,s,o,a,u,c,f,h){const{width:v,height:y}=i,{x:m,y:_}=n,x=st(t.position),S=Ve({x:m-x.x+v/2,y:_-x.y+y/2}),P=zs([t.position,S],([R,k])=>({x:R.x+k.x,y:R.y+k.y})),T=e.transforms,E=e.dimensions,O=Ve(u||"self"),N=()=>{const R=document.getElementById(r),k=st(O),B=oh[k];if(!R)return;const{x:z,y:U,width:Y,height:oe}=R.getBoundingClientRect(),W=st(S),D=st(P),{scaled:F,scale:H}=vre(E,T,{x:z,y:U}),ie=F.x-D.x,se=F.y-D.y;S.set({x:W.x+ie+Y/H/2+B.x*Y/H/2,y:W.y+se+oe/H/2+B.y*oe/H/2})},d=zs([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([R,k,B,z])=>R||k||B||z),C=zs([t.rotation],([R])=>R);return{id:r,position:P,offset:S,direction:O,dynamic:Ve(c||!1),type:a,edge:o,moving:d,mounted:Ve(!1),recalculatePosition:N,connected:Ve(new Set),store:s||null,inputKey:f||null,edgeColor:h||Ve(null),rotation:C,node:t}}const mh=Yp(),fp={width:200,height:100};function Mp(e,t){return{x:Math.round(e/fp.width)*fp.width,y:Math.round(t/fp.height)*fp.height}}const hp=10;function vV(e){const t=st(e);return Array.from(t).map(n=>st(n.position))}function SO(e,t){console.log("moveNodes called");let r;const n=st(e.groups),i=st(e.activeGroup);if(console.log("Graph Groups:",n),console.log("Active Group:",i),!i)return;const s=n[i].nodes;if(!s)return;const o=st(e.initialNodePositions),{x:a,y:u}=st(ms),c=Array.from(st(s)),f=st(e.groupBoxes);console.log("Group Boxes:",f),c.forEach(v=>v.moving.set(!0)),h();function h(){const v=st(e.cursor);let y=v.x-a,m=v.y-u;if(t){const x=Mp(y,m);y=x.x,m=x.y}const _={x:y,y:m};c.forEach((x,S)=>{const{group:P,position:T}=x,E=o[S];let O;if(i==="selected"){const N=st(P);N&&(O=f.get(N))}if(!O)Ore(E,_,T);else{const N=st(x.dimensions.width),d=st(x.dimensions.height),C=mV(O,N,d);gV(E,_,T,C)}}),st(vo)?r=requestAnimationFrame(h):cancelAnimationFrame(r)}}function Ore(e,t,r){r.set({x:e.x+t.x,y:e.y+t.y})}function gV(e,t,r,n){r.set({x:Math.min(Math.max(n.left,e.x+t.x),n.right),y:Math.min(Math.max(n.top,e.y+t.y),n.bottom)})}function mV(e,t,r){const{x:n,y:i}=st(e.position);return console.log("Group Box Position:",{x:n,y:i}),{left:n+hp,right:n+st(e.dimensions.width)-t-hp,top:i+hp,bottom:i+st(e.dimensions.height)-r-hp}}function EO(e=1,t,r,n=.1){const i=st(t),{width:s,height:o,top:a,left:u}=i,c=r.scale,f=st(r.translation),h=st(c),v=dV(h,e,n),y=hV(h,v,f,{x:s/2+u,y:o/2+a},i);c.set(v),r.translation.set(y)}var Ire=Gt('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function Rre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(v,"$translation",r),s=()=>Be(h,"$scale",r),o=()=>Be(y,"$cursor",r),a=Me(),u=Me(),c=gr("graph"),f=c.transforms,h=f.scale,v=f.translation,y=c.cursor;let m=he(t,"isMovable",8),_=Me(),x=Me(!1);function S(){St(v,gre(st(ms),o(),f)),pe(_,requestAnimationFrame(S))}Fe(()=>i(),()=>{pe(a,i())}),Fe(()=>(A(a),s()),()=>{pe(u,`translate(${A(a).x}px, ${A(a).y}px) scale(${s()})`)}),Fe(()=>(qt(m()),A(x),A(_)),()=>{m()&&!A(x)?(pe(x,!0),pe(_,requestAnimationFrame(S))):(!m()||!A(x))&&(pe(x,!1),cancelAnimationFrame(A(_)))}),li(),gn();var P=Ire();let T;var E=gt(P);mr(E,t,"default",{},null),It(()=>T=Nr(P,"",T,{transform:A(u)})),ar("contextmenu",P,gh(Fs(function(O){hn.call(this,t,O)}))),ar("click",P,gh(Fs(function(O){hn.call(this,t,O)}))),ar("touchstart",P,gh(Fs(function(O){hn.call(this,t,O)}))),De(e,P),ir(),n()}var kre=Gt("<!> <!>",1);function Mre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(h,"$activeGroup",r),s=()=>Be(vo,"$tracking",r),o=()=>Be(m,"$cursor",r),a=()=>Be(v,"$groups",r);console.log("Componente GraphRenderer.svelte");const u=gr("graph"),c=gr("snapTo");let f=he(t,"isMovable",8);const h=u.activeGroup,v=u.groups,y=u.initialNodePositions,m=u.cursor;function _(x){St(vo,!0);const{groupName:S}=x.detail;St(h,S),St(ms,o()),St(y,vV(a()[S].nodes))}Fe(()=>(i(),s(),SO),()=>{i()&&s()&&SO(u,c)}),li(),gn(),Rre(e,{get isMovable(){return f()},children:(x,S)=>{var P=kre(),T=_t(P);mr(T,t,"default",{},null);var E=at(T,2);pre(E,{$$events:{groupClick:_}}),De(x,P)},$$slots:{default:!0}}),ir(),n()}const Lre=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],Nre=new Set(Lre),AO=e=>Nre.has(e);var qre=Gt('<input type="text">');function Dre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(o,"$textStore",r);let s=he(t,"placeholder",8);const o=gr("textStore");gn();var a=qre();It(()=>ht(a,"placeholder",s())),ar("keydown",a,ho(function(u){hn.call(this,t,u)})),ar("click",a,ho(function(u){hn.call(this,t,u)})),ar("mousedown",a,ho(function(u){hn.call(this,t,u)})),_2(a,i,u=>St(o,u)),De(e,a),ir(),n()}const Fre=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var Bre=Gt("<div><!></div>"),zre=Gt('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function Vre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(re(),"$groups",r),s=()=>Be(Ee,"$position",r),o=()=>Be(qr,"$selectedNodes",r),a=()=>Be(vr,"$hiddenNodes",r),u=()=>Be(Vr,"$resized",r),c=()=>Be(D,"$duplicate",r),f=()=>Be(le(),"$centerPoint",r),h=()=>Be(fe,"$widthStore",r),v=()=>Be(Te,"$heightStore",r),y=()=>Be(ms,"$initialClickPosition",r),m=()=>Be(F,"$graphDOMElement",r),_=()=>Be(Ie,"$zIndex",r),x=()=>Be(Q(),"$maxZIndex",r),S=()=>Be(ue(),"$locked",r),P=()=>Be(Le,"$nodeLock",r),T=()=>Be(Ue,"$editable",r),E=()=>Be(bt,"$group",r),O=()=>Be(Jt,"$rotation",r),N=()=>Be(Se,"$bgColor",r),d=()=>Be(ft,"$textColor",r),C=()=>Be(dt,"$borderColor",r),R=()=>Be(Ce,"$selectionColor",r),k=()=>Be(Ye,"$borderRadius",r),B=()=>Be(it,"$borderWidth",r),z=Me(),U=Me(),Y=Me(),oe=Me(),W=gr("mounted"),D=gr("duplicate"),F=gr("graphDOMElement"),H=Gl();let ie=he(t,"node",8),se=he(t,"isDefault",8),we=he(t,"useDefaults",8),ge=he(t,"center",8),te=he(t,"nodeStore",8),ue=he(t,"locked",8),re=he(t,"groups",8),Q=he(t,"maxZIndex",8),le=he(t,"centerPoint",8),Ge=he(t,"cursor",8),Ne=he(t,"initialNodePositions",8),Oe=he(t,"activeGroup",8),Ze=he(t,"editing",8),$e=he(t,"dimensionsProvided",8,!1),q=he(t,"title",8);const G=Ve(0),K=Ve(null),J=ie().id,Ee=ie().position,fe=ie().dimensions.width,Te=ie().dimensions.height,Ce=ie().selectionColor,Ue=ie().editable,Le=ie().locked,Ie=ie().zIndex,Se=ie().bgColor,Ye=ie().borderRadius,ft=ie().textColor,bt=ie().group,dt=ie().borderColor,it=ie().borderWidth,Jt=ie().rotation,{selected:Sr,hidden:sr}=i(),vr=sr.nodes,qr=Sr.nodes,Vr=Ve(!1);Hr("node",ie()),Hr("anchorsMounted",G),Hr("resized",Vr),Hr("nodeConnectEvent",K),An(()=>{if(ge()){const jt={x:f().x-h()/2,y:f().y-v()/2};ie().position.set(jt),vo.set(!0),vo.set(!1)}W.update(jt=>jt+1)}),au(()=>{A(U)&&(o().delete(ie()),St(qr,o())),W.update(jt=>jt-1)});function In(){A(U)?(ie()&&o().delete(ie()),St(qr,o())):(ie()&&o().add(ie()),St(qr,o()))}function ur(jt){St(ms,st(Ge())),m().focus(),_()!==x()&&_()!==1/0&&St(Ie,fee(Q(),x()));const Gr=jt.target;if(!Fre.has(Gr.tagName)&&(jt.preventDefault(),H("nodeClicked",{node:ie(),e:jt}),!(S()||P()))){if("touches"in jt){if(jt.touches&&jt.touches.length>1)return}else jt.button===2&&T()&&St(Ze(),ie());St(vo,!0),Mr(jt)}}function Mr(jt){let Gr,Un,Rn=!1;const Yr=E();Yr&&(Gr=i()[Yr],Un=st(Gr.parent),Rn=Un===ie()),Rn?St(Oe(),Yr):St(Oe(),"selected"),!jt.shiftKey&&A(U)?St(Oe(),"selected"):(!jt.shiftKey&&!A(U)&&!jt.shiftKey&&(o().clear(),St(qr,o())),In()),St(Ne(),vV(i().selected.nodes))}function Tn(){te().delete(J)}function Pn(jt){const Gr=st(Ge()),Un=Gr.x-y().x,Rn=Gr.y-y().y;Math.abs(Un)+Math.abs(Rn)<4&&H("nodeReleased",{e:jt,node:ie()}),St(K,jt)}function xn(jt){return jt.addEventListener("mousedown",ur),jt.addEventListener("touchstart",ur),{destroy(){jt.removeEventListener("mousedown",ur),jt.removeEventListener("touchstart",ur)}}}Fe(()=>s(),()=>{pe(z,s())}),Fe(()=>(o(),qt(ie())),()=>{pe(U,o().has(ie()))}),Fe(()=>(a(),qt(ie())),()=>{pe(Y,a().has(ie()))}),Fe(()=>(qt($e()),u()),()=>{pe(oe,$e()||u())}),Fe(()=>(A(U),c(),qt(ie())),()=>{A(U)&&c()&&H("duplicate",ie())}),li(),gn();var Xn=Ut(),oi=_t(Xn);{var Ht=jt=>{var Gr=zre();ht(Gr,"id",J);let Un;ht(Gr,"tabindex",0);let Rn;var Yr=gt(Gr);{var Yn=Bt=>{var ct=Bre();Nr(ct,"",{},{width:"fit-content",height:"fit-content"});var Ke=gt(ct);mr(Ke,t,"default",{grabHandle:xn,get selected(){return A(U)},destroy:Tn},null),oO(ct,"clientHeight",wt=>St(Te,wt)),oO(ct,"clientWidth",wt=>St(fe,wt)),De(Bt,ct)},yi=Bt=>{var ct=Ut(),Ke=_t(ct);mr(Ke,t,"default",{grabHandle:xn,get selected(){return A(U)},destroy:Tn},null),De(Bt,ct)};Kt(Yr,Bt=>{A(oe)?Bt(yi,!1):Bt(Yn)})}var tn=at(Yr,2),Kn=gt(tn);mr(Kn,t,"anchorWest",{},null);var Bn=at(tn,2),_i=gt(Bn);mr(_i,t,"anchorEast",{},null);var Je=at(Bn,2),Ct=gt(Je);mr(Ct,t,"anchorNorth",{},null);var Lt=at(Je,2),Ft=gt(Lt);mr(Ft,t,"anchorSouth",{},null),ts(()=>ar("contextmenu",Gr,Fs(ho(function(Bt){hn.call(this,t,Bt)})))),ts(()=>ar("mouseup",Gr,Pn)),so(Gr,Bt=>xn==null?void 0:xn(Bt)),It(Bt=>{Un=on(Gr,1,"svelvet-node svelte-1iknrz0",null,Un,Bt),ht(Gr,"title",q()),Rn=Nr(Gr,"",Rn,{top:`${A(z).y??""}px`,left:`${A(z).x??""}px`,"z-index":_(),width:A(oe)?h()+"px":"fit-content",height:A(oe)?v()+"px":"fit-content",transform:`rotate(${O()??""}deg)`,"--prop-background-color":N()||(se()||we()?null:"transparent"),"--prop-text-color":d(),"--prop-border-color":C(),"--prop-selection-color":R(),"--prop-border-radius":k()?`${k()}px`:se()||we()?null:"0px","--prop-border-width":B()||(se()||we()?null:"0px")}),ht(tn,"id",`anchors-west-${ie().id}`),ht(Bn,"id",`anchors-east-${ie().id}`),ht(Je,"id",`anchors-north-${ie().id}`),ht(Lt,"id",`anchors-south-${ie().id}`)},[()=>({selected:A(U),locked:S()||P()})],pn),De(jt,Gr)};Kt(oi,jt=>{A(Y)||jt(Ht)})}De(e,Xn),ir(),n()}var Gre=Gt("<div></div> <div></div>",1),$re=Gt("<div></div> <div></div>",1),Ure=Gt("<div></div>"),jre=Gt("<div></div>"),Hre=Gt("<!> <!> <!> <!>",1);function Wre(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(D,"$position",r),s=()=>Be(ge,"$widthStore",r),o=()=>Be(we,"$heightStore",r),a=()=>Be(H,"$resizingHeight",r),u=()=>Be(te,"$cursor",r),c=()=>Be(se,"$nodeRotation",r),f=()=>Be(F,"$resizingWidth",r),h=()=>Be(ie,"$rotating",r),v=()=>Be(ms,"$initialClickPosition",r),y=Me(),m=Me(),_=Me(),x=gr("graph"),S=gr("node"),P=gr("resized");let T=he(t,"width",8,!1),E=he(t,"height",8,!1),O=he(t,"rotation",8,!1),N=he(t,"minHeight",12,0),d=he(t,"minWidth",12,0),C,R=T(),k=T(),B=E(),z=E(),U=T()&&E(),Y=0,oe=0,W=Me(st(S.position));const D=S.position,F=S.resizingWidth,H=S.resizingHeight,ie=S.rotating,se=S.rotation,we=S.dimensions.height,ge=S.dimensions.width,te=x.cursor;let ue=Me(),re=Me(),Q=Me(1);An(()=>{try{C=document.querySelector(`#${S.id}`),C&&(Ce=>(d(Ce[0]),N(Ce[1])))(n0(C))}catch(Ce){console.error(Ce)}});function le(Ce,Ue){const Le=Se=>{Se.stopPropagation(),Se.preventDefault(),Ue.left||Ue.top?pe(Q,-1):pe(Q,1),OE.set(!0),St(ms,st(te)),pe(ue,s()),pe(re,o()),pe(W,i()),Ue.both?St(F,!0):St(F,!1),St(F,Ue.left||Ue.right||Ue.both||!1),St(H,Ue.top||Ue.bottom||Ue.both||!1),C&&(Ye=>(d(Ye[0]),N(Ye[1])))(n0(C)),window.addEventListener("mouseup",Ie)},Ie=()=>{St(F,!1),St(H,!1),OE.set(!1),window.removeEventListener("mouseup",Ie)};return Ce.addEventListener("mousedown",Le),{destroy(){Ce.removeEventListener("mousedown",Le)}}}function Ge(Ce){const Ue=Ie=>{Ie.stopPropagation(),Ie.preventDefault(),Y=c(),St(ms,st(te));const Se=v().x-A(_).x,Ye=v().y-A(_).y;oe=Math.atan2(Ye,Se),St(ie,!0),window.addEventListener("mouseup",Le)},Le=()=>{St(ie,!1),window.removeEventListener("mouseup",Le)};return Ce.addEventListener("mousedown",Ue),{destroy(){Ce.removeEventListener("mousedown",Ue)}}}function Ne(){const Ce=st(te),Ue=Ce.x-A(_).x,Le=Ce.y-A(_).y,Ie=Math.atan2(Le,Ue),Se=oe-Ie;return Y-Oe(Se)}function Oe(Ce){return Ce*(180/Math.PI)}mee(()=>{C&&(Ce=>(d(Ce[0]),N(Ce[1])))(n0(C)),s()<d()&&P.set(!1),o()<N()&&P.set(!1)}),Fe(()=>(h(),u()),()=>{h()&&(u(),St(se,Ne()))}),Fe(()=>(a(),u(),qt(N()),A(re),A(Q),A(W),c()),()=>{if(a()){const Ce=st(ms),Ue=u(),Le=Math.max(N(),A(re)+(Ue.y-Ce.y)*A(Q));Le>N()?(P.set(!0),St(we,Le)):P.set(!1),A(Q)===-1&&St(D,{x:A(W).x,y:A(W).y+Ue.y-Ce.y}),c()!==0&&S.position.update(Ie=>({y:A(W).y-(Le-A(re))/2,x:Ie.x}))}}),Fe(()=>(f(),u(),qt(d()),A(ue),A(Q),A(W),c()),()=>{if(f()){const Ce=st(ms),Ue=u(),Le=Math.max(d(),A(ue)+(Ue.x-Ce.x)*A(Q));Le>d()?(P.set(!0),St(ge,Le)):P.set(!1),A(Q)===-1&&St(D,{x:A(W).x+Ue.x-Ce.x,y:A(W).y}),c()!==0&&S.position.update(Ie=>({x:A(W).x-(Le-A(ue))/2,y:Ie.y}))}}),Fe(()=>i(),()=>{pe(y,i().x)}),Fe(()=>i(),()=>{pe(m,i().y)}),Fe(()=>(A(y),s(),A(m),o()),()=>{pe(_,{x:A(y)+s()/2,y:A(m)+o()/2})}),li(),gn();var Ze=Hre(),$e=_t(Ze);{var q=Ce=>{var Ue=Gre(),Le=_t(Ue);let Ie;so(Le,(ft,bt)=>le==null?void 0:le(ft,bt),()=>({left:R}));var Se=at(Le,2);let Ye;so(Se,(ft,bt)=>le==null?void 0:le(ft,bt),()=>({right:k})),It((ft,bt)=>{Ie=on(Le,1,"left svelte-1ryxg7v",null,Ie,ft),Ye=on(Se,1,"right svelte-1ryxg7v",null,Ye,bt)},[()=>({width:T()}),()=>({width:T()})],pn),De(Ce,Ue)};Kt($e,Ce=>{T()&&Ce(q)})}var G=at($e,2);{var K=Ce=>{var Ue=$re(),Le=_t(Ue);let Ie;so(Le,(ft,bt)=>le==null?void 0:le(ft,bt),()=>({top:B}));var Se=at(Le,2);let Ye;so(Se,(ft,bt)=>le==null?void 0:le(ft,bt),()=>({bottom:z})),It((ft,bt)=>{Ie=on(Le,1,"top svelte-1ryxg7v",null,Ie,ft),Ye=on(Se,1,"bottom svelte-1ryxg7v",null,Ye,bt)},[()=>({height:E()}),()=>({height:E()})],pn),De(Ce,Ue)};Kt(G,Ce=>{E()&&Ce(K)})}var J=at(G,2);{var Ee=Ce=>{var Ue=Ure();on(Ue,1,"svelte-1ryxg7v",null,{},{both:U}),so(Ue,(Le,Ie)=>le==null?void 0:le(Le,Ie),()=>({both:U})),De(Ce,Ue)};Kt(J,Ce=>{U&&Ce(Ee)})}var fe=at(J,2);{var Te=Ce=>{var Ue=jre();let Le;so(Ue,Ie=>Ge==null?void 0:Ge(Ie)),It(Ie=>Le=on(Ue,1,"svelte-1ryxg7v",null,Le,Ie),[()=>({rotation:O()})],pn),De(Ce,Ue)};Kt(fe,Ce=>{O()&&Ce(Te)})}De(e,Ze),ir(),n()}var Xre=Gt("<div></div>");function Yre(e,t){let r=he(t,"output",8),n=he(t,"input",8),i=he(t,"connecting",8),s=he(t,"connected",8),o=he(t,"hovering",8),a=he(t,"bgColor",8);var u=Xre();let c,f;It(h=>{c=on(u,1,"svelvet-anchor svelte-19t6skv",null,c,h),f=Nr(u,"",f,{"--prop-anchor-color":a()})},[()=>({output:r(),input:n(),connected:s(),connecting:i(),hovering:o()})],pn),De(e,u)}let s0;function Kre(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const r=document.querySelector(".svelvet-graph-wrapper");r&&r.appendChild(e)}var Jre=vn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),Zre=vn("<path></path>"),Qre=Gt('<div class="default-label svelte-ppcocz"> </div>'),ene=vn('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),tne=vn('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function IE(e,t){var Dt,rn;const r=m2(t);nr(t,!1);const[n,i]=Xr(),s=()=>Be(jt,"$sourceDynamic",n),o=()=>Be(Gr,"$targetDynamic",n),a=()=>Be(A(d),"$edgeColor",n),u=()=>Be(A(C),"$edgeLabel",n),c=()=>Be(oi,"$sourcePositionStore",n),f=()=>Be(Ht,"$targetPositionStore",n),h=()=>Be(Yr,"$sourceNodePositionStore",n),v=()=>Be(Yn,"$targetNodePositionStore",n),y=()=>Be(Tn,"$sourceDirection",n),m=()=>Be(xn,"$sourceRotation",n),_=()=>Be(Pn,"$targetDirection",n),x=()=>Be(Xn,"$targetRotation",n),S=()=>Be(yi,"$edgeType",n),P=()=>Be(Un,"$sourceMoving",n),T=()=>Be(Rn,"$targetMoving",n),E=()=>Be(A($e),"$sourceZIndex",n),O=()=>Be(A(q),"$targetZIndex",n),N=Me(),d=Me(),C=Me(),R=Me(),k=Me(),B=Me(),z=Me(),U=Me(),Y=Me(),oe=Me(),W=Me(),D=Me(),F=Me(),H=Me(),ie=Me(),se=Me(),we=Me(),ge=Me(),te=Me(),ue=Me(),re=Me(),Q=Me(),le=Me(),Ge=Me(),Ne=Me(),Oe=Me(),Ze=Me(),$e=Me(),q=Me(),G=Me(),K=Me(),J=gr("edgeStore"),Ee=gr("edgeStyle"),fe=gr("endStyles"),Te=gr("raiseEdgesOnSelect"),Ce=gr("edgesAboveNode");let Ue=he(t,"edge",24,()=>gr("edge")),Le=he(t,"straight",8,Ee==="straight"),Ie=he(t,"step",8,Ee==="step"),Se=he(t,"start",24,()=>fe[0]),Ye=he(t,"end",24,()=>fe[1]),ft=he(t,"animate",8,!1),bt=he(t,"label",8,""),dt=he(t,"enableHover",8,!1),it=he(t,"edgeClick",8,null),Jt=he(t,"labelPosition",8,.5),Sr=he(t,"width",8,null),sr=he(t,"color",8,null),vr=he(t,"labelColor",8,null),qr=he(t,"textColor",8,null),Vr=he(t,"cornerRadius",8,8),In=he(t,"targetColor",8,null);const ur=Ue().source,Mr=Ue().target,Tn=ur.direction,Pn=Mr.direction,xn=ur.rotation,Xn=Mr.rotation,oi=ur.position,Ht=Mr.position,jt=ur.dynamic,Gr=Mr.dynamic,Un=ur.moving,Rn=Mr.moving,Yr=(Dt=ur.node)==null?void 0:Dt.position,Yn=(rn=Mr.node)==null?void 0:rn.position,yi=Ue().type,tn=Ue().id;let Kn=Me(),Bn=Me(),_i=Me({x:0,y:0}),Je=Me(!1),Ct=Me(!1),Lt=Me(!1),Ft=Me(!1),Bt=Me(!1),ct=Me();Ue().rendered.set(!0),An(()=>{setTimeout(()=>{A(Bn)&&pe(_i,i0(A(Bn),Jt()))},0),Kre(A(ct))}),x2(()=>{A(Bn)&&pe(_i,i0(A(Bn),Jt()))}),au(()=>{A(ct).remove(),cancelAnimationFrame(s0)});function Ke(){A(Je)&&(A(Bn)&&pe(_i,i0(A(Bn),Jt())),s0=requestAnimationFrame(Ke))}function wt(){if(ur.id===null||Mr.id===null)return;const Pr=J.match(ur,Mr);J.delete(Pr[0]),ur==null||ur.connected.update(Dr=>(Mr&&Dr.delete(Mr),Dr)),Mr==null||Mr.connected.update(Dr=>(ur&&Dr.delete(ur),Dr))}Fe(()=>(s(),o()),()=>{pe(N,s()||o())}),Fe(()=>{},()=>{Ja(pe(d,(ur==null?void 0:ur.edgeColor)||(Mr==null?void 0:Mr.edgeColor)||null),"$edgeColor",n)}),Fe(()=>qt(Ue()),()=>{var Pr;Ja(pe(C,(Pr=Ue().label)==null?void 0:Pr.text),"$edgeLabel",n)}),Fe(()=>(qt(sr()),a()),()=>{pe(R,sr()||a()||null)}),Fe(()=>(qt(bt()),u()),()=>{pe(k,bt()||u()||"")}),Fe(()=>A(k),()=>{pe(B,A(k)||r.label)}),Fe(()=>c(),()=>{pe(z,c())}),Fe(()=>f(),()=>{pe(U,f())}),Fe(()=>h(),()=>{pe(Y,h())}),Fe(()=>v(),()=>{pe(oe,v())}),Fe(()=>A(z),()=>{pe(W,A(z).x)}),Fe(()=>A(z),()=>{pe(D,A(z).y)}),Fe(()=>A(U),()=>{pe(F,A(U).x)}),Fe(()=>A(U),()=>{pe(H,A(U).y)}),Fe(()=>(A(F),A(W)),()=>{pe(ie,A(F)-A(W))}),Fe(()=>(A(H),A(D)),()=>{pe(se,A(H)-A(D))}),Fe(()=>A(ie),()=>{pe(we,Math.abs(A(ie)))}),Fe(()=>A(se),()=>{pe(ge,Math.abs(A(se)))}),Fe(()=>A(we),()=>{pe(te,Math.max(30,Math.min(600,A(we)/2)))}),Fe(()=>A(ge),()=>{pe(ue,Math.max(30,Math.min(600,A(ge)/2)))}),Fe(()=>(A(N),A(oe),A(Y),A(Lt),A(Ft),st),()=>{if(A(N)&&ur.node&&Mr.node){const Pr=A(oe).x-A(Y).x,Dr=A(oe).y-A(Y).y;pe(Lt,Dr>0),pe(Ft,Pr>0);let $r,Cr;if(A(Lt)){const kn=st(ur.node.dimensions.height),Zt=A(Y).y+kn;$r=A(oe).y-Zt}else{const kn=st(Mr.node.dimensions.height),Zt=A(oe).y+kn;$r=A(Y).y-Zt}if(A(Ft)){const kn=st(ur.node.dimensions.width),Zt=A(Y).x+kn;Cr=A(oe).x-Zt}else{const kn=st(Mr.node.dimensions.width),Zt=A(oe).x+kn;Cr=A(Y).x-Zt}pe(Ct,$r>Cr)}}),Fe(()=>(A(N),A(Ct),A(Lt),A(Ft),s(),o()),()=>{if(A(N)){let Pr,Dr;A(Ct)?(Pr=A(Lt)?"south":"north",Dr=A(Lt)?"north":"south"):(Pr=A(Ft)?"east":"west",Dr=A(Ft)?"west":"east"),s()&&St(Tn,Pr),o()&&St(Pn,Dr)}}),Fe(()=>(y(),m()),()=>{pe(re,bO(oh[y()],m()||0))}),Fe(()=>(_(),x()),()=>{pe(Q,bO(oh[_()],x()||0))}),Fe(()=>(A(W),A(re),A(te)),()=>{pe(le,A(W)+A(re).x*A(te))}),Fe(()=>(A(D),A(re),A(ue)),()=>{pe(Ge,A(D)+A(re).y*A(ue))}),Fe(()=>(A(F),A(Q),A(te)),()=>{pe(Ne,A(F)+A(Q).x*A(te))}),Fe(()=>(A(H),A(Q),A(ue)),()=>{pe(Oe,A(H)+A(Q).y*A(ue))}),Fe(()=>(A(le),A(Ge),A(Ne),A(Oe)),()=>{pe(Ze,`C ${A(le)}, ${A(Ge)} ${A(Ne)}, ${A(Oe)}`)}),Fe(()=>(qt(Ie()),S(),A(W),A(D),qt(Le()),A(Ze),A(F),A(H)),()=>{(!Ie()||tn==="cursor"||S()==="bezier")&&pe(Kn,`M ${A(W)}, ${A(D)} ${Le()?"":A(Ze)} ${A(F)}, ${A(H)}`)}),Fe(()=>(A(B),A(Je),P(),T()),()=>{A(B)&&!A(Je)&&(P()||T()||tn==="cursor")?(pe(Je,!0),Ke()):A(Je)&&!P()&&!T()&&tn!=="cursor"&&(pe(Je,!1),cancelAnimationFrame(s0))}),Fe(()=>(qt(Ie()),S(),A(W),A(D),y(),A(F),A(H),_(),qt(Vr()),wO),()=>{if(Ie()&&tn!=="cursor"&&!(S()&&S()==="bezier")){const Pr={x:A(W),y:A(D),direction:oh[y()]},Dr={x:A(F),y:A(H),direction:oh[_()]},$r=yre(Pr,Dr,nre),Cr=(kn,Zt,bi)=>{if(Zt<$r.length-1){const Ci=$te(kn,$r[Zt+1]);return Ute(bi,Ci)}return""};pe(Kn,$r.reduce((kn,Zt,bi)=>{const Ci=Math.sign(Zt.x),$i=Math.sign(Zt.y);let Qe=Zt.x,mt=Zt.y,pt="";if(Vr()){const vt=$r[bi+1]||{x:0,y:0},Mt=$r[bi-1]||{x:0,y:0},cr=lp(Zt.x,vt.x,Vr()),Kr=lp(vt.y,Zt.y,Vr()),mn=lp(Mt.x,Zt.x,Vr()),Ur=lp(Mt.y,Zt.y,Vr()),Cn=Math.min(mn,Ur),jn=Math.min(cr,Kr);Zt.x?Qe=Zt.x-(jn+Cn)*Ci:mt=Zt.y-(jn+Cn)*$i,pt=Cr(Zt,bi,jn)}return wO(kn,Qe,mt,pt)},`M ${A(W)}, ${A(D)}`))}}),Fe(()=>{},()=>{Ja(pe($e,ur.node.zIndex||0),"$sourceZIndex",n)}),Fe(()=>{},()=>{Ja(pe(q,Mr.node.zIndex||0),"$targetZIndex",n)}),Fe(()=>(E(),O()),()=>{pe(G,Math.max(E(),O()))}),Fe(()=>(A(G),E(),O()),()=>{pe(K,Ce==="all"?1e5:Ce?A(G):Te===!0?A(G)-1:Te==="source"?E()-1:Te==="target"?O()-1:0)}),li(),gn();var Rt=Ut(),Wt=_t(Rt);{var ln=Pr=>{var Dr=tne();let $r;var Cr=gt(Dr);{var kn=pt=>{var vt=Jre(),Mt=gt(vt);ht(Mt,"id",tn+"-end-arrow");var cr=gt(Mt);let Kr;var mn=at(Mt);ht(mn,"id",tn+"-start-arrow");var Ur=gt(mn);let Cn;It(()=>{Kr=Nr(cr,"",Kr,{"--prop-edge-color":A(R)}),Cn=Nr(Ur,"",Cn,{"--prop-edge-color":A(R)})}),De(pt,vt)};Kt(Cr,pt=>{(Se()||Ye())&&pt(kn)})}var Zt=at(Cr);ht(Zt,"id",tn+"-target");let bi,Ci;Gs(Zt,pt=>pe(Bn,pt),()=>A(Bn));var $i=at(Zt);mr($i,t,"default",{get path(){return A(Kn)},destroy:wt,get hovering(){return A(Bt)}},pt=>{var vt=Zre();ht(vt,"id",tn);let Mt,cr;It(Kr=>{Mt=on(vt,0,"edge svelte-ppcocz",null,Mt,Kr),ht(vt,"d",A(Kn)),ht(vt,"marker-end",Ye()==="arrow"?`url(#${tn+"-end-arrow"})`:""),ht(vt,"marker-start",Se()==="arrow"?`url(#${tn+"-start-arrow"})`:""),cr=Nr(vt,"",cr,{"--prop-edge-color":A(R),"--prop-stroke-width":Sr()?Sr()+"px":null})},[()=>({animate:ft()})],pn),De(pt,vt)});var Qe=at($i);{var mt=pt=>{var vt=ene(),Mt=gt(vt),cr=gt(Mt);mr(cr,t,"label",{destroy:wt,get hovering(){return A(Bt)}},Kr=>{var mn=Qre();let Ur;var Cn=gt(mn);It(()=>{Ur=Nr(mn,"",Ur,{"--prop-label-color":vr(),"--prop-label-text-color":qr()}),Bi(Cn,A(k))}),De(Kr,mn)}),It(()=>{ht(vt,"x",A(_i).x),ht(vt,"y",A(_i).y)}),De(pt,vt)};Kt(Qe,pt=>{A(B)&&pt(mt)})}Gs(Dr,pt=>pe(ct,pt),()=>A(ct)),It(pt=>{$r=Nr(Dr,"",$r,{"z-index":A(K)}),bi=on(Zt,0,"target svelte-ppcocz",null,bi,pt),ht(Zt,"d",A(Kn)),Ci=Nr(Zt,"",Ci,{cursor:it()||A(Bt)?"pointer":"move","--prop-target-edge-color":it()||A(Bt)?In()||null:"transparent"})},[()=>({cursor:tn==="cursor"||!it()&&!dt()})],pn),ar("mousedown",Zt,function(...pt){var vt;(vt=it())==null||vt.apply(this,pt)}),ar("mouseenter",Zt,()=>pe(Bt,!0)),ar("mouseleave",Zt,()=>pe(Bt,!1)),De(Pr,Dr)};Kt(Wt,Pr=>{ur&&Mr&&Pr(ln)})}De(e,Rt),b2(t,"destroy",wt);var Jn=ir({destroy:wt});return i(),Jn}function TO(e,t){nr(t,!1);let r=he(t,"edge",8);Hr("edge",r()),gn();var n=Ut(),i=_t(n);mr(i,t,"default",{},null),De(e,n),ir()}let o0;const da=Ve(null);function rne(e,t,r){if(t==="self")return;const n=e.parentNode;if(!n)return;n.removeChild(e);const i=document.querySelector(`#anchors-${t}-${r.id}`);i&&(i.appendChild(e),e&&r.recalculateAnchors())}var nne=Gt('<div role="button" tabindex="0"><!></div> <!> <!>',1);function ah(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(da,"$connectingFrom",r),s=()=>Be(bt,"$nodeLevelConnections",r),o=()=>Be(U,"$anchorsMounted",r),a=()=>Be(A(P),"$dynamicDirection",r),u=()=>Be(C,"$mounted",r),c=()=>Be(z,"$nodeConnectEvent",r),f=()=>Be(Ie,"$anchors",r),h=()=>Be(A(S),"$connectedAnchors",r),v=()=>Be(Se,"$resizingWidth",r),y=()=>Be(Ye,"$resizingHeight",r),m=()=>Be(ft,"$rotating",r),_=()=>Be(we(),"$inputsStore",r),x=Me(),S=Me(),P=Me(),T=gr("dynamic"),E=gr("node"),O=gr("edgeStore"),N=gr("cursorAnchor"),d=gr("direction"),C=gr("mounted"),R=gr("graph"),k=gr("nodeStore"),B=gr("graphEdge"),z=gr("nodeConnectEvent"),U=gr("anchorsMounted"),Y=gr("flowchart")||void 0;let oe=he(t,"bgColor",8,null),W=he(t,"id",8,0),D=he(t,"input",8,!1),F=he(t,"output",8,!1),H=he(t,"multiple",24,()=>F()?!0:!D()),ie=he(t,"dynamic",8,T||!1),se=he(t,"edge",8,null),we=he(t,"inputsStore",8,null),ge=he(t,"key",8,null),te=he(t,"outputStore",8,null),ue=he(t,"connections",28,()=>[]),re=he(t,"edgeColor",24,()=>Ve(null)),Q=he(t,"edgeLabel",8,""),le=he(t,"locked",8,!1),Ge=he(t,"nodeConnect",8,!1),Ne=he(t,"edgeStyle",8,null),Oe=he(t,"endStyles",24,()=>[null,null]),Ze=he(t,"invisible",8,!1),$e=he(t,"direction",24,()=>d==="TD"?D()?"north":"south":D()?"west":"east"),q=he(t,"title",8,"");const G=Gl(),K=Gl();let J=Me(),Ee=Me(!1),fe=Me(!1),Te=Me(0),Ce=D()===F()?null:D()?"input":"output",Ue=Me([]);const Le=E.edge,Ie=E.anchors,Se=E.resizingWidth,Ye=E.resizingHeight,ft=E.rotating,bt=E.connections,dt=`A-${W()||Ie.count()+1}/${E.id}`,it=Cre(R,E,dt,{x:0,y:0},{width:0,height:0},we()||te()||null,se()||Le||B||null,Ce,$e(),ie(),ge(),re());Ie.add(it,it.id),An(()=>{var Ct;A(J)&&it.recalculatePosition();const Je=Array.from(st(E.anchors)).reduce((Lt,[,Ft])=>(Ft.type==="output"&&Lt++,Lt),0);if((Ct=s())!=null&&Ct.length&&!D()){const Lt=[];let Ft=null;s().forEach((Bt,ct)=>{Bt&&(Ft===null&&(Ft=ct),(ct-Ft)%Je===0?(A(Ue).push(Bt),Lt.push(null)):Lt.push(Bt))}),St(bt,Lt)}lee(U,o())}),x2(()=>{A(J)&&it.recalculatePosition()}),au(()=>{Xn(),cancelAnimationFrame(o0)});function Jt(Je){var wt;O.delete("cursor");const Ct={x:Je.changedTouches[0].clientX,y:Je.changedTouches[0].clientY},Lt=document.elementFromPoint(Ct.x,Ct.y);if(!Lt)return;const Ft=Lt.parentElement;if(!Ft)return;const Bt=Ft.id,ct=Bt.split("/")[1],Ke=(wt=k.get(ct))==null?void 0:wt.anchors.get(Bt);Ke&&(O.delete("cursor"),Sr(it,Ke,Je))}function Sr(Je,Ct,Lt){const Ft=ur(Je,Ct);Ft&&Mr(),Lt.shiftKey||Pn(Ft)}function sr(Je){var Ct;if("changedTouches"in Je&&A(x)){Jt(Je);return}if(!A(x)){if((Ct=h())!=null&&Ct.size&&!H()){O.delete("cursor"),Je.shiftKey||Pn(!1);return}i()&&In(Je)}}function vr(Je){var Ct;if(!le()){if((Ct=h())!=null&&Ct.size&&!H()&&!i())return oi();if(!i())return qr();In(Je)}}function qr(){D()===F()?(St(da,{anchor:it,store:null,key:null}),Vr(it,N)):D()?(St(da,{anchor:it,store:we(),key:ge()}),Vr(N,it)):F()&&(St(da,{anchor:it,store:te(),key:null}),Vr(it,N))}function Vr(Je,Ct,Lt=!1){const Ft={color:re(),label:{text:Q()}};Lt&&(Ft.disconnect=!0),Ne()&&(Ft.type=Ne()),Oe()[0]&&(Ft.start=Oe()[0]),Oe()[1]&&(Ft.start=Oe()[1]);const Bt=xO({source:Je,target:Ct},(Je==null?void 0:Je.edge)||null,Ft);O.add(Bt,"cursor")}function In(Je){if(O.delete("cursor"),!i())return;const Ct=i().anchor.type;if(i().anchor===it||Ct===it.type&&Ct){Pn(!1);return}it.recalculatePosition();let Lt,Ft;D()===F()?Ct==="input"?(Lt=it,Ft=i().anchor):(Lt=i().anchor,Ft=it):D()?(Lt=i().anchor,Ft=it):(Lt=it,Ft=i().anchor),Sr(Lt,Ft,Je)}function ur(Je,Ct){if(Je===Ct||st(Je.connected).has(it))return!1;const Lt={color:re(),label:{text:Q()}};if(Y){const Bt=Je.node.id.slice(2),ct=Y.nodeList[Bt];if(ct){const Ke=Ct.node.id.slice(2),wt=ct.children.filter(Rt=>Rt.node.id===Ke)[0];if(wt){const Rt=wt;Lt.label={text:Rt.content}}}}Ne()&&(Lt.type=Ne()),Oe()[0]&&(Lt.start=Oe()[0]),Oe()[1]&&(Lt.start=Oe()[1]);const Ft=xO({source:Je,target:Ct},(Je==null?void 0:Je.edge)||null,Lt);return!Je.node||!Ct.node?!1:(O.add(Ft,new Set([Je,Ct,Je.node,Ct.node])),!0)}function Mr(){if(D()&&i()&&i().store)_()&&ge()&&we()&&typeof we().set=="function"&&typeof we().update=="function"&&dn(we(),Tt(_)[ge()]=i().store,Tt(_));else if(F()&&i()&&i().store){const{store:Je,key:Ct}=i();Je&&Ct&&typeof Je.update=="function"&&Je.update(Lt=>(te()&&(Lt[Ct]=te()),Lt))}}function Tn(){_()&&ge()&&_()[ge()]&&dn(we(),Tt(_)[ge()]=Ve(st(_()[ge()])),Tt(_))}function Pn(Je){(Je||!c())&&(St(da,null),St(z,null))}function xn(){A(Ee)&&(A(J)&&it.recalculatePosition(),o0=requestAnimationFrame(xn))}function Xn(){O.delete("cursor"),O.match(it).forEach(Ct=>O.delete(Ct)),Pn(!1),Tn()}function oi(){if(st(it.connected).size>1)return;const Je=Array.from(st(it.connected))[0];if(Je.type!=="input")if(Xn(),Je.type==="output"){Vr(Je,N,!0),Tn();const Ct=Je.store;St(da,{anchor:Je,store:Ct,key:null})}else Vr(Je,N,!0),St(da,{anchor:Je,store:null,key:null})}function Ht(){A(Ue).forEach((Je,Ct)=>{if(!Je)return;Un(Je)&&ue(ue()[Ct]=null,!0)}),pe(Ue,A(Ue).filter(Je=>Je!==null))}function jt(){ue().forEach(Je=>{Je&&Un(Je)})}function Gr(Je){const Ct=`N-${Je[0]}`,Lt=k.get(Ct);if(!Lt)return;const Ft=Lt.anchors.get(`A-${Je[1]}/N-${Je[0]}`);if(!Ft)return;const Bt=O.match(it,Ft);Bt&&O.delete(Bt[0])}const Un=Je=>{let Ct,Lt,Ft=null;Array.isArray(Je)?(Ct=Je[0].toString(),Lt=Je[1].toString()):(Ct=Je.toString(),Lt=null);const Bt=`N-${Ct}`,ct=k.get(Bt);if(!ct)return!1;if(Lt){const Ke=`A-${Lt}/${Bt}`;Ft=ct.anchors.get(Ke)||null}else{const Ke=st(ct.anchors),wt=Array.from(Ke.values());if(!wt.length)return!1;Ft=wt.reduce((Rt,Wt)=>!Rt&&Wt.type==="output"?null:Wt.type==="output"?Rt:!Rt||st(Wt.connected).size<st(Rt.connected).size?Wt:Rt,null)}if(!Ft)return!1;if(ur(it,Ft),Ft.store&&(we()||te())){if(D()&&Ft.type==="output")_()&&ge()&&we()&&typeof we().set=="function"&&typeof we().update=="function"&&dn(we(),Tt(_)[ge()]=Ft.store,Tt(_));else if(F()&&Ft.type==="input"){const{store:Ke,inputKey:wt}=Ft;Ke&&wt&&typeof Ke.update=="function"&&Ke.update(Rt=>(te()&&(Rt[wt]=te()),Rt))}}return!0};Fe(()=>i(),()=>{var Je;pe(x,((Je=i())==null?void 0:Je.anchor)===it)}),Fe(()=>{},()=>{Ja(pe(S,it&&it.connected),"$connectedAnchors",r)}),Fe(()=>{},()=>{Ja(pe(P,it==null?void 0:it.direction),"$dynamicDirection",r)}),Fe(()=>(qt(ie()),A(J),a()),()=>{ie()&&A(J)&&rne(A(J),a(),E)}),Fe(()=>(u(),qt(ue())),()=>{u()===k.count()&&ue().length&&jt()}),Fe(()=>(qt(Ge()),c()),()=>{Ge()&&c()&&sr(c())}),Fe(()=>(u(),A(Ue)),()=>{u()===k.count()&&A(Ue).length&&Ht()}),Fe(()=>(A(J),f(),h(),a()),()=>{A(J)&&(f(),h(),a(),it.recalculatePosition())}),Fe(()=>(A(Ee),v(),y(),m()),()=>{!A(Ee)&&(v()||y()||m())?(pe(Ee,!0),xn()):!v()&&!y()&&A(Ee)&&!m()&&(pe(Ee,!1),cancelAnimationFrame(o0))}),Fe(()=>(h(),A(Te)),()=>{if(h()){if(h().size<A(Te))K("disconnection",{node:E,anchor:it});else if(h().size>A(Te)){const Je=Array.from(h()),Ct=Je[Je.length-1];G("connection",{node:E,anchor:it,connectedNode:Ct.node,connectedAnchor:Ct})}pe(Te,h().size)}}),li(),gn();var Rn=nne(),Yr=_t(Rn);let Yn;var yi=gt(Yr);mr(yi,t,"default",{get linked(){var Je;return((Je=h())==null?void 0:Je.size)>=1},get hovering(){return A(fe)},get connecting(){return A(x)}},Je=>{var Ct=Ut(),Lt=_t(Ct);{var Ft=Bt=>{const ct=pn(()=>{var Ke;return((Ke=h())==null?void 0:Ke.size)>=1});Yre(Bt,{get output(){return F()},get input(){return D()},get connecting(){return A(x)},get hovering(){return A(fe)},get bgColor(){return oe()},get connected(){return A(ct)}})};Kt(Lt,Bt=>{Ze()||Bt(Ft)})}De(Je,Ct)}),Gs(Yr,Je=>pe(J,Je),()=>A(J));var tn=at(Yr,2);Pi(tn,1,()=>Array.from(h()),Je=>Je.id,(Je,Ct,Lt,Ft)=>{var Bt=Ut();const ct=pn(()=>O.fetch(it,A(Ct)));var Ke=_t(Bt);{var wt=Rt=>{const Wt=pn(()=>A(ct).component);TO(Rt,{get edge(){return A(ct)},children:(ln,Jn)=>{var Dt=Ut(),rn=_t(Dt);mr(rn,t,"edge",{},Pr=>{var Dr=Ut(),$r=_t(Dr);{var Cr=Zt=>{A(Wt)(Zt,{})},kn=Zt=>{IE(Zt,{})};Kt($r,Zt=>{A(Wt)?Zt(Cr):Zt(kn,!1)})}De(Pr,Dr)}),De(ln,Dt)},$$slots:{default:!0}})};Kt(Ke,Rt=>{A(ct)&&A(ct).source===it&&Rt(wt)})}De(Je,Bt)});var Kn=at(tn,2);{var Bn=Je=>{var Ct=Ut();const Lt=pn(()=>O.get("cursor"));var Ft=_t(Ct);{var Bt=ct=>{const Ke=pn(()=>A(Lt).component);TO(ct,{get edge(){return A(Lt)},children:(wt,Rt)=>{var Wt=Ut(),ln=_t(Wt);mr(ln,t,"edge",{},Jn=>{var Dt=Ut(),rn=_t(Dt);{var Pr=$r=>{A(Ke)($r,{})},Dr=$r=>{IE($r,{})};Kt(rn,$r=>{A(Ke)?$r(Pr):$r(Dr,!1)})}De(Jn,Dt)}),De(wt,Wt)},$$slots:{default:!0}})};Kt(Ft,ct=>{A(Lt)&&ct(Bt)})}De(Je,Ct)};Kt(Kn,Je=>{A(x)&&Je(Bn)})}It(Je=>{ht(Yr,"id",it==null?void 0:it.id),Yn=on(Yr,1,"anchor-wrapper svelte-bazd6o",null,Yn,Je),ht(Yr,"title",q()||"")},[()=>({locked:le()})],pn),ar("mouseenter",Yr,()=>pe(fe,!0)),ar("mouseleave",Yr,()=>pe(fe,!1)),ar("mousedown",Yr,Fs(ho(vr))),ar("mouseup",Yr,ho(sr)),ar("touchstart",Yr,Fs(ho(vr))),ar("touchend",Yr,ho(sr)),De(e,Rn),b2(t,"disconnect",Gr);var _i=ir({disconnect:Gr});return n(),_i}var ine=Gt("<!> <!>",1),sne=Gt("<div></div> <div></div>",1),one=Gt('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function ane(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(m,"$borderRadius",r),s=()=>Be(x,"$inputs",r),o=()=>Be(S,"$outputs",r),a=()=>Be(_,"$textColor",r),u=()=>Be(y,"$label",r),c=()=>Be(P,"$resizable",r),f=gr("dynamic"),h=gr("node");let v=he(t,"selected",8);const y=h.label,m=h.borderRadius,_=h.textColor,x=h.inputs,S=h.outputs,P=h.resizable,T=st(h.direction);let E=T==="TD",O=T==="TD",N=T!=="TD",d=T!=="TD";gn();var C=one();let R,k;var B=gt(C);{var z=H=>{var ie=ine(),se=_t(ie);Pi(se,1,()=>({length:s()}),Ka,(ge,te)=>{ah(ge,{$$events:{connection(ue){hn.call(this,t,ue)},disconnection(ue){hn.call(this,t,ue)}}})});var we=at(se,2);Pi(we,1,()=>({length:o()}),Ka,(ge,te)=>{ah(ge,{$$events:{connection(ue){hn.call(this,t,ue)},disconnection(ue){hn.call(this,t,ue)}}})}),De(H,ie)},U=H=>{var ie=sne(),se=_t(ie);on(se,1,"input-anchors svelte-j5bq7k",null,{},{top:E,left:N}),Pi(se,5,()=>({length:s()}),Ka,(ge,te)=>{ah(ge,{input:!0,direction:E?"north":"west",$$events:{connection(ue){hn.call(this,t,ue)},disconnection(ue){hn.call(this,t,ue)}}})});var we=at(se,2);on(we,1,"output-anchors svelte-j5bq7k",null,{},{bottom:O,right:d}),Pi(we,5,()=>({length:o()}),Ka,(ge,te)=>{ah(ge,{output:!0,direction:E?"south":"east",$$events:{connection(ue){hn.call(this,t,ue)},disconnection(ue){hn.call(this,t,ue)}}})}),De(H,ie)};Kt(B,H=>{f?H(z):H(U,!1)})}var Y=at(B,2);let oe;var W=gt(Y),D=at(Y,2);{var F=H=>{Wre(H,{width:!0,height:!0,rotation:!0})};Kt(D,H=>{c()&&H(F)})}It(H=>{R=on(C,1,"default-node svelte-j5bq7k",null,R,H),k=Nr(C,"",k,{"border-radius":`${i()??""}px`}),oe=Nr(Y,"",oe,{color:a()}),Bi(W,u())},[()=>({selected:v()})],pn),De(e,C),ir(),n()}function T2(e,t){const r=m2(t);nr(t,!1);const[n,i]=Xr(),s=()=>Be(A(a),"$nodePosition",n),o=()=>Be(we,"$nodes",n),a=Me(),u=gr("graph"),c=gr("group");let f=he(t,"position",28,()=>({x:0,y:0})),h=he(t,"drop",8,!1),v=he(t,"dimensions",8,null),y=he(t,"id",8,0),m=he(t,"bgColor",8,null),_=he(t,"borderRadius",8,null),x=he(t,"borderColor",8,null),S=he(t,"borderWidth",8,null),P=he(t,"selectionColor",8,null),T=he(t,"textColor",8,null),E=he(t,"resizable",8,!1),O=he(t,"label",8,""),N=he(t,"inputs",8,1),d=he(t,"outputs",8,1),C=he(t,"width",8,null),R=he(t,"height",8,null),k=he(t,"TD",8,!1),B=he(t,"LR",8,!1),z=he(t,"zIndex",8,1),U=he(t,"editable",8,!0),Y=he(t,"locked",8,!1),oe=he(t,"rotation",8,0),W=he(t,"edge",8,null),D=he(t,"connections",24,()=>[]),F=he(t,"useDefaults",8,!1),H=he(t,"center",8,!1),ie=he(t,"dynamic",8,!1),se=he(t,"title",8,"");const we=u.nodes;Hr("dynamic",ie());let ge=Me(),te=Me(!0);An(()=>{const Oe=k()?"TD":B()?"LR":u.direction,Ze=u.groupBoxes.get(c),$e=u.nodes.count()+1;pe(te,!r.default),(r.anchorWest||r.anchorEast||r.anchorNorth||r.anchorSouth)&&pe(te,!1);const q=v()?v():C()||R()?{width:C()||R()||200,height:R()||C()||100}:A(te)?{width:200,height:100}:{width:0,height:0},G={id:y()||$e,position:h()==="cursor"?{x:st(u.cursor).x,y:st(u.cursor).y}:Ze?{x:st(Ze.position).x+f().x,y:st(Ze.position).y+f().y}:f(),dimensions:q,editable:U()||u.editable,label:O(),group:c,resizable:E(),inputs:N(),outputs:d(),zIndex:z(),direction:Oe,locked:Y(),rotation:oe()};D().length&&(G.connections=D()),S()&&(G.borderWidth=S()),_()&&(G.borderRadius=_()),x()&&(G.borderColor=x()),P()&&(G.selectionColor=P()),T()&&(G.textColor=T()),m()&&(G.bgColor=m()),W()&&(G.edge=W()),pe(ge,xre(G)),Ze&&u.groups.update(K=>{const J=st(K[c].nodes);return K[c].nodes.set(new Set([...J,A(ge)])),K}),u.nodes.add(A(ge),A(ge).id)}),au(()=>{u.nodes.delete(A(ge).id)});function ue(Oe){A(ge)&&A(ge).connections.set([Oe])}function re(Oe){if(!A(ge))return;(Array.isArray(Oe)?Oe:[Oe]).forEach($e=>{const[q,G]=Array.isArray($e)?$e:[$e,null],K=`N-${q}`,J=u.nodes.get(K);if(!J)return;let Ee=null;const fe=G?`A-${G}/${K}`:null;fe&&(Ee=J.anchors.get(fe));const Te=u.edges.match(A(ge),J,Ee);Te.length&&u.edges.delete(Te[Te.length-1])})}Hr("connect",ue),Hr("disconnect",re);let Q=Me(f());Fe(()=>(A(ge),qt(D())),()=>{A(ge)&&A(ge).connections.set(D())}),Fe(()=>(A(ge),qt(m())),()=>{A(ge)&&A(ge).bgColor.set(m())}),Fe(()=>(A(ge),qt(O())),()=>{A(ge)&&A(ge).label.set(O())}),Fe(()=>(A(ge),qt(T())),()=>{A(ge)&&A(ge).textColor.set(T())}),Fe(()=>(A(ge),qt(x())),()=>{A(ge)&&A(ge).borderColor.set(x())}),Fe(()=>(A(ge),qt(P())),()=>{A(ge)&&A(ge).selectionColor.set(P())}),Fe(()=>(A(ge),qt(E())),()=>{A(ge)&&A(ge).resizable.set(E())}),Fe(()=>(A(ge),qt(U())),()=>{A(ge)&&A(ge).editable.set(U())}),Fe(()=>(A(ge),qt(Y())),()=>{A(ge)&&A(ge).locked.set(Y())}),Fe(()=>(A(ge),qt(N())),()=>{A(ge)&&A(ge).inputs.set(N())}),Fe(()=>(A(ge),qt(d())),()=>{A(ge)&&A(ge).outputs.set(d())}),Fe(()=>(A(ge),qt(z())),()=>{A(ge)&&A(ge).zIndex.set(z())}),Fe(()=>A(ge),()=>{var Oe;Ja(pe(a,A(ge)&&((Oe=A(ge))==null?void 0:Oe.position)),"$nodePosition",n)}),Fe(()=>(A(ge),A(Q),s(),qt(f())),()=>{if(A(ge)){const{x:Oe,y:Ze}=A(Q),{x:$e,y:q}=s(),{x:G,y:K}=f();(G!==$e||K!==q)&&(G!==Oe||K!==Ze?(pe(Q,f()),A(ge).position.set(f())):(pe(Q,s()),f(s())))}}),Fe(()=>(A(ge),qt(N())),()=>{A(ge)&&A(ge).inputs.set(N())}),Fe(()=>(A(ge),qt(d())),()=>{A(ge)&&A(ge).outputs.set(d())}),li(),gn();var le=Ut(),Ge=_t(le);{var Ne=Oe=>{const Ze=pn(()=>H()||h()==="center"),$e=pn(()=>!!v()||!!C()||!!R()||A(te)||!1);Vre(Oe,{get node(){return A(ge)},get center(){return A(Ze)},get isDefault(){return A(te)},get useDefaults(){return F()},get dimensionsProvided(){return A($e)},get nodeStore(){return u.nodes},get locked(){return u.locked},get groups(){return u.groups},get title(){return se()},get maxZIndex(){return u.maxZIndex},get centerPoint(){return u.center},get cursor(){return u.cursor},get activeGroup(){return u.activeGroup},get editing(){return u.editing},get initialNodePositions(){return u.initialNodePositions},$$events:{nodeClicked(q){hn.call(this,t,q)},nodeMount(q){hn.call(this,t,q)},nodeReleased(q){hn.call(this,t,q)},duplicate(q){hn.call(this,t,q)}},children:bv,$$slots:{default:(q,G)=>{const K=pn(()=>G.destroy),J=pn(()=>G.selected),Ee=pn(()=>G.grabHandle);var fe=Ut(),Te=_t(fe);mr(Te,t,"default",{get selected(){return A(J)},get grabHandle(){return A(Ee)},disconnect:re,connect:ue,get node(){return A(ge)},get destroy(){return A(K)}},Ce=>{var Ue=Ut(),Le=_t(Ue);{var Ie=Se=>{ane(Se,{get selected(){return A(J)},$$events:{connection(Ye){hn.call(this,t,Ye)},disconnection(Ye){hn.call(this,t,Ye)}}})};Kt(Le,Se=>{A(te)&&Se(Ie)})}De(Ce,Ue)}),De(q,fe)},anchorWest:(q,G)=>{var K=Ut(),J=_t(K);mr(J,t,"anchorWest",{},null),De(q,K)},anchorEast:(q,G)=>{var K=Ut(),J=_t(K);mr(J,t,"anchorEast",{},null),De(q,K)},anchorNorth:(q,G)=>{var K=Ut(),J=_t(K);mr(J,t,"anchorNorth",{},null),De(q,K)},anchorSouth:(q,G)=>{var K=Ut(),J=_t(K);mr(J,t,"anchorSouth",{},null),De(q,K)}}})};Kt(Ge,Oe=>{A(ge)&&o().get(A(ge).id)&&Oe(Ne)})}De(e,le),ir(),i()}var une=Gt('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function cne(e,t){nr(t,!1);const r=Me();let n=he(t,"editing",8);const i=gr("graph");Hr("graph",i),Hr("textStore",n().label),Hr("colorStore",n().bgColor);let s=Me({x:150,y:50});function o(c){c.preventDefault(),pe(s,{x:c.clientX,y:c.clientY}),i.editing.set(n())}function a(){i.nodes.delete(n().id),i.editing.set(null)}function u(){const c=n().id,f=i.nodes.get(c);if(f){const h=f.dimensions.width,v=f.dimensions.height,y=prompt("Enter new width (for example:250):",h?h.toString():""),m=prompt("Enter new height (for example:200):",v?v.toString():"");if(y===null||m===null)return;f.dimensions.width.set(parseInt(y,10)||0),f.dimensions.height.set(parseInt(m,10)||0),f.resizingWidth.set(!0),f.resizingHeight.set(!0)}}Fe(()=>{},()=>{pe(r,i.cursor)}),li(),gn(),T2(e,{zIndex:1/0,get position(){return A(s)},bgColor:"white",id:"editor",children:(c,f)=>{var h=une(),v=at(gt(h),2),y=at(v,2);Dre(y,{placeholder:"Node Label"});var m=at(y,2),_=at(m,2);ar("click",v,()=>i.editing.set(null)),ar("click",m,a),ar("click",_,u),ar("contextmenu",h,o),De(c,h)},$$slots:{default:!0}}),ir()}var lne=Gt("<!> <!>",1),fne=Gt('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function hne(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(q,"$groups",r),s=()=>Be(Ze,"$dimensionsStore",r),o=()=>Be(Te,"$nodeBounds",r),a=()=>Be(Ge,"$graphDOMElement",r),u=()=>Be(ms,"$initialClickPosition",r),c=()=>Be(K,"$selected",r),f=()=>Be(J,"$activeGroup",r),h=()=>Be(da,"$connectingFrom",r),v=()=>Be(CE,"$touchDistance",r),y=()=>Be(Oe,"$scale",r),m=()=>Be($e,"$translation",r),_=()=>Be(fe,"$editing",r),x=Me();let S=he(t,"graph",8),P=he(t,"width",8),T=he(t,"height",8),E=he(t,"minimap",12,!1),O=he(t,"controls",12,!1),N=he(t,"toggle",8,!1),d=he(t,"fixedZoom",8,!1),C=he(t,"pannable",8,!0),R=he(t,"disableSelection",8,!1),k=he(t,"ZOOM_INCREMENT",8,.1),B=he(t,"PAN_INCREMENT",8,50),z=he(t,"PAN_TIME",8,250),U=he(t,"MAX_SCALE",8,3),Y=he(t,"MIN_SCALE",8,.2),oe=he(t,"selectionColor",8),W=he(t,"backgroundExists",8),D=he(t,"fitView",8,!1),F=he(t,"trackpadPan",8),H=he(t,"modifier",8),ie=he(t,"theme",12,"light"),se=he(t,"title",8),we=he(t,"drawer",12,!1),ge=he(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",we());let te;const ue=Gl(),re={},Q=Ve(!1),le=Ve(0),Ge=Ve(null),Ne=S().cursor,Oe=S().transforms.scale,Ze=S().dimensions,$e=S().transforms.translation,q=S().groups,G=S().groupBoxes,K=i().selected.nodes,J=S().activeGroup,Ee=S().initialNodePositions,fe=S().editing,Te=S().bounds.nodeBounds;let Ce=0,Ue=1,Le=Me({x:0,y:0,top:0,left:0}),Ie=Me(!1),Se=Me(!1),Ye=Me(!1),ft=Me(!1),bt=!1,dt=Me(!1),it,Jt=Me(null),Sr=Me(null),sr=Me(null),vr=Me(null),qr=Me(null);const Vr={id:null,position:S().cursor,offset:Ve({x:0,y:0}),connected:Ve(new Set),dynamic:Ve(!1),edge:null,edgeColor:Ve(null),direction:Ve("self"),inputKey:null,type:"output",moving:ru(!1),store:null,mounted:Ve(!0),rotation:ru(0),node:{zIndex:Ve(1/0),rotating:Ve(!1),position:S().cursor,dimensions:{width:Ve(0),height:Ve(0)}}};Hr("graphDOMElement",Ge),Hr("cursorAnchor",Vr),Hr("duplicate",Q),Hr("graph",S()),Hr("transforms",S().transforms),Hr("dimensions",S().dimensions),Hr("locked",S().locked),Hr("groups",S().groups),Hr("bounds",S().bounds),Hr("edgeStore",S().edges),Hr("nodeStore",S().nodes),Hr("mounted",le),An(()=>{console.log("Graph component mounted with drawer1:",we()),Xn()});async function In(){await ih(),vo.set(!0);const{x:Qe,y:mt,scale:pt}=wre(it,o());Qe!==null&&mt!==null&&pt!==null&&(S().transforms.scale.set(pt),$e.set({x:Qe,y:mt})),vo.set(!1),pe(dt,!0)}async function ur(){pe(Sr,(await Yf(async()=>{const{default:Qe}=await Promise.resolve().then(()=>kne);return{default:Qe}},void 0,import.meta.url)).default)}async function Mr(){pe(Jt,(await Yf(async()=>{const{default:Qe}=await Promise.resolve().then(()=>Dne);return{default:Qe}},void 0,import.meta.url)).default)}async function Tn(){pe(sr,(await Yf(async()=>{const{default:Qe}=await import("./Controls-DeP16Zsy.js");return{default:Qe}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function Pn(){pe(vr,(await Yf(async()=>{const{default:Qe}=await import("./DrawerController-B0dpRfz_.js");return{default:Qe}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function xn(){pe(qr,(await Yf(async()=>{const{default:Qe}=await import("./ContrastTheme-C9DHtQlv.js");return{default:Qe}},[],import.meta.url)).default)}function Xn(){if(!a())return;const Qe=a().getBoundingClientRect();it={top:Qe.top,left:Qe.left,bottom:Qe.bottom,right:Qe.right,width:Qe.width,height:Qe.height},S().dimensions.set(it),D()==="resize"&&In()}function oi(Qe){var pt,vt;if(A(Se)){const cr=`${Gte()}/${S().id}`,Kr=st(Ne),mn=Kr.x-u().x,Ur=Kr.y-u().y,Cn=Math.min(u().y,u().y+Ur),jn=Math.min(u().x,u().x+mn),wi={width:Ve(Math.abs(mn)),height:Ve(Math.abs(Ur))},Qo=Ve({x:jn,y:Cn}),Ts={group:Ve(cr),dimensions:wi,position:Qo,color:Ve(Nte()),moving:Ve(!1)};G.add(Ts,cr),Array.from(c()).forEach(Zn=>{Zn.group.set(cr)}),q.update(Zn=>{const ka={parent:Ve(Ts),nodes:Ve(new Set([...c(),Ts]))};return Zn[cr]=ka,Zn}),St(K,new Set),pe(Se,!1),pe(Ie,!1)}f()&&Array.from(st(i()[f()].nodes)).forEach(cr=>{const Kr=Mp(st(cr.position).x,st(cr.position).y);cr.position.set(Kr),cr.moving.set(!1)});const mt=S().edges.get("cursor");mt&&(S().edges.delete("cursor"),mt.disconnect||ue("edgeDrop",{cursor:st(Ne),source:{node:(pt=h())==null?void 0:pt.anchor.node.id.slice(2),anchor:(vt=h())==null?void 0:vt.anchor.id.split("/")[0].slice(2)}})),St(J,null),St(ms,{x:0,y:0}),St(Ee,[]),pe(Ie,!1),pe(ft,!1),St(vo,!1),Qe.shiftKey||da.set(null),dl(Le,A(Le).y=0),dl(Le,A(Le).x=0)}function Ht(Qe){if(!C()&&!(Qe.shiftKey||Qe.metaKey)||Qe.button===2)return;a()&&a().focus();const{clientX:mt,clientY:pt}=Qe;if(St(ms,st(Ne)),Qe.shiftKey||Qe.metaKey){Qe.preventDefault(),pe(Ie,!0);const{top:vt,left:Mt}=A(x);dl(Le,A(Le).y=pt-vt),dl(Le,A(Le).x=mt-Mt),dl(Le,A(Le).top=vt),dl(Le,A(Le).left=Mt),Qe.shiftKey&&Qe.metaKey?pe(Se,!0):pe(Se,!1),Qe.metaKey&&!Qe.shiftKey?pe(Ye,!0):pe(Ye,!1)}else pe(ft,!0),St(K,new Set),St(K,c())}function jt(Qe){St(K,new Set),St(K,c()),St(ms,st(Ne)),pe(ft,!0),Qe.touches.length===2&&(Un(),Ce=v(),Ue=y())}function Gr(){pe(ft,!1),bt=!1}function Un(){bt||(bt=!0,te=requestAnimationFrame(Rn))}function Rn(){if(!bt){cancelAnimationFrame(te);return}const mt=v()/Ce;St(Oe,Ue*mt),te=requestAnimationFrame(Rn)}function Yr(Qe){const{key:mt,code:pt}=Qe,vt=Qe.target;if(!(vt.tagName=="INPUT"||vt.tagName=="TEXTAREA")){if(pt==="KeyA"&&Qe[`${H()}Key`]){const Mt=S().nodes.getAll().filter(cr=>!st(cr.locked));St(K,new Set(Mt))}else if(AO(mt))_i(mt,Qe);else if(mt==="=")EO(-1,S().dimensions,S().transforms,k());else if(mt==="-")EO(1,S().dimensions,S().transforms,k());else if(mt==="0")In();else if(mt==="Control")i().selected.nodes.set(new Set);else if(pt==="KeyD"&&Qe[`${H()}Key`])Q.set(!0),setTimeout(()=>{Q.set(!1)},100);else if(mt==="Tab"&&(Qe.altKey||Qe.ctrlKey))yi();else if(mt==="l")ie(ie()==="light"?"dark":"light");else if(mt==="d")we(!we());else if(mt==="m")E(!E());else if(mt==="c")O(!O());else if(mt==="e"){const Mt=Array.from(c())[0];S().editing.set(Mt)}else return;Qe.preventDefault()}}function Yn(Qe){var Ur;Qe.preventDefault();const mt=(Ur=a())==null?void 0:Ur.getBoundingClientRect();if(!mt)return;const pt=Qe.clientX-mt.left,vt=Qe.clientY-mt.top,{x:Mt,y:cr}=Mp(pt,vt);if(console.log(`Dropped Node at Snapped Position: (${Mt}, ${cr})`),!mn)return;const Kr={id:`node-${Date.now()}`,rotation:Ve(0),position:Ve({x:Mt,y:cr}),moving:Ve(!1),label:Ve("New Node"),dimensions:{width:Ve(200),height:Ve(100)},inputs:Ve(2),outputs:Ve(2),anchors:Ve([]),group:Ve(null),collapsed:Ve(!1),resizingWidth:Ve(!1),resizingHeight:Ve(!1),rotating:Ve(!1),editable:Ve(!0),locked:Ve(!1),recalculateAnchors:Cn=>{},resizable:Ve(!0),zIndex:Ve(1),edge:null,direction:Ve("TD"),borderRadius:Ve(5),borderWidth:Ve(1),connections:Ve([]),bgColor:Ve("#007bff"),borderColor:Ve("#000"),selectionColor:Ve("#ff0000"),textColor:Ve("#fff")};let mn=null;S().nodes.add(Kr,Kr.id),mn=null}function yi(){const Qe=S().nodes.getAll(),mt=Qe.findIndex(vt=>c().has(vt)),pt=mt+1;c().delete(Qe[mt]),c().add(Qe[pt])}function tn(Qe){const{key:mt}=Qe;AO(mt)?(clearInterval(re[mt]),delete re[mt]):mt==="Shift"&&da.set(null)}function Kn(Qe){if(d())return;const mt=Qe.shiftKey?.15:1,{clientX:pt,clientY:vt,deltaY:Mt}=Qe,cr=m(),Kr={x:pt,y:vt};if((F()||Qe.metaKey)&&Mt%1===0){St($e,{x:dn($e,Tt(m).x-=Qe.deltaX,Tt(m)),y:dn($e,Tt(m).y-=Qe.deltaY,Tt(m))});return}if(y()>=U()&&Mt<0||y()<=Y()&&Mt>0)return;const mn=Math.min(.009*mt*Math.abs(Mt),.08),Ur=dV(y(),Math.sign(Mt),mn),Cn=hV(y(),Ur,cr,Kr,it);Oe.set(Ur),$e.set(Cn)}function Bn(Qe){Qe.preventDefault()}function _i(Qe,mt){const pt=mt.shiftKey?2:1,vt=Qe==="ArrowLeft"||Qe==="ArrowUp"?1:-1,Mt=Qe==="ArrowLeft"||Qe==="ArrowRight",cr=Mt?m().x:m().y,Kr=cr+vt*B()*pt;if(!re[Qe]){const mn=performance.now();let Ur=setInterval(()=>{const Cn=performance.now()-mn;if(c().size===0){const jn=cr+(Kr-cr)*(Cn/z());$e.set({x:Mt?jn:m().x,y:Mt?m().y:jn})}else{const jn={x:Mt?-vt*2:0,y:Mt?0:-vt*2};Array.from(c()).forEach(wi=>{const Qo=st(wi.position);let Ts;const Zn=st(wi.group),ka=st(S().groupBoxes);if(Zn&&(Ts=ka.get(Zn)),Ts){const as=st(wi.dimensions.width),Ma=st(wi.dimensions.height),ea=mV(Ts,as,Ma);gV(Qo,jn,wi.position,ea)}else{const as={x:Qo.x+jn.x,y:Qo.y+jn.y},Ma=Mp(as.x,as.y);wi.position.set(Ma)}})}},2);re[Qe]=Ur}}Fe(()=>s(),()=>{pe(x,s())}),Fe(()=>qt(ie()),()=>{ie()&&document.documentElement.setAttribute("svelvet-theme",ie())}),Fe(()=>(A(dt),qt(D())),()=>{!A(dt)&&D()&&In()}),Fe(()=>(qt(N()),A(Jt)),()=>{N()&&!A(Jt)&&Mr()}),Fe(()=>(qt(E()),A(Sr)),()=>{E()&&!A(Sr)&&ur()}),Fe(()=>(qt(O()),A(sr)),()=>{O()&&!A(sr)&&Tn()}),Fe(()=>(qt(we()),A(vr)),()=>{we()&&!A(vr)&&Pn()}),Fe(()=>(qt(ge()),A(qr)),()=>{ge()&&!A(qr)&&xn()}),Fe(()=>qt(we()),()=>{console.log("Reactive Graph drawer prop:",we())}),li(),gn();var Je=fne();ar("touchend",Sl,oi),ar("mouseup",Sl,oi),ar("resize",Sl,Xn),ar("scroll",Sl,Xn),ht(Je,"tabindex",0);let Ct;var Lt=gt(Je);Mre(Lt,{get isMovable(){return A(ft)},children:(Qe,mt)=>{var pt=lne(),vt=_t(pt);{var Mt=Kr=>{cne(Kr,{get editing(){return _()}})};Kt(vt,Kr=>{_()&&Kr(Mt)})}var cr=at(vt,2);mr(cr,t,"default",{},null),De(Qe,pt)},$$slots:{default:!0}});var Ft=at(Lt,2);{var Bt=Qe=>{var mt=Ut(),pt=_t(mt);mr(pt,t,"background",{},null),De(Qe,mt)},ct=Qe=>{fre(Qe,{})};Kt(Ft,Qe=>{W()?Qe(Bt):Qe(ct,!1)})}var Ke=at(Ft,2);{var wt=Qe=>{var mt=Ut(),pt=_t(mt);pc(pt,()=>A(Sr),(vt,Mt)=>{Mt(vt,{})}),De(Qe,mt)};Kt(Ke,Qe=>{E()&&Qe(wt)})}var Rt=at(Ke,2);{var Wt=Qe=>{var mt=Ut(),pt=_t(mt);pc(pt,()=>A(sr),(vt,Mt)=>{Mt(vt,{})}),De(Qe,mt)};Kt(Rt,Qe=>{O()&&Qe(Wt)})}var ln=at(Rt,2);{var Jn=Qe=>{var mt=Ut(),pt=_t(mt);pc(pt,()=>A(Jt),(vt,Mt)=>{Mt(vt,{})}),De(Qe,mt)};Kt(ln,Qe=>{N()&&Qe(Jn)})}var Dt=at(ln,2);{var rn=Qe=>{var mt=Ut(),pt=_t(mt);pc(pt,()=>A(vr),(vt,Mt)=>{Mt(vt,{})}),De(Qe,mt)};Kt(Dt,Qe=>{we()&&Qe(rn)})}var Pr=at(Dt,2);{var Dr=Qe=>{var mt=Ut(),pt=_t(mt);pc(pt,()=>A(qr),(vt,Mt)=>{Mt(vt,{})}),De(Qe,mt)};Kt(Pr,Qe=>{ge()&&Qe(Dr)})}var $r=at(Pr,2);mr($r,t,"minimap",{},null);var Cr=at($r,2);mr(Cr,t,"drawer",{},null);var kn=at(Cr,2);mr(kn,t,"controls",{},null);var Zt=at(kn,2);mr(Zt,t,"toggle",{},null);var bi=at(Zt,2);mr(bi,t,"contrast",{},null);var Ci=at(bi,2);{var $i=Qe=>{Hte(Qe,{get creating(){return A(Se)},get anchor(){return A(Le)},get graph(){return S()},get adding(){return A(Ye)},get color(){return oe()}})};Kt(Ci,Qe=>{A(Ie)&&!R()&&Qe($i)})}Gs(Je,Qe=>St(Ge,Qe),()=>a()),It(()=>{ht(Je,"id",S().id),ht(Je,"title",se()),Ct=Nr(Je,"",Ct,{width:P()?P()+"px":"100%",height:T()?T()+"px":"100%",cursor:C()?"move":"default"})}),ar("wheel",Je,Fs(Kn)),ar("mousedown",Je,gh(Fs(Ht))),ar("touchend",Je,Fs(Gr)),ar("touchstart",Je,gh(Fs(jt))),ar("keydown",Je,Yr),ar("keyup",Je,tn),ar("dragover",Je,Fs(Bn)),ar("drop",Je,Yn),De(e,Je),ir(),n()}function dne(e){e.parentNodes.forEach(s=>pne(s));const[t,r]=vne(e);gne(t,e),mne(t);for(let s=0;s<10;s++){let o=!1;for(let a=0;a<=r;a++)if(t[a])for(let u=0;u<t[a].length;u++){const c=t[a][u],f=_ne(t,c,u);f&&(_c(t[a],u,f),o=!0)}if(!o)break}const n=bne(t);for(let s=0;s<10&&wne(t,n);s++);for(let s=0;s<2;s++){let o=!1;for(let a=0;a<=r;a++)for(let u=0;u<t[a].length;u++){const c=t[a][u],f=yne(t,c,u);f&&(_c(t[a],u,f),o=!0)}if(!o)break}const i=[];for(let s=0;s<=r;s++)i.push(t[s]);return i}function pne(e,t=0,r=0){const n=[],i=(s,o=0,a=0)=>{s.depth=Math.max(s.depth,o),s.nesting=Math.max(s.nesting,a),n.push(s);for(const u of s.children){const{node:c,length:f}=u;i(c,f+o,a+1)}};i(e,t,r);for(const s of n)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const o of s.children)s.nesting=Math.min(s.nesting,o.node.nesting-1),s.depth=Math.min(s.depth,o.node.depth-o.length)}}function vne(e){let t=0;const r={};for(const n in e.nodeList){const{depth:i,parents:s,children:o,type:a,data:u}=e.nodeList[n];t=Math.max(t,i),r[i]||(r[i]=[]);const c={id:n,label:u.content,children:[],parents:[],layer:i,type:a.trim()};u.props&&(c.propsId=u.props.trim());for(const f of s)c.parents.push(f.node.id);for(const f of o)c.children.push(f.node.id);r[i].push(c)}return[r,t]}function gne(e,t){for(const r in t.nodeList)for(const n of t.nodeList[r].children)if(n.node.depth-1>t.nodeList[r].depth){const i=t.nodeList[r].depth+1,s=n.node.depth-1,o=[];let a=0;for(let u=i;u<=s;u++){const c={id:`GHOST_${n.node.id}_${a}`,label:"",children:[],parents:[],layer:u,ignore:!0};o.push(c),a++}for(const u of n.node.parents)o[0].parents.push(u.node.id);o[o.length-1].children.push(n.node.id);for(let u=0;u<o.length-1;u++)o[u].children.push(`GHOST_${n.node.id}_${u+1}`);for(let u=s;u>=i;u--)o.length>0&&e[u].push(o[0]);for(const u of e[t.nodeList[r].depth])u.id===r&&(u.children.push(o[0].id),u.children=u.children.filter(c=>c!==n.node.id))}}function mne(e){let t=0;for(const r in e)t=Math.max(e[r].length,t);for(const r in e)if(e[r].length<t){const n=Array.from({length:t-e[r].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(r),ignore:!0}));e[r]=e[r].concat(n)}}function PO(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function CO(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function OO(e,t,r){let n=0,i=0;for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function yne(e,t,r){const n=RE(e,t.layer);let i=0;t.layer===0?i=OO(e,t,r):i=CO(e,t,r);let s=i,o=r;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){_c(e[t.layer],r,a);const c=RE(e,t.layer);let f=0;t.layer===0?f=OO(e,t,a):f=CO(e,t,a),c<=n&&f<s&&(s=f,o=a),_c(e[t.layer],a,r)}return o===r?null:o}function _ne(e,t,r){const n={};let i=1/0,s=0;for(let o=0;o<e[t.layer].length;o++){const a=PO(e,t,o),u=PO(e,e[t.layer][o],r);n[o]=a+u}for(const o in n)n[o]<i&&(i=n[o],s=parseInt(o));return s===r?null:s}function _c(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bne(e){const t=[];for(const r in e)for(const n of e[r])t.push(n);return t.sort((r,n)=>n.parents.length+n.children.length-(r.parents.length+r.children.length))}function RE(e,t){let r=0;for(let n=0;n<e[t].length;n++){const i=e[t][n],s=[],o=[];if(e[t-1])for(let a=n+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=n+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&o.push(a);for(let a=n+1;a<e[t].length;a++){const u=e[t][a];if(s.length)for(let c=0;c<e[t-1].length;c++)u.parents.includes(e[t-1][c].id)&&s.forEach(f=>{c<f&&r++});if(o.length)for(let c=0;c<e[t+1].length;c++)u.children.includes(e[t+1][c].id)&&o.forEach(f=>{c<f&&r++})}}return r}function wne(e,t){let r=!1;for(const n of t){if(n.children.length+n.parents.length===0)return r;let i=0;for(let a=0;a<e[n.layer].length;a++)if(e[n.layer][a].id===n.id){i=a;break}let s=1/0,o=i;for(let a=0;a<e[n.layer].length;a++){_c(e[n.layer],i,a);const u=RE(e,n.layer);u<s&&(s=u,o=a),_c(e[n.layer],a,i)}o!==i&&(_c(e[n.layer],i,o),r=!0)}return r}function xne(e,t){nr(t,!1);let r=he(t,"mermaid",8,""),n=he(t,"mermaidConfig",24,()=>({}));const i=Fte(r());Hr("flowchart",i);const s=dne(i),o=gr("graph"),a=100,u=100;let c;An(()=>{o.nodes.subscribe(y=>c=Object.fromEntries(y));let v=0;for(const y of s){let m=0,_=-1/0;for(const x of y)x.ignore||(c[`N-${x.id}`].position.update(()=>({x:m,y:v})),c[`N-${x.id}`].dimensions.width.subscribe(S=>m+=S),c[`N-${x.id}`].dimensions.height.subscribe(S=>_=Math.max(_,S))),m+=a;v+=_+u}}),gn();var f=Ut(),h=_t(f);Pi(h,1,()=>s,Ka,(v,y)=>{var m=Ut(),_=_t(m);Pi(_,1,()=>A(y),Ka,(x,S)=>{var P=Ut(),T=_t(P);{var E=O=>{const N=pn(()=>A(S).children.map(d=>[d,"1"]));T2(O,Vl({get label(){return A(S).label},get id(){return A(S).id},TD:!0},()=>n()[A(S).id],{get connections(){return A(N)}}))};Kt(T,O=>{A(S).ignore||O(E)})}De(x,P)}),De(v,m)}),De(e,f),ir()}function Sne(e){var n,i;const t=JSON.parse(e);return pV(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((n=t.transforms)==null?void 0:n.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Ene=Gt("<!> <!>",1),Ane=Gt('<div class="svelvet-temp svelte-lsy29y"></div>');function Tne(e,t){const r=m2(t);nr(t,!1);const n=Me(),i=Me();let s=he(t,"mermaid",8,""),o=he(t,"theme",8,"light"),a=he(t,"id",8,0),u=he(t,"snapTo",8,0),c=he(t,"zoom",8,1),f=he(t,"TD",8,!1),h=he(t,"editable",8,!0),v=he(t,"locked",8,!1),y=he(t,"width",8,0),m=he(t,"height",8,0),_=he(t,"minimap",8,!1),x=he(t,"controls",8,!1),S=he(t,"toggle",8,!1),P=he(t,"drawer",8,!1),T=he(t,"contrast",8,!1),E=he(t,"fitView",8,!1),O=he(t,"selectionColor",8,"lightblue"),N=he(t,"edgeStyle",8,"bezier"),d=he(t,"endStyles",24,()=>[null,null]),C=he(t,"edge",8,null),R=he(t,"disableSelection",8,!1),k=he(t,"mermaidConfig",24,()=>({})),B=he(t,"translation",24,()=>({x:0,y:0})),z=he(t,"trackpadPan",8,!1),U=he(t,"modifier",8,"meta"),Y=he(t,"raiseEdgesOnSelect",8,!1),oe=he(t,"edgesAboveNode",8,!1),W=he(t,"title",8,""),D=he(t,"fixedZoom",8,!1),F=he(t,"pannable",8,!0);const H=Gl();let ie=Me(null),se=f()?"TD":"LR";Hr("snapTo",u()),Hr("edgeStyle",N()),Hr("endStyles",d()),Hr("graphEdge",C()),Hr("raiseEdgesOnSelect",Y()),Hr("edgesAboveNode",oe()),Hr("graph",A(ie)),An(()=>{console.log("Graph component mounted with drawer:",P());const Q=localStorage.getItem("state");if(console.log("stateObject during onMount:",Q),Q)pe(ie,Sne(Q)),console.log("This is the graph set using reloadStore",A(ie)),mh.add(A(ie),A(ie).id),console.log("graphStore updated",A(ie));else{let le=`G-${a()||mh.count()+1}`;pe(ie,pV(le,{zoom:c(),direction:se,editable:h(),locked:v(),translation:B()})),mh.add(A(ie),le)}});function we(Q,le){if(!A(ie))return;const Ge=`N-${Q[0]}`,Ne=A(ie).nodes.get(Ge);if(!Ne)return;const Oe=Ne.anchors.get(`A-${Q[1]}/N-${Q[0]}`);if(!Oe)return;const Ze=`N-${le[0]}`,$e=A(ie).nodes.get(Ze);if(!$e)return;const q=$e.anchors.get(`A-${le[1]}/N-${le[0]}`);if(!q)return;const G=A(ie).edges.match(Oe,q);G&&A(ie).edges.delete(G[0])}Fe(()=>{},()=>{pe(n,r.background)}),Fe(()=>A(ie),()=>{pe(i,A(ie)&&A(ie).edges)}),Fe(()=>(A(ie),qt(c())),()=>{A(ie)&&A(ie).transforms.scale.set(c())}),Fe(()=>A(i),()=>{A(i)&&A(i).onEdgeChange((Q,le)=>{H(le,{sourceAnchor:Q.source,targetAnchor:Q.target,sourceNode:Q.source.node,targetNode:Q.target.node})})}),li(),gn();var ge=Ut(),te=_t(ge);{var ue=Q=>{hne(Q,{get width(){return y()},get height(){return m()},get toggle(){return S()},get backgroundExists(){return A(n)},get minimap(){return _()},get graph(){return A(ie)},get fitView(){return E()},get fixedZoom(){return D()},get pannable(){return F()},get theme(){return o()},get drawer(){return P()},get controls(){return x()},get selectionColor(){return O()},get disableSelection(){return R()},get trackpadPan(){return z()},get modifier(){return U()},get title(){return W()},get contrast(){return T()},$$events:{edgeDrop(le){hn.call(this,t,le)}},children:(le,Ge)=>{var Ne=Ene(),Oe=_t(Ne);{var Ze=q=>{xne(q,{get mermaid(){return s()},get mermaidConfig(){return k()}})};Kt(Oe,q=>{s().length&&q(Ze)})}var $e=at(Oe,2);mr($e,t,"default",{},null),De(le,Ne)},$$slots:{default:!0,minimap:(le,Ge)=>{var Ne=Ut(),Oe=_t(Ne);mr(Oe,t,"minimap",{},null),De(le,Ne)},controls:(le,Ge)=>{var Ne=Ut(),Oe=_t(Ne);mr(Oe,t,"controls",{},null),De(le,Ne)},background:(le,Ge)=>{var Ne=Ut(),Oe=_t(Ne);mr(Oe,t,"background",{},null),De(le,Ne)},toggle:(le,Ge)=>{var Ne=Ut(),Oe=_t(Ne);mr(Oe,t,"toggle",{},null),De(le,Ne)},drawer:(le,Ge)=>{var Ne=Ut(),Oe=_t(Ne);mr(Oe,t,"drawer",{},null),De(le,Ne)},contrast:(le,Ge)=>{var Ne=Ut(),Oe=_t(Ne);mr(Oe,t,"contrast",{},null),De(le,Ne)}}})},re=Q=>{var le=Ane();let Ge;It(()=>Ge=Nr(le,"",Ge,{width:y()?y()+"px":"100%",height:m()?m()+"px":"100%"})),De(Q,le)};Kt(te,Q=>{A(ie)?Q(ue):Q(re,!1)})}return De(e,ge),b2(t,"disconnect",we),ir({disconnect:we})}var Pne=Gt("<button></button>");function Cne(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(N,"$position",r),s=()=>Be(k,"$rotation",r),o=()=>Be(A(y),"$zIndex",r),a=()=>Be(R,"$borderRadius",r),u=()=>Be(C,"$bgColor",r),c=()=>Be(B,"$width",r),f=()=>Be(z,"$height",r),h=Me(),v=Me(),y=Me(),m=Me();let _=he(t,"node",8),x=he(t,"hidden",8,!1),S=he(t,"toggleHidden",8),P=he(t,"top",8),T=he(t,"left",8),E=he(t,"nodeColor",8,null),O=he(t,"hideable",8);const{position:N,dimensions:d,bgColor:C,borderRadius:R,rotation:k}=_(),{width:B,height:z}=d;let U=Me(null);An(()=>{var D;try{const F=(D=document.querySelector(`#${_().id}`))==null?void 0:D.firstChild;F&&pe(U,window.getComputedStyle(F).backgroundColor)}catch(F){console.error(F)}}),Fe(()=>i(),()=>{pe(h,i())}),Fe(()=>s(),()=>{pe(v,s())}),Fe(()=>qt(_()),()=>{Ja(pe(y,_().zIndex),"$zIndex",r)}),Fe(()=>A(U),()=>{pe(m,A(U)==="rgba(0, 0, 0, 0)")}),li(),gn();var Y=Pne();let oe,W;It(D=>{oe=on(Y,1,"minimap-node svelte-1hs9omb",null,oe,D),W=Nr(Y,"",W,{"z-index":o(),"border-radius":`${a()??""}px`,"--prop-background-color":E()||u()||!A(m)&&A(U)||null,width:`${c()??""}px`,height:`${f()??""}px`,transform:`rotate(${A(v)??""}deg)`,top:`${A(h).y-P()}px`,left:`${A(h).x-T()}px`})},[()=>({hidden:x(),hideable:O()})],pn),ar("click",Y,()=>{O()&&S()(_())}),De(e,Y),ir(),n()}var One=Gt('<div class="mini-bounding-box svelte-aoq4g"></div>');function Ine(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(c(),"$position",r),s=()=>Be(m,"$width",r),o=()=>Be(_,"$height",r),a=()=>Be(f(),"$color",r);let u=he(t,"dimensions",8),c=he(t,"position",8),f=he(t,"color",8),h=he(t,"groupName",8),v=he(t,"top",8),y=he(t,"left",8);const{width:m,height:_}=u();gn();var x=One();let S;It(()=>{ht(x,"id",`mini-${h()}-bounding-box`),S=Nr(x,`border: solid 4px ${a()??""};`,S,{top:`${i().y-v()}px`,left:`${i().x-y()}px`,width:`${s()}px`,height:`${o()}px`,"background-color":a()})}),De(e,x),ir(),n()}var Rne=Gt('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function yV(e,t){nr(t,!1);const[r,n]=Xr(),i=()=>Be(Ne,"$graphBounds",r),s=()=>Be(Ze,"$groups",r),o=()=>Be(q,"$dimensions",r),a=()=>Be(K,"$scale",r),u=()=>Be(J,"$translation",r),c=()=>Be(G,"$hidden",r),f=()=>Be(Oe,"$nodes",r),h=()=>Be(Ee,"$groupBoxes",r),v=Me(),y=Me(),m=Me(),_=Me(),x=Me(),S=Me(),P=Me(),T=Me(),E=Me(),O=Me(),N=Me(),d=Me(),C=Me(),R=Me(),k=Me(),B=Me(),z=Me(),U=Me(),Y=Me(),oe=Me(),W=Me(),D=Me(),F=Me();let H=gr("graph"),ie=he(t,"width",8,100),se=he(t,"height",24,ie),we=he(t,"mapColor",8,null),ge=he(t,"nodeColor",8,null),te=he(t,"borderColor",8,null),ue=he(t,"corner",8,"SE"),re=he(t,"hideable",8,!1);const Q=.9,le=ie()*Q,Ge=se()*Q,Ne=H.bounds.graphBounds,Oe=H.nodes,Ze=H.groups,$e=H.transforms,q=H.dimensions,G=s().hidden.nodes,K=$e.scale,J=$e.translation,Ee=H.groupBoxes,fe={clientX:0,clientY:0};function Te(dt){c().has(dt)?c().delete(dt):c().add(dt),St(G,c())}Fe(()=>i(),()=>{pe(v,i())}),Fe(()=>A(v),()=>{pe(y,A(v).top)}),Fe(()=>A(v),()=>{pe(m,A(v).left)}),Fe(()=>A(v),()=>{pe(_,A(v).right)}),Fe(()=>A(v),()=>{pe(x,A(v).bottom)}),Fe(()=>o(),()=>{pe(S,o().width)}),Fe(()=>o(),()=>{pe(P,o().height)}),Fe(()=>(A(_),A(m)),()=>{pe(T,A(_)-A(m))}),Fe(()=>(A(x),A(y)),()=>{pe(E,A(x)-A(y))}),Fe(()=>(A(T),A(E)),()=>{pe(O,A(T)/A(E))}),Fe(()=>(qt(ie()),qt(se())),()=>{pe(N,ie()/se())}),Fe(()=>(A(S),A(P),a(),u()),()=>{pe(d,$h(fe,0,0,A(S),A(P),a(),u()))}),Fe(()=>(A(S),A(T),a()),()=>{pe(C,A(S)/A(T)/a())}),Fe(()=>(A(P),A(E),a()),()=>{pe(R,A(P)/A(E)/a())}),Fe(()=>(A(d),A(y),A(E)),()=>{pe(k,(A(d).y-A(y))/A(E))}),Fe(()=>(A(d),A(m),A(T)),()=>{pe(B,(A(d).x-A(m))/A(T))}),Fe(()=>(A(O),A(N)),()=>{pe(U,A(O)>=A(N))}),Fe(()=>(A(U),A(T),A(E)),()=>{pe(Y,A(U)?le/A(T):Ge/A(E))}),Fe(()=>(A(E),A(Y)),()=>{pe(F,A(E)*A(Y))}),Fe(()=>(qt(se()),A(F)),()=>{pe(W,(se()-A(F))/2)}),Fe(()=>(A(T),A(Y)),()=>{pe(D,A(T)*A(Y))}),Fe(()=>(qt(ie()),A(D)),()=>{pe(oe,(ie()-A(D))/2)}),Fe(()=>(A(W),A(k),A(F),A(oe),A(B),A(D),A(C),A(R)),()=>{pe(z,`
		top: ${A(W)+A(k)*A(F)}px;
		left: ${A(oe)+A(B)*A(D)}px;
		width: ${A(C)*A(D)}px;
		height: ${A(R)*A(F)}px;`)}),li(),gn();var Ce=Rne();let Ue,Le;var Ie=gt(Ce);let Se;var Ye=gt(Ie);Pi(Ye,1,()=>Array.from(f().entries()),([dt,it])=>dt,(dt,it)=>{let Jt=()=>A(it)[1];var Sr=Ut(),sr=_t(Sr);{var vr=qr=>{const Vr=pn(()=>c().has(Jt()));Cne(qr,{get node(){return Jt()},get top(){return A(y)},get left(){return A(m)},get nodeColor(){return ge()},get hidden(){return A(Vr)},toggleHidden:Te,get hideable(){return re()}})};Kt(sr,qr=>{Jt().id!=="N-editor"&&qr(vr)})}De(dt,Sr)});var ft=at(Ye,2);Pi(ft,1,()=>Array.from(h().entries()),([dt,it])=>dt,(dt,it)=>{let Jt=()=>A(it)[0];Ine(dt,Vl(()=>A(it)[1],{get top(){return A(y)},get left(){return A(m)},get groupName(){return Jt()}}))});var bt=at(Ie,2);It(dt=>{Ue=on(Ce,1,"minimap-wrapper svelte-1qxvbux",null,Ue,dt),Le=Nr(Ce,"",Le,{width:`${ie()??""}px`,height:`${(se()?se():ie())??""}px`,"--prop-minimap-border-color":te(),"--prop-minimap-background-color":we()}),Se=Nr(Ie,"",Se,{width:`${A(T)??""}px`,height:`${A(E)??""}px`,transform:`scale(${A(Y)??""})`}),Nr(bt,A(z))},[()=>({SW:ue()==="SW",NE:ue()==="NE",SE:ue()==="SE",NW:ue()==="NW"})],pn),De(e,Ce),ir(),n()}const kne=Object.freeze(Object.defineProperty({__proto__:null,default:yV},Symbol.toStringTag,{value:"Module"}));function Mne(e){return e&&typeof e.subscribe=="function"}function Lp(e){const t={};for(const r in e){const n=e[r];if(r==="nodes"&&typeof n=="object"&&typeof n.getAll=="function"){const i=n.getAll();t[r]=i.map(s=>Lp(s))}else if(Mne(n)){const i=st(n);t[r]=typeof i=="object"&&i!==null?Lp(i):i}else typeof n=="object"&&n!==null?t[r]=Lp(n):t[r]=n}return t}function Lne(e,t){return t instanceof DOMRectReadOnly?{x:t.x,y:t.y,width:t.width,height:t.height}:t}function Nne(e){console.log("graph state object:",e);const t=Lp(e),r=JSON.stringify(t,Lne);return localStorage.setItem("state",r),r}var qne=Gt('<div><button class="svelte-1vnlnjg"><span class="material-symbols-outlined svelte-1vnlnjg"> </span></button> <button class="save-button NW svelte-1vnlnjg">Save</button></div>');function _V(e,t){nr(t,!1),console.log("Componente ThemeToggle.svelte");let r=he(t,"main",8,"light"),n=he(t,"alt",8,"dark"),i=he(t,"mainIcon",8,"light_mode"),s=he(t,"altIcon",8,"dark_mode"),o=he(t,"corner",8,"NE"),a=he(t,"bgColor",8,null),u=he(t,"iconColor",8,null),c=Me(r());function f(){const T=document.documentElement.getAttribute("svelvet-theme");let E;!T||T===r()?E=n():E=r(),pe(c,E),document.documentElement.setAttribute("svelvet-theme",E),localStorage.setItem("currentTheme",E)}An(()=>{const T=localStorage.getItem("currentTheme");T?(document.documentElement.setAttribute("svelvet-theme",T),pe(c,T)):(document.documentElement.setAttribute("svelvet-theme",r()),pe(c,r()));const E=localStorage.getItem("state");if(E){console.log("Al renderizar la aplicacion este componente se ejecuta en este orden");const O=JSON.parse(E);if(O&&O.nodes){const N=st(mh);console.log(N),N.set("G-1",O),console.log("Restaurando nodos:",O.nodes)}}});let h=Me();mh.subscribe(T=>{pe(h,T.get("G-1")),console.log("Graph from store:",A(h))}),gn();var v=qne();let y,m;var _=gt(v),x=gt(_),S=gt(x),P=at(_,2);It(T=>{y=on(v,1,"controls-wrapper svelte-1vnlnjg",null,y,T),m=Nr(v,"",m,{"--prop-theme-toggle-color":a(),"--prop-theme-toggle-text-color":u()}),Bi(S,A(c)===r()?s():i())},[()=>({SW:o()==="SW",NE:o()==="NE",SE:o()==="SE",NW:o()==="NW"})],pn),ar("mousedown",_,ho(f)),ar("touchstart",_,ho(f)),ar("click",P,()=>{Nne(A(h))}),De(e,v),ir()}const Dne=Object.freeze(Object.defineProperty({__proto__:null,default:_V},Symbol.toStringTag,{value:"Module"}));function to(e,t,r){return t.map((n,i)=>e(n,r[i]))}function dp(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function la(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function Fne(e){return e>>5}function pa(e){return e&31}function El(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&pa(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function P2(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Bne=P2(1,8),zne=P2(3,3),Vne=P2(4,8);function Gne(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function $ne(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function Une(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=Vne[f];pa(a)==0&&u++;const v=(1<<4*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=4*f.length}a<r&&El(a,u,o,n,i)}function jne(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Bne[f];pa(a)==0&&u++;const v=(1<<1*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=1*f.length}a<r&&El(a,u,o,n,i)}let Hne=class bV extends Error{constructor(t){super(t),Object.setPrototypeOf(this,bV.prototype)}};function qi(e,t){if(!e)throw new Hne("Assertion failed: "+t)}let Ta=class Rr{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:qi(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Rr(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Rr.make(t,-1)}static ones(t){return Rr.make(t,1)}static xes(t){return Rr.make(t,0)}static fromBool(t,r=1){return Rr.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),pa(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Rr(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Rr.fromIteratorPow2(t,r,n):Rr.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)pa(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&El(s,o,i,a,u),new Rr(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)pa(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&El(s,o,i,a,u),new Rr(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);pa(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&El(s,o,i,a,u),new Rr(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return jne(t,0,r,i,s),new Rr(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=zne[t[f]];pa(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&El(s,o,i,a,u),new Rr(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return Une(t,0,r,i,s),new Rr(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);qi(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Rr.fromBin(s,i);case"o":return Rr.fromOct(s,i);case"h":return Rr.fromHex(s,i);case"d":return Rr.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Rr(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Rr.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Rr.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=pa(t),n=Fne(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=to((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=to((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return qi(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Rr(this._bits,to((r,n)=>r&n,t._avec,this._avec),to((r,n)=>r&n,t._bvec,this._bvec))}or(t){return qi(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Rr(this._bits,to((r,n)=>r|n,t._avec,this._avec),to((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return qi(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Rr(this._bits,dp((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),dp((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return qi(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Rr(this._bits,to((r,n)=>~(r&n),t._bvec,this._bvec),to((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return qi(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Rr(this._bits,to((r,n)=>~(r|n),t._bvec,this._bvec),to((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return qi(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Rr(this._bits,dp((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),dp((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Rr(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=to((r,n)=>r^n,this._avec,this._bvec);return new Rr(this._bits,t,t)}reduceAnd(){return new Rr(1,Uint32Array.of(la((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(la((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Rr(1,Uint32Array.of(la((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(la((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Rr(1,Uint32Array.of(~la((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~la((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Rr(1,Uint32Array.of(~la((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~la((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=to((i,s)=>~i&s,this._avec,this._bvec),r=la((i,s)=>i|s,t,this._lastmask,0),n=la((i,s)=>i^s,this._avec,this._lastmask,0);return new Rr(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Rr.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),pa(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Rr(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Rr(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return $ne(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),Gne(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(qi(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),qi(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return qi(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),qi(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),qi(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(qi(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return qi(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),qi(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}};Ta.empty=Ta.zeros(0);Ta.one=Ta.ones(1);Ta.zero=Ta.zeros(1);Ta.x=Ta.xes(1);var Di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wne(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var IO={},RO={},a0={exports:{}},kO;function Wr(){if(kO)return a0.exports;kO=1;var e=a0.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();return typeof __g=="number"&&(__g=e),a0.exports}var u0,MO;function yo(){if(MO)return u0;MO=1;var e={}.hasOwnProperty;return u0=function(t,r){return e.call(t,r)},u0}var c0,LO;function en(){return LO||(LO=1,c0=function(e){try{return!!e()}catch{return!0}}),c0}var l0,NO;function $n(){return NO||(NO=1,l0=!en()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),l0}var f0={exports:{}},qO;function Wo(){if(qO)return f0.exports;qO=1;var e=f0.exports={version:"2.6.12"};return typeof __e=="number"&&(__e=e),f0.exports}var h0={},d0,DO;function cn(){return DO||(DO=1,d0=function(e){return typeof e=="object"?e!==null:typeof e=="function"}),d0}var p0,FO;function xr(){if(FO)return p0;FO=1;var e=cn();return p0=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},p0}var v0,BO;function C2(){if(BO)return v0;BO=1;var e=cn(),t=Wr().document,r=e(t)&&e(t.createElement);return v0=function(n){return r?t.createElement(n):{}},v0}var g0,zO;function wV(){return zO||(zO=1,g0=!$n()&&!en()(function(){return Object.defineProperty(C2()("div"),"a",{get:function(){return 7}}).a!=7})),g0}var m0,VO;function Pa(){if(VO)return m0;VO=1;var e=cn();return m0=function(t,r){if(!e(t))return t;var n,i;if(r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t))||typeof(n=t.valueOf)=="function"&&!e(i=n.call(t))||!r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},m0}var GO;function si(){if(GO)return h0;GO=1;var e=xr(),t=wV(),r=Pa(),n=Object.defineProperty;return h0.f=$n()?Object.defineProperty:function(s,o,a){if(e(s),o=r(o,!0),e(a),t)try{return n(s,o,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(s[o]=a.value),s},h0}var y0,$O;function Rc(){return $O||($O=1,y0=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),y0}var _0,UO;function $s(){if(UO)return _0;UO=1;var e=si(),t=Rc();return _0=$n()?function(r,n,i){return e.f(r,n,t(1,i))}:function(r,n,i){return r[n]=i,r},_0}var b0={exports:{}},w0,jO;function kc(){if(jO)return w0;jO=1;var e=0,t=Math.random();return w0=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++e+t).toString(36))},w0}var x0={exports:{}},S0,HO;function Uu(){return HO||(HO=1,S0=!1),S0}var WO;function Uh(){if(WO)return x0.exports;WO=1;var e=Wo(),t=Wr(),r="__core-js_shared__",n=t[r]||(t[r]={});return(x0.exports=function(i,s){return n[i]||(n[i]=s!==void 0?s:{})})("versions",[]).push({version:e.version,mode:Uu()?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"}),x0.exports}var E0,XO;function Xne(){return XO||(XO=1,E0=Uh()("native-function-to-string",Function.toString)),E0}var YO;function Us(){if(YO)return b0.exports;YO=1;var e=Wr(),t=$s(),r=yo(),n=kc()("src"),i=Xne(),s="toString",o=(""+i).split(s);return Wo().inspectSource=function(a){return i.call(a)},(b0.exports=function(a,u,c,f){var h=typeof c=="function";h&&(r(c,"name")||t(c,"name",u)),a[u]!==c&&(h&&(r(c,n)||t(c,n,a[u]?""+a[u]:o.join(String(u)))),a===e?a[u]=c:f?a[u]?a[u]=c:t(a,u,c):(delete a[u],t(a,u,c)))})(Function.prototype,s,function(){return typeof this=="function"&&this[n]||i.call(this)}),b0.exports}var A0,KO;function os(){return KO||(KO=1,A0=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}),A0}var T0,JO;function Xo(){if(JO)return T0;JO=1;var e=os();return T0=function(t,r,n){if(e(t),r===void 0)return t;switch(n){case 1:return function(i){return t.call(r,i)};case 2:return function(i,s){return t.call(r,i,s)};case 3:return function(i,s,o){return t.call(r,i,s,o)}}return function(){return t.apply(r,arguments)}},T0}var P0,ZO;function je(){if(ZO)return P0;ZO=1;var e=Wr(),t=Wo(),r=$s(),n=Us(),i=Xo(),s="prototype",o=function(a,u,c){var f=a&o.F,h=a&o.G,v=a&o.S,y=a&o.P,m=a&o.B,_=h?e:v?e[u]||(e[u]={}):(e[u]||{})[s],x=h?t:t[u]||(t[u]={}),S=x[s]||(x[s]={}),P,T,E,O;h&&(c=u);for(P in c)T=!f&&_&&_[P]!==void 0,E=(T?_:c)[P],O=m&&T?i(E,e):y&&typeof E=="function"?i(Function.call,E):E,_&&n(_,P,E,a&o.U),x[P]!=E&&r(x,P,O),y&&S[P]!=E&&(S[P]=E)};return e.core=t,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,P0=o,P0}var C0={exports:{}},QO;function ju(){if(QO)return C0.exports;QO=1;var e=kc()("meta"),t=cn(),r=yo(),n=si().f,i=0,s=Object.isExtensible||function(){return!0},o=!en()(function(){return s(Object.preventExtensions({}))}),a=function(v){n(v,e,{value:{i:"O"+ ++i,w:{}}})},u=function(v,y){if(!t(v))return typeof v=="symbol"?v:(typeof v=="string"?"S":"P")+v;if(!r(v,e)){if(!s(v))return"F";if(!y)return"E";a(v)}return v[e].i},c=function(v,y){if(!r(v,e)){if(!s(v))return!0;if(!y)return!1;a(v)}return v[e].w},f=function(v){return o&&h.NEED&&s(v)&&!r(v,e)&&a(v),v},h=C0.exports={KEY:e,NEED:!1,fastKey:u,getWeak:c,onFreeze:f};return C0.exports}var O0={exports:{}},eI;function Ln(){if(eI)return O0.exports;eI=1;var e=Uh()("wks"),t=kc(),r=Wr().Symbol,n=typeof r=="function",i=O0.exports=function(s){return e[s]||(e[s]=n&&r[s]||(n?r:t)("Symbol."+s))};return i.store=e,O0.exports}var I0,tI;function rf(){if(tI)return I0;tI=1;var e=si().f,t=yo(),r=Ln()("toStringTag");return I0=function(n,i,s){n&&!t(n=s?n:n.prototype,r)&&e(n,r,{configurable:!0,value:i})},I0}var R0={},rI;function xV(){return rI||(rI=1,R0.f=Ln()),R0}var k0,nI;function O2(){if(nI)return k0;nI=1;var e=Wr(),t=Wo(),r=Uu(),n=xV(),i=si().f;return k0=function(s){var o=t.Symbol||(t.Symbol=r?{}:e.Symbol||{});s.charAt(0)!="_"&&!(s in o)&&i(o,s,{value:n.f(s)})},k0}var M0,iI;function Yo(){if(iI)return M0;iI=1;var e={}.toString;return M0=function(t){return e.call(t).slice(8,-1)},M0}var L0,sI;function jh(){if(sI)return L0;sI=1;var e=Yo();return L0=Object("z").propertyIsEnumerable(0)?Object:function(t){return e(t)=="String"?t.split(""):Object(t)},L0}var N0,oI;function Ca(){return oI||(oI=1,N0=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}),N0}var q0,aI;function _o(){if(aI)return q0;aI=1;var e=jh(),t=Ca();return q0=function(r){return e(t(r))},q0}var D0,uI;function Ko(){if(uI)return D0;uI=1;var e=Math.ceil,t=Math.floor;return D0=function(r){return isNaN(r=+r)?0:(r>0?t:e)(r)},D0}var F0,cI;function Dn(){if(cI)return F0;cI=1;var e=Ko(),t=Math.min;return F0=function(r){return r>0?t(e(r),9007199254740991):0},F0}var B0,lI;function Mc(){if(lI)return B0;lI=1;var e=Ko(),t=Math.max,r=Math.min;return B0=function(n,i){return n=e(n),n<0?t(n+i,0):r(n,i)},B0}var z0,fI;function Rv(){if(fI)return z0;fI=1;var e=_o(),t=Dn(),r=Mc();return z0=function(n){return function(i,s,o){var a=e(i),u=t(a.length),c=r(o,u),f;if(n&&s!=s){for(;u>c;)if(f=a[c++],f!=f)return!0}else for(;u>c;c++)if((n||c in a)&&a[c]===s)return n||c||0;return!n&&-1}},z0}var V0,hI;function I2(){if(hI)return V0;hI=1;var e=Uh()("keys"),t=kc();return V0=function(r){return e[r]||(e[r]=t(r))},V0}var G0,dI;function SV(){if(dI)return G0;dI=1;var e=yo(),t=_o(),r=Rv()(!1),n=I2()("IE_PROTO");return G0=function(i,s){var o=t(i),a=0,u=[],c;for(c in o)c!=n&&e(o,c)&&u.push(c);for(;s.length>a;)e(o,c=s[a++])&&(~r(u,c)||u.push(c));return u},G0}var $0,pI;function R2(){return pI||(pI=1,$0="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")),$0}var U0,vI;function Lc(){if(vI)return U0;vI=1;var e=SV(),t=R2();return U0=Object.keys||function(n){return e(n,t)},U0}var j0={},gI;function kv(){return gI||(gI=1,j0.f=Object.getOwnPropertySymbols),j0}var H0={},mI;function Hh(){return mI||(mI=1,H0.f={}.propertyIsEnumerable),H0}var W0,yI;function Yne(){if(yI)return W0;yI=1;var e=Lc(),t=kv(),r=Hh();return W0=function(n){var i=e(n),s=t.f;if(s)for(var o=s(n),a=r.f,u=0,c;o.length>u;)a.call(n,c=o[u++])&&i.push(c);return i},W0}var X0,_I;function Mv(){if(_I)return X0;_I=1;var e=Yo();return X0=Array.isArray||function(r){return e(r)=="Array"},X0}var Y0,bI;function fi(){if(bI)return Y0;bI=1;var e=Ca();return Y0=function(t){return Object(e(t))},Y0}var K0,wI;function EV(){if(wI)return K0;wI=1;var e=si(),t=xr(),r=Lc();return K0=$n()?Object.defineProperties:function(i,s){t(i);for(var o=r(s),a=o.length,u=0,c;a>u;)e.f(i,c=o[u++],s[c]);return i},K0}var J0,xI;function k2(){if(xI)return J0;xI=1;var e=Wr().document;return J0=e&&e.documentElement,J0}var Z0,SI;function Nc(){if(SI)return Z0;SI=1;var e=xr(),t=EV(),r=R2(),n=I2()("IE_PROTO"),i=function(){},s="prototype",o=function(){var a=C2()("iframe"),u=r.length,c="<",f=">",h;for(a.style.display="none",k2().appendChild(a),a.src="javascript:",h=a.contentWindow.document,h.open(),h.write(c+"script"+f+"document.F=Object"+c+"/script"+f),h.close(),o=h.F;u--;)delete o[s][r[u]];return o()};return Z0=Object.create||function(u,c){var f;return u!==null?(i[s]=e(u),f=new i,i[s]=null,f[n]=u):f=o(),c===void 0?f:t(f,c)},Z0}var Q0={},ey={},EI;function qc(){if(EI)return ey;EI=1;var e=SV(),t=R2().concat("length","prototype");return ey.f=Object.getOwnPropertyNames||function(n){return e(n,t)},ey}var AI;function AV(){if(AI)return Q0;AI=1;var e=_o(),t=qc().f,r={}.toString,n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(s){try{return t(s)}catch{return n.slice()}};return Q0.f=function(o){return n&&r.call(o)=="[object Window]"?i(o):t(e(o))},Q0}var ty={},TI;function bo(){if(TI)return ty;TI=1;var e=Hh(),t=Rc(),r=_o(),n=Pa(),i=yo(),s=wV(),o=Object.getOwnPropertyDescriptor;return ty.f=$n()?o:function(u,c){if(u=r(u),c=n(c,!0),s)try{return o(u,c)}catch{}if(i(u,c))return t(!e.f.call(u,c),u[c])},ty}var PI;function Kne(){if(PI)return RO;PI=1;var e=Wr(),t=yo(),r=$n(),n=je(),i=Us(),s=ju().KEY,o=en(),a=Uh(),u=rf(),c=kc(),f=Ln(),h=xV(),v=O2(),y=Yne(),m=Mv(),_=xr(),x=cn(),S=fi(),P=_o(),T=Pa(),E=Rc(),O=Nc(),N=AV(),d=bo(),C=kv(),R=si(),k=Lc(),B=d.f,z=R.f,U=N.f,Y=e.Symbol,oe=e.JSON,W=oe&&oe.stringify,D="prototype",F=f("_hidden"),H=f("toPrimitive"),ie={}.propertyIsEnumerable,se=a("symbol-registry"),we=a("symbols"),ge=a("op-symbols"),te=Object[D],ue=typeof Y=="function"&&!!C.f,re=e.QObject,Q=!re||!re[D]||!re[D].findChild,le=r&&o(function(){return O(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a!=7})?function(Le,Ie,Se){var Ye=B(te,Ie);Ye&&delete te[Ie],z(Le,Ie,Se),Ye&&Le!==te&&z(te,Ie,Ye)}:z,Ge=function(Le){var Ie=we[Le]=O(Y[D]);return Ie._k=Le,Ie},Ne=ue&&typeof Y.iterator=="symbol"?function(Le){return typeof Le=="symbol"}:function(Le){return Le instanceof Y},Oe=function(Ie,Se,Ye){return Ie===te&&Oe(ge,Se,Ye),_(Ie),Se=T(Se,!0),_(Ye),t(we,Se)?(Ye.enumerable?(t(Ie,F)&&Ie[F][Se]&&(Ie[F][Se]=!1),Ye=O(Ye,{enumerable:E(0,!1)})):(t(Ie,F)||z(Ie,F,E(1,{})),Ie[F][Se]=!0),le(Ie,Se,Ye)):z(Ie,Se,Ye)},Ze=function(Ie,Se){_(Ie);for(var Ye=y(Se=P(Se)),ft=0,bt=Ye.length,dt;bt>ft;)Oe(Ie,dt=Ye[ft++],Se[dt]);return Ie},$e=function(Ie,Se){return Se===void 0?O(Ie):Ze(O(Ie),Se)},q=function(Ie){var Se=ie.call(this,Ie=T(Ie,!0));return this===te&&t(we,Ie)&&!t(ge,Ie)?!1:Se||!t(this,Ie)||!t(we,Ie)||t(this,F)&&this[F][Ie]?Se:!0},G=function(Ie,Se){if(Ie=P(Ie),Se=T(Se,!0),!(Ie===te&&t(we,Se)&&!t(ge,Se))){var Ye=B(Ie,Se);return Ye&&t(we,Se)&&!(t(Ie,F)&&Ie[F][Se])&&(Ye.enumerable=!0),Ye}},K=function(Ie){for(var Se=U(P(Ie)),Ye=[],ft=0,bt;Se.length>ft;)!t(we,bt=Se[ft++])&&bt!=F&&bt!=s&&Ye.push(bt);return Ye},J=function(Ie){for(var Se=Ie===te,Ye=U(Se?ge:P(Ie)),ft=[],bt=0,dt;Ye.length>bt;)t(we,dt=Ye[bt++])&&(!Se||t(te,dt))&&ft.push(we[dt]);return ft};ue||(Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor!");var Ie=c(arguments.length>0?arguments[0]:void 0),Se=function(Ye){this===te&&Se.call(ge,Ye),t(this,F)&&t(this[F],Ie)&&(this[F][Ie]=!1),le(this,Ie,E(1,Ye))};return r&&Q&&le(te,Ie,{configurable:!0,set:Se}),Ge(Ie)},i(Y[D],"toString",function(){return this._k}),d.f=G,R.f=Oe,qc().f=N.f=K,Hh().f=q,C.f=J,r&&!Uu()&&i(te,"propertyIsEnumerable",q,!0),h.f=function(Le){return Ge(f(Le))}),n(n.G+n.W+n.F*!ue,{Symbol:Y});for(var Ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),fe=0;Ee.length>fe;)f(Ee[fe++]);for(var Te=k(f.store),Ce=0;Te.length>Ce;)v(Te[Ce++]);n(n.S+n.F*!ue,"Symbol",{for:function(Le){return t(se,Le+="")?se[Le]:se[Le]=Y(Le)},keyFor:function(Ie){if(!Ne(Ie))throw TypeError(Ie+" is not a symbol!");for(var Se in se)if(se[Se]===Ie)return Se},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),n(n.S+n.F*!ue,"Object",{create:$e,defineProperty:Oe,defineProperties:Ze,getOwnPropertyDescriptor:G,getOwnPropertyNames:K,getOwnPropertySymbols:J});var Ue=o(function(){C.f(1)});return n(n.S+n.F*Ue,"Object",{getOwnPropertySymbols:function(Ie){return C.f(S(Ie))}}),oe&&n(n.S+n.F*(!ue||o(function(){var Le=Y();return W([Le])!="[null]"||W({a:Le})!="{}"||W(Object(Le))!="{}"})),"JSON",{stringify:function(Ie){for(var Se=[Ie],Ye=1,ft,bt;arguments.length>Ye;)Se.push(arguments[Ye++]);if(bt=ft=Se[1],!(!x(ft)&&Ie===void 0||Ne(Ie)))return m(ft)||(ft=function(dt,it){if(typeof bt=="function"&&(it=bt.call(this,dt,it)),!Ne(it))return it}),Se[1]=ft,W.apply(oe,Se)}}),Y[D][H]||$s()(Y[D],H,Y[D].valueOf),u(Y,"Symbol"),u(Math,"Math",!0),u(e.JSON,"JSON",!0),RO}var CI={},OI;function Jne(){if(OI)return CI;OI=1;var e=je();return e(e.S,"Object",{create:Nc()}),CI}var II={},RI;function Zne(){if(RI)return II;RI=1;var e=je();return e(e.S+e.F*!$n(),"Object",{defineProperty:si().f}),II}var kI={},MI;function Qne(){if(MI)return kI;MI=1;var e=je();return e(e.S+e.F*!$n(),"Object",{defineProperties:EV()}),kI}var LI={},ry,NI;function Oa(){if(NI)return ry;NI=1;var e=je(),t=Wo(),r=en();return ry=function(n,i){var s=(t.Object||{})[n]||Object[n],o={};o[n]=i(s),e(e.S+e.F*r(function(){s(1)}),"Object",o)},ry}var qI;function eie(){if(qI)return LI;qI=1;var e=_o(),t=bo().f;return Oa()("getOwnPropertyDescriptor",function(){return function(n,i){return t(e(n),i)}}),LI}var DI={},ny,FI;function wo(){if(FI)return ny;FI=1;var e=yo(),t=fi(),r=I2()("IE_PROTO"),n=Object.prototype;return ny=Object.getPrototypeOf||function(i){return i=t(i),e(i,r)?i[r]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?n:null},ny}var BI;function tie(){if(BI)return DI;BI=1;var e=fi(),t=wo();return Oa()("getPrototypeOf",function(){return function(n){return t(e(n))}}),DI}var zI={},VI;function rie(){if(VI)return zI;VI=1;var e=fi(),t=Lc();return Oa()("keys",function(){return function(n){return t(e(n))}}),zI}var GI={},$I;function nie(){return $I||($I=1,Oa()("getOwnPropertyNames",function(){return AV().f})),GI}var UI={},jI;function iie(){if(jI)return UI;jI=1;var e=cn(),t=ju().onFreeze;return Oa()("freeze",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),UI}var HI={},WI;function sie(){if(WI)return HI;WI=1;var e=cn(),t=ju().onFreeze;return Oa()("seal",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),HI}var XI={},YI;function oie(){if(YI)return XI;YI=1;var e=cn(),t=ju().onFreeze;return Oa()("preventExtensions",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),XI}var KI={},JI;function aie(){if(JI)return KI;JI=1;var e=cn();return Oa()("isFrozen",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),KI}var ZI={},QI;function uie(){if(QI)return ZI;QI=1;var e=cn();return Oa()("isSealed",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),ZI}var eR={},tR;function cie(){if(tR)return eR;tR=1;var e=cn();return Oa()("isExtensible",function(t){return function(n){return e(n)?t?t(n):!0:!1}}),eR}var rR={},iy,nR;function TV(){if(nR)return iy;nR=1;var e=$n(),t=Lc(),r=kv(),n=Hh(),i=fi(),s=jh(),o=Object.assign;return iy=!o||en()(function(){var a={},u={},c=Symbol(),f="abcdefghijklmnopqrst";return a[c]=7,f.split("").forEach(function(h){u[h]=h}),o({},a)[c]!=7||Object.keys(o({},u)).join("")!=f})?function(u,c){for(var f=i(u),h=arguments.length,v=1,y=r.f,m=n.f;h>v;)for(var _=s(arguments[v++]),x=y?t(_).concat(y(_)):t(_),S=x.length,P=0,T;S>P;)T=x[P++],(!e||m.call(_,T))&&(f[T]=_[T]);return f}:o,iy}var iR;function lie(){if(iR)return rR;iR=1;var e=je();return e(e.S+e.F,"Object",{assign:TV()}),rR}var sR={},sy,oR;function PV(){return oR||(oR=1,sy=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!=t&&r!=r}),sy}var aR;function fie(){if(aR)return sR;aR=1;var e=je();return e(e.S,"Object",{is:PV()}),sR}var uR={},oy,cR;function M2(){if(cR)return oy;cR=1;var e=cn(),t=xr(),r=function(n,i){if(t(n),!e(i)&&i!==null)throw TypeError(i+": can't set as prototype!")};return oy={set:Object.setPrototypeOf||("__proto__"in{}?function(n,i,s){try{s=Xo()(Function.call,bo().f(Object.prototype,"__proto__").set,2),s(n,[]),i=!(n instanceof Array)}catch{i=!0}return function(a,u){return r(a,u),i?a.__proto__=u:s(a,u),a}}({},!1):void 0),check:r},oy}var lR;function hie(){if(lR)return uR;lR=1;var e=je();return e(e.S,"Object",{setPrototypeOf:M2().set}),uR}var fR={},ay,hR;function nf(){if(hR)return ay;hR=1;var e=Yo(),t=Ln()("toStringTag"),r=e(function(){return arguments}())=="Arguments",n=function(i,s){try{return i[s]}catch{}};return ay=function(i){var s,o,a;return i===void 0?"Undefined":i===null?"Null":typeof(o=n(s=Object(i),t))=="string"?o:r?e(s):(a=e(s))=="Object"&&typeof s.callee=="function"?"Arguments":a},ay}var dR;function die(){if(dR)return fR;dR=1;var e=nf(),t={};return t[Ln()("toStringTag")]="z",t+""!="[object z]"&&Us()(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0),fR}var pR={},uy,vR;function CV(){return vR||(vR=1,uy=function(e,t,r){var n=r===void 0;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}),uy}var cy,gR;function OV(){if(gR)return cy;gR=1;var e=os(),t=cn(),r=CV(),n=[].slice,i={},s=function(o,a,u){if(!(a in i)){for(var c=[],f=0;f<a;f++)c[f]="a["+f+"]";i[a]=Function("F,a","return new F("+c.join(",")+")")}return i[a](o,u)};return cy=Function.bind||function(a){var u=e(this),c=n.call(arguments,1),f=function(){var h=c.concat(n.call(arguments));return this instanceof f?s(u,h.length,h):r(u,h,a)};return t(u.prototype)&&(f.prototype=u.prototype),f},cy}var mR;function pie(){if(mR)return pR;mR=1;var e=je();return e(e.P,"Function",{bind:OV()}),pR}var yR={},_R;function vie(){if(_R)return yR;_R=1;var e=si().f,t=Function.prototype,r=/^\s*function ([^ (]*)/,n="name";return n in t||$n()&&e(t,n,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch{return""}}}),yR}var bR={},wR;function gie(){if(wR)return bR;wR=1;var e=cn(),t=wo(),r=Ln()("hasInstance"),n=Function.prototype;return r in n||si().f(n,r,{value:function(i){if(typeof this!="function"||!e(i))return!1;if(!e(this.prototype))return i instanceof this;for(;i=t(i);)if(this.prototype===i)return!0;return!1}}),bR}var xR={},ly,SR;function L2(){return SR||(SR=1,ly=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\uFEFF`),ly}var fy,ER;function sf(){if(ER)return fy;ER=1;var e=je(),t=Ca(),r=en(),n=L2(),i="["+n+"]",s="âÂ",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),u=function(f,h,v){var y={},m=r(function(){return!!n[f]()||s[f]()!=s}),_=y[f]=m?h(c):n[f];v&&(y[v]=_),e(e.P+e.F*m,"String",y)},c=u.trim=function(f,h){return f=String(t(f)),h&1&&(f=f.replace(o,"")),h&2&&(f=f.replace(a,"")),f};return fy=u,fy}var hy,AR;function IV(){if(AR)return hy;AR=1;var e=Wr().parseInt,t=sf().trim,r=L2(),n=/^[-+]?0[xX]/;return hy=e(r+"08")!==8||e(r+"0x16")!==22?function(s,o){var a=t(String(s),3);return e(a,o>>>0||(n.test(a)?16:10))}:e,hy}var TR;function mie(){if(TR)return xR;TR=1;var e=je(),t=IV();return e(e.G+e.F*(parseInt!=t),{parseInt:t}),xR}var PR={},dy,CR;function RV(){if(CR)return dy;CR=1;var e=Wr().parseFloat,t=sf().trim;return dy=1/e(L2()+"-0")!==-1/0?function(n){var i=t(String(n),3),s=e(i);return s===0&&i.charAt(0)=="-"?-0:s}:e,dy}var OR;function yie(){if(OR)return PR;OR=1;var e=je(),t=RV();return e(e.G+e.F*(parseFloat!=t),{parseFloat:t}),PR}var IR={},py,RR;function N2(){if(RR)return py;RR=1;var e=cn(),t=M2().set;return py=function(r,n,i){var s=n.constructor,o;return s!==i&&typeof s=="function"&&(o=s.prototype)!==i.prototype&&e(o)&&t&&t(r,o),r},py}var kR;function _ie(){if(kR)return IR;kR=1;var e=Wr(),t=yo(),r=Yo(),n=N2(),i=Pa(),s=en(),o=qc().f,a=bo().f,u=si().f,c=sf().trim,f="Number",h=e[f],v=h,y=h.prototype,m=r(Nc()(y))==f,_="trim"in String.prototype,x=function(E){var O=i(E,!1);if(typeof O=="string"&&O.length>2){O=_?O.trim():c(O,3);var N=O.charCodeAt(0),d,C,R;if(N===43||N===45){if(d=O.charCodeAt(2),d===88||d===120)return NaN}else if(N===48){switch(O.charCodeAt(1)){case 66:case 98:C=2,R=49;break;case 79:case 111:C=8,R=55;break;default:return+O}for(var k=O.slice(2),B=0,z=k.length,U;B<z;B++)if(U=k.charCodeAt(B),U<48||U>R)return NaN;return parseInt(k,C)}}return+O};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(O){var N=arguments.length<1?0:O,d=this;return d instanceof h&&(m?s(function(){y.valueOf.call(d)}):r(d)!=f)?n(new v(x(N)),d,h):x(N)};for(var S=$n()?o(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0,T;S.length>P;P++)t(v,T=S[P])&&!t(h,T)&&u(h,T,a(v,T));h.prototype=y,y.constructor=h,Us()(e,f,h)}return IR}var MR={},vy,LR;function kV(){if(LR)return vy;LR=1;var e=Yo();return vy=function(t,r){if(typeof t!="number"&&e(t)!="Number")throw TypeError(r);return+t},vy}var gy,NR;function q2(){if(NR)return gy;NR=1;var e=Ko(),t=Ca();return gy=function(n){var i=String(t(this)),s="",o=e(n);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))o&1&&(s+=i);return s},gy}var qR;function bie(){if(qR)return MR;qR=1;var e=je(),t=Ko(),r=kV(),n=q2(),i=1 .toFixed,s=Math.floor,o=[0,0,0,0,0,0],a="Number.toFixed: incorrect invocation!",u="0",c=function(m,_){for(var x=-1,S=_;++x<6;)S+=m*o[x],o[x]=S%1e7,S=s(S/1e7)},f=function(m){for(var _=6,x=0;--_>=0;)x+=o[_],o[_]=s(x/m),x=x%m*1e7},h=function(){for(var m=6,_="";--m>=0;)if(_!==""||m===0||o[m]!==0){var x=String(o[m]);_=_===""?x:_+n.call(u,7-x.length)+x}return _},v=function(m,_,x){return _===0?x:_%2===1?v(m,_-1,x*m):v(m*m,_/2,x)},y=function(m){for(var _=0,x=m;x>=4096;)_+=12,x/=4096;for(;x>=2;)_+=1,x/=2;return _};return e(e.P+e.F*(!!i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!en()(function(){i.call({})})),"Number",{toFixed:function(_){var x=r(this,a),S=t(_),P="",T=u,E,O,N,d;if(S<0||S>20)throw RangeError(a);if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return String(x);if(x<0&&(P="-",x=-x),x>1e-21)if(E=y(x*v(2,69,1))-69,O=E<0?x*v(2,-E,1):x/v(2,E,1),O*=4503599627370496,E=52-E,E>0){for(c(0,O),N=S;N>=7;)c(1e7,0),N-=7;for(c(v(10,N,1),0),N=E-1;N>=23;)f(1<<23),N-=23;f(1<<N),c(1,1),f(2),T=h()}else c(0,O),c(1<<-E,0),T=h()+n.call(u,S);return S>0?(d=T.length,T=P+(d<=S?"0."+n.call(u,S-d)+T:T.slice(0,d-S)+"."+T.slice(d-S))):T=P+T,T}}),MR}var DR={},FR;function wie(){if(FR)return DR;FR=1;var e=je(),t=en(),r=kV(),n=1 .toPrecision;return e(e.P+e.F*(t(function(){return n.call(1,void 0)!=="1"})||!t(function(){n.call({})})),"Number",{toPrecision:function(s){var o=r(this,"Number#toPrecision: incorrect invocation!");return s===void 0?n.call(o):n.call(o,s)}}),DR}var BR={},zR;function xie(){if(zR)return BR;zR=1;var e=je();return e(e.S,"Number",{EPSILON:Math.pow(2,-52)}),BR}var VR={},GR;function Sie(){if(GR)return VR;GR=1;var e=je(),t=Wr().isFinite;return e(e.S,"Number",{isFinite:function(n){return typeof n=="number"&&t(n)}}),VR}var $R={},my,UR;function MV(){if(UR)return my;UR=1;var e=cn(),t=Math.floor;return my=function(n){return!e(n)&&isFinite(n)&&t(n)===n},my}var jR;function Eie(){if(jR)return $R;jR=1;var e=je();return e(e.S,"Number",{isInteger:MV()}),$R}var HR={},WR;function Aie(){if(WR)return HR;WR=1;var e=je();return e(e.S,"Number",{isNaN:function(r){return r!=r}}),HR}var XR={},YR;function Tie(){if(YR)return XR;YR=1;var e=je(),t=MV(),r=Math.abs;return e(e.S,"Number",{isSafeInteger:function(i){return t(i)&&r(i)<=9007199254740991}}),XR}var KR={},JR;function Pie(){if(JR)return KR;JR=1;var e=je();return e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),KR}var ZR={},QR;function Cie(){if(QR)return ZR;QR=1;var e=je();return e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),ZR}var ek={},tk;function Oie(){if(tk)return ek;tk=1;var e=je(),t=RV();return e(e.S+e.F*(Number.parseFloat!=t),"Number",{parseFloat:t}),ek}var rk={},nk;function Iie(){if(nk)return rk;nk=1;var e=je(),t=IV();return e(e.S+e.F*(Number.parseInt!=t),"Number",{parseInt:t}),rk}var ik={},yy,sk;function LV(){return sk||(sk=1,yy=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),yy}var ok;function Rie(){if(ok)return ik;ok=1;var e=je(),t=LV(),r=Math.sqrt,n=Math.acosh;return e(e.S+e.F*!(n&&Math.floor(n(Number.MAX_VALUE))==710&&n(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:t(s-1+r(s-1)*r(s+1))}}),ik}var ak={},uk;function kie(){if(uk)return ak;uk=1;var e=je(),t=Math.asinh;function r(n){return!isFinite(n=+n)||n==0?n:n<0?-r(-n):Math.log(n+Math.sqrt(n*n+1))}return e(e.S+e.F*!(t&&1/t(0)>0),"Math",{asinh:r}),ak}var ck={},lk;function Mie(){if(lk)return ck;lk=1;var e=je(),t=Math.atanh;return e(e.S+e.F*!(t&&1/t(-0)<0),"Math",{atanh:function(n){return(n=+n)==0?n:Math.log((1+n)/(1-n))/2}}),ck}var fk={},_y,hk;function D2(){return hk||(hk=1,_y=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}),_y}var dk;function Lie(){if(dk)return fk;dk=1;var e=je(),t=D2();return e(e.S,"Math",{cbrt:function(n){return t(n=+n)*Math.pow(Math.abs(n),1/3)}}),fk}var pk={},vk;function Nie(){if(vk)return pk;vk=1;var e=je();return e(e.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}}),pk}var gk={},mk;function qie(){if(mk)return gk;mk=1;var e=je(),t=Math.exp;return e(e.S,"Math",{cosh:function(n){return(t(n=+n)+t(-n))/2}}),gk}var yk={},by,_k;function F2(){if(_k)return by;_k=1;var e=Math.expm1;return by=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(r){return(r=+r)==0?r:r>-1e-6&&r<1e-6?r+r*r/2:Math.exp(r)-1}:e,by}var bk;function Die(){if(bk)return yk;bk=1;var e=je(),t=F2();return e(e.S+e.F*(t!=Math.expm1),"Math",{expm1:t}),yk}var wk={},wy,xk;function NV(){if(xk)return wy;xk=1;var e=D2(),t=Math.pow,r=t(2,-52),n=t(2,-23),i=t(2,127)*(2-n),s=t(2,-126),o=function(a){return a+1/r-1/r};return wy=Math.fround||function(u){var c=Math.abs(u),f=e(u),h,v;return c<s?f*o(c/s/n)*s*n:(h=(1+n/r)*c,v=h-(h-c),v>i||v!=v?f*(1/0):f*v)},wy}var Sk;function Fie(){if(Sk)return wk;Sk=1;var e=je();return e(e.S,"Math",{fround:NV()}),wk}var Ek={},Ak;function Bie(){if(Ak)return Ek;Ak=1;var e=je(),t=Math.abs;return e(e.S,"Math",{hypot:function(n,i){for(var s=0,o=0,a=arguments.length,u=0,c,f;o<a;)c=t(arguments[o++]),u<c?(f=u/c,s=s*f*f+1,u=c):c>0?(f=c/u,s+=f*f):s+=c;return u===1/0?1/0:u*Math.sqrt(s)}}),Ek}var Tk={},Pk;function zie(){if(Pk)return Tk;Pk=1;var e=je(),t=Math.imul;return e(e.S+e.F*en()(function(){return t(4294967295,5)!=-5||t.length!=2}),"Math",{imul:function(n,i){var s=65535,o=+n,a=+i,u=s&o,c=s&a;return 0|u*c+((s&o>>>16)*c+u*(s&a>>>16)<<16>>>0)}}),Tk}var Ck={},Ok;function Vie(){if(Ok)return Ck;Ok=1;var e=je();return e(e.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}}),Ck}var Ik={},Rk;function Gie(){if(Rk)return Ik;Rk=1;var e=je();return e(e.S,"Math",{log1p:LV()}),Ik}var kk={},Mk;function $ie(){if(Mk)return kk;Mk=1;var e=je();return e(e.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}}),kk}var Lk={},Nk;function Uie(){if(Nk)return Lk;Nk=1;var e=je();return e(e.S,"Math",{sign:D2()}),Lk}var qk={},Dk;function jie(){if(Dk)return qk;Dk=1;var e=je(),t=F2(),r=Math.exp;return e(e.S+e.F*en()(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(i){return Math.abs(i=+i)<1?(t(i)-t(-i))/2:(r(i-1)-r(-i-1))*(Math.E/2)}}),qk}var Fk={},Bk;function Hie(){if(Bk)return Fk;Bk=1;var e=je(),t=F2(),r=Math.exp;return e(e.S,"Math",{tanh:function(i){var s=t(i=+i),o=t(-i);return s==1/0?1:o==1/0?-1:(s-o)/(r(i)+r(-i))}}),Fk}var zk={},Vk;function Wie(){if(Vk)return zk;Vk=1;var e=je();return e(e.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}}),zk}var Gk={},$k;function Xie(){if($k)return Gk;$k=1;var e=je(),t=Mc(),r=String.fromCharCode,n=String.fromCodePoint;return e(e.S+e.F*(!!n&&n.length!=1),"String",{fromCodePoint:function(s){for(var o=[],a=arguments.length,u=0,c;a>u;){if(c=+arguments[u++],t(c,1114111)!==c)throw RangeError(c+" is not a valid code point");o.push(c<65536?r(c):r(((c-=65536)>>10)+55296,c%1024+56320))}return o.join("")}}),Gk}var Uk={},jk;function Yie(){if(jk)return Uk;jk=1;var e=je(),t=_o(),r=Dn();return e(e.S,"String",{raw:function(i){for(var s=t(i.raw),o=r(s.length),a=arguments.length,u=[],c=0;o>c;)u.push(String(s[c++])),c<a&&u.push(String(arguments[c]));return u.join("")}}),Uk}var Hk={},Wk;function Kie(){return Wk||(Wk=1,sf()("trim",function(e){return function(){return e(this,3)}})),Hk}var Xk={},xy,Yk;function Lv(){if(Yk)return xy;Yk=1;var e=Ko(),t=Ca();return xy=function(r){return function(n,i){var s=String(t(n)),o=e(i),a=s.length,u,c;return o<0||o>=a?r?"":void 0:(u=s.charCodeAt(o),u<55296||u>56319||o+1===a||(c=s.charCodeAt(o+1))<56320||c>57343?r?s.charAt(o):u:r?s.slice(o,o+2):(u-55296<<10)+(c-56320)+65536)}},xy}var Sy,Kk;function of(){return Kk||(Kk=1,Sy={}),Sy}var Ey,Jk;function B2(){if(Jk)return Ey;Jk=1;var e=Nc(),t=Rc(),r=rf(),n={};return $s()(n,Ln()("iterator"),function(){return this}),Ey=function(i,s,o){i.prototype=e(n,{next:t(1,o)}),r(i,s+" Iterator")},Ey}var Ay,Zk;function z2(){if(Zk)return Ay;Zk=1;var e=Uu(),t=je(),r=Us(),n=$s(),i=of(),s=B2(),o=rf(),a=wo(),u=Ln()("iterator"),c=!([].keys&&"next"in[].keys()),f="@@iterator",h="keys",v="values",y=function(){return this};return Ay=function(m,_,x,S,P,T,E){s(x,_,S);var O=function(D){if(!c&&D in R)return R[D];switch(D){case h:return function(){return new x(this,D)};case v:return function(){return new x(this,D)}}return function(){return new x(this,D)}},N=_+" Iterator",d=P==v,C=!1,R=m.prototype,k=R[u]||R[f]||P&&R[P],B=k||O(P),z=P?d?O("entries"):B:void 0,U=_=="Array"&&R.entries||k,Y,oe,W;if(U&&(W=a(U.call(new m)),W!==Object.prototype&&W.next&&(o(W,N,!0),!e&&typeof W[u]!="function"&&n(W,u,y))),d&&k&&k.name!==v&&(C=!0,B=function(){return k.call(this)}),(!e||E)&&(c||C||!R[u])&&n(R,u,B),i[_]=B,i[N]=y,P)if(Y={values:d?B:O(v),keys:T?B:O(h),entries:z},E)for(oe in Y)oe in R||r(R,oe,Y[oe]);else t(t.P+t.F*(c||C),_,Y);return Y},Ay}var Qk;function Jie(){if(Qk)return Xk;Qk=1;var e=Lv()(!0);return z2()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,r=this._i,n;return r>=t.length?{value:void 0,done:!0}:(n=e(t,r),this._i+=n.length,{value:n,done:!1})}),Xk}var eM={},tM;function Zie(){if(tM)return eM;tM=1;var e=je(),t=Lv()(!1);return e(e.P,"String",{codePointAt:function(n){return t(this,n)}}),eM}var rM={},Ty,nM;function Nv(){if(nM)return Ty;nM=1;var e=cn(),t=Yo(),r=Ln()("match");return Ty=function(n){var i;return e(n)&&((i=n[r])!==void 0?!!i:t(n)=="RegExp")},Ty}var Py,iM;function V2(){if(iM)return Py;iM=1;var e=Nv(),t=Ca();return Py=function(r,n,i){if(e(n))throw TypeError("String#"+i+" doesn't accept regex!");return String(t(r))},Py}var Cy,sM;function G2(){if(sM)return Cy;sM=1;var e=Ln()("match");return Cy=function(t){var r=/./;try{"/./"[t](r)}catch{try{return r[e]=!1,!"/./"[t](r)}catch{}}return!0},Cy}var oM;function Qie(){if(oM)return rM;oM=1;var e=je(),t=Dn(),r=V2(),n="endsWith",i=""[n];return e(e.P+e.F*G2()(n),"String",{endsWith:function(o){var a=r(this,o,n),u=arguments.length>1?arguments[1]:void 0,c=t(a.length),f=u===void 0?c:Math.min(t(u),c),h=String(o);return i?i.call(a,h,f):a.slice(f-h.length,f)===h}}),rM}var aM={},uM;function ese(){if(uM)return aM;uM=1;var e=je(),t=V2(),r="includes";return e(e.P+e.F*G2()(r),"String",{includes:function(i){return!!~t(this,i,r).indexOf(i,arguments.length>1?arguments[1]:void 0)}}),aM}var cM={},lM;function tse(){if(lM)return cM;lM=1;var e=je();return e(e.P,"String",{repeat:q2()}),cM}var fM={},hM;function rse(){if(hM)return fM;hM=1;var e=je(),t=Dn(),r=V2(),n="startsWith",i=""[n];return e(e.P+e.F*G2()(n),"String",{startsWith:function(o){var a=r(this,o,n),u=t(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),c=String(o);return i?i.call(a,c,u):a.slice(u,u+c.length)===c}}),fM}var dM={},Oy,pM;function js(){if(pM)return Oy;pM=1;var e=je(),t=en(),r=Ca(),n=/"/g,i=function(s,o,a,u){var c=String(r(s)),f="<"+o;return a!==""&&(f+=" "+a+'="'+String(u).replace(n,"&quot;")+'"'),f+">"+c+"</"+o+">"};return Oy=function(s,o){var a={};a[s]=o(i),e(e.P+e.F*t(function(){var u=""[s]('"');return u!==u.toLowerCase()||u.split('"').length>3}),"String",a)},Oy}var vM;function nse(){return vM||(vM=1,js()("anchor",function(e){return function(r){return e(this,"a","name",r)}})),dM}var gM={},mM;function ise(){return mM||(mM=1,js()("big",function(e){return function(){return e(this,"big","","")}})),gM}var yM={},_M;function sse(){return _M||(_M=1,js()("blink",function(e){return function(){return e(this,"blink","","")}})),yM}var bM={},wM;function ose(){return wM||(wM=1,js()("bold",function(e){return function(){return e(this,"b","","")}})),bM}var xM={},SM;function ase(){return SM||(SM=1,js()("fixed",function(e){return function(){return e(this,"tt","","")}})),xM}var EM={},AM;function use(){return AM||(AM=1,js()("fontcolor",function(e){return function(r){return e(this,"font","color",r)}})),EM}var TM={},PM;function cse(){return PM||(PM=1,js()("fontsize",function(e){return function(r){return e(this,"font","size",r)}})),TM}var CM={},OM;function lse(){return OM||(OM=1,js()("italics",function(e){return function(){return e(this,"i","","")}})),CM}var IM={},RM;function fse(){return RM||(RM=1,js()("link",function(e){return function(r){return e(this,"a","href",r)}})),IM}var kM={},MM;function hse(){return MM||(MM=1,js()("small",function(e){return function(){return e(this,"small","","")}})),kM}var LM={},NM;function dse(){return NM||(NM=1,js()("strike",function(e){return function(){return e(this,"strike","","")}})),LM}var qM={},DM;function pse(){return DM||(DM=1,js()("sub",function(e){return function(){return e(this,"sub","","")}})),qM}var FM={},BM;function vse(){return BM||(BM=1,js()("sup",function(e){return function(){return e(this,"sup","","")}})),FM}var zM={},VM;function gse(){if(VM)return zM;VM=1;var e=je();return e(e.S,"Date",{now:function(){return new Date().getTime()}}),zM}var GM={},$M;function mse(){if($M)return GM;$M=1;var e=je(),t=fi(),r=Pa();return e(e.P+e.F*en()(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(i){var s=t(this),o=r(s);return typeof o=="number"&&!isFinite(o)?null:s.toISOString()}}),GM}var UM={},Iy,jM;function yse(){if(jM)return Iy;jM=1;var e=en(),t=Date.prototype.getTime,r=Date.prototype.toISOString,n=function(i){return i>9?i:"0"+i};return Iy=e(function(){return r.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!e(function(){r.call(new Date(NaN))})?function(){if(!isFinite(t.call(this)))throw RangeError("Invalid time value");var s=this,o=s.getUTCFullYear(),a=s.getUTCMilliseconds(),u=o<0?"-":o>9999?"+":"";return u+("00000"+Math.abs(o)).slice(u?-6:-4)+"-"+n(s.getUTCMonth()+1)+"-"+n(s.getUTCDate())+"T"+n(s.getUTCHours())+":"+n(s.getUTCMinutes())+":"+n(s.getUTCSeconds())+"."+(a>99?a:"0"+n(a))+"Z"}:r,Iy}var HM;function _se(){if(HM)return UM;HM=1;var e=je(),t=yse();return e(e.P+e.F*(Date.prototype.toISOString!==t),"Date",{toISOString:t}),UM}var WM={},XM;function bse(){if(XM)return WM;XM=1;var e=Date.prototype,t="Invalid Date",r="toString",n=e[r],i=e.getTime;return new Date(NaN)+""!=t&&Us()(e,r,function(){var o=i.call(this);return o===o?n.call(this):t}),WM}var YM={},Ry,KM;function wse(){if(KM)return Ry;KM=1;var e=xr(),t=Pa(),r="number";return Ry=function(n){if(n!=="string"&&n!==r&&n!=="default")throw TypeError("Incorrect hint");return t(e(this),n!=r)},Ry}var JM;function xse(){if(JM)return YM;JM=1;var e=Ln()("toPrimitive"),t=Date.prototype;return e in t||$s()(t,e,wse()),YM}var ZM={},QM;function Sse(){if(QM)return ZM;QM=1;var e=je();return e(e.S,"Array",{isArray:Mv()}),ZM}var eL={},ky,tL;function qV(){if(tL)return ky;tL=1;var e=xr();return ky=function(t,r,n,i){try{return i?r(e(n)[0],n[1]):r(n)}catch(o){var s=t.return;throw s!==void 0&&e(s.call(t)),o}},ky}var My,rL;function $2(){if(rL)return My;rL=1;var e=of(),t=Ln()("iterator"),r=Array.prototype;return My=function(n){return n!==void 0&&(e.Array===n||r[t]===n)},My}var Ly,nL;function U2(){if(nL)return Ly;nL=1;var e=si(),t=Rc();return Ly=function(r,n,i){n in r?e.f(r,n,t(0,i)):r[n]=i},Ly}var Ny,iL;function j2(){if(iL)return Ny;iL=1;var e=nf(),t=Ln()("iterator"),r=of();return Ny=Wo().getIteratorMethod=function(n){if(n!=null)return n[t]||n["@@iterator"]||r[e(n)]},Ny}var qy,sL;function qv(){if(sL)return qy;sL=1;var e=Ln()("iterator"),t=!1;try{var r=[7][e]();r.return=function(){t=!0},Array.from(r,function(){throw 2})}catch{}return qy=function(n,i){if(!i&&!t)return!1;var s=!1;try{var o=[7],a=o[e]();a.next=function(){return{done:s=!0}},o[e]=function(){return a},n(o)}catch{}return s},qy}var oL;function Ese(){if(oL)return eL;oL=1;var e=Xo(),t=je(),r=fi(),n=qV(),i=$2(),s=Dn(),o=U2(),a=j2();return t(t.S+t.F*!qv()(function(u){Array.from(u)}),"Array",{from:function(c){var f=r(c),h=typeof this=="function"?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=y!==void 0,_=0,x=a(f),S,P,T,E;if(m&&(y=e(y,v>2?arguments[2]:void 0,2)),x!=null&&!(h==Array&&i(x)))for(E=x.call(f),P=new h;!(T=E.next()).done;_++)o(P,_,m?n(E,y,[T.value,_],!0):T.value);else for(S=s(f.length),P=new h(S);S>_;_++)o(P,_,m?y(f[_],_):f[_]);return P.length=_,P}}),eL}var aL={},uL;function Ase(){if(uL)return aL;uL=1;var e=je(),t=U2();return e(e.S+e.F*en()(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var n=0,i=arguments.length,s=new(typeof this=="function"?this:Array)(i);i>n;)t(s,n,arguments[n++]);return s.length=i,s}}),aL}var cL={},Dy,lL;function Jo(){if(lL)return Dy;lL=1;var e=en();return Dy=function(t,r){return!!t&&e(function(){r?t.call(null,function(){},1):t.call(null)})},Dy}var fL;function Tse(){if(fL)return cL;fL=1;var e=je(),t=_o(),r=[].join;return e(e.P+e.F*(jh()!=Object||!Jo()(r)),"Array",{join:function(i){return r.call(t(this),i===void 0?",":i)}}),cL}var hL={},dL;function Pse(){if(dL)return hL;dL=1;var e=je(),t=k2(),r=Yo(),n=Mc(),i=Dn(),s=[].slice;return e(e.P+e.F*en()(function(){t&&s.call(t)}),"Array",{slice:function(a,u){var c=i(this.length),f=r(this);if(u=u===void 0?c:u,f=="Array")return s.call(this,a,u);for(var h=n(a,c),v=n(u,c),y=i(v-h),m=new Array(y),_=0;_<y;_++)m[_]=f=="String"?this.charAt(h+_):this[h+_];return m}}),hL}var pL={},vL;function Cse(){if(vL)return pL;vL=1;var e=je(),t=os(),r=fi(),n=en(),i=[].sort,s=[1,2,3];return e(e.P+e.F*(n(function(){s.sort(void 0)})||!n(function(){s.sort(null)})||!Jo()(i)),"Array",{sort:function(a){return a===void 0?i.call(r(this)):i.call(r(this),t(a))}}),pL}var gL={},Fy,mL;function Ose(){if(mL)return Fy;mL=1;var e=cn(),t=Mv(),r=Ln()("species");return Fy=function(n){var i;return t(n)&&(i=n.constructor,typeof i=="function"&&(i===Array||t(i.prototype))&&(i=void 0),e(i)&&(i=i[r],i===null&&(i=void 0))),i===void 0?Array:i},Fy}var By,yL;function H2(){if(yL)return By;yL=1;var e=Ose();return By=function(t,r){return new(e(t))(r)},By}var zy,_L;function Ia(){if(_L)return zy;_L=1;var e=Xo(),t=jh(),r=fi(),n=Dn(),i=H2();return zy=function(s,o){var a=s==1,u=s==2,c=s==3,f=s==4,h=s==6,v=s==5||h,y=o||i;return function(m,_,x){for(var S=r(m),P=t(S),T=e(_,x,3),E=n(P.length),O=0,N=a?y(m,E):u?y(m,0):void 0,d,C;E>O;O++)if((v||O in P)&&(d=P[O],C=T(d,O,S),s)){if(a)N[O]=C;else if(C)switch(s){case 3:return!0;case 5:return d;case 6:return O;case 2:N.push(d)}else if(f)return!1}return h?-1:c||f?f:N}},zy}var bL;function Ise(){if(bL)return gL;bL=1;var e=je(),t=Ia()(0),r=Jo()([].forEach,!0);return e(e.P+e.F*!r,"Array",{forEach:function(i){return t(this,i,arguments[1])}}),gL}var wL={},xL;function Rse(){if(xL)return wL;xL=1;var e=je(),t=Ia()(1);return e(e.P+e.F*!Jo()([].map,!0),"Array",{map:function(n){return t(this,n,arguments[1])}}),wL}var SL={},EL;function kse(){if(EL)return SL;EL=1;var e=je(),t=Ia()(2);return e(e.P+e.F*!Jo()([].filter,!0),"Array",{filter:function(n){return t(this,n,arguments[1])}}),SL}var AL={},TL;function Mse(){if(TL)return AL;TL=1;var e=je(),t=Ia()(3);return e(e.P+e.F*!Jo()([].some,!0),"Array",{some:function(n){return t(this,n,arguments[1])}}),AL}var PL={},CL;function Lse(){if(CL)return PL;CL=1;var e=je(),t=Ia()(4);return e(e.P+e.F*!Jo()([].every,!0),"Array",{every:function(n){return t(this,n,arguments[1])}}),PL}var OL={},Vy,IL;function DV(){if(IL)return Vy;IL=1;var e=os(),t=fi(),r=jh(),n=Dn();return Vy=function(i,s,o,a,u){e(s);var c=t(i),f=r(c),h=n(c.length),v=u?h-1:0,y=u?-1:1;if(o<2)for(;;){if(v in f){a=f[v],v+=y;break}if(v+=y,u?v<0:h<=v)throw TypeError("Reduce of empty array with no initial value")}for(;u?v>=0:h>v;v+=y)v in f&&(a=s(a,f[v],v,c));return a},Vy}var RL;function Nse(){if(RL)return OL;RL=1;var e=je(),t=DV();return e(e.P+e.F*!Jo()([].reduce,!0),"Array",{reduce:function(n){return t(this,n,arguments.length,arguments[1],!1)}}),OL}var kL={},ML;function qse(){if(ML)return kL;ML=1;var e=je(),t=DV();return e(e.P+e.F*!Jo()([].reduceRight,!0),"Array",{reduceRight:function(n){return t(this,n,arguments.length,arguments[1],!0)}}),kL}var LL={},NL;function Dse(){if(NL)return LL;NL=1;var e=je(),t=Rv()(!1),r=[].indexOf,n=!!r&&1/[1].indexOf(1,-0)<0;return e(e.P+e.F*(n||!Jo()(r)),"Array",{indexOf:function(s){return n?r.apply(this,arguments)||0:t(this,s,arguments[1])}}),LL}var qL={},DL;function Fse(){if(DL)return qL;DL=1;var e=je(),t=_o(),r=Ko(),n=Dn(),i=[].lastIndexOf,s=!!i&&1/[1].lastIndexOf(1,-0)<0;return e(e.P+e.F*(s||!Jo()(i)),"Array",{lastIndexOf:function(a){if(s)return i.apply(this,arguments)||0;var u=t(this),c=n(u.length),f=c-1;for(arguments.length>1&&(f=Math.min(f,r(arguments[1]))),f<0&&(f=c+f);f>=0;f--)if(f in u&&u[f]===a)return f||0;return-1}}),qL}var FL={},Gy,BL;function FV(){if(BL)return Gy;BL=1;var e=fi(),t=Mc(),r=Dn();return Gy=[].copyWithin||function(i,s){var o=e(this),a=r(o.length),u=t(i,a),c=t(s,a),f=arguments.length>2?arguments[2]:void 0,h=Math.min((f===void 0?a:t(f,a))-c,a-u),v=1;for(c<u&&u<c+h&&(v=-1,c+=h-1,u+=h-1);h-- >0;)c in o?o[u]=o[c]:delete o[u],u+=v,c+=v;return o},Gy}var $y,zL;function Hu(){if(zL)return $y;zL=1;var e=Ln()("unscopables"),t=Array.prototype;return t[e]==null&&$s()(t,e,{}),$y=function(r){t[e][r]=!0},$y}var VL;function Bse(){if(VL)return FL;VL=1;var e=je();return e(e.P,"Array",{copyWithin:FV()}),Hu()("copyWithin"),FL}var GL={},Uy,$L;function W2(){if($L)return Uy;$L=1;var e=fi(),t=Mc(),r=Dn();return Uy=function(i){for(var s=e(this),o=r(s.length),a=arguments.length,u=t(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,f=c===void 0?o:t(c,o);f>u;)s[u++]=i;return s},Uy}var UL;function zse(){if(UL)return GL;UL=1;var e=je();return e(e.P,"Array",{fill:W2()}),Hu()("fill"),GL}var jL={},HL;function Vse(){if(HL)return jL;HL=1;var e=je(),t=Ia()(5),r="find",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{find:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Hu()(r),jL}var WL={},XL;function Gse(){if(XL)return WL;XL=1;var e=je(),t=Ia()(6),r="findIndex",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{findIndex:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Hu()(r),WL}var YL={},jy,KL;function Dc(){if(KL)return jy;KL=1;var e=Wr(),t=si(),r=$n(),n=Ln()("species");return jy=function(i){var s=e[i];r&&s&&!s[n]&&t.f(s,n,{configurable:!0,get:function(){return this}})},jy}var JL;function $se(){return JL||(JL=1,Dc()("Array")),YL}var Hy,ZL;function BV(){return ZL||(ZL=1,Hy=function(e,t){return{value:t,done:!!e}}),Hy}var Wy,QL;function X2(){if(QL)return Wy;QL=1;var e=Hu(),t=BV(),r=of(),n=_o();return Wy=z2()(Array,"Array",function(i,s){this._t=n(i),this._i=0,this._k=s},function(){var i=this._t,s=this._k,o=this._i++;return!i||o>=i.length?(this._t=void 0,t(1)):s=="keys"?t(0,o):s=="values"?t(0,i[o]):t(0,[o,i[o]])},"values"),r.Arguments=r.Array,e("keys"),e("values"),e("entries"),Wy}var eN={},Xy,tN;function Wh(){if(tN)return Xy;tN=1;var e=xr();return Xy=function(){var t=e(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},Xy}var rN;function Use(){if(rN)return eN;rN=1;var e=Wr(),t=N2(),r=si().f,n=qc().f,i=Nv(),s=Wh(),o=e.RegExp,a=o,u=o.prototype,c=/a/g,f=/a/g,h=new o(c)!==c;if($n()&&(!h||en()(function(){return f[Ln()("match")]=!1,o(c)!=c||o(f)==f||o(c,"i")!="/a/i"}))){o=function(x,S){var P=this instanceof o,T=i(x),E=S===void 0;return!P&&T&&x.constructor===o&&E?x:t(h?new a(T&&!E?x.source:x,S):a((T=x instanceof o)?x.source:x,T&&E?s.call(x):S),P?this:u,o)};for(var v=function(_){_ in o||r(o,_,{configurable:!0,get:function(){return a[_]},set:function(x){a[_]=x}})},y=n(a),m=0;y.length>m;)v(y[m++]);u.constructor=o,o.prototype=u,Us()(e,"RegExp",o)}return Dc()("RegExp"),eN}var nN={},Yy,iN;function Y2(){if(iN)return Yy;iN=1;var e=Wh(),t=RegExp.prototype.exec,r=String.prototype.replace,n=t,i="lastIndex",s=function(){var u=/a/,c=/b*/g;return t.call(u,"a"),t.call(c,"a"),u[i]!==0||c[i]!==0}(),o=/()??/.exec("")[1]!==void 0,a=s||o;return a&&(n=function(c){var f=this,h,v,y,m;return o&&(v=new RegExp("^"+f.source+"$(?!\\s)",e.call(f))),s&&(h=f[i]),y=t.call(f,c),s&&y&&(f[i]=f.global?y.index+y[0].length:h),o&&y&&y.length>1&&r.call(y[0],v,function(){for(m=1;m<arguments.length-2;m++)arguments[m]===void 0&&(y[m]=void 0)}),y}),Yy=n,Yy}var sN;function zV(){if(sN)return nN;sN=1;var e=Y2();return je()({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e}),nN}var oN={},aN={},uN;function VV(){return uN||(uN=1,$n()&&/./g.flags!="g"&&si().f(RegExp.prototype,"flags",{configurable:!0,get:Wh()})),aN}var cN;function jse(){if(cN)return oN;cN=1,VV();var e=xr(),t=Wh(),r=$n(),n="toString",i=/./[n],s=function(o){Us()(RegExp.prototype,n,o,!0)};return en()(function(){return i.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var a=e(this);return"/".concat(a.source,"/","flags"in a?a.flags:!r&&a instanceof RegExp?t.call(a):void 0)}):i.name!=n&&s(function(){return i.call(this)}),oN}var lN={},Ky,fN;function K2(){if(fN)return Ky;fN=1;var e=Lv()(!0);return Ky=function(t,r,n){return r+(n?e(t,r).length:1)},Ky}var Jy,hN;function Dv(){if(hN)return Jy;hN=1;var e=nf(),t=RegExp.prototype.exec;return Jy=function(r,n){var i=r.exec;if(typeof i=="function"){var s=i.call(r,n);if(typeof s!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if(e(r)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return t.call(r,n)},Jy}var Zy,dN;function Fv(){if(dN)return Zy;dN=1,zV();var e=Us(),t=$s(),r=en(),n=Ca(),i=Ln(),s=Y2(),o=i("species"),a=!r(function(){var c=/./;return c.exec=function(){var f=[];return f.groups={a:"7"},f},"".replace(c,"$<a>")!=="7"}),u=function(){var c=/(?:)/,f=c.exec;c.exec=function(){return f.apply(this,arguments)};var h="ab".split(c);return h.length===2&&h[0]==="a"&&h[1]==="b"}();return Zy=function(c,f,h){var v=i(c),y=!r(function(){var T={};return T[v]=function(){return 7},""[c](T)!=7}),m=y?!r(function(){var T=!1,E=/a/;return E.exec=function(){return T=!0,null},c==="split"&&(E.constructor={},E.constructor[o]=function(){return E}),E[v](""),!T}):void 0;if(!y||!m||c==="replace"&&!a||c==="split"&&!u){var _=/./[v],x=h(n,v,""[c],function(E,O,N,d,C){return O.exec===s?y&&!C?{done:!0,value:_.call(O,N,d)}:{done:!0,value:E.call(N,O,d)}:{done:!1}}),S=x[0],P=x[1];e(String.prototype,c,S),t(RegExp.prototype,v,f==2?function(T,E){return P.call(T,this,E)}:function(T){return P.call(T,this)})}},Zy}var pN;function Hse(){if(pN)return lN;pN=1;var e=xr(),t=Dn(),r=K2(),n=Dv();return Fv()("match",1,function(i,s,o,a){return[function(c){var f=i(this),h=c==null?void 0:c[s];return h!==void 0?h.call(c,f):new RegExp(c)[s](String(f))},function(u){var c=a(o,u,this);if(c.done)return c.value;var f=e(u),h=String(this);if(!f.global)return n(f,h);var v=f.unicode;f.lastIndex=0;for(var y=[],m=0,_;(_=n(f,h))!==null;){var x=String(_[0]);y[m]=x,x===""&&(f.lastIndex=r(h,t(f.lastIndex),v)),m++}return m===0?null:y}]}),lN}var vN={},gN;function Wse(){if(gN)return vN;gN=1;var e=xr(),t=fi(),r=Dn(),n=Ko(),i=K2(),s=Dv(),o=Math.max,a=Math.min,u=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(v){return v===void 0?v:String(v)};return Fv()("replace",2,function(v,y,m,_){return[function(P,T){var E=v(this),O=P==null?void 0:P[y];return O!==void 0?O.call(P,E,T):m.call(String(E),P,T)},function(S,P){var T=_(m,S,this,P);if(T.done)return T.value;var E=e(S),O=String(this),N=typeof P=="function";N||(P=String(P));var d=E.global;if(d){var C=E.unicode;E.lastIndex=0}for(var R=[];;){var k=s(E,O);if(k===null||(R.push(k),!d))break;var B=String(k[0]);B===""&&(E.lastIndex=i(O,r(E.lastIndex),C))}for(var z="",U=0,Y=0;Y<R.length;Y++){k=R[Y];for(var oe=String(k[0]),W=o(a(n(k.index),O.length),0),D=[],F=1;F<k.length;F++)D.push(h(k[F]));var H=k.groups;if(N){var ie=[oe].concat(D,W,O);H!==void 0&&ie.push(H);var se=String(P.apply(void 0,ie))}else se=x(oe,O,W,D,H,P);W>=U&&(z+=O.slice(U,W)+se,U=W+oe.length)}return z+O.slice(U)}];function x(S,P,T,E,O,N){var d=T+S.length,C=E.length,R=f;return O!==void 0&&(O=t(O),R=c),m.call(N,R,function(k,B){var z;switch(B.charAt(0)){case"$":return"$";case"&":return S;case"`":return P.slice(0,T);case"'":return P.slice(d);case"<":z=O[B.slice(1,-1)];break;default:var U=+B;if(U===0)return k;if(U>C){var Y=u(U/10);return Y===0?k:Y<=C?E[Y-1]===void 0?B.charAt(1):E[Y-1]+B.charAt(1):k}z=E[U-1]}return z===void 0?"":z})}}),vN}var mN={},yN;function Xse(){if(yN)return mN;yN=1;var e=xr(),t=PV(),r=Dv();return Fv()("search",1,function(n,i,s,o){return[function(u){var c=n(this),f=u==null?void 0:u[i];return f!==void 0?f.call(u,c):new RegExp(u)[i](String(c))},function(a){var u=o(s,a,this);if(u.done)return u.value;var c=e(a),f=String(this),h=c.lastIndex;t(h,0)||(c.lastIndex=0);var v=r(c,f);return t(c.lastIndex,h)||(c.lastIndex=h),v===null?-1:v.index}]}),mN}var _N={},Qy,bN;function Xh(){if(bN)return Qy;bN=1;var e=xr(),t=os(),r=Ln()("species");return Qy=function(n,i){var s=e(n).constructor,o;return s===void 0||(o=e(s)[r])==null?i:t(o)},Qy}var wN;function Yse(){if(wN)return _N;wN=1;var e=Nv(),t=xr(),r=Xh(),n=K2(),i=Dn(),s=Dv(),o=Y2(),a=en(),u=Math.min,c=[].push,f="split",h="length",v="lastIndex",y=4294967295,m=!a(function(){});return Fv()("split",2,function(_,x,S,P){var T;return"abbc"[f](/(b)*/)[1]=="c"||"test"[f](/(?:)/,-1)[h]!=4||"ab"[f](/(?:ab)*/)[h]!=2||"."[f](/(.?)(.?)/)[h]!=4||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?T=function(E,O){var N=String(this);if(E===void 0&&O===0)return[];if(!e(E))return S.call(N,E,O);for(var d=[],C=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),R=0,k=O===void 0?y:O>>>0,B=new RegExp(E.source,C+"g"),z,U,Y;(z=o.call(B,N))&&(U=B[v],!(U>R&&(d.push(N.slice(R,z.index)),z[h]>1&&z.index<N[h]&&c.apply(d,z.slice(1)),Y=z[0][h],R=U,d[h]>=k)));)B[v]===z.index&&B[v]++;return R===N[h]?(Y||!B.test(""))&&d.push(""):d.push(N.slice(R)),d[h]>k?d.slice(0,k):d}:"0"[f](void 0,0)[h]?T=function(E,O){return E===void 0&&O===0?[]:S.call(this,E,O)}:T=S,[function(O,N){var d=_(this),C=O==null?void 0:O[x];return C!==void 0?C.call(O,d,N):T.call(String(d),O,N)},function(E,O){var N=P(T,E,this,O,T!==S);if(N.done)return N.value;var d=t(E),C=String(this),R=r(d,RegExp),k=d.unicode,B=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),z=new R(m?d:"^(?:"+d.source+")",B),U=O===void 0?y:O>>>0;if(U===0)return[];if(C.length===0)return s(z,C)===null?[C]:[];for(var Y=0,oe=0,W=[];oe<C.length;){z.lastIndex=m?oe:0;var D=s(z,m?C:C.slice(oe)),F;if(D===null||(F=u(i(z.lastIndex+(m?0:oe)),C.length))===Y)oe=n(C,oe,k);else{if(W.push(C.slice(Y,oe)),W.length===U)return W;for(var H=1;H<=D.length-1;H++)if(W.push(D[H]),W.length===U)return W;oe=Y=F}}return W.push(C.slice(Y)),W}]}),_N}var xN={},e_,SN;function Fc(){return SN||(SN=1,e_=function(e,t,r,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(r+": incorrect invocation!");return e}),e_}var t_={exports:{}},EN;function Bc(){if(EN)return t_.exports;EN=1;var e=Xo(),t=qV(),r=$2(),n=xr(),i=Dn(),s=j2(),o={},a={},u=t_.exports=function(c,f,h,v,y){var m=y?function(){return c}:s(c),_=e(h,v,f?2:1),x=0,S,P,T,E;if(typeof m!="function")throw TypeError(c+" is not iterable!");if(r(m)){for(S=i(c.length);S>x;x++)if(E=f?_(n(P=c[x])[0],P[1]):_(c[x]),E===o||E===a)return E}else for(T=m.call(c);!(P=T.next()).done;)if(E=t(T,_,P.value,f),E===o||E===a)return E};return u.BREAK=o,u.RETURN=a,t_.exports}var r_,AN;function J2(){if(AN)return r_;AN=1;var e=Xo(),t=CV(),r=k2(),n=C2(),i=Wr(),s=i.process,o=i.setImmediate,a=i.clearImmediate,u=i.MessageChannel,c=i.Dispatch,f=0,h={},v="onreadystatechange",y,m,_,x=function(){var P=+this;if(h.hasOwnProperty(P)){var T=h[P];delete h[P],T()}},S=function(P){x.call(P.data)};return(!o||!a)&&(o=function(T){for(var E=[],O=1;arguments.length>O;)E.push(arguments[O++]);return h[++f]=function(){t(typeof T=="function"?T:Function(T),E)},y(f),f},a=function(T){delete h[T]},Yo()(s)=="process"?y=function(P){s.nextTick(e(x,P,1))}:c&&c.now?y=function(P){c.now(e(x,P,1))}:u?(m=new u,_=m.port2,m.port1.onmessage=S,y=e(_.postMessage,_,1)):i.addEventListener&&typeof postMessage=="function"&&!i.importScripts?(y=function(P){i.postMessage(P+"","*")},i.addEventListener("message",S,!1)):v in n("script")?y=function(P){r.appendChild(n("script"))[v]=function(){r.removeChild(this),x.call(P)}}:y=function(P){setTimeout(e(x,P,1),0)}),r_={set:o,clear:a},r_}var n_,TN;function Z2(){if(TN)return n_;TN=1;var e=Wr(),t=J2().set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,i=e.Promise,s=Yo()(n)=="process";return n_=function(){var o,a,u,c=function(){var y,m;for(s&&(y=n.domain)&&y.exit();o;){m=o.fn,o=o.next;try{m()}catch(_){throw o?u():a=void 0,_}}a=void 0,y&&y.enter()};if(s)u=function(){n.nextTick(c)};else if(r&&!(e.navigator&&e.navigator.standalone)){var f=!0,h=document.createTextNode("");new r(c).observe(h,{characterData:!0}),u=function(){h.data=f=!f}}else if(i&&i.resolve){var v=i.resolve(void 0);u=function(){v.then(c)}}else u=function(){t.call(e,c)};return function(y){var m={fn:y,next:void 0};a&&(a.next=m),o||(o=m,u()),a=m}},n_}var i_={},PN;function Q2(){if(PN)return i_;PN=1;var e=os();function t(r){var n,i;this.promise=new r(function(s,o){if(n!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");n=s,i=o}),this.resolve=e(n),this.reject=e(i)}return i_.f=function(r){return new t(r)},i_}var s_,CN;function GV(){return CN||(CN=1,s_=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}),s_}var o_,ON;function Bv(){if(ON)return o_;ON=1;var e=Wr(),t=e.navigator;return o_=t&&t.userAgent||"",o_}var a_,IN;function $V(){if(IN)return a_;IN=1;var e=xr(),t=cn(),r=Q2();return a_=function(n,i){if(e(n),t(i)&&i.constructor===n)return i;var s=r.f(n),o=s.resolve;return o(i),s.promise},a_}var u_,RN;function zc(){if(RN)return u_;RN=1;var e=Us();return u_=function(t,r,n){for(var i in r)e(t,i,r[i],n);return t},u_}var kN;function Kse(){if(kN)return xN;kN=1;var e=Uu(),t=Wr(),r=Xo(),n=nf(),i=je(),s=cn(),o=os(),a=Fc(),u=Bc(),c=Xh(),f=J2().set,h=Z2()(),v=Q2(),y=GV(),m=Bv(),_=$V(),x="Promise",S=t.TypeError,P=t.process,T=P&&P.versions,E=T&&T.v8||"",O=t[x],N=n(P)=="process",d=function(){},C,R,k,B,z=R=v.f,U=!!function(){try{var se=O.resolve(1),we=(se.constructor={})[Ln()("species")]=function(ge){ge(d,d)};return(N||typeof PromiseRejectionEvent=="function")&&se.then(d)instanceof we&&E.indexOf("6.6")!==0&&m.indexOf("Chrome/66")===-1}catch{}}(),Y=function(se){var we;return s(se)&&typeof(we=se.then)=="function"?we:!1},oe=function(se,we){if(!se._n){se._n=!0;var ge=se._c;h(function(){for(var te=se._v,ue=se._s==1,re=0,Q=function(le){var Ge=ue?le.ok:le.fail,Ne=le.resolve,Oe=le.reject,Ze=le.domain,$e,q,G;try{Ge?(ue||(se._h==2&&F(se),se._h=1),Ge===!0?$e=te:(Ze&&Ze.enter(),$e=Ge(te),Ze&&(Ze.exit(),G=!0)),$e===le.promise?Oe(S("Promise-chain cycle")):(q=Y($e))?q.call($e,Ne,Oe):Ne($e)):Oe(te)}catch(K){Ze&&!G&&Ze.exit(),Oe(K)}};ge.length>re;)Q(ge[re++]);se._c=[],se._n=!1,we&&!se._h&&W(se)})}},W=function(se){f.call(t,function(){var we=se._v,ge=D(se),te,ue,re;if(ge&&(te=y(function(){N?P.emit("unhandledRejection",we,se):(ue=t.onunhandledrejection)?ue({promise:se,reason:we}):(re=t.console)&&re.error&&re.error("Unhandled promise rejection",we)}),se._h=N||D(se)?2:1),se._a=void 0,ge&&te.e)throw te.v})},D=function(se){return se._h!==1&&(se._a||se._c).length===0},F=function(se){f.call(t,function(){var we;N?P.emit("rejectionHandled",se):(we=t.onrejectionhandled)&&we({promise:se,reason:se._v})})},H=function(se){var we=this;we._d||(we._d=!0,we=we._w||we,we._v=se,we._s=2,we._a||(we._a=we._c.slice()),oe(we,!0))},ie=function(se){var we=this,ge;if(!we._d){we._d=!0,we=we._w||we;try{if(we===se)throw S("Promise can't be resolved itself");(ge=Y(se))?h(function(){var te={_w:we,_d:!1};try{ge.call(se,r(ie,te,1),r(H,te,1))}catch(ue){H.call(te,ue)}}):(we._v=se,we._s=1,oe(we,!1))}catch(te){H.call({_w:we,_d:!1},te)}}};return U||(O=function(we){a(this,O,x,"_h"),o(we),C.call(this);try{we(r(ie,this,1),r(H,this,1))}catch(ge){H.call(this,ge)}},C=function(we){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},C.prototype=zc()(O.prototype,{then:function(we,ge){var te=z(c(this,O));return te.ok=typeof we=="function"?we:!0,te.fail=typeof ge=="function"&&ge,te.domain=N?P.domain:void 0,this._c.push(te),this._a&&this._a.push(te),this._s&&oe(this,!1),te.promise},catch:function(se){return this.then(void 0,se)}}),k=function(){var se=new C;this.promise=se,this.resolve=r(ie,se,1),this.reject=r(H,se,1)},v.f=z=function(se){return se===O||se===B?new k(se):R(se)}),i(i.G+i.W+i.F*!U,{Promise:O}),rf()(O,x),Dc()(x),B=Wo()[x],i(i.S+i.F*!U,x,{reject:function(we){var ge=z(this),te=ge.reject;return te(we),ge.promise}}),i(i.S+i.F*(e||!U),x,{resolve:function(we){return _(e&&this===B?O:this,we)}}),i(i.S+i.F*!(U&&qv()(function(se){O.all(se).catch(d)})),x,{all:function(we){var ge=this,te=z(ge),ue=te.resolve,re=te.reject,Q=y(function(){var le=[],Ge=0,Ne=1;u(we,!1,function(Oe){var Ze=Ge++,$e=!1;le.push(void 0),Ne++,ge.resolve(Oe).then(function(q){$e||($e=!0,le[Ze]=q,--Ne||ue(le))},re)}),--Ne||ue(le)});return Q.e&&re(Q.v),te.promise},race:function(we){var ge=this,te=z(ge),ue=te.reject,re=y(function(){u(we,!1,function(Q){ge.resolve(Q).then(te.resolve,ue)})});return re.e&&ue(re.v),te.promise}}),xN}var c_,MN;function Ec(){if(MN)return c_;MN=1;var e=cn();return c_=function(t,r){if(!e(t)||t._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return t},c_}var l_,LN;function UV(){if(LN)return l_;LN=1;var e=si().f,t=Nc(),r=zc(),n=Xo(),i=Fc(),s=Bc(),o=z2(),a=BV(),u=Dc(),c=$n(),f=ju().fastKey,h=Ec(),v=c?"_s":"size",y=function(m,_){var x=f(_),S;if(x!=="F")return m._i[x];for(S=m._f;S;S=S.n)if(S.k==_)return S};return l_={getConstructor:function(m,_,x,S){var P=m(function(T,E){i(T,P,_,"_i"),T._t=_,T._i=t(null),T._f=void 0,T._l=void 0,T[v]=0,E!=null&&s(E,x,T[S],T)});return r(P.prototype,{clear:function(){for(var E=h(this,_),O=E._i,N=E._f;N;N=N.n)N.r=!0,N.p&&(N.p=N.p.n=void 0),delete O[N.i];E._f=E._l=void 0,E[v]=0},delete:function(T){var E=h(this,_),O=y(E,T);if(O){var N=O.n,d=O.p;delete E._i[O.i],O.r=!0,d&&(d.n=N),N&&(N.p=d),E._f==O&&(E._f=N),E._l==O&&(E._l=d),E[v]--}return!!O},forEach:function(E){h(this,_);for(var O=n(E,arguments.length>1?arguments[1]:void 0,3),N;N=N?N.n:this._f;)for(O(N.v,N.k,this);N&&N.r;)N=N.p},has:function(E){return!!y(h(this,_),E)}}),c&&e(P.prototype,"size",{get:function(){return h(this,_)[v]}}),P},def:function(m,_,x){var S=y(m,_),P,T;return S?S.v=x:(m._l=S={i:T=f(_,!0),k:_,v:x,p:P=m._l,n:void 0,r:!1},m._f||(m._f=S),P&&(P.n=S),m[v]++,T!=="F"&&(m._i[T]=S)),m},getEntry:y,setStrong:function(m,_,x){o(m,_,function(S,P){this._t=h(S,_),this._k=P,this._l=void 0},function(){for(var S=this,P=S._k,T=S._l;T&&T.r;)T=T.p;return!S._t||!(S._l=T=T?T.n:S._t._f)?(S._t=void 0,a(1)):P=="keys"?a(0,T.k):P=="values"?a(0,T.v):a(0,[T.k,T.v])},x?"entries":"values",!x,!0),u(_)}},l_}var f_,NN;function zv(){if(NN)return f_;NN=1;var e=Wr(),t=je(),r=Us(),n=zc(),i=ju(),s=Bc(),o=Fc(),a=cn(),u=en(),c=qv(),f=rf(),h=N2();return f_=function(v,y,m,_,x,S){var P=e[v],T=P,E=x?"set":"add",O=T&&T.prototype,N={},d=function(U){var Y=O[U];r(O,U,U=="delete"?function(oe){return S&&!a(oe)?!1:Y.call(this,oe===0?0:oe)}:U=="has"?function(W){return S&&!a(W)?!1:Y.call(this,W===0?0:W)}:U=="get"?function(W){return S&&!a(W)?void 0:Y.call(this,W===0?0:W)}:U=="add"?function(W){return Y.call(this,W===0?0:W),this}:function(W,D){return Y.call(this,W===0?0:W,D),this})};if(typeof T!="function"||!(S||O.forEach&&!u(function(){new T().entries().next()})))T=_.getConstructor(y,v,x,E),n(T.prototype,m),i.NEED=!0;else{var C=new T,R=C[E](S?{}:-0,1)!=C,k=u(function(){C.has(1)}),B=c(function(U){new T(U)}),z=!S&&u(function(){for(var U=new T,Y=5;Y--;)U[E](Y,Y);return!U.has(-0)});B||(T=y(function(U,Y){o(U,T,v);var oe=h(new P,U,T);return Y!=null&&s(Y,x,oe[E],oe),oe}),T.prototype=O,O.constructor=T),(k||z)&&(d("delete"),d("has"),x&&d("get")),(z||R)&&d(E),S&&O.clear&&delete O.clear}return f(T,v),N[v]=T,t(t.G+t.W+t.F*(T!=P),N),S||_.setStrong(T,v,x),T},f_}var h_,qN;function jV(){if(qN)return h_;qN=1;var e=UV(),t=Ec(),r="Map";return h_=zv()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{get:function(i){var s=e.getEntry(t(this,r),i);return s&&s.v},set:function(i,s){return e.def(t(this,r),i===0?0:i,s)}},e,!0),h_}var d_,DN;function HV(){if(DN)return d_;DN=1;var e=UV(),t=Ec(),r="Set";return d_=zv()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=i===0?0:i,i)}},e),d_}var p_={exports:{}},v_,FN;function WV(){if(FN)return v_;FN=1;var e=zc(),t=ju().getWeak,r=xr(),n=cn(),i=Fc(),s=Bc(),o=Ia(),a=yo(),u=Ec(),c=o(5),f=o(6),h=0,v=function(_){return _._l||(_._l=new y)},y=function(){this.a=[]},m=function(_,x){return c(_.a,function(S){return S[0]===x})};return y.prototype={get:function(_){var x=m(this,_);if(x)return x[1]},has:function(_){return!!m(this,_)},set:function(_,x){var S=m(this,_);S?S[1]=x:this.a.push([_,x])},delete:function(_){var x=f(this.a,function(S){return S[0]===_});return~x&&this.a.splice(x,1),!!~x}},v_={getConstructor:function(_,x,S,P){var T=_(function(E,O){i(E,T,x,"_i"),E._t=x,E._i=h++,E._l=void 0,O!=null&&s(O,S,E[P],E)});return e(T.prototype,{delete:function(E){if(!n(E))return!1;var O=t(E);return O===!0?v(u(this,x)).delete(E):O&&a(O,this._i)&&delete O[this._i]},has:function(O){if(!n(O))return!1;var N=t(O);return N===!0?v(u(this,x)).has(O):N&&a(N,this._i)}}),T},def:function(_,x,S){var P=t(r(x),!0);return P===!0?v(_).set(x,S):P[_._i]=S,_},ufstore:v},v_}var BN;function XV(){if(BN)return p_.exports;BN=1;var e=Wr(),t=Ia()(0),r=Us(),n=ju(),i=TV(),s=WV(),o=cn(),a=Ec(),u=Ec(),c=!e.ActiveXObject&&"ActiveXObject"in e,f="WeakMap",h=n.getWeak,v=Object.isExtensible,y=s.ufstore,m,_=function(P){return function(){return P(this,arguments.length>0?arguments[0]:void 0)}},x={get:function(T){if(o(T)){var E=h(T);return E===!0?y(a(this,f)).get(T):E?E[this._i]:void 0}},set:function(T,E){return s.def(a(this,f),T,E)}},S=p_.exports=zv()(f,_,x,s,!0,!0);return u&&c&&(m=s.getConstructor(_,f),i(m.prototype,x),n.NEED=!0,t(["delete","has","get","set"],function(P){var T=S.prototype,E=T[P];r(T,P,function(O,N){if(o(O)&&!v(O)){this._f||(this._f=new m);var d=this._f[P](O,N);return P=="set"?this:d}return E.call(this,O,N)})})),p_.exports}var zN={},VN;function Jse(){if(VN)return zN;VN=1;var e=WV(),t=Ec(),r="WeakSet";return zv()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i,!0)}},e,!1,!0),zN}var GN={},g_,$N;function Vv(){if($N)return g_;$N=1;for(var e=Wr(),t=$s(),r=kc(),n=r("typed_array"),i=r("view"),s=!!(e.ArrayBuffer&&e.DataView),o=s,a=0,u=9,c,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");a<u;)(c=e[f[a++]])?(t(c.prototype,n,!0),t(c.prototype,i,!0)):o=!1;return g_={ABV:s,CONSTR:o,TYPED:n,VIEW:i},g_}var m_={},y_,UN;function YV(){if(UN)return y_;UN=1;var e=Ko(),t=Dn();return y_=function(r){if(r===void 0)return 0;var n=e(r),i=t(n);if(n!==i)throw RangeError("Wrong length!");return i},y_}var jN;function eA(){return jN||(jN=1,function(e){var t=Wr(),r=$n(),n=Uu(),i=Vv(),s=$s(),o=zc(),a=en(),u=Fc(),c=Ko(),f=Dn(),h=YV(),v=qc().f,y=si().f,m=W2(),_=rf(),x="ArrayBuffer",S="DataView",P="prototype",T="Wrong length!",E="Wrong index!",O=t[x],N=t[S],d=t.Math,C=t.RangeError,R=t.Infinity,k=O,B=d.abs,z=d.pow,U=d.floor,Y=d.log,oe=d.LN2,W="buffer",D="byteLength",F="byteOffset",H=r?"_b":W,ie=r?"_l":D,se=r?"_o":F;function we(fe,Te,Ce){var Ue=new Array(Ce),Le=Ce*8-Te-1,Ie=(1<<Le)-1,Se=Ie>>1,Ye=Te===23?z(2,-24)-z(2,-77):0,ft=0,bt=fe<0||fe===0&&1/fe<0?1:0,dt,it,Jt;for(fe=B(fe),fe!=fe||fe===R?(it=fe!=fe?1:0,dt=Ie):(dt=U(Y(fe)/oe),fe*(Jt=z(2,-dt))<1&&(dt--,Jt*=2),dt+Se>=1?fe+=Ye/Jt:fe+=Ye*z(2,1-Se),fe*Jt>=2&&(dt++,Jt/=2),dt+Se>=Ie?(it=0,dt=Ie):dt+Se>=1?(it=(fe*Jt-1)*z(2,Te),dt=dt+Se):(it=fe*z(2,Se-1)*z(2,Te),dt=0));Te>=8;Ue[ft++]=it&255,it/=256,Te-=8);for(dt=dt<<Te|it,Le+=Te;Le>0;Ue[ft++]=dt&255,dt/=256,Le-=8);return Ue[--ft]|=bt*128,Ue}function ge(fe,Te,Ce){var Ue=Ce*8-Te-1,Le=(1<<Ue)-1,Ie=Le>>1,Se=Ue-7,Ye=Ce-1,ft=fe[Ye--],bt=ft&127,dt;for(ft>>=7;Se>0;bt=bt*256+fe[Ye],Ye--,Se-=8);for(dt=bt&(1<<-Se)-1,bt>>=-Se,Se+=Te;Se>0;dt=dt*256+fe[Ye],Ye--,Se-=8);if(bt===0)bt=1-Ie;else{if(bt===Le)return dt?NaN:ft?-R:R;dt=dt+z(2,Te),bt=bt-Ie}return(ft?-1:1)*dt*z(2,bt-Te)}function te(fe){return fe[3]<<24|fe[2]<<16|fe[1]<<8|fe[0]}function ue(fe){return[fe&255]}function re(fe){return[fe&255,fe>>8&255]}function Q(fe){return[fe&255,fe>>8&255,fe>>16&255,fe>>24&255]}function le(fe){return we(fe,52,8)}function Ge(fe){return we(fe,23,4)}function Ne(fe,Te,Ce){y(fe[P],Te,{get:function(){return this[Ce]}})}function Oe(fe,Te,Ce,Ue){var Le=+Ce,Ie=h(Le);if(Ie+Te>fe[ie])throw C(E);var Se=fe[H]._b,Ye=Ie+fe[se],ft=Se.slice(Ye,Ye+Te);return Ue?ft:ft.reverse()}function Ze(fe,Te,Ce,Ue,Le,Ie){var Se=+Ce,Ye=h(Se);if(Ye+Te>fe[ie])throw C(E);for(var ft=fe[H]._b,bt=Ye+fe[se],dt=Ue(+Le),it=0;it<Te;it++)ft[bt+it]=dt[Ie?it:Te-it-1]}if(!i.ABV)O=function(Te){u(this,O,x);var Ce=h(Te);this._b=m.call(new Array(Ce),0),this[ie]=Ce},N=function(Te,Ce,Ue){u(this,N,S),u(Te,O,S);var Le=Te[ie],Ie=c(Ce);if(Ie<0||Ie>Le)throw C("Wrong offset!");if(Ue=Ue===void 0?Le-Ie:f(Ue),Ie+Ue>Le)throw C(T);this[H]=Te,this[se]=Ie,this[ie]=Ue},r&&(Ne(O,D,"_l"),Ne(N,W,"_b"),Ne(N,D,"_l"),Ne(N,F,"_o")),o(N[P],{getInt8:function(Te){return Oe(this,1,Te)[0]<<24>>24},getUint8:function(Te){return Oe(this,1,Te)[0]},getInt16:function(Te){var Ce=Oe(this,2,Te,arguments[1]);return(Ce[1]<<8|Ce[0])<<16>>16},getUint16:function(Te){var Ce=Oe(this,2,Te,arguments[1]);return Ce[1]<<8|Ce[0]},getInt32:function(Te){return te(Oe(this,4,Te,arguments[1]))},getUint32:function(Te){return te(Oe(this,4,Te,arguments[1]))>>>0},getFloat32:function(Te){return ge(Oe(this,4,Te,arguments[1]),23,4)},getFloat64:function(Te){return ge(Oe(this,8,Te,arguments[1]),52,8)},setInt8:function(Te,Ce){Ze(this,1,Te,ue,Ce)},setUint8:function(Te,Ce){Ze(this,1,Te,ue,Ce)},setInt16:function(Te,Ce){Ze(this,2,Te,re,Ce,arguments[2])},setUint16:function(Te,Ce){Ze(this,2,Te,re,Ce,arguments[2])},setInt32:function(Te,Ce){Ze(this,4,Te,Q,Ce,arguments[2])},setUint32:function(Te,Ce){Ze(this,4,Te,Q,Ce,arguments[2])},setFloat32:function(Te,Ce){Ze(this,4,Te,Ge,Ce,arguments[2])},setFloat64:function(Te,Ce){Ze(this,8,Te,le,Ce,arguments[2])}});else{if(!a(function(){O(1)})||!a(function(){new O(-1)})||a(function(){return new O,new O(1.5),new O(NaN),O.name!=x})){O=function(Te){return u(this,O),new k(h(Te))};for(var $e=O[P]=k[P],q=v(k),G=0,K;q.length>G;)(K=q[G++])in O||s(O,K,k[K]);n||($e.constructor=O)}var J=new N(new O(2)),Ee=N[P].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),(J.getInt8(0)||!J.getInt8(1))&&o(N[P],{setInt8:function(Te,Ce){Ee.call(this,Te,Ce<<24>>24)},setUint8:function(Te,Ce){Ee.call(this,Te,Ce<<24>>24)}},!0)}_(O,x),_(N,S),s(N[P],i.VIEW,!0),e[x]=O,e[S]=N}(m_)),m_}var HN;function Zse(){if(HN)return GN;HN=1;var e=je(),t=Vv(),r=eA(),n=xr(),i=Mc(),s=Dn(),o=cn(),a=Wr().ArrayBuffer,u=Xh(),c=r.ArrayBuffer,f=r.DataView,h=t.ABV&&a.isView,v=c.prototype.slice,y=t.VIEW,m="ArrayBuffer";return e(e.G+e.W+e.F*(a!==c),{ArrayBuffer:c}),e(e.S+e.F*!t.CONSTR,m,{isView:function(x){return h&&h(x)||o(x)&&y in x}}),e(e.P+e.U+e.F*en()(function(){return!new c(2).slice(1,void 0).byteLength}),m,{slice:function(x,S){if(v!==void 0&&S===void 0)return v.call(n(this),x);for(var P=n(this).byteLength,T=i(x,P),E=i(S===void 0?P:S,P),O=new(u(this,c))(s(E-T)),N=new f(this),d=new f(O),C=0;T<E;)d.setUint8(C++,N.getUint8(T++));return O}}),Dc()(m),GN}var WN={},XN;function Qse(){if(XN)return WN;XN=1;var e=je();return e(e.G+e.W+e.F*!Vv().ABV,{DataView:eA().DataView}),WN}var YN={},pp={exports:{}},KN;function uu(){if(KN)return pp.exports;if(KN=1,$n()){var e=Uu(),t=Wr(),r=en(),n=je(),i=Vv(),s=eA(),o=Xo(),a=Fc(),u=Rc(),c=$s(),f=zc(),h=Ko(),v=Dn(),y=YV(),m=Mc(),_=Pa(),x=yo(),S=nf(),P=cn(),T=fi(),E=$2(),O=Nc(),N=wo(),d=qc().f,C=j2(),R=kc(),k=Ln(),B=Ia(),z=Rv(),U=Xh(),Y=X2(),oe=of(),W=qv(),D=Dc(),F=W2(),H=FV(),ie=si(),se=bo(),we=ie.f,ge=se.f,te=t.RangeError,ue=t.TypeError,re=t.Uint8Array,Q="ArrayBuffer",le="Shared"+Q,Ge="BYTES_PER_ELEMENT",Ne="prototype",Oe=Array[Ne],Ze=s.ArrayBuffer,$e=s.DataView,q=B(0),G=B(2),K=B(3),J=B(4),Ee=B(5),fe=B(6),Te=z(!0),Ce=z(!1),Ue=Y.values,Le=Y.keys,Ie=Y.entries,Se=Oe.lastIndexOf,Ye=Oe.reduce,ft=Oe.reduceRight,bt=Oe.join,dt=Oe.sort,it=Oe.slice,Jt=Oe.toString,Sr=Oe.toLocaleString,sr=k("iterator"),vr=k("toStringTag"),qr=R("typed_constructor"),Vr=R("def_constructor"),In=i.CONSTR,ur=i.TYPED,Mr=i.VIEW,Tn="Wrong length!",Pn=B(1,function(ct,Ke){return jt(U(ct,ct[Vr]),Ke)}),xn=r(function(){return new re(new Uint16Array([1]).buffer)[0]===1}),Xn=!!re&&!!re[Ne].set&&r(function(){new re(1).set({})}),oi=function(ct,Ke){var wt=h(ct);if(wt<0||wt%Ke)throw te("Wrong offset!");return wt},Ht=function(ct){if(P(ct)&&ur in ct)return ct;throw ue(ct+" is not a typed array!")},jt=function(ct,Ke){if(!(P(ct)&&qr in ct))throw ue("It is not a typed array constructor!");return new ct(Ke)},Gr=function(ct,Ke){return Un(U(ct,ct[Vr]),Ke)},Un=function(ct,Ke){for(var wt=0,Rt=Ke.length,Wt=jt(ct,Rt);Rt>wt;)Wt[wt]=Ke[wt++];return Wt},Rn=function(ct,Ke,wt){we(ct,Ke,{get:function(){return this._d[wt]}})},Yr=function(Ke){var wt=T(Ke),Rt=arguments.length,Wt=Rt>1?arguments[1]:void 0,ln=Wt!==void 0,Jn=C(wt),Dt,rn,Pr,Dr,$r,Cr;if(Jn!=null&&!E(Jn)){for(Cr=Jn.call(wt),Pr=[],Dt=0;!($r=Cr.next()).done;Dt++)Pr.push($r.value);wt=Pr}for(ln&&Rt>2&&(Wt=o(Wt,arguments[2],2)),Dt=0,rn=v(wt.length),Dr=jt(this,rn);rn>Dt;Dt++)Dr[Dt]=ln?Wt(wt[Dt],Dt):wt[Dt];return Dr},Yn=function(){for(var Ke=0,wt=arguments.length,Rt=jt(this,wt);wt>Ke;)Rt[Ke]=arguments[Ke++];return Rt},yi=!!re&&r(function(){Sr.call(new re(1))}),tn=function(){return Sr.apply(yi?it.call(Ht(this)):Ht(this),arguments)},Kn={copyWithin:function(Ke,wt){return H.call(Ht(this),Ke,wt,arguments.length>2?arguments[2]:void 0)},every:function(Ke){return J(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},fill:function(Ke){return F.apply(Ht(this),arguments)},filter:function(Ke){return Gr(this,G(Ht(this),Ke,arguments.length>1?arguments[1]:void 0))},find:function(Ke){return Ee(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},findIndex:function(Ke){return fe(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},forEach:function(Ke){q(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},indexOf:function(Ke){return Ce(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},includes:function(Ke){return Te(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},join:function(Ke){return bt.apply(Ht(this),arguments)},lastIndexOf:function(Ke){return Se.apply(Ht(this),arguments)},map:function(Ke){return Pn(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},reduce:function(Ke){return Ye.apply(Ht(this),arguments)},reduceRight:function(Ke){return ft.apply(Ht(this),arguments)},reverse:function(){for(var Ke=this,wt=Ht(Ke).length,Rt=Math.floor(wt/2),Wt=0,ln;Wt<Rt;)ln=Ke[Wt],Ke[Wt++]=Ke[--wt],Ke[wt]=ln;return Ke},some:function(Ke){return K(Ht(this),Ke,arguments.length>1?arguments[1]:void 0)},sort:function(Ke){return dt.call(Ht(this),Ke)},subarray:function(Ke,wt){var Rt=Ht(this),Wt=Rt.length,ln=m(Ke,Wt);return new(U(Rt,Rt[Vr]))(Rt.buffer,Rt.byteOffset+ln*Rt.BYTES_PER_ELEMENT,v((wt===void 0?Wt:m(wt,Wt))-ln))}},Bn=function(Ke,wt){return Gr(this,it.call(Ht(this),Ke,wt))},_i=function(Ke){Ht(this);var wt=oi(arguments[1],1),Rt=this.length,Wt=T(Ke),ln=v(Wt.length),Jn=0;if(ln+wt>Rt)throw te(Tn);for(;Jn<ln;)this[wt+Jn]=Wt[Jn++]},Je={entries:function(){return Ie.call(Ht(this))},keys:function(){return Le.call(Ht(this))},values:function(){return Ue.call(Ht(this))}},Ct=function(ct,Ke){return P(ct)&&ct[ur]&&typeof Ke!="symbol"&&Ke in ct&&String(+Ke)==String(Ke)},Lt=function(Ke,wt){return Ct(Ke,wt=_(wt,!0))?u(2,Ke[wt]):ge(Ke,wt)},Ft=function(Ke,wt,Rt){return Ct(Ke,wt=_(wt,!0))&&P(Rt)&&x(Rt,"value")&&!x(Rt,"get")&&!x(Rt,"set")&&!Rt.configurable&&(!x(Rt,"writable")||Rt.writable)&&(!x(Rt,"enumerable")||Rt.enumerable)?(Ke[wt]=Rt.value,Ke):we(Ke,wt,Rt)};In||(se.f=Lt,ie.f=Ft),n(n.S+n.F*!In,"Object",{getOwnPropertyDescriptor:Lt,defineProperty:Ft}),r(function(){Jt.call({})})&&(Jt=Sr=function(){return bt.call(this)});var Bt=f({},Kn);f(Bt,Je),c(Bt,sr,Je.values),f(Bt,{slice:Bn,set:_i,constructor:function(){},toString:Jt,toLocaleString:tn}),Rn(Bt,"buffer","b"),Rn(Bt,"byteOffset","o"),Rn(Bt,"byteLength","l"),Rn(Bt,"length","e"),we(Bt,vr,{get:function(){return this[ur]}}),pp.exports=function(ct,Ke,wt,Rt){Rt=!!Rt;var Wt=ct+(Rt?"Clamped":"")+"Array",ln="get"+ct,Jn="set"+ct,Dt=t[Wt],rn=Dt||{},Pr=Dt&&N(Dt),Dr=!Dt||!i.ABV,$r={},Cr=Dt&&Dt[Ne],kn=function(mt,pt){var vt=mt._d;return vt.v[ln](pt*Ke+vt.o,xn)},Zt=function(mt,pt,vt){var Mt=mt._d;Rt&&(vt=(vt=Math.round(vt))<0?0:vt>255?255:vt&255),Mt.v[Jn](pt*Ke+Mt.o,vt,xn)},bi=function(mt,pt){we(mt,pt,{get:function(){return kn(this,pt)},set:function(vt){return Zt(this,pt,vt)},enumerable:!0})};Dr?(Dt=wt(function(mt,pt,vt,Mt){a(mt,Dt,Wt,"_d");var cr=0,Kr=0,mn,Ur,Cn,jn;if(!P(pt))Cn=y(pt),Ur=Cn*Ke,mn=new Ze(Ur);else if(pt instanceof Ze||(jn=S(pt))==Q||jn==le){mn=pt,Kr=oi(vt,Ke);var wi=pt.byteLength;if(Mt===void 0){if(wi%Ke||(Ur=wi-Kr,Ur<0))throw te(Tn)}else if(Ur=v(Mt)*Ke,Ur+Kr>wi)throw te(Tn);Cn=Ur/Ke}else return ur in pt?Un(Dt,pt):Yr.call(Dt,pt);for(c(mt,"_d",{b:mn,o:Kr,l:Ur,e:Cn,v:new $e(mn)});cr<Cn;)bi(mt,cr++)}),Cr=Dt[Ne]=O(Bt),c(Cr,"constructor",Dt)):(!r(function(){Dt(1)})||!r(function(){new Dt(-1)})||!W(function(mt){new Dt,new Dt(null),new Dt(1.5),new Dt(mt)},!0))&&(Dt=wt(function(mt,pt,vt,Mt){a(mt,Dt,Wt);var cr;return P(pt)?pt instanceof Ze||(cr=S(pt))==Q||cr==le?Mt!==void 0?new rn(pt,oi(vt,Ke),Mt):vt!==void 0?new rn(pt,oi(vt,Ke)):new rn(pt):ur in pt?Un(Dt,pt):Yr.call(Dt,pt):new rn(y(pt))}),q(Pr!==Function.prototype?d(rn).concat(d(Pr)):d(rn),function(mt){mt in Dt||c(Dt,mt,rn[mt])}),Dt[Ne]=Cr,e||(Cr.constructor=Dt));var Ci=Cr[sr],$i=!!Ci&&(Ci.name=="values"||Ci.name==null),Qe=Je.values;c(Dt,qr,!0),c(Cr,ur,Wt),c(Cr,Mr,!0),c(Cr,Vr,Dt),(Rt?new Dt(1)[vr]!=Wt:!(vr in Cr))&&we(Cr,vr,{get:function(){return Wt}}),$r[Wt]=Dt,n(n.G+n.W+n.F*(Dt!=rn),$r),n(n.S,Wt,{BYTES_PER_ELEMENT:Ke}),n(n.S+n.F*r(function(){rn.of.call(Dt,1)}),Wt,{from:Yr,of:Yn}),Ge in Cr||c(Cr,Ge,Ke),n(n.P,Wt,Kn),D(Wt),n(n.P+n.F*Xn,Wt,{set:_i}),n(n.P+n.F*!$i,Wt,Je),!e&&Cr.toString!=Jt&&(Cr.toString=Jt),n(n.P+n.F*r(function(){new Dt(1).slice()}),Wt,{slice:Bn}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new Dt([1,2]).toLocaleString()})||!r(function(){Cr.toLocaleString.call([1,2])})),Wt,{toLocaleString:tn}),oe[Wt]=$i?Ci:Qe,!e&&!$i&&c(Cr,sr,Qe)}}else pp.exports=function(){};return pp.exports}var JN;function eoe(){return JN||(JN=1,uu()("Int8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),YN}var ZN={},QN;function toe(){return QN||(QN=1,uu()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),ZN}var eq={},tq;function roe(){return tq||(tq=1,uu()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}},!0)),eq}var rq={},nq;function noe(){return nq||(nq=1,uu()("Int16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),rq}var iq={},sq;function ioe(){return sq||(sq=1,uu()("Uint16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),iq}var oq={},aq;function soe(){return aq||(aq=1,uu()("Int32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),oq}var uq={},cq;function ooe(){return cq||(cq=1,uu()("Uint32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),uq}var lq={},fq;function aoe(){return fq||(fq=1,uu()("Float32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),lq}var hq={},dq;function uoe(){return dq||(dq=1,uu()("Float64",8,function(e){return function(r,n,i){return e(this,r,n,i)}})),hq}var pq={},vq;function coe(){if(vq)return pq;vq=1;var e=je(),t=os(),r=xr(),n=(Wr().Reflect||{}).apply,i=Function.apply;return e(e.S+e.F*!en()(function(){n(function(){})}),"Reflect",{apply:function(o,a,u){var c=t(o),f=r(u);return n?n(c,a,f):i.call(c,a,f)}}),pq}var gq={},mq;function loe(){if(mq)return gq;mq=1;var e=je(),t=Nc(),r=os(),n=xr(),i=cn(),s=en(),o=OV(),a=(Wr().Reflect||{}).construct,u=s(function(){function f(){}return!(a(function(){},[],f)instanceof f)}),c=!s(function(){a(function(){})});return e(e.S+e.F*(u||c),"Reflect",{construct:function(h,v){r(h),n(v);var y=arguments.length<3?h:r(arguments[2]);if(c&&!u)return a(h,v,y);if(h==y){switch(v.length){case 0:return new h;case 1:return new h(v[0]);case 2:return new h(v[0],v[1]);case 3:return new h(v[0],v[1],v[2]);case 4:return new h(v[0],v[1],v[2],v[3])}var m=[null];return m.push.apply(m,v),new(o.apply(h,m))}var _=y.prototype,x=t(i(_)?_:Object.prototype),S=Function.apply.call(h,x,v);return i(S)?S:x}}),gq}var yq={},_q;function foe(){if(_q)return yq;_q=1;var e=si(),t=je(),r=xr(),n=Pa();return t(t.S+t.F*en()(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,o,a){r(s),o=n(o,!0),r(a);try{return e.f(s,o,a),!0}catch{return!1}}}),yq}var bq={},wq;function hoe(){if(wq)return bq;wq=1;var e=je(),t=bo().f,r=xr();return e(e.S,"Reflect",{deleteProperty:function(i,s){var o=t(r(i),s);return o&&!o.configurable?!1:delete i[s]}}),bq}var xq={},Sq;function doe(){if(Sq)return xq;Sq=1;var e=je(),t=xr(),r=function(n){this._t=t(n),this._i=0;var i=this._k=[],s;for(s in n)i.push(s)};return B2()(r,"Object",function(){var n=this,i=n._k,s;do if(n._i>=i.length)return{value:void 0,done:!0};while(!((s=i[n._i++])in n._t));return{value:s,done:!1}}),e(e.S,"Reflect",{enumerate:function(i){return new r(i)}}),xq}var Eq={},Aq;function poe(){if(Aq)return Eq;Aq=1;var e=bo(),t=wo(),r=yo(),n=je(),i=cn(),s=xr();function o(a,u){var c=arguments.length<3?a:arguments[2],f,h;if(s(a)===c)return a[u];if(f=e.f(a,u))return r(f,"value")?f.value:f.get!==void 0?f.get.call(c):void 0;if(i(h=t(a)))return o(h,u,c)}return n(n.S,"Reflect",{get:o}),Eq}var Tq={},Pq;function voe(){if(Pq)return Tq;Pq=1;var e=bo(),t=je(),r=xr();return t(t.S,"Reflect",{getOwnPropertyDescriptor:function(i,s){return e.f(r(i),s)}}),Tq}var Cq={},Oq;function goe(){if(Oq)return Cq;Oq=1;var e=je(),t=wo(),r=xr();return e(e.S,"Reflect",{getPrototypeOf:function(i){return t(r(i))}}),Cq}var Iq={},Rq;function moe(){if(Rq)return Iq;Rq=1;var e=je();return e(e.S,"Reflect",{has:function(r,n){return n in r}}),Iq}var kq={},Mq;function yoe(){if(Mq)return kq;Mq=1;var e=je(),t=xr(),r=Object.isExtensible;return e(e.S,"Reflect",{isExtensible:function(i){return t(i),r?r(i):!0}}),kq}var Lq={},__,Nq;function KV(){if(Nq)return __;Nq=1;var e=qc(),t=kv(),r=xr(),n=Wr().Reflect;return __=n&&n.ownKeys||function(s){var o=e.f(r(s)),a=t.f;return a?o.concat(a(s)):o},__}var qq;function _oe(){if(qq)return Lq;qq=1;var e=je();return e(e.S,"Reflect",{ownKeys:KV()}),Lq}var Dq={},Fq;function boe(){if(Fq)return Dq;Fq=1;var e=je(),t=xr(),r=Object.preventExtensions;return e(e.S,"Reflect",{preventExtensions:function(i){t(i);try{return r&&r(i),!0}catch{return!1}}}),Dq}var Bq={},zq;function woe(){if(zq)return Bq;zq=1;var e=si(),t=bo(),r=wo(),n=yo(),i=je(),s=Rc(),o=xr(),a=cn();function u(c,f,h){var v=arguments.length<4?c:arguments[3],y=t.f(o(c),f),m,_;if(!y){if(a(_=r(c)))return u(_,f,h,v);y=s(0)}if(n(y,"value")){if(y.writable===!1||!a(v))return!1;if(m=t.f(v,f)){if(m.get||m.set||m.writable===!1)return!1;m.value=h,e.f(v,f,m)}else e.f(v,f,s(0,h));return!0}return y.set===void 0?!1:(y.set.call(v,h),!0)}return i(i.S,"Reflect",{set:u}),Bq}var Vq={},Gq;function xoe(){if(Gq)return Vq;Gq=1;var e=je(),t=M2();return t&&e(e.S,"Reflect",{setPrototypeOf:function(n,i){t.check(n,i);try{return t.set(n,i),!0}catch{return!1}}}),Vq}var $q={},Uq;function Soe(){if(Uq)return $q;Uq=1;var e=je(),t=Rv()(!0);return e(e.P,"Array",{includes:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}}),Hu()("includes"),$q}var jq={},b_,Hq;function JV(){if(Hq)return b_;Hq=1;var e=Mv(),t=cn(),r=Dn(),n=Xo(),i=Ln()("isConcatSpreadable");function s(o,a,u,c,f,h,v,y){for(var m=f,_=0,x=v?n(v,y,3):!1,S,P;_<c;){if(_ in u){if(S=x?x(u[_],_,a):u[_],P=!1,t(S)&&(P=S[i],P=P!==void 0?!!P:e(S)),P&&h>0)m=s(o,a,S,r(S.length),m,h-1)-1;else{if(m>=9007199254740991)throw TypeError();o[m]=S}m++}_++}return m}return b_=s,b_}var Wq;function Eoe(){if(Wq)return jq;Wq=1;var e=je(),t=JV(),r=fi(),n=Dn(),i=os(),s=H2();return e(e.P,"Array",{flatMap:function(a){var u=r(this),c,f;return i(a),c=n(u.length),f=s(u,0),t(f,u,u,c,0,1,a,arguments[1]),f}}),Hu()("flatMap"),jq}var Xq={},Yq;function Aoe(){if(Yq)return Xq;Yq=1;var e=je(),t=JV(),r=fi(),n=Dn(),i=Ko(),s=H2();return e(e.P,"Array",{flatten:function(){var a=arguments[0],u=r(this),c=n(u.length),f=s(u,0);return t(f,u,u,c,0,a===void 0?1:i(a)),f}}),Hu()("flatten"),Xq}var Kq={},Jq;function Toe(){if(Jq)return Kq;Jq=1;var e=je(),t=Lv()(!0),r=en(),n=r(function(){return"ð ®·".at(0)!=="ð ®·"});return e(e.P+e.F*n,"String",{at:function(s){return t(this,s)}}),Kq}var Zq={},w_,Qq;function ZV(){if(Qq)return w_;Qq=1;var e=Dn(),t=q2(),r=Ca();return w_=function(n,i,s,o){var a=String(r(n)),u=a.length,c=s===void 0?" ":String(s),f=e(i);if(f<=u||c=="")return a;var h=f-u,v=t.call(c,Math.ceil(h/c.length));return v.length>h&&(v=v.slice(0,h)),o?v+a:a+v},w_}var e3;function Poe(){if(e3)return Zq;e3=1;var e=je(),t=ZV(),r=Bv(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padStart:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!0)}}),Zq}var t3={},r3;function Coe(){if(r3)return t3;r3=1;var e=je(),t=ZV(),r=Bv(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padEnd:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!1)}}),t3}var n3={},i3;function Ooe(){return i3||(i3=1,sf()("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")),n3}var s3={},o3;function Ioe(){return o3||(o3=1,sf()("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")),s3}var a3={},u3;function Roe(){if(u3)return a3;u3=1;var e=je(),t=Ca(),r=Dn(),n=Nv(),i=Wh(),s=RegExp.prototype,o=function(a,u){this._r=a,this._s=u};return B2()(o,"RegExp String",function(){var u=this._r.exec(this._s);return{value:u,done:u===null}}),e(e.P,"String",{matchAll:function(u){if(t(this),!n(u))throw TypeError(u+" is not a regexp!");var c=String(this),f="flags"in s?String(u.flags):i.call(u),h=new RegExp(u.source,~f.indexOf("g")?f:"g"+f);return h.lastIndex=r(u.lastIndex),new o(h,c)}}),a3}var c3={},l3;function koe(){return l3||(l3=1,O2()("asyncIterator")),c3}var f3={},h3;function Moe(){return h3||(h3=1,O2()("observable")),f3}var d3={},p3;function Loe(){if(p3)return d3;p3=1;var e=je(),t=KV(),r=_o(),n=bo(),i=U2();return e(e.S,"Object",{getOwnPropertyDescriptors:function(o){for(var a=r(o),u=n.f,c=t(a),f={},h=0,v,y;c.length>h;)y=u(a,v=c[h++]),y!==void 0&&i(f,v,y);return f}}),d3}var v3={},x_,g3;function QV(){if(g3)return x_;g3=1;var e=$n(),t=Lc(),r=_o(),n=Hh().f;return x_=function(i){return function(s){for(var o=r(s),a=t(o),u=a.length,c=0,f=[],h;u>c;)h=a[c++],(!e||n.call(o,h))&&f.push(i?[h,o[h]]:o[h]);return f}},x_}var m3;function Noe(){if(m3)return v3;m3=1;var e=je(),t=QV()(!1);return e(e.S,"Object",{values:function(n){return t(n)}}),v3}var y3={},_3;function qoe(){if(_3)return y3;_3=1;var e=je(),t=QV()(!0);return e(e.S,"Object",{entries:function(n){return t(n)}}),y3}var b3={},S_,w3;function Gv(){return w3||(w3=1,S_=Uu()||!en()(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Wr()[e]})),S_}var x3;function Doe(){if(x3)return b3;x3=1;var e=je(),t=fi(),r=os(),n=si();return $n()&&e(e.P+Gv(),"Object",{__defineGetter__:function(s,o){n.f(t(this),s,{get:r(o),enumerable:!0,configurable:!0})}}),b3}var S3={},E3;function Foe(){if(E3)return S3;E3=1;var e=je(),t=fi(),r=os(),n=si();return $n()&&e(e.P+Gv(),"Object",{__defineSetter__:function(s,o){n.f(t(this),s,{set:r(o),enumerable:!0,configurable:!0})}}),S3}var A3={},T3;function Boe(){if(T3)return A3;T3=1;var e=je(),t=fi(),r=Pa(),n=wo(),i=bo().f;return $n()&&e(e.P+Gv(),"Object",{__lookupGetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.get;while(a=n(a))}}),A3}var P3={},C3;function zoe(){if(C3)return P3;C3=1;var e=je(),t=fi(),r=Pa(),n=wo(),i=bo().f;return $n()&&e(e.P+Gv(),"Object",{__lookupSetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.set;while(a=n(a))}}),P3}var O3={},E_,I3;function eG(){if(I3)return E_;I3=1;var e=Bc();return E_=function(t,r){var n=[];return e(t,!1,n.push,n,r),n},E_}var A_,R3;function tG(){if(R3)return A_;R3=1;var e=nf(),t=eG();return A_=function(r){return function(){if(e(this)!=r)throw TypeError(r+"#toJSON isn't generic");return t(this)}},A_}var k3;function Voe(){if(k3)return O3;k3=1;var e=je();return e(e.P+e.R,"Map",{toJSON:tG()("Map")}),O3}var M3={},L3;function Goe(){if(L3)return M3;L3=1;var e=je();return e(e.P+e.R,"Set",{toJSON:tG()("Set")}),M3}var N3={},T_,q3;function $v(){if(q3)return T_;q3=1;var e=je();return T_=function(t){e(e.S,t,{of:function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return new this(i)}})},T_}var D3;function $oe(){return D3||(D3=1,$v()("Map")),N3}var F3={},B3;function Uoe(){return B3||(B3=1,$v()("Set")),F3}var z3={},V3;function joe(){return V3||(V3=1,$v()("WeakMap")),z3}var G3={},$3;function Hoe(){return $3||($3=1,$v()("WeakSet")),G3}var U3={},P_,j3;function Uv(){if(j3)return P_;j3=1;var e=je(),t=os(),r=Xo(),n=Bc();return P_=function(i){e(e.S,i,{from:function(o){var a=arguments[1],u,c,f,h;return t(this),u=a!==void 0,u&&t(a),o==null?new this:(c=[],u?(f=0,h=r(a,arguments[2],2),n(o,!1,function(v){c.push(h(v,f++))})):n(o,!1,c.push,c),new this(c))}})},P_}var H3;function Woe(){return H3||(H3=1,Uv()("Map")),U3}var W3={},X3;function Xoe(){return X3||(X3=1,Uv()("Set")),W3}var Y3={},K3;function Yoe(){return K3||(K3=1,Uv()("WeakMap")),Y3}var J3={},Z3;function Koe(){return Z3||(Z3=1,Uv()("WeakSet")),J3}var Q3={},eD;function Joe(){if(eD)return Q3;eD=1;var e=je();return e(e.G,{global:Wr()}),Q3}var tD={},rD;function Zoe(){if(rD)return tD;rD=1;var e=je();return e(e.S,"System",{global:Wr()}),tD}var nD={},iD;function Qoe(){if(iD)return nD;iD=1;var e=je(),t=Yo();return e(e.S,"Error",{isError:function(n){return t(n)==="Error"}}),nD}var sD={},oD;function eae(){if(oD)return sD;oD=1;var e=je();return e(e.S,"Math",{clamp:function(r,n,i){return Math.min(i,Math.max(n,r))}}),sD}var aD={},uD;function tae(){if(uD)return aD;uD=1;var e=je();return e(e.S,"Math",{DEG_PER_RAD:Math.PI/180}),aD}var cD={},lD;function rae(){if(lD)return cD;lD=1;var e=je(),t=180/Math.PI;return e(e.S,"Math",{degrees:function(n){return n*t}}),cD}var fD={},C_,hD;function rG(){return hD||(hD=1,C_=Math.scale||function(t,r,n,i,s){return arguments.length===0||t!=t||r!=r||n!=n||i!=i||s!=s?NaN:t===1/0||t===-1/0?t:(t-r)*(s-i)/(n-r)+i}),C_}var dD;function nae(){if(dD)return fD;dD=1;var e=je(),t=rG(),r=NV();return e(e.S,"Math",{fscale:function(i,s,o,a,u){return r(t(i,s,o,a,u))}}),fD}var pD={},vD;function iae(){if(vD)return pD;vD=1;var e=je();return e(e.S,"Math",{iaddh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a+(s>>>0)+((o&u|(o|u)&~(o+u>>>0))>>>31)|0}}),pD}var gD={},mD;function sae(){if(mD)return gD;mD=1;var e=je();return e(e.S,"Math",{isubh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a-(s>>>0)-((~o&u|~(o^u)&o-u>>>0)>>>31)|0}}),gD}var yD={},_D;function oae(){if(_D)return yD;_D=1;var e=je();return e(e.S,"Math",{imulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>16,f=o>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>16)+((a*f>>>0)+(h&i)>>16)}}),yD}var bD={},wD;function aae(){if(wD)return bD;wD=1;var e=je();return e(e.S,"Math",{RAD_PER_DEG:180/Math.PI}),bD}var xD={},SD;function uae(){if(SD)return xD;SD=1;var e=je(),t=Math.PI/180;return e(e.S,"Math",{radians:function(n){return n*t}}),xD}var ED={},AD;function cae(){if(AD)return ED;AD=1;var e=je();return e(e.S,"Math",{scale:rG()}),ED}var TD={},PD;function lae(){if(PD)return TD;PD=1;var e=je();return e(e.S,"Math",{umulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>>16,f=o>>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>>16)+((a*f>>>0)+(h&i)>>>16)}}),TD}var CD={},OD;function fae(){if(OD)return CD;OD=1;var e=je();return e(e.S,"Math",{signbit:function(r){return(r=+r)!=r?r:r==0?1/r==1/0:r>0}}),CD}var ID={},RD;function hae(){if(RD)return ID;RD=1;var e=je(),t=Wo(),r=Wr(),n=Xh(),i=$V();return e(e.P+e.R,"Promise",{finally:function(s){var o=n(this,t.Promise||r.Promise),a=typeof s=="function";return this.then(a?function(u){return i(o,s()).then(function(){return u})}:s,a?function(u){return i(o,s()).then(function(){throw u})}:s)}}),ID}var kD={},MD;function dae(){if(MD)return kD;MD=1;var e=je(),t=Q2(),r=GV();return e(e.S,"Promise",{try:function(n){var i=t.f(this),s=r(n);return(s.e?i.reject:i.resolve)(s.v),i.promise}}),kD}var LD={},O_,ND;function cu(){if(ND)return O_;ND=1;var e=jV(),t=je(),r=Uh()("metadata"),n=r.store||(r.store=new(XV())),i=function(h,v,y){var m=n.get(h);if(!m){if(!y)return;n.set(h,m=new e)}var _=m.get(v);if(!_){if(!y)return;m.set(v,_=new e)}return _},s=function(h,v,y){var m=i(v,y,!1);return m===void 0?!1:m.has(h)},o=function(h,v,y){var m=i(v,y,!1);return m===void 0?void 0:m.get(h)},a=function(h,v,y,m){i(y,m,!0).set(h,v)},u=function(h,v){var y=i(h,v,!1),m=[];return y&&y.forEach(function(_,x){m.push(x)}),m},c=function(h){return h===void 0||typeof h=="symbol"?h:String(h)},f=function(h){t(t.S,"Reflect",h)};return O_={store:n,map:i,has:s,get:o,set:a,keys:u,key:c,exp:f},O_}var qD;function pae(){if(qD)return LD;qD=1;var e=cu(),t=xr(),r=e.key,n=e.set;return e.exp({defineMetadata:function(s,o,a,u){n(s,o,t(a),r(u))}}),LD}var DD={},FD;function vae(){if(FD)return DD;FD=1;var e=cu(),t=xr(),r=e.key,n=e.map,i=e.store;return e.exp({deleteMetadata:function(o,a){var u=arguments.length<3?void 0:r(arguments[2]),c=n(t(a),u,!1);if(c===void 0||!c.delete(o))return!1;if(c.size)return!0;var f=i.get(a);return f.delete(u),!!f.size||i.delete(a)}}),DD}var BD={},zD;function gae(){if(zD)return BD;zD=1;var e=cu(),t=xr(),r=wo(),n=e.has,i=e.get,s=e.key,o=function(a,u,c){var f=n(a,u,c);if(f)return i(a,u,c);var h=r(u);return h!==null?o(a,h,c):void 0};return e.exp({getMetadata:function(u,c){return o(u,t(c),arguments.length<3?void 0:s(arguments[2]))}}),BD}var VD={},GD;function mae(){if(GD)return VD;GD=1;var e=HV(),t=eG(),r=cu(),n=xr(),i=wo(),s=r.keys,o=r.key,a=function(u,c){var f=s(u,c),h=i(u);if(h===null)return f;var v=a(h,c);return v.length?f.length?t(new e(f.concat(v))):v:f};return r.exp({getMetadataKeys:function(c){return a(n(c),arguments.length<2?void 0:o(arguments[1]))}}),VD}var $D={},UD;function yae(){if(UD)return $D;UD=1;var e=cu(),t=xr(),r=e.get,n=e.key;return e.exp({getOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),$D}var jD={},HD;function _ae(){if(HD)return jD;HD=1;var e=cu(),t=xr(),r=e.keys,n=e.key;return e.exp({getOwnMetadataKeys:function(s){return r(t(s),arguments.length<2?void 0:n(arguments[1]))}}),jD}var WD={},XD;function bae(){if(XD)return WD;XD=1;var e=cu(),t=xr(),r=wo(),n=e.has,i=e.key,s=function(o,a,u){var c=n(o,a,u);if(c)return!0;var f=r(a);return f!==null?s(o,f,u):!1};return e.exp({hasMetadata:function(a,u){return s(a,t(u),arguments.length<3?void 0:i(arguments[2]))}}),WD}var YD={},KD;function wae(){if(KD)return YD;KD=1;var e=cu(),t=xr(),r=e.has,n=e.key;return e.exp({hasOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),YD}var JD={},ZD;function xae(){if(ZD)return JD;ZD=1;var e=cu(),t=xr(),r=os(),n=e.key,i=e.set;return e.exp({metadata:function(o,a){return function(c,f){i(o,a,(f!==void 0?t:r)(c),n(f))}}}),JD}var QD={},eF;function Sae(){if(eF)return QD;eF=1;var e=je(),t=Z2()(),r=Wr().process,n=Yo()(r)=="process";return e(e.G,{asap:function(s){var o=n&&r.domain;t(o?o.bind(s):s)}}),QD}var tF={},rF;function Eae(){if(rF)return tF;rF=1;var e=je(),t=Wr(),r=Wo(),n=Z2()(),i=Ln()("observable"),s=os(),o=xr(),a=Fc(),u=zc(),c=$s(),f=Bc(),h=f.RETURN,v=function(T){return T==null?void 0:s(T)},y=function(T){var E=T._c;E&&(T._c=void 0,E())},m=function(T){return T._o===void 0},_=function(T){m(T)||(T._o=void 0,y(T))},x=function(T,E){o(T),this._c=void 0,this._o=T,T=new S(this);try{var O=E(T),N=O;O!=null&&(typeof O.unsubscribe=="function"?O=function(){N.unsubscribe()}:s(O),this._c=O)}catch(d){T.error(d);return}m(this)&&y(this)};x.prototype=u({},{unsubscribe:function(){_(this)}});var S=function(T){this._s=T};S.prototype=u({},{next:function(E){var O=this._s;if(!m(O)){var N=O._o;try{var d=v(N.next);if(d)return d.call(N,E)}catch(C){try{_(O)}finally{throw C}}}},error:function(E){var O=this._s;if(m(O))throw E;var N=O._o;O._o=void 0;try{var d=v(N.error);if(!d)throw E;E=d.call(N,E)}catch(C){try{y(O)}finally{throw C}}return y(O),E},complete:function(E){var O=this._s;if(!m(O)){var N=O._o;O._o=void 0;try{var d=v(N.complete);E=d?d.call(N,E):void 0}catch(C){try{y(O)}finally{throw C}}return y(O),E}}});var P=function(E){a(this,P,"Observable","_f")._f=s(E)};return u(P.prototype,{subscribe:function(E){return new x(E,this._f)},forEach:function(E){var O=this;return new(r.Promise||t.Promise)(function(N,d){s(E);var C=O.subscribe({next:function(R){try{return E(R)}catch(k){d(k),C.unsubscribe()}},error:d,complete:N})})}}),u(P,{from:function(E){var O=typeof this=="function"?this:P,N=v(o(E)[i]);if(N){var d=o(N.call(E));return d.constructor===O?d:new O(function(C){return d.subscribe(C)})}return new O(function(C){var R=!1;return n(function(){if(!R){try{if(f(E,!1,function(k){if(C.next(k),R)return h})===h)return}catch(k){if(R)throw k;C.error(k);return}C.complete()}}),function(){R=!0}})},of:function(){for(var E=0,O=arguments.length,N=new Array(O);E<O;)N[E]=arguments[E++];return new(typeof this=="function"?this:P)(function(d){var C=!1;return n(function(){if(!C){for(var R=0;R<N.length;++R)if(d.next(N[R]),C)return;d.complete()}}),function(){C=!0}})}}),c(P.prototype,i,function(){return this}),e(e.G,{Observable:P}),Dc()("Observable"),tF}var nF={},iF;function Aae(){if(iF)return nF;iF=1;var e=Wr(),t=je(),r=Bv(),n=[].slice,i=/MSIE .\./.test(r),s=function(o){return function(a,u){var c=arguments.length>2,f=c?n.call(arguments,2):!1;return o(c?function(){(typeof a=="function"?a:Function(a)).apply(this,f)}:a,u)}};return t(t.G+t.B+t.F*i,{setTimeout:s(e.setTimeout),setInterval:s(e.setInterval)}),nF}var sF={},oF;function Tae(){if(oF)return sF;oF=1;var e=je(),t=J2();return e(e.G+e.B,{setImmediate:t.set,clearImmediate:t.clear}),sF}var aF={},uF;function Pae(){if(uF)return aF;uF=1;for(var e=X2(),t=Lc(),r=Us(),n=Wr(),i=$s(),s=of(),o=Ln(),a=o("iterator"),u=o("toStringTag"),c=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=t(f),v=0;v<h.length;v++){var y=h[v],m=f[y],_=n[y],x=_&&_.prototype,S;if(x&&(x[a]||i(x,a,c),x[u]||i(x,u,y),s[y]=c,m))for(S in e)x[S]||r(x,S,e[S],!0)}return aF}var I_,cF;function Cae(){return cF||(cF=1,Kne(),Jne(),Zne(),Qne(),eie(),tie(),rie(),nie(),iie(),sie(),oie(),aie(),uie(),cie(),lie(),fie(),hie(),die(),pie(),vie(),gie(),mie(),yie(),_ie(),bie(),wie(),xie(),Sie(),Eie(),Aie(),Tie(),Pie(),Cie(),Oie(),Iie(),Rie(),kie(),Mie(),Lie(),Nie(),qie(),Die(),Fie(),Bie(),zie(),Vie(),Gie(),$ie(),Uie(),jie(),Hie(),Wie(),Xie(),Yie(),Kie(),Jie(),Zie(),Qie(),ese(),tse(),rse(),nse(),ise(),sse(),ose(),ase(),use(),cse(),lse(),fse(),hse(),dse(),pse(),vse(),gse(),mse(),_se(),bse(),xse(),Sse(),Ese(),Ase(),Tse(),Pse(),Cse(),Ise(),Rse(),kse(),Mse(),Lse(),Nse(),qse(),Dse(),Fse(),Bse(),zse(),Vse(),Gse(),$se(),X2(),Use(),zV(),jse(),VV(),Hse(),Wse(),Xse(),Yse(),Kse(),jV(),HV(),XV(),Jse(),Zse(),Qse(),eoe(),toe(),roe(),noe(),ioe(),soe(),ooe(),aoe(),uoe(),coe(),loe(),foe(),hoe(),doe(),poe(),voe(),goe(),moe(),yoe(),_oe(),boe(),woe(),xoe(),Soe(),Eoe(),Aoe(),Toe(),Poe(),Coe(),Ooe(),Ioe(),Roe(),koe(),Moe(),Loe(),Noe(),qoe(),Doe(),Foe(),Boe(),zoe(),Voe(),Goe(),$oe(),Uoe(),joe(),Hoe(),Woe(),Xoe(),Yoe(),Koe(),Joe(),Zoe(),Qoe(),eae(),tae(),rae(),nae(),iae(),sae(),oae(),aae(),uae(),cae(),lae(),fae(),hae(),dae(),pae(),vae(),gae(),mae(),yae(),_ae(),bae(),wae(),xae(),Sae(),Eae(),Aae(),Tae(),Pae(),I_=Wo()),I_}var Np={exports:{}},Oae=Np.exports,lF;function Iae(){return lF||(lF=1,function(e){(function(t){var r=Object.prototype,n=r.hasOwnProperty,i,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",c=t.regeneratorRuntime;if(c){e.exports=c;return}c=t.regeneratorRuntime=e.exports;function f(D,F,H,ie){var se=F&&F.prototype instanceof S?F:S,we=Object.create(se.prototype),ge=new Y(ie||[]);return we._invoke=k(D,H,ge),we}c.wrap=f;function h(D,F,H){try{return{type:"normal",arg:D.call(F,H)}}catch(ie){return{type:"throw",arg:ie}}}var v="suspendedStart",y="suspendedYield",m="executing",_="completed",x={};function S(){}function P(){}function T(){}var E={};E[o]=function(){return this};var O=Object.getPrototypeOf,N=O&&O(O(oe([])));N&&N!==r&&n.call(N,o)&&(E=N);var d=T.prototype=S.prototype=Object.create(E);P.prototype=d.constructor=T,T.constructor=P,T[u]=P.displayName="GeneratorFunction";function C(D){["next","throw","return"].forEach(function(F){D[F]=function(H){return this._invoke(F,H)}})}c.isGeneratorFunction=function(D){var F=typeof D=="function"&&D.constructor;return F?F===P||(F.displayName||F.name)==="GeneratorFunction":!1},c.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,T):(D.__proto__=T,u in D||(D[u]="GeneratorFunction")),D.prototype=Object.create(d),D},c.awrap=function(D){return{__await:D}};function R(D){function F(se,we,ge,te){var ue=h(D[se],D,we);if(ue.type==="throw")te(ue.arg);else{var re=ue.arg,Q=re.value;return Q&&typeof Q=="object"&&n.call(Q,"__await")?Promise.resolve(Q.__await).then(function(le){F("next",le,ge,te)},function(le){F("throw",le,ge,te)}):Promise.resolve(Q).then(function(le){re.value=le,ge(re)},te)}}typeof t.process=="object"&&t.process.domain&&(F=t.process.domain.bind(F));var H;function ie(se,we){function ge(){return new Promise(function(te,ue){F(se,we,te,ue)})}return H=H?H.then(ge,ge):ge()}this._invoke=ie}C(R.prototype),R.prototype[a]=function(){return this},c.AsyncIterator=R,c.async=function(D,F,H,ie){var se=new R(f(D,F,H,ie));return c.isGeneratorFunction(F)?se:se.next().then(function(we){return we.done?we.value:se.next()})};function k(D,F,H){var ie=v;return function(we,ge){if(ie===m)throw new Error("Generator is already running");if(ie===_){if(we==="throw")throw ge;return W()}for(H.method=we,H.arg=ge;;){var te=H.delegate;if(te){var ue=B(te,H);if(ue){if(ue===x)continue;return ue}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(ie===v)throw ie=_,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);ie=m;var re=h(D,F,H);if(re.type==="normal"){if(ie=H.done?_:y,re.arg===x)continue;return{value:re.arg,done:H.done}}else re.type==="throw"&&(ie=_,H.method="throw",H.arg=re.arg)}}}function B(D,F){var H=D.iterator[F.method];if(H===i){if(F.delegate=null,F.method==="throw"){if(D.iterator.return&&(F.method="return",F.arg=i,B(D,F),F.method==="throw"))return x;F.method="throw",F.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var ie=h(H,D.iterator,F.arg);if(ie.type==="throw")return F.method="throw",F.arg=ie.arg,F.delegate=null,x;var se=ie.arg;if(!se)return F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,x;if(se.done)F[D.resultName]=se.value,F.next=D.nextLoc,F.method!=="return"&&(F.method="next",F.arg=i);else return se;return F.delegate=null,x}C(d),d[u]="Generator",d[o]=function(){return this},d.toString=function(){return"[object Generator]"};function z(D){var F={tryLoc:D[0]};1 in D&&(F.catchLoc=D[1]),2 in D&&(F.finallyLoc=D[2],F.afterLoc=D[3]),this.tryEntries.push(F)}function U(D){var F=D.completion||{};F.type="normal",delete F.arg,D.completion=F}function Y(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(z,this),this.reset(!0)}c.keys=function(D){var F=[];for(var H in D)F.push(H);return F.reverse(),function ie(){for(;F.length;){var se=F.pop();if(se in D)return ie.value=se,ie.done=!1,ie}return ie.done=!0,ie}};function oe(D){if(D){var F=D[o];if(F)return F.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var H=-1,ie=function se(){for(;++H<D.length;)if(n.call(D,H))return se.value=D[H],se.done=!1,se;return se.value=i,se.done=!0,se};return ie.next=ie}}return{next:W}}c.values=oe;function W(){return{value:i,done:!0}}Y.prototype={constructor:Y,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(U),!D)for(var F in this)F.charAt(0)==="t"&&n.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=i)},stop:function(){this.done=!0;var D=this.tryEntries[0],F=D.completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var F=this;function H(ue,re){return we.type="throw",we.arg=D,F.next=ue,re&&(F.method="next",F.arg=i),!!re}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var se=this.tryEntries[ie],we=se.completion;if(se.tryLoc==="root")return H("end");if(se.tryLoc<=this.prev){var ge=n.call(se,"catchLoc"),te=n.call(se,"finallyLoc");if(ge&&te){if(this.prev<se.catchLoc)return H(se.catchLoc,!0);if(this.prev<se.finallyLoc)return H(se.finallyLoc)}else if(ge){if(this.prev<se.catchLoc)return H(se.catchLoc,!0)}else if(te){if(this.prev<se.finallyLoc)return H(se.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(D,F){for(var H=this.tryEntries.length-1;H>=0;--H){var ie=this.tryEntries[H];if(ie.tryLoc<=this.prev&&n.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var se=ie;break}}se&&(D==="break"||D==="continue")&&se.tryLoc<=F&&F<=se.finallyLoc&&(se=null);var we=se?se.completion:{};return we.type=D,we.arg=F,se?(this.method="next",this.next=se.finallyLoc,x):this.complete(we)},complete:function(D,F){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&F&&(this.next=F),x},finish:function(D){for(var F=this.tryEntries.length-1;F>=0;--F){var H=this.tryEntries[F];if(H.finallyLoc===D)return this.complete(H.completion,H.afterLoc),U(H),x}},catch:function(D){for(var F=this.tryEntries.length-1;F>=0;--F){var H=this.tryEntries[F];if(H.tryLoc===D){var ie=H.completion;if(ie.type==="throw"){var se=ie.arg;U(H)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(D,F,H){return this.delegate={iterator:oe(D),resultName:F,nextLoc:H},this.method==="next"&&(this.arg=i),x}}})(typeof Di=="object"?Di:typeof window=="object"?window:typeof self=="object"?self:Oae)}(Np)),Np.exports}var fF={},R_,hF;function Rae(){return hF||(hF=1,R_=function(e,t){var r=t===Object(t)?function(n){return t[n]}:t;return function(n){return String(n).replace(e,r)}}),R_}var dF;function kae(){if(dF)return fF;dF=1;var e=je(),t=Rae()(/[\\^$*+?.()|[\]{}]/g,"\\$&");return e(e.S,"RegExp",{escape:function(n){return t(n)}}),fF}var k_,pF;function Mae(){return pF||(pF=1,kae(),k_=Wo().RegExp.escape),k_}var vF;function Lae(){if(vF)return IO;if(vF=1,Cae(),Iae(),Mae(),Di._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");Di._babelPolyfill=!0;var e="defineProperty";function t(r,n,i){r[n]||Object[e](r,n,{writable:!0,configurable:!0,value:i})}return t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(r){[][r]&&t(Array,r,Function.call.bind([][r]))}),IO}Lae();function tA(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var M_,gF;function Nae(){if(gF)return M_;gF=1;function e(){this.__data__=[],this.size=0}return M_=e,M_}var L_,mF;function af(){if(mF)return L_;mF=1;function e(t,r){return t===r||t!==t&&r!==r}return L_=e,L_}var N_,yF;function jv(){if(yF)return N_;yF=1;var e=af();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return N_=t,N_}var q_,_F;function qae(){if(_F)return q_;_F=1;var e=jv(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():r.call(s,o,1),--this.size,!0}return q_=n,q_}var D_,bF;function Dae(){if(bF)return D_;bF=1;var e=jv();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return D_=t,D_}var F_,wF;function Fae(){if(wF)return F_;wF=1;var e=jv();function t(r){return e(this.__data__,r)>-1}return F_=t,F_}var B_,xF;function Bae(){if(xF)return B_;xF=1;var e=jv();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return B_=t,B_}var z_,SF;function Hv(){if(SF)return z_;SF=1;var e=Nae(),t=qae(),r=Dae(),n=Fae(),i=Bae();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,z_=s,z_}var V_,EF;function zae(){if(EF)return V_;EF=1;var e=Hv();function t(){this.__data__=new e,this.size=0}return V_=t,V_}var G_,AF;function Vae(){if(AF)return G_;AF=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return G_=e,G_}var $_,TF;function Gae(){if(TF)return $_;TF=1;function e(t){return this.__data__.get(t)}return $_=e,$_}var U_,PF;function $ae(){if(PF)return U_;PF=1;function e(t){return this.__data__.has(t)}return U_=e,U_}var j_,CF;function nG(){if(CF)return j_;CF=1;var e=typeof Di=="object"&&Di&&Di.Object===Object&&Di;return j_=e,j_}var H_,OF;function Zo(){if(OF)return H_;OF=1;var e=nG(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return H_=r,H_}var W_,IF;function uf(){if(IF)return W_;IF=1;var e=Zo(),t=e.Symbol;return W_=t,W_}var X_,RF;function Uae(){if(RF)return X_;RF=1;var e=uf(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=r.call(o,i),u=o[i];try{o[i]=void 0;var c=!0}catch{}var f=n.call(o);return c&&(a?o[i]=u:delete o[i]),f}return X_=s,X_}var Y_,kF;function jae(){if(kF)return Y_;kF=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Y_=r,Y_}var K_,MF;function Vc(){if(MF)return K_;MF=1;var e=uf(),t=Uae(),r=jae(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return K_=o,K_}var J_,LF;function xo(){if(LF)return J_;LF=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return J_=e,J_}var Z_,NF;function Yh(){if(NF)return Z_;NF=1;var e=Vc(),t=xo(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var u=e(a);return u==n||u==i||u==r||u==s}return Z_=o,Z_}var Q_,qF;function Hae(){if(qF)return Q_;qF=1;var e=Zo(),t=e["__core-js_shared__"];return Q_=t,Q_}var eb,DF;function Wae(){if(DF)return eb;DF=1;var e=Hae(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return eb=r,eb}var tb,FF;function iG(){if(FF)return tb;FF=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return tb=r,tb}var rb,BF;function Xae(){if(BF)return rb;BF=1;var e=Yh(),t=Wae(),r=xo(),n=iG(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,c=a.hasOwnProperty,f=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(v){if(!r(v)||t(v))return!1;var y=e(v)?f:s;return y.test(n(v))}return rb=h,rb}var nb,zF;function Yae(){if(zF)return nb;zF=1;function e(t,r){return t==null?void 0:t[r]}return nb=e,nb}var ib,VF;function Gc(){if(VF)return ib;VF=1;var e=Xae(),t=Yae();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return ib=r,ib}var sb,GF;function rA(){if(GF)return sb;GF=1;var e=Gc(),t=Zo(),r=e(t,"Map");return sb=r,sb}var ob,$F;function Wv(){if($F)return ob;$F=1;var e=Gc(),t=e(Object,"create");return ob=t,ob}var ab,UF;function Kae(){if(UF)return ab;UF=1;var e=Wv();function t(){this.__data__=e?e(null):{},this.size=0}return ab=t,ab}var ub,jF;function Jae(){if(jF)return ub;jF=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return ub=e,ub}var cb,HF;function Zae(){if(HF)return cb;HF=1;var e=Wv(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return n.call(o,s)?o[s]:void 0}return cb=i,cb}var lb,WF;function Qae(){if(WF)return lb;WF=1;var e=Wv(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return lb=n,lb}var fb,XF;function eue(){if(XF)return fb;XF=1;var e=Wv(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return fb=r,fb}var hb,YF;function tue(){if(YF)return hb;YF=1;var e=Kae(),t=Jae(),r=Zae(),n=Qae(),i=eue();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,hb=s,hb}var db,KF;function rue(){if(KF)return db;KF=1;var e=tue(),t=Hv(),r=rA();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return db=n,db}var pb,JF;function nue(){if(JF)return pb;JF=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return pb=e,pb}var vb,ZF;function Xv(){if(ZF)return vb;ZF=1;var e=nue();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return vb=t,vb}var gb,QF;function iue(){if(QF)return gb;QF=1;var e=Xv();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return gb=t,gb}var mb,e6;function sue(){if(e6)return mb;e6=1;var e=Xv();function t(r){return e(this,r).get(r)}return mb=t,mb}var yb,t6;function oue(){if(t6)return yb;t6=1;var e=Xv();function t(r){return e(this,r).has(r)}return yb=t,yb}var _b,r6;function aue(){if(r6)return _b;r6=1;var e=Xv();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return _b=t,_b}var bb,n6;function nA(){if(n6)return bb;n6=1;var e=rue(),t=iue(),r=sue(),n=oue(),i=aue();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,bb=s,bb}var wb,i6;function uue(){if(i6)return wb;i6=1;var e=Hv(),t=rA(),r=nA(),n=200;function i(s,o){var a=this.__data__;if(a instanceof e){var u=a.__data__;if(!t||u.length<n-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new r(u)}return a.set(s,o),this.size=a.size,this}return wb=i,wb}var xb,s6;function Yv(){if(s6)return xb;s6=1;var e=Hv(),t=zae(),r=Vae(),n=Gae(),i=$ae(),s=uue();function o(a){var u=this.__data__=new e(a);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,xb=o,xb}var Sb,o6;function iA(){if(o6)return Sb;o6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return Sb=e,Sb}var Eb,a6;function sG(){if(a6)return Eb;a6=1;var e=Gc(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Eb=t,Eb}var Ab,u6;function Kv(){if(u6)return Ab;u6=1;var e=sG();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return Ab=t,Ab}var Tb,c6;function Jv(){if(c6)return Tb;c6=1;var e=Kv(),t=af(),r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a){var u=s[o];(!(n.call(s,o)&&t(u,a))||a===void 0&&!(o in s))&&e(s,o,a)}return Tb=i,Tb}var Pb,l6;function Kh(){if(l6)return Pb;l6=1;var e=Jv(),t=Kv();function r(n,i,s,o){var a=!s;s||(s={});for(var u=-1,c=i.length;++u<c;){var f=i[u],h=o?o(s[f],n[f],f,s,n):void 0;h===void 0&&(h=n[f]),a?t(s,f,h):e(s,f,h)}return s}return Pb=r,Pb}var Cb,f6;function cue(){if(f6)return Cb;f6=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return Cb=e,Cb}var Ob,h6;function Ra(){if(h6)return Ob;h6=1;function e(t){return t!=null&&typeof t=="object"}return Ob=e,Ob}var Ib,d6;function lue(){if(d6)return Ib;d6=1;var e=Vc(),t=Ra(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return Ib=n,Ib}var Rb,p6;function Jh(){if(p6)return Rb;p6=1;var e=lue(),t=Ra(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return Rb=s,Rb}var kb,v6;function hi(){if(v6)return kb;v6=1;var e=Array.isArray;return kb=e,kb}var uh={exports:{}},Mb,g6;function fue(){if(g6)return Mb;g6=1;function e(){return!1}return Mb=e,Mb}uh.exports;var m6;function cf(){return m6||(m6=1,function(e,t){var r=Zo(),n=fue(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?r.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||n;e.exports=c}(uh,uh.exports)),uh.exports}var Lb,y6;function Zv(){if(y6)return Lb;y6=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return Lb=r,Lb}var Nb,_6;function sA(){if(_6)return Nb;_6=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Nb=t,Nb}var qb,b6;function hue(){if(b6)return qb;b6=1;var e=Vc(),t=sA(),r=Ra(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",v="[object RegExp]",y="[object Set]",m="[object String]",_="[object WeakMap]",x="[object ArrayBuffer]",S="[object DataView]",P="[object Float32Array]",T="[object Float64Array]",E="[object Int8Array]",O="[object Int16Array]",N="[object Int32Array]",d="[object Uint8Array]",C="[object Uint8ClampedArray]",R="[object Uint16Array]",k="[object Uint32Array]",B={};B[P]=B[T]=B[E]=B[O]=B[N]=B[d]=B[C]=B[R]=B[k]=!0,B[n]=B[i]=B[x]=B[s]=B[S]=B[o]=B[a]=B[u]=B[c]=B[f]=B[h]=B[v]=B[y]=B[m]=B[_]=!1;function z(U){return r(U)&&t(U.length)&&!!B[e(U)]}return qb=z,qb}var Db,w6;function Qv(){if(w6)return Db;w6=1;function e(t){return function(r){return t(r)}}return Db=e,Db}var ch={exports:{}};ch.exports;var x6;function oA(){return x6||(x6=1,function(e,t){var r=nG(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(ch,ch.exports)),ch.exports}var Fb,S6;function Zh(){if(S6)return Fb;S6=1;var e=hue(),t=Qv(),r=oA(),n=r&&r.isTypedArray,i=n?t(n):e;return Fb=i,Fb}var Bb,E6;function oG(){if(E6)return Bb;E6=1;var e=cue(),t=Jh(),r=hi(),n=cf(),i=Zv(),s=Zh(),o=Object.prototype,a=o.hasOwnProperty;function u(c,f){var h=r(c),v=!h&&t(c),y=!h&&!v&&n(c),m=!h&&!v&&!y&&s(c),_=h||v||y||m,x=_?e(c.length,String):[],S=x.length;for(var P in c)(f||a.call(c,P))&&!(_&&(P=="length"||y&&(P=="offset"||P=="parent")||m&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||i(P,S)))&&x.push(P);return x}return Bb=u,Bb}var zb,A6;function eg(){if(A6)return zb;A6=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return zb=t,zb}var Vb,T6;function aG(){if(T6)return Vb;T6=1;function e(t,r){return function(n){return t(r(n))}}return Vb=e,Vb}var Gb,P6;function due(){if(P6)return Gb;P6=1;var e=aG(),t=e(Object.keys,Object);return Gb=t,Gb}var $b,C6;function aA(){if(C6)return $b;C6=1;var e=eg(),t=due(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return $b=i,$b}var Ub,O6;function lu(){if(O6)return Ub;O6=1;var e=Yh(),t=sA();function r(n){return n!=null&&t(n.length)&&!e(n)}return Ub=r,Ub}var jb,I6;function Wu(){if(I6)return jb;I6=1;var e=oG(),t=aA(),r=lu();function n(i){return r(i)?e(i):t(i)}return jb=n,jb}var Hb,R6;function pue(){if(R6)return Hb;R6=1;var e=Kh(),t=Wu();function r(n,i){return n&&e(i,t(i),n)}return Hb=r,Hb}var Wb,k6;function vue(){if(k6)return Wb;k6=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return Wb=e,Wb}var Xb,M6;function gue(){if(M6)return Xb;M6=1;var e=xo(),t=eg(),r=vue(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!e(o))return r(o);var a=t(o),u=[];for(var c in o)c=="constructor"&&(a||!i.call(o,c))||u.push(c);return u}return Xb=s,Xb}var Yb,L6;function $c(){if(L6)return Yb;L6=1;var e=oG(),t=gue(),r=lu();function n(i){return r(i)?e(i,!0):t(i)}return Yb=n,Yb}var Kb,N6;function mue(){if(N6)return Kb;N6=1;var e=Kh(),t=$c();function r(n,i){return n&&e(i,t(i),n)}return Kb=r,Kb}var lh={exports:{}};lh.exports;var q6;function uG(){return q6||(q6=1,function(e,t){var r=Zo(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,v=a?a(h):new c.constructor(h);return c.copy(v),v}e.exports=u}(lh,lh.exports)),lh.exports}var Jb,D6;function cG(){if(D6)return Jb;D6=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return Jb=e,Jb}var Zb,F6;function lG(){if(F6)return Zb;F6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var a=t[n];r(a,n,t)&&(o[s++]=a)}return o}return Zb=e,Zb}var Qb,B6;function fG(){if(B6)return Qb;B6=1;function e(){return[]}return Qb=e,Qb}var e1,z6;function uA(){if(z6)return e1;z6=1;var e=lG(),t=fG(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return n.call(o,a)}))}:t;return e1=s,e1}var t1,V6;function yue(){if(V6)return t1;V6=1;var e=Kh(),t=uA();function r(n,i){return e(n,t(n),i)}return t1=r,t1}var r1,G6;function cA(){if(G6)return r1;G6=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return r1=e,r1}var n1,$6;function tg(){if($6)return n1;$6=1;var e=aG(),t=e(Object.getPrototypeOf,Object);return n1=t,n1}var i1,U6;function hG(){if(U6)return i1;U6=1;var e=cA(),t=tg(),r=uA(),n=fG(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,r(o)),o=t(o);return a}:n;return i1=s,i1}var s1,j6;function _ue(){if(j6)return s1;j6=1;var e=Kh(),t=hG();function r(n,i){return e(n,t(n),i)}return s1=r,s1}var o1,H6;function dG(){if(H6)return o1;H6=1;var e=cA(),t=hi();function r(n,i,s){var o=i(n);return t(n)?o:e(o,s(n))}return o1=r,o1}var a1,W6;function pG(){if(W6)return a1;W6=1;var e=dG(),t=uA(),r=Wu();function n(i){return e(i,r,t)}return a1=n,a1}var u1,X6;function bue(){if(X6)return u1;X6=1;var e=dG(),t=hG(),r=$c();function n(i){return e(i,r,t)}return u1=n,u1}var c1,Y6;function wue(){if(Y6)return c1;Y6=1;var e=Gc(),t=Zo(),r=e(t,"DataView");return c1=r,c1}var l1,K6;function xue(){if(K6)return l1;K6=1;var e=Gc(),t=Zo(),r=e(t,"Promise");return l1=r,l1}var f1,J6;function vG(){if(J6)return f1;J6=1;var e=Gc(),t=Zo(),r=e(t,"Set");return f1=r,f1}var h1,Z6;function Sue(){if(Z6)return h1;Z6=1;var e=Gc(),t=Zo(),r=e(t,"WeakMap");return h1=r,h1}var d1,Q6;function lf(){if(Q6)return d1;Q6=1;var e=wue(),t=rA(),r=xue(),n=vG(),i=Sue(),s=Vc(),o=iG(),a="[object Map]",u="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",v="[object DataView]",y=o(e),m=o(t),_=o(r),x=o(n),S=o(i),P=s;return(e&&P(new e(new ArrayBuffer(1)))!=v||t&&P(new t)!=a||r&&P(r.resolve())!=c||n&&P(new n)!=f||i&&P(new i)!=h)&&(P=function(T){var E=s(T),O=E==u?T.constructor:void 0,N=O?o(O):"";if(N)switch(N){case y:return v;case m:return a;case _:return c;case x:return f;case S:return h}return E}),d1=P,d1}var p1,eB;function Eue(){if(eB)return p1;eB=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return p1=r,p1}var v1,tB;function gG(){if(tB)return v1;tB=1;var e=Zo(),t=e.Uint8Array;return v1=t,v1}var g1,rB;function lA(){if(rB)return g1;rB=1;var e=gG();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return g1=t,g1}var m1,nB;function Aue(){if(nB)return m1;nB=1;var e=lA();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return m1=t,m1}var y1,iB;function Tue(){if(iB)return y1;iB=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return y1=t,y1}var _1,sB;function Pue(){if(sB)return _1;sB=1;var e=uf(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return _1=n,_1}var b1,oB;function mG(){if(oB)return b1;oB=1;var e=lA();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return b1=t,b1}var w1,aB;function Cue(){if(aB)return w1;aB=1;var e=lA(),t=Aue(),r=Tue(),n=Pue(),i=mG(),s="[object Boolean]",o="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",f="[object Set]",h="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",P="[object Int16Array]",T="[object Int32Array]",E="[object Uint8Array]",O="[object Uint8ClampedArray]",N="[object Uint16Array]",d="[object Uint32Array]";function C(R,k,B){var z=R.constructor;switch(k){case y:return e(R);case s:case o:return new z(+R);case m:return t(R,B);case _:case x:case S:case P:case T:case E:case O:case N:case d:return i(R,B);case a:return new z;case u:case h:return new z(R);case c:return r(R);case f:return new z;case v:return n(R)}}return w1=C,w1}var x1,uB;function yG(){if(uB)return x1;uB=1;var e=xo(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return x1=r,x1}var S1,cB;function _G(){if(cB)return S1;cB=1;var e=yG(),t=tg(),r=eg();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return S1=n,S1}var E1,lB;function Oue(){if(lB)return E1;lB=1;var e=lf(),t=Ra(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return E1=n,E1}var A1,fB;function Iue(){if(fB)return A1;fB=1;var e=Oue(),t=Qv(),r=oA(),n=r&&r.isMap,i=n?t(n):e;return A1=i,A1}var T1,hB;function Rue(){if(hB)return T1;hB=1;var e=lf(),t=Ra(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return T1=n,T1}var P1,dB;function kue(){if(dB)return P1;dB=1;var e=Rue(),t=Qv(),r=oA(),n=r&&r.isSet,i=n?t(n):e;return P1=i,P1}var C1,pB;function bG(){if(pB)return C1;pB=1;var e=Yv(),t=iA(),r=Jv(),n=pue(),i=mue(),s=uG(),o=cG(),a=yue(),u=_ue(),c=pG(),f=bue(),h=lf(),v=Eue(),y=Cue(),m=_G(),_=hi(),x=cf(),S=Iue(),P=xo(),T=kue(),E=Wu(),O=$c(),N=1,d=2,C=4,R="[object Arguments]",k="[object Array]",B="[object Boolean]",z="[object Date]",U="[object Error]",Y="[object Function]",oe="[object GeneratorFunction]",W="[object Map]",D="[object Number]",F="[object Object]",H="[object RegExp]",ie="[object Set]",se="[object String]",we="[object Symbol]",ge="[object WeakMap]",te="[object ArrayBuffer]",ue="[object DataView]",re="[object Float32Array]",Q="[object Float64Array]",le="[object Int8Array]",Ge="[object Int16Array]",Ne="[object Int32Array]",Oe="[object Uint8Array]",Ze="[object Uint8ClampedArray]",$e="[object Uint16Array]",q="[object Uint32Array]",G={};G[R]=G[k]=G[te]=G[ue]=G[B]=G[z]=G[re]=G[Q]=G[le]=G[Ge]=G[Ne]=G[W]=G[D]=G[F]=G[H]=G[ie]=G[se]=G[we]=G[Oe]=G[Ze]=G[$e]=G[q]=!0,G[U]=G[Y]=G[ge]=!1;function K(J,Ee,fe,Te,Ce,Ue){var Le,Ie=Ee&N,Se=Ee&d,Ye=Ee&C;if(fe&&(Le=Ce?fe(J,Te,Ce,Ue):fe(J)),Le!==void 0)return Le;if(!P(J))return J;var ft=_(J);if(ft){if(Le=v(J),!Ie)return o(J,Le)}else{var bt=h(J),dt=bt==Y||bt==oe;if(x(J))return s(J,Ie);if(bt==F||bt==R||dt&&!Ce){if(Le=Se||dt?{}:m(J),!Ie)return Se?u(J,i(Le,J)):a(J,n(Le,J))}else{if(!G[bt])return Ce?J:{};Le=y(J,bt,Ie)}}Ue||(Ue=new e);var it=Ue.get(J);if(it)return it;Ue.set(J,Le),T(J)?J.forEach(function(sr){Le.add(K(sr,Ee,fe,sr,J,Ue))}):S(J)&&J.forEach(function(sr,vr){Le.set(vr,K(sr,Ee,fe,vr,J,Ue))});var Jt=Ye?Se?f:c:Se?O:E,Sr=ft?void 0:Jt(J);return t(Sr||J,function(sr,vr){Sr&&(vr=sr,sr=J[vr]),r(Le,vr,K(sr,Ee,fe,vr,J,Ue))}),Le}return C1=K,C1}var O1,vB;function Mue(){if(vB)return O1;vB=1;var e=bG(),t=4;function r(n){return e(n,t)}return O1=r,O1}var I1,gB;function fA(){if(gB)return I1;gB=1;function e(t){return function(){return t}}return I1=e,I1}var R1,mB;function Lue(){if(mB)return R1;mB=1;function e(t){return function(r,n,i){for(var s=-1,o=Object(r),a=i(r),u=a.length;u--;){var c=a[t?u:++s];if(n(o[c],c,o)===!1)break}return r}}return R1=e,R1}var k1,yB;function hA(){if(yB)return k1;yB=1;var e=Lue(),t=e();return k1=t,k1}var M1,_B;function dA(){if(_B)return M1;_B=1;var e=hA(),t=Wu();function r(n,i){return n&&e(n,i,t)}return M1=r,M1}var L1,bB;function Nue(){if(bB)return L1;bB=1;var e=lu();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var o=i.length,a=n?o:-1,u=Object(i);(n?a--:++a<o)&&s(u[a],a,u)!==!1;);return i}}return L1=t,L1}var N1,wB;function rg(){if(wB)return N1;wB=1;var e=dA(),t=Nue(),r=t(e);return N1=r,N1}var q1,xB;function Uc(){if(xB)return q1;xB=1;function e(t){return t}return q1=e,q1}var D1,SB;function wG(){if(SB)return D1;SB=1;var e=Uc();function t(r){return typeof r=="function"?r:e}return D1=t,D1}var F1,EB;function xG(){if(EB)return F1;EB=1;var e=iA(),t=rg(),r=wG(),n=hi();function i(s,o){var a=n(s)?e:t;return a(s,r(o))}return F1=i,F1}var B1,AB;function SG(){return AB||(AB=1,B1=xG()),B1}var z1,TB;function que(){if(TB)return z1;TB=1;var e=rg();function t(r,n){var i=[];return e(r,function(s,o,a){n(s,o,a)&&i.push(s)}),i}return z1=t,z1}var V1,PB;function Due(){if(PB)return V1;PB=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return V1=t,V1}var G1,CB;function Fue(){if(CB)return G1;CB=1;function e(t){return this.__data__.has(t)}return G1=e,G1}var $1,OB;function EG(){if(OB)return $1;OB=1;var e=nA(),t=Due(),r=Fue();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,$1=n,$1}var U1,IB;function Bue(){if(IB)return U1;IB=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return U1=e,U1}var j1,RB;function AG(){if(RB)return j1;RB=1;function e(t,r){return t.has(r)}return j1=e,j1}var H1,kB;function TG(){if(kB)return H1;kB=1;var e=EG(),t=Bue(),r=AG(),n=1,i=2;function s(o,a,u,c,f,h){var v=u&n,y=o.length,m=a.length;if(y!=m&&!(v&&m>y))return!1;var _=h.get(o),x=h.get(a);if(_&&x)return _==a&&x==o;var S=-1,P=!0,T=u&i?new e:void 0;for(h.set(o,a),h.set(a,o);++S<y;){var E=o[S],O=a[S];if(c)var N=v?c(O,E,S,a,o,h):c(E,O,S,o,a,h);if(N!==void 0){if(N)continue;P=!1;break}if(T){if(!t(a,function(d,C){if(!r(T,C)&&(E===d||f(E,d,u,c,h)))return T.push(C)})){P=!1;break}}else if(!(E===O||f(E,O,u,c,h))){P=!1;break}}return h.delete(o),h.delete(a),P}return H1=s,H1}var W1,MB;function zue(){if(MB)return W1;MB=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return W1=e,W1}var X1,LB;function pA(){if(LB)return X1;LB=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return X1=e,X1}var Y1,NB;function Vue(){if(NB)return Y1;NB=1;var e=uf(),t=gG(),r=af(),n=TG(),i=zue(),s=pA(),o=1,a=2,u="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Map]",v="[object Number]",y="[object RegExp]",m="[object Set]",_="[object String]",x="[object Symbol]",S="[object ArrayBuffer]",P="[object DataView]",T=e?e.prototype:void 0,E=T?T.valueOf:void 0;function O(N,d,C,R,k,B,z){switch(C){case P:if(N.byteLength!=d.byteLength||N.byteOffset!=d.byteOffset)return!1;N=N.buffer,d=d.buffer;case S:return!(N.byteLength!=d.byteLength||!B(new t(N),new t(d)));case u:case c:case v:return r(+N,+d);case f:return N.name==d.name&&N.message==d.message;case y:case _:return N==d+"";case h:var U=i;case m:var Y=R&o;if(U||(U=s),N.size!=d.size&&!Y)return!1;var oe=z.get(N);if(oe)return oe==d;R|=a,z.set(N,d);var W=n(U(N),U(d),R,k,B,z);return z.delete(N),W;case x:if(E)return E.call(N)==E.call(d)}return!1}return Y1=O,Y1}var K1,qB;function Gue(){if(qB)return K1;qB=1;var e=pG(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a,u,c,f){var h=a&t,v=e(s),y=v.length,m=e(o),_=m.length;if(y!=_&&!h)return!1;for(var x=y;x--;){var S=v[x];if(!(h?S in o:n.call(o,S)))return!1}var P=f.get(s),T=f.get(o);if(P&&T)return P==o&&T==s;var E=!0;f.set(s,o),f.set(o,s);for(var O=h;++x<y;){S=v[x];var N=s[S],d=o[S];if(u)var C=h?u(d,N,S,o,s,f):u(N,d,S,s,o,f);if(!(C===void 0?N===d||c(N,d,a,u,f):C)){E=!1;break}O||(O=S=="constructor")}if(E&&!O){var R=s.constructor,k=o.constructor;R!=k&&"constructor"in s&&"constructor"in o&&!(typeof R=="function"&&R instanceof R&&typeof k=="function"&&k instanceof k)&&(E=!1)}return f.delete(s),f.delete(o),E}return K1=i,K1}var J1,DB;function $ue(){if(DB)return J1;DB=1;var e=Yv(),t=TG(),r=Vue(),n=Gue(),i=lf(),s=hi(),o=cf(),a=Zh(),u=1,c="[object Arguments]",f="[object Array]",h="[object Object]",v=Object.prototype,y=v.hasOwnProperty;function m(_,x,S,P,T,E){var O=s(_),N=s(x),d=O?f:i(_),C=N?f:i(x);d=d==c?h:d,C=C==c?h:C;var R=d==h,k=C==h,B=d==C;if(B&&o(_)){if(!o(x))return!1;O=!0,R=!1}if(B&&!R)return E||(E=new e),O||a(_)?t(_,x,S,P,T,E):r(_,x,d,S,P,T,E);if(!(S&u)){var z=R&&y.call(_,"__wrapped__"),U=k&&y.call(x,"__wrapped__");if(z||U){var Y=z?_.value():_,oe=U?x.value():x;return E||(E=new e),T(Y,oe,S,P,E)}}return B?(E||(E=new e),n(_,x,S,P,T,E)):!1}return J1=m,J1}var Z1,FB;function PG(){if(FB)return Z1;FB=1;var e=$ue(),t=Ra();function r(n,i,s,o,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,o,r,a)}return Z1=r,Z1}var Q1,BB;function Uue(){if(BB)return Q1;BB=1;var e=Yv(),t=PG(),r=1,n=2;function i(s,o,a,u){var c=a.length,f=c,h=!u;if(s==null)return!f;for(s=Object(s);c--;){var v=a[c];if(h&&v[2]?v[1]!==s[v[0]]:!(v[0]in s))return!1}for(;++c<f;){v=a[c];var y=v[0],m=s[y],_=v[1];if(h&&v[2]){if(m===void 0&&!(y in s))return!1}else{var x=new e;if(u)var S=u(m,_,y,s,o,x);if(!(S===void 0?t(_,m,r|n,u,x):S))return!1}}return!0}return Q1=i,Q1}var ew,zB;function CG(){if(zB)return ew;zB=1;var e=xo();function t(r){return r===r&&!e(r)}return ew=t,ew}var tw,VB;function jue(){if(VB)return tw;VB=1;var e=CG(),t=Wu();function r(n){for(var i=t(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,e(a)]}return i}return tw=r,tw}var rw,GB;function OG(){if(GB)return rw;GB=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return rw=e,rw}var nw,$B;function Hue(){if($B)return nw;$B=1;var e=Uue(),t=jue(),r=OG();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return nw=n,nw}var iw,UB;function ff(){if(UB)return iw;UB=1;var e=Vc(),t=Ra(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return iw=n,iw}var sw,jB;function vA(){if(jB)return sw;jB=1;var e=hi(),t=ff(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return sw=i,sw}var ow,HB;function Wue(){if(HB)return ow;HB=1;var e=nA(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],u=s.cache;if(u.has(a))return u.get(a);var c=n.apply(this,o);return s.cache=u.set(a,c)||u,c};return s.cache=new(r.Cache||e),s}return r.Cache=e,ow=r,ow}var aw,WB;function Xue(){if(WB)return aw;WB=1;var e=Wue(),t=500;function r(n){var i=e(n,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return aw=r,aw}var uw,XB;function Yue(){if(XB)return uw;XB=1;var e=Xue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,u,c){s.push(u?c.replace(r,"$1"):a||o)}),s});return uw=n,uw}var cw,YB;function ng(){if(YB)return cw;YB=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return cw=e,cw}var lw,KB;function Kue(){if(KB)return lw;KB=1;var e=uf(),t=ng(),r=hi(),n=ff(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return s?s.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return lw=o,lw}var fw,JB;function IG(){if(JB)return fw;JB=1;var e=Kue();function t(r){return r==null?"":e(r)}return fw=t,fw}var hw,ZB;function ig(){if(ZB)return hw;ZB=1;var e=hi(),t=vA(),r=Yue(),n=IG();function i(s,o){return e(s)?s:t(s,o)?[s]:r(n(s))}return hw=i,hw}var dw,QB;function Qh(){if(QB)return dw;QB=1;var e=ff();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return dw=t,dw}var pw,e5;function sg(){if(e5)return pw;e5=1;var e=ig(),t=Qh();function r(n,i){i=e(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[t(i[s++])];return s&&s==o?n:void 0}return pw=r,pw}var vw,t5;function Jue(){if(t5)return vw;t5=1;var e=sg();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return vw=t,vw}var gw,r5;function Zue(){if(r5)return gw;r5=1;function e(t,r){return t!=null&&r in Object(t)}return gw=e,gw}var mw,n5;function RG(){if(n5)return mw;n5=1;var e=ig(),t=Jh(),r=hi(),n=Zv(),i=sA(),s=Qh();function o(a,u,c){u=e(u,a);for(var f=-1,h=u.length,v=!1;++f<h;){var y=s(u[f]);if(!(v=a!=null&&c(a,y)))break;a=a[y]}return v||++f!=h?v:(h=a==null?0:a.length,!!h&&i(h)&&n(y,h)&&(r(a)||t(a)))}return mw=o,mw}var yw,i5;function kG(){if(i5)return yw;i5=1;var e=Zue(),t=RG();function r(n,i){return n!=null&&t(n,i,e)}return yw=r,yw}var _w,s5;function Que(){if(s5)return _w;s5=1;var e=PG(),t=Jue(),r=kG(),n=vA(),i=CG(),s=OG(),o=Qh(),a=1,u=2;function c(f,h){return n(f)&&i(h)?s(o(f),h):function(v){var y=t(v,f);return y===void 0&&y===h?r(v,f):e(h,y,a|u)}}return _w=c,_w}var bw,o5;function MG(){if(o5)return bw;o5=1;function e(t){return function(r){return r==null?void 0:r[t]}}return bw=e,bw}var ww,a5;function ece(){if(a5)return ww;a5=1;var e=sg();function t(r){return function(n){return e(n,r)}}return ww=t,ww}var xw,u5;function tce(){if(u5)return xw;u5=1;var e=MG(),t=ece(),r=vA(),n=Qh();function i(s){return r(s)?e(n(s)):t(s)}return xw=i,xw}var Sw,c5;function fu(){if(c5)return Sw;c5=1;var e=Hue(),t=Que(),r=Uc(),n=hi(),i=tce();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return Sw=s,Sw}var Ew,l5;function LG(){if(l5)return Ew;l5=1;var e=lG(),t=que(),r=fu(),n=hi();function i(s,o){var a=n(s)?e:t;return a(s,r(o,3))}return Ew=i,Ew}var Aw,f5;function rce(){if(f5)return Aw;f5=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return Aw=r,Aw}var Tw,h5;function NG(){if(h5)return Tw;h5=1;var e=rce(),t=RG();function r(n,i){return n!=null&&t(n,i,e)}return Tw=r,Tw}var Pw,d5;function nce(){if(d5)return Pw;d5=1;var e=aA(),t=lf(),r=Jh(),n=hi(),i=lu(),s=cf(),o=eg(),a=Zh(),u="[object Map]",c="[object Set]",f=Object.prototype,h=f.hasOwnProperty;function v(y){if(y==null)return!0;if(i(y)&&(n(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||a(y)||r(y)))return!y.length;var m=t(y);if(m==u||m==c)return!y.size;if(o(y))return!e(y).length;for(var _ in y)if(h.call(y,_))return!1;return!0}return Pw=v,Pw}var Cw,p5;function qG(){if(p5)return Cw;p5=1;function e(t){return t===void 0}return Cw=e,Cw}var Ow,v5;function DG(){if(v5)return Ow;v5=1;var e=rg(),t=lu();function r(n,i){var s=-1,o=t(n)?Array(n.length):[];return e(n,function(a,u,c){o[++s]=i(a,u,c)}),o}return Ow=r,Ow}var Iw,g5;function FG(){if(g5)return Iw;g5=1;var e=ng(),t=fu(),r=DG(),n=hi();function i(s,o){var a=n(s)?e:r;return a(s,t(o,3))}return Iw=i,Iw}var Rw,m5;function ice(){if(m5)return Rw;m5=1;function e(t,r,n,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++s]);++s<o;)n=r(n,t[s],s,t);return n}return Rw=e,Rw}var kw,y5;function sce(){if(y5)return kw;y5=1;function e(t,r,n,i,s){return s(t,function(o,a,u){n=i?(i=!1,o):r(n,o,a,u)}),n}return kw=e,kw}var Mw,_5;function BG(){if(_5)return Mw;_5=1;var e=ice(),t=rg(),r=fu(),n=sce(),i=hi();function s(o,a,u){var c=i(o)?e:n,f=arguments.length<3;return c(o,r(a,4),u,f,t)}return Mw=s,Mw}var Lw,b5;function oce(){if(b5)return Lw;b5=1;var e=Vc(),t=hi(),r=Ra(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return Lw=i,Lw}var Nw,w5;function ace(){if(w5)return Nw;w5=1;var e=MG(),t=e("length");return Nw=t,Nw}var qw,x5;function uce(){if(x5)return qw;x5=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function u(c){return a.test(c)}return qw=u,qw}var Dw,S5;function cce(){if(S5)return Dw;S5=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",f="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",m=c+"?",_="["+s+"]?",x="(?:"+y+"(?:"+[f,h,v].join("|")+")"+_+m+")*",S=_+m+x,P="(?:"+[f+a+"?",a,h,v,o].join("|")+")",T=RegExp(u+"(?="+u+")|"+P+S,"g");function E(O){for(var N=T.lastIndex=0;T.test(O);)++N;return N}return Dw=E,Dw}var Fw,E5;function lce(){if(E5)return Fw;E5=1;var e=ace(),t=uce(),r=cce();function n(i){return t(i)?r(i):e(i)}return Fw=n,Fw}var Bw,A5;function fce(){if(A5)return Bw;A5=1;var e=aA(),t=lf(),r=lu(),n=oce(),i=lce(),s="[object Map]",o="[object Set]";function a(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var c=t(u);return c==s||c==o?u.size:e(u).length}return Bw=a,Bw}var zw,T5;function hce(){if(T5)return zw;T5=1;var e=iA(),t=yG(),r=dA(),n=fu(),i=tg(),s=hi(),o=cf(),a=Yh(),u=xo(),c=Zh();function f(h,v,y){var m=s(h),_=m||o(h)||c(h);if(v=n(v,4),y==null){var x=h&&h.constructor;_?y=m?new x:[]:u(h)?y=a(x)?t(i(h)):{}:y={}}return(_?e:r)(h,function(S,P,T){return v(y,S,P,T)}),y}return zw=f,zw}var Vw,P5;function dce(){if(P5)return Vw;P5=1;var e=uf(),t=Jh(),r=hi(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return Vw=i,Vw}var Gw,C5;function gA(){if(C5)return Gw;C5=1;var e=cA(),t=dce();function r(n,i,s,o,a){var u=-1,c=n.length;for(s||(s=t),a||(a=[]);++u<c;){var f=n[u];i>0&&s(f)?i>1?r(f,i-1,s,o,a):e(a,f):o||(a[a.length]=f)}return a}return Gw=r,Gw}var $w,O5;function pce(){if(O5)return $w;O5=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return $w=e,$w}var Uw,I5;function zG(){if(I5)return Uw;I5=1;var e=pce(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,a=-1,u=t(o.length-i,0),c=Array(u);++a<u;)c[a]=o[i+a];a=-1;for(var f=Array(i+1);++a<i;)f[a]=o[a];return f[i]=s(c),e(n,this,f)}}return Uw=r,Uw}var jw,R5;function vce(){if(R5)return jw;R5=1;var e=fA(),t=sG(),r=Uc(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return jw=n,jw}var Hw,k5;function gce(){if(k5)return Hw;k5=1;var e=800,t=16,r=Date.now;function n(i){var s=0,o=0;return function(){var a=r(),u=t-(a-o);if(o=a,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Hw=n,Hw}var Ww,M5;function VG(){if(M5)return Ww;M5=1;var e=vce(),t=gce(),r=t(e);return Ww=r,Ww}var Xw,L5;function og(){if(L5)return Xw;L5=1;var e=Uc(),t=zG(),r=VG();function n(i,s){return r(t(i,s,e),i+"")}return Xw=n,Xw}var Yw,N5;function GG(){if(N5)return Yw;N5=1;function e(t,r,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(t[o],o,t))return o;return-1}return Yw=e,Yw}var Kw,q5;function mce(){if(q5)return Kw;q5=1;function e(t){return t!==t}return Kw=e,Kw}var Jw,D5;function yce(){if(D5)return Jw;D5=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return Jw=e,Jw}var Zw,F5;function _ce(){if(F5)return Zw;F5=1;var e=GG(),t=mce(),r=yce();function n(i,s,o){return s===s?r(i,s,o):e(i,t,o)}return Zw=n,Zw}var Qw,B5;function bce(){if(B5)return Qw;B5=1;var e=_ce();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return Qw=t,Qw}var ex,z5;function wce(){if(z5)return ex;z5=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return ex=e,ex}var tx,V5;function xce(){if(V5)return tx;V5=1;function e(){}return tx=e,tx}var rx,G5;function Sce(){if(G5)return rx;G5=1;var e=vG(),t=xce(),r=pA(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return rx=i,rx}var nx,$5;function Ece(){if($5)return nx;$5=1;var e=EG(),t=bce(),r=wce(),n=AG(),i=Sce(),s=pA(),o=200;function a(u,c,f){var h=-1,v=t,y=u.length,m=!0,_=[],x=_;if(f)m=!1,v=r;else if(y>=o){var S=c?null:i(u);if(S)return s(S);m=!1,v=n,x=new e}else x=c?[]:_;e:for(;++h<y;){var P=u[h],T=c?c(P):P;if(P=f||P!==0?P:0,m&&T===T){for(var E=x.length;E--;)if(x[E]===T)continue e;c&&x.push(T),_.push(P)}else v(x,T,f)||(x!==_&&x.push(T),_.push(P))}return _}return nx=a,nx}var ix,U5;function $G(){if(U5)return ix;U5=1;var e=lu(),t=Ra();function r(n){return t(n)&&e(n)}return ix=r,ix}var sx,j5;function Ace(){if(j5)return sx;j5=1;var e=gA(),t=og(),r=Ece(),n=$G(),i=t(function(s){return r(e(s,1,n,!0))});return sx=i,sx}var ox,H5;function Tce(){if(H5)return ox;H5=1;var e=ng();function t(r,n){return e(n,function(i){return r[i]})}return ox=t,ox}var ax,W5;function UG(){if(W5)return ax;W5=1;var e=Tce(),t=Wu();function r(n){return n==null?[]:e(n,t(n))}return ax=r,ax}var ux,X5;function So(){if(X5)return ux;X5=1;var e;if(typeof tA=="function")try{e={clone:Mue(),constant:fA(),each:SG(),filter:LG(),has:NG(),isArray:hi(),isEmpty:nce(),isFunction:Yh(),isUndefined:qG(),keys:Wu(),map:FG(),reduce:BG(),size:fce(),transform:hce(),union:Ace(),values:UG()}}catch{}return e||(e=window._),ux=e,ux}var cx,Y5;function mA(){if(Y5)return cx;Y5=1;var e=So();cx=i;var t="\0",r="\0",n="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._in[h])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._out[h])})},i.prototype.setNodes=function(f,h){var v=arguments,y=this;return e.each(f,function(m){v.length>1?y.setNode(m,h):y.setNode(m)}),this},i.prototype.setNode=function(f,h){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=h),this):(this._nodes[f]=arguments.length>1?h:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var h=this;if(e.has(this._nodes,f)){var v=function(y){h.removeEdge(h._edgeObjs[y])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(y){h.setParent(y)}),delete this._children[f]),e.each(e.keys(this._in[f]),v),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),v),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(h))h=r;else{h+="";for(var v=h;!e.isUndefined(v);v=this.parent(v))if(v===f)throw new Error("Setting "+h+" as parent of "+f+" would create a cycle");this.setNode(h)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=h,this._children[h][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var h=this._parent[f];if(h!==r)return h}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=r),this._isCompound){var h=this._children[f];if(h)return e.keys(h)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var h=this._preds[f];if(h)return e.keys(h)},i.prototype.successors=function(f){var h=this._sucs[f];if(h)return e.keys(h)},i.prototype.neighbors=function(f){var h=this.predecessors(f);if(h)return e.union(h,this.successors(f))},i.prototype.isLeaf=function(f){var h;return this.isDirected()?h=this.successors(f):h=this.neighbors(f),h.length===0},i.prototype.filterNodes=function(f){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var v=this;e.each(this._nodes,function(_,x){f(x)&&h.setNode(x,_)}),e.each(this._edgeObjs,function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdge(_,v.edge(_))});var y={};function m(_){var x=v.parent(_);return x===void 0||h.hasNode(x)?(y[_]=x,x):x in y?y[x]:m(x)}return this._isCompound&&e.each(h.nodes(),function(_){h.setParent(_,m(_))}),h},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,h){var v=this,y=arguments;return e.reduce(f,function(m,_){return y.length>1?v.setEdge(m,_,h):v.setEdge(m,_),_}),this},i.prototype.setEdge=function(){var f,h,v,y,m=!1,_=arguments[0];typeof _=="object"&&_!==null&&"v"in _?(f=_.v,h=_.w,v=_.name,arguments.length===2&&(y=arguments[1],m=!0)):(f=_,h=arguments[1],v=arguments[3],arguments.length>2&&(y=arguments[2],m=!0)),f=""+f,h=""+h,e.isUndefined(v)||(v=""+v);var x=a(this._isDirected,f,h,v);if(e.has(this._edgeLabels,x))return m&&(this._edgeLabels[x]=y),this;if(!e.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(h),this._edgeLabels[x]=m?y:this._defaultEdgeLabelFn(f,h,v);var S=u(this._isDirected,f,h,v);return f=S.v,h=S.w,Object.freeze(S),this._edgeObjs[x]=S,s(this._preds[h],f),s(this._sucs[f],h),this._in[h][x]=S,this._out[f][x]=S,this._edgeCount++,this},i.prototype.edge=function(f,h,v){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,v);return this._edgeLabels[y]},i.prototype.hasEdge=function(f,h,v){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,v);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(f,h,v){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,v),m=this._edgeObjs[y];return m&&(f=m.v,h=m.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[h],f),o(this._sucs[f],h),delete this._in[h][y],delete this._out[f][y],this._edgeCount--),this},i.prototype.inEdges=function(f,h){var v=this._in[f];if(v){var y=e.values(v);return h?e.filter(y,function(m){return m.v===h}):y}},i.prototype.outEdges=function(f,h){var v=this._out[f];if(v){var y=e.values(v);return h?e.filter(y,function(m){return m.w===h}):y}},i.prototype.nodeEdges=function(f,h){var v=this.inEdges(f,h);if(v)return v.concat(this.outEdges(f,h))};function s(f,h){f[h]?f[h]++:f[h]=1}function o(f,h){--f[h]||delete f[h]}function a(f,h,v,y){var m=""+h,_=""+v;if(!f&&m>_){var x=m;m=_,_=x}return m+n+_+n+(e.isUndefined(y)?t:y)}function u(f,h,v,y){var m=""+h,_=""+v;if(!f&&m>_){var x=m;m=_,_=x}var S={v:m,w:_};return y&&(S.name=y),S}function c(f,h){return a(f,h.v,h.w,h.name)}return cx}var lx,K5;function Pce(){return K5||(K5=1,lx="2.1.8"),lx}var fx,J5;function Cce(){return J5||(J5=1,fx={Graph:mA(),version:Pce()}),fx}var hx,Z5;function Oce(){if(Z5)return hx;Z5=1;var e=So(),t=mA();hx={write:r,read:s};function r(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function n(o){return e.map(o.nodes(),function(a){var u=o.node(a),c=o.parent(a),f={v:a};return e.isUndefined(u)||(f.value=u),e.isUndefined(c)||(f.parent=c),f})}function i(o){return e.map(o.edges(),function(a){var u=o.edge(a),c={v:a.v,w:a.w};return e.isUndefined(a.name)||(c.name=a.name),e.isUndefined(u)||(c.value=u),c})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(o.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return hx}var dx,Q5;function Ice(){if(Q5)return dx;Q5=1;var e=So();dx=t;function t(r){var n={},i=[],s;function o(a){e.has(n,a)||(n[a]=!0,s.push(a),e.each(r.successors(a),o),e.each(r.predecessors(a),o))}return e.each(r.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return dx}var px,e8;function jG(){if(e8)return px;e8=1;var e=So();px=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var s=this._arr,o=s.length;return i[r]=o,s.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,s=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,s<n.length&&(o=n[s].priority<n[o].priority?s:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,s;r!==0&&(s=r>>1,!(n[s].priority<i));)this._swap(r,s),r=s},t.prototype._swap=function(r,n){var i=this._arr,s=this._keyIndices,o=i[r],a=i[n];i[r]=a,i[n]=o,s[a.key]=r,s[o.key]=n},px}var vx,t8;function HG(){if(t8)return vx;t8=1;var e=So(),t=jG();vx=n;var r=e.constant(1);function n(s,o,a,u){return i(s,String(o),a||r,u||function(c){return s.outEdges(c)})}function i(s,o,a,u){var c={},f=new t,h,v,y=function(m){var _=m.v!==h?m.v:m.w,x=c[_],S=a(m),P=v.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+S);P<x.distance&&(x.distance=P,x.predecessor=h,f.decrease(_,P))};for(s.nodes().forEach(function(m){var _=m===o?0:Number.POSITIVE_INFINITY;c[m]={distance:_},f.add(m,_)});f.size()>0&&(h=f.removeMin(),v=c[h],v.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(y);return c}return vx}var gx,r8;function Rce(){if(r8)return gx;r8=1;var e=HG(),t=So();gx=r;function r(n,i,s){return t.transform(n.nodes(),function(o,a){o[a]=e(n,a,i,s)},{})}return gx}var mx,n8;function WG(){if(n8)return mx;n8=1;var e=So();mx=t;function t(r){var n=0,i=[],s={},o=[];function a(u){var c=s[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(v){e.has(s,v)?s[v].onStack&&(c.lowlink=Math.min(c.lowlink,s[v].index)):(a(v),c.lowlink=Math.min(c.lowlink,s[v].lowlink))}),c.lowlink===c.index){var f=[],h;do h=i.pop(),s[h].onStack=!1,f.push(h);while(u!==h);o.push(f)}}return r.nodes().forEach(function(u){e.has(s,u)||a(u)}),o}return mx}var yx,i8;function kce(){if(i8)return yx;i8=1;var e=So(),t=WG();yx=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return yx}var _x,s8;function Mce(){if(s8)return _x;s8=1;var e=So();_x=r;var t=e.constant(1);function r(i,s,o){return n(i,s||t,o||function(a){return i.outEdges(a)})}function n(i,s,o){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(f){c!==f&&(a[c][f]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(f){var h=f.v===c?f.w:f.v,v=s(f);a[c][h]={distance:v,predecessor:c}})}),u.forEach(function(c){var f=a[c];u.forEach(function(h){var v=a[h];u.forEach(function(y){var m=v[c],_=f[y],x=v[y],S=m.distance+_.distance;S<x.distance&&(x.distance=S,x.predecessor=_.predecessor)})})}),a}return _x}var bx,o8;function XG(){if(o8)return bx;o8=1;var e=So();bx=t,t.CycleException=r;function t(n){var i={},s={},o=[];function a(u){if(e.has(s,u))throw new r;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(n.predecessors(u),a),delete s[u],o.push(u))}if(e.each(n.sinks(),a),e.size(i)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,bx}var wx,a8;function Lce(){if(a8)return wx;a8=1;var e=XG();wx=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return wx}var xx,u8;function YG(){if(u8)return xx;u8=1;var e=So();xx=t;function t(n,i,s){e.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],u={};return e.each(i,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);r(n,c,s==="post",u,o,a)}),a}function r(n,i,s,o,a,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(a(i),function(c){r(n,c,s,o,a,u)}),s&&u.push(i))}return xx}var Sx,c8;function Nce(){if(c8)return Sx;c8=1;var e=YG();Sx=t;function t(r,n){return e(r,n,"post")}return Sx}var Ex,l8;function qce(){if(l8)return Ex;l8=1;var e=YG();Ex=t;function t(r,n){return e(r,n,"pre")}return Ex}var Ax,f8;function Dce(){if(f8)return Ax;f8=1;var e=So(),t=mA(),r=jG();Ax=n;function n(i,s){var o=new t,a={},u=new r,c;function f(v){var y=v.v===c?v.w:v.v,m=u.priority(y);if(m!==void 0){var _=s(v);_<m&&(a[y]=c,u.decrease(y,_))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(v){u.add(v,Number.POSITIVE_INFINITY),o.setNode(v)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),e.has(a,c))o.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(f)}return o}return Ax}var Tx,h8;function Fce(){return h8||(h8=1,Tx={components:Ice(),dijkstra:HG(),dijkstraAll:Rce(),findCycles:kce(),floydWarshall:Mce(),isAcyclic:Lce(),postorder:Nce(),preorder:qce(),prim:Dce(),tarjan:WG(),topsort:XG()}),Tx}var Px,d8;function KG(){if(d8)return Px;d8=1;var e=Cce();return Px={Graph:e.Graph,json:Oce(),alg:Fce(),version:e.version},Px}var Cx,p8;function Go(){if(p8)return Cx;p8=1;var e;if(typeof tA=="function")try{e=KG()}catch{}return e||(e=window.graphlib),Cx=e,Cx}var Ox,v8;function Bce(){if(v8)return Ox;v8=1;var e=bG(),t=1,r=4;function n(i){return e(i,t|r)}return Ox=n,Ox}var Ix,g8;function ag(){if(g8)return Ix;g8=1;var e=af(),t=lu(),r=Zv(),n=xo();function i(s,o,a){if(!n(a))return!1;var u=typeof o;return(u=="number"?t(a)&&r(o,a.length):u=="string"&&o in a)?e(a[o],s):!1}return Ix=i,Ix}var Rx,m8;function zce(){if(m8)return Rx;m8=1;var e=og(),t=af(),r=ag(),n=$c(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,u){a=Object(a);var c=-1,f=u.length,h=f>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(f=1);++c<f;)for(var v=u[c],y=n(v),m=-1,_=y.length;++m<_;){var x=y[m],S=a[x];(S===void 0||t(S,i[x])&&!s.call(a,x))&&(a[x]=v[x])}return a});return Rx=o,Rx}var kx,y8;function Vce(){if(y8)return kx;y8=1;var e=fu(),t=lu(),r=Wu();function n(i){return function(s,o,a){var u=Object(s);if(!t(s)){var c=e(o,3);s=r(s),o=function(h){return c(u[h],h,u)}}var f=i(s,o,a);return f>-1?u[c?s[f]:f]:void 0}}return kx=n,kx}var Mx,_8;function Gce(){if(_8)return Mx;_8=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Mx=t,Mx}var Lx,b8;function $ce(){if(b8)return Lx;b8=1;var e=Gce(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Lx=r,Lx}var Nx,w8;function Uce(){if(w8)return Nx;w8=1;var e=$ce(),t=xo(),r=ff(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return n;if(t(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=t(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=e(c);var h=s.test(c);return h||o.test(c)?a(c.slice(2),h?2:8):i.test(c)?n:+c}return Nx=u,Nx}var qx,x8;function JG(){if(x8)return qx;x8=1;var e=Uce(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var s=i<0?-1:1;return s*r}return i===i?i:0}return qx=n,qx}var Dx,S8;function jce(){if(S8)return Dx;S8=1;var e=JG();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return Dx=t,Dx}var Fx,E8;function Hce(){if(E8)return Fx;E8=1;var e=GG(),t=fu(),r=jce(),n=Math.max;function i(s,o,a){var u=s==null?0:s.length;if(!u)return-1;var c=a==null?0:r(a);return c<0&&(c=n(u+c,0)),e(s,t(o,3),c)}return Fx=i,Fx}var Bx,A8;function Wce(){if(A8)return Bx;A8=1;var e=Vce(),t=Hce(),r=e(t);return Bx=r,Bx}var zx,T8;function ZG(){if(T8)return zx;T8=1;var e=gA();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return zx=t,zx}var Vx,P8;function Xce(){if(P8)return Vx;P8=1;var e=hA(),t=wG(),r=$c();function n(i,s){return i==null?i:e(i,t(s),r)}return Vx=n,Vx}var Gx,C8;function Yce(){if(C8)return Gx;C8=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Gx=e,Gx}var $x,O8;function Kce(){if(O8)return $x;O8=1;var e=Kv(),t=dA(),r=fu();function n(i,s){var o={};return s=r(s,3),t(i,function(a,u,c){e(o,u,s(a,u,c))}),o}return $x=n,$x}var Ux,I8;function yA(){if(I8)return Ux;I8=1;var e=ff();function t(r,n,i){for(var s=-1,o=r.length;++s<o;){var a=r[s],u=n(a);if(u!=null&&(c===void 0?u===u&&!e(u):i(u,c)))var c=u,f=a}return f}return Ux=t,Ux}var jx,R8;function Jce(){if(R8)return jx;R8=1;function e(t,r){return t>r}return jx=e,jx}var Hx,k8;function Zce(){if(k8)return Hx;k8=1;var e=yA(),t=Jce(),r=Uc();function n(i){return i&&i.length?e(i,r,t):void 0}return Hx=n,Hx}var Wx,M8;function QG(){if(M8)return Wx;M8=1;var e=Kv(),t=af();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return Wx=r,Wx}var Xx,L8;function Qce(){if(L8)return Xx;L8=1;var e=Vc(),t=tg(),r=Ra(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,u=o.call(Object);function c(f){if(!r(f)||e(f)!=n)return!1;var h=t(f);if(h===null)return!0;var v=a.call(h,"constructor")&&h.constructor;return typeof v=="function"&&v instanceof v&&o.call(v)==u}return Xx=c,Xx}var Yx,N8;function e$(){if(N8)return Yx;N8=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return Yx=e,Yx}var Kx,q8;function ele(){if(q8)return Kx;q8=1;var e=Kh(),t=$c();function r(n){return e(n,t(n))}return Kx=r,Kx}var Jx,D8;function tle(){if(D8)return Jx;D8=1;var e=QG(),t=uG(),r=mG(),n=cG(),i=_G(),s=Jh(),o=hi(),a=$G(),u=cf(),c=Yh(),f=xo(),h=Qce(),v=Zh(),y=e$(),m=ele();function _(x,S,P,T,E,O,N){var d=y(x,P),C=y(S,P),R=N.get(C);if(R){e(x,P,R);return}var k=O?O(d,C,P+"",x,S,N):void 0,B=k===void 0;if(B){var z=o(C),U=!z&&u(C),Y=!z&&!U&&v(C);k=C,z||U||Y?o(d)?k=d:a(d)?k=n(d):U?(B=!1,k=t(C,!0)):Y?(B=!1,k=r(C,!0)):k=[]:h(C)||s(C)?(k=d,s(d)?k=m(d):(!f(d)||c(d))&&(k=i(C))):B=!1}B&&(N.set(C,k),E(k,C,T,O,N),N.delete(C)),e(x,P,k)}return Jx=_,Jx}var Zx,F8;function rle(){if(F8)return Zx;F8=1;var e=Yv(),t=QG(),r=hA(),n=tle(),i=xo(),s=$c(),o=e$();function a(u,c,f,h,v){u!==c&&r(c,function(y,m){if(v||(v=new e),i(y))n(u,c,m,f,a,h,v);else{var _=h?h(o(u,m),y,m+"",u,c,v):void 0;_===void 0&&(_=y),t(u,m,_)}},s)}return Zx=a,Zx}var Qx,B8;function nle(){if(B8)return Qx;B8=1;var e=og(),t=ag();function r(n){return e(function(i,s){var o=-1,a=s.length,u=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(u=n.length>3&&typeof u=="function"?(a--,u):void 0,c&&t(s[0],s[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++o<a;){var f=s[o];f&&n(i,f,o,u)}return i})}return Qx=r,Qx}var eS,z8;function ile(){if(z8)return eS;z8=1;var e=rle(),t=nle(),r=t(function(n,i,s){e(n,i,s)});return eS=r,eS}var tS,V8;function t$(){if(V8)return tS;V8=1;function e(t,r){return t<r}return tS=e,tS}var rS,G8;function sle(){if(G8)return rS;G8=1;var e=yA(),t=t$(),r=Uc();function n(i){return i&&i.length?e(i,r,t):void 0}return rS=n,rS}var nS,$8;function ole(){if($8)return nS;$8=1;var e=yA(),t=fu(),r=t$();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return nS=n,nS}var iS,U8;function ale(){if(U8)return iS;U8=1;var e=Zo(),t=function(){return e.Date.now()};return iS=t,iS}var sS,j8;function ule(){if(j8)return sS;j8=1;var e=Jv(),t=ig(),r=Zv(),n=xo(),i=Qh();function s(o,a,u,c){if(!n(o))return o;a=t(a,o);for(var f=-1,h=a.length,v=h-1,y=o;y!=null&&++f<h;){var m=i(a[f]),_=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(f!=v){var x=y[m];_=c?c(x,m,y):void 0,_===void 0&&(_=n(x)?x:r(a[f+1])?[]:{})}e(y,m,_),y=y[m]}return o}return sS=s,sS}var oS,H8;function cle(){if(H8)return oS;H8=1;var e=sg(),t=ule(),r=ig();function n(i,s,o){for(var a=-1,u=s.length,c={};++a<u;){var f=s[a],h=e(i,f);o(h,f)&&t(c,r(f,i),h)}return c}return oS=n,oS}var aS,W8;function lle(){if(W8)return aS;W8=1;var e=cle(),t=kG();function r(n,i){return e(n,i,function(s,o){return t(n,o)})}return aS=r,aS}var uS,X8;function fle(){if(X8)return uS;X8=1;var e=ZG(),t=zG(),r=VG();function n(i){return r(t(i,void 0,e),i+"")}return uS=n,uS}var cS,Y8;function hle(){if(Y8)return cS;Y8=1;var e=lle(),t=fle(),r=t(function(n,i){return n==null?{}:e(n,i)});return cS=r,cS}var lS,K8;function dle(){if(K8)return lS;K8=1;var e=Math.ceil,t=Math.max;function r(n,i,s,o){for(var a=-1,u=t(e((i-n)/(s||1)),0),c=Array(u);u--;)c[o?u:++a]=n,n+=s;return c}return lS=r,lS}var fS,J8;function ple(){if(J8)return fS;J8=1;var e=dle(),t=ag(),r=JG();function n(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),a=a===void 0?s<o?1:-1:r(a),e(s,o,a,i)}}return fS=n,fS}var hS,Z8;function vle(){if(Z8)return hS;Z8=1;var e=ple(),t=e();return hS=t,hS}var dS,Q8;function gle(){if(Q8)return dS;Q8=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return dS=e,dS}var pS,ez;function mle(){if(ez)return pS;ez=1;var e=ff();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,a=e(r),u=n!==void 0,c=n===null,f=n===n,h=e(n);if(!c&&!h&&!a&&r>n||a&&u&&f&&!c&&!h||s&&u&&f||!i&&f||!o)return 1;if(!s&&!a&&!h&&r<n||h&&i&&o&&!s&&!a||c&&i&&o||!u&&o||!f)return-1}return 0}return pS=t,pS}var vS,tz;function yle(){if(tz)return vS;tz=1;var e=mle();function t(r,n,i){for(var s=-1,o=r.criteria,a=n.criteria,u=o.length,c=i.length;++s<u;){var f=e(o[s],a[s]);if(f){if(s>=c)return f;var h=i[s];return f*(h=="desc"?-1:1)}}return r.index-n.index}return vS=t,vS}var gS,rz;function _le(){if(rz)return gS;rz=1;var e=ng(),t=sg(),r=fu(),n=DG(),i=gle(),s=Qv(),o=yle(),a=Uc(),u=hi();function c(f,h,v){h.length?h=e(h,function(_){return u(_)?function(x){return t(x,_.length===1?_[0]:_)}:_}):h=[a];var y=-1;h=e(h,s(r));var m=n(f,function(_,x,S){var P=e(h,function(T){return T(_)});return{criteria:P,index:++y,value:_}});return i(m,function(_,x){return o(_,x,v)})}return gS=c,gS}var mS,nz;function ble(){if(nz)return mS;nz=1;var e=gA(),t=_le(),r=og(),n=ag(),i=r(function(s,o){if(s==null)return[];var a=o.length;return a>1&&n(s,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return mS=i,mS}var yS,iz;function wle(){if(iz)return yS;iz=1;var e=IG(),t=0;function r(n){var i=++t;return e(n)+i}return yS=r,yS}var _S,sz;function xle(){if(sz)return _S;sz=1;function e(t,r,n){for(var i=-1,s=t.length,o=r.length,a={};++i<s;){var u=i<o?r[i]:void 0;n(a,t[i],u)}return a}return _S=e,_S}var bS,oz;function Sle(){if(oz)return bS;oz=1;var e=Jv(),t=xle();function r(n,i){return t(n||[],i||[],e)}return bS=r,bS}var wS,az;function Fn(){if(az)return wS;az=1;var e;if(typeof tA=="function")try{e={cloneDeep:Bce(),constant:fA(),defaults:zce(),each:SG(),filter:LG(),find:Wce(),flatten:ZG(),forEach:xG(),forIn:Xce(),has:NG(),isUndefined:qG(),last:Yce(),map:FG(),mapValues:Kce(),max:Zce(),merge:ile(),min:sle(),minBy:ole(),now:ale(),pick:hle(),range:vle(),reduce:BG(),sortBy:ble(),uniqueId:wle(),values:UG(),zipObject:Sle()}}catch{}return e||(e=window._),wS=e,wS}var xS,uz;function Ele(){if(uz)return xS;uz=1,xS=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,s=i._prev;s!==i;)n.push(JSON.stringify(s,r)),s=s._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return xS}var SS,cz;function Ale(){if(cz)return SS;cz=1;var e=Fn(),t=Go().Graph,r=Ele();SS=i;var n=e.constant(1);function i(c,f){if(c.nodeCount()<=1)return[];var h=a(c,f||n),v=s(h.graph,h.buckets,h.zeroIdx);return e.flatten(e.map(v,function(y){return c.outEdges(y.v,y.w)}),!0)}function s(c,f,h){for(var v=[],y=f[f.length-1],m=f[0],_;c.nodeCount();){for(;_=m.dequeue();)o(c,f,h,_);for(;_=y.dequeue();)o(c,f,h,_);if(c.nodeCount()){for(var x=f.length-2;x>0;--x)if(_=f[x].dequeue(),_){v=v.concat(o(c,f,h,_,!0));break}}}return v}function o(c,f,h,v,y){var m=y?[]:void 0;return e.forEach(c.inEdges(v.v),function(_){var x=c.edge(_),S=c.node(_.v);y&&m.push({v:_.v,w:_.w}),S.out-=x,u(f,h,S)}),e.forEach(c.outEdges(v.v),function(_){var x=c.edge(_),S=_.w,P=c.node(S);P.in-=x,u(f,h,P)}),c.removeNode(v.v),m}function a(c,f){var h=new t,v=0,y=0;e.forEach(c.nodes(),function(x){h.setNode(x,{v:x,in:0,out:0})}),e.forEach(c.edges(),function(x){var S=h.edge(x.v,x.w)||0,P=f(x),T=S+P;h.setEdge(x.v,x.w,T),y=Math.max(y,h.node(x.v).out+=P),v=Math.max(v,h.node(x.w).in+=P)});var m=e.range(y+v+3).map(function(){return new r}),_=v+1;return e.forEach(h.nodes(),function(x){u(m,_,h.node(x))}),{graph:h,buckets:m,zeroIdx:_}}function u(c,f,h){h.out?h.in?c[h.out-h.in+f].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return SS}var ES,lz;function Tle(){if(lz)return ES;lz=1;var e=Fn(),t=Ale();ES={run:r,undo:i};function r(s){var o=s.graph().acyclicer==="greedy"?t(s,a(s)):n(s);e.forEach(o,function(u){var c=s.edge(u);s.removeEdge(u),c.forwardName=u.name,c.reversed=!0,s.setEdge(u.w,u.v,c,e.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function n(s){var o=[],a={},u={};function c(f){e.has(u,f)||(u[f]=!0,a[f]=!0,e.forEach(s.outEdges(f),function(h){e.has(a,h.w)?o.push(h):c(h.w)}),delete a[f])}return e.forEach(s.nodes(),c),o}function i(s){e.forEach(s.edges(),function(o){var a=s.edge(o);if(a.reversed){s.removeEdge(o);var u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return ES}var AS,fz;function _s(){if(fz)return AS;fz=1;var e=Fn(),t=Go().Graph;AS={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:f,addBorderNode:h,maxRank:v,partition:y,time:m,notime:_};function r(x,S,P,T){var E;do E=e.uniqueId(T);while(x.hasNode(E));return P.dummy=S,x.setNode(E,P),E}function n(x){var S=new t().setGraph(x.graph());return e.forEach(x.nodes(),function(P){S.setNode(P,x.node(P))}),e.forEach(x.edges(),function(P){var T=S.edge(P.v,P.w)||{weight:0,minlen:1},E=x.edge(P);S.setEdge(P.v,P.w,{weight:T.weight+E.weight,minlen:Math.max(T.minlen,E.minlen)})}),S}function i(x){var S=new t({multigraph:x.isMultigraph()}).setGraph(x.graph());return e.forEach(x.nodes(),function(P){x.children(P).length||S.setNode(P,x.node(P))}),e.forEach(x.edges(),function(P){S.setEdge(P,x.edge(P))}),S}function s(x){var S=e.map(x.nodes(),function(P){var T={};return e.forEach(x.outEdges(P),function(E){T[E.w]=(T[E.w]||0)+x.edge(E).weight}),T});return e.zipObject(x.nodes(),S)}function o(x){var S=e.map(x.nodes(),function(P){var T={};return e.forEach(x.inEdges(P),function(E){T[E.v]=(T[E.v]||0)+x.edge(E).weight}),T});return e.zipObject(x.nodes(),S)}function a(x,S){var P=x.x,T=x.y,E=S.x-P,O=S.y-T,N=x.width/2,d=x.height/2;if(!E&&!O)throw new Error("Not possible to find intersection inside of the rectangle");var C,R;return Math.abs(O)*N>Math.abs(E)*d?(O<0&&(d=-d),C=d*E/O,R=d):(E<0&&(N=-N),C=N,R=N*O/E),{x:P+C,y:T+R}}function u(x){var S=e.map(e.range(v(x)+1),function(){return[]});return e.forEach(x.nodes(),function(P){var T=x.node(P),E=T.rank;e.isUndefined(E)||(S[E][T.order]=P)}),S}function c(x){var S=e.min(e.map(x.nodes(),function(P){return x.node(P).rank}));e.forEach(x.nodes(),function(P){var T=x.node(P);e.has(T,"rank")&&(T.rank-=S)})}function f(x){var S=e.min(e.map(x.nodes(),function(O){return x.node(O).rank})),P=[];e.forEach(x.nodes(),function(O){var N=x.node(O).rank-S;P[N]||(P[N]=[]),P[N].push(O)});var T=0,E=x.graph().nodeRankFactor;e.forEach(P,function(O,N){e.isUndefined(O)&&N%E!==0?--T:T&&e.forEach(O,function(d){x.node(d).rank+=T})})}function h(x,S,P,T){var E={width:0,height:0};return arguments.length>=4&&(E.rank=P,E.order=T),r(x,"border",E,S)}function v(x){return e.max(e.map(x.nodes(),function(S){var P=x.node(S).rank;if(!e.isUndefined(P))return P}))}function y(x,S){var P={lhs:[],rhs:[]};return e.forEach(x,function(T){S(T)?P.lhs.push(T):P.rhs.push(T)}),P}function m(x,S){var P=e.now();try{return S()}finally{console.log(x+" time: "+(e.now()-P)+"ms")}}function _(x,S){return S()}return AS}var TS,hz;function Ple(){if(hz)return TS;hz=1;var e=Fn(),t=_s();TS={run:r,undo:i};function r(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){n(s,o)})}function n(s,o){var a=o.v,u=s.node(a).rank,c=o.w,f=s.node(c).rank,h=o.name,v=s.edge(o),y=v.labelRank;if(f!==u+1){s.removeEdge(o);var m,_,x;for(x=0,++u;u<f;++x,++u)v.points=[],_={width:0,height:0,edgeLabel:v,edgeObj:o,rank:u},m=t.addDummyNode(s,"edge",_,"_d"),u===y&&(_.width=v.width,_.height=v.height,_.dummy="edge-label",_.labelpos=v.labelpos),s.setEdge(a,m,{weight:v.weight},h),x===0&&s.graph().dummyChains.push(m),a=m;s.setEdge(a,c,{weight:v.weight},h)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var a=s.node(o),u=a.edgeLabel,c;for(s.setEdge(a.edgeObj,u);a.dummy;)c=s.successors(o)[0],s.removeNode(o),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),o=c,a=s.node(o)})}return TS}var PS,dz;function Kp(){if(dz)return PS;dz=1;var e=Fn();PS={longestPath:t,slack:r};function t(n){var i={};function s(o){var a=n.node(o);if(e.has(i,o))return a.rank;i[o]=!0;var u=e.min(e.map(n.outEdges(o),function(c){return s(c.w)-n.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}e.forEach(n.sources(),s)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return PS}var CS,pz;function r$(){if(pz)return CS;pz=1;var e=Fn(),t=Go().Graph,r=Kp().slack;CS=n;function n(a){var u=new t({directed:!1}),c=a.nodes()[0],f=a.nodeCount();u.setNode(c,{});for(var h,v;i(u,a)<f;)h=s(u,a),v=u.hasNode(h.v)?r(a,h):-r(a,h),o(u,a,v);return u}function i(a,u){function c(f){e.forEach(u.nodeEdges(f),function(h){var v=h.v,y=f===v?h.w:v;!a.hasNode(y)&&!r(u,h)&&(a.setNode(y,{}),a.setEdge(f,y,{}),c(y))})}return e.forEach(a.nodes(),c),a.nodeCount()}function s(a,u){return e.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return r(u,c)})}function o(a,u,c){e.forEach(a.nodes(),function(f){u.node(f).rank+=c})}return CS}var OS,vz;function Cle(){if(vz)return OS;vz=1;var e=Fn(),t=r$(),r=Kp().slack,n=Kp().longestPath,i=Go().alg.preorder,s=Go().alg.postorder,o=_s().simplify;OS=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=f,a.leaveEdge=y,a.enterEdge=m,a.exchangeEdges=_;function a(T){T=o(T),n(T);var E=t(T);h(E),u(E,T);for(var O,N;O=y(E);)N=m(E,T,O),_(E,T,O,N)}function u(T,E){var O=s(T,T.nodes());O=O.slice(0,O.length-1),e.forEach(O,function(N){c(T,E,N)})}function c(T,E,O){var N=T.node(O),d=N.parent;T.edge(O,d).cutvalue=f(T,E,O)}function f(T,E,O){var N=T.node(O),d=N.parent,C=!0,R=E.edge(O,d),k=0;return R||(C=!1,R=E.edge(d,O)),k=R.weight,e.forEach(E.nodeEdges(O),function(B){var z=B.v===O,U=z?B.w:B.v;if(U!==d){var Y=z===C,oe=E.edge(B).weight;if(k+=Y?oe:-oe,S(T,O,U)){var W=T.edge(O,U).cutvalue;k+=Y?-W:W}}}),k}function h(T,E){arguments.length<2&&(E=T.nodes()[0]),v(T,{},1,E)}function v(T,E,O,N,d){var C=O,R=T.node(N);return E[N]=!0,e.forEach(T.neighbors(N),function(k){e.has(E,k)||(O=v(T,E,O,k,N))}),R.low=C,R.lim=O++,d?R.parent=d:delete R.parent,O}function y(T){return e.find(T.edges(),function(E){return T.edge(E).cutvalue<0})}function m(T,E,O){var N=O.v,d=O.w;E.hasEdge(N,d)||(N=O.w,d=O.v);var C=T.node(N),R=T.node(d),k=C,B=!1;C.lim>R.lim&&(k=R,B=!0);var z=e.filter(E.edges(),function(U){return B===P(T,T.node(U.v),k)&&B!==P(T,T.node(U.w),k)});return e.minBy(z,function(U){return r(E,U)})}function _(T,E,O,N){var d=O.v,C=O.w;T.removeEdge(d,C),T.setEdge(N.v,N.w,{}),h(T),u(T,E),x(T,E)}function x(T,E){var O=e.find(T.nodes(),function(d){return!E.node(d).parent}),N=i(T,O);N=N.slice(1),e.forEach(N,function(d){var C=T.node(d).parent,R=E.edge(d,C),k=!1;R||(R=E.edge(C,d),k=!0),E.node(d).rank=E.node(C).rank+(k?R.minlen:-R.minlen)})}function S(T,E,O){return T.hasEdge(E,O)}function P(T,E,O){return O.low<=E.lim&&E.lim<=O.lim}return OS}var IS,gz;function Ole(){if(gz)return IS;gz=1;var e=Kp(),t=e.longestPath,r=r$(),n=Cle();IS=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=t;function o(u){t(u),r(u)}function a(u){n(u)}return IS}var RS,mz;function Ile(){if(mz)return RS;mz=1;var e=Fn();RS=t;function t(i){var s=n(i);e.forEach(i.graph().dummyChains,function(o){for(var a=i.node(o),u=a.edgeObj,c=r(i,s,u.v,u.w),f=c.path,h=c.lca,v=0,y=f[v],m=!0;o!==u.w;){if(a=i.node(o),m){for(;(y=f[v])!==h&&i.node(y).maxRank<a.rank;)v++;y===h&&(m=!1)}if(!m){for(;v<f.length-1&&i.node(y=f[v+1]).minRank<=a.rank;)v++;y=f[v]}i.setParent(o,y),o=i.successors(o)[0]}})}function r(i,s,o,a){var u=[],c=[],f=Math.min(s[o].low,s[a].low),h=Math.max(s[o].lim,s[a].lim),v,y;v=o;do v=i.parent(v),u.push(v);while(v&&(s[v].low>f||h>s[v].lim));for(y=v,v=a;(v=i.parent(v))!==y;)c.push(v);return{path:u.concat(c.reverse()),lca:y}}function n(i){var s={},o=0;function a(u){var c=o;e.forEach(i.children(u),a),s[u]={low:c,lim:o++}}return e.forEach(i.children(),a),s}return RS}var kS,yz;function Rle(){if(yz)return kS;yz=1;var e=Fn(),t=_s();kS={run:r,cleanup:o};function r(a){var u=t.addDummyNode(a,"root",{},"_root"),c=i(a),f=e.max(e.values(c))-1,h=2*f+1;a.graph().nestingRoot=u,e.forEach(a.edges(),function(y){a.edge(y).minlen*=h});var v=s(a)+1;e.forEach(a.children(),function(y){n(a,u,h,v,f,c,y)}),a.graph().nodeRankFactor=h}function n(a,u,c,f,h,v,y){var m=a.children(y);if(!m.length){y!==u&&a.setEdge(u,y,{weight:0,minlen:c});return}var _=t.addBorderNode(a,"_bt"),x=t.addBorderNode(a,"_bb"),S=a.node(y);a.setParent(_,y),S.borderTop=_,a.setParent(x,y),S.borderBottom=x,e.forEach(m,function(P){n(a,u,c,f,h,v,P);var T=a.node(P),E=T.borderTop?T.borderTop:P,O=T.borderBottom?T.borderBottom:P,N=T.borderTop?f:2*f,d=E!==O?1:h-v[y]+1;a.setEdge(_,E,{weight:N,minlen:d,nestingEdge:!0}),a.setEdge(O,x,{weight:N,minlen:d,nestingEdge:!0})}),a.parent(y)||a.setEdge(u,_,{weight:0,minlen:h+v[y]})}function i(a){var u={};function c(f,h){var v=a.children(f);v&&v.length&&e.forEach(v,function(y){c(y,h+1)}),u[f]=h}return e.forEach(a.children(),function(f){c(f,1)}),u}function s(a){return e.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function o(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(a.edges(),function(c){var f=a.edge(c);f.nestingEdge&&a.removeEdge(c)})}return kS}var MS,_z;function kle(){if(_z)return MS;_z=1;var e=Fn(),t=_s();MS=r;function r(i){function s(o){var a=i.children(o),u=i.node(o);if(a.length&&e.forEach(a,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,f=u.maxRank+1;c<f;++c)n(i,"borderLeft","_bl",o,u,c),n(i,"borderRight","_br",o,u,c)}}e.forEach(i.children(),s)}function n(i,s,o,a,u,c){var f={width:0,height:0,rank:c,borderType:s},h=u[s][c-1],v=t.addDummyNode(i,"border",f,o);u[s][c]=v,i.setParent(v,a),h&&i.setEdge(h,v,{weight:1})}return MS}var LS,bz;function Mle(){if(bz)return LS;bz=1;var e=Fn();LS={adjust:t,undo:r};function t(c){var f=c.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(c)}function r(c){var f=c.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(c),(f==="lr"||f==="rl")&&(a(c),n(c))}function n(c){e.forEach(c.nodes(),function(f){i(c.node(f))}),e.forEach(c.edges(),function(f){i(c.edge(f))})}function i(c){var f=c.width;c.width=c.height,c.height=f}function s(c){e.forEach(c.nodes(),function(f){o(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,o),e.has(h,"y")&&o(h)})}function o(c){c.y=-c.y}function a(c){e.forEach(c.nodes(),function(f){u(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,u),e.has(h,"x")&&u(h)})}function u(c){var f=c.x;c.x=c.y,c.y=f}return LS}var NS,wz;function Lle(){if(wz)return NS;wz=1;var e=Fn();NS=t;function t(r){var n={},i=e.filter(r.nodes(),function(c){return!r.children(c).length}),s=e.max(e.map(i,function(c){return r.node(c).rank})),o=e.map(e.range(s+1),function(){return[]});function a(c){if(!e.has(n,c)){n[c]=!0;var f=r.node(c);o[f.rank].push(c),e.forEach(r.successors(c),a)}}var u=e.sortBy(i,function(c){return r.node(c).rank});return e.forEach(u,a),o}return NS}var qS,xz;function Nle(){if(xz)return qS;xz=1;var e=Fn();qS=t;function t(n,i){for(var s=0,o=1;o<i.length;++o)s+=r(n,i[o-1],i[o]);return s}function r(n,i,s){for(var o=e.zipObject(s,e.map(s,function(v,y){return y})),a=e.flatten(e.map(i,function(v){return e.sortBy(e.map(n.outEdges(v),function(y){return{pos:o[y.w],weight:n.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var c=2*u-1;u-=1;var f=e.map(new Array(c),function(){return 0}),h=0;return e.forEach(a.forEach(function(v){var y=v.pos+u;f[y]+=v.weight;for(var m=0;y>0;)y%2&&(m+=f[y+1]),y=y-1>>1,f[y]+=v.weight;h+=v.weight*m})),h}return qS}var DS,Sz;function qle(){if(Sz)return DS;Sz=1;var e=Fn();DS=t;function t(r,n){return e.map(n,function(i){var s=r.inEdges(i);if(s.length){var o=e.reduce(s,function(a,u){var c=r.edge(u),f=r.node(u.v);return{sum:a.sum+c.weight*f.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return DS}var FS,Ez;function Dle(){if(Ez)return FS;Ez=1;var e=Fn();FS=t;function t(i,s){var o={};e.forEach(i,function(u,c){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};e.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),e.forEach(s.edges(),function(u){var c=o[u.v],f=o[u.w];!e.isUndefined(c)&&!e.isUndefined(f)&&(f.indegree++,c.out.push(o[u.w]))});var a=e.filter(o,function(u){return!u.indegree});return r(a)}function r(i){var s=[];function o(c){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(c.barycenter)||f.barycenter>=c.barycenter)&&n(c,f)}}function a(c){return function(f){f.in.push(c),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,a(u))}return e.map(e.filter(s,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function n(i,s){var o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return FS}var BS,Az;function Fle(){if(Az)return BS;Az=1;var e=Fn(),t=_s();BS=r;function r(s,o){var a=t.partition(s,function(_){return e.has(_,"barycenter")}),u=a.lhs,c=e.sortBy(a.rhs,function(_){return-_.i}),f=[],h=0,v=0,y=0;u.sort(i(!!o)),y=n(f,c,y),e.forEach(u,function(_){y+=_.vs.length,f.push(_.vs),h+=_.barycenter*_.weight,v+=_.weight,y=n(f,c,y)});var m={vs:e.flatten(f,!0)};return v&&(m.barycenter=h/v,m.weight=v),m}function n(s,o,a){for(var u;o.length&&(u=e.last(o)).i<=a;)o.pop(),s.push(u.vs),a++;return a}function i(s){return function(o,a){return o.barycenter<a.barycenter?-1:o.barycenter>a.barycenter?1:s?a.i-o.i:o.i-a.i}}return BS}var zS,Tz;function Ble(){if(Tz)return zS;Tz=1;var e=Fn(),t=qle(),r=Dle(),n=Fle();zS=i;function i(a,u,c,f){var h=a.children(u),v=a.node(u),y=v?v.borderLeft:void 0,m=v?v.borderRight:void 0,_={};y&&(h=e.filter(h,function(O){return O!==y&&O!==m}));var x=t(a,h);e.forEach(x,function(O){if(a.children(O.v).length){var N=i(a,O.v,c,f);_[O.v]=N,e.has(N,"barycenter")&&o(O,N)}});var S=r(x,c);s(S,_);var P=n(S,f);if(y&&(P.vs=e.flatten([y,P.vs,m],!0),a.predecessors(y).length)){var T=a.node(a.predecessors(y)[0]),E=a.node(a.predecessors(m)[0]);e.has(P,"barycenter")||(P.barycenter=0,P.weight=0),P.barycenter=(P.barycenter*P.weight+T.order+E.order)/(P.weight+2),P.weight+=2}return P}function s(a,u){e.forEach(a,function(c){c.vs=e.flatten(c.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(a,u){e.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return zS}var VS,Pz;function zle(){if(Pz)return VS;Pz=1;var e=Fn(),t=Go().Graph;VS=r;function r(i,s,o){var a=n(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var f=i.node(c),h=i.parent(c);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(c),u.setParent(c,h||a),e.forEach(i[o](c),function(v){var y=v.v===c?v.w:v.v,m=u.edge(y,c),_=e.isUndefined(m)?0:m.weight;u.setEdge(y,c,{weight:i.edge(v).weight+_})}),e.has(f,"minRank")&&u.setNode(c,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function n(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return VS}var GS,Cz;function Vle(){if(Cz)return GS;Cz=1;var e=Fn();GS=t;function t(r,n,i){var s={},o;e.forEach(i,function(a){for(var u=r.parent(a),c,f;u;){if(c=r.parent(u),c?(f=s[c],s[c]=u):(f=o,o=u),f&&f!==u){n.setEdge(f,u);return}u=c}})}return GS}var $S,Oz;function Gle(){if(Oz)return $S;Oz=1;var e=Fn(),t=Lle(),r=Nle(),n=Ble(),i=zle(),s=Vle(),o=Go().Graph,a=_s();$S=u;function u(v){var y=a.maxRank(v),m=c(v,e.range(1,y+1),"inEdges"),_=c(v,e.range(y-1,-1,-1),"outEdges"),x=t(v);h(v,x);for(var S=Number.POSITIVE_INFINITY,P,T=0,E=0;E<4;++T,++E){f(T%2?m:_,T%4>=2),x=a.buildLayerMatrix(v);var O=r(v,x);O<S&&(E=0,P=e.cloneDeep(x),S=O)}h(v,P)}function c(v,y,m){return e.map(y,function(_){return i(v,_,m)})}function f(v,y){var m=new o;e.forEach(v,function(_){var x=_.graph().root,S=n(_,x,m,y);e.forEach(S.vs,function(P,T){_.node(P).order=T}),s(_,m,S.vs)})}function h(v,y){e.forEach(y,function(m){e.forEach(m,function(_,x){v.node(_).order=x})})}return $S}var US,Iz;function $le(){if(Iz)return US;Iz=1;var e=Fn(),t=Go().Graph,r=_s();US={positionX:m,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:v,findSmallestWidthAlignment:h,balance:y};function n(S,P){var T={};function E(O,N){var d=0,C=0,R=O.length,k=e.last(N);return e.forEach(N,function(B,z){var U=s(S,B),Y=U?S.node(U).order:R;(U||B===k)&&(e.forEach(N.slice(C,z+1),function(oe){e.forEach(S.predecessors(oe),function(W){var D=S.node(W),F=D.order;(F<d||Y<F)&&!(D.dummy&&S.node(oe).dummy)&&o(T,W,oe)})}),C=z+1,d=Y)}),N}return e.reduce(P,E),T}function i(S,P){var T={};function E(N,d,C,R,k){var B;e.forEach(e.range(d,C),function(z){B=N[z],S.node(B).dummy&&e.forEach(S.predecessors(B),function(U){var Y=S.node(U);Y.dummy&&(Y.order<R||Y.order>k)&&o(T,U,B)})})}function O(N,d){var C=-1,R,k=0;return e.forEach(d,function(B,z){if(S.node(B).dummy==="border"){var U=S.predecessors(B);U.length&&(R=S.node(U[0]).order,E(d,k,z,C,R),k=z,C=R)}E(d,k,d.length,R,N.length)}),d}return e.reduce(P,O),T}function s(S,P){if(S.node(P).dummy)return e.find(S.predecessors(P),function(T){return S.node(T).dummy})}function o(S,P,T){if(P>T){var E=P;P=T,T=E}var O=S[P];O||(S[P]=O={}),O[T]=!0}function a(S,P,T){if(P>T){var E=P;P=T,T=E}return e.has(S[P],T)}function u(S,P,T,E){var O={},N={},d={};return e.forEach(P,function(C){e.forEach(C,function(R,k){O[R]=R,N[R]=R,d[R]=k})}),e.forEach(P,function(C){var R=-1;e.forEach(C,function(k){var B=E(k);if(B.length){B=e.sortBy(B,function(W){return d[W]});for(var z=(B.length-1)/2,U=Math.floor(z),Y=Math.ceil(z);U<=Y;++U){var oe=B[U];N[k]===k&&R<d[oe]&&!a(T,k,oe)&&(N[oe]=k,N[k]=O[k]=O[oe],R=d[oe])}}})}),{root:O,align:N}}function c(S,P,T,E,O){var N={},d=f(S,P,T,O),C=O?"borderLeft":"borderRight";function R(z,U){for(var Y=d.nodes(),oe=Y.pop(),W={};oe;)W[oe]?z(oe):(W[oe]=!0,Y.push(oe),Y=Y.concat(U(oe))),oe=Y.pop()}function k(z){N[z]=d.inEdges(z).reduce(function(U,Y){return Math.max(U,N[Y.v]+d.edge(Y))},0)}function B(z){var U=d.outEdges(z).reduce(function(oe,W){return Math.min(oe,N[W.w]-d.edge(W))},Number.POSITIVE_INFINITY),Y=S.node(z);U!==Number.POSITIVE_INFINITY&&Y.borderType!==C&&(N[z]=Math.max(N[z],U))}return R(k,d.predecessors.bind(d)),R(B,d.successors.bind(d)),e.forEach(E,function(z){N[z]=N[T[z]]}),N}function f(S,P,T,E){var O=new t,N=S.graph(),d=_(N.nodesep,N.edgesep,E);return e.forEach(P,function(C){var R;e.forEach(C,function(k){var B=T[k];if(O.setNode(B),R){var z=T[R],U=O.edge(z,B);O.setEdge(z,B,Math.max(d(S,k,R),U||0))}R=k})}),O}function h(S,P){return e.minBy(e.values(P),function(T){var E=Number.NEGATIVE_INFINITY,O=Number.POSITIVE_INFINITY;return e.forIn(T,function(N,d){var C=x(S,d)/2;E=Math.max(N+C,E),O=Math.min(N-C,O)}),E-O})}function v(S,P){var T=e.values(P),E=e.min(T),O=e.max(T);e.forEach(["u","d"],function(N){e.forEach(["l","r"],function(d){var C=N+d,R=S[C],k;if(R!==P){var B=e.values(R);k=d==="l"?E-e.min(B):O-e.max(B),k&&(S[C]=e.mapValues(R,function(z){return z+k}))}})})}function y(S,P){return e.mapValues(S.ul,function(T,E){if(P)return S[P.toLowerCase()][E];var O=e.sortBy(e.map(S,E));return(O[1]+O[2])/2})}function m(S){var P=r.buildLayerMatrix(S),T=e.merge(n(S,P),i(S,P)),E={},O;e.forEach(["u","d"],function(d){O=d==="u"?P:e.values(P).reverse(),e.forEach(["l","r"],function(C){C==="r"&&(O=e.map(O,function(z){return e.values(z).reverse()}));var R=(d==="u"?S.predecessors:S.successors).bind(S),k=u(S,O,T,R),B=c(S,O,k.root,k.align,C==="r");C==="r"&&(B=e.mapValues(B,function(z){return-z})),E[d+C]=B})});var N=h(S,E);return v(E,N),y(E,S.graph().align)}function _(S,P,T){return function(E,O,N){var d=E.node(O),C=E.node(N),R=0,k;if(R+=d.width/2,e.has(d,"labelpos"))switch(d.labelpos.toLowerCase()){case"l":k=-d.width/2;break;case"r":k=d.width/2;break}if(k&&(R+=T?k:-k),k=0,R+=(d.dummy?P:S)/2,R+=(C.dummy?P:S)/2,R+=C.width/2,e.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":k=C.width/2;break;case"r":k=-C.width/2;break}return k&&(R+=T?k:-k),k=0,R}}function x(S,P){return S.node(P).width}return US}var jS,Rz;function Ule(){if(Rz)return jS;Rz=1;var e=Fn(),t=_s(),r=$le().positionX;jS=n;function n(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(r(s),function(o,a){s.node(a).x=o})}function i(s){var o=t.buildLayerMatrix(s),a=s.graph().ranksep,u=0;e.forEach(o,function(c){var f=e.max(e.map(c,function(h){return s.node(h).height}));e.forEach(c,function(h){s.node(h).y=u+f/2}),u+=f+a})}return jS}var HS,kz;function jle(){if(kz)return HS;kz=1;var e=Fn(),t=Tle(),r=Ple(),n=Ole(),i=_s().normalizeRanks,s=Ile(),o=_s().removeEmptyRanks,a=Rle(),u=kle(),c=Mle(),f=Gle(),h=Ule(),v=_s(),y=Go().Graph;HS=m;function m(te,ue){var re=ue&&ue.debugTiming?v.time:v.notime;re("layout",function(){var Q=re("  buildLayoutGraph",function(){return R(te)});re("  runLayout",function(){_(Q,re)}),re("  updateInputGraph",function(){x(te,Q)})})}function _(te,ue){ue("    makeSpaceForEdgeLabels",function(){k(te)}),ue("    removeSelfEdges",function(){H(te)}),ue("    acyclic",function(){t.run(te)}),ue("    nestingGraph.run",function(){a.run(te)}),ue("    rank",function(){n(v.asNonCompoundGraph(te))}),ue("    injectEdgeLabelProxies",function(){B(te)}),ue("    removeEmptyRanks",function(){o(te)}),ue("    nestingGraph.cleanup",function(){a.cleanup(te)}),ue("    normalizeRanks",function(){i(te)}),ue("    assignRankMinMax",function(){z(te)}),ue("    removeEdgeLabelProxies",function(){U(te)}),ue("    normalize.run",function(){r.run(te)}),ue("    parentDummyChains",function(){s(te)}),ue("    addBorderSegments",function(){u(te)}),ue("    order",function(){f(te)}),ue("    insertSelfEdges",function(){ie(te)}),ue("    adjustCoordinateSystem",function(){c.adjust(te)}),ue("    position",function(){h(te)}),ue("    positionSelfEdges",function(){se(te)}),ue("    removeBorderNodes",function(){F(te)}),ue("    normalize.undo",function(){r.undo(te)}),ue("    fixupEdgeLabelCoords",function(){W(te)}),ue("    undoCoordinateSystem",function(){c.undo(te)}),ue("    translateGraph",function(){Y(te)}),ue("    assignNodeIntersects",function(){oe(te)}),ue("    reversePoints",function(){D(te)}),ue("    acyclic.undo",function(){t.undo(te)})}function x(te,ue){e.forEach(te.nodes(),function(re){var Q=te.node(re),le=ue.node(re);Q&&(Q.x=le.x,Q.y=le.y,ue.children(re).length&&(Q.width=le.width,Q.height=le.height))}),e.forEach(te.edges(),function(re){var Q=te.edge(re),le=ue.edge(re);Q.points=le.points,e.has(le,"x")&&(Q.x=le.x,Q.y=le.y)}),te.graph().width=ue.graph().width,te.graph().height=ue.graph().height}var S=["nodesep","edgesep","ranksep","marginx","marginy"],P={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T=["acyclicer","ranker","rankdir","align"],E=["width","height"],O={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],d={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function R(te){var ue=new y({multigraph:!0,compound:!0}),re=ge(te.graph());return ue.setGraph(e.merge({},P,we(re,S),e.pick(re,T))),e.forEach(te.nodes(),function(Q){var le=ge(te.node(Q));ue.setNode(Q,e.defaults(we(le,E),O)),ue.setParent(Q,te.parent(Q))}),e.forEach(te.edges(),function(Q){var le=ge(te.edge(Q));ue.setEdge(Q,e.merge({},d,we(le,N),e.pick(le,C)))}),ue}function k(te){var ue=te.graph();ue.ranksep/=2,e.forEach(te.edges(),function(re){var Q=te.edge(re);Q.minlen*=2,Q.labelpos.toLowerCase()!=="c"&&(ue.rankdir==="TB"||ue.rankdir==="BT"?Q.width+=Q.labeloffset:Q.height+=Q.labeloffset)})}function B(te){e.forEach(te.edges(),function(ue){var re=te.edge(ue);if(re.width&&re.height){var Q=te.node(ue.v),le=te.node(ue.w),Ge={rank:(le.rank-Q.rank)/2+Q.rank,e:ue};v.addDummyNode(te,"edge-proxy",Ge,"_ep")}})}function z(te){var ue=0;e.forEach(te.nodes(),function(re){var Q=te.node(re);Q.borderTop&&(Q.minRank=te.node(Q.borderTop).rank,Q.maxRank=te.node(Q.borderBottom).rank,ue=e.max(ue,Q.maxRank))}),te.graph().maxRank=ue}function U(te){e.forEach(te.nodes(),function(ue){var re=te.node(ue);re.dummy==="edge-proxy"&&(te.edge(re.e).labelRank=re.rank,te.removeNode(ue))})}function Y(te){var ue=Number.POSITIVE_INFINITY,re=0,Q=Number.POSITIVE_INFINITY,le=0,Ge=te.graph(),Ne=Ge.marginx||0,Oe=Ge.marginy||0;function Ze($e){var q=$e.x,G=$e.y,K=$e.width,J=$e.height;ue=Math.min(ue,q-K/2),re=Math.max(re,q+K/2),Q=Math.min(Q,G-J/2),le=Math.max(le,G+J/2)}e.forEach(te.nodes(),function($e){Ze(te.node($e))}),e.forEach(te.edges(),function($e){var q=te.edge($e);e.has(q,"x")&&Ze(q)}),ue-=Ne,Q-=Oe,e.forEach(te.nodes(),function($e){var q=te.node($e);q.x-=ue,q.y-=Q}),e.forEach(te.edges(),function($e){var q=te.edge($e);e.forEach(q.points,function(G){G.x-=ue,G.y-=Q}),e.has(q,"x")&&(q.x-=ue),e.has(q,"y")&&(q.y-=Q)}),Ge.width=re-ue+Ne,Ge.height=le-Q+Oe}function oe(te){e.forEach(te.edges(),function(ue){var re=te.edge(ue),Q=te.node(ue.v),le=te.node(ue.w),Ge,Ne;re.points?(Ge=re.points[0],Ne=re.points[re.points.length-1]):(re.points=[],Ge=le,Ne=Q),re.points.unshift(v.intersectRect(Q,Ge)),re.points.push(v.intersectRect(le,Ne))})}function W(te){e.forEach(te.edges(),function(ue){var re=te.edge(ue);if(e.has(re,"x"))switch((re.labelpos==="l"||re.labelpos==="r")&&(re.width-=re.labeloffset),re.labelpos){case"l":re.x-=re.width/2+re.labeloffset;break;case"r":re.x+=re.width/2+re.labeloffset;break}})}function D(te){e.forEach(te.edges(),function(ue){var re=te.edge(ue);re.reversed&&re.points.reverse()})}function F(te){e.forEach(te.nodes(),function(ue){if(te.children(ue).length){var re=te.node(ue),Q=te.node(re.borderTop),le=te.node(re.borderBottom),Ge=te.node(e.last(re.borderLeft)),Ne=te.node(e.last(re.borderRight));re.width=Math.abs(Ne.x-Ge.x),re.height=Math.abs(le.y-Q.y),re.x=Ge.x+re.width/2,re.y=Q.y+re.height/2}}),e.forEach(te.nodes(),function(ue){te.node(ue).dummy==="border"&&te.removeNode(ue)})}function H(te){e.forEach(te.edges(),function(ue){if(ue.v===ue.w){var re=te.node(ue.v);re.selfEdges||(re.selfEdges=[]),re.selfEdges.push({e:ue,label:te.edge(ue)}),te.removeEdge(ue)}})}function ie(te){var ue=v.buildLayerMatrix(te);e.forEach(ue,function(re){var Q=0;e.forEach(re,function(le,Ge){var Ne=te.node(le);Ne.order=Ge+Q,e.forEach(Ne.selfEdges,function(Oe){v.addDummyNode(te,"selfedge",{width:Oe.label.width,height:Oe.label.height,rank:Ne.rank,order:Ge+ ++Q,e:Oe.e,label:Oe.label},"_se")}),delete Ne.selfEdges})})}function se(te){e.forEach(te.nodes(),function(ue){var re=te.node(ue);if(re.dummy==="selfedge"){var Q=te.node(re.e.v),le=Q.x+Q.width/2,Ge=Q.y,Ne=re.x-le,Oe=Q.height/2;te.setEdge(re.e,re.label),te.removeNode(ue),re.label.points=[{x:le+2*Ne/3,y:Ge-Oe},{x:le+5*Ne/6,y:Ge-Oe},{x:le+Ne,y:Ge},{x:le+5*Ne/6,y:Ge+Oe},{x:le+2*Ne/3,y:Ge+Oe}],re.label.x=re.x,re.label.y=re.y}})}function we(te,ue){return e.mapValues(e.pick(te,ue),Number)}function ge(te){var ue={};return e.forEach(te,function(re,Q){ue[Q.toLowerCase()]=re}),ue}return HS}var WS,Mz;function Hle(){if(Mz)return WS;Mz=1;var e=Fn(),t=_s(),r=Go().Graph;WS={debugOrdering:n};function n(i){var s=t.buildLayerMatrix(i),o=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(a){o.setNode(a,{label:a}),o.setParent(a,"layer"+i.node(a).rank)}),e.forEach(i.edges(),function(a){o.setEdge(a.v,a.w,{},a.name)}),e.forEach(s,function(a,u){var c="layer"+u;o.setNode(c,{rank:"same"}),e.reduce(a,function(f,h){return o.setEdge(f,h,{style:"invis"}),h})}),o}return WS}var XS,Lz;function Wle(){return Lz||(Lz=1,XS="0.8.5"),XS}var YS,Nz;function Xle(){return Nz||(Nz=1,YS={graphlib:Go(),layout:jle(),debug:Hle(),util:{time:_s().time,notime:_s().notime},version:Wle()}),YS}var Yle=Xle();const Kle=tf(Yle);var Jle=KG();const Zle=tf(Jle),Xa={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Qle=Object.keys(Xa).map(e=>Xa[e]).join(""),KS="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",efe=/\s/g,qz=new RegExp(`^(${KS}\\*)?([${Qle}])(/${KS})?([-+]{1,2}${KS})?$`,"g");function n$(e){throw new Error(`Invalid calc() expression: ${e}`)}function tfe(e,t){const r=qz.exec(e.replace(efe,""));r||n$(e),qz.lastIndex=0;const[,n,i,s,o]=r,{x:a,y:u,width:c,height:f}=t;let h=0;switch(i){case Xa.width:{h=c;break}case Xa.height:{h=f;break}case Xa.x:{h=a;break}case Xa.y:{h=u;break}case Xa.minimum:{h=Math.min(f,c);break}case Xa.maximum:{h=Math.max(f,c);break}case Xa.diagonal:{h=Math.sqrt(f*f+c*c);break}}return n&&(h*=parseFloat(n)),s&&(h/=parseFloat(s.slice(1))),o&&(h+=rfe(o)),h}function rfe(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function co(e){return typeof e=="string"&&e.includes("calc")}const i$="calc(",Dz=i$.length;function lo(e,t){let r=e,n=0;do{let i=r.indexOf(i$,n);if(i===-1)return r;let s=i+Dz,o=1;e:do{switch(r[s]){case"(":{o++;break}case")":{if(o--,o===0)break e;break}case void 0:n$(r)}s++}while(!0);let a=r.slice(i+Dz,s);co(a)&&(a=lo(a,t));const u=String(tfe(a,t));r=r.slice(0,i)+u+r.slice(s+1),n=i+u.length}while(!0)}const{round:nfe,floor:ife,PI:s$}=Math,sfe={linear:function(e,t,r){var n=e[1]-e[0],i=t[1]-t[0];return(r-e[0])/n*i+t[0]||0}},$o=function(e){return e%360+(e<0?360:0)},Ac=function(e,t){return t*nfe(e/t)},ug=function(e){return 180*e/s$%360},bs=function(e,t){return t=t||!1,e=t?e:e%360,e*s$/180},kE=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){const r=e;e=t,t=r}return ife(Math.random()*(t-e+1)+e)},{cos:vp,sin:JS,atan2:ofe}=Math,o$=function(e,t){var r=bs(e.y),n=bs(t.y),i=e.x,s=t.x,o=bs(s-i),a=JS(o)*vp(n),u=vp(r)*JS(n)-JS(r)*vp(n)*vp(o),c=ug(ofe(a,u)),f=["NE","E","SE","S","SW","W","NW","N"],h=c-22.5;return h<0&&(h+=360),h=parseInt(h/45),f[h]},_A=function(e,t){var r=e.x,n=e.y,i=t.x,s=t.y;return(r-=i)*r+(n-=s)*n},a$=function(e,t){return Math.sqrt(_A(e,t))},br={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Jp,cos:ME,sin:LE,sqrt:Fz,min:Bz,max:zz,atan2:afe,round:Vz,pow:ufe,PI:Gz}=Math,me=function(e,t){if(!(this instanceof me))return new me(e,t);if(typeof e=="string"){var r=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(r[0]),t=parseFloat(r[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};me.fromPolar=function(e,t,r){r=new me(r);var n=Jp(e*ME(t)),i=Jp(e*LE(t)),s=$o(ug(t));return s<90?i=-i:s<180?(n=-n,i=-i):s<270&&(n=-n),new me(r.x+n,r.y+i)};me.random=function(e,t,r,n){return new me(kE(e,t),kE(r,n))};me.prototype={type:br.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new me(e[0]);for(var r=null,n=1/0,i=0;i<t;i++){var s=new me(e[i]),o=this.squaredDistance(s);o<n&&(r=s,n=o)}return r},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=Bz(zz(this.x,e.x),e.x+e.width),this.y=Bz(zz(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var r=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return r<0&&(r+=360),r},bearing:function(e){return o$(this,e)},changeInAngle:function(e,t,r){return this.clone().offset(-e,-t).theta(r)-this.theta(r)},clone:function(){return new me(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new me(this.x-(e||0),this.y-(t||0))},distance:function(e){return a$(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var r=this.x,n=this.y;return new me((1-t)*r+t*e.x,(1-t)*n+t*e.y)},magnitude:function(){return Fz(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Jp(e.x-this.x)+Jp(e.y-this.y)},move:function(e,t){var r=bs(new me(e).theta(this)),n=this.offset(ME(r)*t,-LE(r)*t);return n},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new me(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new me(0,0),t=bs($o(-t));var r=ME(t),n=LE(t),i=r*(this.x-e.x)-n*(this.y-e.y)+e.x,s=n*(this.x-e.x)+r*(this.y-e.y)+e.y;return this.x=i,this.y=s,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=ufe(10,e);break}return this.x=Vz(this.x*t)/t,this.y=Vz(this.y*t)/t,this},scale:function(e,t,r){return r=r&&new me(r)||new me(0,0),this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this},snapToGrid:function(e,t){return this.x=Ac(this.x,e),this.y=Ac(this.y,t||e),this},squaredDistance:function(e){return _A(this,e)},theta:function(e){e=new me(e);var t=-(e.y-this.y),r=e.x-this.x,n=afe(t,r);return n<0&&(n=2*Gz+n),180*n/Gz},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new me(e)||new me(0,0);var t=this.x,r=this.y;return this.x=Fz((t-e.x)*(t-e.x)+(r-e.y)*(r-e.y)),this.y=bs(e.theta(new me(t,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new me(0,0);return t.angleBetween(this,e)}};me.prototype.translate=me.prototype.offset;const Zp=me,{max:ZS,min:QS}=Math,Et=function(e,t){if(!(this instanceof Et))return new Et(e,t);if(e instanceof Et)return new Et(e.start,e.end);this.start=new me(e),this.end=new me(t)};Et.prototype={type:br.Line,angle:function(){var e=new me(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=QS(this.start.x,this.end.x),t=QS(this.start.y,this.end.y),r=ZS(this.start.x,this.end.x),n=ZS(this.start.y,this.end.y);return new yt(e,t,r-e,n-t)},bearing:function(){return o$(this.start,this.end)},clone:function(){return new Et(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new Et(this.start,e).vector()),r=QS(1,ZS(0,t/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var n=this.length();return!(new Et(t,e).length()>n||new Et(e,r).length()>n)},divideAt:function(e){var t=this.pointAt(e);return[new Et(this.start,t),new Et(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new Et(this.start,t),new Et(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var r=e.intersectionWithLine(this,t);return r&&e instanceof Et&&(r=r[0]),r}return null},intersectionWithLine:function(e){var t=new me(this.end.x-this.start.x,this.end.y-this.start.y),r=new me(e.end.x-e.start.x,e.end.y-e.start.y),n=t.x*r.y-t.y*r.x,i=new me(e.start.x-this.start.x,e.start.y-this.start.y),s=i.x*r.y-i.y*r.x,o=i.x*t.y-i.y*t.x;if(n===0||s*n<0||o*n<0)return null;if(n>0){if(s>n||o>n)return null}else if(s<n||o<n)return null;return[new me(this.start.x+s*t.x/n,this.start.y+s*t.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return a$(this.start,this.end)},midpoint:function(){return new me((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:r,end:n}=t,i=r.clone().rotate(n,270),s=n.clone().rotate(r,90);return r.move(s,e),n.move(i,e),t},pointAt:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)},pointAtLength:function(e){var t=this.start,r=this.end,n=!0;e<0&&(n=!1,e=-e);var i=this.length();return e>=i?n?r.clone():t.clone():this.pointAt((n?e:i-e)/i)},pointOffset:function(e){e=new me(e);var t=this.start,r=this.end,n=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x);return n/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this},setLength:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)},squaredLength:function(){return _A(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAt(e),i=new Et(t,r);return i.translate(n.x-t.x,n.y-t.y),i},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAtLength(e),i=new Et(t,r);return i.translate(n.x-t.x,n.y-t.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new me(this.end.x-this.start.x,this.end.y-this.start.y)}};Et.prototype.intersection=Et.prototype.intersect;const bc=Et,{sqrt:$z,round:gp,pow:cfe}=Math,rs=function(e,t,r){if(!(this instanceof rs))return new rs(e,t,r);if(e instanceof rs)return new rs(new me(e.x,e.y),e.a,e.b);e=new me(e),this.x=e.x,this.y=e.y,this.a=t,this.b=r};rs.fromRect=function(e){return e=new yt(e),new rs(e.center(),e.width/2,e.height/2)};rs.prototype={type:br.Ellipse,bbox:function(){return new yt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new me(this.x,this.y)},clone:function(){return new rs(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],r=e.start,n=e.end,i=this.a,s=this.b,o=e.vector(),a=r.difference(new me(this)),u=new me(o.x/(i*i),o.y/(s*s)),c=new me(a.x/(i*i),a.y/(s*s)),f=o.dot(u),h=o.dot(c),v=a.dot(c)-1,y=h*h-f*v;if(y<0)return null;if(y>0){var m=$z(y),_=(-h-m)/f,x=(-h+m)/f;if((_<0||1<_)&&(x<0||1<x))return null;0<=_&&_<=1&&t.push(r.lerp(n,_)),0<=x&&x<=1&&t.push(r.lerp(n,x))}else{var S=-h/f;if(0<=S&&S<=1)t.push(r.lerp(n,S));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new me(e),t&&e.rotate(new me(this.x,this.y),t);var r=e.x-this.x,n=e.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(e),t?i.rotate(new me(this.x,this.y),-t):i;var s=n/r,o=s*s,a=this.a*this.a,u=this.b*this.b,c=$z(1/(1/a+o/u));c=r<0?-c:c;var f=s*c;return i=new me(this.x+c,this.y+f),t?i.rotate(new me(this.x,this.y),-t):i},normalizedDistance:function(e){var t=e.x,r=e.y,n=this.a,i=this.b,s=this.x,o=this.y;return(t-s)*(t-s)/(n*n)+(r-o)*(r-o)/(i*i)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=cfe(10,e);break}return this.x=gp(this.x*t)/t,this.y=gp(this.y*t)/t,this.a=gp(this.a*t)/t,this.b=gp(this.b*t)/t,this},tangentTheta:function(e){var t=30,r=e.x,n=e.y,i=this.a,s=this.b,o=this.bbox().center(),a=o.x,u=o.y,c=r>o.x+i/2,f=r<o.x-i/2,h,v;return c||f?(h=r>o.x?n-t:n+t,v=i*i/(r-a)-i*i*(n-u)*(h-u)/(s*s*(r-a))+a):(v=n>o.y?r+t:r-t,h=s*s/(n-u)-s*s*(r-a)*(v-a)/(i*i*(n-u))+u),new me(v,h).theta(e)},toString:function(){return new me(this.x,this.y).toString()+" "+this.a+" "+this.b}};const lfe=rs,{abs:Uz,cos:ffe,sin:hfe,min:Kf,max:jz,round:mp,pow:dfe}=Math,yt=function(e,t,r,n){if(!(this instanceof yt))return new yt(e,t,r,n);Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=r===void 0?0:r,this.height=n===void 0?0:n};yt.fromEllipse=function(e){return e=new rs(e),new yt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};yt.fromPointUnion=function(...e){if(e.length===0)return null;const t=new me;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y;a<r&&(r=a),a>i&&(i=a),u<n&&(n=u),u>s&&(s=u)}return new yt(r,n,i-r,s-n)};yt.fromRectUnion=function(...e){if(e.length===0)return null;const t=new yt;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y,c=a+t.width,f=u+t.height;a<r&&(r=a),c>i&&(i=c),u<n&&(n=u),f>s&&(s=f)}return new yt(r,n,i-r,s-n)};yt.prototype={type:br.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:r}=this,n=bs(e),i=Uz(hfe(n)),s=Uz(ffe(n)),o=t*s+r*i,a=t*i+r*s;return this.x+=(t-o)/2,this.y+=(r-a)/2,this.width=o,this.height=a,this},bottomLeft:function(){return new me(this.x,this.y+this.height)},bottomLine:function(){return new Et(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new me(this.x+this.width/2,this.y+this.height)},center:function(){return new me(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new yt(this)},containsPoint:function(e){return e instanceof me||(e=new me(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new yt(this).normalize(),r=new yt(e).normalize(),n=t.width,i=t.height,s=r.width,o=r.height;if(!n||!i||!s||!o)return!1;var a=t.x,u=t.y,c=r.x,f=r.y;return s+=c,n+=a,o+=f,i+=u,a<=c&&s<=n&&u<=f&&o<=i},corner:function(){return new me(this.x+this.width,this.y+this.height)},equals:function(e){var t=new yt(this).normalize(),r=new yt(e).normalize();return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),r=this.corner(),n=e.origin(),i=e.corner();if(i.x<=t.x||i.y<=t.y||n.x>=r.x||n.y>=r.y)return null;var s=jz(t.x,n.x),o=jz(t.y,n.y);return new yt(s,o,Kf(r.x,i.x)-s,Kf(r.y,i.y)-o)},intersectionWithLine:function(e){var t=this,r=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],n=[],i=[],s,o,a=r.length;for(o=0;o<a;o++)s=e.intersect(r[o]),s!==null&&i.indexOf(s.toString())<0&&(n.push(s),i.push(s.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new me(e);var r=new me(this.x+this.width/2,this.y+this.height/2),n;t&&e.rotate(r,t);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new Et(r,e),o=i.length-1;o>=0;--o){var a=i[o].intersection(s);if(a!==null){n=a;break}}return n&&t&&n.rotate(r,-t),n},leftLine:function(){return new Et(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new me(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new yt(e),t||(t=e.center());var r,n,i,s,o,a,u,c,f=t.x,h=t.y;r=n=i=s=o=a=u=c=1/0;var v=e.topLeft();v.x<f&&(r=(this.x-f)/(v.x-f)),v.y<h&&(o=(this.y-h)/(v.y-h));var y=e.bottomRight();y.x>f&&(n=(this.x+this.width-f)/(y.x-f)),y.y>h&&(a=(this.y+this.height-h)/(y.y-h));var m=e.topRight();m.x>f&&(i=(this.x+this.width-f)/(m.x-f)),m.y<h&&(u=(this.y-h)/(m.y-h));var _=e.bottomLeft();return _.x<f&&(s=(this.x-f)/(_.x-f)),_.y>h&&(c=(this.y+this.height-h)/(_.y-h)),{sx:Kf(r,n,i,s),sy:Kf(o,a,u,c)}},maxRectUniformScaleToFit:function(e,t){var r=this.maxRectScaleToFit(e,t);return Kf(r.sx,r.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,r=this.width,n=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,n=-this.height),this.x=e,this.y=t,this.width=r,this.height=n,this},offset:function(e,t){return me.prototype.offset.call(this,e,t)},origin:function(){return new me(this.x,this.y)},pointNearestToPoint:function(e){if(e=new me(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new me(this.x+this.width,e.y);case"left":return new me(this.x,e.y);case"bottom":return new me(e.x,this.y+this.height);case"top":return new me(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new Et(this.topRight(),this.bottomRight())},rightMiddle:function(){return new me(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=dfe(10,e);break}return this.x=mp(this.x*t)/t,this.y=mp(this.y*t)/t,this.width=mp(this.width*t)/t,this.height=mp(this.height*t)/t,this},scale:function(e,t,r){return r=this.origin().scale(e,t,r),this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new me(e);var t=e.x-this.x,r=this.x+this.width-e.x,n=e.y-this.y,i=this.y+this.height-e.y,s=t,o="left";return r<s&&(s=r,o="right"),n<s&&(s=n,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(e,t){var r=this.origin().snapToGrid(e,t),n=this.corner().snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Et(this.topLeft(),this.topRight())},topMiddle:function(){return new me(this.x+this.width/2,this.y)},topRight:function(){return new me(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return yt.fromRectUnion(this,e)},update:function(e,t,r,n){return Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this}};yt.prototype.bottomRight=yt.prototype.corner;yt.prototype.topLeft=yt.prototype.origin;yt.prototype.translate=yt.prototype.offset;const pfe=yt;function u$(e){const t=e.trim();if(t==="")return[];const r=[],n=t.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let s=0;s<i;s+=2)r.push({x:+n[s],y:+n[s+1]});return r}function c$(e){const t=e.length;if(t===0)return[];const r=[];for(let n=0;n<t;n++){const i=e[n].clone();r.push(i)}return r}function l$(e){const{abs:t}=Math;var r,n,i=e.length;if(i===0)return[];var s;for(r=0;r<i;r++)(s===void 0||e[r].y<s.y||e[r].y===s.y&&e[r].x>s.x)&&(s=e[r]);var o=[];for(r=0;r<i;r++){var a=s.theta(e[r]);a===0&&(a=360);var u=[e[r],r,a];o.push(u)}if(o.sort(function(U,Y){var oe=U[2]-Y[2];return oe===0&&(oe=Y[1]-U[1]),oe}),o.length>2){var c=o[o.length-1];o.unshift(c)}for(var f={},h=[],v,y,m,_,x,S;o.length!==0;)if(v=o.pop(),y=v[0],!f.hasOwnProperty(v[0]+"@@"+v[1]))for(var P=!1;!P;)if(h.length<2)h.push(v),P=!0;else{m=h.pop(),_=m[0],x=h.pop(),S=x[0];var T=S.cross(_,y);if(T<0)h.push(x),h.push(m),h.push(v),P=!0;else if(T===0){var E=1e-10,O=_.angleBetween(S,y);t(O-180)<E||_.equals(y)||S.equals(_)?(f[m[0]+"@@"+m[1]]=_,h.push(x)):t((O+1)%360-1)<E&&(h.push(x),o.push(m))}else f[m[0]+"@@"+m[1]]=_,h.push(x)}h.length>2&&h.pop();var N,d=-1;for(n=h.length,r=0;r<n;r++){var C=h[r][1];(N===void 0||C<N)&&(N=C,d=r)}var R=[];if(d>0){var k=h.slice(d),B=h.slice(0,d);R=k.concat(B)}else R=h;var z=[];for(n=R.length,r=0;r<n;r++)z.push(R[r][0]);return z}const wn=function(e){if(!(this instanceof wn))return new wn(e);if(typeof e=="string")return new wn.parse(e);this.points=Array.isArray(e)?e.map(me):[]};wn.parse=function(e){return new wn(u$(e))};wn.fromRect=function(e){return new wn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};wn.prototype={type:br.Polyline,bbox:function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var a=i[o],u=a.x,c=a.y;u<e&&(e=u),u>t&&(t=u),c<r&&(r=c),c>n&&(n=c)}return new yt(e,r,t-e,n-r)},clone:function(){return new wn(c$(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return 0;for(var n,i=1/0,s=0,o=r-1,a=0;a<o;a++){var u=new Et(t[a],t[a+1]),c=u.length(),f=u.closestPointNormalizedLength(e),h=u.pointAt(f),v=h.squaredDistance(e);v<i&&(i=v,n=s+f*c),s+=c}return n},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,r=t.length;if(r===0)return!1;for(var n=e.x,i=e.y,s=r-1,o=0,a=0,u=new Et,c=new Et,f=new me;o<r;o++){var h=t[s],v=t[o];if(e.equals(h)||(u.start=h,u.end=v,u.containsPoint(e)))return!0;if(i<=h.y&&i>v.y||i>h.y&&i<=v.y){var y=h.x-n>v.x-n?h.x-n:v.x-n;y>=0&&(f.x=n+y,f.y=i,c.start=e,c.end=f,u.intersect(c)&&a++)}s=o}return a%2===1},close:function(){const{start:e,end:t,points:r}=this;return e&&t&&!e.equals(t)&&r.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new wn(l$(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=e.points,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=e.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(e){for(var t=new Et(e),r=[],n=this.lengthPoints(),i=new Et,s=0,o=n.length-1;s<o;s++){i.start=n[s],i.end=n[s+1];var a=t.intersectionWithLine(i);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var r=new Et,n=t-1,i=0;i<n;i++)if(r.start=e[i],r.end=e[i+1],r.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var r=0,n=t-1,i=0;i<n;i++)r+=e[i].distance(e[i+1]);return r},pointAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var n=this.length(),i=n*e;return this.pointAtLength(i)},pointAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var n=!0;e<0&&(n=!1,e=-e);for(var i=0,s=r-1,o=0;o<s;o++){var a=n?o:s-1-o,u=t[a],c=t[a+1],f=new Et(u,c),h=u.distance(c);if(e<=i+h)return f.pointAtLength((n?1:-1)*(e-i));i+=h}var v=n?t[r-1]:t[0];return v.clone()},round:function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].round(e);return this},scale:function(e,t,r){for(var n=this.points,i=n.length,s=0;s<i;s++)n[s].scale(e,t,r);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||1e-10;let n=0;for(;t[n+2];){const i=n,s=n+1,o=n+2,a=t[i],u=t[s],c=t[o];new Et(a,c).closestPoint(u).distance(u)<=r?t.splice(s,1):n+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var n=this.length(),i=n*e;return this.tangentAtLength(i)},tangentAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;var n=!0;e<0&&(n=!1,e=-e);for(var i,s=0,o=r-1,a=0;a<o;a++){var u=n?a:o-1-a,c=t[u],f=t[u+1],h=new Et(c,f),v=c.distance(f);if(h.isDifferentiable()){if(e<=s+v)return h.tangentAtLength((n?1:-1)*(e-s));i=h}s+=v}if(i){var y=n?1:0;return i.tangentAt(y)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var r="",n=0;n<t;n++){var i=e[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(wn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(wn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});const{abs:yp,sqrt:vfe,min:Hz,max:Wz,pow:eE}=Math,Qr=function(e,t,r,n){if(!(this instanceof Qr))return new Qr(e,t,r,n);if(e instanceof Qr)return new Qr(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new me(e),this.controlPoint1=new me(t),this.controlPoint2=new me(r),this.end=new me(n)};Qr.throughPoints=function(){function e(r){var n=[],i=[],s=r.length-1,o;if(s==1)return n[0]=new me((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new me(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var a=[];for(o=1;o<s-1;o++)a[o]=4*r[o].x+2*r[o+1].x;a[0]=r[0].x+2*r[1].x,a[s-1]=(8*r[s-1].x+r[s].x)/2;var u=t(a);for(o=1;o<s-1;++o)a[o]=4*r[o].y+2*r[o+1].y;a[0]=r[0].y+2*r[1].y,a[s-1]=(8*r[s-1].y+r[s].y)/2;var c=t(a);for(o=0;o<s;o++)n.push(new me(u[o],c[o])),o<s-1?i.push(new me(2*r[o+1].x-u[o+1],2*r[o+1].y-c[o+1])):i.push(new me((r[s].x+u[s-1])/2,(r[s].y+c[s-1])/2));return[n,i]}function t(r){var n=r.length,i=[],s=[],o=2;i[0]=r[0]/o;for(var a=1;a<n;a++)s[a]=1/o,o=(a<n-1?4:3.5)-s[a],i[a]=(r[a]-i[a-1])/o;for(a=1;a<n;a++)i[n-a-1]-=s[n-a]*i[n-a];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=e(r),i=[],s=n[0].length,o=0;o<s;o++){var a=new me(n[0][o].x,n[0][o].y),u=new me(n[1][o].x,n[1][o].y);i.push(new Qr(r[o],a,u,r[o+1]))}return i}}();Qr.prototype={type:br.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end,i=e.x,s=e.y,o=t.x,a=t.y,u=r.x,c=r.y,f=n.x,h=n.y,v=new Array,y=new Array,m=[new Array,new Array],_,x,S,P,T,E,O,N,d=0;d<2;++d){if(d===0?(x=6*i-12*o+6*u,_=-3*i+9*o-9*u+3*f,S=3*o-3*i):(x=6*s-12*a+6*c,_=-3*s+9*a-9*c+3*h,S=3*a-3*s),yp(_)<1e-12){if(yp(x)<1e-12)continue;P=-S/x,0<P&&P<1&&y.push(P);continue}O=x*x-4*S*_,N=vfe(O),!(O<0)&&(T=(-x+N)/(2*_),0<T&&T<1&&y.push(T),E=(-x-N)/(2*_),0<E&&E<1&&y.push(E))}for(var C=y.length,R=C,k,B,z;C--;)P=y[C],k=1-P,B=k*k*k*i+3*k*k*P*o+3*k*P*P*u+P*P*P*f,m[0][C]=B,z=k*k*k*s+3*k*k*P*a+3*k*P*P*c+P*P*P*h,m[1][C]=z,v[C]={X:B,Y:z};y[R]=0,y[R+1]=1,v[R]={X:i,Y:s},v[R+1]={X:f,Y:h},m[0][R]=i,m[1][R]=s,m[0][R+1]=f,m[1][R+1]=h,y.length=R+2,m[0].length=R+2,m[1].length=R+2,v.length=R+2;var U=Hz.apply(null,m[0]),Y=Hz.apply(null,m[1]),oe=Wz.apply(null,m[0]),W=Wz.apply(null,m[1]);return new yt(U,Y,oe-U,W-Y)},clone:function(){return new Qr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.closestPointLength(e,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i,s,o,a,u,c,f,h=n.length,v=h?1/h:0,y=0;y<h;y++){var m=n[y],_=m.start.distance(e),x=m.end.distance(e),S=_+x;(!f||S<f)&&(i=m,s=y*v,o=(y+1)*v,a=_,u=x,c=m.start.distance(m.end),f=S)}for(var P=eE(10,-r);;){var T=a?yp(a-u)/a:0,E=u?yp(a-u)/u:0,O=T<P||E<P,N=a?a<c*P:!0,d=u?u<c*P:!0,C=N||d;if(O||C)return a<=u?s:o;var R=i.divide(.5);v/=2;var k=R[0].start.distance(e),B=R[0].end.distance(e),z=k+B,U=R[1].start.distance(e),Y=R[1].end.distance(e),oe=U+Y;z<=oe?(i=R[0],o-=v,a=k,u=B):(i=R[1],s+=v,a=U,u=Y)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var r=this.toPolyline(t);return r.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)},divideAtLength:function(e,t){var r=this.tAtLength(e,t);return this.divideAtT(r)},divideAtT:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return[new Qr(t,t,t,t),new Qr(t,r,n,i)];if(e>=1)return[new Qr(t,r,n,i),new Qr(i,i,i,i)];var s=this.getSkeletonPoints(e),o=s.startControlPoint1,a=s.startControlPoint2,u=s.divider,c=s.dividerControlPoint1,f=s.dividerControlPoint2;return[new Qr(t,o,a,u),new Qr(u,c,f,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new Et(t,r).pointAt(e),o=new Et(r,n).pointAt(e),a=new Et(n,i).pointAt(e),u=new Et(s,o).pointAt(e),c=new Et(o,a).pointAt(e),f=new Et(u,c).pointAt(e),h={startControlPoint1:s,startControlPoint2:u,divider:f,dividerControlPoint1:c,dividerControlPoint2:a};return h},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new Qr(r,n,i,s)];if(t===0)return o;var a=!this.isDifferentiable();if(a)return o;var u=this.endpointDistance(),c=eE(10,-t),f=2,h=n.cross(r,s)===0&&i.cross(r,s)===0;h&&(f=2*t);for(var v=0;;){v+=1;for(var y=[],m=o.length,_=0;_<m;_++){var x=o[_],S=x.divide(.5);y.push(S[0],S[1])}for(var P=0,T=y.length,E=0;E<T;E++){var O=y[E];P+=O.endpointDistance()}if(v>=f){var N=P!==0?(P-u)/P:0;if(N<c)return y}o=y,u=P}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=0,i=r.length,s=0;s<i;s++){var o=r[s];n+=o.endpointDistance()}return n},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=this.divide(e)[0],i=n.length({precision:r});return i},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)},pointAtLength:function(e,t){var r=this.tAtLength(e,t);return this.pointAtT(r)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,n=t.dividerControlPoint1,i=t.divider,s=new Et(r,n);return s.translate(i.x-r.x,i.y-r.y),s},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.length(i),o=s*e;return this.tAtLength(o,i)},tAtLength:function(e,t){var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:i},o,a,u,c,f,h=0,v=i.length,y=1/v,m=0;m<v;m++){var _=r?m:v-1-m,x=i[m],S=x.endpointDistance();if(e<=h+S){o=x,a=_*y,u=(_+1)*y,c=r?e-h:S+h-e,f=r?S+h-e:e-h;break}h+=S}if(!o)return r?1:0;for(var P=this.length(s),T=eE(10,-n);;){var E;if(E=P!==0?c/P:0,E<T)return a;if(E=P!==0?f/P:0,E<T)return u;var O,N,d=o.divide(.5);y/=2;var C=d[0].endpointDistance(),R=d[1].endpointDistance();c<=C?(o=d[0],u-=y,O=c,N=C-O):(o=d[1],a+=y,O=c-C,N=R-O),c=O,f=N}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=[r[0].start.clone()],i=r.length,s=0;s<i;s++){var o=r[s];n.push(o.end.clone())}return n},toPolyline:function(e){return new wn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Qr.prototype.divide=Qr.prototype.divideAtT;function ed(e){var t,r,n=[];for(r=arguments.length,t=1;t<r;t++)n.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var i=Object.create(e);for(r=n.length,t=0;t<r;t++){var s=n[t],o,a;for(a in s)s.hasOwnProperty(a)&&(delete i[a],o=Object.getOwnPropertyDescriptor(s,a),Object.defineProperty(i,a,o))}return i}const zt=function(e){if(!(this instanceof zt))return new zt(e);if(typeof e=="string")return new zt.parse(e);this.segments=[];var t,r;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(a,u){return a.concat(u)},[]),r=e.length,e[0].isSegment)for(t=0;t<r;t++){var n=e[t];this.appendSegment(n)}else{var i=null;for(t=0;t<r;t++){var s=e[t];if(!(s instanceof Et||s instanceof Qr))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(zt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(zt.createSegment("M",s.start)),s instanceof Et?this.appendSegment(zt.createSegment("L",s.end)):s instanceof Qr&&this.appendSegment(zt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof Et)this.appendSegment(zt.createSegment("M",e.start)),this.appendSegment(zt.createSegment("L",e.end));else if(e instanceof Qr)this.appendSegment(zt.createSegment("M",e.start)),this.appendSegment(zt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof wn){if(!(e.points&&e.points.length!==0))return;for(r=e.points.length,t=0;t<r;t++){var o=e.points[t];t===0?this.appendSegment(zt.createSegment("M",o)):this.appendSegment(zt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};zt.parse=function(e){if(!e)return new zt;for(var t=new zt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=e.match(r),i=n.length,s=0;s<i;s++){var o=n[s],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=o.match(a),c=zt.createSegment.apply(this,u);t.appendSegment(c)}return t};zt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=zt.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return wa(t,r)};zt.prototype={type:br.Path,appendSegment:function(e){var t=this.segments,r=t.length,n,i=r!==0?t[r-1]:null,s=null;if(Array.isArray(e)){if(e=e.reduce(function(c,f){return c.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var o=e.length,a=0;a<o;a++){var u=e[a];n=this.prepareSegment(u,i,s),t.push(n),i=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,i,s),t.push(n)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,n=0;n<t;n++){var i=e[n];if(i.isVisible){var s=i.bbox();r=r?r.union(s):s}}if(r)return r;var o=e[t-1];return new yt(o.end.x,o.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,r=new zt,n=0;n<t;n++){var i=e[n].clone();r.appendSegment(i)}return r},closestPoint:function(e,t){var r=this.closestPointT(e,t);return r?this.pointAtT(r):null},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointT(e,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointLength(e,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isVisible){var h=c.closestPointT(e,{precision:i,subdivisions:f}),v=c.pointAtT(h),y=new Et(v,e).squaredLength();y<a&&(o={segmentIndex:u,value:h},a=y)}}return o||{segmentIndex:n-1,value:1}},closestPointTangent:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isDifferentiable()){var h=c.closestPointT(e,{precision:i,subdivisions:f}),v=c.pointAtT(h),y=new Et(v,e).squaredLength();y<a&&(o=c.tangentAtT(h),a=y)}}return o||null},containsPoint:function(e,t){var r=this.toPolylines(t);if(!r)return!1;for(var n=r.length,i=0,s=0;s<n;s++){var o=r[s];o.containsPoint(e)&&i++}return i%2===1},divideAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.divideAtLength(u,o)},divideAtLength:function(e,t){var r=this.segments.length;if(r===0)return null;var n=!0;e<0&&(n=!1,e=-e),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a,u=0,c,f,h,v,y;for(o=0;o<r;o++){var m=n?o:r-1-o;a=this.getSegment(m);var _=s[m],x=a.length({precision:i,subdivisions:_});if(a.isDifferentiable()&&(h=a,v=m,e<=u+x)){f=m,c=a.divideAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:_});break}u+=x}if(!h)return null;c||(f=v,y=n?1:0,c=h.divideAtT(y));var S=this.clone();S.replaceSegment(f,c);var P=f,T=f+1,E=f+2;c[0].isDifferentiable()||(S.removeSegment(P),T-=1,E-=1);var O=S.getSegment(T).start;S.insertSegment(T,zt.createSegment("M",O)),E+=1,c[1].isDifferentiable()||(S.removeSegment(E-1),E-=1);var N=E-P-1;for(o=E;o<S.segments.length;o++){var d=this.getSegment(o-N);if(a=S.getSegment(o),a.type==="Z"&&!d.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var C=zt.createSegment("L",d.end);S.replaceSegment(o,C)}}var R=new zt(S.segments.slice(0,T)),k=new zt(S.segments.slice(T));return[R,k]},equals:function(e){if(!e)return!1;var t=this.segments,r=e.segments,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=r[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,r=t.length;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=[],s=0;s<r;s++){var o=t[s],a=o.getSubdivisions({precision:n});i.push(a)}return i},getSubpaths:function(){const t=this.clone().validate().segments,r=t.length,n=[];for(let i=0;i<r;i++){const s=t[i];s.isSubpathStart?n.push(new zt(s)):n[n.length-1].appendSegment(s)}return n},insertSegment:function(e,t){var r=this.segments,n=r.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");var i,s=null,o=null;if(n!==0&&(e>=1?(s=r[e-1],o=s.nextSegment):o=r[0]),Array.isArray(t)){if(t=t.reduce(function(f,h){return f.concat(h)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++){var c=t[u];i=this.prepareSegment(c,s,o),r.splice(e+u,0,i),s=i}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,o),r.splice(e,0,i)}},intersectionWithLine:function(e,t){var r=null,n=this.toPolylines(t);if(!n)return null;for(var i=0,s=n.length;i<s;i++){var o=n[i],a=e.intersect(o);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var e=this.segments,t=e.length,r=0;r<t;r++){var n=e[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,r=t.length;if(r===0)return 0;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=0,o=0;o<r;o++){var a=t[o],u=i[o];s+=a.length({subdivisions:u})}return s},lengthAtT:function(e,t){var r=this.segments,n=r.length;if(n===0)return 0;var i=e.segmentIndex;if(i<0)return 0;var s=e.value;i>=n?(i=n-1,s=1):s<0?s=0:s>1&&(s=1),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u,c=0,f=0;f<i;f++){var h=r[f];u=a[f],c+=h.length({precisison:o,subdivisions:u})}return h=r[i],u=a[i],c+=h.lengthAtT(s,{precisison:o,subdivisions:u}),c},pointAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.pointAtLength(u,o)},pointAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e===0)return this.start.clone();var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],v=o[f],y=h.length({precision:s,subdivisions:v});if(h.isVisible){if(e<=u+y)return h.pointAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:v});a=h}u+=y}if(a)return i?a.end:a.start;var m=r[n-1];return m.end.clone()},pointAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].pointAtT(0);if(n>=r)return t[r-1].pointAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].pointAtT(i)},PRECISION:3,prepareSegment:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t&&(t.nextSegment=e),r&&(r.previousSegment=e);var n=e;return e.isSubpathStart&&(e.subpathStartSegment=e,n=r),n&&this.updateSubpathStartSegment(n),e},removeSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var n=t.splice(e,1)[0],i=n.previousSegment,s=n.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),n.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,t){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var i,s=r[e],o=s.previousSegment,a=s.nextSegment,u=s.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(v,y){return v.concat(y)},[]),!t[0].isSegment)throw new Error("Segments required.");r.splice(e,1);for(var c=t.length,f=0;f<c;f++){var h=t[f];i=this.prepareSegment(h,o,a),r.splice(e+f,0,i),o=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,o,a),r.splice(e,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,r=t.length,n=0;n<r;n++){var i=t[n];i.round(e)}return this},scale:function(e,t,r){for(var n=this.segments,i=n.length,s=0;s<i;s++){var o=n[s];o.scale(e,t,r)}return this},segmentAt:function(e,t){var r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null},segmentAtLength:function(e,t){var r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null},segmentIndexAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.segmentIndexAtLength(u,o)},segmentIndexAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a=null,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],v=o[f],y=h.length({precision:s,subdivisions:v});if(h.isVisible){if(e<=u+y)return f;a=f}u+=y}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.tangentAtLength(u,o)},tangentAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],v=o[f],y=h.length({precision:s,subdivisions:v});if(h.isDifferentiable()){if(e<=u+y)return h.tangentAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:v});a=h}u+=y}if(a){var m=i?1:0;return a.tangentAtT(m)}return null},tangentAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].tangentAtT(0);if(n>=r)return t[r-1].tangentAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].tangentAtT(i)},toPoints:function(e){var t=this.segments,r=t.length;if(r===0)return null;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=[],o=[],a=0;a<r;a++){var u=t[a];if(u.isVisible){var c=i[a];if(c.length>0){var f=c.map(function(h){return h.start});Array.prototype.push.apply(o,f)}else o.push(u.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(e){var t=[],r=this.toPoints(e);if(!r)return null;for(var n=0,i=r.length;n<i;n++)t.push(new wn(r[n]));return t},toString:function(){for(var e=this.segments,t=e.length,r="",n=0;n<t;n++){var i=e[n];r+=i.serialize()+" "}return r.trim()},translate:function(e,t){for(var r=this.segments,n=r.length,i=0;i<n;i++){var s=r[i];s.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,zt.createSegment("M",0,0)),this}};Object.defineProperty(zt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r++){var n=e[r];if(n.isVisible)return n.start}return e[t-1].end}});Object.defineProperty(zt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r--){var n=e[r];if(n.isVisible)return n.end}return e[t-1].end}});function wa(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var jc={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(jc,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(jc,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(jc,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ri=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Ri))return wa(Ri,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof Et){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new me(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),n.push(wa(Ri,i));return n}else{if(t===1)return this.end=new me(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],n.push(new Ri(s));return n}},f$={clone:function(){return new Ri(this.end)},divideAt:function(e){var t=new Et(this.start,this.end),r=t.divideAt(e);return[new Ri(r[0]),new Ri(r[1])]},divideAtLength:function(e){var t=new Et(this.start,this.end),r=t.divideAtLength(e);return[new Ri(r[0]),new Ri(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(f$,"type",{configurable:!0,enumerable:!0,value:"L"});Ri.prototype=ed(jc,Et.prototype,f$);var Ns=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Ns))return wa(Ns,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(e[0]instanceof Qr){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new me(+e[0],+e[1]),this.controlPoint2=new me(+e[2],+e[3]),this.end=new me(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=6)i=e.slice(r,r+6),n.push(wa(Ns,i));return n}else{if(t===3)return this.controlPoint1=new me(e[0]),this.controlPoint2=new me(e[1]),this.end=new me(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var s;for(n=[],r=0;r<t;r+=3)s=e.slice(r,r+3),n.push(wa(Ns,s));return n}},h$={clone:function(){return new Ns(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new Qr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(e,t);return[new Ns(n[0]),new Ns(n[1])]},divideAtLength:function(e,t){var r=new Qr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(e,t);return[new Ns(n[0]),new Ns(n[1])]},divideAtT:function(e){var t=new Qr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=t.divideAtT(e);return[new Ns(r[0]),new Ns(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(h$,"type",{configurable:!0,enumerable:!0,value:"C"});Ns.prototype=ed(jc,Qr.prototype,h$);var gc=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof gc))return wa(gc,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof Et){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof Qr){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new me(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),r===0?n.push(wa(gc,i)):n.push(wa(Ri,i));return n}else{if(t===1)return this.end=new me(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],r===0?n.push(new gc(s)):n.push(new Ri(s));return n}},bA={bbox:function(){return null},clone:function(){return new gc(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(bA,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(bA,"type",{configurable:!0,enumerable:!0,value:"M"});gc.prototype=ed(jc,bA);var $l=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof $l))return wa($l,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},wA={clone:function(){return new $l},divideAt:function(e){var t=new Et(this.start,this.end),r=t.divideAt(e);return[r[1].isDifferentiable()?new Ri(r[0]):this.clone(),new Ri(r[1])]},divideAtLength:function(e){var t=new Et(this.start,this.end),r=t.divideAtLength(e);return[r[1].isDifferentiable()?new Ri(r[0]):this.clone(),new Ri(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(wA,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(wA,"type",{configurable:!0,enumerable:!0,value:"Z"});$l.prototype=ed(jc,Et.prototype,wA);var gfe=zt.segmentTypes={L:Ri,C:Ns,M:gc,Z:$l,z:$l};zt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(gfe).join("")+",.]*$");zt.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};const mfe={curveThroughPoints:function(e){return console.warn("deprecated"),new zt(Qr.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],r=[],n=e.length-1,i;if(n==1)return t[0]=new me((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=new me(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,r];var s=[];for(i=1;i<n-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[n-1]=(8*e[n-1].x+e[n].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<n-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[n-1]=(8*e[n-1].y+e[n].y)/2;var a=this.getFirstControlPoints(s);for(i=0;i<n;i++)t.push(new me(o[i],a[i])),i<n-1?r.push(new me(2*e[i+1].x-o[i+1],2*e[i+1].y-a[i+1])):r.push(new me((e[n].x+o[n-1])/2,(e[n].y+a[n-1])/2));return[t,r]},getCurveDivider:function(e,t,r,n){console.warn("deprecated");var i=new Qr(e,t,r,n);return function(o){var a=i.divide(o);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,r=[],n=[],i=2;r[0]=e[0]/i;for(var s=1;s<t;s++)n[s]=1/i,i=(s<t-1?4:3.5)-n[s],r[s]=(e[s]-r[s-1])/i;for(s=1;s<t;s++)r[t-s-1]-=n[t-s]*r[t-s];return r},getInversionSolver:function(e,t,r,n){console.warn("deprecated");var i=new Qr(e,t,r,n);return function(o){return i.closestPointT(o)}}},ws=function(e){if(!(this instanceof ws))return new ws(e);if(typeof e=="string")return new ws.parse(e);this.points=Array.isArray(e)?e.map(me):[]};ws.parse=function(e){return new ws(u$(e))};ws.fromRect=function(e){return new ws([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};ws.prototype=ed(wn.prototype,{type:br.Polygon,clone:function(){return new ws(c$(this.points))},convexHull:function(){return new ws(l$(this.points))},lengthPoints:function(){const{start:e,end:t,points:r}=this;return r.length<=1||e.equals(t)?r:[...r,e.clone()]}});function d$(e,t,r,n){switch(e.type){case br.Line:{switch(t.type){case br.Line:return mc(e,t)}break}case br.Ellipse:{switch(t.type){case br.Line:return xA(e,t);case br.Ellipse:return p$(e,t)}break}case br.Rect:{switch(t.type){case br.Line:return v$(e,t);case br.Ellipse:return g$(e,t);case br.Rect:return SA(e,t)}break}case br.Polyline:{switch(t.type){case br.Line:return cg(e,t);case br.Ellipse:return EA(e,t);case br.Rect:return m$(e,t);case br.Polyline:return y$(e,t)}break}case br.Polygon:{switch(t.type){case br.Line:return AA(e,t);case br.Ellipse:return lg(e,t);case br.Rect:return _$(e,t);case br.Polyline:return b$(e,t);case br.Polygon:return w$(e,t)}break}case br.Path:{switch(t.type){case br.Line:return x$(e,t,r);case br.Ellipse:return S$(e,t,r);case br.Rect:return E$(e,t,r);case br.Polyline:return TA(e,t,r);case br.Polygon:return fg(e,t,r);case br.Path:return A$(e,t,r,n)}break}}switch(t.type){case br.Ellipse:case br.Rect:case br.Polyline:case br.Polygon:case br.Path:return d$(t,e,n,r);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function mc(e,t){const r=e.start.x,n=e.start.y,i=e.end.x,s=e.end.y,o=t.start.x,a=t.start.y,u=t.end.x,c=t.end.y,f=i-r,h=s-n,v=u-o,y=c-a,m=r-o,_=n-a,x=f*y-v*h,S=(f*_-h*m)/x,P=(v*_-y*m)/x;return S>=0&&S<=1&&P>=0&&P<=1}function xA(e,t){const r=e.a,n=e.b,i=e.x,s=e.y,o=t.start.x-i,a=t.end.x-i,u=t.start.y-s,c=t.end.y-s,f=r*r,h=n*n,v=a-o,y=c-u,m=v*v/f+y*y/h,_=2*o*v/f+2*u*y/h,x=o*o/f+u*u/h-1,S=_*_-4*m*x;if(S===0){const P=-_/2/m;return P>=0&&P<=1}else if(S>0){const P=Math.sqrt(S),T=(-_+P)/2/m,E=(-_-P)/2/m;return T>=0&&T<=1||E>=0&&E<=1}return!1}function p$(e,t){return yfe(e,0,t,0)}function v$(e,t){const{start:r,end:n}=t,{x:i,y:s,width:o,height:a}=e;return r.x>i+o&&n.x>i+o||r.x<i&&n.x<i||r.y>s+a&&n.y>s+a||r.y<s&&n.y<s?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:mc(e.topLine(),t)||mc(e.rightLine(),t)||mc(e.bottomLine(),t)||mc(e.leftLine(),t)}function g$(e,t){return SA(e,yt.fromEllipse(t))?lg(ws.fromRect(e),t):!1}function SA(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function cg(e,t){return T$(e,t,{interior:!1})}function EA(e,t){return P$(e,t,{interior:!1})}function m$(e,t){return C$(e,t,{interior:!1})}function y$(e,t){return hg(e,t,{interior:!1})}function AA(e,t){return T$(e,t,{interior:!0})}function lg(e,t){return P$(e,t,{interior:!0})}function _$(e,t){return C$(e,t,{interior:!0})}function b$(e,t){return hg(e,t,{interior:!0})}function w$(e,t){return PA(e,t,{interior:!0})}function x$(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?AA(i,t):cg(i,t)})}function S$(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?lg(i,t):EA(i,t)})}function E$(e,t,r){return fg(e,ws.fromRect(t),r)}function TA(e,t,r){return O$(e,t,r,{interior:!1})}function fg(e,t,r){return O$(e,t,r,{interior:!0})}function A$(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?fg(t,s,n):TA(t,s,n)})}function T$(e,t,r={}){const{interior:n=!1}=r;let i;if(n){if(e.containsPoint(t.start))return!0;const{start:a,end:u,points:c}=e;i=u.equals(a)?c:[...c,a]}else i=e.points;const{length:s}=i,o=new Et;for(let a=0;a<s-1;a++)if(o.start=i[a],o.end=i[a+1],mc(t,o))return!0;return!1}function P$(e,t,r={}){const{start:n,end:i,points:s}=e;if(t.containsPoint(n))return!0;let o;const{interior:a=!1}=r;if(a){if(e.containsPoint(t.center()))return!0;o=i.equals(n)?s:[...s,n]}else o=s;const{length:u}=o,c=new Et;for(let f=0;f<u-1;f++)if(c.start=o[f],c.end=o[f+1],xA(t,c))return!0;return!1}function C$(e,t,r){const n=ws.fromRect(t);return PA(e,n,r)}function O$(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?PA(t,s,n):hg(t,s,n)})}function hg(e,t,r={}){const{interior:n=!1}=r;let i;if(n){const{start:u}=t;if(e.containsPoint(u))return!0;i=e.clone().close()}else i=e;const s=t.points,{length:o}=s,a=new Et;for(let u=0;u<o-1;u++)if(a.start=s[u],a.end=s[u+1],cg(i,a))return!0;return!1}function PA(e,t,r){return t.containsPoint(e.start)||hg(e,t.clone().close(),r)}function yfe(e,t,r,n){const{cos:i,sin:s}=Math,o=s(t),a=i(t),u=s(n),c=i(n),f=o*o,h=a*a,v=o*a,y=u*u,m=c*c,_=u*c,x=e.a*e.a,S=e.b*e.b,P=r.a*r.a,T=r.b*r.b,E=x*f+S*h,O=P*y+T*m,N=x*h+S*f,d=P*m+T*y;let C=2*(S-x)*v,R=2*(T-P)*_,k=-2*E*e.x-C*e.y,B=-2*O*r.x-R*r.y,z=-C*e.x-2*N*e.y,U=-R*r.x-2*d*r.y;const Y=E*e.x*e.x+N*e.y*e.y+C*e.x*e.y-x*S,oe=O*r.x*r.x+d*r.y*r.y+R*r.x*r.y-P*T;C=C/2,R=R/2,k=k/2,B=B/2,z=z/2,U=U/2;const W=Eu([[E,C,k],[C,N,z],[k,z,Y]]),D=Eu([[O,R,B],[R,d,U],[B,U,oe]]),F=.33333333*(Eu([[O,C,k],[R,N,z],[B,z,Y]])+Eu([[E,R,k],[C,d,z],[k,U,Y]])+Eu([[E,C,B],[C,N,U],[k,z,oe]])),H=.33333333*(Eu([[E,R,B],[C,d,U],[k,U,oe]])+Eu([[O,C,B],[R,N,U],[B,z,oe]])+Eu([[O,R,k],[R,d,z],[B,U,Y]])),ie=_p([[W,F],[F,H]]),se=_p([[W,H],[F,D]]),we=_p([[F,H],[H,D]]);return!(_p([[2*ie,se],[se,2*we]])>0&&(H>0||F>0))}function _p(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Eu(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}const _fe=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:p$,ellipseWithLine:xA,exists:d$,lineWithLine:mc,pathWithEllipse:S$,pathWithLine:x$,pathWithPath:A$,pathWithPolygon:fg,pathWithPolyline:TA,pathWithRect:E$,polygonWithEllipse:lg,polygonWithLine:AA,polygonWithPolygon:w$,polygonWithPolyline:b$,polygonWithRect:_$,polylineWithEllipse:EA,polylineWithLine:cg,polylineWithPolyline:y$,polylineWithRect:m$,rectWithEllipse:g$,rectWithLine:v$,rectWithRect:SA},Symbol.toStringTag,{value:"Module"})),bfe=_fe,wfe=Object.freeze(Object.defineProperty({__proto__:null,Curve:Qr,Ellipse:rs,Line:Et,Path:zt,Point:me,Polygon:ws,Polyline:wn,Rect:yt,bezier:mfe,ellipse:lfe,intersection:bfe,line:bc,normalizeAngle:$o,point:Zp,random:kE,rect:pfe,scale:sfe,snapToGrid:Ac,toDeg:ug,toRad:bs,types:br},Symbol.toStringTag,{value:"Module"}));var tE={},CA="1.13.7",Xz=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},dg=Array.prototype,OA=Object.prototype,Yz=typeof Symbol<"u"?Symbol.prototype:null,xfe=dg.push,td=dg.slice,Th=OA.toString,Sfe=OA.hasOwnProperty,I$=typeof ArrayBuffer<"u",Efe=typeof DataView<"u",Afe=Array.isArray,Kz=Object.keys,Jz=Object.create,Zz=I$&&ArrayBuffer.isView,Tfe=isNaN,Pfe=isFinite,R$=!{toString:null}.propertyIsEnumerable("toString"),Qz=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Cfe=Math.pow(2,53)-1;function ss(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function Xu(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function k$(e){return e===null}function IA(e){return e===void 0}function RA(e){return e===!0||e===!1||Th.call(e)==="[object Boolean]"}function M$(e){return!!(e&&e.nodeType===1)}function Vi(e){var t="[object "+e+"]";return function(r){return Th.call(r)===t}}const pg=Vi("String"),kA=Vi("Number"),L$=Vi("Date"),N$=Vi("RegExp"),q$=Vi("Error"),MA=Vi("Symbol"),LA=Vi("ArrayBuffer");var D$=Vi("Function"),Ofe=Xz.document&&Xz.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Ofe!="function"&&(D$=function(e){return typeof e=="function"||!1});const zi=D$,F$=Vi("Object");var B$=Efe&&(!/\[native code\]/.test(String(DataView))||F$(new DataView(new ArrayBuffer(8)))),NA=typeof Map<"u"&&F$(new Map),Ife=Vi("DataView");function Rfe(e){return e!=null&&zi(e.getInt8)&&LA(e.buffer)}const Ph=B$?Rfe:Ife,Yu=Afe||Vi("Array");function Ku(e,t){return e!=null&&Sfe.call(e,t)}var NE=Vi("Arguments");(function(){NE(arguments)||(NE=function(e){return Ku(e,"callee")})})();const vg=NE;function z$(e){return!MA(e)&&Pfe(e)&&!isNaN(parseFloat(e))}function qA(e){return kA(e)&&Tfe(e)}function DA(e){return function(){return e}}function V$(e){return function(t){var r=e(t);return typeof r=="number"&&r>=0&&r<=Cfe}}function G$(e){return function(t){return t==null?void 0:t[e]}}const Qp=G$("byteLength"),kfe=V$(Qp);var Mfe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Lfe(e){return Zz?Zz(e)&&!Ph(e):kfe(e)&&Mfe.test(Th.call(e))}const FA=I$?Lfe:DA(!1),Es=G$("length");function Nfe(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function $$(e,t){t=Nfe(t);var r=Qz.length,n=e.constructor,i=zi(n)&&n.prototype||OA,s="constructor";for(Ku(e,s)&&!t.contains(s)&&t.push(s);r--;)s=Qz[r],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function mi(e){if(!Xu(e))return[];if(Kz)return Kz(e);var t=[];for(var r in e)Ku(e,r)&&t.push(r);return R$&&$$(e,t),t}function U$(e){if(e==null)return!0;var t=Es(e);return typeof t=="number"&&(Yu(e)||pg(e)||vg(e))?t===0:Es(mi(e))===0}function BA(e,t){var r=mi(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function un(e){if(e instanceof un)return e;if(!(this instanceof un))return new un(e);this._wrapped=e}un.VERSION=CA;un.prototype.value=function(){return this._wrapped};un.prototype.valueOf=un.prototype.toJSON=un.prototype.value;un.prototype.toString=function(){return String(this._wrapped)};function e4(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Qp(e))}var t4="[object DataView]";function qE(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:j$(e,t,r,n)}function j$(e,t,r,n){e instanceof un&&(e=e._wrapped),t instanceof un&&(t=t._wrapped);var i=Th.call(e);if(i!==Th.call(t))return!1;if(B$&&i=="[object Object]"&&Ph(e)){if(!Ph(t))return!1;i=t4}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Yz.valueOf.call(e)===Yz.valueOf.call(t);case"[object ArrayBuffer]":case t4:return j$(e4(e),e4(t),r,n)}var s=i==="[object Array]";if(!s&&FA(e)){var o=Qp(e);if(o!==Qp(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(zi(a)&&a instanceof a&&zi(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!qE(e[c],t[c],r,n))return!1}else{var f=mi(e),h;if(c=f.length,mi(t).length!==c)return!1;for(;c--;)if(h=f[c],!(Ku(t,h)&&qE(e[h],t[h],r,n)))return!1}return r.pop(),n.pop(),!0}function H$(e,t){return qE(e,t)}function hf(e){if(!Xu(e))return[];var t=[];for(var r in e)t.push(r);return R$&&$$(e,t),t}function zA(e){var t=Es(e);return function(r){if(r==null)return!1;var n=hf(r);if(Es(n))return!1;for(var i=0;i<t;i++)if(!zi(r[e[i]]))return!1;return e!==Y$||!zi(r[VA])}}var VA="forEach",W$="has",GA=["clear","delete"],X$=["get",W$,"set"],qfe=GA.concat(VA,X$),Y$=GA.concat(X$),Dfe=["add"].concat(GA,VA,W$);const K$=NA?zA(qfe):Vi("Map"),J$=NA?zA(Y$):Vi("WeakMap"),Z$=NA?zA(Dfe):Vi("Set"),Q$=Vi("WeakSet");function Hc(e){for(var t=mi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function eU(e){for(var t=mi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function $A(e){for(var t={},r=mi(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function Ch(e){var t=[];for(var r in e)zi(e[r])&&t.push(r);return t.sort()}function UA(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];(!t||r[c]===void 0)&&(r[c]=s[c])}return r}}const jA=UA(hf),Ul=UA(mi),HA=UA(hf,!0);function Ffe(){return function(){}}function tU(e){if(!Xu(e))return{};if(Jz)return Jz(e);var t=Ffe();t.prototype=e;var r=new t;return t.prototype=null,r}function rU(e,t){var r=tU(e);return t&&Ul(r,t),r}function nU(e){return Xu(e)?Yu(e)?e.slice():jA({},e):e}function iU(e,t){return t(e),e}function WA(e){return Yu(e)?e:[e]}un.toPath=WA;function rd(e){return un.toPath(e)}function XA(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}function YA(e,t,r){var n=XA(e,rd(t));return IA(n)?r:n}function sU(e,t){t=rd(t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(!Ku(e,i))return!1;e=e[i]}return!!r}function gg(e){return e}function Tc(e){return e=Ul({},e),function(t){return BA(t,e)}}function mg(e){return e=rd(e),function(t){return XA(t,e)}}function nd(e,t,r){if(t===void 0)return e;switch(r??3){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function oU(e,t,r){return e==null?gg:zi(e)?nd(e,t,r):Xu(e)&&!Yu(e)?Tc(e):mg(e)}function yg(e,t){return oU(e,t,1/0)}un.iteratee=yg;function As(e,t,r){return un.iteratee!==yg?un.iteratee(e,t):oU(e,t,r)}function aU(e,t,r){t=As(t,r);for(var n=mi(e),i=n.length,s={},o=0;o<i;o++){var a=n[o];s[a]=t(e[a],a,e)}return s}function KA(){}function uU(e){return e==null?KA:function(t){return YA(e,t)}}function cU(e,t,r){var n=Array(Math.max(0,e));t=nd(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function ev(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const jl=Date.now||function(){return new Date().getTime()};function lU(e){var t=function(s){return e[s]},r="(?:"+mi(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(s){return s=s==null?"":""+s,n.test(s)?s.replace(i,t):s}}const fU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},hU=lU(fU),Bfe=$A(fU),dU=lU(Bfe),pU=un.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var rE=/(.)^/,zfe={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Vfe=/\\|'|\r|\n|\u2028|\u2029/g;function Gfe(e){return"\\"+zfe[e]}var $fe=/^\s*(\w|\$)+\s*$/;function vU(e,t,r){!t&&r&&(t=r),t=HA({},t,un.templateSettings);var n=RegExp([(t.escape||rE).source,(t.interpolate||rE).source,(t.evaluate||rE).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(c,f,h,v,y){return s+=e.slice(i,y).replace(Vfe,Gfe),i=y+c.length,f?s+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:v&&(s+=`';
`+v+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!$fe.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(c){throw c.source=s,c}var u=function(c){return a.call(this,c,un)};return u.source="function("+o+`){
`+s+"}",u}function gU(e,t,r){t=rd(t);var n=t.length;if(!n)return zi(r)?r.call(e):r;for(var i=0;i<n;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=r,i=n),e=zi(s)?s.call(e):s}return e}var Ufe=0;function mU(e){var t=++Ufe+"";return e?e+t:t}function yU(e){var t=un(e);return t._chain=!0,t}function _U(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=tU(e.prototype),o=e.apply(s,i);return Xu(o)?o:s}var Wc=ss(function(e,t){var r=Wc.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return _U(e,n,this,this,o)};return n});Wc.placeholder=un;const JA=ss(function(e,t,r){if(!zi(e))throw new TypeError("Bind must be called on a function");var n=ss(function(i){return _U(e,n,t,this,r.concat(i))});return n}),Hs=V$(Es);function Xc(e,t,r,n){if(n=n||[],!t&&t!==0)t=1/0;else if(t<=0)return n.concat(e);for(var i=n.length,s=0,o=Es(e);s<o;s++){var a=e[s];if(Hs(a)&&(Yu(a)||vg(a)))if(t>1)Xc(a,t-1,r,n),i=n.length;else for(var u=0,c=a.length;u<c;)n[i++]=a[u++];else r||(n[i++]=a)}return n}const bU=ss(function(e,t){t=Xc(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=JA(e[n],e)}return e});function wU(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return Ku(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}const ZA=ss(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),xU=Wc(ZA,un,1);function SU(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:jl(),n=null,o=e.apply(i,s),n||(i=s=null)},c=function(){var f=jl();!a&&r.leading===!1&&(a=f);var h=t-(f-a);return i=this,s=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),a=f,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,h)),o};return c.cancel=function(){clearTimeout(n),a=0,n=i=s=null},c}function EU(e,t,r){var n,i,s,o,a,u=function(){var f=jl()-i;t>f?n=setTimeout(u,t-f):(n=null,r||(o=e.apply(a,s)),n||(s=a=null))},c=ss(function(f){return a=this,s=f,i=jl(),n||(n=setTimeout(u,t),r&&(o=e.apply(a,s))),o});return c.cancel=function(){clearTimeout(n),n=s=a=null},c}function AU(e,t){return Wc(t,e)}function _g(e){return function(){return!e.apply(this,arguments)}}function TU(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function PU(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function QA(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const CU=Wc(QA,2);function eT(e,t,r){t=As(t,r);for(var n=mi(e),i,s=0,o=n.length;s<o;s++)if(i=n[s],t(e[i],i,e))return i}function OU(e){return function(t,r,n){r=As(r,n);for(var i=Es(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}const bg=OU(1),tT=OU(-1);function rT(e,t,r,n){r=As(r,n,1);for(var i=r(t),s=0,o=Es(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function IU(e,t,r){return function(n,i,s){var o=0,a=Es(n);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(td.call(n,o,a),qA),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}const nT=IU(1,bg,rT),RU=IU(-1,tT);function Oh(e,t,r){var n=Hs(e)?bg:eT,i=n(e,t,r);if(i!==void 0&&i!==-1)return e[i]}function kU(e,t){return Oh(e,Tc(t))}function Uo(e,t,r){t=nd(t,r);var n,i;if(Hs(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=mi(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function iu(e,t,r){t=As(t,r);for(var n=!Hs(e)&&mi(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function MU(e){var t=function(r,n,i,s){var o=!Hs(r)&&mi(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var c=o?o[u]:u;i=n(i,r[c],c,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,nd(n,s,4),i,o)}}const Il=MU(1),tv=MU(-1);function Vu(e,t,r){var n=[];return t=As(t,r),Uo(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function LU(e,t,r){return Vu(e,_g(As(t)),r)}function rv(e,t,r){t=As(t,r);for(var n=!Hs(e)&&mi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function nv(e,t,r){t=As(t,r);for(var n=!Hs(e)&&mi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function go(e,t,r,n){return Hs(e)||(e=Hc(e)),(typeof r!="number"||n)&&(r=0),nT(e,t,r)>=0}const NU=ss(function(e,t,r){var n,i;return zi(t)?i=t:(t=rd(t),n=t.slice(0,-1),t=t[t.length-1]),iu(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=XA(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function wg(e,t){return iu(e,mg(t))}function qU(e,t){return Vu(e,Tc(t))}function iT(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Hs(e)?e:Hc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=As(t,r),Uo(e,function(c,f,h){o=t(c,f,h),(o>i||o===-1/0&&n===-1/0)&&(n=c,i=o)});return n}function DU(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Hs(e)?e:Hc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=As(t,r),Uo(e,function(c,f,h){o=t(c,f,h),(o<i||o===1/0&&n===1/0)&&(n=c,i=o)});return n}var jfe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function sT(e){return e?Yu(e)?td.call(e):pg(e)?e.match(jfe):Hs(e)?iu(e,gg):Hc(e):[]}function oT(e,t,r){if(t==null||r)return Hs(e)||(e=Hc(e)),e[ev(e.length-1)];var n=sT(e),i=Es(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=ev(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function FU(e){return oT(e,1/0)}function BU(e,t,r){var n=0;return t=As(t,r),wg(iu(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function xg(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=As(n,i),Uo(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}const zU=xg(function(e,t,r){Ku(e,r)?e[r].push(t):e[r]=[t]}),VU=xg(function(e,t,r){e[r]=t}),GU=xg(function(e,t,r){Ku(e,r)?e[r]++:e[r]=1}),$U=xg(function(e,t,r){e[r?0:1].push(t)},!0);function UU(e){return e==null?0:Hs(e)?e.length:mi(e).length}function Hfe(e,t,r){return t in r}const aT=ss(function(e,t){var r={},n=t[0];if(e==null)return r;zi(n)?(t.length>1&&(n=nd(n,t[1])),t=hf(e)):(n=Hfe,t=Xc(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),jU=ss(function(e,t){var r=t[0],n;return zi(r)?(r=_g(r),t.length>1&&(n=t[1])):(t=iu(Xc(t,!1,!1),String),r=function(i,s){return!go(t,s)}),aT(e,r,n)});function uT(e,t,r){return td.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))}function Rl(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[0]:uT(e,e.length-t)}function wc(e,t,r){return td.call(e,t==null||r?1:t)}function HU(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[e.length-1]:wc(e,Math.max(0,e.length-t))}function WU(e){return Vu(e,Boolean)}function XU(e,t){return Xc(e,t,!1)}const cT=ss(function(e,t){return t=Xc(t,!0,!0),Vu(e,function(r){return!go(t,r)})}),YU=ss(function(e,t){return cT(e,t)});function Ih(e,t,r,n){RA(t)||(n=r,r=t,t=!1),r!=null&&(r=As(r,n));for(var i=[],s=[],o=0,a=Es(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?((!o||s!==c)&&i.push(u),s=c):r?go(s,c)||(s.push(c),i.push(u)):go(i,u)||i.push(u)}return i}const KU=ss(function(e){return Ih(Xc(e,!0,!0))});function JU(e){for(var t=[],r=arguments.length,n=0,i=Es(e);n<i;n++){var s=e[n];if(!go(t,s)){var o;for(o=1;o<r&&go(arguments[o],s);o++);o===r&&t.push(s)}}return t}function Rh(e){for(var t=e&&iT(e,Es).length||0,r=Array(t),n=0;n<t;n++)r[n]=wg(e,n);return r}const ZU=ss(Rh);function QU(e,t){for(var r={},n=0,i=Es(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function ej(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function tj(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(td.call(e,n,n+=t));return r}function lT(e,t){return e._chain?un(t).chain():t}function fT(e){return Uo(Ch(e),function(t){var r=un[t]=e[t];un.prototype[t]=function(){var n=[this._wrapped];return xfe.apply(n,arguments),lT(this,r.apply(un,n))}}),un}Uo(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=dg[e];un.prototype[e]=function(){var r=this._wrapped;return r!=null&&(t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0]),lT(this,r)}});Uo(["concat","join","slice"],function(e){var t=dg[e];un.prototype[e]=function(){var r=this._wrapped;return r!=null&&(r=t.apply(r,arguments)),lT(this,r)}});const Wfe=Object.freeze(Object.defineProperty({__proto__:null,VERSION:CA,after:PU,all:rv,allKeys:hf,any:nv,assign:Ul,before:QA,bind:JA,bindAll:bU,chain:yU,chunk:tj,clone:nU,collect:iu,compact:WU,compose:TU,constant:DA,contains:go,countBy:GU,create:rU,debounce:EU,default:un,defaults:HA,defer:xU,delay:ZA,detect:Oh,difference:cT,drop:wc,each:Uo,escape:hU,every:rv,extend:jA,extendOwn:Ul,filter:Vu,find:Oh,findIndex:bg,findKey:eT,findLastIndex:tT,findWhere:kU,first:Rl,flatten:XU,foldl:Il,foldr:tv,forEach:Uo,functions:Ch,get:YA,groupBy:zU,has:sU,head:Rl,identity:gg,include:go,includes:go,indexBy:VU,indexOf:nT,initial:uT,inject:Il,intersection:JU,invert:$A,invoke:NU,isArguments:vg,isArray:Yu,isArrayBuffer:LA,isBoolean:RA,isDataView:Ph,isDate:L$,isElement:M$,isEmpty:U$,isEqual:H$,isError:q$,isFinite:z$,isFunction:zi,isMap:K$,isMatch:BA,isNaN:qA,isNull:k$,isNumber:kA,isObject:Xu,isRegExp:N$,isSet:Z$,isString:pg,isSymbol:MA,isTypedArray:FA,isUndefined:IA,isWeakMap:J$,isWeakSet:Q$,iteratee:yg,keys:mi,last:HU,lastIndexOf:RU,map:iu,mapObject:aU,matcher:Tc,matches:Tc,max:iT,memoize:wU,methods:Ch,min:DU,mixin:fT,negate:_g,noop:KA,now:jl,object:QU,omit:jU,once:CU,pairs:eU,partial:Wc,partition:$U,pick:aT,pluck:wg,property:mg,propertyOf:uU,random:ev,range:ej,reduce:Il,reduceRight:tv,reject:LU,rest:wc,restArguments:ss,result:gU,sample:oT,select:Vu,shuffle:FU,size:UU,some:nv,sortBy:BU,sortedIndex:rT,tail:wc,take:Rl,tap:iU,template:vU,templateSettings:pU,throttle:SU,times:cU,toArray:sT,toPath:WA,transpose:Rh,unescape:dU,union:KU,uniq:Ih,unique:Ih,uniqueId:mU,unzip:Rh,values:Hc,where:qU,without:YU,wrap:AU,zip:ZU},Symbol.toStringTag,{value:"Module"}));var DE=fT(Wfe);DE._=DE;const Xfe=Object.freeze(Object.defineProperty({__proto__:null,VERSION:CA,after:PU,all:rv,allKeys:hf,any:nv,assign:Ul,before:QA,bind:JA,bindAll:bU,chain:yU,chunk:tj,clone:nU,collect:iu,compact:WU,compose:TU,constant:DA,contains:go,countBy:GU,create:rU,debounce:EU,default:DE,defaults:HA,defer:xU,delay:ZA,detect:Oh,difference:cT,drop:wc,each:Uo,escape:hU,every:rv,extend:jA,extendOwn:Ul,filter:Vu,find:Oh,findIndex:bg,findKey:eT,findLastIndex:tT,findWhere:kU,first:Rl,flatten:XU,foldl:Il,foldr:tv,forEach:Uo,functions:Ch,get:YA,groupBy:zU,has:sU,head:Rl,identity:gg,include:go,includes:go,indexBy:VU,indexOf:nT,initial:uT,inject:Il,intersection:JU,invert:$A,invoke:NU,isArguments:vg,isArray:Yu,isArrayBuffer:LA,isBoolean:RA,isDataView:Ph,isDate:L$,isElement:M$,isEmpty:U$,isEqual:H$,isError:q$,isFinite:z$,isFunction:zi,isMap:K$,isMatch:BA,isNaN:qA,isNull:k$,isNumber:kA,isObject:Xu,isRegExp:N$,isSet:Z$,isString:pg,isSymbol:MA,isTypedArray:FA,isUndefined:IA,isWeakMap:J$,isWeakSet:Q$,iteratee:yg,keys:mi,last:HU,lastIndexOf:RU,map:iu,mapObject:aU,matcher:Tc,matches:Tc,max:iT,memoize:wU,methods:Ch,min:DU,mixin:fT,negate:_g,noop:KA,now:jl,object:QU,omit:jU,once:CU,pairs:eU,partial:Wc,partition:$U,pick:aT,pluck:wg,property:mg,propertyOf:uU,random:ev,range:ej,reduce:Il,reduceRight:tv,reject:LU,rest:wc,restArguments:ss,result:gU,sample:oT,select:Vu,shuffle:FU,size:UU,some:nv,sortBy:BU,sortedIndex:rT,tail:wc,take:Rl,tap:iU,template:vU,templateSettings:pU,throttle:SU,times:cU,toArray:sT,toPath:WA,transpose:Rh,unescape:dU,union:KU,uniq:Ih,unique:Ih,uniqueId:mU,unzip:Rh,values:Hc,where:qU,without:YU,wrap:AU,zip:ZU},Symbol.toStringTag,{value:"Module"})),Yfe=Wne(Xfe);var qp={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Kfe=qp.exports,r4;function rj(){return r4||(r4=1,function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:Kfe,function(t,r){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(g){return n.flat.call(g)}:function(g){return n.concat.apply([],g)},a=n.push,u=n.indexOf,c={},f=c.toString,h=c.hasOwnProperty,v=h.toString,y=v.call(Object),m={},_=function(w){return typeof w=="function"&&typeof w.nodeType!="number"&&typeof w.item!="function"},x=function(w){return w!=null&&w===w.window},S=t.document,P={type:!0,src:!0,nonce:!0,noModule:!0};function T(g,w,I){I=I||S;var L,V,$=I.createElement("script");if($.text=g,w)for(L in P)V=w[L]||w.getAttribute&&w.getAttribute(L),V&&$.setAttribute(L,V);I.head.appendChild($).parentNode.removeChild($)}function E(g){return g==null?g+"":typeof g=="object"||typeof g=="function"?c[f.call(g)]||"object":typeof g}var O="3.7.1",N=/HTML$/i,d=function(g,w){return new d.fn.init(g,w)};d.fn=d.prototype={jquery:O,constructor:d,length:0,toArray:function(){return s.call(this)},get:function(g){return g==null?s.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var w=d.merge(this.constructor(),g);return w.prevObject=this,w},each:function(g){return d.each(this,g)},map:function(g){return this.pushStack(d.map(this,function(w,I){return g.call(w,I,w)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(g,w){return(w+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(g,w){return w%2}))},eq:function(g){var w=this.length,I=+g+(g<0?w:0);return this.pushStack(I>=0&&I<w?[this[I]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},d.extend=d.fn.extend=function(){var g,w,I,L,V,$,X=arguments[0]||{},ve=1,ce=arguments.length,Ae=!1;for(typeof X=="boolean"&&(Ae=X,X=arguments[ve]||{},ve++),typeof X!="object"&&!_(X)&&(X={}),ve===ce&&(X=this,ve--);ve<ce;ve++)if((g=arguments[ve])!=null)for(w in g)L=g[w],!(w==="__proto__"||X===L)&&(Ae&&L&&(d.isPlainObject(L)||(V=Array.isArray(L)))?(I=X[w],V&&!Array.isArray(I)?$=[]:!V&&!d.isPlainObject(I)?$={}:$=I,V=!1,X[w]=d.extend(Ae,$,L)):L!==void 0&&(X[w]=L));return X},d.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var w,I;return!g||f.call(g)!=="[object Object]"?!1:(w=i(g),w?(I=h.call(w,"constructor")&&w.constructor,typeof I=="function"&&v.call(I)===y):!0)},isEmptyObject:function(g){var w;for(w in g)return!1;return!0},globalEval:function(g,w,I){T(g,{nonce:w&&w.nonce},I)},each:function(g,w){var I,L=0;if(C(g))for(I=g.length;L<I&&w.call(g[L],L,g[L])!==!1;L++);else for(L in g)if(w.call(g[L],L,g[L])===!1)break;return g},text:function(g){var w,I="",L=0,V=g.nodeType;if(!V)for(;w=g[L++];)I+=d.text(w);return V===1||V===11?g.textContent:V===9?g.documentElement.textContent:V===3||V===4?g.nodeValue:I},makeArray:function(g,w){var I=w||[];return g!=null&&(C(Object(g))?d.merge(I,typeof g=="string"?[g]:g):a.call(I,g)),I},inArray:function(g,w,I){return w==null?-1:u.call(w,g,I)},isXMLDoc:function(g){var w=g&&g.namespaceURI,I=g&&(g.ownerDocument||g).documentElement;return!N.test(w||I&&I.nodeName||"HTML")},merge:function(g,w){for(var I=+w.length,L=0,V=g.length;L<I;L++)g[V++]=w[L];return g.length=V,g},grep:function(g,w,I){for(var L,V=[],$=0,X=g.length,ve=!I;$<X;$++)L=!w(g[$],$),L!==ve&&V.push(g[$]);return V},map:function(g,w,I){var L,V,$=0,X=[];if(C(g))for(L=g.length;$<L;$++)V=w(g[$],$,I),V!=null&&X.push(V);else for($ in g)V=w(g[$],$,I),V!=null&&X.push(V);return o(X)},guid:1,support:m}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=n[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,w){c["[object "+w+"]"]=w.toLowerCase()});function C(g){var w=!!g&&"length"in g&&g.length,I=E(g);return _(g)||x(g)?!1:I==="array"||w===0||typeof w=="number"&&w>0&&w-1 in g}function R(g,w){return g.nodeName&&g.nodeName.toLowerCase()===w.toLowerCase()}var k=n.pop,B=n.sort,z=n.splice,U="[\\x20\\t\\r\\n\\f]",Y=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g");d.contains=function(g,w){var I=w&&w.parentNode;return g===I||!!(I&&I.nodeType===1&&(g.contains?g.contains(I):g.compareDocumentPosition&&g.compareDocumentPosition(I)&16))};var oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function W(g,w){return w?g==="\0"?"ï¿½":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g}d.escapeSelector=function(g){return(g+"").replace(oe,W)};var D=S,F=a;(function(){var g,w,I,L,V,$=F,X,ve,ce,Ae,ze,He=d.expando,ke=0,lt=0,Pt=ic(),dr=ic(),fr=ic(),di=ic(),Vn=function(ae,xe){return ae===xe&&(V=!0),0},Ws="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Xs="(?:\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Or="\\["+U+"*("+Xs+")(?:"+U+"*([*^$|!~]?=)"+U+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Xs+"))|)"+U+"*\\]",na=":("+Xs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Or+")*)|.*)\\)|)",Ir=new RegExp(U+"+","g"),fn=new RegExp("^"+U+"*,"+U+"*"),tc=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),rl=new RegExp(U+"|>"),Ps=new RegExp(na),La=new RegExp("^"+Xs+"$"),cs={ID:new RegExp("^#("+Xs+")"),CLASS:new RegExp("^\\.("+Xs+")"),TAG:new RegExp("^("+Xs+"|[*])"),ATTR:new RegExp("^"+Or),PSEUDO:new RegExp("^"+na),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+Ws+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},To=/^(?:input|select|textarea|button)$/i,ia=/^h\d$/i,Mi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rc=/[+~]/,Po=new RegExp("\\\\[\\da-fA-F]{1,6}"+U+"?|\\\\([^\\r\\n\\f])","g"),Ys=function(ae,xe){var Re="0x"+ae.slice(1)-65536;return xe||(Re<0?String.fromCharCode(Re+65536):String.fromCharCode(Re>>10|55296,Re&1023|56320))},Ui=function(){sa()},Af=Na(function(ae){return ae.disabled===!0&&R(ae,"fieldset")},{dir:"parentNode",next:"legend"});function nc(){try{return X.activeElement}catch{}}try{$.apply(n=s.call(D.childNodes),D.childNodes),n[D.childNodes.length].nodeType}catch{$={apply:function(xe,Re){F.apply(xe,s.call(Re))},call:function(xe){F.apply(xe,s.call(arguments,1))}}}function Zr(ae,xe,Re,qe){var ne,_e,ye,Xe,tt,Ot,kt,At=xe&&xe.ownerDocument,yr=xe?xe.nodeType:9;if(Re=Re||[],typeof ae!="string"||!ae||yr!==1&&yr!==9&&yr!==11)return Re;if(!qe&&(sa(xe),xe=xe||X,ce)){if(yr!==11&&(tt=Mi.exec(ae)))if(ne=tt[1]){if(yr===9)if(ye=xe.getElementById(ne)){if(ye.id===ne)return $.call(Re,ye),Re}else return Re;else if(At&&(ye=At.getElementById(ne))&&Zr.contains(xe,ye)&&ye.id===ne)return $.call(Re,ye),Re}else{if(tt[2])return $.apply(Re,xe.getElementsByTagName(ae)),Re;if((ne=tt[3])&&xe.getElementsByClassName)return $.apply(Re,xe.getElementsByClassName(ne)),Re}if(!di[ae+" "]&&(!Ae||!Ae.test(ae))){if(kt=ae,At=xe,yr===1&&(rl.test(ae)||tc.test(ae))){for(At=rc.test(ae)&&Tf(xe.parentNode)||xe,(At!=xe||!m.scope)&&((Xe=xe.getAttribute("id"))?Xe=d.escapeSelector(Xe):xe.setAttribute("id",Xe=He)),Ot=gu(ae),_e=Ot.length;_e--;)Ot[_e]=(Xe?"#"+Xe:":scope")+" "+Os(Ot[_e]);kt=Ot.join(",")}try{return $.apply(Re,At.querySelectorAll(kt)),Re}catch{di(ae,!0)}finally{Xe===He&&xe.removeAttribute("id")}}}return Cd(ae.replace(Y,"$1"),xe,Re,qe)}function ic(){var ae=[];function xe(Re,qe){return ae.push(Re+" ")>w.cacheLength&&delete xe[ae.shift()],xe[Re+" "]=qe}return xe}function Cs(ae){return ae[He]=!0,ae}function vu(ae){var xe=X.createElement("fieldset");try{return!!ae(xe)}catch{return!1}finally{xe.parentNode&&xe.parentNode.removeChild(xe),xe=null}}function Kg(ae){return function(xe){return R(xe,"input")&&xe.type===ae}}function Jg(ae){return function(xe){return(R(xe,"input")||R(xe,"button"))&&xe.type===ae}}function Td(ae){return function(xe){return"form"in xe?xe.parentNode&&xe.disabled===!1?"label"in xe?"label"in xe.parentNode?xe.parentNode.disabled===ae:xe.disabled===ae:xe.isDisabled===ae||xe.isDisabled!==!ae&&Af(xe)===ae:xe.disabled===ae:"label"in xe?xe.disabled===ae:!1}}function ls(ae){return Cs(function(xe){return xe=+xe,Cs(function(Re,qe){for(var ne,_e=ae([],Re.length,xe),ye=_e.length;ye--;)Re[ne=_e[ye]]&&(Re[ne]=!(qe[ne]=Re[ne]))})})}function Tf(ae){return ae&&typeof ae.getElementsByTagName<"u"&&ae}function sa(ae){var xe,Re=ae?ae.ownerDocument||ae:D;return Re==X||Re.nodeType!==9||!Re.documentElement||(X=Re,ve=X.documentElement,ce=!d.isXMLDoc(X),ze=ve.matches||ve.webkitMatchesSelector||ve.msMatchesSelector,ve.msMatchesSelector&&D!=X&&(xe=X.defaultView)&&xe.top!==xe&&xe.addEventListener("unload",Ui),m.getById=vu(function(qe){return ve.appendChild(qe).id=d.expando,!X.getElementsByName||!X.getElementsByName(d.expando).length}),m.disconnectedMatch=vu(function(qe){return ze.call(qe,"*")}),m.scope=vu(function(){return X.querySelectorAll(":scope")}),m.cssHas=vu(function(){try{return X.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(w.filter.ID=function(qe){var ne=qe.replace(Po,Ys);return function(_e){return _e.getAttribute("id")===ne}},w.find.ID=function(qe,ne){if(typeof ne.getElementById<"u"&&ce){var _e=ne.getElementById(qe);return _e?[_e]:[]}}):(w.filter.ID=function(qe){var ne=qe.replace(Po,Ys);return function(_e){var ye=typeof _e.getAttributeNode<"u"&&_e.getAttributeNode("id");return ye&&ye.value===ne}},w.find.ID=function(qe,ne){if(typeof ne.getElementById<"u"&&ce){var _e,ye,Xe,tt=ne.getElementById(qe);if(tt){if(_e=tt.getAttributeNode("id"),_e&&_e.value===qe)return[tt];for(Xe=ne.getElementsByName(qe),ye=0;tt=Xe[ye++];)if(_e=tt.getAttributeNode("id"),_e&&_e.value===qe)return[tt]}return[]}}),w.find.TAG=function(qe,ne){return typeof ne.getElementsByTagName<"u"?ne.getElementsByTagName(qe):ne.querySelectorAll(qe)},w.find.CLASS=function(qe,ne){if(typeof ne.getElementsByClassName<"u"&&ce)return ne.getElementsByClassName(qe)},Ae=[],vu(function(qe){var ne;ve.appendChild(qe).innerHTML="<a id='"+He+"' href='' disabled='disabled'></a><select id='"+He+"-\r\\' disabled='disabled'><option selected=''></option></select>",qe.querySelectorAll("[selected]").length||Ae.push("\\["+U+"*(?:value|"+Ws+")"),qe.querySelectorAll("[id~="+He+"-]").length||Ae.push("~="),qe.querySelectorAll("a#"+He+"+*").length||Ae.push(".#.+[+~]"),qe.querySelectorAll(":checked").length||Ae.push(":checked"),ne=X.createElement("input"),ne.setAttribute("type","hidden"),qe.appendChild(ne).setAttribute("name","D"),ve.appendChild(qe).disabled=!0,qe.querySelectorAll(":disabled").length!==2&&Ae.push(":enabled",":disabled"),ne=X.createElement("input"),ne.setAttribute("name",""),qe.appendChild(ne),qe.querySelectorAll("[name='']").length||Ae.push("\\["+U+"*name"+U+"*="+U+`*(?:''|"")`)}),m.cssHas||Ae.push(":has"),Ae=Ae.length&&new RegExp(Ae.join("|")),Vn=function(qe,ne){if(qe===ne)return V=!0,0;var _e=!qe.compareDocumentPosition-!ne.compareDocumentPosition;return _e||(_e=(qe.ownerDocument||qe)==(ne.ownerDocument||ne)?qe.compareDocumentPosition(ne):1,_e&1||!m.sortDetached&&ne.compareDocumentPosition(qe)===_e?qe===X||qe.ownerDocument==D&&Zr.contains(D,qe)?-1:ne===X||ne.ownerDocument==D&&Zr.contains(D,ne)?1:L?u.call(L,qe)-u.call(L,ne):0:_e&4?-1:1)}),X}Zr.matches=function(ae,xe){return Zr(ae,null,null,xe)},Zr.matchesSelector=function(ae,xe){if(sa(ae),ce&&!di[xe+" "]&&(!Ae||!Ae.test(xe)))try{var Re=ze.call(ae,xe);if(Re||m.disconnectedMatch||ae.document&&ae.document.nodeType!==11)return Re}catch{di(xe,!0)}return Zr(xe,X,null,[ae]).length>0},Zr.contains=function(ae,xe){return(ae.ownerDocument||ae)!=X&&sa(ae),d.contains(ae,xe)},Zr.attr=function(ae,xe){(ae.ownerDocument||ae)!=X&&sa(ae);var Re=w.attrHandle[xe.toLowerCase()],qe=Re&&h.call(w.attrHandle,xe.toLowerCase())?Re(ae,xe,!ce):void 0;return qe!==void 0?qe:ae.getAttribute(xe)},Zr.error=function(ae){throw new Error("Syntax error, unrecognized expression: "+ae)},d.uniqueSort=function(ae){var xe,Re=[],qe=0,ne=0;if(V=!m.sortStable,L=!m.sortStable&&s.call(ae,0),B.call(ae,Vn),V){for(;xe=ae[ne++];)xe===ae[ne]&&(qe=Re.push(ne));for(;qe--;)z.call(ae,Re[qe],1)}return L=null,ae},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(s.apply(this)))},w=d.expr={cacheLength:50,createPseudo:Cs,match:cs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ae){return ae[1]=ae[1].replace(Po,Ys),ae[3]=(ae[3]||ae[4]||ae[5]||"").replace(Po,Ys),ae[2]==="~="&&(ae[3]=" "+ae[3]+" "),ae.slice(0,4)},CHILD:function(ae){return ae[1]=ae[1].toLowerCase(),ae[1].slice(0,3)==="nth"?(ae[3]||Zr.error(ae[0]),ae[4]=+(ae[4]?ae[5]+(ae[6]||1):2*(ae[3]==="even"||ae[3]==="odd")),ae[5]=+(ae[7]+ae[8]||ae[3]==="odd")):ae[3]&&Zr.error(ae[0]),ae},PSEUDO:function(ae){var xe,Re=!ae[6]&&ae[2];return cs.CHILD.test(ae[0])?null:(ae[3]?ae[2]=ae[4]||ae[5]||"":Re&&Ps.test(Re)&&(xe=gu(Re,!0))&&(xe=Re.indexOf(")",Re.length-xe)-Re.length)&&(ae[0]=ae[0].slice(0,xe),ae[2]=Re.slice(0,xe)),ae.slice(0,3))}},filter:{TAG:function(ae){var xe=ae.replace(Po,Ys).toLowerCase();return ae==="*"?function(){return!0}:function(Re){return R(Re,xe)}},CLASS:function(ae){var xe=Pt[ae+" "];return xe||(xe=new RegExp("(^|"+U+")"+ae+"("+U+"|$)"))&&Pt(ae,function(Re){return xe.test(typeof Re.className=="string"&&Re.className||typeof Re.getAttribute<"u"&&Re.getAttribute("class")||"")})},ATTR:function(ae,xe,Re){return function(qe){var ne=Zr.attr(qe,ae);return ne==null?xe==="!=":xe?(ne+="",xe==="="?ne===Re:xe==="!="?ne!==Re:xe==="^="?Re&&ne.indexOf(Re)===0:xe==="*="?Re&&ne.indexOf(Re)>-1:xe==="$="?Re&&ne.slice(-Re.length)===Re:xe==="~="?(" "+ne.replace(Ir," ")+" ").indexOf(Re)>-1:xe==="|="?ne===Re||ne.slice(0,Re.length+1)===Re+"-":!1):!0}},CHILD:function(ae,xe,Re,qe,ne){var _e=ae.slice(0,3)!=="nth",ye=ae.slice(-4)!=="last",Xe=xe==="of-type";return qe===1&&ne===0?function(tt){return!!tt.parentNode}:function(tt,Ot,kt){var At,yr,Yt,Er,pi,xi=_e!==ye?"nextSibling":"previousSibling",vi=tt.parentNode,Hi=Xe&&tt.nodeName.toLowerCase(),Co=!kt&&!Xe,lr=!1;if(vi){if(_e){for(;xi;){for(Yt=tt;Yt=Yt[xi];)if(Xe?R(Yt,Hi):Yt.nodeType===1)return!1;pi=xi=ae==="only"&&!pi&&"nextSibling"}return!0}if(pi=[ye?vi.firstChild:vi.lastChild],ye&&Co){for(yr=vi[He]||(vi[He]={}),At=yr[ae]||[],Er=At[0]===ke&&At[1],lr=Er&&At[2],Yt=Er&&vi.childNodes[Er];Yt=++Er&&Yt&&Yt[xi]||(lr=Er=0)||pi.pop();)if(Yt.nodeType===1&&++lr&&Yt===tt){yr[ae]=[ke,Er,lr];break}}else if(Co&&(yr=tt[He]||(tt[He]={}),At=yr[ae]||[],Er=At[0]===ke&&At[1],lr=Er),lr===!1)for(;(Yt=++Er&&Yt&&Yt[xi]||(lr=Er=0)||pi.pop())&&!((Xe?R(Yt,Hi):Yt.nodeType===1)&&++lr&&(Co&&(yr=Yt[He]||(Yt[He]={}),yr[ae]=[ke,lr]),Yt===tt)););return lr-=ne,lr===qe||lr%qe===0&&lr/qe>=0}}},PSEUDO:function(ae,xe){var Re,qe=w.pseudos[ae]||w.setFilters[ae.toLowerCase()]||Zr.error("unsupported pseudo: "+ae);return qe[He]?qe(xe):qe.length>1?(Re=[ae,ae,"",xe],w.setFilters.hasOwnProperty(ae.toLowerCase())?Cs(function(ne,_e){for(var ye,Xe=qe(ne,xe),tt=Xe.length;tt--;)ye=u.call(ne,Xe[tt]),ne[ye]=!(_e[ye]=Xe[tt])}):function(ne){return qe(ne,0,Re)}):qe}},pseudos:{not:Cs(function(ae){var xe=[],Re=[],qe=Cf(ae.replace(Y,"$1"));return qe[He]?Cs(function(ne,_e,ye,Xe){for(var tt,Ot=qe(ne,null,Xe,[]),kt=ne.length;kt--;)(tt=Ot[kt])&&(ne[kt]=!(_e[kt]=tt))}):function(ne,_e,ye){return xe[0]=ne,qe(xe,null,ye,Re),xe[0]=null,!Re.pop()}}),has:Cs(function(ae){return function(xe){return Zr(ae,xe).length>0}}),contains:Cs(function(ae){return ae=ae.replace(Po,Ys),function(xe){return(xe.textContent||d.text(xe)).indexOf(ae)>-1}}),lang:Cs(function(ae){return La.test(ae||"")||Zr.error("unsupported lang: "+ae),ae=ae.replace(Po,Ys).toLowerCase(),function(xe){var Re;do if(Re=ce?xe.lang:xe.getAttribute("xml:lang")||xe.getAttribute("lang"))return Re=Re.toLowerCase(),Re===ae||Re.indexOf(ae+"-")===0;while((xe=xe.parentNode)&&xe.nodeType===1);return!1}}),target:function(ae){var xe=t.location&&t.location.hash;return xe&&xe.slice(1)===ae.id},root:function(ae){return ae===ve},focus:function(ae){return ae===nc()&&X.hasFocus()&&!!(ae.type||ae.href||~ae.tabIndex)},enabled:Td(!1),disabled:Td(!0),checked:function(ae){return R(ae,"input")&&!!ae.checked||R(ae,"option")&&!!ae.selected},selected:function(ae){return ae.parentNode&&ae.parentNode.selectedIndex,ae.selected===!0},empty:function(ae){for(ae=ae.firstChild;ae;ae=ae.nextSibling)if(ae.nodeType<6)return!1;return!0},parent:function(ae){return!w.pseudos.empty(ae)},header:function(ae){return ia.test(ae.nodeName)},input:function(ae){return To.test(ae.nodeName)},button:function(ae){return R(ae,"input")&&ae.type==="button"||R(ae,"button")},text:function(ae){var xe;return R(ae,"input")&&ae.type==="text"&&((xe=ae.getAttribute("type"))==null||xe.toLowerCase()==="text")},first:ls(function(){return[0]}),last:ls(function(ae,xe){return[xe-1]}),eq:ls(function(ae,xe,Re){return[Re<0?Re+xe:Re]}),even:ls(function(ae,xe){for(var Re=0;Re<xe;Re+=2)ae.push(Re);return ae}),odd:ls(function(ae,xe){for(var Re=1;Re<xe;Re+=2)ae.push(Re);return ae}),lt:ls(function(ae,xe,Re){var qe;for(Re<0?qe=Re+xe:Re>xe?qe=xe:qe=Re;--qe>=0;)ae.push(qe);return ae}),gt:ls(function(ae,xe,Re){for(var qe=Re<0?Re+xe:Re;++qe<xe;)ae.push(qe);return ae})}},w.pseudos.nth=w.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[g]=Kg(g);for(g in{submit:!0,reset:!0})w.pseudos[g]=Jg(g);function nl(){}nl.prototype=w.filters=w.pseudos,w.setFilters=new nl;function gu(ae,xe){var Re,qe,ne,_e,ye,Xe,tt,Ot=dr[ae+" "];if(Ot)return xe?0:Ot.slice(0);for(ye=ae,Xe=[],tt=w.preFilter;ye;){(!Re||(qe=fn.exec(ye)))&&(qe&&(ye=ye.slice(qe[0].length)||ye),Xe.push(ne=[])),Re=!1,(qe=tc.exec(ye))&&(Re=qe.shift(),ne.push({value:Re,type:qe[0].replace(Y," ")}),ye=ye.slice(Re.length));for(_e in w.filter)(qe=cs[_e].exec(ye))&&(!tt[_e]||(qe=tt[_e](qe)))&&(Re=qe.shift(),ne.push({value:Re,type:_e,matches:qe}),ye=ye.slice(Re.length));if(!Re)break}return xe?ye.length:ye?Zr.error(ae):dr(ae,Xe).slice(0)}function Os(ae){for(var xe=0,Re=ae.length,qe="";xe<Re;xe++)qe+=ae[xe].value;return qe}function Na(ae,xe,Re){var qe=xe.dir,ne=xe.next,_e=ne||qe,ye=Re&&_e==="parentNode",Xe=lt++;return xe.first?function(tt,Ot,kt){for(;tt=tt[qe];)if(tt.nodeType===1||ye)return ae(tt,Ot,kt);return!1}:function(tt,Ot,kt){var At,yr,Yt=[ke,Xe];if(kt){for(;tt=tt[qe];)if((tt.nodeType===1||ye)&&ae(tt,Ot,kt))return!0}else for(;tt=tt[qe];)if(tt.nodeType===1||ye)if(yr=tt[He]||(tt[He]={}),ne&&R(tt,ne))tt=tt[qe]||tt;else{if((At=yr[_e])&&At[0]===ke&&At[1]===Xe)return Yt[2]=At[2];if(yr[_e]=Yt,Yt[2]=ae(tt,Ot,kt))return!0}return!1}}function Pf(ae){return ae.length>1?function(xe,Re,qe){for(var ne=ae.length;ne--;)if(!ae[ne](xe,Re,qe))return!1;return!0}:ae[0]}function Zg(ae,xe,Re){for(var qe=0,ne=xe.length;qe<ne;qe++)Zr(ae,xe[qe],Re);return Re}function il(ae,xe,Re,qe,ne){for(var _e,ye=[],Xe=0,tt=ae.length,Ot=xe!=null;Xe<tt;Xe++)(_e=ae[Xe])&&(!Re||Re(_e,qe,ne))&&(ye.push(_e),Ot&&xe.push(Xe));return ye}function oa(ae,xe,Re,qe,ne,_e){return qe&&!qe[He]&&(qe=oa(qe)),ne&&!ne[He]&&(ne=oa(ne,_e)),Cs(function(ye,Xe,tt,Ot){var kt,At,yr,Yt,Er=[],pi=[],xi=Xe.length,vi=ye||Zg(xe||"*",tt.nodeType?[tt]:tt,[]),Hi=ae&&(ye||!xe)?il(vi,Er,ae,tt,Ot):vi;if(Re?(Yt=ne||(ye?ae:xi||qe)?[]:Xe,Re(Hi,Yt,tt,Ot)):Yt=Hi,qe)for(kt=il(Yt,pi),qe(kt,[],tt,Ot),At=kt.length;At--;)(yr=kt[At])&&(Yt[pi[At]]=!(Hi[pi[At]]=yr));if(ye){if(ne||ae){if(ne){for(kt=[],At=Yt.length;At--;)(yr=Yt[At])&&kt.push(Hi[At]=yr);ne(null,Yt=[],kt,Ot)}for(At=Yt.length;At--;)(yr=Yt[At])&&(kt=ne?u.call(ye,yr):Er[At])>-1&&(ye[kt]=!(Xe[kt]=yr))}}else Yt=il(Yt===Xe?Yt.splice(xi,Yt.length):Yt),ne?ne(null,Xe,Yt,Ot):$.apply(Xe,Yt)})}function ji(ae){for(var xe,Re,qe,ne=ae.length,_e=w.relative[ae[0].type],ye=_e||w.relative[" "],Xe=_e?1:0,tt=Na(function(At){return At===xe},ye,!0),Ot=Na(function(At){return u.call(xe,At)>-1},ye,!0),kt=[function(At,yr,Yt){var Er=!_e&&(Yt||yr!=I)||((xe=yr).nodeType?tt(At,yr,Yt):Ot(At,yr,Yt));return xe=null,Er}];Xe<ne;Xe++)if(Re=w.relative[ae[Xe].type])kt=[Na(Pf(kt),Re)];else{if(Re=w.filter[ae[Xe].type].apply(null,ae[Xe].matches),Re[He]){for(qe=++Xe;qe<ne&&!w.relative[ae[qe].type];qe++);return oa(Xe>1&&Pf(kt),Xe>1&&Os(ae.slice(0,Xe-1).concat({value:ae[Xe-2].type===" "?"*":""})).replace(Y,"$1"),Re,Xe<qe&&ji(ae.slice(Xe,qe)),qe<ne&&ji(ae=ae.slice(qe)),qe<ne&&Os(ae))}kt.push(Re)}return Pf(kt)}function Pd(ae,xe){var Re=xe.length>0,qe=ae.length>0,ne=function(_e,ye,Xe,tt,Ot){var kt,At,yr,Yt=0,Er="0",pi=_e&&[],xi=[],vi=I,Hi=_e||qe&&w.find.TAG("*",Ot),Co=ke+=vi==null?1:Math.random()||.1,lr=Hi.length;for(Ot&&(I=ye==X||ye||Ot);Er!==lr&&(kt=Hi[Er])!=null;Er++){if(qe&&kt){for(At=0,!ye&&kt.ownerDocument!=X&&(sa(kt),Xe=!ce);yr=ae[At++];)if(yr(kt,ye||X,Xe)){$.call(tt,kt);break}Ot&&(ke=Co)}Re&&((kt=!yr&&kt)&&Yt--,_e&&pi.push(kt))}if(Yt+=Er,Re&&Er!==Yt){for(At=0;yr=xe[At++];)yr(pi,xi,ye,Xe);if(_e){if(Yt>0)for(;Er--;)pi[Er]||xi[Er]||(xi[Er]=k.call(tt));xi=il(xi)}$.apply(tt,xi),Ot&&!_e&&xi.length>0&&Yt+xe.length>1&&d.uniqueSort(tt)}return Ot&&(ke=Co,I=vi),pi};return Re?Cs(ne):ne}function Cf(ae,xe){var Re,qe=[],ne=[],_e=fr[ae+" "];if(!_e){for(xe||(xe=gu(ae)),Re=xe.length;Re--;)_e=ji(xe[Re]),_e[He]?qe.push(_e):ne.push(_e);_e=fr(ae,Pd(ne,qe)),_e.selector=ae}return _e}function Cd(ae,xe,Re,qe){var ne,_e,ye,Xe,tt,Ot=typeof ae=="function"&&ae,kt=!qe&&gu(ae=Ot.selector||ae);if(Re=Re||[],kt.length===1){if(_e=kt[0]=kt[0].slice(0),_e.length>2&&(ye=_e[0]).type==="ID"&&xe.nodeType===9&&ce&&w.relative[_e[1].type]){if(xe=(w.find.ID(ye.matches[0].replace(Po,Ys),xe)||[])[0],xe)Ot&&(xe=xe.parentNode);else return Re;ae=ae.slice(_e.shift().value.length)}for(ne=cs.needsContext.test(ae)?0:_e.length;ne--&&(ye=_e[ne],!w.relative[Xe=ye.type]);)if((tt=w.find[Xe])&&(qe=tt(ye.matches[0].replace(Po,Ys),rc.test(_e[0].type)&&Tf(xe.parentNode)||xe))){if(_e.splice(ne,1),ae=qe.length&&Os(_e),!ae)return $.apply(Re,qe),Re;break}}return(Ot||Cf(ae,kt))(qe,xe,!ce,Re,!xe||rc.test(ae)&&Tf(xe.parentNode)||xe),Re}m.sortStable=He.split("").sort(Vn).join("")===He,sa(),m.sortDetached=vu(function(ae){return ae.compareDocumentPosition(X.createElement("fieldset"))&1}),d.find=Zr,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,Zr.compile=Cf,Zr.select=Cd,Zr.setDocument=sa,Zr.tokenize=gu,Zr.escape=d.escapeSelector,Zr.getText=d.text,Zr.isXML=d.isXMLDoc,Zr.selectors=d.expr,Zr.support=d.support,Zr.uniqueSort=d.uniqueSort})();var H=function(g,w,I){for(var L=[],V=I!==void 0;(g=g[w])&&g.nodeType!==9;)if(g.nodeType===1){if(V&&d(g).is(I))break;L.push(g)}return L},ie=function(g,w){for(var I=[];g;g=g.nextSibling)g.nodeType===1&&g!==w&&I.push(g);return I},se=d.expr.match.needsContext,we=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ge(g,w,I){return _(w)?d.grep(g,function(L,V){return!!w.call(L,V,L)!==I}):w.nodeType?d.grep(g,function(L){return L===w!==I}):typeof w!="string"?d.grep(g,function(L){return u.call(w,L)>-1!==I}):d.filter(w,g,I)}d.filter=function(g,w,I){var L=w[0];return I&&(g=":not("+g+")"),w.length===1&&L.nodeType===1?d.find.matchesSelector(L,g)?[L]:[]:d.find.matches(g,d.grep(w,function(V){return V.nodeType===1}))},d.fn.extend({find:function(g){var w,I,L=this.length,V=this;if(typeof g!="string")return this.pushStack(d(g).filter(function(){for(w=0;w<L;w++)if(d.contains(V[w],this))return!0}));for(I=this.pushStack([]),w=0;w<L;w++)d.find(g,V[w],I);return L>1?d.uniqueSort(I):I},filter:function(g){return this.pushStack(ge(this,g||[],!1))},not:function(g){return this.pushStack(ge(this,g||[],!0))},is:function(g){return!!ge(this,typeof g=="string"&&se.test(g)?d(g):g||[],!1).length}});var te,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,re=d.fn.init=function(g,w,I){var L,V;if(!g)return this;if(I=I||te,typeof g=="string")if(g[0]==="<"&&g[g.length-1]===">"&&g.length>=3?L=[null,g,null]:L=ue.exec(g),L&&(L[1]||!w))if(L[1]){if(w=w instanceof d?w[0]:w,d.merge(this,d.parseHTML(L[1],w&&w.nodeType?w.ownerDocument||w:S,!0)),we.test(L[1])&&d.isPlainObject(w))for(L in w)_(this[L])?this[L](w[L]):this.attr(L,w[L]);return this}else return V=S.getElementById(L[2]),V&&(this[0]=V,this.length=1),this;else return!w||w.jquery?(w||I).find(g):this.constructor(w).find(g);else{if(g.nodeType)return this[0]=g,this.length=1,this;if(_(g))return I.ready!==void 0?I.ready(g):g(d)}return d.makeArray(g,this)};re.prototype=d.fn,te=d(S);var Q=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(g){var w=d(g,this),I=w.length;return this.filter(function(){for(var L=0;L<I;L++)if(d.contains(this,w[L]))return!0})},closest:function(g,w){var I,L=0,V=this.length,$=[],X=typeof g!="string"&&d(g);if(!se.test(g)){for(;L<V;L++)for(I=this[L];I&&I!==w;I=I.parentNode)if(I.nodeType<11&&(X?X.index(I)>-1:I.nodeType===1&&d.find.matchesSelector(I,g))){$.push(I);break}}return this.pushStack($.length>1?d.uniqueSort($):$)},index:function(g){return g?typeof g=="string"?u.call(d(g),this[0]):u.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,w){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(g,w))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function Ge(g,w){for(;(g=g[w])&&g.nodeType!==1;);return g}d.each({parent:function(g){var w=g.parentNode;return w&&w.nodeType!==11?w:null},parents:function(g){return H(g,"parentNode")},parentsUntil:function(g,w,I){return H(g,"parentNode",I)},next:function(g){return Ge(g,"nextSibling")},prev:function(g){return Ge(g,"previousSibling")},nextAll:function(g){return H(g,"nextSibling")},prevAll:function(g){return H(g,"previousSibling")},nextUntil:function(g,w,I){return H(g,"nextSibling",I)},prevUntil:function(g,w,I){return H(g,"previousSibling",I)},siblings:function(g){return ie((g.parentNode||{}).firstChild,g)},children:function(g){return ie(g.firstChild)},contents:function(g){return g.contentDocument!=null&&i(g.contentDocument)?g.contentDocument:(R(g,"template")&&(g=g.content||g),d.merge([],g.childNodes))}},function(g,w){d.fn[g]=function(I,L){var V=d.map(this,w,I);return g.slice(-5)!=="Until"&&(L=I),L&&typeof L=="string"&&(V=d.filter(L,V)),this.length>1&&(le[g]||d.uniqueSort(V),Q.test(g)&&V.reverse()),this.pushStack(V)}});var Ne=/[^\x20\t\r\n\f]+/g;function Oe(g){var w={};return d.each(g.match(Ne)||[],function(I,L){w[L]=!0}),w}d.Callbacks=function(g){g=typeof g=="string"?Oe(g):d.extend({},g);var w,I,L,V,$=[],X=[],ve=-1,ce=function(){for(V=V||g.once,L=w=!0;X.length;ve=-1)for(I=X.shift();++ve<$.length;)$[ve].apply(I[0],I[1])===!1&&g.stopOnFalse&&(ve=$.length,I=!1);g.memory||(I=!1),w=!1,V&&(I?$=[]:$="")},Ae={add:function(){return $&&(I&&!w&&(ve=$.length-1,X.push(I)),function ze(He){d.each(He,function(ke,lt){_(lt)?(!g.unique||!Ae.has(lt))&&$.push(lt):lt&&lt.length&&E(lt)!=="string"&&ze(lt)})}(arguments),I&&!w&&ce()),this},remove:function(){return d.each(arguments,function(ze,He){for(var ke;(ke=d.inArray(He,$,ke))>-1;)$.splice(ke,1),ke<=ve&&ve--}),this},has:function(ze){return ze?d.inArray(ze,$)>-1:$.length>0},empty:function(){return $&&($=[]),this},disable:function(){return V=X=[],$=I="",this},disabled:function(){return!$},lock:function(){return V=X=[],!I&&!w&&($=I=""),this},locked:function(){return!!V},fireWith:function(ze,He){return V||(He=He||[],He=[ze,He.slice?He.slice():He],X.push(He),w||ce()),this},fire:function(){return Ae.fireWith(this,arguments),this},fired:function(){return!!L}};return Ae};function Ze(g){return g}function $e(g){throw g}function q(g,w,I,L){var V;try{g&&_(V=g.promise)?V.call(g).done(w).fail(I):g&&_(V=g.then)?V.call(g,w,I):w.apply(void 0,[g].slice(L))}catch($){I.apply(void 0,[$])}}d.extend({Deferred:function(g){var w=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],I="pending",L={state:function(){return I},always:function(){return V.done(arguments).fail(arguments),this},catch:function($){return L.then(null,$)},pipe:function(){var $=arguments;return d.Deferred(function(X){d.each(w,function(ve,ce){var Ae=_($[ce[4]])&&$[ce[4]];V[ce[1]](function(){var ze=Ae&&Ae.apply(this,arguments);ze&&_(ze.promise)?ze.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[ce[0]+"With"](this,Ae?[ze]:arguments)})}),$=null}).promise()},then:function($,X,ve){var ce=0;function Ae(ze,He,ke,lt){return function(){var Pt=this,dr=arguments,fr=function(){var Vn,Ws;if(!(ze<ce)){if(Vn=ke.apply(Pt,dr),Vn===He.promise())throw new TypeError("Thenable self-resolution");Ws=Vn&&(typeof Vn=="object"||typeof Vn=="function")&&Vn.then,_(Ws)?lt?Ws.call(Vn,Ae(ce,He,Ze,lt),Ae(ce,He,$e,lt)):(ce++,Ws.call(Vn,Ae(ce,He,Ze,lt),Ae(ce,He,$e,lt),Ae(ce,He,Ze,He.notifyWith))):(ke!==Ze&&(Pt=void 0,dr=[Vn]),(lt||He.resolveWith)(Pt,dr))}},di=lt?fr:function(){try{fr()}catch(Vn){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Vn,di.error),ze+1>=ce&&(ke!==$e&&(Pt=void 0,dr=[Vn]),He.rejectWith(Pt,dr))}};ze?di():(d.Deferred.getErrorHook?di.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(di.error=d.Deferred.getStackHook()),t.setTimeout(di))}}return d.Deferred(function(ze){w[0][3].add(Ae(0,ze,_(ve)?ve:Ze,ze.notifyWith)),w[1][3].add(Ae(0,ze,_($)?$:Ze)),w[2][3].add(Ae(0,ze,_(X)?X:$e))}).promise()},promise:function($){return $!=null?d.extend($,L):L}},V={};return d.each(w,function($,X){var ve=X[2],ce=X[5];L[X[1]]=ve.add,ce&&ve.add(function(){I=ce},w[3-$][2].disable,w[3-$][3].disable,w[0][2].lock,w[0][3].lock),ve.add(X[3].fire),V[X[0]]=function(){return V[X[0]+"With"](this===V?void 0:this,arguments),this},V[X[0]+"With"]=ve.fireWith}),L.promise(V),g&&g.call(V,V),V},when:function(g){var w=arguments.length,I=w,L=Array(I),V=s.call(arguments),$=d.Deferred(),X=function(ve){return function(ce){L[ve]=this,V[ve]=arguments.length>1?s.call(arguments):ce,--w||$.resolveWith(L,V)}};if(w<=1&&(q(g,$.done(X(I)).resolve,$.reject,!w),$.state()==="pending"||_(V[I]&&V[I].then)))return $.then();for(;I--;)q(V[I],X(I),$.reject);return $.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(g,w){t.console&&t.console.warn&&g&&G.test(g.name)&&t.console.warn("jQuery.Deferred exception: "+g.message,g.stack,w)},d.readyException=function(g){t.setTimeout(function(){throw g})};var K=d.Deferred();d.fn.ready=function(g){return K.then(g).catch(function(w){d.readyException(w)}),this},d.extend({isReady:!1,readyWait:1,ready:function(g){(g===!0?--d.readyWait:d.isReady)||(d.isReady=!0,!(g!==!0&&--d.readyWait>0)&&K.resolveWith(S,[d]))}}),d.ready.then=K.then;function J(){S.removeEventListener("DOMContentLoaded",J),t.removeEventListener("load",J),d.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?t.setTimeout(d.ready):(S.addEventListener("DOMContentLoaded",J),t.addEventListener("load",J));var Ee=function(g,w,I,L,V,$,X){var ve=0,ce=g.length,Ae=I==null;if(E(I)==="object"){V=!0;for(ve in I)Ee(g,w,ve,I[ve],!0,$,X)}else if(L!==void 0&&(V=!0,_(L)||(X=!0),Ae&&(X?(w.call(g,L),w=null):(Ae=w,w=function(ze,He,ke){return Ae.call(d(ze),ke)})),w))for(;ve<ce;ve++)w(g[ve],I,X?L:L.call(g[ve],ve,w(g[ve],I)));return V?g:Ae?w.call(g):ce?w(g[0],I):$},fe=/^-ms-/,Te=/-([a-z])/g;function Ce(g,w){return w.toUpperCase()}function Ue(g){return g.replace(fe,"ms-").replace(Te,Ce)}var Le=function(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType};function Ie(){this.expando=d.expando+Ie.uid++}Ie.uid=1,Ie.prototype={cache:function(g){var w=g[this.expando];return w||(w={},Le(g)&&(g.nodeType?g[this.expando]=w:Object.defineProperty(g,this.expando,{value:w,configurable:!0}))),w},set:function(g,w,I){var L,V=this.cache(g);if(typeof w=="string")V[Ue(w)]=I;else for(L in w)V[Ue(L)]=w[L];return V},get:function(g,w){return w===void 0?this.cache(g):g[this.expando]&&g[this.expando][Ue(w)]},access:function(g,w,I){return w===void 0||w&&typeof w=="string"&&I===void 0?this.get(g,w):(this.set(g,w,I),I!==void 0?I:w)},remove:function(g,w){var I,L=g[this.expando];if(L!==void 0){if(w!==void 0)for(Array.isArray(w)?w=w.map(Ue):(w=Ue(w),w=w in L?[w]:w.match(Ne)||[]),I=w.length;I--;)delete L[w[I]];(w===void 0||d.isEmptyObject(L))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var w=g[this.expando];return w!==void 0&&!d.isEmptyObject(w)}};var Se=new Ie,Ye=new Ie,ft=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/[A-Z]/g;function dt(g){return g==="true"?!0:g==="false"?!1:g==="null"?null:g===+g+""?+g:ft.test(g)?JSON.parse(g):g}function it(g,w,I){var L;if(I===void 0&&g.nodeType===1)if(L="data-"+w.replace(bt,"-$&").toLowerCase(),I=g.getAttribute(L),typeof I=="string"){try{I=dt(I)}catch{}Ye.set(g,w,I)}else I=void 0;return I}d.extend({hasData:function(g){return Ye.hasData(g)||Se.hasData(g)},data:function(g,w,I){return Ye.access(g,w,I)},removeData:function(g,w){Ye.remove(g,w)},_data:function(g,w,I){return Se.access(g,w,I)},_removeData:function(g,w){Se.remove(g,w)}}),d.fn.extend({data:function(g,w){var I,L,V,$=this[0],X=$&&$.attributes;if(g===void 0){if(this.length&&(V=Ye.get($),$.nodeType===1&&!Se.get($,"hasDataAttrs"))){for(I=X.length;I--;)X[I]&&(L=X[I].name,L.indexOf("data-")===0&&(L=Ue(L.slice(5)),it($,L,V[L])));Se.set($,"hasDataAttrs",!0)}return V}return typeof g=="object"?this.each(function(){Ye.set(this,g)}):Ee(this,function(ve){var ce;if($&&ve===void 0)return ce=Ye.get($,g),ce!==void 0||(ce=it($,g),ce!==void 0)?ce:void 0;this.each(function(){Ye.set(this,g,ve)})},null,w,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){Ye.remove(this,g)})}}),d.extend({queue:function(g,w,I){var L;if(g)return w=(w||"fx")+"queue",L=Se.get(g,w),I&&(!L||Array.isArray(I)?L=Se.access(g,w,d.makeArray(I)):L.push(I)),L||[]},dequeue:function(g,w){w=w||"fx";var I=d.queue(g,w),L=I.length,V=I.shift(),$=d._queueHooks(g,w),X=function(){d.dequeue(g,w)};V==="inprogress"&&(V=I.shift(),L--),V&&(w==="fx"&&I.unshift("inprogress"),delete $.stop,V.call(g,X,$)),!L&&$&&$.empty.fire()},_queueHooks:function(g,w){var I=w+"queueHooks";return Se.get(g,I)||Se.access(g,I,{empty:d.Callbacks("once memory").add(function(){Se.remove(g,[w+"queue",I])})})}}),d.fn.extend({queue:function(g,w){var I=2;return typeof g!="string"&&(w=g,g="fx",I--),arguments.length<I?d.queue(this[0],g):w===void 0?this:this.each(function(){var L=d.queue(this,g,w);d._queueHooks(this,g),g==="fx"&&L[0]!=="inprogress"&&d.dequeue(this,g)})},dequeue:function(g){return this.each(function(){d.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,w){var I,L=1,V=d.Deferred(),$=this,X=this.length,ve=function(){--L||V.resolveWith($,[$])};for(typeof g!="string"&&(w=g,g=void 0),g=g||"fx";X--;)I=Se.get($[X],g+"queueHooks"),I&&I.empty&&(L++,I.empty.add(ve));return ve(),V.promise(w)}});var Jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Sr=new RegExp("^(?:([+-])=|)("+Jt+")([a-z%]*)$","i"),sr=["Top","Right","Bottom","Left"],vr=S.documentElement,qr=function(g){return d.contains(g.ownerDocument,g)},Vr={composed:!0};vr.getRootNode&&(qr=function(g){return d.contains(g.ownerDocument,g)||g.getRootNode(Vr)===g.ownerDocument});var In=function(g,w){return g=w||g,g.style.display==="none"||g.style.display===""&&qr(g)&&d.css(g,"display")==="none"};function ur(g,w,I,L){var V,$,X=20,ve=L?function(){return L.cur()}:function(){return d.css(g,w,"")},ce=ve(),Ae=I&&I[3]||(d.cssNumber[w]?"":"px"),ze=g.nodeType&&(d.cssNumber[w]||Ae!=="px"&&+ce)&&Sr.exec(d.css(g,w));if(ze&&ze[3]!==Ae){for(ce=ce/2,Ae=Ae||ze[3],ze=+ce||1;X--;)d.style(g,w,ze+Ae),(1-$)*(1-($=ve()/ce||.5))<=0&&(X=0),ze=ze/$;ze=ze*2,d.style(g,w,ze+Ae),I=I||[]}return I&&(ze=+ze||+ce||0,V=I[1]?ze+(I[1]+1)*I[2]:+I[2],L&&(L.unit=Ae,L.start=ze,L.end=V)),V}var Mr={};function Tn(g){var w,I=g.ownerDocument,L=g.nodeName,V=Mr[L];return V||(w=I.body.appendChild(I.createElement(L)),V=d.css(w,"display"),w.parentNode.removeChild(w),V==="none"&&(V="block"),Mr[L]=V,V)}function Pn(g,w){for(var I,L,V=[],$=0,X=g.length;$<X;$++)L=g[$],L.style&&(I=L.style.display,w?(I==="none"&&(V[$]=Se.get(L,"display")||null,V[$]||(L.style.display="")),L.style.display===""&&In(L)&&(V[$]=Tn(L))):I!=="none"&&(V[$]="none",Se.set(L,"display",I)));for($=0;$<X;$++)V[$]!=null&&(g[$].style.display=V[$]);return g}d.fn.extend({show:function(){return Pn(this,!0)},hide:function(){return Pn(this)},toggle:function(g){return typeof g=="boolean"?g?this.show():this.hide():this.each(function(){In(this)?d(this).show():d(this).hide()})}});var xn=/^(?:checkbox|radio)$/i,Xn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,oi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var g=S.createDocumentFragment(),w=g.appendChild(S.createElement("div")),I=S.createElement("input");I.setAttribute("type","radio"),I.setAttribute("checked","checked"),I.setAttribute("name","t"),w.appendChild(I),m.checkClone=w.cloneNode(!0).cloneNode(!0).lastChild.checked,w.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!w.cloneNode(!0).lastChild.defaultValue,w.innerHTML="<option></option>",m.option=!!w.lastChild})();var Ht={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ht.tbody=Ht.tfoot=Ht.colgroup=Ht.caption=Ht.thead,Ht.th=Ht.td,m.option||(Ht.optgroup=Ht.option=[1,"<select multiple='multiple'>","</select>"]);function jt(g,w){var I;return typeof g.getElementsByTagName<"u"?I=g.getElementsByTagName(w||"*"):typeof g.querySelectorAll<"u"?I=g.querySelectorAll(w||"*"):I=[],w===void 0||w&&R(g,w)?d.merge([g],I):I}function Gr(g,w){for(var I=0,L=g.length;I<L;I++)Se.set(g[I],"globalEval",!w||Se.get(w[I],"globalEval"))}var Un=/<|&#?\w+;/;function Rn(g,w,I,L,V){for(var $,X,ve,ce,Ae,ze,He=w.createDocumentFragment(),ke=[],lt=0,Pt=g.length;lt<Pt;lt++)if($=g[lt],$||$===0)if(E($)==="object")d.merge(ke,$.nodeType?[$]:$);else if(!Un.test($))ke.push(w.createTextNode($));else{for(X=X||He.appendChild(w.createElement("div")),ve=(Xn.exec($)||["",""])[1].toLowerCase(),ce=Ht[ve]||Ht._default,X.innerHTML=ce[1]+d.htmlPrefilter($)+ce[2],ze=ce[0];ze--;)X=X.lastChild;d.merge(ke,X.childNodes),X=He.firstChild,X.textContent=""}for(He.textContent="",lt=0;$=ke[lt++];){if(L&&d.inArray($,L)>-1){V&&V.push($);continue}if(Ae=qr($),X=jt(He.appendChild($),"script"),Ae&&Gr(X),I)for(ze=0;$=X[ze++];)oi.test($.type||"")&&I.push($)}return He}var Yr=/^([^.]*)(?:\.(.+)|)/;function Yn(){return!0}function yi(){return!1}function tn(g,w,I,L,V,$){var X,ve;if(typeof w=="object"){typeof I!="string"&&(L=L||I,I=void 0);for(ve in w)tn(g,ve,I,L,w[ve],$);return g}if(L==null&&V==null?(V=I,L=I=void 0):V==null&&(typeof I=="string"?(V=L,L=void 0):(V=L,L=I,I=void 0)),V===!1)V=yi;else if(!V)return g;return $===1&&(X=V,V=function(ce){return d().off(ce),X.apply(this,arguments)},V.guid=X.guid||(X.guid=d.guid++)),g.each(function(){d.event.add(this,w,V,L,I)})}d.event={global:{},add:function(g,w,I,L,V){var $,X,ve,ce,Ae,ze,He,ke,lt,Pt,dr,fr=Se.get(g);if(Le(g))for(I.handler&&($=I,I=$.handler,V=$.selector),V&&d.find.matchesSelector(vr,V),I.guid||(I.guid=d.guid++),(ce=fr.events)||(ce=fr.events=Object.create(null)),(X=fr.handle)||(X=fr.handle=function(di){return typeof d<"u"&&d.event.triggered!==di.type?d.event.dispatch.apply(g,arguments):void 0}),w=(w||"").match(Ne)||[""],Ae=w.length;Ae--;)ve=Yr.exec(w[Ae])||[],lt=dr=ve[1],Pt=(ve[2]||"").split(".").sort(),lt&&(He=d.event.special[lt]||{},lt=(V?He.delegateType:He.bindType)||lt,He=d.event.special[lt]||{},ze=d.extend({type:lt,origType:dr,data:L,handler:I,guid:I.guid,selector:V,needsContext:V&&d.expr.match.needsContext.test(V),namespace:Pt.join(".")},$),(ke=ce[lt])||(ke=ce[lt]=[],ke.delegateCount=0,(!He.setup||He.setup.call(g,L,Pt,X)===!1)&&g.addEventListener&&g.addEventListener(lt,X)),He.add&&(He.add.call(g,ze),ze.handler.guid||(ze.handler.guid=I.guid)),V?ke.splice(ke.delegateCount++,0,ze):ke.push(ze),d.event.global[lt]=!0)},remove:function(g,w,I,L,V){var $,X,ve,ce,Ae,ze,He,ke,lt,Pt,dr,fr=Se.hasData(g)&&Se.get(g);if(!(!fr||!(ce=fr.events))){for(w=(w||"").match(Ne)||[""],Ae=w.length;Ae--;){if(ve=Yr.exec(w[Ae])||[],lt=dr=ve[1],Pt=(ve[2]||"").split(".").sort(),!lt){for(lt in ce)d.event.remove(g,lt+w[Ae],I,L,!0);continue}for(He=d.event.special[lt]||{},lt=(L?He.delegateType:He.bindType)||lt,ke=ce[lt]||[],ve=ve[2]&&new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=$=ke.length;$--;)ze=ke[$],(V||dr===ze.origType)&&(!I||I.guid===ze.guid)&&(!ve||ve.test(ze.namespace))&&(!L||L===ze.selector||L==="**"&&ze.selector)&&(ke.splice($,1),ze.selector&&ke.delegateCount--,He.remove&&He.remove.call(g,ze));X&&!ke.length&&((!He.teardown||He.teardown.call(g,Pt,fr.handle)===!1)&&d.removeEvent(g,lt,fr.handle),delete ce[lt])}d.isEmptyObject(ce)&&Se.remove(g,"handle events")}},dispatch:function(g){var w,I,L,V,$,X,ve=new Array(arguments.length),ce=d.event.fix(g),Ae=(Se.get(this,"events")||Object.create(null))[ce.type]||[],ze=d.event.special[ce.type]||{};for(ve[0]=ce,w=1;w<arguments.length;w++)ve[w]=arguments[w];if(ce.delegateTarget=this,!(ze.preDispatch&&ze.preDispatch.call(this,ce)===!1)){for(X=d.event.handlers.call(this,ce,Ae),w=0;(V=X[w++])&&!ce.isPropagationStopped();)for(ce.currentTarget=V.elem,I=0;($=V.handlers[I++])&&!ce.isImmediatePropagationStopped();)(!ce.rnamespace||$.namespace===!1||ce.rnamespace.test($.namespace))&&(ce.handleObj=$,ce.data=$.data,L=((d.event.special[$.origType]||{}).handle||$.handler).apply(V.elem,ve),L!==void 0&&(ce.result=L)===!1&&(ce.preventDefault(),ce.stopPropagation()));return ze.postDispatch&&ze.postDispatch.call(this,ce),ce.result}},handlers:function(g,w){var I,L,V,$,X,ve=[],ce=w.delegateCount,Ae=g.target;if(ce&&Ae.nodeType&&!(g.type==="click"&&g.button>=1)){for(;Ae!==this;Ae=Ae.parentNode||this)if(Ae.nodeType===1&&!(g.type==="click"&&Ae.disabled===!0)){for($=[],X={},I=0;I<ce;I++)L=w[I],V=L.selector+" ",X[V]===void 0&&(X[V]=L.needsContext?d(V,this).index(Ae)>-1:d.find(V,this,null,[Ae]).length),X[V]&&$.push(L);$.length&&ve.push({elem:Ae,handlers:$})}}return Ae=this,ce<w.length&&ve.push({elem:Ae,handlers:w.slice(ce)}),ve},addProp:function(g,w){Object.defineProperty(d.Event.prototype,g,{enumerable:!0,configurable:!0,get:_(w)?function(){if(this.originalEvent)return w(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(I){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:I})}})},fix:function(g){return g[d.expando]?g:new d.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var w=this||g;return xn.test(w.type)&&w.click&&R(w,"input")&&Kn(w,"click",!0),!1},trigger:function(g){var w=this||g;return xn.test(w.type)&&w.click&&R(w,"input")&&Kn(w,"click"),!0},_default:function(g){var w=g.target;return xn.test(w.type)&&w.click&&R(w,"input")&&Se.get(w,"click")||R(w,"a")}},beforeunload:{postDispatch:function(g){g.result!==void 0&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}};function Kn(g,w,I){if(!I){Se.get(g,w)===void 0&&d.event.add(g,w,Yn);return}Se.set(g,w,!1),d.event.add(g,w,{namespace:!1,handler:function(L){var V,$=Se.get(this,w);if(L.isTrigger&1&&this[w]){if($)(d.event.special[w]||{}).delegateType&&L.stopPropagation();else if($=s.call(arguments),Se.set(this,w,$),this[w](),V=Se.get(this,w),Se.set(this,w,!1),$!==V)return L.stopImmediatePropagation(),L.preventDefault(),V}else $&&(Se.set(this,w,d.event.trigger($[0],$.slice(1),this)),L.stopPropagation(),L.isImmediatePropagationStopped=Yn)}})}d.removeEvent=function(g,w,I){g.removeEventListener&&g.removeEventListener(w,I)},d.Event=function(g,w){if(!(this instanceof d.Event))return new d.Event(g,w);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||g.defaultPrevented===void 0&&g.returnValue===!1?Yn:yi,this.target=g.target&&g.target.nodeType===3?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,w&&d.extend(this,w),this.timeStamp=g&&g.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:yi,isPropagationStopped:yi,isImmediatePropagationStopped:yi,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=Yn,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=Yn,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=Yn,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(g,w){function I(L){if(S.documentMode){var V=Se.get(this,"handle"),$=d.event.fix(L);$.type=L.type==="focusin"?"focus":"blur",$.isSimulated=!0,V(L),$.target===$.currentTarget&&V($)}else d.event.simulate(w,L.target,d.event.fix(L))}d.event.special[g]={setup:function(){var L;if(Kn(this,g,!0),S.documentMode)L=Se.get(this,w),L||this.addEventListener(w,I),Se.set(this,w,(L||0)+1);else return!1},trigger:function(){return Kn(this,g),!0},teardown:function(){var L;if(S.documentMode)L=Se.get(this,w)-1,L?Se.set(this,w,L):(this.removeEventListener(w,I),Se.remove(this,w));else return!1},_default:function(L){return Se.get(L.target,g)},delegateType:w},d.event.special[w]={setup:function(){var L=this.ownerDocument||this.document||this,V=S.documentMode?this:L,$=Se.get(V,w);$||(S.documentMode?this.addEventListener(w,I):L.addEventListener(g,I,!0)),Se.set(V,w,($||0)+1)},teardown:function(){var L=this.ownerDocument||this.document||this,V=S.documentMode?this:L,$=Se.get(V,w)-1;$?Se.set(V,w,$):(S.documentMode?this.removeEventListener(w,I):L.removeEventListener(g,I,!0),Se.remove(V,w))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,w){d.event.special[g]={delegateType:w,bindType:w,handle:function(I){var L,V=this,$=I.relatedTarget,X=I.handleObj;return(!$||$!==V&&!d.contains(V,$))&&(I.type=X.origType,L=X.handler.apply(this,arguments),I.type=w),L}}}),d.fn.extend({on:function(g,w,I,L){return tn(this,g,w,I,L)},one:function(g,w,I,L){return tn(this,g,w,I,L,1)},off:function(g,w,I){var L,V;if(g&&g.preventDefault&&g.handleObj)return L=g.handleObj,d(g.delegateTarget).off(L.namespace?L.origType+"."+L.namespace:L.origType,L.selector,L.handler),this;if(typeof g=="object"){for(V in g)this.off(V,w,g[V]);return this}return(w===!1||typeof w=="function")&&(I=w,w=void 0),I===!1&&(I=yi),this.each(function(){d.event.remove(this,g,I,w)})}});var Bn=/<script|<style|<link/i,_i=/checked\s*(?:[^=]|=\s*.checked.)/i,Je=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ct(g,w){return R(g,"table")&&R(w.nodeType!==11?w:w.firstChild,"tr")&&d(g).children("tbody")[0]||g}function Lt(g){return g.type=(g.getAttribute("type")!==null)+"/"+g.type,g}function Ft(g){return(g.type||"").slice(0,5)==="true/"?g.type=g.type.slice(5):g.removeAttribute("type"),g}function Bt(g,w){var I,L,V,$,X,ve,ce;if(w.nodeType===1){if(Se.hasData(g)&&($=Se.get(g),ce=$.events,ce)){Se.remove(w,"handle events");for(V in ce)for(I=0,L=ce[V].length;I<L;I++)d.event.add(w,V,ce[V][I])}Ye.hasData(g)&&(X=Ye.access(g),ve=d.extend({},X),Ye.set(w,ve))}}function ct(g,w){var I=w.nodeName.toLowerCase();I==="input"&&xn.test(g.type)?w.checked=g.checked:(I==="input"||I==="textarea")&&(w.defaultValue=g.defaultValue)}function Ke(g,w,I,L){w=o(w);var V,$,X,ve,ce,Ae,ze=0,He=g.length,ke=He-1,lt=w[0],Pt=_(lt);if(Pt||He>1&&typeof lt=="string"&&!m.checkClone&&_i.test(lt))return g.each(function(dr){var fr=g.eq(dr);Pt&&(w[0]=lt.call(this,dr,fr.html())),Ke(fr,w,I,L)});if(He&&(V=Rn(w,g[0].ownerDocument,!1,g,L),$=V.firstChild,V.childNodes.length===1&&(V=$),$||L)){for(X=d.map(jt(V,"script"),Lt),ve=X.length;ze<He;ze++)ce=V,ze!==ke&&(ce=d.clone(ce,!0,!0),ve&&d.merge(X,jt(ce,"script"))),I.call(g[ze],ce,ze);if(ve)for(Ae=X[X.length-1].ownerDocument,d.map(X,Ft),ze=0;ze<ve;ze++)ce=X[ze],oi.test(ce.type||"")&&!Se.access(ce,"globalEval")&&d.contains(Ae,ce)&&(ce.src&&(ce.type||"").toLowerCase()!=="module"?d._evalUrl&&!ce.noModule&&d._evalUrl(ce.src,{nonce:ce.nonce||ce.getAttribute("nonce")},Ae):T(ce.textContent.replace(Je,""),ce,Ae))}return g}function wt(g,w,I){for(var L,V=w?d.filter(w,g):g,$=0;(L=V[$])!=null;$++)!I&&L.nodeType===1&&d.cleanData(jt(L)),L.parentNode&&(I&&qr(L)&&Gr(jt(L,"script")),L.parentNode.removeChild(L));return g}d.extend({htmlPrefilter:function(g){return g},clone:function(g,w,I){var L,V,$,X,ve=g.cloneNode(!0),ce=qr(g);if(!m.noCloneChecked&&(g.nodeType===1||g.nodeType===11)&&!d.isXMLDoc(g))for(X=jt(ve),$=jt(g),L=0,V=$.length;L<V;L++)ct($[L],X[L]);if(w)if(I)for($=$||jt(g),X=X||jt(ve),L=0,V=$.length;L<V;L++)Bt($[L],X[L]);else Bt(g,ve);return X=jt(ve,"script"),X.length>0&&Gr(X,!ce&&jt(g,"script")),ve},cleanData:function(g){for(var w,I,L,V=d.event.special,$=0;(I=g[$])!==void 0;$++)if(Le(I)){if(w=I[Se.expando]){if(w.events)for(L in w.events)V[L]?d.event.remove(I,L):d.removeEvent(I,L,w.handle);I[Se.expando]=void 0}I[Ye.expando]&&(I[Ye.expando]=void 0)}}}),d.fn.extend({detach:function(g){return wt(this,g,!0)},remove:function(g){return wt(this,g)},text:function(g){return Ee(this,function(w){return w===void 0?d.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=w)})},null,g,arguments.length)},append:function(){return Ke(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=Ct(this,g);w.appendChild(g)}})},prepend:function(){return Ke(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=Ct(this,g);w.insertBefore(g,w.firstChild)}})},before:function(){return Ke(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return Ke(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,w=0;(g=this[w])!=null;w++)g.nodeType===1&&(d.cleanData(jt(g,!1)),g.textContent="");return this},clone:function(g,w){return g=g??!1,w=w??g,this.map(function(){return d.clone(this,g,w)})},html:function(g){return Ee(this,function(w){var I=this[0]||{},L=0,V=this.length;if(w===void 0&&I.nodeType===1)return I.innerHTML;if(typeof w=="string"&&!Bn.test(w)&&!Ht[(Xn.exec(w)||["",""])[1].toLowerCase()]){w=d.htmlPrefilter(w);try{for(;L<V;L++)I=this[L]||{},I.nodeType===1&&(d.cleanData(jt(I,!1)),I.innerHTML=w);I=0}catch{}}I&&this.empty().append(w)},null,g,arguments.length)},replaceWith:function(){var g=[];return Ke(this,arguments,function(w){var I=this.parentNode;d.inArray(this,g)<0&&(d.cleanData(jt(this)),I&&I.replaceChild(w,this))},g)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,w){d.fn[g]=function(I){for(var L,V=[],$=d(I),X=$.length-1,ve=0;ve<=X;ve++)L=ve===X?this:this.clone(!0),d($[ve])[w](L),a.apply(V,L.get());return this.pushStack(V)}});var Rt=new RegExp("^("+Jt+")(?!px)[a-z%]+$","i"),Wt=/^--/,ln=function(g){var w=g.ownerDocument.defaultView;return(!w||!w.opener)&&(w=t),w.getComputedStyle(g)},Jn=function(g,w,I){var L,V,$={};for(V in w)$[V]=g.style[V],g.style[V]=w[V];L=I.call(g);for(V in w)g.style[V]=$[V];return L},Dt=new RegExp(sr.join("|"),"i");(function(){function g(){if(Ae){ce.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ae.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vr.appendChild(ce).appendChild(Ae);var ze=t.getComputedStyle(Ae);I=ze.top!=="1%",ve=w(ze.marginLeft)===12,Ae.style.right="60%",$=w(ze.right)===36,L=w(ze.width)===36,Ae.style.position="absolute",V=w(Ae.offsetWidth/3)===12,vr.removeChild(ce),Ae=null}}function w(ze){return Math.round(parseFloat(ze))}var I,L,V,$,X,ve,ce=S.createElement("div"),Ae=S.createElement("div");Ae.style&&(Ae.style.backgroundClip="content-box",Ae.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=Ae.style.backgroundClip==="content-box",d.extend(m,{boxSizingReliable:function(){return g(),L},pixelBoxStyles:function(){return g(),$},pixelPosition:function(){return g(),I},reliableMarginLeft:function(){return g(),ve},scrollboxSize:function(){return g(),V},reliableTrDimensions:function(){var ze,He,ke,lt;return X==null&&(ze=S.createElement("table"),He=S.createElement("tr"),ke=S.createElement("div"),ze.style.cssText="position:absolute;left:-11111px;border-collapse:separate",He.style.cssText="box-sizing:content-box;border:1px solid",He.style.height="1px",ke.style.height="9px",ke.style.display="block",vr.appendChild(ze).appendChild(He).appendChild(ke),lt=t.getComputedStyle(He),X=parseInt(lt.height,10)+parseInt(lt.borderTopWidth,10)+parseInt(lt.borderBottomWidth,10)===He.offsetHeight,vr.removeChild(ze)),X}}))})();function rn(g,w,I){var L,V,$,X,ve=Wt.test(w),ce=g.style;return I=I||ln(g),I&&(X=I.getPropertyValue(w)||I[w],ve&&X&&(X=X.replace(Y,"$1")||void 0),X===""&&!qr(g)&&(X=d.style(g,w)),!m.pixelBoxStyles()&&Rt.test(X)&&Dt.test(w)&&(L=ce.width,V=ce.minWidth,$=ce.maxWidth,ce.minWidth=ce.maxWidth=ce.width=X,X=I.width,ce.width=L,ce.minWidth=V,ce.maxWidth=$)),X!==void 0?X+"":X}function Pr(g,w){return{get:function(){if(g()){delete this.get;return}return(this.get=w).apply(this,arguments)}}}var Dr=["Webkit","Moz","ms"],$r=S.createElement("div").style,Cr={};function kn(g){for(var w=g[0].toUpperCase()+g.slice(1),I=Dr.length;I--;)if(g=Dr[I]+w,g in $r)return g}function Zt(g){var w=d.cssProps[g]||Cr[g];return w||(g in $r?g:Cr[g]=kn(g)||g)}var bi=/^(none|table(?!-c[ea]).+)/,Ci={position:"absolute",visibility:"hidden",display:"block"},$i={letterSpacing:"0",fontWeight:"400"};function Qe(g,w,I){var L=Sr.exec(w);return L?Math.max(0,L[2]-(I||0))+(L[3]||"px"):w}function mt(g,w,I,L,V,$){var X=w==="width"?1:0,ve=0,ce=0,Ae=0;if(I===(L?"border":"content"))return 0;for(;X<4;X+=2)I==="margin"&&(Ae+=d.css(g,I+sr[X],!0,V)),L?(I==="content"&&(ce-=d.css(g,"padding"+sr[X],!0,V)),I!=="margin"&&(ce-=d.css(g,"border"+sr[X]+"Width",!0,V))):(ce+=d.css(g,"padding"+sr[X],!0,V),I!=="padding"?ce+=d.css(g,"border"+sr[X]+"Width",!0,V):ve+=d.css(g,"border"+sr[X]+"Width",!0,V));return!L&&$>=0&&(ce+=Math.max(0,Math.ceil(g["offset"+w[0].toUpperCase()+w.slice(1)]-$-ce-ve-.5))||0),ce+Ae}function pt(g,w,I){var L=ln(g),V=!m.boxSizingReliable()||I,$=V&&d.css(g,"boxSizing",!1,L)==="border-box",X=$,ve=rn(g,w,L),ce="offset"+w[0].toUpperCase()+w.slice(1);if(Rt.test(ve)){if(!I)return ve;ve="auto"}return(!m.boxSizingReliable()&&$||!m.reliableTrDimensions()&&R(g,"tr")||ve==="auto"||!parseFloat(ve)&&d.css(g,"display",!1,L)==="inline")&&g.getClientRects().length&&($=d.css(g,"boxSizing",!1,L)==="border-box",X=ce in g,X&&(ve=g[ce])),ve=parseFloat(ve)||0,ve+mt(g,w,I||($?"border":"content"),X,L,ve)+"px"}d.extend({cssHooks:{opacity:{get:function(g,w){if(w){var I=rn(g,"opacity");return I===""?"1":I}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(g,w,I,L){if(!(!g||g.nodeType===3||g.nodeType===8||!g.style)){var V,$,X,ve=Ue(w),ce=Wt.test(w),Ae=g.style;if(ce||(w=Zt(ve)),X=d.cssHooks[w]||d.cssHooks[ve],I!==void 0){if($=typeof I,$==="string"&&(V=Sr.exec(I))&&V[1]&&(I=ur(g,w,V),$="number"),I==null||I!==I)return;$==="number"&&!ce&&(I+=V&&V[3]||(d.cssNumber[ve]?"":"px")),!m.clearCloneStyle&&I===""&&w.indexOf("background")===0&&(Ae[w]="inherit"),(!X||!("set"in X)||(I=X.set(g,I,L))!==void 0)&&(ce?Ae.setProperty(w,I):Ae[w]=I)}else return X&&"get"in X&&(V=X.get(g,!1,L))!==void 0?V:Ae[w]}},css:function(g,w,I,L){var V,$,X,ve=Ue(w),ce=Wt.test(w);return ce||(w=Zt(ve)),X=d.cssHooks[w]||d.cssHooks[ve],X&&"get"in X&&(V=X.get(g,!0,I)),V===void 0&&(V=rn(g,w,L)),V==="normal"&&w in $i&&(V=$i[w]),I===""||I?($=parseFloat(V),I===!0||isFinite($)?$||0:V):V}}),d.each(["height","width"],function(g,w){d.cssHooks[w]={get:function(I,L,V){if(L)return bi.test(d.css(I,"display"))&&(!I.getClientRects().length||!I.getBoundingClientRect().width)?Jn(I,Ci,function(){return pt(I,w,V)}):pt(I,w,V)},set:function(I,L,V){var $,X=ln(I),ve=!m.scrollboxSize()&&X.position==="absolute",ce=ve||V,Ae=ce&&d.css(I,"boxSizing",!1,X)==="border-box",ze=V?mt(I,w,V,Ae,X):0;return Ae&&ve&&(ze-=Math.ceil(I["offset"+w[0].toUpperCase()+w.slice(1)]-parseFloat(X[w])-mt(I,w,"border",!1,X)-.5)),ze&&($=Sr.exec(L))&&($[3]||"px")!=="px"&&(I.style[w]=L,L=d.css(I,w)),Qe(I,L,ze)}}}),d.cssHooks.marginLeft=Pr(m.reliableMarginLeft,function(g,w){if(w)return(parseFloat(rn(g,"marginLeft"))||g.getBoundingClientRect().left-Jn(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(g,w){d.cssHooks[g+w]={expand:function(I){for(var L=0,V={},$=typeof I=="string"?I.split(" "):[I];L<4;L++)V[g+sr[L]+w]=$[L]||$[L-2]||$[0];return V}},g!=="margin"&&(d.cssHooks[g+w].set=Qe)}),d.fn.extend({css:function(g,w){return Ee(this,function(I,L,V){var $,X,ve={},ce=0;if(Array.isArray(L)){for($=ln(I),X=L.length;ce<X;ce++)ve[L[ce]]=d.css(I,L[ce],!1,$);return ve}return V!==void 0?d.style(I,L,V):d.css(I,L)},g,w,arguments.length>1)}});function vt(g,w,I,L,V){return new vt.prototype.init(g,w,I,L,V)}d.Tween=vt,vt.prototype={constructor:vt,init:function(g,w,I,L,V,$){this.elem=g,this.prop=I,this.easing=V||d.easing._default,this.options=w,this.start=this.now=this.cur(),this.end=L,this.unit=$||(d.cssNumber[I]?"":"px")},cur:function(){var g=vt.propHooks[this.prop];return g&&g.get?g.get(this):vt.propHooks._default.get(this)},run:function(g){var w,I=vt.propHooks[this.prop];return this.options.duration?this.pos=w=d.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):this.pos=w=g,this.now=(this.end-this.start)*w+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),I&&I.set?I.set(this):vt.propHooks._default.set(this),this}},vt.prototype.init.prototype=vt.prototype,vt.propHooks={_default:{get:function(g){var w;return g.elem.nodeType!==1||g.elem[g.prop]!=null&&g.elem.style[g.prop]==null?g.elem[g.prop]:(w=d.css(g.elem,g.prop,""),!w||w==="auto"?0:w)},set:function(g){d.fx.step[g.prop]?d.fx.step[g.prop](g):g.elem.nodeType===1&&(d.cssHooks[g.prop]||g.elem.style[Zt(g.prop)]!=null)?d.style(g.elem,g.prop,g.now+g.unit):g.elem[g.prop]=g.now}}},vt.propHooks.scrollTop=vt.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},d.easing={linear:function(g){return g},swing:function(g){return .5-Math.cos(g*Math.PI)/2},_default:"swing"},d.fx=vt.prototype.init,d.fx.step={};var Mt,cr,Kr=/^(?:toggle|show|hide)$/,mn=/queueHooks$/;function Ur(){cr&&(S.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Ur):t.setTimeout(Ur,d.fx.interval),d.fx.tick())}function Cn(){return t.setTimeout(function(){Mt=void 0}),Mt=Date.now()}function jn(g,w){var I,L=0,V={height:g};for(w=w?1:0;L<4;L+=2-w)I=sr[L],V["margin"+I]=V["padding"+I]=g;return w&&(V.opacity=V.width=g),V}function wi(g,w,I){for(var L,V=(Zn.tweeners[w]||[]).concat(Zn.tweeners["*"]),$=0,X=V.length;$<X;$++)if(L=V[$].call(I,w,g))return L}function Qo(g,w,I){var L,V,$,X,ve,ce,Ae,ze,He="width"in w||"height"in w,ke=this,lt={},Pt=g.style,dr=g.nodeType&&In(g),fr=Se.get(g,"fxshow");I.queue||(X=d._queueHooks(g,"fx"),X.unqueued==null&&(X.unqueued=0,ve=X.empty.fire,X.empty.fire=function(){X.unqueued||ve()}),X.unqueued++,ke.always(function(){ke.always(function(){X.unqueued--,d.queue(g,"fx").length||X.empty.fire()})}));for(L in w)if(V=w[L],Kr.test(V)){if(delete w[L],$=$||V==="toggle",V===(dr?"hide":"show"))if(V==="show"&&fr&&fr[L]!==void 0)dr=!0;else continue;lt[L]=fr&&fr[L]||d.style(g,L)}if(ce=!d.isEmptyObject(w),!(!ce&&d.isEmptyObject(lt))){He&&g.nodeType===1&&(I.overflow=[Pt.overflow,Pt.overflowX,Pt.overflowY],Ae=fr&&fr.display,Ae==null&&(Ae=Se.get(g,"display")),ze=d.css(g,"display"),ze==="none"&&(Ae?ze=Ae:(Pn([g],!0),Ae=g.style.display||Ae,ze=d.css(g,"display"),Pn([g]))),(ze==="inline"||ze==="inline-block"&&Ae!=null)&&d.css(g,"float")==="none"&&(ce||(ke.done(function(){Pt.display=Ae}),Ae==null&&(ze=Pt.display,Ae=ze==="none"?"":ze)),Pt.display="inline-block")),I.overflow&&(Pt.overflow="hidden",ke.always(function(){Pt.overflow=I.overflow[0],Pt.overflowX=I.overflow[1],Pt.overflowY=I.overflow[2]})),ce=!1;for(L in lt)ce||(fr?"hidden"in fr&&(dr=fr.hidden):fr=Se.access(g,"fxshow",{display:Ae}),$&&(fr.hidden=!dr),dr&&Pn([g],!0),ke.done(function(){dr||Pn([g]),Se.remove(g,"fxshow");for(L in lt)d.style(g,L,lt[L])})),ce=wi(dr?fr[L]:0,L,ke),L in fr||(fr[L]=ce.start,dr&&(ce.end=ce.start,ce.start=0))}}function Ts(g,w){var I,L,V,$,X;for(I in g)if(L=Ue(I),V=w[L],$=g[I],Array.isArray($)&&(V=$[1],$=g[I]=$[0]),I!==L&&(g[L]=$,delete g[I]),X=d.cssHooks[L],X&&"expand"in X){$=X.expand($),delete g[L];for(I in $)I in g||(g[I]=$[I],w[I]=V)}else w[L]=V}function Zn(g,w,I){var L,V,$=0,X=Zn.prefilters.length,ve=d.Deferred().always(function(){delete ce.elem}),ce=function(){if(V)return!1;for(var He=Mt||Cn(),ke=Math.max(0,Ae.startTime+Ae.duration-He),lt=ke/Ae.duration||0,Pt=1-lt,dr=0,fr=Ae.tweens.length;dr<fr;dr++)Ae.tweens[dr].run(Pt);return ve.notifyWith(g,[Ae,Pt,ke]),Pt<1&&fr?ke:(fr||ve.notifyWith(g,[Ae,1,0]),ve.resolveWith(g,[Ae]),!1)},Ae=ve.promise({elem:g,props:d.extend({},w),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},I),originalProperties:w,originalOptions:I,startTime:Mt||Cn(),duration:I.duration,tweens:[],createTween:function(He,ke){var lt=d.Tween(g,Ae.opts,He,ke,Ae.opts.specialEasing[He]||Ae.opts.easing);return Ae.tweens.push(lt),lt},stop:function(He){var ke=0,lt=He?Ae.tweens.length:0;if(V)return this;for(V=!0;ke<lt;ke++)Ae.tweens[ke].run(1);return He?(ve.notifyWith(g,[Ae,1,0]),ve.resolveWith(g,[Ae,He])):ve.rejectWith(g,[Ae,He]),this}}),ze=Ae.props;for(Ts(ze,Ae.opts.specialEasing);$<X;$++)if(L=Zn.prefilters[$].call(Ae,g,ze,Ae.opts),L)return _(L.stop)&&(d._queueHooks(Ae.elem,Ae.opts.queue).stop=L.stop.bind(L)),L;return d.map(ze,wi,Ae),_(Ae.opts.start)&&Ae.opts.start.call(g,Ae),Ae.progress(Ae.opts.progress).done(Ae.opts.done,Ae.opts.complete).fail(Ae.opts.fail).always(Ae.opts.always),d.fx.timer(d.extend(ce,{elem:g,anim:Ae,queue:Ae.opts.queue})),Ae}d.Animation=d.extend(Zn,{tweeners:{"*":[function(g,w){var I=this.createTween(g,w);return ur(I.elem,g,Sr.exec(w),I),I}]},tweener:function(g,w){_(g)?(w=g,g=["*"]):g=g.match(Ne);for(var I,L=0,V=g.length;L<V;L++)I=g[L],Zn.tweeners[I]=Zn.tweeners[I]||[],Zn.tweeners[I].unshift(w)},prefilters:[Qo],prefilter:function(g,w){w?Zn.prefilters.unshift(g):Zn.prefilters.push(g)}}),d.speed=function(g,w,I){var L=g&&typeof g=="object"?d.extend({},g):{complete:I||!I&&w||_(g)&&g,duration:g,easing:I&&w||w&&!_(w)&&w};return d.fx.off?L.duration=0:typeof L.duration!="number"&&(L.duration in d.fx.speeds?L.duration=d.fx.speeds[L.duration]:L.duration=d.fx.speeds._default),(L.queue==null||L.queue===!0)&&(L.queue="fx"),L.old=L.complete,L.complete=function(){_(L.old)&&L.old.call(this),L.queue&&d.dequeue(this,L.queue)},L},d.fn.extend({fadeTo:function(g,w,I,L){return this.filter(In).css("opacity",0).show().end().animate({opacity:w},g,I,L)},animate:function(g,w,I,L){var V=d.isEmptyObject(g),$=d.speed(w,I,L),X=function(){var ve=Zn(this,d.extend({},g),$);(V||Se.get(this,"finish"))&&ve.stop(!0)};return X.finish=X,V||$.queue===!1?this.each(X):this.queue($.queue,X)},stop:function(g,w,I){var L=function(V){var $=V.stop;delete V.stop,$(I)};return typeof g!="string"&&(I=w,w=g,g=void 0),w&&this.queue(g||"fx",[]),this.each(function(){var V=!0,$=g!=null&&g+"queueHooks",X=d.timers,ve=Se.get(this);if($)ve[$]&&ve[$].stop&&L(ve[$]);else for($ in ve)ve[$]&&ve[$].stop&&mn.test($)&&L(ve[$]);for($=X.length;$--;)X[$].elem===this&&(g==null||X[$].queue===g)&&(X[$].anim.stop(I),V=!1,X.splice($,1));(V||!I)&&d.dequeue(this,g)})},finish:function(g){return g!==!1&&(g=g||"fx"),this.each(function(){var w,I=Se.get(this),L=I[g+"queue"],V=I[g+"queueHooks"],$=d.timers,X=L?L.length:0;for(I.finish=!0,d.queue(this,g,[]),V&&V.stop&&V.stop.call(this,!0),w=$.length;w--;)$[w].elem===this&&$[w].queue===g&&($[w].anim.stop(!0),$.splice(w,1));for(w=0;w<X;w++)L[w]&&L[w].finish&&L[w].finish.call(this);delete I.finish})}}),d.each(["toggle","show","hide"],function(g,w){var I=d.fn[w];d.fn[w]=function(L,V,$){return L==null||typeof L=="boolean"?I.apply(this,arguments):this.animate(jn(w,!0),L,V,$)}}),d.each({slideDown:jn("show"),slideUp:jn("hide"),slideToggle:jn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,w){d.fn[g]=function(I,L,V){return this.animate(w,I,L,V)}}),d.timers=[],d.fx.tick=function(){var g,w=0,I=d.timers;for(Mt=Date.now();w<I.length;w++)g=I[w],!g()&&I[w]===g&&I.splice(w--,1);I.length||d.fx.stop(),Mt=void 0},d.fx.timer=function(g){d.timers.push(g),d.fx.start()},d.fx.interval=13,d.fx.start=function(){cr||(cr=!0,Ur())},d.fx.stop=function(){cr=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(g,w){return g=d.fx&&d.fx.speeds[g]||g,w=w||"fx",this.queue(w,function(I,L){var V=t.setTimeout(I,g);L.stop=function(){t.clearTimeout(V)}})},function(){var g=S.createElement("input"),w=S.createElement("select"),I=w.appendChild(S.createElement("option"));g.type="checkbox",m.checkOn=g.value!=="",m.optSelected=I.selected,g=S.createElement("input"),g.value="t",g.type="radio",m.radioValue=g.value==="t"}();var ka,as=d.expr.attrHandle;d.fn.extend({attr:function(g,w){return Ee(this,d.attr,g,w,arguments.length>1)},removeAttr:function(g){return this.each(function(){d.removeAttr(this,g)})}}),d.extend({attr:function(g,w,I){var L,V,$=g.nodeType;if(!($===3||$===8||$===2)){if(typeof g.getAttribute>"u")return d.prop(g,w,I);if(($!==1||!d.isXMLDoc(g))&&(V=d.attrHooks[w.toLowerCase()]||(d.expr.match.bool.test(w)?ka:void 0)),I!==void 0){if(I===null){d.removeAttr(g,w);return}return V&&"set"in V&&(L=V.set(g,I,w))!==void 0?L:(g.setAttribute(w,I+""),I)}return V&&"get"in V&&(L=V.get(g,w))!==null?L:(L=d.find.attr(g,w),L??void 0)}},attrHooks:{type:{set:function(g,w){if(!m.radioValue&&w==="radio"&&R(g,"input")){var I=g.value;return g.setAttribute("type",w),I&&(g.value=I),w}}}},removeAttr:function(g,w){var I,L=0,V=w&&w.match(Ne);if(V&&g.nodeType===1)for(;I=V[L++];)g.removeAttribute(I)}}),ka={set:function(g,w,I){return w===!1?d.removeAttr(g,I):g.setAttribute(I,I),I}},d.each(d.expr.match.bool.source.match(/\w+/g),function(g,w){var I=as[w]||d.find.attr;as[w]=function(L,V,$){var X,ve,ce=V.toLowerCase();return $||(ve=as[ce],as[ce]=X,X=I(L,V,$)!=null?ce:null,as[ce]=ve),X}});var Ma=/^(?:input|select|textarea|button)$/i,ea=/^(?:a|area)$/i;d.fn.extend({prop:function(g,w){return Ee(this,d.prop,g,w,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[d.propFix[g]||g]})}}),d.extend({prop:function(g,w,I){var L,V,$=g.nodeType;if(!($===3||$===8||$===2))return($!==1||!d.isXMLDoc(g))&&(w=d.propFix[w]||w,V=d.propHooks[w]),I!==void 0?V&&"set"in V&&(L=V.set(g,I,w))!==void 0?L:g[w]=I:V&&"get"in V&&(L=V.get(g,w))!==null?L:g[w]},propHooks:{tabIndex:{get:function(g){var w=d.find.attr(g,"tabindex");return w?parseInt(w,10):Ma.test(g.nodeName)||ea.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(d.propHooks.selected={get:function(g){var w=g.parentNode;return w&&w.parentNode&&w.parentNode.selectedIndex,null},set:function(g){var w=g.parentNode;w&&(w.selectedIndex,w.parentNode&&w.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});function ta(g){var w=g.match(Ne)||[];return w.join(" ")}function ra(g){return g.getAttribute&&g.getAttribute("class")||""}function mf(g){return Array.isArray(g)?g:typeof g=="string"?g.match(Ne)||[]:[]}d.fn.extend({addClass:function(g){var w,I,L,V,$,X;return _(g)?this.each(function(ve){d(this).addClass(g.call(this,ve,ra(this)))}):(w=mf(g),w.length?this.each(function(){if(L=ra(this),I=this.nodeType===1&&" "+ta(L)+" ",I){for($=0;$<w.length;$++)V=w[$],I.indexOf(" "+V+" ")<0&&(I+=V+" ");X=ta(I),L!==X&&this.setAttribute("class",X)}}):this)},removeClass:function(g){var w,I,L,V,$,X;return _(g)?this.each(function(ve){d(this).removeClass(g.call(this,ve,ra(this)))}):arguments.length?(w=mf(g),w.length?this.each(function(){if(L=ra(this),I=this.nodeType===1&&" "+ta(L)+" ",I){for($=0;$<w.length;$++)for(V=w[$];I.indexOf(" "+V+" ")>-1;)I=I.replace(" "+V+" "," ");X=ta(I),L!==X&&this.setAttribute("class",X)}}):this):this.attr("class","")},toggleClass:function(g,w){var I,L,V,$,X=typeof g,ve=X==="string"||Array.isArray(g);return _(g)?this.each(function(ce){d(this).toggleClass(g.call(this,ce,ra(this),w),w)}):typeof w=="boolean"&&ve?w?this.addClass(g):this.removeClass(g):(I=mf(g),this.each(function(){if(ve)for($=d(this),V=0;V<I.length;V++)L=I[V],$.hasClass(L)?$.removeClass(L):$.addClass(L);else(g===void 0||X==="boolean")&&(L=ra(this),L&&Se.set(this,"__className__",L),this.setAttribute&&this.setAttribute("class",L||g===!1?"":Se.get(this,"__className__")||""))}))},hasClass:function(g){var w,I,L=0;for(w=" "+g+" ";I=this[L++];)if(I.nodeType===1&&(" "+ta(ra(I))+" ").indexOf(w)>-1)return!0;return!1}});var yd=/\r/g;d.fn.extend({val:function(g){var w,I,L,V=this[0];return arguments.length?(L=_(g),this.each(function($){var X;this.nodeType===1&&(L?X=g.call(this,$,d(this).val()):X=g,X==null?X="":typeof X=="number"?X+="":Array.isArray(X)&&(X=d.map(X,function(ve){return ve==null?"":ve+""})),w=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],(!w||!("set"in w)||w.set(this,X,"value")===void 0)&&(this.value=X))})):V?(w=d.valHooks[V.type]||d.valHooks[V.nodeName.toLowerCase()],w&&"get"in w&&(I=w.get(V,"value"))!==void 0?I:(I=V.value,typeof I=="string"?I.replace(yd,""):I??"")):void 0}}),d.extend({valHooks:{option:{get:function(g){var w=d.find.attr(g,"value");return w??ta(d.text(g))}},select:{get:function(g){var w,I,L,V=g.options,$=g.selectedIndex,X=g.type==="select-one",ve=X?null:[],ce=X?$+1:V.length;for($<0?L=ce:L=X?$:0;L<ce;L++)if(I=V[L],(I.selected||L===$)&&!I.disabled&&(!I.parentNode.disabled||!R(I.parentNode,"optgroup"))){if(w=d(I).val(),X)return w;ve.push(w)}return ve},set:function(g,w){for(var I,L,V=g.options,$=d.makeArray(w),X=V.length;X--;)L=V[X],(L.selected=d.inArray(d.valHooks.option.get(L),$)>-1)&&(I=!0);return I||(g.selectedIndex=-1),$}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(g,w){if(Array.isArray(w))return g.checked=d.inArray(d(g).val(),w)>-1}},m.checkOn||(d.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value})});var pu=t.location,yf={guid:Date.now()},el=/\?/;d.parseXML=function(g){var w,I;if(!g||typeof g!="string")return null;try{w=new t.DOMParser().parseFromString(g,"text/xml")}catch{}return I=w&&w.getElementsByTagName("parsererror")[0],(!w||I)&&d.error("Invalid XML: "+(I?d.map(I.childNodes,function(L){return L.textContent}).join(`
`):g)),w};var _d=/^(?:focusinfocus|focusoutblur)$/,bd=function(g){g.stopPropagation()};d.extend(d.event,{trigger:function(g,w,I,L){var V,$,X,ve,ce,Ae,ze,He,ke=[I||S],lt=h.call(g,"type")?g.type:g,Pt=h.call(g,"namespace")?g.namespace.split("."):[];if($=He=X=I=I||S,!(I.nodeType===3||I.nodeType===8)&&!_d.test(lt+d.event.triggered)&&(lt.indexOf(".")>-1&&(Pt=lt.split("."),lt=Pt.shift(),Pt.sort()),ce=lt.indexOf(":")<0&&"on"+lt,g=g[d.expando]?g:new d.Event(lt,typeof g=="object"&&g),g.isTrigger=L?2:3,g.namespace=Pt.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=I),w=w==null?[g]:d.makeArray(w,[g]),ze=d.event.special[lt]||{},!(!L&&ze.trigger&&ze.trigger.apply(I,w)===!1))){if(!L&&!ze.noBubble&&!x(I)){for(ve=ze.delegateType||lt,_d.test(ve+lt)||($=$.parentNode);$;$=$.parentNode)ke.push($),X=$;X===(I.ownerDocument||S)&&ke.push(X.defaultView||X.parentWindow||t)}for(V=0;($=ke[V++])&&!g.isPropagationStopped();)He=$,g.type=V>1?ve:ze.bindType||lt,Ae=(Se.get($,"events")||Object.create(null))[g.type]&&Se.get($,"handle"),Ae&&Ae.apply($,w),Ae=ce&&$[ce],Ae&&Ae.apply&&Le($)&&(g.result=Ae.apply($,w),g.result===!1&&g.preventDefault());return g.type=lt,!L&&!g.isDefaultPrevented()&&(!ze._default||ze._default.apply(ke.pop(),w)===!1)&&Le(I)&&ce&&_(I[lt])&&!x(I)&&(X=I[ce],X&&(I[ce]=null),d.event.triggered=lt,g.isPropagationStopped()&&He.addEventListener(lt,bd),I[lt](),g.isPropagationStopped()&&He.removeEventListener(lt,bd),d.event.triggered=void 0,X&&(I[ce]=X)),g.result}},simulate:function(g,w,I){var L=d.extend(new d.Event,I,{type:g,isSimulated:!0});d.event.trigger(L,null,w)}}),d.fn.extend({trigger:function(g,w){return this.each(function(){d.event.trigger(g,w,this)})},triggerHandler:function(g,w){var I=this[0];if(I)return d.event.trigger(g,w,I,!0)}});var Bg=/\[\]$/,_f=/\r?\n/g,zg=/^(?:submit|button|image|reset|file)$/i,Vg=/^(?:input|select|textarea|keygen)/i;function bf(g,w,I,L){var V;if(Array.isArray(w))d.each(w,function($,X){I||Bg.test(g)?L(g,X):bf(g+"["+(typeof X=="object"&&X!=null?$:"")+"]",X,I,L)});else if(!I&&E(w)==="object")for(V in w)bf(g+"["+V+"]",w[V],I,L);else L(g,w)}d.param=function(g,w){var I,L=[],V=function($,X){var ve=_(X)?X():X;L[L.length]=encodeURIComponent($)+"="+encodeURIComponent(ve??"")};if(g==null)return"";if(Array.isArray(g)||g.jquery&&!d.isPlainObject(g))d.each(g,function(){V(this.name,this.value)});else for(I in g)bf(I,g[I],w,V);return L.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=d.prop(this,"elements");return g?d.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!d(this).is(":disabled")&&Vg.test(this.nodeName)&&!zg.test(g)&&(this.checked||!xn.test(g))}).map(function(g,w){var I=d(this).val();return I==null?null:Array.isArray(I)?d.map(I,function(L){return{name:w.name,value:L.replace(_f,`\r
`)}}):{name:w.name,value:I.replace(_f,`\r
`)}}).get()}});var Gg=/%20/g,wf=/#.*$/,$g=/([?&])_=[^&]*/,Ug=/^(.*?):[ \t]*([^\r\n]*)$/mg,jg=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hg=/^(?:GET|HEAD)$/,Wg=/^\/\//,yn={},nn={},wd="*/".concat("*"),xf=S.createElement("a");xf.href=pu.href;function xd(g){return function(w,I){typeof w!="string"&&(I=w,w="*");var L,V=0,$=w.toLowerCase().match(Ne)||[];if(_(I))for(;L=$[V++];)L[0]==="+"?(L=L.slice(1)||"*",(g[L]=g[L]||[]).unshift(I)):(g[L]=g[L]||[]).push(I)}}function Sd(g,w,I,L){var V={},$=g===nn;function X(ve){var ce;return V[ve]=!0,d.each(g[ve]||[],function(Ae,ze){var He=ze(w,I,L);if(typeof He=="string"&&!$&&!V[He])return w.dataTypes.unshift(He),X(He),!1;if($)return!(ce=He)}),ce}return X(w.dataTypes[0])||!V["*"]&&X("*")}function Sf(g,w){var I,L,V=d.ajaxSettings.flatOptions||{};for(I in w)w[I]!==void 0&&((V[I]?g:L||(L={}))[I]=w[I]);return L&&d.extend(!0,g,L),g}function Xg(g,w,I){for(var L,V,$,X,ve=g.contents,ce=g.dataTypes;ce[0]==="*";)ce.shift(),L===void 0&&(L=g.mimeType||w.getResponseHeader("Content-Type"));if(L){for(V in ve)if(ve[V]&&ve[V].test(L)){ce.unshift(V);break}}if(ce[0]in I)$=ce[0];else{for(V in I){if(!ce[0]||g.converters[V+" "+ce[0]]){$=V;break}X||(X=V)}$=$||X}if($)return $!==ce[0]&&ce.unshift($),I[$]}function Ed(g,w,I,L){var V,$,X,ve,ce,Ae={},ze=g.dataTypes.slice();if(ze[1])for(X in g.converters)Ae[X.toLowerCase()]=g.converters[X];for($=ze.shift();$;)if(g.responseFields[$]&&(I[g.responseFields[$]]=w),!ce&&L&&g.dataFilter&&(w=g.dataFilter(w,g.dataType)),ce=$,$=ze.shift(),$){if($==="*")$=ce;else if(ce!=="*"&&ce!==$){if(X=Ae[ce+" "+$]||Ae["* "+$],!X){for(V in Ae)if(ve=V.split(" "),ve[1]===$&&(X=Ae[ce+" "+ve[0]]||Ae["* "+ve[0]],X)){X===!0?X=Ae[V]:Ae[V]!==!0&&($=ve[0],ze.unshift(ve[1]));break}}if(X!==!0)if(X&&g.throws)w=X(w);else try{w=X(w)}catch(He){return{state:"parsererror",error:X?He:"No conversion from "+ce+" to "+$}}}}return{state:"success",data:w}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pu.href,type:"GET",isLocal:jg.test(pu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,w){return w?Sf(Sf(g,d.ajaxSettings),w):Sf(d.ajaxSettings,g)},ajaxPrefilter:xd(yn),ajaxTransport:xd(nn),ajax:function(g,w){typeof g=="object"&&(w=g,g=void 0),w=w||{};var I,L,V,$,X,ve,ce,Ae,ze,He,ke=d.ajaxSetup({},w),lt=ke.context||ke,Pt=ke.context&&(lt.nodeType||lt.jquery)?d(lt):d.event,dr=d.Deferred(),fr=d.Callbacks("once memory"),di=ke.statusCode||{},Vn={},Ws={},Xs="canceled",Or={readyState:0,getResponseHeader:function(Ir){var fn;if(ce){if(!$)for($={};fn=Ug.exec(V);)$[fn[1].toLowerCase()+" "]=($[fn[1].toLowerCase()+" "]||[]).concat(fn[2]);fn=$[Ir.toLowerCase()+" "]}return fn==null?null:fn.join(", ")},getAllResponseHeaders:function(){return ce?V:null},setRequestHeader:function(Ir,fn){return ce==null&&(Ir=Ws[Ir.toLowerCase()]=Ws[Ir.toLowerCase()]||Ir,Vn[Ir]=fn),this},overrideMimeType:function(Ir){return ce==null&&(ke.mimeType=Ir),this},statusCode:function(Ir){var fn;if(Ir)if(ce)Or.always(Ir[Or.status]);else for(fn in Ir)di[fn]=[di[fn],Ir[fn]];return this},abort:function(Ir){var fn=Ir||Xs;return I&&I.abort(fn),na(0,fn),this}};if(dr.promise(Or),ke.url=((g||ke.url||pu.href)+"").replace(Wg,pu.protocol+"//"),ke.type=w.method||w.type||ke.method||ke.type,ke.dataTypes=(ke.dataType||"*").toLowerCase().match(Ne)||[""],ke.crossDomain==null){ve=S.createElement("a");try{ve.href=ke.url,ve.href=ve.href,ke.crossDomain=xf.protocol+"//"+xf.host!=ve.protocol+"//"+ve.host}catch{ke.crossDomain=!0}}if(ke.data&&ke.processData&&typeof ke.data!="string"&&(ke.data=d.param(ke.data,ke.traditional)),Sd(yn,ke,w,Or),ce)return Or;Ae=d.event&&ke.global,Ae&&d.active++===0&&d.event.trigger("ajaxStart"),ke.type=ke.type.toUpperCase(),ke.hasContent=!Hg.test(ke.type),L=ke.url.replace(wf,""),ke.hasContent?ke.data&&ke.processData&&(ke.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ke.data=ke.data.replace(Gg,"+")):(He=ke.url.slice(L.length),ke.data&&(ke.processData||typeof ke.data=="string")&&(L+=(el.test(L)?"&":"?")+ke.data,delete ke.data),ke.cache===!1&&(L=L.replace($g,"$1"),He=(el.test(L)?"&":"?")+"_="+yf.guid+++He),ke.url=L+He),ke.ifModified&&(d.lastModified[L]&&Or.setRequestHeader("If-Modified-Since",d.lastModified[L]),d.etag[L]&&Or.setRequestHeader("If-None-Match",d.etag[L])),(ke.data&&ke.hasContent&&ke.contentType!==!1||w.contentType)&&Or.setRequestHeader("Content-Type",ke.contentType),Or.setRequestHeader("Accept",ke.dataTypes[0]&&ke.accepts[ke.dataTypes[0]]?ke.accepts[ke.dataTypes[0]]+(ke.dataTypes[0]!=="*"?", "+wd+"; q=0.01":""):ke.accepts["*"]);for(ze in ke.headers)Or.setRequestHeader(ze,ke.headers[ze]);if(ke.beforeSend&&(ke.beforeSend.call(lt,Or,ke)===!1||ce))return Or.abort();if(Xs="abort",fr.add(ke.complete),Or.done(ke.success),Or.fail(ke.error),I=Sd(nn,ke,w,Or),!I)na(-1,"No Transport");else{if(Or.readyState=1,Ae&&Pt.trigger("ajaxSend",[Or,ke]),ce)return Or;ke.async&&ke.timeout>0&&(X=t.setTimeout(function(){Or.abort("timeout")},ke.timeout));try{ce=!1,I.send(Vn,na)}catch(Ir){if(ce)throw Ir;na(-1,Ir)}}function na(Ir,fn,tc,rl){var Ps,La,cs,To,ia,Mi=fn;ce||(ce=!0,X&&t.clearTimeout(X),I=void 0,V=rl||"",Or.readyState=Ir>0?4:0,Ps=Ir>=200&&Ir<300||Ir===304,tc&&(To=Xg(ke,Or,tc)),!Ps&&d.inArray("script",ke.dataTypes)>-1&&d.inArray("json",ke.dataTypes)<0&&(ke.converters["text script"]=function(){}),To=Ed(ke,To,Or,Ps),Ps?(ke.ifModified&&(ia=Or.getResponseHeader("Last-Modified"),ia&&(d.lastModified[L]=ia),ia=Or.getResponseHeader("etag"),ia&&(d.etag[L]=ia)),Ir===204||ke.type==="HEAD"?Mi="nocontent":Ir===304?Mi="notmodified":(Mi=To.state,La=To.data,cs=To.error,Ps=!cs)):(cs=Mi,(Ir||!Mi)&&(Mi="error",Ir<0&&(Ir=0))),Or.status=Ir,Or.statusText=(fn||Mi)+"",Ps?dr.resolveWith(lt,[La,Mi,Or]):dr.rejectWith(lt,[Or,Mi,cs]),Or.statusCode(di),di=void 0,Ae&&Pt.trigger(Ps?"ajaxSuccess":"ajaxError",[Or,ke,Ps?La:cs]),fr.fireWith(lt,[Or,Mi]),Ae&&(Pt.trigger("ajaxComplete",[Or,ke]),--d.active||d.event.trigger("ajaxStop")))}return Or},getJSON:function(g,w,I){return d.get(g,w,I,"json")},getScript:function(g,w){return d.get(g,void 0,w,"script")}}),d.each(["get","post"],function(g,w){d[w]=function(I,L,V,$){return _(L)&&($=$||V,V=L,L=void 0),d.ajax(d.extend({url:I,type:w,dataType:$,data:L,success:V},d.isPlainObject(I)&&I))}}),d.ajaxPrefilter(function(g){var w;for(w in g.headers)w.toLowerCase()==="content-type"&&(g.contentType=g.headers[w]||"")}),d._evalUrl=function(g,w,I){return d.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(L){d.globalEval(L,w,I)}})},d.fn.extend({wrapAll:function(g){var w;return this[0]&&(_(g)&&(g=g.call(this[0])),w=d(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&w.insertBefore(this[0]),w.map(function(){for(var I=this;I.firstElementChild;)I=I.firstElementChild;return I}).append(this)),this},wrapInner:function(g){return _(g)?this.each(function(w){d(this).wrapInner(g.call(this,w))}):this.each(function(){var w=d(this),I=w.contents();I.length?I.wrapAll(g):w.append(g)})},wrap:function(g){var w=_(g);return this.each(function(I){d(this).wrapAll(w?g.call(this,I):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(g){return!d.expr.pseudos.visible(g)},d.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Yg={0:200,1223:204},zn=d.ajaxSettings.xhr();m.cors=!!zn&&"withCredentials"in zn,m.ajax=zn=!!zn,d.ajaxTransport(function(g){var w,I;if(m.cors||zn&&!g.crossDomain)return{send:function(L,V){var $,X=g.xhr();if(X.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for($ in g.xhrFields)X[$]=g.xhrFields[$];g.mimeType&&X.overrideMimeType&&X.overrideMimeType(g.mimeType),!g.crossDomain&&!L["X-Requested-With"]&&(L["X-Requested-With"]="XMLHttpRequest");for($ in L)X.setRequestHeader($,L[$]);w=function(ve){return function(){w&&(w=I=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,ve==="abort"?X.abort():ve==="error"?typeof X.status!="number"?V(0,"error"):V(X.status,X.statusText):V(Yg[X.status]||X.status,X.statusText,(X.responseType||"text")!=="text"||typeof X.responseText!="string"?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=w(),I=X.onerror=X.ontimeout=w("error"),X.onabort!==void 0?X.onabort=I:X.onreadystatechange=function(){X.readyState===4&&t.setTimeout(function(){w&&I()})},w=w("abort");try{X.send(g.hasContent&&g.data||null)}catch(ve){if(w)throw ve}},abort:function(){w&&w()}}}),d.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return d.globalEval(g),g}}}),d.ajaxPrefilter("script",function(g){g.cache===void 0&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),d.ajaxTransport("script",function(g){if(g.crossDomain||g.scriptAttrs){var w,I;return{send:function(L,V){w=d("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",I=function($){w.remove(),I=null,$&&V($.type==="error"?404:200,$.type)}),S.head.appendChild(w[0])},abort:function(){I&&I()}}}});var tl=[],Ao=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=tl.pop()||d.expando+"_"+yf.guid++;return this[g]=!0,g}}),d.ajaxPrefilter("json jsonp",function(g,w,I){var L,V,$,X=g.jsonp!==!1&&(Ao.test(g.url)?"url":typeof g.data=="string"&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ao.test(g.data)&&"data");if(X||g.dataTypes[0]==="jsonp")return L=g.jsonpCallback=_(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,X?g[X]=g[X].replace(Ao,"$1"+L):g.jsonp!==!1&&(g.url+=(el.test(g.url)?"&":"?")+g.jsonp+"="+L),g.converters["script json"]=function(){return $||d.error(L+" was not called"),$[0]},g.dataTypes[0]="json",V=t[L],t[L]=function(){$=arguments},I.always(function(){V===void 0?d(t).removeProp(L):t[L]=V,g[L]&&(g.jsonpCallback=w.jsonpCallback,tl.push(L)),$&&_(V)&&V($[0]),$=V=void 0}),"script"}),m.createHTMLDocument=function(){var g=S.implementation.createHTMLDocument("").body;return g.innerHTML="<form></form><form></form>",g.childNodes.length===2}(),d.parseHTML=function(g,w,I){if(typeof g!="string")return[];typeof w=="boolean"&&(I=w,w=!1);var L,V,$;return w||(m.createHTMLDocument?(w=S.implementation.createHTMLDocument(""),L=w.createElement("base"),L.href=S.location.href,w.head.appendChild(L)):w=S),V=we.exec(g),$=!I&&[],V?[w.createElement(V[1])]:(V=Rn([g],w,$),$&&$.length&&d($).remove(),d.merge([],V.childNodes))},d.fn.load=function(g,w,I){var L,V,$,X=this,ve=g.indexOf(" ");return ve>-1&&(L=ta(g.slice(ve)),g=g.slice(0,ve)),_(w)?(I=w,w=void 0):w&&typeof w=="object"&&(V="POST"),X.length>0&&d.ajax({url:g,type:V||"GET",dataType:"html",data:w}).done(function(ce){$=arguments,X.html(L?d("<div>").append(d.parseHTML(ce)).find(L):ce)}).always(I&&function(ce,Ae){X.each(function(){I.apply(this,$||[ce.responseText,Ae,ce])})}),this},d.expr.pseudos.animated=function(g){return d.grep(d.timers,function(w){return g===w.elem}).length},d.offset={setOffset:function(g,w,I){var L,V,$,X,ve,ce,Ae,ze=d.css(g,"position"),He=d(g),ke={};ze==="static"&&(g.style.position="relative"),ve=He.offset(),$=d.css(g,"top"),ce=d.css(g,"left"),Ae=(ze==="absolute"||ze==="fixed")&&($+ce).indexOf("auto")>-1,Ae?(L=He.position(),X=L.top,V=L.left):(X=parseFloat($)||0,V=parseFloat(ce)||0),_(w)&&(w=w.call(g,I,d.extend({},ve))),w.top!=null&&(ke.top=w.top-ve.top+X),w.left!=null&&(ke.left=w.left-ve.left+V),"using"in w?w.using.call(g,ke):He.css(ke)}},d.fn.extend({offset:function(g){if(arguments.length)return g===void 0?this:this.each(function(V){d.offset.setOffset(this,g,V)});var w,I,L=this[0];if(L)return L.getClientRects().length?(w=L.getBoundingClientRect(),I=L.ownerDocument.defaultView,{top:w.top+I.pageYOffset,left:w.left+I.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var g,w,I,L=this[0],V={top:0,left:0};if(d.css(L,"position")==="fixed")w=L.getBoundingClientRect();else{for(w=this.offset(),I=L.ownerDocument,g=L.offsetParent||I.documentElement;g&&(g===I.body||g===I.documentElement)&&d.css(g,"position")==="static";)g=g.parentNode;g&&g!==L&&g.nodeType===1&&(V=d(g).offset(),V.top+=d.css(g,"borderTopWidth",!0),V.left+=d.css(g,"borderLeftWidth",!0))}return{top:w.top-V.top-d.css(L,"marginTop",!0),left:w.left-V.left-d.css(L,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&d.css(g,"position")==="static";)g=g.offsetParent;return g||vr})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,w){var I=w==="pageYOffset";d.fn[g]=function(L){return Ee(this,function(V,$,X){var ve;if(x(V)?ve=V:V.nodeType===9&&(ve=V.defaultView),X===void 0)return ve?ve[w]:V[$];ve?ve.scrollTo(I?ve.pageXOffset:X,I?X:ve.pageYOffset):V[$]=X},g,L,arguments.length)}}),d.each(["top","left"],function(g,w){d.cssHooks[w]=Pr(m.pixelPosition,function(I,L){if(L)return L=rn(I,w),Rt.test(L)?d(I).position()[w]+"px":L})}),d.each({Height:"height",Width:"width"},function(g,w){d.each({padding:"inner"+g,content:w,"":"outer"+g},function(I,L){d.fn[L]=function(V,$){var X=arguments.length&&(I||typeof V!="boolean"),ve=I||(V===!0||$===!0?"margin":"border");return Ee(this,function(ce,Ae,ze){var He;return x(ce)?L.indexOf("outer")===0?ce["inner"+g]:ce.document.documentElement["client"+g]:ce.nodeType===9?(He=ce.documentElement,Math.max(ce.body["scroll"+g],He["scroll"+g],ce.body["offset"+g],He["offset"+g],He["client"+g])):ze===void 0?d.css(ce,Ae,ve):d.style(ce,Ae,ze,ve)},w,X?V:void 0,X)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,w){d.fn[w]=function(I){return this.on(w,I)}}),d.fn.extend({bind:function(g,w,I){return this.on(g,null,w,I)},unbind:function(g,w){return this.off(g,null,w)},delegate:function(g,w,I,L){return this.on(w,g,I,L)},undelegate:function(g,w,I){return arguments.length===1?this.off(g,"**"):this.off(w,g||"**",I)},hover:function(g,w){return this.on("mouseenter",g).on("mouseleave",w||g)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,w){d.fn[w]=function(I,L){return arguments.length>0?this.on(w,null,I,L):this.trigger(w)}});var Ad=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(g,w){var I,L,V;if(typeof w=="string"&&(I=g[w],w=g,g=I),!!_(g))return L=s.call(arguments,2),V=function(){return g.apply(w||this,L.concat(s.call(arguments)))},V.guid=g.guid=g.guid||d.guid++,V},d.holdReady=function(g){g?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=R,d.isFunction=_,d.isWindow=x,d.camelCase=Ue,d.type=E,d.now=Date.now,d.isNumeric=function(g){var w=d.type(g);return(w==="number"||w==="string")&&!isNaN(g-parseFloat(g))},d.trim=function(g){return g==null?"":(g+"").replace(Ad,"$1")};var Ef=t.jQuery,us=t.$;return d.noConflict=function(g){return t.$===d&&(t.$=us),g&&t.jQuery===d&&(t.jQuery=Ef),d},typeof r>"u"&&(t.jQuery=t.$=d),d})}(qp)),qp.exports}var n4;function Jfe(){return n4||(n4=1,function(e){(function(t){var r=typeof self=="object"&&self.self===self&&self||typeof Di=="object"&&Di.global===Di&&Di;{var n=Yfe,i;try{i=rj()}catch{}t(r,e,n,i)}})(function(t,r,n,i){var s=t.Backbone,o=Array.prototype.slice;r.VERSION="1.4.1",r.$=i,r.noConflict=function(){return t.Backbone=s,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=r.Events={},u=/\s+/,c,f=function(q,G,K,J,Ee){var fe=0,Te;if(K&&typeof K=="object")for(J!==void 0&&("context"in Ee)&&Ee.context===void 0&&(Ee.context=J),Te=n.keys(K);fe<Te.length;fe++)G=f(q,G,Te[fe],K[Te[fe]],Ee);else if(K&&u.test(K))for(Te=K.split(u);fe<Te.length;fe++)G=q(G,Te[fe],J,Ee);else G=q(G,K,J,Ee);return G};a.on=function(q,G,K){if(this._events=f(h,this._events||{},q,G,{context:K,ctx:this,listening:c}),c){var J=this._listeners||(this._listeners={});J[c.id]=c,c.interop=!1}return this},a.listenTo=function(q,G,K){if(!q)return this;var J=q._listenId||(q._listenId=n.uniqueId("l")),Ee=this._listeningTo||(this._listeningTo={}),fe=c=Ee[J];fe||(this._listenId||(this._listenId=n.uniqueId("l")),fe=c=Ee[J]=new S(this,q));var Te=v(q,G,K,this);if(c=void 0,Te)throw Te;return fe.interop&&fe.on(G,K),this};var h=function(q,G,K,J){if(K){var Ee=q[G]||(q[G]=[]),fe=J.context,Te=J.ctx,Ce=J.listening;Ce&&Ce.count++,Ee.push({callback:K,context:fe,ctx:fe||Te,listening:Ce})}return q},v=function(q,G,K,J){try{q.on(G,K,J)}catch(Ee){return Ee}};a.off=function(q,G,K){return this._events?(this._events=f(y,this._events,q,G,{context:K,listeners:this._listeners}),this):this},a.stopListening=function(q,G,K){var J=this._listeningTo;if(!J)return this;for(var Ee=q?[q._listenId]:n.keys(J),fe=0;fe<Ee.length;fe++){var Te=J[Ee[fe]];if(!Te)break;Te.obj.off(G,K,this),Te.interop&&Te.off(G,K)}return n.isEmpty(J)&&(this._listeningTo=void 0),this};var y=function(q,G,K,J){if(q){var Ee=J.context,fe=J.listeners,Te=0,Ce;if(!G&&!Ee&&!K){for(Ce=n.keys(fe);Te<Ce.length;Te++)fe[Ce[Te]].cleanup();return}for(Ce=G?[G]:n.keys(q);Te<Ce.length;Te++){G=Ce[Te];var Ue=q[G];if(!Ue)break;for(var Le=[],Ie=0;Ie<Ue.length;Ie++){var Se=Ue[Ie];if(K&&K!==Se.callback&&K!==Se.callback._callback||Ee&&Ee!==Se.context)Le.push(Se);else{var Ye=Se.listening;Ye&&Ye.off(G,K)}}Le.length?q[G]=Le:delete q[G]}return q}};a.once=function(q,G,K){var J=f(m,{},q,G,this.off.bind(this));return typeof q=="string"&&K==null&&(G=void 0),this.on(J,G,K)},a.listenToOnce=function(q,G,K){var J=f(m,{},G,K,this.stopListening.bind(this,q));return this.listenTo(q,J)};var m=function(q,G,K,J){if(K){var Ee=q[G]=n.once(function(){J(G,Ee),K.apply(this,arguments)});Ee._callback=K}return q};a.trigger=function(q){if(!this._events)return this;for(var G=Math.max(0,arguments.length-1),K=Array(G),J=0;J<G;J++)K[J]=arguments[J+1];return f(_,this._events,q,void 0,K),this};var _=function(q,G,K,J){if(q){var Ee=q[G],fe=q.all;Ee&&fe&&(fe=fe.slice()),Ee&&x(Ee,J),fe&&x(fe,[G].concat(J))}return q},x=function(q,G){var K,J=-1,Ee=q.length,fe=G[0],Te=G[1],Ce=G[2];switch(G.length){case 0:for(;++J<Ee;)(K=q[J]).callback.call(K.ctx);return;case 1:for(;++J<Ee;)(K=q[J]).callback.call(K.ctx,fe);return;case 2:for(;++J<Ee;)(K=q[J]).callback.call(K.ctx,fe,Te);return;case 3:for(;++J<Ee;)(K=q[J]).callback.call(K.ctx,fe,Te,Ce);return;default:for(;++J<Ee;)(K=q[J]).callback.apply(K.ctx,G);return}},S=function(q,G){this.id=q._listenId,this.listener=q,this.obj=G,this.interop=!0,this.count=0,this._events=void 0};S.prototype.on=a.on,S.prototype.off=function(q,G){var K;this.interop?(this._events=f(y,this._events,q,G,{context:void 0,listeners:void 0}),K=!this._events):(this.count--,K=this.count===0),K&&this.cleanup()},S.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(r,a);var P=r.Model=function(q,G){var K=q||{};G||(G={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},G.collection&&(this.collection=G.collection),G.parse&&(K=this.parse(K,G)||{});var J=n.result(this,"defaults");K=n.defaults(n.extend({},J,K),J),this.set(K,G),this.changed={},this.initialize.apply(this,arguments)};n.extend(P.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(q){return n.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(q){return this.attributes[q]},escape:function(q){return n.escape(this.get(q))},has:function(q){return this.get(q)!=null},matches:function(q){return!!n.iteratee(q,this)(this.attributes)},set:function(q,G,K){if(q==null)return this;var J;if(typeof q=="object"?(J=q,K=G):(J={})[q]=G,K||(K={}),!this._validate(J,K))return!1;var Ee=K.unset,fe=K.silent,Te=[],Ce=this._changing;this._changing=!0,Ce||(this._previousAttributes=n.clone(this.attributes),this.changed={});var Ue=this.attributes,Le=this.changed,Ie=this._previousAttributes;for(var Se in J)G=J[Se],n.isEqual(Ue[Se],G)||Te.push(Se),n.isEqual(Ie[Se],G)?delete Le[Se]:Le[Se]=G,Ee?delete Ue[Se]:Ue[Se]=G;if(this.idAttribute in J){var Ye=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Ye,K)}if(!fe){Te.length&&(this._pending=K);for(var ft=0;ft<Te.length;ft++)this.trigger("change:"+Te[ft],this,Ue[Te[ft]],K)}if(Ce)return this;if(!fe)for(;this._pending;)K=this._pending,this._pending=!1,this.trigger("change",this,K);return this._pending=!1,this._changing=!1,this},unset:function(q,G){return this.set(q,void 0,n.extend({},G,{unset:!0}))},clear:function(q){var G={};for(var K in this.attributes)G[K]=void 0;return this.set(G,n.extend({},q,{unset:!0}))},hasChanged:function(q){return q==null?!n.isEmpty(this.changed):n.has(this.changed,q)},changedAttributes:function(q){if(!q)return this.hasChanged()?n.clone(this.changed):!1;var G=this._changing?this._previousAttributes:this.attributes,K={},J;for(var Ee in q){var fe=q[Ee];n.isEqual(G[Ee],fe)||(K[Ee]=fe,J=!0)}return J?K:!1},previous:function(q){return q==null||!this._previousAttributes?null:this._previousAttributes[q]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(q){q=n.extend({parse:!0},q);var G=this,K=q.success;return q.success=function(J){var Ee=q.parse?G.parse(J,q):J;if(!G.set(Ee,q))return!1;K&&K.call(q.context,G,J,q),G.trigger("sync",G,J,q)},$e(this,q),this.sync("read",this,q)},save:function(q,G,K){var J;q==null||typeof q=="object"?(J=q,K=G):(J={})[q]=G,K=n.extend({validate:!0,parse:!0},K);var Ee=K.wait;if(J&&!Ee){if(!this.set(J,K))return!1}else if(!this._validate(J,K))return!1;var fe=this,Te=K.success,Ce=this.attributes;K.success=function(Ie){fe.attributes=Ce;var Se=K.parse?fe.parse(Ie,K):Ie;if(Ee&&(Se=n.extend({},J,Se)),Se&&!fe.set(Se,K))return!1;Te&&Te.call(K.context,fe,Ie,K),fe.trigger("sync",fe,Ie,K)},$e(this,K),J&&Ee&&(this.attributes=n.extend({},Ce,J));var Ue=this.isNew()?"create":K.patch?"patch":"update";Ue==="patch"&&!K.attrs&&(K.attrs=J);var Le=this.sync(Ue,this,K);return this.attributes=Ce,Le},destroy:function(q){q=q?n.clone(q):{};var G=this,K=q.success,J=q.wait,Ee=function(){G.stopListening(),G.trigger("destroy",G,G.collection,q)};q.success=function(Te){J&&Ee(),K&&K.call(q.context,G,Te,q),G.isNew()||G.trigger("sync",G,Te,q)};var fe=!1;return this.isNew()?n.defer(q.success):($e(this,q),fe=this.sync("delete",this,q)),J||Ee(),fe},url:function(){var q=n.result(this,"urlRoot")||n.result(this.collection,"url")||Ze();if(this.isNew())return q;var G=this.get(this.idAttribute);return q.replace(/[^\/]$/,"$&/")+encodeURIComponent(G)},parse:function(q,G){return q},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(q){return this._validate({},n.extend({},q,{validate:!0}))},_validate:function(q,G){if(!G.validate||!this.validate)return!0;q=n.extend({},this.attributes,q);var K=this.validationError=this.validate(q,G)||null;return K?(this.trigger("invalid",this,K,n.extend(G,{validationError:K})),!1):!0}});var T=r.Collection=function(q,G){G||(G={}),this.preinitialize.apply(this,arguments),G.model&&(this.model=G.model),G.comparator!==void 0&&(this.comparator=G.comparator),this._reset(),this.initialize.apply(this,arguments),q&&this.reset(q,n.extend({silent:!0},G))},E={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},N=function(q,G,K){K=Math.min(Math.max(K,0),q.length);var J=Array(q.length-K),Ee=G.length,fe;for(fe=0;fe<J.length;fe++)J[fe]=q[fe+K];for(fe=0;fe<Ee;fe++)q[fe+K]=G[fe];for(fe=0;fe<J.length;fe++)q[fe+Ee+K]=J[fe]};n.extend(T.prototype,a,{model:P,preinitialize:function(){},initialize:function(){},toJSON:function(q){return this.map(function(G){return G.toJSON(q)})},sync:function(){return r.sync.apply(this,arguments)},add:function(q,G){return this.set(q,n.extend({merge:!1},G,O))},remove:function(q,G){G=n.extend({},G);var K=!n.isArray(q);q=K?[q]:q.slice();var J=this._removeModels(q,G);return!G.silent&&J.length&&(G.changes={added:[],merged:[],removed:J},this.trigger("update",this,G)),K?J[0]:J},set:function(q,G){if(q!=null){G=n.extend({},E,G),G.parse&&!this._isModel(q)&&(q=this.parse(q,G)||[]);var K=!n.isArray(q);q=K?[q]:q.slice();var J=G.at;J!=null&&(J=+J),J>this.length&&(J=this.length),J<0&&(J+=this.length+1);var Ee=[],fe=[],Te=[],Ce=[],Ue={},Le=G.add,Ie=G.merge,Se=G.remove,Ye=!1,ft=this.comparator&&J==null&&G.sort!==!1,bt=n.isString(this.comparator)?this.comparator:null,dt,it;for(it=0;it<q.length;it++){dt=q[it];var Jt=this.get(dt);if(Jt){if(Ie&&dt!==Jt){var Sr=this._isModel(dt)?dt.attributes:dt;G.parse&&(Sr=Jt.parse(Sr,G)),Jt.set(Sr,G),Te.push(Jt),ft&&!Ye&&(Ye=Jt.hasChanged(bt))}Ue[Jt.cid]||(Ue[Jt.cid]=!0,Ee.push(Jt)),q[it]=Jt}else Le&&(dt=q[it]=this._prepareModel(dt,G),dt&&(fe.push(dt),this._addReference(dt,G),Ue[dt.cid]=!0,Ee.push(dt)))}if(Se){for(it=0;it<this.length;it++)dt=this.models[it],Ue[dt.cid]||Ce.push(dt);Ce.length&&this._removeModels(Ce,G)}var sr=!1,vr=!ft&&Le&&Se;if(Ee.length&&vr?(sr=this.length!==Ee.length||n.some(this.models,function(qr,Vr){return qr!==Ee[Vr]}),this.models.length=0,N(this.models,Ee,0),this.length=this.models.length):fe.length&&(ft&&(Ye=!0),N(this.models,fe,J??this.length),this.length=this.models.length),Ye&&this.sort({silent:!0}),!G.silent){for(it=0;it<fe.length;it++)J!=null&&(G.index=J+it),dt=fe[it],dt.trigger("add",dt,this,G);(Ye||sr)&&this.trigger("sort",this,G),(fe.length||Ce.length||Te.length)&&(G.changes={added:fe,removed:Ce,merged:Te},this.trigger("update",this,G))}return K?q[0]:q}},reset:function(q,G){G=G?n.clone(G):{};for(var K=0;K<this.models.length;K++)this._removeReference(this.models[K],G);return G.previousModels=this.models,this._reset(),q=this.add(q,n.extend({silent:!0},G)),G.silent||this.trigger("reset",this,G),q},push:function(q,G){return this.add(q,n.extend({at:this.length},G))},pop:function(q){var G=this.at(this.length-1);return this.remove(G,q)},unshift:function(q,G){return this.add(q,n.extend({at:0},G))},shift:function(q){var G=this.at(0);return this.remove(G,q)},slice:function(){return o.apply(this.models,arguments)},get:function(q){if(q!=null)return this._byId[q]||this._byId[this.modelId(this._isModel(q)?q.attributes:q,q.idAttribute)]||q.cid&&this._byId[q.cid]},has:function(q){return this.get(q)!=null},at:function(q){return q<0&&(q+=this.length),this.models[q]},where:function(q,G){return this[G?"find":"filter"](q)},findWhere:function(q){return this.where(q,!0)},sort:function(q){var G=this.comparator;if(!G)throw new Error("Cannot sort a set without a comparator");q||(q={});var K=G.length;return n.isFunction(G)&&(G=G.bind(this)),K===1||n.isString(G)?this.models=this.sortBy(G):this.models.sort(G),q.silent||this.trigger("sort",this,q),this},pluck:function(q){return this.map(q+"")},fetch:function(q){q=n.extend({parse:!0},q);var G=q.success,K=this;return q.success=function(J){var Ee=q.reset?"reset":"set";K[Ee](J,q),G&&G.call(q.context,K,J,q),K.trigger("sync",K,J,q)},$e(this,q),this.sync("read",this,q)},create:function(q,G){G=G?n.clone(G):{};var K=G.wait;if(q=this._prepareModel(q,G),!q)return!1;K||this.add(q,G);var J=this,Ee=G.success;return G.success=function(fe,Te,Ce){K&&J.add(fe,Ce),Ee&&Ee.call(Ce.context,fe,Te,Ce)},q.save(null,G),q},parse:function(q,G){return q},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(q,G){return q[G||this.model.prototype.idAttribute||"id"]},values:function(){return new C(this,R)},keys:function(){return new C(this,k)},entries:function(){return new C(this,B)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(q,G){if(this._isModel(q))return q.collection||(q.collection=this),q;G=G?n.clone(G):{},G.collection=this;var K;return this.model.prototype?K=new this.model(q,G):K=this.model(q,G),K.validationError?(this.trigger("invalid",this,K.validationError,G),!1):K},_removeModels:function(q,G){for(var K=[],J=0;J<q.length;J++){var Ee=this.get(q[J]);if(Ee){var fe=this.indexOf(Ee);this.models.splice(fe,1),this.length--,delete this._byId[Ee.cid];var Te=this.modelId(Ee.attributes,Ee.idAttribute);Te!=null&&delete this._byId[Te],G.silent||(G.index=fe,Ee.trigger("remove",Ee,this,G)),K.push(Ee),this._removeReference(Ee,G)}}return K},_isModel:function(q){return q instanceof P},_addReference:function(q,G){this._byId[q.cid]=q;var K=this.modelId(q.attributes,q.idAttribute);K!=null&&(this._byId[K]=q),q.on("all",this._onModelEvent,this)},_removeReference:function(q,G){delete this._byId[q.cid];var K=this.modelId(q.attributes,q.idAttribute);K!=null&&delete this._byId[K],this===q.collection&&delete q.collection,q.off("all",this._onModelEvent,this)},_onModelEvent:function(q,G,K,J){if(G){if((q==="add"||q==="remove")&&K!==this)return;if(q==="destroy"&&this.remove(G,J),q==="changeId"){var Ee=this.modelId(G.previousAttributes(),G.idAttribute),fe=this.modelId(G.attributes,G.idAttribute);Ee!=null&&delete this._byId[Ee],fe!=null&&(this._byId[fe]=G)}}this.trigger.apply(this,arguments)}});var d=typeof Symbol=="function"&&Symbol.iterator;d&&(T.prototype[d]=T.prototype.values);var C=function(q,G){this._collection=q,this._kind=G,this._index=0},R=1,k=2,B=3;d&&(C.prototype[d]=function(){return this}),C.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var q=this._collection.at(this._index);this._index++;var G;if(this._kind===R)G=q;else{var K=this._collection.modelId(q.attributes,q.idAttribute);this._kind===k?G=K:G=[K,q]}return{value:G,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var z=r.View=function(q){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(q,Y)),this._ensureElement(),this.initialize.apply(this,arguments)},U=/^(\S+)\s*(.*)$/,Y=["model","collection","el","id","attributes","className","tagName","events"];n.extend(z.prototype,a,{tagName:"div",$:function(q){return this.$el.find(q)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(q){return this.undelegateEvents(),this._setElement(q),this.delegateEvents(),this},_setElement:function(q){this.$el=q instanceof r.$?q:r.$(q),this.el=this.$el[0]},delegateEvents:function(q){if(q||(q=n.result(this,"events")),!q)return this;this.undelegateEvents();for(var G in q){var K=q[G];if(n.isFunction(K)||(K=this[K]),!!K){var J=G.match(U);this.delegate(J[1],J[2],K.bind(this))}}return this},delegate:function(q,G,K){return this.$el.on(q+".delegateEvents"+this.cid,G,K),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(q,G,K){return this.$el.off(q+".delegateEvents"+this.cid,G,K),this},_createElement:function(q){return document.createElement(q)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var q=n.extend({},n.result(this,"attributes"));this.id&&(q.id=n.result(this,"id")),this.className&&(q.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(q)}},_setAttributes:function(q){this.$el.attr(q)}});var oe=function(q,G,K,J){switch(G){case 1:return function(){return q[K](this[J])};case 2:return function(Ee){return q[K](this[J],Ee)};case 3:return function(Ee,fe){return q[K](this[J],D(Ee,this),fe)};case 4:return function(Ee,fe,Te){return q[K](this[J],D(Ee,this),fe,Te)};default:return function(){var Ee=o.call(arguments);return Ee.unshift(this[J]),q[K].apply(q,Ee)}}},W=function(q,G,K,J){n.each(K,function(Ee,fe){G[fe]&&(q.prototype[fe]=oe(G,Ee,fe,J))})},D=function(q,G){return n.isFunction(q)?q:n.isObject(q)&&!G._isModel(q)?F(q):n.isString(q)?function(K){return K.get(q)}:q},F=function(q){var G=n.matches(q);return function(K){return G(K.attributes)}},H={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},ie={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[T,H,"models"],[P,ie,"attributes"]],function(q){var G=q[0],K=q[1],J=q[2];G.mixin=function(Ee){var fe=n.reduce(n.functions(Ee),function(Te,Ce){return Te[Ce]=0,Te},{});W(G,Ee,fe,J)},W(G,n,K,J)}),r.sync=function(q,G,K){var J=se[q];n.defaults(K||(K={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var Ee={type:J,dataType:"json"};if(K.url||(Ee.url=n.result(G,"url")||Ze()),K.data==null&&G&&(q==="create"||q==="update"||q==="patch")&&(Ee.contentType="application/json",Ee.data=JSON.stringify(K.attrs||G.toJSON(K))),K.emulateJSON&&(Ee.contentType="application/x-www-form-urlencoded",Ee.data=Ee.data?{model:Ee.data}:{}),K.emulateHTTP&&(J==="PUT"||J==="DELETE"||J==="PATCH")){Ee.type="POST",K.emulateJSON&&(Ee.data._method=J);var fe=K.beforeSend;K.beforeSend=function(Ue){if(Ue.setRequestHeader("X-HTTP-Method-Override",J),fe)return fe.apply(this,arguments)}}Ee.type!=="GET"&&!K.emulateJSON&&(Ee.processData=!1);var Te=K.error;K.error=function(Ue,Le,Ie){K.textStatus=Le,K.errorThrown=Ie,Te&&Te.call(K.context,Ue,Le,Ie)};var Ce=K.xhr=r.ajax(n.extend(Ee,K));return G.trigger("request",G,Ce,K),Ce};var se={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var we=r.Router=function(q){q||(q={}),this.preinitialize.apply(this,arguments),q.routes&&(this.routes=q.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},ge=/\((.*?)\)/g,te=/(\(\?)?:\w+/g,ue=/\*\w+/g,re=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(we.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(q,G,K){n.isRegExp(q)||(q=this._routeToRegExp(q)),n.isFunction(G)&&(K=G,G=""),K||(K=this[G]);var J=this;return r.history.route(q,function(Ee){var fe=J._extractParameters(q,Ee);J.execute(K,fe,G)!==!1&&(J.trigger.apply(J,["route:"+G].concat(fe)),J.trigger("route",G,fe),r.history.trigger("route",J,G,fe))}),this},execute:function(q,G,K){q&&q.apply(this,G)},navigate:function(q,G){return r.history.navigate(q,G),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var q,G=n.keys(this.routes);(q=G.pop())!=null;)this.route(q,this.routes[q])}},_routeToRegExp:function(q){return q=q.replace(re,"\\$&").replace(ge,"(?:$1)?").replace(te,function(G,K){return K?G:"([^/?]+)"}).replace(ue,"([^?]*?)"),new RegExp("^"+q+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(q,G){var K=q.exec(G).slice(1);return n.map(K,function(J,Ee){return Ee===K.length-1?J||null:J?decodeURIComponent(J):null})}});var Q=r.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},le=/^[#\/]|\s+$/g,Ge=/^\/+|\/+$/g,Ne=/#.*$/;Q.started=!1,n.extend(Q.prototype,a,{interval:50,atRoot:function(){var q=this.location.pathname.replace(/[^\/]$/,"$&/");return q===this.root&&!this.getSearch()},matchRoot:function(){var q=this.decodeFragment(this.location.pathname),G=q.slice(0,this.root.length-1)+"/";return G===this.root},decodeFragment:function(q){return decodeURI(q.replace(/%25/g,"%2525"))},getSearch:function(){var q=this.location.href.replace(/#.*/,"").match(/\?.+/);return q?q[0]:""},getHash:function(q){var G=(q||this).location.href.match(/#(.*)$/);return G?G[1]:""},getPath:function(){var q=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return q.charAt(0)==="/"?q.slice(1):q},getFragment:function(q){return q==null&&(this._usePushState||!this._wantsHashChange?q=this.getPath():q=this.getHash()),q.replace(le,"")},start:function(q){if(Q.started)throw new Error("Backbone.history has already been started");if(Q.started=!0,this.options=n.extend({root:"/"},this.options,q),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ge,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var G=this.root.slice(0,-1)||"/";return this.location.replace(G+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var K=document.body,J=K.insertBefore(this.iframe,K.firstChild).contentWindow;J.document.open(),J.document.close(),J.location.hash="#"+this.fragment}var Ee=window.addEventListener||function(fe,Te){return attachEvent("on"+fe,Te)};if(this._usePushState?Ee("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Ee("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var q=window.removeEventListener||function(G,K){return detachEvent("on"+G,K)};this._usePushState?q("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&q("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Q.started=!1},route:function(q,G){this.handlers.unshift({route:q,callback:G})},checkUrl:function(q){var G=this.getFragment();if(G===this.fragment&&this.iframe&&(G=this.getHash(this.iframe.contentWindow)),G===this.fragment)return!1;this.iframe&&this.navigate(G),this.loadUrl()},loadUrl:function(q){return this.matchRoot()?(q=this.fragment=this.getFragment(q),n.some(this.handlers,function(G){if(G.route.test(q))return G.callback(q),!0})):!1},navigate:function(q,G){if(!Q.started)return!1;(!G||G===!0)&&(G={trigger:!!G}),q=this.getFragment(q||"");var K=this.root;(q===""||q.charAt(0)==="?")&&(K=K.slice(0,-1)||"/");var J=K+q;q=q.replace(Ne,"");var Ee=this.decodeFragment(q);if(this.fragment!==Ee){if(this.fragment=Ee,this._usePushState)this.history[G.replace?"replaceState":"pushState"]({},document.title,J);else if(this._wantsHashChange){if(this._updateHash(this.location,q,G.replace),this.iframe&&q!==this.getHash(this.iframe.contentWindow)){var fe=this.iframe.contentWindow;G.replace||(fe.document.open(),fe.document.close()),this._updateHash(fe.location,q,G.replace)}}else return this.location.assign(J);if(G.trigger)return this.loadUrl(q)}},_updateHash:function(q,G,K){if(K){var J=q.href.replace(/(javascript:|#).*$/,"");q.replace(J+"#"+G)}else q.hash="#"+G}}),r.history=new Q;var Oe=function(q,G){var K=this,J;return q&&n.has(q,"constructor")?J=q.constructor:J=function(){return K.apply(this,arguments)},n.extend(J,K,G),J.prototype=n.create(K.prototype,q),J.prototype.constructor=J,J.__super__=K.prototype,J};P.extend=T.extend=we.extend=z.extend=Q.extend=Oe;var Ze=function(){throw new Error('A "url" property or function must be specified')},$e=function(q,G){var K=G.error;G.error=function(J){K&&K.call(G.context,q,J,G),q.trigger("error",q,J,G)}};return r})}(tE)),tE}var Zfe=Jfe();const ii=tf(Zfe);var Qfe=rj();const Nt=tf(Qfe),We=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,s=n.atan2,o=n.sqrt,a=n.min,u=n.max,c=n.cos,f=n.sin,h=function(d,C,R){if(!(this instanceof h))return h.apply(Object.create(h.prototype),arguments);if(d){if(h.isV(d)&&(d=d.node),C=C||{},h.isString(d)){if(d=d.trim(),d.toLowerCase()==="svg")d=h.createSvgDocument();else if(d[0]==="<"){var k=h.createSvgDocument(d);if(k.childNodes.length>1){var B=[],z,U;for(z=0,U=k.childNodes.length;z<U;z++){var Y=k.childNodes[z];B.push(new h(document.importNode(Y,!0)))}return B}d=document.importNode(k.firstChild,!0)}else d=document.createElementNS(t.svg,d);h.ensureId(d)}return this.node=d,this.setAttributes(C),R&&this.append(R),this}},v=h.prototype;Object.defineProperty(v,"id",{enumerable:!0,get:function(){return this.node.id},set:function(d){this.node.id=d}}),v.getTransformToElement=function(d){var C=this.node;if(h.isSVGGraphicsElement(d)&&h.isSVGGraphicsElement(C)){var R=h.toNode(d).getScreenCTM(),k=C.getScreenCTM();if(R&&k)return R.inverse().multiply(k)}return h.createSVGMatrix()},v.transform=function(d,C){var R=this.node;if(h.isUndefined(d))return h.transformStringToMatrix(this.attr("transform"));if(C&&C.absolute)return this.attr("transform",h.matrixToTransformString(d));var k=h.createSVGTransform(d);return R.transform.baseVal.appendItem(k),this},v.translate=function(d,C,R){R=R||{},C=C||0;var k=this.attr("transform")||"",B=h.parseTransformString(k);if(k=B.value,h.isUndefined(d))return B.translate;k=k.replace(/translate\([^)]*\)/g,"").trim();var z=R.absolute?d:B.translate.tx+d,U=R.absolute?C:B.translate.ty+C,Y="translate("+z+","+U+")";return this.attr("transform",(Y+" "+k).trim()),this},v.rotate=function(d,C,R,k){k=k||{};var B=this.attr("transform")||"",z=h.parseTransformString(B);if(B=z.value,h.isUndefined(d))return z.rotate;B=B.replace(/rotate\([^)]*\)/g,"").trim(),d%=360;var U=k.absolute?d:z.rotate.angle+d,Y=C!==void 0&&R!==void 0?","+C+","+R:"",oe="rotate("+U+Y+")";return this.attr("transform",(B+" "+oe).trim()),this},v.scale=function(d,C){C=h.isUndefined(C)?d:C;var R=this.attr("transform")||"",k=h.parseTransformString(R);if(R=k.value,h.isUndefined(d))return k.scale;R=R.replace(/scale\([^)]*\)/g,"").trim();var B="scale("+d+","+C+")";return this.attr("transform",(R+" "+B).trim()),this},v.bbox=function(d,C){var R,k=this.node,B=k.ownerSVGElement;if(!B)return new yt(0,0,0,0);try{R=k.getBBox()}catch{R={x:k.clientLeft,y:k.clientTop,width:k.clientWidth,height:k.clientHeight}}if(d)return new yt(R);var z=this.getTransformToElement(C||B);return h.transformRect(R,z)},v.getBBox=function(d){var C={},R,k=this.node,B=k.ownerSVGElement;if(!B||!h.isSVGGraphicsElement(k))return new yt(0,0,0,0);if(d&&(d.target&&(C.target=h.toNode(d.target)),d.recursive&&(C.recursive=d.recursive)),C.recursive){var U=this.children(),Y=U.length;if(Y===0)return this.getBBox({target:C.target,recursive:!1});C.target||(C.target=this);for(var oe=0;oe<Y;oe++){var W=U[oe],D;W.children().length===0?D=W.getBBox({target:C.target,recursive:!1}):D=W.getBBox({target:C.target,recursive:!0}),R?R=R.union(D):R=D}return R}else{try{R=k.getBBox()}catch{R={x:k.clientLeft,y:k.clientTop,width:k.clientWidth,height:k.clientHeight}}if(C.target){var z=this.getTransformToElement(C.target);return h.transformRect(R,z)}else return new yt(R)}};function y(d,C){d||(d={});var R=h("textPath"),k=d.d;if(k&&d["xlink:href"]===void 0){var B=h("path").attr("d",k).appendTo(C.defs());R.attr("xlink:href","#"+B.id)}return h.isObject(d)&&R.attr(d),R.node}function m(d,C,R){R||(R={});for(var k=R.includeAnnotationIndices,B=R.eol,z=R.lineHeight,U=R.baseSize,Y=0,oe={},W=C.length-1,D=0;D<=W;D++){var F=C[D],H=null;if(h.isObject(F)){var ie=F.attrs,se=h("tspan",ie),we=se.node,ge=F.t;B&&D===W&&(ge+=B),we.textContent=ge;var te=ie.class;te&&se.addClass(te),k&&se.attr("annotations",F.annotations),H=parseFloat(ie["font-size"]),isFinite(H)||(H=U),H&&H>Y&&(Y=H)}else B&&D===W&&(F+=B),we=document.createTextNode(F||" "),U&&U>Y&&(Y=U);d.appendChild(we)}return Y&&(oe.maxFontSize=Y),z?oe.lineHeight=z:Y&&(oe.lineHeight=Y*1.2),oe}var _=/em$/;function x(d,C){var R=parseFloat(d);return _.test(d)?R*C:R}function S(d,C,R,k){if(!Array.isArray(C))return 0;var B=C.length;if(!B)return 0;for(var z=C[0],U=x(z.maxFontSize,R)||R,Y=0,oe=x(k,R),W=1;W<B;W++){z=C[W];var D=x(z.lineHeight,R)||oe;Y+=D}var F=x(z.maxFontSize,R)||R,H;switch(d){case"middle":H=U/2-.15*F-Y/2;break;case"bottom":H=-(.25*F)-Y;break;default:case"top":H=.8*U;break}return H}v.text=function(d,C){if(d&&typeof d!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");d=h.sanitizeText(d),C||(C={});var R=C.displayEmpty,k=C.eol,B=C.textPath,z=C.textVerticalAnchor,U=z==="middle"||z==="bottom"||z==="top",Y=C.x;Y===void 0&&(Y=this.attr("x")||0);var oe=C.includeAnnotationIndices,W=C.annotations;W&&!h.isArray(W)&&(W=[W]);var D=C.lineHeight,F=D==="auto",H=F?"1.5em":D||"1em";this.empty(),this.attr({"xml:space":"preserve",display:d||R?null:"none"});var ie=parseFloat(this.attr("font-size"));ie||(ie=16,(U||W)&&this.attr("font-size",ie));var se=document,we;B?(typeof B=="string"&&(B={d:B}),we=y(B,this)):we=se.createDocumentFragment();for(var ge=0,te=d.split(`
`),ue=[],re,Q=0,le=te.length-1;Q<=le;Q++){var Ge=H,Ne="v-line",Oe=se.createElementNS(t.svg,"tspan"),Ze=te[Q],$e;if(Ze)if(W){var q=h.annotateString(Ze,W,{offset:-ge,includeAnnotationIndices:oe});$e=m(Oe,q,{includeAnnotationIndices:oe,eol:Q!==le&&k,lineHeight:F?null:H,baseSize:ie});var G=$e.lineHeight;G&&F&&Q!==0&&(Ge=G),Q===0&&(re=$e.maxFontSize*.8)}else k&&Q!==le&&(Ze+=k),Oe.textContent=Ze;else{Oe.textContent="-",Ne+=" v-empty-line";var K=Oe.style;if(K.fillOpacity=0,K.strokeOpacity=0,W){$e={},q=h.findAnnotationsAtIndex(W,ge);let Ee=ie;for(let fe=q.length;fe>0;fe--){const Te=q[fe-1].attrs;if(!Te||!("font-size"in Te))continue;const Ce=parseFloat(Te["font-size"]);if(isFinite(Ce)){Ee=Ce;break}}F&&(Q>0?Ge=Ee*1.2:re=Ee*.8),Oe.setAttribute("font-size",Ee),$e.maxFontSize=Ee}}$e&&ue.push($e),Q>0&&Oe.setAttribute("dy",Ge),(Q>0||B)&&Oe.setAttribute("x",Y),Oe.className.baseVal=Ne,we.appendChild(Oe),ge+=Ze.length+1}if(U)if(W)Ge=S(z,ue,ie,H);else if(z==="top")Ge="0.8em";else{var J;switch(le>0?(J=parseFloat(H)||1,J*=le,_.test(H)||(J/=ie)):J=0,z){case"middle":Ge=.3-J/2+"em";break;case"bottom":Ge=-J-.3+"em";break}}else z===0?Ge="0em":z?Ge=z:(Ge=0,this.attr("y")===null&&this.attr("y",re||"0.8em"));return we.firstChild.setAttribute("dy",Ge),this.append(we),this},v.removeAttr=function(d){const C=O[d],{ns:R,local:k}=h.qualifyAttr(C),B=this.node;return R?B.hasAttributeNS(R,k)&&B.removeAttributeNS(R,k):B.hasAttribute(C)&&B.removeAttribute(C),this},v.attr=function(d,C){if(h.isUndefined(d)){for(var R=this.node.attributes,k={},B=0;B<R.length;B++)k[R[B].name]=R[B].value;return k}if(h.isString(d)&&h.isUndefined(C))return this.node.getAttribute(O[d]);if(typeof d=="object")for(var z in d)d.hasOwnProperty(z)&&this.setAttribute(z,d[z]);else this.setAttribute(d,C);return this},v.normalizePath=function(){var d=this.tagName();return d==="PATH"&&this.attr("d",h.normalizePathData(this.attr("d"))),this},v.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},v.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},v.setAttributes=function(d){for(var C in d)d.hasOwnProperty(C)&&this.setAttribute(C,d[C]);return this},v.append=function(d){h.isArray(d)||(d=[d]);for(var C=0,R=d.length;C<R;C++)this.node.appendChild(h.toNode(d[C]));return this},v.prepend=function(d){var C=this.node.firstChild;return C?h(C).before(d):this.append(d)},v.before=function(d){var C=this.node,R=C.parentNode;if(R){h.isArray(d)||(d=[d]);for(var k=0,B=d.length;k<B;k++)R.insertBefore(h.toNode(d[k]),C)}return this},v.appendTo=function(d){return h.toNode(d).appendChild(this.node),this},v.svg=function(){return this.node instanceof window.SVGSVGElement?this:h(this.node.ownerSVGElement)},v.tagName=function(){return this.node.tagName.toUpperCase()},v.defs=function(){var d=this.svg()||this,C=d.node.getElementsByTagName("defs")[0];return C?h(C):h("defs").appendTo(d)},v.clone=function(){var d=h(this.node.cloneNode(!0));return d.node.id=h.uniqueId(),d},v.findOne=function(d){var C=this.node.querySelector(d);return C?h(C):void 0},v.find=function(d){var C=[],R=this.node.querySelectorAll(d);if(R)for(var k=0;k<R.length;k++)C.push(h(R[k]));return C},v.children=function(){for(var d=this.node.childNodes,C=[],R=0;R<d.length;R++){var k=d[R];k.nodeType===1&&C.push(h(d[R]))}return C},v.parent=function(){return h(this.node.parentNode)||null},v.index=function(){for(var d=0,C=this.node.previousSibling;C;)C.nodeType===1&&d++,C=C.previousSibling;return d},v.findParentByClass=function(d,C){for(var R=this.node.ownerSVGElement,k=this.node.parentNode;k&&k!==C&&k!==R;){var B=h(k);if(B.hasClass(d))return B;k=k.parentNode}return null},v.contains=function(d){var C=this.node,R=h.toNode(d),k=R&&R.parentNode;return C===k||!!(k&&k.nodeType===1&&C.compareDocumentPosition(k)&16)},v.toLocalPoint=function(d,C){var R=this.svg().node,k=R.createSVGPoint();k.x=d,k.y=C;try{var B=k.matrixTransform(R.getScreenCTM().inverse()),z=this.getTransformToElement(R).inverse()}catch{return k}return B.matrixTransform(z)},v.translateCenterToPoint=function(d){var C=this.getBBox({target:this.svg()}),R=C.center();return this.translate(d.x-R.x,d.y-R.y),this},v.translateAndAutoOrient=function(d,C,R){d=new me(d),C=new me(C),R||(R=this.svg());var k=this.scale();this.attr("transform","");var B=this.getBBox({target:R}).scale(k.sx,k.sy),z=h.createSVGTransform();z.setTranslate(-B.x-B.width/2,-B.y-B.height/2);var U=h.createSVGTransform(),Y=d.angleBetween(C,d.clone().offset(1,0));Y&&U.setRotate(Y,0,0);var oe=h.createSVGTransform(),W=d.clone().move(C,B.width/2);oe.setTranslate(2*d.x-W.x,2*d.y-W.y);var D=this.getTransformToElement(R),F=h.createSVGTransform();return F.setMatrix(oe.matrix.multiply(U.matrix.multiply(z.matrix.multiply(D.scale(k.sx,k.sy))))),this.attr("transform",h.matrixToTransformString(F.matrix)),this},v.animateAlongPath=function(d,C){C=h.toNode(C);var R=h.ensureId(C),k=h("animateMotion",d),B=h("mpath",{"xlink:href":"#"+R});k.append(B),this.append(k);try{k.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var z=k.node;z.animators=[];var U=z.getAttribute("id");U&&(id2anim[U]=z);for(var Y=getTargets(z),oe=0,W=Y.length;oe<W;oe++){var D=Y[oe],F=new Animator(z,D,oe);animators.push(F),z.animators[oe]=F,F.register()}}}return this};const P=/[^\x20\t\r\n\f]+/g;function T(d){return h.isString(d)?d.trim().match(P)||[]:[]}v.hasClass=function(d){return h.isString(d)?this.node.classList.contains(d.trim()):!1},v.addClass=function(d){return this.node.classList.add(...T(d)),this},v.removeClass=function(d){return this.node.classList.remove(...T(d)),this},v.toggleClass=function(d,C){const R=T(d);for(let k=0;k<R.length;k++)this.node.classList.toggle(R[k],C);return this},v.sample=function(d){d=d||1;for(var C=this.node,R=C.getTotalLength(),k=[],B=0,z;B<R;)z=C.getPointAtLength(B),k.push({x:z.x,y:z.y,distance:B}),B+=d;return k},v.convertToPath=function(){var d=h("path");d.attr(this.attr());var C=this.convertToPathData();return C&&d.attr("d",C),d},v.convertToPathData=function(){var d=this.tagName();switch(d){case"PATH":return this.attr("d");case"LINE":return h.convertLineToPathData(this.node);case"POLYGON":return h.convertPolygonToPathData(this.node);case"POLYLINE":return h.convertPolylineToPathData(this.node);case"ELLIPSE":return h.convertEllipseToPathData(this.node);case"CIRCLE":return h.convertCircleToPathData(this.node);case"RECT":return h.convertRectToPathData(this.node)}throw new Error(d+" cannot be converted to PATH.")},h.prototype.toGeometryShape=function(){var d,C,R,k,B,z,U,Y,oe,W,D,F,H,ie,se;switch(this.tagName()){case"RECT":return d=parseFloat(this.attr("x"))||0,C=parseFloat(this.attr("y"))||0,R=parseFloat(this.attr("width"))||0,k=parseFloat(this.attr("height"))||0,new yt(d,C,R,k);case"CIRCLE":return B=parseFloat(this.attr("cx"))||0,z=parseFloat(this.attr("cy"))||0,U=parseFloat(this.attr("r"))||0,new rs({x:B,y:z},U,U);case"ELLIPSE":return B=parseFloat(this.attr("cx"))||0,z=parseFloat(this.attr("cy"))||0,Y=parseFloat(this.attr("rx"))||0,oe=parseFloat(this.attr("ry"))||0,new rs({x:B,y:z},Y,oe);case"POLYLINE":return W=h.getPointsFromSvgNode(this),new wn(W);case"POLYGON":return W=h.getPointsFromSvgNode(this),W.length>1&&W.push(W[0]),new wn(W);case"PATH":return D=this.attr("d"),zt.isDataSupported(D)||(D=h.normalizePathData(D)),new zt(D);case"LINE":return F=parseFloat(this.attr("x1"))||0,ie=parseFloat(this.attr("y1"))||0,H=parseFloat(this.attr("x2"))||0,se=parseFloat(this.attr("y2"))||0,new Et({x:F,y:ie},{x:H,y:se})}return this.getBBox()},v.findIntersection=function(d,C){var R=this.svg().node;C=C||R;var k=this.getBBox({target:C}),B=k.center();if(k.intersectionWithLineFromCenterToPoint(d)){var z,U=this.tagName();if(U==="RECT"){var Y=new yt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),oe=this.getTransformToElement(C),W=h.decomposeMatrix(oe),D=R.createSVGTransform();D.setRotate(-W.rotation,B.x,B.y);var F=h.transformRect(Y,D.matrix.multiply(oe));z=new yt(F).intersectionWithLineFromCenterToPoint(d,W.rotation)}else if(U==="PATH"||U==="POLYGON"||U==="POLYLINE"||U==="CIRCLE"||U==="ELLIPSE"){var H=U==="PATH"?this:this.convertToPath(),ie=H.sample(),se=1/0,we=[],ge,te,ue,re,Q,le;for(ge=0;ge<ie.length;ge++)te=ie[ge],ue=h.createSVGPoint(te.x,te.y),ue=ue.matrixTransform(this.getTransformToElement(C)),te=new me(ue),re=te.distance(B),Q=te.distance(d)*1.1,le=re+Q,le<se?(se=le,we=[{sample:te,refDistance:Q}]):le<se+1&&we.push({sample:te,refDistance:Q});we.sort(function(Ge,Ne){return Ge.refDistance-Ne.refDistance}),we[0]&&(z=we[0].sample)}return z}},v.setAttribute=function(d,C){const R=this.node;if(C===null)return this.removeAttr(d),this;const k=O[d],{ns:B}=h.qualifyAttr(k);return B?R.setAttributeNS(B,k,C):k==="id"?R.id=C:R.setAttribute(k,C),this},h.createSvgDocument=function(d){if(d){const R=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${r}">${d}</svg>`,{documentElement:k}=h.parseXML(R,{async:!1});return k}const C=document.createElementNS(t.svg,"svg");return C.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),C.setAttribute("version",r),C},h.createSVGStyle=function(d){const{node:C}=h("style",{type:"text/css"},[h.createCDATASection(d)]);return C},h.createCDATASection=function(d=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(d)},h.idCounter=0,h.uniqueId=function(){return"v-"+ ++h.idCounter},h.toNode=function(d){return h.isV(d)?d.node:d.nodeName&&d||d[0]},h.ensureId=function(d){return d=h.toNode(d),d.id||(d.id=h.uniqueId())},h.sanitizeText=function(d){return(d||"").replace(/ /g,"Â ")},h.isUndefined=function(d){return typeof d>"u"},h.isString=function(d){return typeof d=="string"},h.isObject=function(d){return d&&typeof d=="object"},h.isArray=Array.isArray,h.parseXML=function(d,C){C=C||{};var R;try{var k=new DOMParser;h.isUndefined(C.async)||(k.async=C.async),R=k.parseFromString(d,"text/xml")}catch{R=void 0}if(!R||R.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+d);return R};const E=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(d=>E[d]=d);const O=new Proxy(E,{get(d,C){return h.supportCamelCaseAttributes?C in d?d[C]:d[C]=C.replace(/[A-Z]/g,"-$&").toLowerCase():C}});Object.defineProperty(h,"attributeNames",{value:O,writable:!1}),Object.defineProperty(h,"supportCamelCaseAttributes",{value:!1,writable:!0}),h.qualifyAttr=function(d){if(d.indexOf(":")!==-1){var C=d.split(":");return{ns:t[C[0]],local:C[1]}}return{ns:null,local:d}},h.transformSeparatorRegex=/[ ,]+/,h.transformRegex=/\b\w+\([^()]+\)/g,h.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,h.transformTranslateRegex=/\btranslate\(([^()]+)\)/,h.transformRotateRegex=/\brotate\(([^()]+)\)/,h.transformScaleRegex=/\bscale\(([^()]+)\)/,h.transformStringToMatrix=function(d){let C=h.createSVGMatrix();const R=d&&d.match(h.transformRegex);if(!R)return C;const k=R.length;for(let B=0;B<k;B++){const U=R[B].match(h.transformFunctionRegex);if(U){let Y,oe,W,D,F,H=h.createSVGMatrix();const ie=U[1].toLowerCase(),se=U[2].split(h.transformSeparatorRegex);switch(ie){case"scale":Y=parseFloat(se[0]),oe=se[1]===void 0?Y:parseFloat(se[1]),H=H.scaleNonUniform(Y,oe);break;case"translate":W=parseFloat(se[0]),D=parseFloat(se[1]),H=H.translate(W,D);break;case"rotate":F=parseFloat(se[0]),W=parseFloat(se[1])||0,D=parseFloat(se[2])||0,W!==0||D!==0?H=H.translate(W,D).rotate(F).translate(-W,-D):H=H.rotate(F);break;case"skewx":F=parseFloat(se[0]),H=H.skewX(F);break;case"skewy":F=parseFloat(se[0]),H=H.skewY(F);break;case"matrix":H.a=parseFloat(se[0]),H.b=parseFloat(se[1]),H.c=parseFloat(se[2]),H.d=parseFloat(se[3]),H.e=parseFloat(se[4]),H.f=parseFloat(se[5]);break;default:continue}C=C.multiply(H)}}return C},h.matrixToTransformString=function(d){return d||(d=!0),"matrix("+(d.a!==void 0?d.a:1)+","+(d.b!==void 0?d.b:0)+","+(d.c!==void 0?d.c:0)+","+(d.d!==void 0?d.d:1)+","+(d.e!==void 0?d.e:0)+","+(d.f!==void 0?d.f:0)+")"},h.parseTransformString=function(d){var C,R,k;if(d){var B=h.transformSeparatorRegex;if(d.trim().indexOf("matrix")>=0){var z=h.transformStringToMatrix(d),U=h.decomposeMatrix(z);C=[U.translateX,U.translateY],k=[U.scaleX,U.scaleY],R=[U.rotation];var Y=[];(C[0]!==0||C[1]!==0)&&Y.push("translate("+C+")"),(k[0]!==1||k[1]!==1)&&Y.push("scale("+k+")"),R[0]!==0&&Y.push("rotate("+R+")"),d=Y.join(" ")}else{const W=d.match(h.transformTranslateRegex);W&&(C=W[1].split(B));const D=d.match(h.transformRotateRegex);D&&(R=D[1].split(B));const F=d.match(h.transformScaleRegex);F&&(k=F[1].split(B))}}var oe=k&&k[0]?parseFloat(k[0]):1;return{value:d,translate:{tx:C&&C[0]?parseInt(C[0],10):0,ty:C&&C[1]?parseInt(C[1],10):0},rotate:{angle:R&&R[0]?parseInt(R[0],10):0,cx:R&&R[1]?parseInt(R[1],10):void 0,cy:R&&R[2]?parseInt(R[2],10):void 0},scale:{sx:oe,sy:k&&k[1]?parseFloat(k[1]):oe}}},h.deltaTransformPoint=function(d,C){var R=C.x*d.a+C.y*d.c+0,k=C.x*d.b+C.y*d.d+0;return{x:R,y:k}},h.decomposeMatrix=function(d){var C=h.deltaTransformPoint(d,{x:0,y:1}),R=h.deltaTransformPoint(d,{x:1,y:0}),k=180/i*s(C.y,C.x)-90,B=180/i*s(R.y,R.x);return{translateX:d.e,translateY:d.f,scaleX:o(d.a*d.a+d.b*d.b),scaleY:o(d.c*d.c+d.d*d.d),skewX:k,skewY:B,rotation:k}},h.matrixToScale=function(d){var C,R,k,B;return d?(C=h.isUndefined(d.a)?1:d.a,B=h.isUndefined(d.d)?1:d.d,R=d.b,k=d.c):C=B=1,{sx:R?o(C*C+R*R):C,sy:k?o(k*k+B*B):B}},h.matrixToRotate=function(d){var C={x:0,y:1};return d&&(C=h.deltaTransformPoint(d,C)),{angle:$o(ug(s(C.y,C.x))-90)}},h.matrixToTranslate=function(d){return{tx:d&&d.e||0,ty:d&&d.f||0}},h.isV=function(d){return d instanceof h},h.isVElement=h.isV,h.isSVGGraphicsElement=function(d){return d?(d=h.toNode(d),d instanceof SVGElement&&typeof d.getScreenCTM=="function"):!1};var N=h("svg").node;return h.createSVGMatrix=function(d){var C=N.createSVGMatrix();for(var R in d)C[R]=d[R];return C},h.createSVGTransform=function(d){return h.isUndefined(d)?N.createSVGTransform():(d instanceof SVGMatrix||(d=h.createSVGMatrix(d)),N.createSVGTransformFromMatrix(d))},h.createSVGPoint=function(d,C){var R=N.createSVGPoint();return R.x=d,R.y=C,R},h.transformRect=function(d,C){var R=N.createSVGPoint();R.x=d.x,R.y=d.y;var k=R.matrixTransform(C);R.x=d.x+d.width,R.y=d.y;var B=R.matrixTransform(C);R.x=d.x+d.width,R.y=d.y+d.height;var z=R.matrixTransform(C);R.x=d.x,R.y=d.y+d.height;var U=R.matrixTransform(C),Y=a(k.x,B.x,z.x,U.x),oe=u(k.x,B.x,z.x,U.x),W=a(k.y,B.y,z.y,U.y),D=u(k.y,B.y,z.y,U.y);return new yt(Y,W,oe-Y,D-W)},h.transformPoint=function(d,C){return new me(h.createSVGPoint(d.x,d.y).matrixTransform(C))},h.transformLine=function(d,C){return new Et(h.transformPoint(d.start,C),h.transformPoint(d.end,C))},h.transformPolyline=function(d,C){var R=d instanceof wn?d.points:d;h.isArray(R)||(R=[]);for(var k=[],B=0,z=R.length;B<z;B++)k[B]=h.transformPoint(R[B],C);return new wn(k)},h.styleToObject=function(d){for(var C={},R=d.split(";"),k=0;k<R.length;k++){var B=R[k],z=B.split("=");C[z[0].trim()]=z[1].trim()}return C},h.createSlicePathData=function(d,C,R,k){var B=2*i-1e-6,z=d,U=C,Y=R,oe=k,W=(oe<Y&&(W=Y,Y=oe,oe=W),oe-Y),D=W<i?"0":"1",F=c(Y),H=f(Y),ie=c(oe),se=f(oe);return W>=B?z?"M0,"+U+"A"+U+","+U+" 0 1,1 0,"+-U+"A"+U+","+U+" 0 1,1 0,"+U+"M0,"+z+"A"+z+","+z+" 0 1,0 0,"+-z+"A"+z+","+z+" 0 1,0 0,"+z+"Z":"M0,"+U+"A"+U+","+U+" 0 1,1 0,"+-U+"A"+U+","+U+" 0 1,1 0,"+U+"Z":z?"M"+U*F+","+U*H+"A"+U+","+U+" 0 "+D+",1 "+U*ie+","+U*se+"L"+z*ie+","+z*se+"A"+z+","+z+" 0 "+D+",0 "+z*F+","+z*H+"Z":"M"+U*F+","+U*H+"A"+U+","+U+" 0 "+D+",1 "+U*ie+","+U*se+"L0,0Z"},h.mergeAttrs=function(d,C){for(var R in C)R==="class"?d[R]=d[R]?d[R]+" "+C[R]:C[R]:R==="style"?h.isObject(d[R])&&h.isObject(C[R])?d[R]=h.mergeAttrs(d[R],C[R]):h.isObject(d[R])?d[R]=h.mergeAttrs(d[R],h.styleToObject(C[R])):h.isObject(C[R])?d[R]=h.mergeAttrs(h.styleToObject(d[R]),C[R]):d[R]=h.mergeAttrs(h.styleToObject(d[R]),h.styleToObject(C[R])):d[R]=C[R];return d},h.annotateString=function(d,C,R){C=C||[],R=R||{};for(var k=R.offset||0,B=[],z,U=[],Y,oe,W=0;W<d.length;W++){Y=U[W]=d[W];for(var D=0;D<C.length;D++){var F=C[D],H=F.start+k,ie=F.end+k;W>=H&&W<ie&&(h.isObject(Y)?Y.attrs=h.mergeAttrs(h.mergeAttrs({},Y.attrs),F.attrs):Y=U[W]={t:d[W],attrs:F.attrs},R.includeAnnotationIndices&&(Y.annotations||(Y.annotations=[])).push(D))}oe=U[W-1],oe?h.isObject(Y)&&h.isObject(oe)?JSON.stringify(Y.attrs)===JSON.stringify(oe.attrs)?z.t+=Y.t:(B.push(z),z=Y):h.isObject(Y)||h.isObject(oe)?(B.push(z),z=Y):z=(z||"")+Y:z=Y}return z&&B.push(z),B},h.findAnnotationsAtIndex=function(d,C){var R=[];return d&&d.forEach(function(k){k.start<C&&C<=k.end&&R.push(k)}),R},h.findAnnotationsBetweenIndexes=function(d,C,R){var k=[];return d&&d.forEach(function(B){(C>=B.start&&C<B.end||R>B.start&&R<=B.end||B.start>=C&&B.end<R)&&k.push(B)}),k},h.shiftAnnotations=function(d,C,R){return d&&d.forEach(function(k){k.start<C&&k.end>=C?k.end+=R:k.start>=C&&(k.start+=R,k.end+=R)}),d},h.convertLineToPathData=function(d){d=h(d);var C=["M",d.attr("x1"),d.attr("y1"),"L",d.attr("x2"),d.attr("y2")].join(" ");return C},h.convertPolygonToPathData=function(d){var C=h.getPointsFromSvgNode(d);return C.length===0?null:h.svgPointsToPath(C)+" Z"},h.convertPolylineToPathData=function(d){var C=h.getPointsFromSvgNode(d);return C.length===0?null:h.svgPointsToPath(C)},h.svgPointsToPath=function(d){for(var C=0,R=d.length;C<R;C++)d[C]=d[C].x+" "+d[C].y;return"M "+d.join(" L")},h.getPointsFromSvgNode=function(d){d=h.toNode(d);var C=[],R=d.points;if(R)for(var k=0,B=R.numberOfItems;k<B;k++)C.push(R.getItem(k));return C},h.KAPPA=.551784,h.convertCircleToPathData=function(d){d=h(d);var C=parseFloat(d.attr("cx"))||0,R=parseFloat(d.attr("cy"))||0,k=parseFloat(d.attr("r")),B=k*h.KAPPA,z=["M",C,R-k,"C",C+B,R-k,C+k,R-B,C+k,R,"C",C+k,R+B,C+B,R+k,C,R+k,"C",C-B,R+k,C-k,R+B,C-k,R,"C",C-k,R-B,C-B,R-k,C,R-k,"Z"].join(" ");return z},h.convertEllipseToPathData=function(d){d=h(d);var C=parseFloat(d.attr("cx"))||0,R=parseFloat(d.attr("cy"))||0,k=parseFloat(d.attr("rx")),B=parseFloat(d.attr("ry"))||k,z=k*h.KAPPA,U=B*h.KAPPA,Y=["M",C,R-B,"C",C+z,R-B,C+k,R-U,C+k,R,"C",C+k,R+U,C+z,R+B,C,R+B,"C",C-z,R+B,C-k,R+U,C-k,R,"C",C-k,R-U,C-z,R-B,C,R-B,"Z"].join(" ");return Y},h.convertRectToPathData=function(d){return d=h(d),h.rectToPath({x:parseFloat(d.attr("x"))||0,y:parseFloat(d.attr("y"))||0,width:parseFloat(d.attr("width"))||0,height:parseFloat(d.attr("height"))||0,rx:parseFloat(d.attr("rx"))||0,ry:parseFloat(d.attr("ry"))||0})},h.rectToPath=function(d){var C,R=d.x,k=d.y,B=d.width,z=d.height,U=a(d.rx||d["top-rx"]||0,B/2),Y=a(d.rx||d["bottom-rx"]||0,B/2),oe=a(d.ry||d["top-ry"]||0,z/2),W=a(d.ry||d["bottom-ry"]||0,z/2);return U||Y||oe||W?C=["M",R,k+oe,"v",z-oe-W,"a",Y,W,0,0,0,Y,W,"h",B-2*Y,"a",Y,W,0,0,0,Y,-W,"v",-(z-W-oe),"a",U,oe,0,0,0,-U,-oe,"h",-(B-2*U),"a",U,oe,0,0,0,-U,oe,"Z"]:C=["M",R,k,"H",R+B,"V",k+z,"H",R,"V",k,"Z"],C.join(" ")},h.normalizePathData=function(){var d=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029`,C=new RegExp("([a-z])["+d+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+d+"]*,?["+d+"]*)+)","ig"),R=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+d+"]*,?["+d+"]*","ig"),k=Math,B=k.PI,z=k.sin,U=k.cos,Y=k.tan,oe=k.asin,W=k.sqrt,D=k.abs;function F(te,ue,re,Q,le,Ge){var Ne=.3333333333333333,Oe=2/3;return[Ne*te+Oe*re,Ne*ue+Oe*Q,Ne*le+Oe*re,Ne*Ge+Oe*Q,le,Ge]}function H(te,ue,re){var Q=te*U(re)-ue*z(re),le=te*z(re)+ue*U(re);return{x:Q,y:le}}function ie(te,ue,re,Q,le,Ge,Ne,Oe,Ze,$e){var q=B*120/180,G=B/180*(+le||0),K=[],J;if($e)Ye=$e[0],ft=$e[1],Ie=$e[2],Se=$e[3];else{J=H(te,ue,-G),te=J.x,ue=J.y,J=H(Oe,Ze,-G),Oe=J.x,Ze=J.y;var Ee=(te-Oe)/2,fe=(ue-Ze)/2,Te=Ee*Ee/(re*re)+fe*fe/(Q*Q);Te>1&&(Te=W(Te),re=Te*re,Q=Te*Q);var Ce=re*re,Ue=Q*Q,Le=(Ge==Ne?-1:1)*W(D((Ce*Ue-Ce*fe*fe-Ue*Ee*Ee)/(Ce*fe*fe+Ue*Ee*Ee))),Ie=Le*re*fe/Q+(te+Oe)/2,Se=Le*-Q*Ee/re+(ue+Ze)/2,Ye=oe(((ue-Se)/Q).toFixed(9)),ft=oe(((Ze-Se)/Q).toFixed(9));Ye=te<Ie?B-Ye:Ye,ft=Oe<Ie?B-ft:ft,Ye<0&&(Ye=B*2+Ye),ft<0&&(ft=B*2+ft),Ne&&Ye>ft&&(Ye=Ye-B*2),!Ne&&ft>Ye&&(ft=ft-B*2)}var bt=ft-Ye;if(D(bt)>q){var dt=ft,it=Oe,Jt=Ze;ft=Ye+q*(Ne&&ft>Ye?1:-1),Oe=Ie+re*U(ft),Ze=Se+Q*z(ft),K=ie(Oe,Ze,re,Q,le,0,Ne,it,Jt,[ft,dt,Ie,Se])}bt=ft-Ye;var Sr=U(Ye),sr=z(Ye),vr=U(ft),qr=z(ft),Vr=Y(bt/4),In=4/3*(re*Vr),ur=4/3*(Q*Vr),Mr=[te,ue],Tn=[te+In*sr,ue-ur*Sr],Pn=[Oe+In*qr,Ze-ur*vr],xn=[Oe,Ze];if(Tn[0]=2*Mr[0]-Tn[0],Tn[1]=2*Mr[1]-Tn[1],$e)return[Tn,Pn,xn].concat(K);K=[Tn,Pn,xn].concat(K).join().split(",");for(var Xn=[],oi=K.length,Ht=0;Ht<oi;Ht++)Xn[Ht]=Ht%2?H(K[Ht-1],K[Ht],G).y:H(K[Ht],K[Ht+1],G).x;return Xn}function se(te){if(!te)return null;var ue={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},re=[];return String(te).replace(C,function(Q,le,Ge){var Ne=[],Oe=le.toLowerCase();for(Ge.replace(R,function(Ze,$e){$e&&Ne.push(+$e)}),Oe==="m"&&Ne.length>2&&(re.push([le].concat(Ne.splice(0,2))),Oe="l",le=le==="m"?"l":"L");Ne.length>=ue[Oe]&&(re.push([le].concat(Ne.splice(0,ue[Oe]))),!!ue[Oe]););}),re}function we(te){if((!Array.isArray(te)||!Array.isArray(te&&te[0]))&&(te=se(te)),!te||!te.length)return[["M",0,0]];for(var ue=[],re=0,Q=0,le=0,Ge=0,Ne=0,Oe,Ze=te.length,$e=Ne;$e<Ze;$e++){var q=[];ue.push(q);var G=te[$e];if(Oe=G[0],Oe!=Oe.toUpperCase()){q[0]=Oe.toUpperCase();var K,J;switch(q[0]){case"A":q[1]=G[1],q[2]=G[2],q[3]=G[3],q[4]=G[4],q[5]=G[5],q[6]=+G[6]+re,q[7]=+G[7]+Q;break;case"V":q[1]=+G[1]+Q;break;case"H":q[1]=+G[1]+re;break;case"M":for(le=+G[1]+re,Ge=+G[2]+Q,K=G.length,J=1;J<K;J++)q[J]=+G[J]+(J%2?re:Q);break;default:for(K=G.length,J=1;J<K;J++)q[J]=+G[J]+(J%2?re:Q);break}}else for(var Ee=G.length,fe=0;fe<Ee;fe++)q[fe]=G[fe];switch(q[0]){case"Z":re=+le,Q=+Ge;break;case"H":re=q[1];break;case"V":Q=q[1];break;case"M":le=q[q.length-2],Ge=q[q.length-1],re=q[q.length-2],Q=q[q.length-1];break;default:re=q[q.length-2],Q=q[q.length-1];break}}return ue}function ge(te){var ue=we(te),re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Q(K,J,Ee){var fe,Te;if(!K)return["C",J.x,J.y,J.x,J.y,J.x,J.y];switch(K[0]in{T:1,Q:1}||(J.qx=null,J.qy=null),K[0]){case"M":J.X=K[1],J.Y=K[2];break;case"A":parseFloat(K[1])===0||parseFloat(K[2])===0?K=["L",K[6],K[7]]:K=["C"].concat(ie.apply(0,[J.x,J.y].concat(K.slice(1))));break;case"S":Ee==="C"||Ee==="S"?(fe=J.x*2-J.bx,Te=J.y*2-J.by):(fe=J.x,Te=J.y),K=["C",fe,Te].concat(K.slice(1));break;case"T":Ee==="Q"||Ee==="T"?(J.qx=J.x*2-J.qx,J.qy=J.y*2-J.qy):(J.qx=J.x,J.qy=J.y),K=["C"].concat(F(J.x,J.y,J.qx,J.qy,K[1],K[2]));break;case"Q":J.qx=K[1],J.qy=K[2],K=["C"].concat(F(J.x,J.y,K[1],K[2],K[3],K[4]));break;case"H":K=["L"].concat(K[1],J.y);break;case"V":K=["L"].concat(J.x,K[1]);break}return K}function le(K,J){if(K[J].length>7){K[J].shift();for(var Ee=K[J];Ee.length;)Ge[J]="A",K.splice(J++,0,["C"].concat(Ee.splice(0,6)));K.splice(J,1),Ze=ue.length}}for(var Ge=[],Ne="",Oe="",Ze=ue.length,$e=0;$e<Ze;$e++){ue[$e]&&(Ne=ue[$e][0]),Ne!=="C"&&(Ge[$e]=Ne,$e>0&&(Oe=Ge[$e-1])),ue[$e]=Q(ue[$e],re,Oe),Ge[$e]!=="A"&&Ne==="C"&&(Ge[$e]="C"),le(ue,$e);var q=ue[$e],G=q.length;re.x=q[G-2],re.y=q[G-1],re.bx=parseFloat(q[G-4])||re.x,re.by=parseFloat(q[G-3])||re.y}return(!ue[0][0]||ue[0][0]!=="M")&&ue.unshift(["M",0,0]),ue}return function(te){return ge(te).join(",").split(",").join(" ")}}(),h.namespace=t,h.g=wfe,h}(),Du={classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},kh="[object Arguments]",FE="[object Array]",Sg="[object Boolean]",hT="[object Date]",nj="[object Error]",ehe="[object Function]",id="[object Map]",Eg="[object Number]",the="[object Null]",Al="[object Object]",dT="[object RegExp]",sd="[object Set]",Ag="[object String]",Tg="[object Symbol]",rhe="[object Undefined]",nhe="[object WeakMap]",pT="[object ArrayBuffer]",vT="[object DataView]",ij="[object Float32Array]",sj="[object Float64Array]",oj="[object Int8Array]",aj="[object Int16Array]",uj="[object Int32Array]",cj="[object Uint8Array]",lj="[object Uint8ClampedArray]",fj="[object Uint16Array]",hj="[object Uint32Array]",ihe={[kh]:!0,[FE]:!0,[pT]:!0,[vT]:!0,[Sg]:!0,[hT]:!0,[ij]:!0,[sj]:!0,[oj]:!0,[aj]:!0,[uj]:!0,[id]:!0,[Eg]:!0,[Al]:!0,[dT]:!0,[sd]:!0,[Ag]:!0,[Tg]:!0,[cj]:!0,[lj]:!0,[fj]:!0,[hj]:!0,[nj]:!1,[ehe]:!1,[nhe]:!1},gT="\\ud800-\\udfff",she="\\u0300-\\u036f",ohe="\\ufe20-\\ufe2f",ahe="\\u20d0-\\u20ff",uhe="\\u1ab0-\\u1aff",che="\\u1dc0-\\u1dff",lhe=she+ohe+ahe+uhe+che,dj="\\u2700-\\u27bf",pj="a-z\\xdf-\\xf6\\xf8-\\xff",fhe="\\xac\\xb1\\xd7\\xf7",hhe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dhe="\\u2000-\\u206f",phe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vj="A-Z\\xc0-\\xd6\\xd8-\\xde",vhe="\\ufe0e\\ufe0f",gj=fhe+hhe+dhe+phe,mj="['â]",i4=`[${gj}]`,mT=`[${lhe}]`,yj="\\d",ghe=`[${dj}]`,_j=`[${pj}]`,bj=`[^${gT}${gj+yj+dj+pj+vj}]`,BE="\\ud83c[\\udffb-\\udfff]",mhe=`(?:${mT}|${BE})`,wj=`[^${gT}]`,yT="(?:\\ud83c[\\udde6-\\uddff]){2}",_T="[\\ud800-\\udbff][\\udc00-\\udfff]",wl=`[${vj}]`,yhe="\\u200d",s4=`(?:${_j}|${bj})`,_he=`(?:${wl}|${bj})`,o4=`(?:${mj}(?:d|ll|m|re|s|t|ve))?`,a4=`(?:${mj}(?:D|LL|M|RE|S|T|VE))?`,xj=`${mhe}?`,Sj=`[${vhe}]?`,bhe=`(?:${yhe}(?:${[wj,yT,_T].join("|")})${Sj+xj})*`,whe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xhe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ej=Sj+xj+bhe,She=`(?:${[ghe,yT,_T].join("|")})${Ej}`,Ehe=RegExp([`${wl}?${_j}+${o4}(?=${[i4,wl,"$"].join("|")})`,`${_he}+${a4}(?=${[i4,wl+s4,"$"].join("|")})`,`${wl}?${s4}+${o4}`,`${wl}+${a4}`,xhe,whe,`${yj}+`,She].join("|"),"g"),bT=200,zE="__hash_undefined__",Ahe=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,The=`[${gT}]`,Phe=`${wj}${mT}?`,Che=`(?:${[Phe,mT,yT,_T,The].join("|")})`,Aj=RegExp(`${BE}(?=${BE})|${Che+Ej}`,"g"),Ohe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ihe=/^\w*$/,Rhe=46,khe=/\\(\\)?/g,Mhe=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Lhe=/^(?:0|[1-9]\d*)$/,Nhe=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),qhe=4294967294,Dhe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tj=e=>Aj.test(e),Fhe=e=>e.match(Aj)||[],Bhe=e=>e.split(""),Pj=e=>Tj(e)?Fhe(e):Bhe(e),zhe=e=>e==null?[]:od(e).map(t=>e[t]),od=e=>Eo(e)?Cj(e):Object.keys(Object(e)),Vhe=e=>{if(!Pg(e))return Object.keys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&r!="constructor"&&t.push(r);return t},Cj=(e,t)=>{const r=Array.isArray(e),n=!r&&jo(e)&&mo(e)===kh,i=!r&&!n&&ud(e),s=r||n||i,o=e.length,a=new Array(s?o:0);let u=s?-1:o;for(;++u<o;)a[u]=`${u}`;for(const c in e)(t||hasOwnProperty.call(e,c))&&!(s&&(c==="length"||AT(c,o)))&&a.push(c);return a},bp=(e,t)=>{let{length:r}=e;for(;r--;)if(df(e[r][0],t))return r;return-1},df=(e,t)=>e===t||e!==e&&t!==t,jo=e=>e!=null&&typeof e=="object",iv=(e,t,r)=>{if(!Jr(r))return!1;const n=typeof t;return(n=="number"?Eo(r)&&t>-1&&t<r.length:n=="string"&&t in r)?df(r[t],e):!1},Ghe=e=>jo(e)&&mo(e)==sd,$he=e=>jo(e)&&mo(e)==id,Pg=e=>{const t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Object.prototype;return e===r},pf=(e,t,r)=>{const n=e[t];(!(hasOwnProperty.call(e,t)&&df(n,r))||r===void 0&&!(t in e))&&(e[t]=r)},ad=(e,t,r)=>{let n=-1;const i=t.length;for(;++n<i;){const s=t[n];pf(r,s,e[s])}return r},Eo=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Hl=e=>typeof e=="symbol"||jo(e)&&mo(e)===Tg,Uhe=e=>{const t=e.length;let r=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(r.index=e.index,r.input=e.input),r},wT=(e,t)=>{let r=-1;const n=e.length;for(t||(t=new Array(n));++r<n;)t[r]=e[r];return t},mo=e=>e==null?e===void 0?rhe:the:Object.prototype.toString.call(e),xT=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},Oj=(e,t)=>{const r=t?xT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},jhe=e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},Ij=e=>typeof e.constructor=="function"&&!Pg(e)?Object.create(Object.getPrototypeOf(e)):{},ST=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(r=>propertyIsEnumerable.call(e,r))),Hhe=(e,t)=>ad(e,ST(e),t);function Whe(e,t){const r=t?xT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}const Xhe=(e,t,r)=>{const n=e.constructor;switch(t){case pT:return xT(e);case Sg:case hT:return new n(+e);case vT:return Whe(e,r);case ij:case sj:case oj:case aj:case uj:case cj:case lj:case fj:case hj:return Oj(e,r);case id:return new n(e);case Eg:case Ag:return new n(e);case dT:return jhe(e);case sd:return new n;case Tg:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},ud=e=>jo(e)&&Ahe.test(mo(e)),VE=e=>{const t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...ST(Object(e))),t},Rj=e=>{const t=[];for(;e;)t.push(...ST(e)),e=Object.getPrototypeOf(Object(e));return t},kj=e=>{const t=[];for(const r in e)t.push(r);return Array.isArray(e)||t.push(...Rj(e)),t},wp=({__data__:e},t)=>{const r=e;return ode(t)?r[typeof t=="string"?"string":"hash"]:r.map},Yhe=(e,t,r,n)=>{const i=VE(e),s=i.length,a=VE(t).length;if(s!=a)return!1;let u,c=s;for(;c--;)if(u=i[c],!hasOwnProperty.call(t,u))return!1;const f=n.get(e),h=n.get(t);if(f&&h)return f==t&&h==e;let v=!0;n.set(e,t),n.set(t,e);let y;for(;++c<s;){u=i[c];const m=e[u],_=t[u];if(!(m===_||r(m,_,n))){v=!1;break}y||(y=u=="constructor")}if(v&&!y){const m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return n.delete(e),n.delete(t),v},Cg=(e,t,r)=>e===t?!0:e==null||t==null||!jo(e)&&!jo(t)?e!==e&&t!==t:Khe(e,t,Cg,r),Khe=(e,t,r,n)=>{let i=Array.isArray(e);const s=Array.isArray(t);let o=i?FE:mo(e),a=s?FE:mo(t);o=o==kh?Al:o,a=a==kh?Al:a;let u=o==Al;const c=a==Al,f=o==a;if(f&&!u)return n||(n=new Ml),i||ud(e)?Mj(e,t,!1,r,n):Qhe(e,t,o,r,n);const h=u&&hasOwnProperty.call(e,"__wrapped__"),v=c&&hasOwnProperty.call(t,"__wrapped__");if(h||v){const y=h?e.value():e,m=v?t.value():t;return n||(n=new Ml),r(y,m,n)}return f?(n||(n=new Ml),Yhe(e,t,r,n)):!1},Mj=(e,t,r,n,i)=>{const s=e.length,o=t.length;if(s!=o)return!1;const a=i.get(e),u=i.get(t);if(a&&u)return a==t&&u==e;let c=-1,f=!0;const h=r?new Lh:void 0;for(i.set(e,t),i.set(t,e);++c<s;){const v=e[c],y=t[c];if(h){if(!Jhe(t,(m,_)=>{if(!Zhe(h,_)&&(v===m||n(v,m,i)))return h.push(_)})){f=!1;break}}else if(!(v===y||n(v,y,i))){f=!1;break}}return i.delete(e),i.delete(t),f},Jhe=(e,t)=>{let r=-1;const n=e==null?0:e.length;for(;++r<n;)if(t(e[r],r,e))return!0;return!1},Zhe=(e,t)=>e.has(t),u4=(e,t,r,n)=>!(e.byteLength!=t.byteLength||!r(new Uint8Array(e),new Uint8Array(t),n)),Qhe=(e,t,r,n,i)=>{switch(r){case vT:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,u4(e,t,n,i));case pT:return u4(e,t,n,i);case Sg:case hT:case Eg:return df(+e,+t);case nj:return e.name==t.name&&e.message==t.message;case dT:case Ag:return e==`${t}`;case id:let s=Lj;case sd:if(s||(s=Og),e.size!=t.size)return!1;const o=i.get(e);if(o)return o==t;i.set(e,t);const a=Mj(s(e),s(t),!0,n,i);return i.delete(e),a;case Tg:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},Lj=e=>{let t=-1,r=Array(e.size);return e.forEach((n,i)=>{r[++t]=[i,n]}),r},Og=e=>{let t=-1;const r=new Array(e.size);return e.forEach(n=>{r[++t]=n}),r},ET=(e,t)=>{if(Array.isArray(e))return!1;const r=typeof e;return r==="number"||r==="boolean"||e==null||Hl(e)?!0:Ihe.test(e)||!Ohe.test(e)||t!=null&&e in Object(t)},ede=e=>{const t=[];return e.charCodeAt(0)===Rhe&&t.push(""),e.replace(Mhe,(r,n,i,s)=>{let o=r;i?o=s.replace(khe,"$1"):n&&(o=n.trim()),t.push(o)}),t},Ju=(e,t)=>Array.isArray(e)?e:ET(e,t)?[e]:ede(`${e}`),cd=(e,t)=>{t=Ju(t,e);let r=0;const n=t.length;for(;e!=null&&r<n;)e=e[Zu(t[r])],r++;return r&&r==n?e:void 0};function tde(e,t){if(e!==t){const r=e!==void 0,n=e===null,i=e===e,s=Hl(e),o=t!==void 0,a=t===null,u=t===t,c=Hl(t);if(!a&&!c&&!s&&e>t||s&&o&&u&&!a&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||a&&r&&i||!o&&i||!u)return-1}return 0}function rde(e,t,r){let n=-1;const i=e.criteria,s=t.criteria,o=i.length,a=r.length;for(;++n<o;){const u=n<a?r[n]:null,f=(u&&typeof u=="function"?u:tde)(i[n],s[n]);if(f)return u&&typeof u!="function"?f*(u=="desc"?-1:1):f}return e.index-t.index}const Nj=(e,t)=>{let r=(o,a)=>!!(o==null?0:o.length)&&o.indexOf(a)>-1,n=!0;const i=[],s=t.length;if(!e.length)return i;t.length>=bT&&(r=(o,a)=>o.has(a),n=!1,t=new Lh(t));e:for(let o in e){let a=e[o];const u=a;if(a=a!==0?a:0,n&&u===u){let c=s;for(;c--;)if(t[c]===u)continue e;i.push(a)}else r(t,u)||i.push(a)}return i},Zu=e=>{if(typeof e=="string"||Hl(e))return e;const t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},kl=(e,t=!1,r=!1,n=!0,i,s,o,a)=>{let u;if(i&&(u=o?i(e,s,o,a):i(e)),u!==void 0)return u;if(!Jr(e))return e;const c=Array.isArray(e),f=mo(e);if(c){if(u=Uhe(e),!t)return wT(e,u)}else{const m=typeof e=="function";if(f===Al||f===kh||m&&!o){if(u=r||m?{}:Ij(e),!t)return r?nde(e,ad(e,Object.keys(e),u)):Hhe(e,Object.assign(u,e))}else{if(m||!ihe[f])return o?e:{};u=Xhe(e,f,t)}}a||(a=new Ml);const h=a.get(e);if(h)return h;if(a.set(e,u),$he(e))return e.forEach((m,_)=>{u.set(_,kl(m,t,r,n,i,_,e,a))}),u;if(Ghe(e))return e.forEach(m=>{u.add(kl(m,t,r,n,i,m,e,a))}),u;if(ud(e))return u;const y=c?void 0:(n?r?kj:VE:r?Dj:od)(e);return(y||e).forEach((m,_)=>{y&&(_=m,m=e[_]),pf(u,_,kl(m,t,r,n,i,_,e,a))}),u},nde=(e,t)=>ad(e,Rj(e),t),qj=(e,t)=>t.length<2?e:cd(e,t.slice(0,-1)),ide=(e,t,r)=>{if(!Jr(e))return e;t=Ju(t,e);const n=t.length,i=n-1;let s=-1,o=e;for(;o!=null&&++s<n;){const a=Zu(t[s]);let u=r;if(s!=i){const c=o[a];u=void 0,u===void 0&&(u=Jr(c)?c:AT(t[s+1])?[]:{})}pf(o,a,u),o=o[a]}return e},AT=(e,t)=>{const r=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(r==="number"||r!=="symbol"&&Lhe.test(e))&&e>-1&&e%1==0&&e<t},sde=(e,t)=>{t=Ju(t,e),e=qj(e,t);const r=t[t.length-1];return e==null||delete e[Zu(r)]},ode=e=>{const t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},Dj=e=>{const t=[];for(const r in e)t.push(r);return t},ade=e=>{e=Object(e);const t={};for(const r in e)t[r]=e[r];return t},c4=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function Fj(e,t=!1){return(r,...n)=>{let i=-1,s=n.length,o=s>1?n[s-1]:void 0;const a=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):t?(u,c)=>{if(Array.isArray(u)&&!Array.isArray(c))return c}:void 0,a&&iv(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),r=Object(r);++i<s;){const u=n[i];u&&e(r,u,i,o)}return r}}const TT=(e,t,r,n,i)=>{e!==t&&ao(t,(s,o)=>{if(Jr(s))i||(i=new Ml),ude(e,t,o,r,TT,n,i);else{let a=n?n(e[o],s,`${o}`,e,t,i):void 0;a===void 0&&(a=s),GE(e,o,a)}})},ude=(e,t,r,n,i,s,o)=>{const a=c4(e,r),u=c4(t,r),c=o.get(u);if(c){GE(e,r,c);return}let f=s?s(a,u,`${r}`,e,t,o):void 0,h=f===void 0;if(h){const v=Array.isArray(u),y=!v&&ud(u);f=u,v||y?Array.isArray(a)?f=a:jo(a)&&Eo(a)?f=wT(a):y?(h=!1,f=Oj(u,!0)):f=[]:ri(u)||Mh(u)?(f=a,Mh(a)?f=ade(a):(typeof a=="function"||!Jr(a))&&(f=Ij(u))):h=!1}h&&(o.set(u,f),i(f,u,n,s,o),o.delete(u)),GE(e,r,f)},GE=(e,t,r)=>{(r!==void 0&&!df(e[t],r)||r===void 0&&!(t in e))&&pf(e,t,r)};function cde(e,t,r){const n=Object(e),i=r(e);let{length:s}=i,o=-1;for(;s--;){const a=i[++o];if(t(n[a],a,n)===!1)break}return e}const lde=(e,t)=>e&&cde(e,t,od),PT=(e,t)=>{if(e==null)return e;if(!Eo(e))return lde(e,t);const r=e.length,n=Object(e);let i=-1;for(;++i<r&&t(n[i],i,n)!==!1;);return e};function fde(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}const hde=Set&&1/Og(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function Bj(e,t,r,n,i,s){return Jr(e)&&Jr(t)&&(s.set(t,e),TT(e,t,void 0,Bj,s),s.delete(t)),e}function dde(e,t,r){t.length?t=t.map(o=>Array.isArray(o)?a=>cd(a,o.length===1?o[0]:o):o):t=[o=>o];let n=-1,i=-1;const s=Eo(e)?new Array(e.length):[];return PT(e,o=>{const a=t.map(u=>u(o));s[++i]={criteria:a,index:++n,value:o}}),pde(s,(o,a)=>rde(o,a,r))}function pde(e,t){let{length:r}=e;for(e.sort(t);r--;)e[r]=e[r].value;return e}function zj(e){return e===e&&!Jr(e)}function Vj(e,t){return r=>r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}function Gj(e,t){return e!=null&&Rde(e,t,Ide)}function vde(e,t){return ET(e)&&zj(t)?Vj(Zu(e),t):r=>{const n=cd(r,e);return n===void 0&&n===t?Gj(r,e):Cg(t,n)}}function gde(e){const t=mde(e);return t.length===1&&t[0][2]?Vj(t[0][0],t[0][1]):r=>r===e||yde(r,e,t)}function mde(e){const t=od(e);let r=t.length;for(;r--;){const n=t[r],i=e[n];t[r]=[n,i,zj(i)]}return t}function yde(e,t,r,n){let i=r.length;const s=i;if(e==null)return!s;let o;for(e=Object(e);i--;)if(o=r[i],o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<s;){o=r[i];const a=o[0],u=e[a],c=o[1];if(o[2]){if(u===void 0&&!(a in e))return!1}else{const f=new Ml;if(!Cg(c,u,f))return!1}}return!0}function _de(e){return ET(e)?bde(Zu(e)):wde(e)}function bde(e){return t=>t==null?void 0:t[e]}function wde(e){return t=>cd(t,e)}function xde(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?vde(e[0],e[1]):gde(e):_de(e)}function Ig(){const e=xde;return arguments.length?e(arguments[0]):e}const Sde=(e,t,r,n)=>{let i=-1;const s=e==null?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r},Ede=(e,t,r,n,i)=>(i(e,(s,o,a)=>{r=n?(n=!1,s):t(r,s,o,a)}),r);function Ade(e,t,r){const n=Array.isArray(e)?Sde:Ede,i=arguments.length<3;return n(e,t,r,i,PT)}const Tde=e=>Array.isArray(e)||Mh(e)||!!(e&&e[Symbol.isConcatSpreadable]);function $j(e,t,r,n,i){let s=-1;const o=e.length;for(r||(r=Tde),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?$j(a,t-1,r,n,i):i.push(...a):i[i.length]=a}return i}const Mh=e=>jo(e)&&mo(e)=="[object Arguments]",Pde=(e,t)=>Cde(e,t,(r,n)=>Gj(e,n)),Cde=(e,t,r)=>{let n=-1;const i=t.length,s={};for(;++n<i;){const o=t[n],a=cd(e,o);r(a,o)&&ide(s,Ju(o,e),a)}return s},Ode=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,Ide=(e,t)=>e!=null&&t in Object(e),Rde=(e,t,r)=>{t=Ju(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=Zu(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&Ode(i)&&AT(o,i)&&(Array.isArray(e)||Mh(e)))},kde=e=>e.match(Dhe),Mde=e=>e.match(Ehe),Lde=(e,t)=>(Nhe(e)?Mde(e):kde(e))||[],Nde=(e,t,r)=>{const{length:n}=e;return r=r===void 0?n:r,e.slice(t,r)},qde=Dde("toUpperCase");function Dde(e){return t=>{if(!t)return"";const r=Tj(t)?Pj(t):void 0,n=r?r[0]:t[0],i=r?Nde(r,1).join(""):t.slice(1);return n[e]()+i}}class Ml{constructor(t){const r=this.__data__=new nE(t);this.size=r.size}clear(){this.__data__=new nE,this.size=0}delete(t){const r=this.__data__,n=r.delete(t);return this.size=r.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,r){let n=this.__data__;if(n instanceof nE){const i=n.__data__;if(i.length<bT-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new Uj(i)}return n.set(t,r),this.size=n.size,this}}class nE{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const r=this.__data__,n=bp(r,t);if(n<0)return!1;const i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(t){const r=this.__data__,n=bp(r,t);return n<0?void 0:r[n][1]}has(t){return bp(this.__data__,t)>-1}set(t,r){const n=this.__data__,i=bp(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}class Uj{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new l4,map:new Map,string:new l4}}delete(t){const r=wp(this,t).delete(t);return this.size-=r?1:0,r}get(t){return wp(this,t).get(t)}has(t){return wp(this,t).has(t)}set(t,r){const n=wp(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}class l4{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}get(t){const n=this.__data__[t];return n===zE?void 0:n}has(t){return this.__data__[t]!==void 0}set(t,r){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r===void 0?zE:r,this}}class Lh{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.__data__=new Uj;++r<n;)this.add(t[r])}add(t){return this.__data__.set(t,zE),this}has(t){return this.__data__.has(t)}}Lh.prototype.push=Lh.prototype.add;const Fde=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===Sg},Jr=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},gs=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===Eg},Fi=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===Ag},Xt=Fj((e,t)=>{if(Pg(t)||Eo(t)){ad(t,od(t),e);return}for(var r in t)hasOwnProperty.call(t,r)&&pf(e,r,t[r])}),Bde=(e,...t)=>{let r=-1,n=t.length;const i=n>2?t[2]:void 0;for(i&&iv(t[0],t[1],i)&&(n=1);++r<n;){const s=t[r];if(s==null)continue;const o=Object.keys(s),a=o.length;let u=-1;for(;++u<a;){const c=o[u],f=e[c];(f===void 0||df(f,Object.prototype[c])&&!hasOwnProperty.call(e,c))&&(e[c]=s[c])}}return e},qs=Bde,zde=function(...t){return t.push(void 0,Bj),ai.apply(void 0,t)},CT=zde,Do=(e,t,...r)=>{let n=-1;const i=typeof t=="function",s=Eo(e)?new Array(e.length):[];return PT(e,o=>{s[++n]=i?t.apply(o,r):Vde(o,t,...r)}),s},Vde=(e,t,...r)=>{t=Ju(t,e),e=qj(e,t);const n=e==null?e:e[Zu(fde(t))];return n==null?void 0:n.apply(e,r)},jj=(e,t,r)=>{let n=0,i=e==null?0:e.length;if(i==0)return 0;r=Ig(r,2),t=r(t);const s=t!==t,o=t===null,a=Hl(t),u=t===void 0;for(;n<i;){let c;const f=Math.floor((n+i)/2),h=r(e[f]),v=h!==void 0,y=h===null,m=h===h,_=Hl(h);s?c=m:u?c=m&&v:o?c=m&&v&&!y:a?c=m&&v&&!y&&!_:y||_?c=!1:c=h<t,c?n=f+1:i=f}return Math.min(i,qhe)},ld=(e,t)=>{let r=-1,n=(u,c)=>!!(u==null?0:u.length)&&u.indexOf(c)>-1;t=Ig(t,2);let i=!0;const{length:s}=e,o=[];let a=o;if(s>=bT){const u=t?null:hde(e);if(u)return Og(u);i=!1,n=(c,f)=>c.has(f),a=new Lh}else a=t?[]:o;e:for(;++r<s;){let u=e[r];const c=t?t(u):u;if(u=u!==0?u:0,i&&c===c){let f=a.length;for(;f--;)if(a[f]===c)continue e;t&&a.push(c),o.push(u)}else n(a,c)||(a!==o&&a.push(c),o.push(u))}return o},ha=e=>kl(e),oo=e=>kl(e,!0),Za=e=>{if(e==null)return!0;if(Eo(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||ud(e)||Mh(e)))return!e.length;const t=mo(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Pg(e))return!Vhe(e).length;for(const r in e)if(hasOwnProperty.call(e,r))return!1;return!0},Tl=(e,t)=>Cg(e,t),_n=e=>typeof e=="function",ri=e=>{if(!jo(e)||mo(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},zr=e=>{if(!e)return[];if(Eo(e))return Fi(e)?Pj(e):wT(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const n=e[Symbol.iterator]();let i;const s=[];for(;!(i=n.next()).done;)s.push(i.value);return s}const t=mo(e);return(t==id?Lj:t==sd?Og:zhe)(e)};function Gde(e,t,r){if(typeof e!="function")throw new TypeError("Expected a function");let n,i,s,o,a,u,c=0,f=!1,h=!1,v=!0;const y=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,Jr(r)&&(f=!!r.leading,h="maxWait"in r,s=h?Math.max(20,t):s,v="trailing"in r?!!r.trailing:v);function m(d){const C=n,R=i;return n=i=void 0,c=d,o=e.apply(R,C),o}function _(d,C){return y?(window.cancelAnimationFrame(a),window.requestAnimationFrame(d)):setTimeout(d,C)}function x(d){if(y)return window.cancelAnimationFrame(d);clearTimeout(d)}function S(d){return c=d,a=_(E,t),f?m(d):o}function P(d){const C=d-u,R=d-c,k=t-C;return h?Math.min(k,s-R):k}function T(d){const C=d-u,R=d-c;return u===void 0||C>=t||C<0||h&&R>=s}function E(){const d=Date.now();if(T(d))return O(d);a=_(E,P(d))}function O(d){return a=void 0,v&&n?m(d):(n=i=void 0,o)}function N(...d){const C=Date.now(),R=T(C);if(n=d,i=this,u=C,R){if(a===void 0)return S(u);if(h)return a=_(E,t),m(u)}return a===void 0&&(a=_(E,t)),o}return N.cancel=()=>{a!==void 0&&x(a),c=0,n=u=i=a=void 0},N.flush=()=>a===void 0?o:O(Date.now()),N.pending=()=>a!==void 0,N}const $de=(e,t)=>(t=Ig(t,2),Ade(e,(r,n,i)=>(i=t(n),hasOwnProperty.call(r,i)?r[i].push(n):pf(r,i,[n]),r),{})),iE=(e,t=[])=>{if(e==null)return[];const r=t.length;return r>1&&iv(e,t[0],t[1])?t=[]:r>2&&iv(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[Ig(t,2)]),dde(e,t.flat(1),[])},Ude=e=>(e==null?0:e.length)?$j(e,1/0):[],f4=(e,...t)=>Eo(e)?Nj(e,t):[],jde=(e,...t)=>jo(e)&&Eo(e)?Nj(e,t.flat(1)):[],$E=(...e)=>{const t=e.flat(1);return ld(t)},Qa=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let r=-1,n=e;for(;++r<t.length;){if(!n||!hasOwnProperty.call(n,t[r]))return!1;n=n[t[r]]}return!0},ni=(e,t,r)=>{t=Ju(t,e);let n=-1,i=t.length;for(i||(i=1,e=void 0);++n<i;){let s=e==null?void 0:e[Zu(t[n])];s===void 0&&(n=i,s=r),e=typeof s=="function"?s.call(e):s}return e},Pc=(e,...t)=>{let r={};if(e==null)return r;let n=!1;t=t.flat(1).map(s=>(s=Ju(s,e),n||(n=s.length>1),s)),ad(e,kj(e),r),n&&(r=kl(r,!0,!0,!0,s=>ri(s)?void 0:s));let i=t.length;for(;i--;)sde(r,t[i]);return r},Hde=(e,...t)=>e==null?{}:Pde(e,t.flat(1/0)),ao=(e,t=r=>r)=>{let r=-1;const n=Object(e),i=Eo(e)?Cj(e,!0):Dj(e);let s=i.length;for(;s--;){const o=i[++r];if(t(n[o],o,n)===!1)break}},Wde=(e="")=>Lde(`${e}`.replace(/['\u2019]/g,"")).reduce((t,r,n)=>(r=r.toLowerCase(),t+(n?qde(r):r)),"");let Xde=0;const Yde=(e="")=>{const t=++Xde;return`${e}`+t},ai=Fj((e,t,r,n)=>{TT(e,t,r,n)},!0),Mo=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Du.classNamePrefix.length)!==Du.classNamePrefix&&(t=Du.classNamePrefix+t),t}).join(" ")},Kde=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Du.classNamePrefix.length)===Du.classNamePrefix&&(t=t.substr(Du.classNamePrefix.length)),t}).join(" ")},sv=function(e,t){const r={},n={},i=We.namespace.svg,s=t||i,o=document.createDocumentFragment(),a=function(u,c,f){for(let h=0;h<u.length;h++){const v=u[h];if(typeof v=="string"){const E=document.createTextNode(v);c.appendChild(E);continue}if(!v.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const y=v.tagName;let m;v.hasOwnProperty("namespaceURI")&&(f=v.namespaceURI),m=document.createElementNS(f,y);const _=f===i,x=_?We:Nt,S=v.attributes;S&&x(m).attr(S);const P=v.style;if(P&&Nt(m).css(P),v.hasOwnProperty("className")){const E=v.className;_?m.className.baseVal=E:m.className=E}if(v.hasOwnProperty("textContent")&&(m.textContent=v.textContent),v.hasOwnProperty("selector")){const E=v.selector;if(r[E])throw new Error("json-dom-parser: selector must be unique");r[E]=m,x(m).attr("joint-selector",E)}if(v.hasOwnProperty("groupSelector")){let E=v.groupSelector;Array.isArray(E)||(E=[E]);for(let O=0;O<E.length;O++){const N=E[O];let d=n[N];d||(d=n[N]=[]),d.push(m)}}c.appendChild(m);const T=v.children;Array.isArray(T)&&a(T,m,f)}};return a(e,o,s),{fragment:o,selectors:r,groupSelectors:n}},xp=function(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t},Nh=function(e,t,r){for(var n=Array.isArray(t)?t:t.split(r||"/"),i,s=0,o=n.length;s<o;)if(i=n[s++],Object(e)===e&&i in e)e=e[i];else return;return e},Hj=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},UE=function(e,t,r,n){const i=Array.isArray(t)?t:t.split(n||"/"),s=i.length-1;let o=e,a=0;for(;a<s;a++){const u=i[a];if(!Hj(o,u))return e;o=o[u]||(o[u]={})}return o[i[s]]=r,e},h4=function(e,t,r){const n=Array.isArray(t)?t:t.split(r),i=n.length-1;let s=e,o=0;for(;o<i;o++){const a=n[o];if(!Hj(s,a))return e;const u=s[a];if(!u)return e;s=u}return delete s[n[i]],e},Jde=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},Pl=function(e){return Pl.id=Pl.id||1,e===void 0?"j_"+Pl.id++:(e.id=e.id===void 0?"j_"+Pl.id++:e.id,e.id)},Zde=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},ti=function(e){if(e.normalized)return e;const{originalEvent:t,target:r}=e,n=t&&t.changedTouches&&t.changedTouches[0];if(n)for(let i in n)e[i]===void 0&&(e[i]=n[i]);if(r){const i=r.correspondingUseElement;i&&(e.target=i)}return e.normalized=!0,e},Qde=function(e){let i=0,s=0,o=0,a=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in e?e.deltaX:i*10,a="deltaY"in e?e.deltaY:s*10,(o||a)&&e.deltaMode&&(e.deltaMode==1?(o*=40,a*=40):(o*=800,a*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(o=a,a=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:a}},epe=function(e,t){return e>t?t:e<-50?-50:e},jE=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-t)),s=setTimeout(function(){r(n+i)},i);return t=n+i,s}}return function(r,n,...i){return e(n!==void 0?r.bind(n,...i):r)}}(),HE=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),ki=function(e){return Fi(e)&&e.slice(-1)==="%"},tpe=function(e,t){function r(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(e);return u?u[1]:null}var n=parseFloat(e);if(Number.isNaN(n))return null;var i={};i.value=n;var s;if(t==null)s="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;s=t.join("|")}else Fi(t)&&(s=t);var o=r(s);return o===null?null:(i.unit=o,i)},yh=0;function rpe(e,t){const r=e.split(t);let n=1;for(let i=0,s=r.length-1;i<s;i++){const o=[];(i>0||r[0]!=="")&&o.push(yh),o.push(t),(i<s-1||r[s]!=="")&&o.push(yh),r.splice(n,0,...o),n+=o.length+1}return r.filter(i=>i!=="")}function d4(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const Wj=function(e,t,r={},n={}){var i=t.width,s=t.height,o=n.svgDocument||We("svg").node,a=We("tspan").node,u=We("text").attr(r).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),o.appendChild(u),n.svgDocument||document.body.appendChild(o);const f=n.preserveSpaces,h=" ",v=n.separator||n.separator===""?n.separator:h,y=typeof v=="string"?v:h;var m=n.eol||`
`,_=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,x=n.maxLineCount;gs(x)||(x=1/0);var S=e.split(v),P=[],T=[],E,O,N;f&&We(a).attr("xml:space","preserve");for(var d=0,C=0,R=S.length;d<R;d++){var k=S[d];if(!(!k&&!f)&&typeof k=="string"){var B=!1;if(k.indexOf(m)>=0)if(k.length>1){const ie=rpe(S[d],m);S.splice(d,1,...ie),d--,R=S.length;continue}else{if(f&&typeof S[d-1]=="string"){S.splice(d,yh,"",yh),R+=2,d--;continue}T[++C]=!f||typeof S[d+1]=="string"?"":void 0,B=!0}if(!B){let ie;if(f?ie=T[C]!==void 0?T[C]+y+k:k:ie=T[C]?T[C]+y+k:k,c.data=ie,a.getComputedTextLength()<=i)T[C]=ie,(E||O)&&(P[C++]=!0,E=0,O=0);else{if(!T[C]||E){var z=!!E;if(E=k.length-1,z||!E){if(!E){if(!T[C]){T=[];break}S.splice(d,2,k+S[d+1]),R--,P[C++]=!0,d--;continue}S[d]=k.substring(0,E);const se=S[d+1];S[d+1]=k.substring(E)+(se===void 0||se===yh?"":se)}else{if(O)S.splice(d,2,S[d]+S[d+1]),O=0;else{var U=k.search(_);U>-1&&U!==k.length-1&&U!==0&&(O=U+1,E=0),S.splice(d,1,k.substring(0,O||E),k.substring(O||E)),R++}C&&!P[C-1]&&C--}(!f||T[C]!=="")&&d--;continue}C++,d--}}var Y=null;if(T.length>x)Y=x-1;else if(s!==void 0){if(N===void 0&&c.data!=="")if(r.lineHeight==="auto")N=d4({value:1.5,unit:"em"},u);else{const ie=tpe(r.lineHeight,["em","px",""]);N=d4(ie,u)}N*T.length>s&&(Y=Math.floor(s/N)-1)}if(Y!==null){T.splice(Y+1);var oe=n.ellipsis;if(!oe||Y<0)break;typeof oe!="string"&&(oe="â¦");var W=T[Y];if(!W&&!B)break;var D=W.length,F,H;do{if(H=W[D],F=W.substring(0,D),H?H.match(v)&&(F+=H):F+=y,F+=oe,c.data=F,a.getComputedTextLength()<=i){T[Y]=F;break}D--}while(D>=0);break}}}return n.svgDocument?o.removeChild(u):document.body.removeChild(o),T.join(m)},npe=function(e){var t=Nt(Nt.parseHTML("<div>"+e+"</div>",null,!1));return t.find("*").each(function(){var r=this;Nt.each(r.attributes,function(){var n=this,i=n.name,s=n.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&Nt(r).removeAttr(i)})}),t.html()},ipe=function(e,t){var r=Nt(e),n=r.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(r,t).each(function(i){n[i].call(this)})},Cc=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var r,n,i,s;return r=n=i=s=0,isFinite(e.vertical)&&(r=i=+e.vertical),isFinite(e.horizontal)&&(n=s=+e.horizontal),isFinite(e.top)&&(r=+e.top),isFinite(e.right)&&(n=+e.right),isFinite(e.bottom)&&(i=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:r,right:n,bottom:i,left:s}},spe={linear:function(e){return e}},Xj={number:function(e,t){var r=t-e;return function(n){return e+r*n}},object:function(e,t){var r=Object.keys(e);return function(n){var i,s,o={};for(i=r.length-1;i!=-1;i--)s=r[i],o[s]=e[s]+(t[s]-e[s])*n;return o}}},ope={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(e.margin)?e.margin:2,n=Number.isFinite(e.width)?e.width:1;return Ji(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return Ji(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return Ji('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Ji(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ji('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ji('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ji('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return Ji('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ji('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return Ji('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ji('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},Ji=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},e.replace(t,function(n){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(u){return!!u}),o=s.split("."),a=r[o.shift()];a!==void 0&&o.length;)a=a[o.shift()];return a!==void 0?a:""})}},Jf=function(){};function Yj(e){e=ld(e);const t=zr(e).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return zr(e).forEach(function(r){const n=t[r.id];if(n.isLink()){const o=n.source(),a=n.target();o.id&&t[o.id]&&n.prop("source/id",t[o.id].id),a.id&&t[a.id]&&n.prop("target/id",t[a.id].id)}const i=r.get("parent");i&&t[i]&&n.set("parent",t[i].id);const s=zr(r.get("embeds")).reduce(function(o,a){return t[a]&&o.push(t[a].id),o},[]);Za(s)||n.set("embeds",s)}),t}const ape=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],upe=ape.reduce((e,t)=>(e[t]=!0,e),{}),cpe={qualify:function(e){return ri(e)},set:function(e,t,r){Object.keys(e).forEach(function(n){if(upe[n]&&n in r){const i=e[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(s,o){s.selected=i.includes(s.value)}):r[n]=i}})}};function Au(e,t){return function(r,n){var i=ki(r);r=parseFloat(r),i&&(r/=100);var s={};if(isFinite(r)){var o=i||r>=0&&r<=1?r*n[t]:Math.max(r+n[t],0);s[e]=o}return s}}function Sp(e,t,r){return function(n,i){var s=ki(n);n=parseFloat(n),s&&(n/=100);var o;if(isFinite(n)){var a=i[r]();s||n>0&&n<1?o=a[e]+i[t]*n:o=a[e]+n}var u=me();return u[e]=o||0,u}}function p4(e,t,r){return function(n,i){var s;n==="middle"?s=i[t]/2:n===r?s=i[t]:isFinite(n)?s=n>-1&&n<1?-i[t]*n:-n:ki(n)?s=i[t]*parseFloat(n)/100:s=0;var o=me();return o[e]=-(i[e]+s),o}}function Kj(e,t){var r="joint-shape",n=t&&t.resetOffset;return function(i,s,o){var a=Nt(o),u=a.data(r);if(!u||u.value!==i){var c=e(i);u={value:i,shape:c,shapeBBox:c.bbox()},a.data(r,u)}var f=u.shape.clone(),h=u.shapeBBox.clone(),v=h.origin(),y=s.origin();h.x=y.x,h.y=y.y;var m=s.maxRectScaleToFit(h,y),_=h.width===0||s.width===0?1:m.sx,x=h.height===0||s.height===0?1:m.sy;return f.scale(_,x,v),n&&f.translate(-v.x,-v.y),f}}function v4(e){function t(n){return new zt(We.normalizePathData(n))}var r=Kj(t,e);return function(n,i,s){var o=r(n,i,s);return{d:o.serialize()}}}function g4(e){var t=Kj(wn,e);return function(r,n,i){var s=t(r,n,i);return{points:s.serialize()}}}function Ep(e,t){var r=new me(1,0);return function(n){var i,s,o=this[e](n);return o?(s=t.rotate?o.vector().vectorAngle(r):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function m4(e){return function(r,n,i){const s=We(i);s.attr(e)!==r&&s.attr(e,r)}}function ml(e,t,r){return r.text!==void 0}function Zf(){return this.model.isLink()}function sE(e){var t={},r=e.stroke;typeof r=="string"&&(t.stroke=r,t.fill=r);var n=e.strokeOpacity;return n===void 0&&(n=e["stroke-opacity"]),n===void 0&&(n=e.opacity),n!==void 0&&(t["stroke-opacity"]=n,t["fill-opacity"]=n),t}function y4(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const hr={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:m4("href")},xlinkHref:{set:m4("xlink:href")},filter:{qualify:ri,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:ri,set:y4},stroke:{qualify:ri,set:y4},sourceMarker:{qualify:ri,set:function(e,t,r,n){return e=Xt(sE(n),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:ri,set:function(e,t,r,n){return e=Xt(sE(n),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:ri,set:function(e,t,r,n){return e=Xt(sE(n),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,r){return!r.textWrap||!ri(r.textWrap)},set:function(e,t,r,n){const i=Nt(r),s="joint-text",o=i.data(s),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:f,displayEmpty:h}=n;let v=n.textPath,y=n.x;co(y)&&(y=lo(y,t));let m=n["font-size"]||n.fontSize;co(m)&&(m=lo(m,t));const _=JSON.stringify([e,a,u,c,f,h,v,y,m]);if(o===void 0||o!==_){if(m&&r.setAttribute("font-size",m),Jr(v)){const x=v.selector;if(typeof x=="string"){const[S]=this.findBySelector(x);S instanceof SVGPathElement&&(v=Xt({"xlink:href":"#"+S.id},v))}}We(r).text(""+e,{lineHeight:a,annotations:u,textPath:v,x:y,textVerticalAnchor:c,eol:f,displayEmpty:h}),i.data(s,_)}}},textWrap:{qualify:ri,set:function(e,t,r,n){var i={},s=e.width||0;ki(s)?i.width=t.width*parseFloat(s)/100:co(s)?i.width=Number(lo(s,t)):e.width===null?i.width=1/0:s<=0?i.width=t.width+s:i.width=s;var o=e.height||0;ki(o)?i.height=t.height*parseFloat(o)/100:co(o)?i.height=Number(lo(o,t)):e.height===null||(o<=0?i.height=t.height+o:i.height=o);var a,u=e.text;if(u===void 0&&(u=n.text),u!==void 0){const c=e.breakText||Wj,f=n["font-size"]||n.fontSize;a=c(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":co(f)?lo(f,t):f,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else a="";hr.text.set.call(this,a,t,r,n)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,r){var n=Nt(r),i="joint-title",s=n.data(i);if(s===void 0||s!==e){if(n.data(i,e),r.tagName==="title"){r.textContent=e;return}var o=r.firstElementChild;if(o&&o.tagName==="title")o.textContent=e;else{var a=document.createElementNS(r.namespaceURI,"title");a.textContent=e,r.insertBefore(a,o)}}}},lineHeight:{qualify:ml},textVerticalAnchor:{qualify:ml},textPath:{qualify:ml},annotations:{qualify:ml},eol:{qualify:ml},displayEmpty:{qualify:ml},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:ri,set:function(e,t,r){Nt(r).css(e)}},html:{set:function(e,t,r){Nt(r).html(e+"")}},props:cpe,ref:{},refX:{position:Sp("x","width","origin")},refY:{position:Sp("y","height","origin")},refDx:{position:Sp("x","width","corner")},refDy:{position:Sp("y","height","corner")},refWidth:{set:Au("width","width")},refHeight:{set:Au("height","height")},refRx:{set:Au("rx","width")},refRy:{set:Au("ry","height")},refRInscribed:{set:function(e){var t=Au(e,"width"),r=Au(e,"height");return function(n,i){var s=i.height>i.width?t:r;return s(n,i)}}("r")},refRCircumscribed:{set:function(e,t){var r=ki(e);e=parseFloat(e),r&&(e/=100);var n=Math.sqrt(t.height*t.height+t.width*t.width),i;return isFinite(e)&&(r||e>=0&&e<=1?i=e*n:i=Math.max(e+n,0)),{r:i}}},refCx:{set:Au("cx","width")},refCy:{set:Au("cy","height")},xAlignment:{offset:p4("x","width","right")},yAlignment:{offset:p4("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:v4({resetOffset:!0})},refDKeepOffset:{set:v4({resetOffset:!1})},refPointsResetOffset:{set:g4({resetOffset:!0})},refPointsKeepOffset:{set:g4({resetOffset:!1})},connection:{qualify:Zf,set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let r;e<0?r=(this.getConnectionLength()+e)/2:r=e;const n=this.getConnection(),i=this.getConnectionSubdivisions(),s=n.divideAtLength(r,{segmentSubdivisions:i}),o=n.divideAtLength(-r,{segmentSubdivisions:i});s&&o&&(t=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Zf,set:Ep("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Zf,set:Ep("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Zf,set:Ep("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Zf,set:Ep("getTangentAtRatio",{rotate:!1})}};hr["xlink:href"]=hr.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{hr[e]={qualify:co,set:function(r,n){return{[e]:lo(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{hr[e]={qualify:co,set:function(r,n){return{[e]:Math.max(0,lo(r,n))}}}});hr.refR=hr.refRInscribed;hr.refD=hr.refDResetOffset;hr.refPoints=hr.refPointsResetOffset;hr.atConnectionLength=hr.atConnectionLengthKeepGradient;hr.atConnectionRatio=hr.atConnectionRatioKeepGradient;hr.fontSize=hr["font-size"];hr.strokeWidth=hr["stroke-width"];hr.refX2=hr.refX;hr.refY2=hr.refY;hr.refWidth2=hr.refWidth;hr.refHeight2=hr.refHeight;hr["ref-x"]=hr.refX;hr["ref-y"]=hr.refY;hr["ref-dy"]=hr.refDy;hr["ref-dx"]=hr.refDx;hr["ref-width"]=hr.refWidth;hr["ref-height"]=hr.refHeight;hr["x-alignment"]=hr.xAlignment;hr["y-alignment"]=hr.yAlignment;const Jj=hr,xa=ii.Model.extend({constructor:function(e,t){var r,n=e||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=Yde("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(r=ni(this,"defaults"))&&(n=ai({},r,n)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,r){throw new Error("Must define a translate() method.")},toJSON:function(){const t=ni(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};ao(r,function(s,o){const a=t[o];ao(s,function(u,c){Jr(u)&&!Array.isArray(u)?ao(u,function(f,h){(!a||!a[c]||!Tl(a[c][h],f))&&(n[o]=n[o]||{},(n[o][c]||(n[o][c]={}))[h]=f)}):(!a||!Tl(a[c],u))&&(n[o]=n[o]||{},n[o][c]=u)})});const i=oo(Pc(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return Jde()},processPorts:function(){var e=this.ports,t={};ao(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?t[s.port.id]=s.port:t[s.port]={id:s.port})});var r={};if(ao(e,function(s,o){t[o]||(r[o]=!0)}),this.graph&&!Za(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(s){r[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){r[s.get("source").port]&&s.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:r}=this;if(!t)return r&&r.remove(this,e),this;t.startBatch("remove");const n=this.getParentCell();n&&n.unembed(this,e);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const a=i[s];a&&a.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=qs(e||{},{foregroundEmbeds:!0});let r;e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const n=e.foregroundEmbeds?r:iE(r,u=>u.z());let s=t.maxZIndex()-r.length+1;const o=t.get("cells");let a=o.indexOf(n[0])!==o.length-r.length;a||(a=n.some(function(u,c){return u.z()!==s+c})),a&&(this.startBatch("to-front"),s=s+r.length,n.forEach(function(u,c){u.set("z",s+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=qs(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const i=e.foregroundEmbeds?n:iE(n,a=>a.z());let s=t.minZIndex();var r=t.get("cells");let o=r.indexOf(i[0])!==0;o||(o=i.some(function(a,u){return a.z()!==s+u})),o&&(this.startBatch("to-back"),s-=n.length,i.forEach(function(a,u){a.set("z",s+u,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const r=Array.isArray(e)?e:[e];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,t),this},unembed:function(e,t){const r=Array.isArray(e)?e:[e];return this._unembedCells(r,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(e,t){const r="embed";this.startBatch(r);const n=Xt([],this.get("embeds"));e.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,t)}),this.set("embeds",ld(n),t),this.stopBatch(r)},_unembedCells:function(e,t){const r="unembed";this.startBatch(r),e.forEach(n=>n.unset("parent",t)),this.set("embeds",f4(this.get("embeds"),...e.map(n=>n.id)),t),this.stopBatch(r)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Za(t))return[];let r=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(r=iE(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.shift();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});r.push(...i)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.pop();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});for(let s=i.length-1;s>=0;--s)r.push(i[s])}return t.shift(),t},isEmbeddedIn:function(e,t){var r=Fi(e)?e:e.id,n=this.parent();if(t=Xt({deep:!0},t),this.graph&&t.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return zr(Yj([this].concat(this.getEmbeddedCells({deep:!0}))));var t=ii.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,r){var n="/",i=Fi(e);if(i||Array.isArray(e))if(arguments.length>1){var s,o;i?(s=e,o=s.split("/")):(s=e.join(n),o=e.slice());var a=o[0],u=o.length;const T=r||{};T.propertyPath=s,T.propertyValue=t,T.propertyPathArray=o,"rewrite"in T||(T.rewrite=!1);for(var c={},f=c,h=a,v=1;v<u;v++){var y=o[v],m=Number.isFinite(i?Number(y):y);f=f[h]=m?[]:{},h=y}c=UE(c,o,t,"/");var _=ai({},this.attributes);T.rewrite&&h4(_,s,"/");var x=ai(_,c);return this.set(a,x[a],T)}else return Nh(this.attributes,e,n);const S=t||{};S.propertyPath=null,S.propertyValue=e,S.propertyPathArray=[],"rewrite"in S||(S.rewrite=!1);const P={};for(const T in e){const{changedValue:E}=ai({},{changedValue:this.attributes[T]},{changedValue:e[T]});P[T]=E}return this.set(P,S)},removeProp:function(e,t){t=t||{};var r=Array.isArray(e)?e:e.split("/"),n=r[0];if(n==="attrs"&&(t.dirty=!0),r.length===1)return this.unset(e,t);var i=r.slice(1),s=this.get(n);return s==null?this:(s=oo(s),h4(s,i,"/"),this.set(n,s,t))},attr:function(e,t,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(e)?n[0]=["attrs"].concat(e):Fi(e)?n[0]="attrs/"+e:n[0]={attrs:e},this.prop.apply(this,n))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:spe.linear,valueFunction:Xj.number};r=Xt(i,r);var s=0,o,a=(function(h){var v,y,m;s=s||h,h-=s,y=h/r.duration,y<1?this._transitionIds[e]=v=jE(a):(y=1,delete this._transitionIds[e]),m=o(r.timingFunction(y)),r.transitionId=v,this.prop(e,m,r),v||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:u}=this;let c;var f=h=>{u[e]&&(u[e]=f4(u[e],c),u[e].length===0&&delete u[e]),this.stopPendingTransitions(e,n),o=r.valueFunction(Nh(this.attributes,e,n),t),this._transitionIds[e]=jE(h),this.trigger("transition:start",this,e)};return c=setTimeout(f,r.delay,a),u[e]||(u[e]=[]),u[e].push(c),c},getTransitions:function(){return $E(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>Tl(i,s.split(t).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(o=>clearTimeout(o)),delete r[i]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>Tl(i,s.split(t).slice(0,i.length)))}n.forEach(i=>{const s=r[i];HE(s),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,Xt({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,Xt({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var r in e)!e.hasOwnProperty(r)||!this.hasChanged(r)||(t|=e[r]);return t},angle:function(){return 0},position:function(){return new me(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new me},getBBox:function(){return new yt(0,0,0,0)},getPointRotatedAroundCenter(e,t,r){const n=new me(t,r);return e&&n.rotate(this.getBBox().center(),e),n},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,r=Jj;return t&&t[e]||r[e]},define:function(e,t,r,n){r=Xt({defaults:CT({type:e},t,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint<"u"&&Qa(joint,"shapes")&&UE(joint.shapes,e,i,"."),i}}),lpe=function(e,t,r){if(Fi(r)){if(!WE[r])throw new Error('Unknown wrapper: "'+r+'"');r=WE[r]}if(!_n(r))throw new Error("Wrapper must be a function.");zr(t).forEach(function(n){e[n]=r(e[n])})},WE={cells:function(e){return function(){var t=Array.from(arguments),r=t.length,n=r>0&&t[0]||[],i=r>1&&t[r-1]||{};return Array.isArray(n)||(i instanceof xa?n=t:n instanceof xa&&(t.length>1&&t.pop(),n=t)),i instanceof xa&&(i={}),e.call(this,n,i)}}},Wn={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Zj(e,t){const r=new yt(e);switch(t){case void 0:throw new Error("Position required");case Wn.LEFT:case"leftMiddle":return r.leftMiddle();case Wn.RIGHT:case"rightMiddle":return r.rightMiddle();case Wn.TOP:case"topMiddle":return r.topMiddle();case Wn.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case Wn.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case Wn.TOP_RIGHT:case"topRight":return r.topRight();case Wn.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case Wn.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case Wn.CENTER:return r.center();default:throw new Error(`Unknown position: ${t}`)}}function Qj(e,t,r){var n=e.toJSON();return n.angle=t||0,qs({},r,n)}function fd(e,t,r,n){return e.map(function(i,s,o){var a=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),Qj(a.round(),0,OT(n,i))},bc(t,r))}function e9(e,t,r,n){var i=t.center(),s=t.width/t.height,o=t.topMiddle(),a=rs.fromRect(t);return e.map(function(u,c,f){var h=r+n(c,f.length),v=o.clone().rotate(i,-h).scale(s,1,i),y=u.compensateRotation?-a.tangentTheta(v):0;return(u.dx||u.dy)&&v.offset(u.dx||0,u.dy||0),u.dr&&v.move(i,u.dr),Qj(v.round(),y,OT(t,u))})}function OT(e,t){let{x:r,y:n,angle:i}=t;return ki(r)?r=parseFloat(r)/100*e.width:co(r)&&(r=Number(lo(r,e))),ki(n)?n=parseFloat(n)/100*e.height:co(n)&&(n=Number(lo(n,e))),{x:r,y:n,angle:i}}function XE(e,t){const{x:r,y:n}=OT(e,t);return new me(r||0,n||0)}const fpe=function(e,t){return e.map(r=>{const n=XE(t,r).round().toJSON();return n.angle=r.angle||0,n})},hpe=function(e,t,r){return r.fn(e,t,r)},dpe=function(e,t,r){var n=XE(t,r.start||t.origin()),i=XE(t,r.end||t.corner());return fd(e,n,i,t)},ppe=function(e,t,r){return fd(e,t.origin(),t.bottomLeft(),t)},vpe=function(e,t,r){return fd(e,t.topRight(),t.corner(),t)},gpe=function(e,t,r){return fd(e,t.origin(),t.topRight(),t)},mpe=function(e,t,r){return fd(e,t.bottomLeft(),t.corner(),t)},ype=function(e,t,r){var n=r.startAngle||0,i=r.step||360/e.length;return e9(e,t,n,function(s){return s*i})},_pe=function(e,t,r){var n=r.startAngle||0,i=r.step||20;return e9(e,t,n,function(s,o){return(s+.5-o/2)*i})},bpe=Object.freeze(Object.defineProperty({__proto__:null,absolute:fpe,bottom:mpe,ellipse:_pe,ellipseSpread:ype,fn:hpe,left:ppe,line:dpe,right:vpe,top:gpe},Symbol.toStringTag,{value:"Module"}));function Qu(e,t){return CT({},e,t,{x:0,y:0,angle:0,attrs:{}})}function t9(e){var t=e.center(),r=t.theta(e.origin()),n=t.theta(e.bottomLeft()),i=t.theta(e.corner()),s=t.theta(e.topRight());return[r,s,i,n]}function r9(e,t,r,n){n=qs({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,v,y,m]=t9(t);i<v||i>y?(a=".3em",s=c,o=0,u="start"):i<h?(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0")):i<m?(a=".3em",s=-c,o=0,u="end"):(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em"));var _=Math.round;return Qu(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function n9(e,t,r,n){n=qs({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,v,y,m]=t9(t);i<v||i>y?(a=".3em",s=-c,o=0,u="end"):i<h?(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em")):i<m?(a=".3em",s=c,o=0,u="start"):(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0"));var _=Math.round;return Qu(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function i9(e,t,r){r=qs({},r,{offset:20});var n=Zp(0,0),i=-e.theta(n),s=i,o=e.clone().move(n,r.offset).difference(e).round(),a=".3em",u;(i+90)%180===0?(u=t?"end":"middle",!t&&i===-270&&(a="0em")):i>-270&&i<-90?(u="start",s=i-180):u="end";var c=Math.round;return Qu(r,{x:c(o.x),y:c(o.y),angle:t?s:0,attrs:{labelText:{y:a,textAnchor:u}}})}const wpe=function(e,t,r){return Qu(r)},xpe=function(e,t,r){return Qu(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},Spe=function(e,t,r){return Qu(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},Epe=function(e,t,r){return Qu(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Ape=function(e,t,r){return Qu(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},Tpe=function(e,t,r){return r9(e,t,!0,r)},Ppe=function(e,t,r){return r9(e,t,!1,r)},Cpe=function(e,t,r){return n9(e,t,!0,r)},Ope=function(e,t,r){return n9(e,t,!1,r)},Ipe=function(e,t,r){return i9(e.difference(t.center()),!1,r)},Rpe=function(e,t,r){return i9(e.difference(t.center()),!0,r)},kpe=Object.freeze(Object.defineProperty({__proto__:null,bottom:Ape,inside:Ope,insideOriented:Cpe,left:xpe,manual:wpe,outside:Ppe,outsideOriented:Tpe,radial:Ipe,radialOriented:Rpe,right:Spe,top:Epe},Symbol.toStringTag,{value:"Module"})),vf=xa.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,r){if(e===void 0)return ha(this.get("source"));var n,i,s=e instanceof xa;if(s)return n=ha(t)||{},n.id=e.id,i=r,this.set("source",n,i);var o=!ri(e);return o?(n=ha(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("source",n,i)):(n=e,i=t,this.set("source",n,i))},target:function(e,t,r){if(e===void 0)return ha(this.get("target"));var n,i,s=e instanceof xa;if(s)return n=ha(t)||{},n.id=e.id,i=r,this.set("target",n,i);var o=!ri(e);return o?(n=ha(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("target",n,i)):(n=e,i=t,this.set("target",n,i))},router:function(e,t,r){if(e===void 0){var n=this.get("router");return n?typeof n=="object"?ha(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("router",s,o)},connector:function(e,t,r){if(e===void 0){var n=this.get("connector");return n?typeof n=="object"?ha(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("connector",s,o)},label:function(e,t,r){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,r)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,r){if(!t)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1),n.splice(e,0,t),this.labels(n,r)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var r=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.labels(r,t)},vertex:function(e,t,r){var n=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1)return this.prop(["vertices",e]);var i=this._normalizeVertex(t);return this.prop(["vertices",e],i,r)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var r=[],n=0;n<e.length;n++){var i=e[n],s=this._normalizeVertex(i);r.push(s)}return this.set("vertices",r,t)},insertVertex:function(e,t,r){if(!t)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1);var s=this._normalizeVertex(t);return n.splice(e,0,s),this.vertices(n,r)},removeVertex:function(e,t){var r=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.vertices(r,t)},_normalizeVertex:function(e){var t=!ri(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(n){return{x:(n.x||0)+e,y:(n.y||0)+t}},r)},scale:function(e,t,r,n){return this.applyToPoints(function(i){return me(i).scale(e,t,r).toJSON()},n)},applyToPoints:function(e,t){if(!_n(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=e(n)),i.id||(r.target=e(i));var s=this.vertices();return s.length>0&&(r.vertices=s.map(e)),this.set(r,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new me(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new me(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(me),this.getTargetPoint()];return new wn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?t=n:n.isEmbeddedIn(r)?t=r:t=this.graph.getCommonAncestor(r,n)),i&&(!t||t.id!==i.id)&&i.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:r}=this.attributes,n=t.id,i=r.id;if(!n||!i)return!1;var s=n===i;if(!s&&e.deep&&this.graph){var o=this.getSourceCell(),a=this.getTargetCell();s=o.isEmbeddedIn(a)||a.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:e,attributes:t}=this;var r=t.source;return r&&r.id&&e&&e.getCell(r.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var r=t.target;return r&&r.id&&e&&e.getCell(r.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Fi(e)||gs(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var r=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&r}});var s9=function(e){var t=oo(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=bpe,this.portLabelLayoutNamespace=kpe,this._init(t)};s9.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var r=this.getGroup(e),n=this.getPortsByGroup(e),i=r.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var a=i.args||{},u=n.map(function(h){return h&&h.position&&h.position.args}),c=o[s](u,t,a),f={ports:n,result:[]};return zr(c).reduce((function(h,v,y){var m=h.ports[y];return h.result.push({portId:m.id,portTransformation:v,labelTransformation:this._getPortLabelLayout(m,me(v),t),portAttrs:m.attrs,portSize:m.size,labelSize:m.label.size}),h}).bind(this),f),f.result},_getPortLabelLayout:function(e,t,r){var n=this.portLabelLayoutNamespace,i=e.label.position.name||"left";return n[i]?n[i](t,r,e.label.position.args):null},_init:function(e){if(Jr(e.groups))for(var t=Object.keys(e.groups),r=0,n=t.length;r<n;r++){var i=t[r];this.groups[i]=this._evaluateGroup(e.groups[i])}for(var s=zr(e.items),o=0,a=s.length;o<a;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(e){return ai(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=Xt({},e),r=this.getGroup(e.group);return t.markup=t.markup||r.markup,t.attrs=ai({},r.attrs,t.attrs),t.position=this._createPositionNode(r,t),t.label=ai({},r.label,this._getLabel(t)),t.z=this._getZIndex(r,t),t.size=Xt({},r.size,t.size),t},_getZIndex:function(e,t){return gs(t.z)?t.z:gs(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return ai({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r={},n;_n(e)?(n="fn",r.fn=e):Fi(e)?n=e:e===void 0?n=t?"left":null:Array.isArray(e)?(n="absolute",r.x=e[0],r.y=e[1]):Jr(e)&&(n=e.name,Xt(r,e.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(e,t){var r=e.label||{},n=r;return n.position=this._getPosition(r.position,t),n}};const Mpe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};zr(e.items).forEach(function(a){t[a.id]=!0});var r=this.previous("ports")||{},n={};zr(r.items).forEach(function(a){t[a.id]||(n[a.id]=!0)});var i=this.graph;if(i&&!Za(n)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(a){n[a.get("target").port]&&a.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(a){n[a.get("source").port]&&a.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return oo(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=zr(this.prop(["ports","items"])).filter(r=>r.group===e);return oo(t)},getPort:function(e){return oo(zr(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,yt(this.size()));return t.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(e){var t=Jr(e)?e.id:e;return this._isValidPortId(t)?zr(this.prop("ports/items")).findIndex(function(r){return r.id===t}):-1},addPort:function(e,t){if(!Jr(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var r=Xt([],this.prop("ports/items"));return r.push(e),this.prop("ports/items",r,t),this},insertPort:function(e,t,r){const n=typeof e=="number"?e:this.getPortIndex(e);if(!Jr(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const i=Xt([],this.prop("ports/items"));return i.splice(n,0,t),this.prop("ports/items",i,r),this},portProp:function(e,t,r,n){var i=this.getPortIndex(e);if(i===-1)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?s[0]=["ports","items",i].concat(t):Fi(t)?s[0]=["ports/items/",i,"/",t].join(""):(s=["ports/items/"+i],ri(t)&&(s.push(t),s.push(r))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var r=zr(e.items);return r.forEach(function(n){typeof n!="object"&&t.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),ld(r,"id").length!==r.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!Jr(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",Xt([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const r=t||{},n=this.getPortIndex(e);if(n!==-1){const i=Xt([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let r,n;if(Array.isArray(e)){if(r=t||{},e.length===0)return this.this;n=Xt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(o){const a=Jr(o)?o.id:o;return s.id===a})})}else r=e||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new s9(this.get("ports"));var r=this._portSettingsData.getPorts();if(t){var n=r.filter(function(s){if(!t.find(function(o){return o.id===s.id}))return s}),i=t.filter(function(s){if(!r.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},Lpe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),r=0,n=t.node.childNodes.length;r<n;r++)e.push(t.node.childNodes[r]);var i=$de(this.model._portSettingsData.getPorts(),"z"),s="auto";zr(i[s]).forEach(function(f){var h=this._getPortElement(f);t.append(h),e.push(h)},this);for(var o=Object.keys(i),a=0;a<o.length;a++){var u=o[a];if(u!==s){var c=parseInt(u,10);this._appendPorts(i[u],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,r){var n=this._getContainerElement(),i=zr(e).map(this._getPortElement,this);r[t]||t<0?We(r[Math.max(t,0)]).before(i):n.append(i)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const r=this._portElementsCache[e];if(!r)return null;if(!t)return r.portContentElement.node;const n=r.portElement.node,i=r.portSelectors,[s=null]=this.findBySelector(t,n,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){Do(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,r,n,i;var s=We(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(e);if(Array.isArray(o)){var a=this.parseDOMJSON(o,s.node),u=a.fragment;u.childNodes.length>1?t=We("g").append(u):t=We(u.firstChild),i=a.selectors}else t=We(o),Array.isArray(t)&&(t=We("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:_,selectors:x}=this.parseDOMJSON(c,s.node),S=_.childNodes.length;S>0&&(n=x,r=S===1?We(_.firstChild):We("g").append(_))}else r=We(c),Array.isArray(r)&&(r=We("g").append(r));var f;if(i&&n){for(var h in n)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");f=Xt({},i,n)}else f=i||n||{};const v="portRoot",y="labelRoot",m="labelText";if(v in f||(f[v]=t.node),r){const _=r.node;if(y in f||(f[y]=_),!(m in f)){const x=r.tagName()==="TEXT"?_:Array.from(_.querySelectorAll("text"));f[m]=x,n||(n={}),n[m]=x}}return s.append(t.addClass("joint-port-body")),r&&s.append(r.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:r,portSelectors:f,portLabelSelectors:n,portContentElement:t,portContentSelectors:i},s},_updatePortGroup:function(e){for(var t=yt(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(e,t),n=0,i=r.length;n<i;n++){var s=r[n],o=s.portId,a=this._portElementsCache[o]||{},u=s.portTransformation,c=s.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new yt(s.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,s.portAttrs,{rootBBox:new yt(s.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(e,t,r){var n=We.createSVGMatrix().rotate(r||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(n,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Gi=xa.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),xa.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,r){const n=gs(t);r=(n?r:e)||{};const{parentRelative:i,deep:s,restrictedArea:o}=r;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(n){if(a&&(e+=a.x,t+=a.y),s||o){const{x:u,y:c}=this.get("position");this.translate(e-u,t-c,r)}else this.set("position",{x:e,y:t},r);return this}else{const u=me(this.get("position"));return i?u.difference(a):u}},translate:function(e,t,r){if(e=e||0,t=t||0,e===0&&t===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,n.x+e,n.y+t,r);e=s.x-n.x,t=s.y-n.y}else{var o=this.getBBox({deep:!0}),a=n.x-o.x,u=n.y-o.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-o.width,n.x+e)),f=Math.max(i.y+u,Math.min(i.y+i.height+u-o.height,n.y+t));e=c-n.x,t=f-n.y}var h={x:n.x+e,y:n.y+t};return r.tx=e,r.ty=t,r.transition?(Jr(r.transition)||(r.transition={}),this.transition("position",h,Xt({},r.transition,{valueFunction:Xj.object})),Do(this.getEmbeddedCells(),"translate",e,t,r)):(this.startBatch("translate",r),this.set("position",h,r),Do(this.getEmbeddedCells(),"translate",e,t,r),this.stopBatch("translate",r)),this},size:function(e,t,r){var n=this.get("size");return e===void 0?{width:n.width,height:n.height}:(Jr(e)&&(r=t,t=gs(e.height)?e.height:n.height,e=gs(e.width)?e.width:n.width),this.resize(e,t,r))},resize:function(e,t,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":t=n.height;break;case"top":case"bottom":e=n.width;break}var i=$o(this.get("angle")||0),s=this.getBBox(),o;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=me(u).rotate(s.center(),-i),f=Math.sqrt(e*e+t*t)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?t/e:e/t),h-=bs(i);var v=me.fromPolar(f,h,c);o=me(v).offset(e/-2,t/-2)}else switch(o=s.topLeft(),r.direction){case"top":case"top-right":o.offset(0,s.height-t);break;case"left":case"bottom-left":o.offset(s.width-e,0);break;case"top-left":o.offset(s.width-e,s.height-t);break}this.set("size",{width:e,height:t},r),this.position(o.x,o.y,r)}else this.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this},scale:function(e,t,r,n){var i=this.getBBox().scale(e,t,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&Do(r,"fitToChildren",e),this._fitToElements(Object.assign({elements:r},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const r=this.getParentCell();if(!r||!r.isElement())return this;const n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",e),r._fitToElements(Object.assign({elements:n},e)),e.deep&&r.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:r,shrinkOnly:n}=e;if(r&&n)return;let{x:i,y:s,width:o,height:a}=t;const{left:u,right:c,top:f,bottom:h}=Cc(e.padding);i-=u,s-=f,o+=u+c,a+=h+f;let v=new yt(i,s,o,a);if(r)v=this.getBBox().union(v);else if(n){const y=this.getBBox().intersect(v);if(!y)return;v=y}this.set({position:{x:v.x,y:v.y},size:{width:v.width,height:v.height}},e)},rotate:function(e,t,r,n){if(r){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(r,this.get("angle")-e);var a=i.x-s.width/2-o.x,u=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:e,absolute:t,origin:r}),this.position(o.x+a,o.y+u,n),this.rotate(e,t,null,n),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,n);return this},angle:function(){return $o(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:r}=this,{deep:n,rotate:i}=e;if(n&&t){const h=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return h.push(this),t.getCellsBBox(h,e)}const{angle:s=0,position:{x:o,y:a},size:{width:u,height:c}}=r,f=new yt(o,a,u,c);return i&&f.rotateAroundCenter(s),f},getPointFromConnectedLink:function(e,t){var r=this.getBBox(),n=r.center(),i=e.get(t);if(!i)return n;var s=i.port;if(!s||!this.hasPort(s))return n;var o=this.portProp(s,["group"]),a=this.getPortsPositions(o),u=new me(a[s]).offset(r.origin()),c=this.angle();return c&&u.rotate(n,-c),u}});Xt(Gi.prototype,Mpe);const Npe=ii.Collection.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Qa(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var r=t.collection,n=r.cellNamespace,i=e.type==="link"?vf:Nh(n,e.type,".")||Gi,s=new i(e,t);return t.dry||(s.graph=r.graph),s},comparator:function(e){return e.get("z")||0}}),Fo=ii.Model.extend({initialize:function(e,t){t=t||{};var r=new Npe([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});ii.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:r}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:r}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],r.id&&this._in[r.id]&&this._in[r.id][e.id]&&delete this._in[r.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var r=e.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var r=e.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=ii.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,r){var n;return typeof e=="object"?(n=e,r=t):(n={})[e]=t,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=Pc(n,"cells")),ii.Model.prototype.set.call(this,n,r)},clear:function(e){e=Xt({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var r=t.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(e);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var r;if(e instanceof ii.Model?(r=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):r=e,!Fi(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof ii.Model?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=Ude(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(r){this.addCell(r,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var r=zr(e).map(function(n){return this._prepareCell(n,t)},this);return this.get("cells").reset(r,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),Do(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(e,r):this.removeLinks(e,r)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var r=t.indirect,n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=[],o={};i&&a(this,e),n&&u(this,e);function a(h,v){if(ao(h.getOutboundEdges(v.id),(function(m,_){if(!o[_]){var x=h.getCell(_);s.push(x),o[_]=!0,r&&(n&&u(h,x),i&&a(h,x))}}).bind(h)),r&&v.isLink()){var y=v.getTargetCell();y&&y.isLink()&&(o[y.id]||(s.push(y),a(h,y)))}}function u(h,v){if(ao(h.getInboundEdges(v.id),(function(m,_){if(!o[_]){var x=h.getCell(_);s.push(x),o[_]=!0,r&&(n&&u(h,x),i&&a(h,x))}}).bind(h)),r&&v.isLink()){var y=v.getSourceCell();y&&y.isLink()&&(o[y.id]||(s.push(y),u(h,y)))}}if(t.deep){var c=e.getEmbeddedCells({deep:!0}),f={};c.forEach(function(h){h.isElement()&&(f[h.id]=!0)}),c.forEach(function(h){h.isLink()||(i&&ao(this.getOutboundEdges(h.id),(function(v,y){if(!o[y]){var m=this.getCell(y),{source:_,target:x}=m.attributes,S=_.id,P=x.id;if(!t.includeEnclosed&&S&&f[S]&&P&&f[P])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)),n&&ao(this.getInboundEdges(h.id),(function(v,y){if(!o[y]){var m=this.getCell(y),{source:_,target:x}=m.attributes,S=_.id,P=x.id;if(!t.includeEnclosed&&S&&f[S]&&P&&f[P])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)))},this)}return s},getNeighbors:function(e,t){t||(t={});var r=t.inbound,n=t.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(e,t).reduce((function(a,u){var{source:c,target:f}=u.attributes,h=u.hasLoop(t);if(r&&Qa(c,"id")&&!a[c.id]){var v=this.getCell(c.id);v.isElement()&&(h||v&&v!==e&&(!t.deep||!v.isEmbeddedIn(e)))&&(a[c.id]=v)}if(n&&Qa(f,"id")&&!a[f.id]){var y=this.getCell(f.id);y.isElement()&&(h||y&&y!==e&&(!t.deep||!y.isEmbeddedIn(e)))&&(a[f.id]=y)}return a}).bind(this),{});if(e.isLink()){if(r){var s=e.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(n){var o=e.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return zr(i)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);e=e.sort(function(r,n){return r.length-n.length});var t=zr(e.shift()).find(function(r){return e.every(function(n){return n.includes(r)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},Xt({},t,{outbound:!0})),r},cloneCells:Yj,cloneSubgraph:function(e,t){var r=this.getSubgraph(e,t);return this.cloneCells(r)},getSubgraph:function(e,t){t=t||{};var r=[],n={},i=[],s=[];return zr(e).forEach(function(o){if(n[o.id]||(r.push(o),n[o.id]=o,o.isLink()?s.push(o):i.push(o)),t.deep){var a=o.getEmbeddedCells({deep:!0});a.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?s.push(u):i.push(u))})}}),s.forEach(function(o){var{source:a,target:u}=o.attributes;if(a.id&&!n[a.id]){var c=this.getCell(a.id);r.push(c),n[c.id]=c,i.push(c)}if(u.id&&!n[u.id]){var f=this.getCell(u.id);r.push(this.getCell(u.id)),n[f.id]=f,i.push(f)}},this),i.forEach(function(o){var a=this.getConnectedLinks(o,t);a.forEach(function(u){var{source:c,target:f}=u.attributes;!n[u.id]&&c.id&&n[c.id]&&f.id&&n[f.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},Xt({},t,{inbound:!0})),r},search:function(e,t,r){r=r||{},r.breadthFirst?this.bfs(e,t,r):this.dfs(e,t,r)},bfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){var o=s.shift();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r);for(let u=0,c=a.length;u<c;u++){const f=a[u];i[f.id]=i[o.id]+1,s.push(f)}}},dfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){const o=s.pop();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r),u=s.length;for(let c=0,f=a.length;c<f;c++){const h=a[c];i[h.id]=i[o.id]+1,s.splice(u,0,h)}}},getSources:function(){var e=[];return ao(this._nodes,(function(t,r){(!this._in[r]||Za(this._in[r]))&&e.push(this.getCell(r))}).bind(this)),e},getSinks:function(){var e=[];return ao(this._nodes,(function(t,r){(!this._out[r]||Za(this._out[r]))&&e.push(this.getCell(r))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Za(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Za(this._out[e.id])},isSuccessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(e,t,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=!1;return this.getConnectedLinks(e,r).forEach(function(o){var{source:a,target:u}=o.attributes;if(n&&Qa(a,"id")&&a.id===t.id||i&&Qa(u,"id")&&u.id===t.id)return s=!0,!1}),s},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(r){r.set(r.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){Do(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const r=new yt(e),{strict:n=!1}=t,i=n?"containsRect":"intersect";return this.getElements().filter(s=>r[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:r="bbox"}=t,n=e.getBBox().rotateAroundCenter(e.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint(Zj(n,r))).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:r=!0}=t;return zr(e).reduce(function(n,i){const s=i.getBBox({rotate:r});return s?n?n.union(s):s:n},null)},translate:function(e,t,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return Do(n,"translate",e,t,r),this},resize:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)},resizeCells:function(e,t,r,n){var i=this.getCellsBBox(r);if(i){var s=Math.max(e/i.width,0),o=Math.max(t/i.height,0);Do(r,"scale",s,o,i.origin(),n)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Xt({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Xt({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let r;return arguments.length===0?r=Object.keys(t):Array.isArray(e)?r=e:r=[e],r.some(n=>t[n]>0)}},{validations:{multiLinks:function(e,t){var{source:r,target:n}=t.attributes;if(r.id&&n.id){var i=t.getSourceCell();if(i){var s=e.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(a){var{source:u,target:c}=a.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&c&&c.id===n.id&&(!c.port||c.port===n.port)});if(o.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:r,target:n}=t.attributes;return r.id&&n.id}}});lpe(Fo.prototype,["resetCells","addCells","removeCells"],WE.cells);const vc={},nu=ii.View.extend({options:{},theme:null,themeClassNamePrefix:Mo("theme-"),requireSetThemeOverride:!1,defaultTheme:Du.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Xt({},this.options,e),ii.View.call(this,e)},initialize:function(){vc[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=ni(this,"children")),e){var t=this.svgElement,r=We.namespace[t?"svg":"xhtml"],n=sv(e,r);(t?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(e,t){for(var r=t;r&&r.nodeType===1;){var n=r.getAttribute(e);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(ni(this,"el"));else{var e=ni(this,"tagName"),t=Xt({},ni(this,"attributes")),r=Xt({},ni(this,"style"));this.id&&(t.id=ni(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(We.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof ii.$?e:ii.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=We(this.el))},_ensureElClassName:function(){var e=ni(this,"className");if(e){var t=Mo(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),vc[this.cid]=null,ii.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,r){if(!t)return this;r||(r={});var n=this.getEventNamespace();for(var i in t){var s=t[i];typeof s!="function"&&(s=this[s]),s&&Nt(e).on(i+n,r,s.bind(this))}return this},undelegateElementEvents:function(e){return Nt(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=ni(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var r=e.data,n="__"+this.cid+"__";return t===void 0?r?r[n]||{}:{}:(r||(r=e.data={}),r[n]||(r[n]={}),Xt(r[n],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&Xt({},e[0])||{},r=e[1]&&Xt({},e[1])||{},n=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},t.render.__render__=n,ii.View.extend.call(this,t,r)}}),_4="dbltap";if(Nt.event&&!(_4 in Nt.event.special)){const e=Du.doubleTapInterval,t=30;Nt.event.special[_4]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){const{handleObj:i,target:s}=r,o=Nt.data(s),a=new Date().getTime(),u="lastTouch"in o?a-o.lastTouch:0;u<e&&u>t?(o.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):o.lastTouch=a}}}const uo={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},qpe=nu.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Mo(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:r}=this;e=+e,e||(e=0);let n=r[e];if(n)return n;n=r[e]=document.createComment("z-index:"+(e+1));let i=-1/0;for(let s in r)s=+s,s<e&&s>i&&(i=s,e-1);if(i!==-1/0){const s=r[i];t.insertBefore(n,s.nextSibling)}else t.insertBefore(n,t.firstChild);return n},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let r in t)e.removeChild(t[r]);this.pivotNodes={}}});function Qf(e){return e?Array.isArray(e)?e:[e]:[]}const Lo=nu.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:r}=e;this.cellView=e,this.nodeSelector=t,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let r;if(typeof t=="string")[r]=e.findBySelector(t);else if(ri(t)){const n=e.model.isLink(),{label:i=null,port:s,selector:o}=t;n&&i!==null?r=e.findLabelNode(i,o):!n&&s?r=e.findPortNode(s,o):[r]=e.findBySelector(o)}else t&&(r=We.toNode(t),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(e,t){const{options:r}=this,{layer:n}=r,{rotatableNode:i}=e,s=e.getNodeMatrix(t);return i?n?i.contains(t)?s:e.getRootRotateMatrix().inverse().multiply(s):e.getNodeRotateMatrix(t).multiply(s):s},mount(){const{MOUNTABLE:e,cellView:t,el:r,options:n,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:a}=this;if(!e||i)return;if(o){this.update(t,a),this.transform();return}const{vel:u,paper:c}=t,{layer:f}=n;if(f){let h;s?(h=s,this.detachedTransformGroup=null):h=We("g").addClass("highlight-transform").append(r),this.transformGroup=h,c.getLayerView(f).insertSortedNode(h.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:r}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):r.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:r}=this;if(!e||t.model.isLink()||r)return;const n=t.getRootTranslateMatrix(),i=t.getRootRotateMatrix(),s=n.multiply(i);e.attr("transform",We.matrixToTransformString(s))},update(){const{node:e,cellView:t,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;const s=this.node=this.findNode(t,r);e&&this.unhighlight(t,e),s?(this.highlight(t,s),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:e,cellView:t,id:r,constructor:n}=this;e&&this.unhighlight(t,e),this.unmount(),n._removeRef(t,r)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=ni(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:r}=e;ni(this,"UPDATE_ATTRIBUTES").some(i=>t.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,r){const n=this.uniqueId(t,r);this.add(e,t,n,r)},unhighlight:function(e,t,r){const n=this.uniqueId(t,r);this.remove(e,n)},get(e,t=null){const{cid:r}=e,{_views:n}=this,i=n[r];if(t===null){const s=[];if(!i)return s;for(let o in i){const a=i[o];a instanceof this&&s.push(a)}return s}else{if(!i)return null;if(t in i){const s=i[t];if(s instanceof this)return s}return null}},add(e,t,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");const i=Lo.get(e,r);i&&i.remove();const s=new this(n);return s.id=r,this._addRef(e,r,s),s.requestUpdate(e,t),s.listenToUpdateAttributes(e),s},_addRef(e,t,r){const{cid:n}=e,{_views:i}=this;let s=i[n];s||(s=i[n]={}),s[t]=r},_removeRef(e,t){const{cid:r}=e,{_views:n}=this,i=n[r];if(i){t&&delete i[t];for(let s in i)return;delete n[r]}},remove(e,t=null){Qf(this.get(e,t)).forEach(r=>{r.remove()})},removeAll(e,t=null){const{_views:r}=this;for(let n in r)for(let i in r[n]){const s=r[n][i];s.cellView.paper===e&&s instanceof this&&(t===null||i===t)&&s.remove()}},update(e,t=null,r=!1){Qf(this.get(e,t)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(e,t=null){Qf(this.get(e,t)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(e,t=null){Qf(this.get(e,t)).forEach(r=>r.unmount())},mount(e,t=null){Qf(this.get(e,t)).forEach(r=>r.mount())},uniqueId(e,t=""){return We.ensureId(e)+JSON.stringify(t)}}),yl={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Dpe={TOOLS:"TOOLS"},Tr=nu.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(r,n,i){e.push("type-"+i.slice(0,n+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},r=0,n,i,s,o=ni(this,"presentationAttributes");for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){s=u[n];var c=e[s];c||(c=e[s]=1<<r++),t[a]|=c}}var f=ni(this,"initFlag");for(Array.isArray(f)||(f=[f]),n=0,i=f.length;n<i;n++)s=f[n],e[s]||(e[s]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var r=0;if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)r|=t[e[n]];else r|=t[e];return r},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||Pl(this),nu.call(this,e)},initialize:function(){this.setFlags(),nu.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var r=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!r||(t.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(r,t))},requestUpdate:function(e,t){const{paper:r}=this;r&&e>0&&r.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var r=sv(e),n=r.selectors,i=r.groupSelectors;for(var s in i){if(n[s])throw new Error("dia.CellView: ambiguous group selector");n[s]=i[s]}if(t){var o=this.selector;if(n[o])throw new Error("dia.CellView: ambiguous root selector.");n[o]=t}return{fragment:r.fragment,selectors:n}},can:function(e){var t=_n(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Jr(t)&&t[e]!==!1||Fde(t)&&t!==!1},findBySelector:function(e,t,r){if(t||(t=this.el),r||(r=this.selectors),!e||e===".")return[t];if(r){var n=r[e];if(n)return Array.isArray(n)?n:[n]}return Nt(t).find(e).toArray()},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var r=this.model;t=r.getBBox().bbox(r.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),n=this.getNodeMatrix(e);return We.transformRect(t,r.multiply(n))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():We.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),r=this.getNodeMatrix(e),n=this.getRootTranslateMatrix();return We.transformRect(t,n.multiply(r))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),r=We.createSVGMatrix().translate(t.x,t.y);return r},getRootRotateMatrix:function(){var e=We.createSVGMatrix(),t=this.model,r=t.angle();if(r){var n=t.getBBox(),i=n.width/2,s=n.height/2;e=e.translate(i,s).rotate(r).translate(-i,-s)}return e},_notifyHighlight:function(e,t,r={}){const{el:n}=this;let i;if(typeof t=="string"?[i=n]=this.findBySelector(t):[i=n]=this.$(t),r.partial=i!==n,r.type===void 0){let s;switch(!0){case r.embedding:s=yl.EMBEDDING;break;case r.connecting:s=yl.CONNECTING;break;case r.magnetAvailability:s=yl.MAGNET_AVAILABILITY;break;case r.elementAvailability:s=yl.ELEMENT_AVAILABILITY;break;default:s=yl.DEFAULT;break}r.type=s}return this.notify(e,i,r),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let r=this.$(e)[0];r||(r=t);do{const n=r.getAttribute("magnet"),i=r===t;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const[n]=this.findBySelector(r);if(n)return n}return e},getSelector:function(e,t){var r;if(e===this.el)return typeof t=="string"&&(r="> "+t),r;if(e){var n=We(e).index()+1;r=e.tagName+":nth-child("+n+")",t&&(r+=" > "+t),r=this.getSelector(e.parentNode,r)}return r},addLinkFromMagnet:function(e,t,r){var n=this.paper,i=n.model,s=n.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,t,r,s,"source"),target:{x:t,y:r}}).addTo(i,{async:!1,ui:!0}),s.findView(n)},getLinkEnd:function(e,...t){var r=this.model,n=r.id,i=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),o={id:n};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!r.hasPort(i)&&!s&&(o.selector=this.getSelector(e))):s==null&&this.el!==e&&(o.selector=this.getSelector(e)),this.customizeLinkEnd(o,e,...t)},customizeLinkEnd:function(e,t,r,n,i,s){const{paper:o}=this,{connectionStrategy:a}=o.options;if(typeof a=="function"){var u=a.call(o,e,this,t,new me(r,n),i,s,o);if(u)return u}return e},getMagnetFromLinkEnd:function(e){var t=this.el,r=e.port,n=e.magnet,i=this.model,s;return r!=null&&i.isElement()&&i.hasPort(r)?s=this.findPortNode(r,n)||t:(n||(n=e.selector),!n&&r!=null&&(n='[port="'+r+'"]'),s=this.findBySelector(n,t,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,t,r,n){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(t,r,n);i.notifyPointerdown(e,r,n),i.eventData(e,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:i})},dragLink:function(e,t,r){var n=this.eventData(e),i=n.linkView;if(i)i.pointermove(e,t,r);else{var s=this.paper,o=s.options.magnetThreshold,a=this.getEventTarget(e),u=n.targetMagnet;if(o==="onleave"){if(u===a||We(u).contains(a))return}else if(s.eventData(e).mousemoved<=o)return;this.dragLinkStart(e,u,t,r)}},dragLinkEnd:function(e,t,r){var n=this.eventData(e),i=n.linkView;i&&(i.pointerup(e,t,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Za(t)||(e instanceof SVGElement?We(e).attr(t):Nt(e).attr(t))},processNodeAttributes:function(e,t){var r,n,i,s,o,a,u,c,f,h=[];for(r in t)t.hasOwnProperty(r)&&(n=t[r],i=this.getAttributeDefinition(r),i&&(!_n(i.qualify)||i.qualify.call(this,n,e,t,this))?(Fi(i.set)&&(a||(a={}),a[i.set]=n),n!==null&&h.push(r,i)):(a||(a={}),a[Zde(r)]=n));for(s=0,o=h.length;s<o;s+=2)r=h[s],i=h[s+1],n=t[r],_n(i.set)&&(u||(u={}),u[r]=n),_n(i.position)&&(c||(c={}),c[r]=n),_n(i.offset)&&(f||(f={}),f[r]=n);return{raw:t,normal:a,set:u,position:c,offset:f}},updateRelativeAttributes:function(e,t,r,n){n||(n={});var i,s,o,a=t.raw||{},u=t.normal||{},c=t.set,f=t.position,h=t.offset;for(i in c){s=c[i],o=this.getAttributeDefinition(i);var v=o.set.call(this,s,r.clone(),e,a,this);Jr(v)?Xt(u,v):v!==void 0&&(u[i]=v)}if(e instanceof HTMLElement){this.setNodeAttributes(e,u);return}var y=u.transform,m=We.transformStringToMatrix(y),_=me(m.e,m.f);y&&(u=Pc(u,"transform"),m.e=m.f=0);var x,S,P;if(f||h){var T=this.getNodeScale(e,n.scalableNode);x=T.sx,S=T.sy}var E=!1;for(i in f)s=f[i],o=this.getAttributeDefinition(i),P=o.position.call(this,s,r.clone(),e,a,this),P&&(_.offset(me(P).scale(x,S)),E||(E=!0));this.setNodeAttributes(e,u);var O=!1;if(h){var N=this.getNodeBoundingRect(e);if(N.width>0&&N.height>0){var d=We.transformRect(N,m).scale(1/x,1/S);for(i in h)s=h[i],o=this.getAttributeDefinition(i),P=o.offset.call(this,s,d,e,a,this),P&&(_.offset(me(P).scale(x,S)),O||(O=!0))}}(y!==void 0||E||O)&&(_.round(1),m.e=_.x,m.f=_.y,e.setAttribute("transform",We.matrixToTransformString(m)))},getNodeScale:function(e,t){var r,n;if(t&&t.contains(e)){var i=t.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var r=We.ensureId(e),n=t[r];return n||(n=t[r]={}),n},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=We(e).getBBox()),new yt(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:r,el:n}=this;let i;r&&r.contains(e)?i=r:i=n,t.magnetMatrix=We(e).getTransformToElement(i)}return We.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=We(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,r,n){var i,s,o,a,u={},c=[];for(var f in e)if(e.hasOwnProperty(f)&&(o=e[f],!!ri(o))){var h=r[f]=this.findBySelector(f,t,n);for(i=0,s=h.length;i<s;i++){var v=h[i];a=We.ensureId(v);var y=n&&n[f]===v,m=u[a];if(m){m.array||(c.push(a),m.array=!0,m.attributes=[m.attributes],m.selectedLength=[m.selectedLength]);var _=m.attributes,x=m.selectedLength;if(y)_.unshift(o),x.unshift(-1);else{var S=jj(x,s);_.splice(S,0,o),x.splice(S,0,s)}}else u[a]={attributes:o,selectedLength:y?-1:s,node:v,array:!1}}}for(i=0,s=c.length;i<s;i++)a=c[i],o=u[a],o.attributes=ai({},...o.attributes.reverse());return u},getEventTarget:function(e,t={}){const{target:r,type:n,clientX:i=0,clientY:s=0}=e;return t.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in e&&r.hasPointerCapture(e.pointerId)?document.elementFromPoint(i,s):r},updateDOMSubtreeAttributes:function(e,t,r){r||(r={}),r.rootBBox||(r.rootBBox=yt()),r.selectors||(r.selectors=this.selectors);var n={},i={},s=[],o=[],a,u,c,f,h,v=r.roAttributes,y=this.findNodesAttributes(v||t,e,n,r.selectors),m=v?this.findNodesAttributes(t,e,n,r.selectors):y;for(var _ in y)if(f=y[_],c=f.attributes,u=f.node,h=this.processNodeAttributes(u,c),!h.set&&!h.position&&!h.offset)this.setNodeAttributes(u,h.normal);else{var x=m[_]&&m[_].attributes,S=x&&c.ref===void 0?x.ref:c.ref,P;if(S){if(P=(n[S]||this.findBySelector(S,e,r.selectors))[0],!P)throw new Error('dia.CellView: "'+S+'" reference does not exist.')}else P=null;if(a={node:u,refNode:P,processedAttributes:h,allAttributes:x},P){var T=o.findIndex(function(E){return E.refNode===u});T>-1?o.splice(T,0,a):o.push(a)}else s.push(a)}s.push(...o);for(let E=0,O=s.length;E<O;E++){a=s[E],u=a.node,P=a.refNode;const N=P?We.ensureId(P):"";let d=i[N];d||(d=i[N]=P?We(P).getBBox({target:Fpe(u,P)}):r.rootBBox),v?(h=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(h,a.processedAttributes)):h=a.processedAttributes,this.updateRelativeAttributes(u,h,d,r)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Xt(e.set,t.set),Xt(e.position,t.position),Xt(e.offset,t.offset);var r=e.normal&&e.normal.transform;r!==void 0&&t.normal&&(t.normal.transform=r),e.normal=t.normal},onMount(e){e||(this.mountTools(),Lo.mount(this))},onDetach(){this.unmountTools(),Lo.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Lo.remove(this)},updateHighlighters:function(e=!1){Lo.update(this,null,e)},transformHighlighters:function(){Lo.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,r){this.notify("cell:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){this.notify("cell:pointerclick",e,t,r)},contextmenu:function(e,t,r){this.notify("cell:contextmenu",e,t,r)},pointerdown:function(e,t,r){const{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(e,{graph:i})),this.notify("cell:pointerdown",e,t,r)},pointermove:function(e,t,r){this.notify("cell:pointermove",e,t,r)},pointerup:function(e,t,r){const{graph:n}=this.eventData(e);this.notify("cell:pointerup",e,t,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,r,n){this.notify("cell:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){this.notify(t,e,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:r}=this;if(t.isAsync()){if(r.isLink()){const s=r.getSourceElement();if(s){const a=t.findViewByModel(s);a&&(t.dumpView(a),t.checkViewVisibility(a))}const o=r.getTargetElement();if(o){const a=t.findViewByModel(o);a&&(t.dumpView(a),t.checkViewVisibility(a))}}t.dumpView(this),t.checkViewVisibility(this)}const n=this.getEventTarget(e,{fromPoint:!0}),i=t.findView(n);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:Dpe,Highlighting:yl,addPresentationAttributes:function(e){return ai({},ni(this.prototype,"presentationAttributes"),e,function(t,r){if(!(!t||!r)&&(typeof t=="string"&&(t=[t]),typeof r=="string"&&(r=[r]),Array.isArray(t)&&Array.isArray(r)))return ld(t.concat(r))})}});function Fpe(e,t){let r=e;do{if(r.contains(t))return r;r=r.parentNode}while(r);return null}const Br={TOOLS:Tr.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},_l={MOVE:"move",MAGNET:"magnet"},Ai=Tr.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=Tr.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){Tr.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Br.UPDATE],position:[Br.TRANSLATE,Br.TOOLS],size:[Br.RESIZE,Br.PORTS,Br.TOOLS],angle:[Br.ROTATE,Br.TOOLS],markup:[Br.RENDER],ports:[Br.PORTS]},initFlag:[Br.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){this.hasFlag(e,Br.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Br.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Br.RENDER,Br.UPDATE,Br.RESIZE,Br.TRANSLATE,Br.ROTATE,Br.PORTS,Br.TOOLS]);else{let n=!1;this.hasFlag(e,Br.RESIZE)&&(this.resize(t),n=!0,e=this.removeFlag(e,[Br.RESIZE,Br.UPDATE]),e=this.removeFlag(e,Br.PORTS)),this.hasFlag(e,Br.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Br.UPDATE),n=!0,e=this.removeFlag(e,Br.PORTS)),this.hasFlag(e,Br.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Br.TRANSLATE),r=!0),this.hasFlag(e,Br.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Br.ROTATE),r=!0),this.hasFlag(e,Br.PORTS)&&(this._renderPorts(),n=!0,e=this.removeFlag(e,Br.PORTS)),n&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Br.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Br.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache(),this._removePorts();var r=this.model,n=r.attr();this.updateDOMSubtreeAttributes(this.el,n,{rootBBox:new yt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===n?null:t}),this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),r=this.selectors=t.selectors;this.rotatableNode=We(r[this.rotatableSelector])||null,this.scalableNode=We(r[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(We(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var r=e.size;return"rotate("+t+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,r=t.angle(),n=t.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),a=n.width/(o.width||1),u=n.height/(o.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,f=c&&c.attr("transform");if(f){c.attr("transform",f+" rotate("+-r+","+n.width/2+","+n.height/2+")");var h=i.getBBox({target:this.paper.cells});t.set("position",{x:h.x,y:h.y},Xt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,n=(e.paper||this.paper).model,i=e.initialZIndices={},s=t.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...s,...o].forEach(c=>i[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const a=n.getElements().reduce((c,f)=>Math.max(c,f.attributes.z||0),0);o.forEach(c=>{c.attributes.z<=a&&c.set("z",a+1,{ui:!0})}),t.stopBatch("to-front");const u=t.parent();u?(n.getCell(u).unembed(t,{ui:!0}),e.initialParentId=u):e.initialParentId=null},processEmbedding:function(e={},t,r,n){const i=e.model||this.model,s=e.paper||this.paper,o=s.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=s.options;let f;_n(a)?f=zr(a.call(o,this,t,r,n)):a==="pointer"?f=zr(o.findModelsFromPoint({x:r,y:n})):f=o.findModelsUnderElement(i,{searchBy:a}),f=f.filter(y=>y instanceof xa&&i.id!==y.id&&!y.isEmbeddedIn(i)),u&&(f=f.slice(-1));let h=null;const v=e.candidateEmbedView;for(let y=f.length-1;y>=0;y--){const m=f[y];if(v&&v.model.id==m.id){h=v;break}else{const _=m.findView(s);if(!_n(c)||c.call(s,this,_)){h=_;break}}}h&&h!=v&&(this.clearEmbedding(e),e.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&v&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,r=e.model||this.model,n=e.paper||this.paper;if(t)t.model.embed(r,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:i}=n.options,{initialParentId:s}=e;if(s&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(e);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:r="revert"}=e,n=t||this.model,s=(e.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:a,initialZIndices:u}=e;if(a){const{x:f,y:h}=a;n.position(f,h,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(f=>{const h=s.getCell(f);h&&h.set("z",u[f],{ui:!0})});const c=s.getCell(o);c&&c.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,r=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=r.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const n=this.findAttribute("port",e);if(n){const i=this.findPortNode(n,r);if(i)return i}else{const[i]=this.findBySelector(r);if(i)return i}}return e},notifyPointerdown(e,t,r){Tr.prototype.pointerdown.call(this,e,t,r),this.notify("element:pointerdown",e,t,r)},notifyPointermove(e,t,r){Tr.prototype.pointermove.call(this,e,t,r),this.notify("element:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("element:pointerup",e,t,r),Tr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){Tr.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){Tr.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,r)},contextmenu:function(e,t,r){Tr.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointermove(e,i,t,r),s){case _l.MAGNET:this.dragMagnet(e,t,r);break;case _l.MOVE:(o||this).drag(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(e,t,r);break}this.eventData(e,n)},pointerup:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointerup(e,i,t,r),s){case _l.MAGNET:this.dragMagnetEnd(e,t,r);break;case _l.MOVE:(o||this).dragEnd(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(e,t,r)}i&&this.magnetpointerclick(e,i,t,r),this.checkMouseleave(e)},mouseover:function(e){Tr.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){Tr.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){Tr.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){Tr.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,r,n){Tr.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,r,n)},onmagnet:function(e,t,r){const{currentTarget:n}=e;this.magnetpointerdown(e,n,t,r),this.eventData(e,{targetMagnet:n}),this.dragMagnetStart(e,t,r)},magnetpointerdown:function(e,t,r,n){this.notify("element:magnet:pointerdown",e,t,r,n)},magnetpointermove:function(e,t,r,n){this.notify("element:magnet:pointermove",e,t,r,n)},magnetpointerup:function(e,t,r,n){this.notify("element:magnet:pointerup",e,t,r,n)},magnetpointerdblclick:function(e,t,r,n){this.notify("element:magnet:pointerdblclick",e,t,r,n)},magnetcontextmenu:function(e,t,r,n){this.notify("element:magnet:contextmenu",e,t,r,n)},dragStart:function(e,t,r){if(this.isDefaultInteractionPrevented(e))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(e,{action:_l.MOVE,delegatedView:n});const i=n.model.position();n.eventData(e,{initialPosition:i,pointerOffset:i.difference(t,r),restrictedArea:this.paper.getRestrictedArea(n,t,r)})},dragMagnetStart:function(e,t,r){const{paper:n}=this,i=e.isPropagationStopped();if(i&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!n.options.validateMagnet.call(n,this,s,e)){i?this.dragStart(e,t,r):this.pointerdown(e,t,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(e,s,t,r),this.eventData(e,{action:_l.MAGNET})},drag:function(e,t,r){var n=this.paper,i=n.options.gridSize,s=this.model,o=this.eventData(e),{pointerOffset:a,restrictedArea:u,embedding:c}=o,f=Ac(t+a.x,i),h=Ac(r+a.y,i);s.position(f,h,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(o),c=!0),this.processEmbedding(o,e,t,r)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,r){this.dragLink(e,t,r)},dragEnd:function(e,t,r){var n=this.eventData(e);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(e,t,r){this.dragLinkEnd(e,t,r)},magnetpointerclick:function(e,t,r,n){var i=this.paper;i.eventData(e).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,r,n)}},{Flags:Br});Xt(Ai.prototype,Lpe);const Bpe=function(e,t,r){return e},zpe=function(e,t,r){var n=t.side||"bottom",i=Cc(t.padding||40),s=r.sourceBBox,o=r.targetBBox,a=s.center(),u=o.center(),c,f,h;switch(n){case"bottom":h=1,c="y",f="height";break;case"top":h=-1,c="y",f="height";break;case"left":h=-1,c="x",f="width";break;case"right":h=1,c="x",f="width";break;default:throw new Error("Router: invalid side")}return a[c]+=h*(s[f]/2+i[n]),u[c]+=h*(o[f]/2+i[n]),h*(a[c]-u[c])>0?u[c]=a[c]:a[c]=u[c],[a].concat(e,u)};var Vpe={N:"S",S:"N",E:"W",W:"E"},Gpe={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function ov(e,t,r){var n=new me(e.x,t.y);return r.containsPoint(n)&&(n=new me(t.x,e.y)),n}function YE(e,t){return e[t==="W"||t==="E"?"width":"height"]}function ns(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function Ap(e){return new yt(e.x,e.y,0,0)}function av(e){var t=Cc(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function o9(e,t){return e.sourceBBox.clone().moveAndExpand(av(t))}function a9(e,t){return e.targetBBox.clone().moveAndExpand(av(t))}function $pe(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=o9(e,t);return r.center()}function Upe(e,t){if(e.targetAnchor)return e.targetAnchor;var r=a9(e,t);return r.center()}function u9(e,t,r){var n=new me(e.x,t.y),i=new me(t.x,e.y),s=ns(e,n),o=ns(e,i),a=Vpe[r],u=s===r||s!==a&&(o===a||o!==r)?n:i;return{points:[u],direction:ns(u,t)}}function Dp(e,t,r){var n=ov(e,t,r);return{points:[n],direction:ns(n,t)}}function jpe(e,t,r,n){var i={},s=[new me(e.x,t.y),new me(t.x,e.y)],o=s.filter(function(h){return!r.containsPoint(h)}),a=o.filter(function(h){return ns(h,e)!==n}),u;if(a.length>0)u=a.filter(function(h){return ns(e,h)===n}).pop(),u=u||a[0],i.points=[u],i.direction=ns(u,t);else{u=jde(s,o)[0];var c=new me(t).move(u,-YE(r,n)/2),f=ov(c,e,r);i.points=[f,c],i.direction=ns(c,t)}return i}function Hpe(e,t,r,n){var i=Dp(t,e,n),s=i.points[0];if(r.containsPoint(s)){i=Dp(e,t,r);var o=i.points[0];if(n.containsPoint(o)){var a=new me(e).move(o,-YE(r,ns(e,o))/2),u=new me(t).move(s,-YE(n,ns(t,s))/2),c=new Et(a,u).midpoint(),f=Dp(e,c,r),h=u9(c,t,f.direction);i.points=[f.points[0],h.points[0]],i.direction=h.direction}}return i}function oE(e,t,r,n,i){var s={},o=r.union(n).inflate(1),a=o.center().distance(t)>o.center().distance(e),u=a?t:e,c=a?e:t,f,h,v;return i?(f=me.fromPolar(o.width+o.height,Gpe[i],u),f=o.pointNearestToPoint(f).move(f,-1)):f=o.pointNearestToPoint(u).move(u,1),h=ov(f,c,o),f.round().equals(h.round())?(h=me.fromPolar(o.width+o.height,bs(f.theta(u))+Math.PI/2,c),h=o.pointNearestToPoint(h).move(c,1).round(),v=ov(f,h,o),s.points=a?[h,v,f]:[f,v,h]):s.points=a?[h,f]:[f,h],s.direction=ns(a?f:h,t),s}function KE(e,t,r){var n=o9(r,t),i=a9(r,t),s=$pe(r,t),o=Upe(r,t);n=n.union(Ap(s)),i=i.union(Ap(o)),e=zr(e).map(me),e.unshift(s),e.push(o);for(var a,u=[],c=0,f=e.length-1;c<f;c++){var h=null,v=e[c],y=e[c+1],m=!!ns(v,y);if(c===0)c+1===f?n.intersect(i.clone().inflate(1))?h=oE(v,y,n,i):m||(h=Hpe(v,y,n,i)):n.containsPoint(y)?h=oE(v,y,n,Ap(y).moveAndExpand(av(t))):m||(h=Dp(v,y,n));else if(c+1===f){var _=m&&ns(y,v)===a;i.containsPoint(v)||_?h=oE(v,y,Ap(v).moveAndExpand(av(t)),i,a):m||(h=jpe(v,y,i,a))}else m||(h=u9(v,y,a));h?(Array.prototype.push.apply(u,h.points),a=h.direction):a=ns(v,y),c+1<f&&u.push(y)}return u}var c9={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,r){if(!_n(KE))throw new Error("Manhattan requires the orthogonal router as default fallback.");return KE(e,Xt({},c9,t),r)},fallbackRoute:function(e,t,r){return null},draggingRoute:null};function IT(e){this.map={},this.options=e,this.mapGridSize=100}IT.prototype.build=function(e,t){var r=this.options,n=zr(r.excludeEnds).reduce(function(u,c){var f=t.get(c);if(f){var h=e.getCell(f.id);h&&u.push(h)}return u},[]),i=[],s=e.getCell(t.get("source").id);s&&(i=$E(i,s.getAncestors().map(function(u){return u.id})));var o=e.getCell(t.get("target").id);o&&(i=$E(i,o.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return e.getElements().reduce(function(u,c){var f=zr(r.excludeTypes).includes(c.get("type")),h=n.find(function(E){return E.id===c.id}),v=i.includes(c.id),y=f||h||v;if(!y)for(var m=c.getBBox().moveAndExpand(r.paddingBox),_=m.origin().snapToGrid(a),x=m.corner().snapToGrid(a),S=_.x;S<=x.x;S+=a)for(var P=_.y;P<=x.y;P+=a){var T=S+"@"+P;u[T]=u[T]||[],u[T].push(m)}return u},this.map),this};IT.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return zr(this.map[t]).every(function(r){return!r.containsPoint(e)})};function Yc(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Yc.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var r=jj(this.items,e,(function(n){return this.values[n]}).bind(this));this.items.splice(r,0,e)};Yc.prototype.remove=function(e){this.hash[e]=this.CLOSE};Yc.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};Yc.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};Yc.prototype.isEmpty=function(){return this.items.length===0};Yc.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function l9(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function f9(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function h9(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=l9(e,t);return r.center()}function Wpe(e,t){if(e.targetAnchor)return e.targetAnchor;var r=f9(e,t);return r.center()}function aE(e,t,r,n,i){var s=360/r,o=e.theta(Xpe(e,t,n,i)),a=$o(o+s/2);return s*Math.floor(a/s)}function Xpe(e,t,r,n){var i=n.step,s=t.x-e.x,o=t.y-e.y,a=s/r.x,u=o/r.y,c=a*i,f=u*i;return new me(e.x+c,e.y+f)}function b4(e,t){var r=Math.abs(e-t);return r>180?360-r:r}function Ype(e,t,r){var n=r.step;zr(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*t.x,i.gridOffsetY=i.offsetY/n*t.y})}function Kpe(e,t,r){return{source:t.clone(),x:w4(r.x-t.x,e),y:w4(r.y-t.y,e)}}function w4(e,t){if(!e)return t;var r=Math.abs(e),n=Math.round(r/t);if(!n)return r;var i=n*t,s=r-i,o=s/n;return t+o}function Jpe(e,t){var r=t.source,n=Ac(e.x-r.x,t.x)+r.x,i=Ac(e.y-r.y,t.y)+r.y;return new me(n,i)}function fh(e,t){return e.round(t)}function Fp(e,t,r){return fh(Jpe(e.clone(),t),r)}function _h(e){return e.clone().toString()}function uE(e){return new me(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function Zpe(e,t,r,n,i,s,o){for(var a=[],u=uE(i.difference(r)),c=_h(r),f=e[c],h;f;){h=t[c];var v=uE(h.difference(f));v.equals(u)||(a.unshift(h),u=v),c=_h(f),f=e[c]}var y=t[c],m=uE(y.difference(n));return m.equals(u)||a.unshift(y),a}function x4(e,t){for(var r=1/0,n=0,i=t.length;n<i;n++){var s=e.manhattanDistance(t[n]);s<r&&(r=s)}return r}function S4(e,t,r,n,i){var s=i.precision,o=i.directionMap,a=e.difference(t.center()),u=Jr(o)?Object.keys(o):[],c=zr(r),f=u.reduce(function(h,v){if(c.includes(v)){for(var y=o[v],m=new me(e.x+y.x*(Math.abs(a.x)+t.width),e.y+y.y*(Math.abs(a.y)+t.height)),_=new Et(e,m),x=_.intersect(t)||[],S=x.length,P,T=null,E=0;E<S;E++){var O=x[E],N=e.squaredDistance(O);(P===void 0||N>P)&&(P=N,T=O)}if(T){var d=Fp(T,n,s);t.containsPoint(d)&&(d=Fp(d.offset(y.x*n.x,y.y*n.y),n,s)),h.push(d)}}return h},[]);return t.containsPoint(e)||f.push(Fp(e,n,s)),f}function Qpe(e,t,r,n){var i=n.precision,s,o;e instanceof yt?s=fh(h9(this,n).clone(),i):s=fh(e.clone(),i),t instanceof yt?o=fh(Wpe(this,n).clone(),i):o=fh(t.clone(),i);var a=Kpe(n.step,s,o),u,c,f,h;if(e instanceof yt?(u=s,f=S4(u,e,n.startDirections,a,n)):(u=s,f=[u]),t instanceof yt?(c=o,h=S4(o,t,n.endDirections,a,n)):(c=o,h=[c]),f=f.filter(Oe=>!r(Oe)),h=h.filter(Oe=>!r(Oe)),f.length>0&&h.length>0){for(var v=new Yc,y={},m={},_={},x=0,S=f.length;x<S;x++){var P=f[x],T=_h(P);v.add(T,x4(P,h)),y[T]=P,_[T]=0}var E=n.previousDirectionAngle,O=E===void 0,N,d,C=n.directions;Ype(C,a,n);for(var R=C.length,k=zr(h).reduce(function(Oe,Ze){var $e=_h(Ze);return Oe.push($e),Oe},[]),B=n.maximumLoops;!v.isEmpty()&&B>0;){var z=v.pop(),U=y[z],Y=m[z],oe=_[z],W=Y===void 0,D=U.equals(u),F;W?O?D?F=null:F=aE(u,U,R,a,n):F=E:F=aE(Y,U,R,a,n);var H=f.length===h.length;if(H){for(var ie=0;ie<f.length;ie++)if(!f[ie].equals(h[ie])){H=!1;break}}var se=W&&H;if(!se&&k.indexOf(z)>=0)return n.previousDirectionAngle=F,Zpe(m,y,U,u,c);for(x=0;x<R;x++){N=C[x];var we=N.angle;if(d=b4(F,we),!(!(O&&D)&&d>n.maxAllowedDirectionChange)){var ge=Fp(U.clone().offset(N.gridOffsetX,N.gridOffsetY),a,i),te=_h(ge);if(!(v.isClose(te)||r(ge))){if(k.indexOf(te)>=0){var ue=ge.equals(c);if(!ue){var re=aE(ge,c,R,a,n),Q=b4(we,re);if(Q>n.maxAllowedDirectionChange)continue}}var le=N.cost,Ge=D?0:n.penalties[d],Ne=oe+le+Ge;(!v.isOpen(te)||Ne<_[te])&&(y[te]=ge,m[te]=U,_[te]=Ne,v.add(te,Ne+x4(ge,h)))}}}B--}}return n.fallbackRoute.call(this,u,c,n)}function eve(e){if(e.directions=ni(e,"directions"),e.penalties=ni(e,"penalties"),e.paddingBox=ni(e,"paddingBox"),e.padding=ni(e,"padding"),e.padding){var t=Cc(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}zr(e.directions).forEach(function(r){var n=new me(0,0),i=new me(r.offsetX,r.offsetY);r.angle=$o(n.theta(i))})}function tve(e,t,r){eve(t),r.options.perpendicular=!!t.perpendicular;var n=l9(r,t),i=f9(r,t),s=h9(r,t);let o;if(typeof t.isPointObstacle=="function")o=t.isPointObstacle;else{const T=new IT(t);T.build(r.paper.model,r.model),o=E=>!T.isPointAccessible(E)}for(var a=zr(e).map(me),u=[],c=s,f,h,v=0,y=a.length;v<=y;v++){var m=null;if(h=f||n,f=a[v],!f){f=i;var _=!r.model.get("source").id||!r.model.get("target").id;if(_&&_n(t.draggingRoute)){var x=h===n?s:h,S=f.origin();m=t.draggingRoute.call(r,x,S,t)}}if(m=m||Qpe.call(r,h,f,o,t),m===null)return t.fallbackRouter(e,t,r);var P=m[0];P&&P.equals(c)&&m.shift(),c=m[m.length-1]||c,Array.prototype.push.apply(u,m)}return u}const JE=function(e,t,r){return tve(e,Xt({},c9,t),r)};var rve={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),r=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:r},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:r},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:r},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:r}]},fallbackRoute:function(e,t,r){var n=e.theta(t),i=[],s={x:t.x,y:e.y},o={x:e.x,y:t.y};if(n%180>90){var a=s;s=o,o=a}var u=n%90<45?s:o,c=new Et(e,u),f=90*Math.ceil(n/90),h=me.fromPolar(c.squaredLength(),bs(f+135),u),v=new Et(t,h),y=c.intersection(v),m=y||t,_=y?m:e,x=360/r.directions.length,S=_.theta(t),P=$o(S+x/2),T=x*Math.floor(P/x);return r.previousDirectionAngle=T,m&&i.push(m.round()),i.push(t),i}};const nve=function(e,t,r){if(!_n(JE))throw new Error("Metro requires the manhattan router.");return JE(e,Xt({},rve,t),r)},ot={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},E4=[ot.LEFT,ot.RIGHT,ot.TOP,ot.BOTTOM],Cl={[ot.LEFT]:ot.RIGHT,[ot.RIGHT]:ot.LEFT,[ot.TOP]:ot.BOTTOM,[ot.BOTTOM]:ot.TOP},ive=[ot.TOP,ot.BOTTOM],Tp={0:ot.RIGHT,180:ot.LEFT,270:ot.TOP,90:ot.BOTTOM};function hh(e){return e.angle()}function Pp(e){return new wn(e).simplify({threshold:1}).points}function uv(e,t){const{point:r,x0:n,y0:i,view:s,bbox:o,direction:a}=e,{point:u,x0:c,y0:f,view:h,bbox:v,direction:y}=t;let m;if(s)s.model.isLink()?m=A4(u,r,s):a===ot.ANCHOR_SIDE?m=o.sideNearestToPoint(r):a===ot.MAGNET_SIDE?m=s.model.getBBox().sideNearestToPoint(r):m=a;else{const x=new yt(n,i,0,0);m=E4.includes(a)?a:x.sideNearestToPoint(u)}let _;if(h)h.model.isLink()?_=A4(r,u,h):y===ot.ANCHOR_SIDE?_=v.sideNearestToPoint(u):y===ot.MAGNET_SIDE?_=h.model.getBBox().sideNearestToPoint(u):_=y;else{const x=new yt(c,f,0,0);_=E4.includes(y)?y:x.sideNearestToPoint(r)}return[m,_]}function sve(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,v=c+u,y=i-u,{x:m}=a,{x0:_,y0:x}=t;return _===m&&x<i?ot.BOTTOM:_<m&&x<y?ot.RIGHT:_>m&&x<y?ot.LEFT:_<h&&x>=i||_>v&&x>=i?ot.TOP:_>=h&&_<=m&&x>f||_<=v&&_>=m&&x>f?r.point.x<_?ot.RIGHT:ot.LEFT:ot.TOP}function ove(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,v=c+u,y=f+u,{x:m}=a,{x0:_,y0:x}=t;return _===m&&x>f?ot.TOP:_<m&&x>y?ot.RIGHT:_>m&&x>y?ot.LEFT:_<h&&x<=f||_>v&&x<=f?ot.BOTTOM:_>=h&&_<=m&&x<i||_<=v&&_>=m&&x<i?r.point.x<_?ot.RIGHT:ot.LEFT:ot.BOTTOM}function ave(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=i-u,v=n-u,y=f+u,{x:m,y:_}=a,{x0:x,y0:S}=t;return x<m&&S===_?ot.RIGHT:x<=h&&S<_?ot.BOTTOM:x<=h&&S>_?ot.TOP:x>=i&&S<=v||x>=i&&S>=y?ot.LEFT:x>c&&S>=v&&S<=_||x>c&&S<=y&&S>=_?r.point.y<S?ot.BOTTOM:ot.TOP:ot.LEFT}function uve(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=c+u,v=n-u,y=f+u,{x:m,y:_}=a,{x0:x,y0:S}=t;return x>m&&S===_?ot.LEFT:x>=h&&S<_?ot.BOTTOM:x>=h&&S>_?ot.TOP:x<=c&&S<=v||x<=c&&S>=y?ot.RIGHT:x<i&&S>=v&&S<=_||x<i&&S<=y&&S>=_?r.point.y<S?ot.BOTTOM:ot.TOP:ot.RIGHT}function cve(e,t,r){const[n]=uv(e,t);switch(n){case ot.TOP:return sve(e,t,r);case ot.RIGHT:return uve(e,t,r);case ot.BOTTOM:return ove(e,t,r);case ot.LEFT:return ave(e,t,r)}}function A4(e,t,r){const n=r.getTangentAtLength(r.getClosestPointLength(t)),i=Math.round(hh(n)/90)*90;if(i%180===0&&e.y===t.y)return e.x<t.x?ot.LEFT:ot.RIGHT;if(e.x===t.x)return e.y<t.y?ot.TOP:ot.BOTTOM;switch(i){case 0:case 180:case 360:return e.y<t.y?ot.TOP:ot.BOTTOM;case 90:case 270:return e.x<t.x?ot.LEFT:ot.RIGHT}}function T4(e,t,r,n,i,s,o){n===ot.AUTO&&(n=i?ot.MAGNET_SIDE:ot.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:u,y:c,width:f=0,height:h=0}=a?yt.fromRectUnion(r,e.model.getBBox()):s;return{point:t,x0:u,y0:c,view:e,bbox:r,width:f,height:h,direction:n,margin:a?o:0}}function cE({x:e,y:t}){const r=new me(e,t);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new yt(e,t,0,0),width:0,height:0,direction:null,margin:0}}function P4(e,t,r){const n=t.point.clone(),{x0:i,y0:s,width:o,height:a}=t;switch(e){case"left":n.x=i-r;break;case"right":n.x=i+o+r;break;case"top":n.y=s-r;break;case"bottom":n.y=s+a+r;break}return n}function Tu(e,t){const{point:r,x0:n,y0:i,view:s,width:o,height:a,margin:u}=e,{point:c,x0:f,y0:h,width:v,height:y,margin:m}=t,_=f+v,x=h+y,S=n+o,P=i+a,T=s&&s.model.isElement(),E=n-u,O=S+u,N=i-u,d=P+u,C=f-m,R=_+m,k=h-m,B=x+m,[z,U]=uv(e,t),Y=P4(z,{point:r,x0:n,y0:i,width:o,height:a},u),oe=P4(U,{point:c,x0:f,y0:h,width:v,height:y},m),{x:W,y:D}=Y,{x:F,y:H}=oe,ie=(f+_)/2,se=(h+x)/2,we=(n+S)/2,ge=(i+P)/2,te=(we<ie?S+f:_+n)/2,ue=(ge<se?P+h:x+i)/2;if(z==="left"&&U==="right"){if(E<=R){let Q=ue;return S<=f&&(x>=N&&H<D?Q=Math.min(k,N):h<=d&&H>=D&&(Q=Math.max(B,d))),[{x:W,y:D},{x:W,y:Q},{x:F,y:Q},{x:F,y:H}]}const re=(W+F)/2;return[{x:re,y:D},{x:re,y:H}]}else if(z==="right"&&U==="left"){if(O>=C){let Q=ue;return W>_&&(x>=N&&H<D?Q=Math.min(k,N):h<=d&&H>=D&&(Q=Math.max(B,d))),[{x:W,y:D},{x:W,y:Q},{x:F,y:Q},{x:F,y:H}]}const re=(W+F)/2;return[{x:re,y:D},{x:re,y:H}]}else if(z==="top"&&U==="bottom"){if(D<H){let Q=te,le=D;return D<h&&(_>=E&&F<W?Q=Math.min(C,E):f<=O&&F>=W&&(Q=Math.max(R,O))),[{x:W,y:le},{x:Q,y:le},{x:Q,y:H},{x:F,y:H}]}const re=(D+H)/2;return[{x:W,y:re},{x:F,y:re}]}else if(z==="bottom"&&U==="top"){if(D-u>H){let Q=te,le=D;return D>x&&(_>=E&&F<W?Q=Math.min(C,E):f<=O&&F>=W&&(Q=Math.max(R,O))),[{x:W,y:le},{x:Q,y:le},{x:Q,y:H},{x:F,y:H}]}const re=(D+H)/2;return[{x:W,y:re},{x:F,y:re}]}else if(z==="top"&&U==="top"){let re,Q=Math.min((P+h)/2,H),le=Math.min((i+x)/2,D);if(H<D){if(W>=R||W<=C)return[{x:W,y:Math.min(D,H)},{x:F,y:Math.min(D,H)}];F>W?re=Math.min(W,C):re=Math.max(W,R)}else{if(F>=O||F<=E)return[{x:W,y:Math.min(D,H)},{x:F,y:Math.min(D,H)}];F>=W?re=Math.max(F,O):re=Math.min(F,E)}return[{x:W,y:le},{x:re,y:le},{x:re,y:Q},{x:F,y:Q}]}else if(z==="bottom"&&U==="bottom"){let re,Q=Math.max((i+x)/2,H),le=Math.max((P+h)/2,D);if(H>D){if(W>=R||W<=C)return[{x:W,y:Math.max(D,H)},{x:F,y:Math.max(D,H)}];F>W?re=Math.min(W,C):re=Math.max(W,R)}else{if(F>=O||F<=E)return[{x:W,y:Math.max(D,H)},{x:F,y:Math.max(D,H)}];F>=W?re=Math.max(F,O):re=Math.min(F,E)}return[{x:W,y:le},{x:re,y:le},{x:re,y:Q},{x:F,y:Q}]}else if(z==="left"&&U==="left"){let re,Q=Math.min((S+f)/2,F),le=Math.min((n+_)/2,W);return F>W?H<=D?re=Math.min(N,H):re=Math.max(d,H):H>=D?re=Math.min(k,D):re=Math.max(B,D),[{x:le,y:D},{x:le,y:re},{x:Q,y:re},{x:Q,y:H}]}else if(z==="right"&&U==="right"){let re,Q=Math.max((n+_)/2,F),le=Math.max((S+f)/2,W);return F<W?H<=D?re=Math.min(N,H):re=Math.max(d,H):H>=D?re=Math.min(k,D):re=Math.max(B,D),[{x:le,y:D},{x:le,y:re},{x:Q,y:re},{x:Q,y:H}]}else if(z==="top"&&U==="right"){if(D>H){if(W<F){let Q=ue;return(Q>se||!T)&&Q<B&&W<f&&(Q=k),[{x:W,y:Q},{x:F,y:Q},{x:F,y:H}]}return[{x:W,y:H}]}const re=Math.max(te,R);if(F<W&&H>i&&H<P)return[{x:W,y:D},{x:re,y:D},{x:re,y:H}];if(re>E&&H>i||f>S){const Q=Math.min(i-u,h-m),le=Math.max(S+u,_+m);return[{x:W,y:Q},{x:le,y:Q},{x:le,y:H}]}return[{x:W,y:D},{x:Math.max(re,F),y:D},{x:Math.max(re,F),y:H}]}else if(z==="top"&&U==="left"){if(D>H){if(W>F){let Q=ue;return(Q>se||!T)&&Q<B&&W>_&&(Q=k),[{x:W,y:Q},{x:F,y:Q},{x:F,y:H}]}return[{x:W,y:H}]}const re=Math.min(C,te);if(W<F&&P>=H)return[{x:W,y:D},{x:re,y:D},{x:re,y:H}];if(re<O&&D<x){const Q=Math.min(N,k),le=Math.min(E,C);return[{x:W,y:Q},{x:le,y:Q},{x:le,y:H}]}return[{x:W,y:D},{x:re,y:D},{x:re,y:H}]}else if(z==="bottom"&&U==="right"){if(D<H){if(W<F){let Q=ue;return(Q<se||!T)&&Q>k&&W<f&&(Q=B),[{x:W,y:Q},{x:F,y:Q},{x:F,y:H}]}return[{x:W,y:H}]}else if(n<F){const Q=Math.max(d,B),le=Math.max(O,R);return[{x:W,y:Q},{x:le,y:Q},{x:le,y:H}]}const re=te;return[{x:W,y:D},{x:re,y:D},{x:re,y:H}]}else if(z==="bottom"&&U==="left"){if(D<H){if(W>F){let Q=ue;return(Q<se||!T)&&Q>k&&W>_&&(Q=B),[{x:W,y:Q},{x:F,y:Q},{x:F,y:H}]}return[{x:W,y:H}]}else if(S>F){const Q=Math.max(d,B),le=Math.min(E,C);return[{x:W,y:Q},{x:le,y:Q},{x:le,y:H}]}const re=te;return[{x:W,y:D},{x:re,y:D},{x:re,y:H}]}else if(z==="left"&&U==="bottom"){if(W>=F&&D>=B)return[{x:F,y:D}];if(W>=_&&D<H){const le=te;return[{x:le,y:D},{x:le,y:H},{x:F,y:H}]}if(F<S&&x<=i){const le=ue;return[{x:W,y:D},{x:W,y:le},{x:F,y:le}]}const re=Math.min(C,W),Q=Math.max(d,B);return[{x:re,y:D},{x:re,y:Q},{x:F,y:Q}]}else if(z==="left"&&U==="top"){if(W>F&&D<k)return[{x:F,y:D}];if(W>=_&&D>H){const le=te;return[{x:le,y:D},{x:le,y:H},{x:F,y:H}]}if(F<=S&&H>D){const le=ue;return[{x:W,y:D},{x:W,y:le},{x:F,y:le}]}const re=H<D?Math.min(E,C):E,Q=Math.min(N,k);return[{x:re,y:D},{x:re,y:Q},{x:F,y:Q}]}else if(z==="right"&&U==="top"){if(W<=F&&D<k)return[{x:F,y:D}];if(S<f&&D>H){let le=te;return[{x:le,y:D},{x:le,y:H},{x:F,y:H}]}if(F<W&&h>P){const le=ue;return[{x:W,y:D},{x:W,y:le},{x:F,y:le}]}const re=Math.max(O,R),Q=Math.min(N,k);return[{x:re,y:D},{x:re,y:Q},{x:F,y:Q}]}else if(z==="right"&&U==="bottom"){if(W<=F&&D>=B)return[{x:F,y:D}];if(W<=C&&D<H){const le=te;return[{x:le,y:D},{x:le,y:H},{x:F,y:H}]}if(F>n&&x<i){const le=ue;return[{x:W,y:D},{x:W,y:le},{x:F,y:le}]}const re=Math.max(R,W),Q=Math.max(d,B);return[{x:re,y:D},{x:re,y:Q},{x:F,y:Q}]}}function d9(e,t,r){const{sourceDirection:n=ot.AUTO,targetDirection:i=ot.AUTO}=t,s=t.margin||20,o=t.useVertices||!1,a=!!r.model.source().port,u=T4(r.sourceView,r.sourceAnchor,r.sourceBBox,n,a,r.sourceAnchor,s),c=!!r.model.target().port,f=T4(r.targetView,r.targetAnchor,r.targetBBox,i,c,r.targetAnchor,s);let h=[];if(!o||e.length===0)return Pp(Tu(u,f));const v=e.map(_=>cE(_)),[y]=v;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(s).containsPoint(y.point)){const[_]=uv(u,y),x=_,S=cE(u.point);S.margin=s,S.direction=_,y.direction=x,h.push(...Tu(S,y),y.point)}else{const _=v[1]||f,x=cve(u,y,_);y.direction=x,h.push(...Tu(u,y),y.point)}for(let _=0;_<v.length-1;_++){const x=v[_],S=v[_+1],P=new Et(x.point,S.point),T=hh(P);if(T%90===0){const N=Tp[T],d=Cl[N];if(N!==x.direction)h.push(x.point,S.point),S.direction=d;else{const C=$o(T-90);let R=0,k=0;C===90?k=-s:C===180?R=-s:C===270?k=s:C===0&&(R=s);const B={x:x.point.x+R,y:x.point.y+k},z={x:S.point.x+R,y:S.point.y+k},U=new Et(S.point,z);S.direction=Tp[hh(U)],h.push(x.point,B,z,S.point)}continue}const[E,O]=lE(x,S);x.direction=E,S.direction=O,h.push(...Tu(x,S),S.point)}const m=v[v.length-1];if(f.view&&f.view.model.isElement())if(f.view.model.getBBox().inflate(s).containsPoint(m.point)){const[_]=lE(m,f),x=cE(f.point),[,S]=uv(m,f);x.margin=s,x.direction=S,m.direction=_,h.push(...Tu(m,x))}else{const _=Pp(h),x=new Et(_[_.length-2],m.point),S=Tp[Math.round(hh(x))];m.direction=S;let P=Tu(m,f);const[T,E]=Pp([...P,f.point]),O=new Et(T,E),N=Math.round(hh(O)),d=Tp[N];d!==S&&S===Cl[d]&&(m.margin=s,P=Tu(m,f)),h.push(...P)}else{const[_]=lE(m,f);m.direction=_,h.push(...Tu(m,f))}return Pp(h)}function lE(e,t){const r=e.direction,n=ive.includes(r);let i=e.direction,s=t.direction;if(n){const o=e.point.y>t.point.y,a=t.point.x-e.point.x;r===ot.BOTTOM?(i=o?Cl[r]:a>=0?ot.RIGHT:ot.LEFT,a>0?s=o?ot.LEFT:ot.TOP:a<0&&(s=o?ot.RIGHT:ot.TOP)):(i=o?a>=0?ot.RIGHT:ot.LEFT:Cl[r],a>0?s=o?ot.BOTTOM:ot.LEFT:a<0&&(s=o?ot.BOTTOM:ot.RIGHT))}else{const o=e.point.x>t.point.x,a=t.point.y-e.point.y;r===ot.RIGHT?(i=o?Cl[r]:a>=0?ot.BOTTOM:ot.TOP,a>0?s=o?ot.TOP:ot.LEFT:a<0&&(s=o?ot.BOTTOM:ot.LEFT)):(i=o?a>=0?ot.BOTTOM:ot.TOP:Cl[r],a>0?s=o?ot.RIGHT:ot.TOP:a<0&&(s=o?ot.RIGHT:ot.BOTTOM))}return[i,s]}d9.Directions=ot;const lve=d9,fve=Object.freeze(Object.defineProperty({__proto__:null,manhattan:JE,metro:nve,normal:Bpe,oneSide:zpe,orthogonal:KE,rightAngle:lve},Symbol.toStringTag,{value:"Module"})),xl={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},hve=Object.values(xl),dve=10,pve=1,RT=function(e,t,r=[],n={}){const{cornerType:i=xl.POINT,cornerRadius:s=dve,cornerPreserveAspectRatio:o=!1,precision:a=pve,raw:u=!1}=n;if(hve.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i===xl.POINT||!s){const f=[e].concat(r).concat([t]),h=new wn(f);c=new zt(h)}else{c=new zt,c.appendSegment(zt.createSegment("M",e));let f;const h=r.length;for(let v=0;v<h;v++){const y=new me(r[v]),m=r[v-1]||e,_=r[v+1]||t,x=f||y.distance(m)/2;f=y.distance(_)/2;let S,P;o?S=P=-Math.min(s,x,f):(S=-Math.min(s,x),P=-Math.min(s,f));const T=y.clone().move(m,S).round(a),E=y.clone().move(_,P).round(a);switch(c.appendSegment(zt.createSegment("L",T)),i){case xl.CUBIC:{const O=.3333333333333333,N=2/3,d=new me(O*T.x+N*y.x,N*y.y+O*T.y),C=new me(O*E.x+N*y.x,N*y.y+O*E.y);c.appendSegment(zt.createSegment("C",d,C,E));break}case xl.LINE:{c.appendSegment(zt.createSegment("L",E));break}case xl.GAP:{c.appendSegment(zt.createSegment("M",E));break}}}c.appendSegment(zt.createSegment("L",t))}return u?c:c.serialize()};var vve=5,C4=["arc","gap","cubic"],gve=0,O4=1,mve=["smooth"],Cp=1/3,Op=2/3;function I4(e,t){let{x:r,y:n}=e,{x:i,y:s}=t;if(r>i){let o=r;r=i,i=o,o=n,n=s,s=o}if(n>s){let o=r;r=i,i=o,o=n,n=s,s=o}return[new me(r,n),new me(i,s)]}function yve(e,t){const[{x:r,y:n},{x:i,y:s}]=I4(e.start,e.end),[{x:o,y:a},{x:u,y:c}]=I4(t.start,t.end),f=r<=u&&o<=i,h=n<=c&&a<=s;return f&&h}function fE(e,t,r){var n=[].concat(e,r,t);return n.reduce(function(i,s,o){var a=n[o+1];return a!=null&&(i[o]=bc(s,a)),i},[])}function _ve(e){var t=e.paper,r=t._jumpOverUpdateList;if(r==null){r=t._jumpOverUpdateList=[];var n=t.model;n.on("batch:stop",function(){this.hasActiveBatch()||bve(t)}),n.on("reset",function(){r=t._jumpOverUpdateList=[]})}r.indexOf(e)<0&&(r.push(e),e.listenToOnce(e.model,"change:connector remove",function(){r.splice(r.indexOf(e),1)}))}function bve(e){for(var t=e._jumpOverUpdateList,r=0;r<t.length;r++){const n=t[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function wve(e,t){return zr(t).reduce(function(r,n){var i=e.intersection(n);return i&&r.push(i),r},[])}function R4(e,t){return bc(e,t).squaredLength()}function xve(e,t,r){return t.reduce(function(n,i,s){if(i.skip===!0)return n;var o=n.pop()||e,a=Zp(i).move(o.start,-r),u=Zp(i).move(o.start,+r),c=t[s+1];if(c!=null){var f=u.distance(c);f<=r&&(u=c.move(o.start,f),c.skip=!0)}else{var h=a.distance(o.end);if(h<r*2+O4)return n.push(o),n}var v=u.distance(o.start);if(v<r*2+O4)return n.push(o),n;var y=bc(a,u);return y.isJump=!0,n.push(bc(o.start,a),y,bc(u,o.end)),n},[])}function k4(e,t,r,n){var i=new zt,s;return s=zt.createSegment("M",e[0].start),i.appendSegment(s),zr(e).forEach(function(o,a){if(o.isJump){var u,c,f,h;if(r==="arc"){u=-90,c=o.start.difference(o.end);var v=+(c.x<0||c.x===0&&c.y<0);v&&(u+=180);var y=o.midpoint(),m=new Et(y,o.end).rotate(y,u),_;_=new Et(o.start,y),f=_.pointAt(2/3).rotate(o.start,u),h=m.pointAt(1/3).rotate(m.end,-u),s=zt.createSegment("C",f,h,m.end),i.appendSegment(s),_=new Et(y,o.end),f=m.pointAt(1/3).rotate(m.end,u),h=_.pointAt(1/3).rotate(o.end,-u),s=zt.createSegment("C",f,h,o.end),i.appendSegment(s)}else if(r==="gap")s=zt.createSegment("M",o.end),i.appendSegment(s);else if(r==="cubic"){u=o.start.theta(o.end);var x=t*.6,S=t*1.35;c=o.start.difference(o.end),v=+(c.x<0||c.x===0&&c.y<0),v&&(S*=-1),f=me(o.start.x+x,o.start.y+S).rotate(o.start,u),h=me(o.end.x-x,o.end.y+S).rotate(o.end,u),s=zt.createSegment("C",f,h,o.end),i.appendSegment(s)}}else{var P=e[a+1];n==0||!P||P.isJump?(s=zt.createSegment("L",o.end),i.appendSegment(s)):Sve(n,i,o.end,o.start,P.end)}}),i}function Sve(e,t,r,n,i){var s=r.distance(n)/2,o=r.distance(i)/2,a=-Math.min(e,s),u=-Math.min(e,o),c=r.clone().move(n,a).round(),f=r.clone().move(i,u).round(),h=new me(Cp*c.x+Op*r.x,Op*r.y+Cp*c.y),v=new me(Cp*f.x+Op*r.x,Op*r.y+Cp*f.y),y;y=zt.createSegment("L",c),t.appendSegment(y),y=zt.createSegment("C",h,v,f),t.appendSegment(y)}const Eve=function(e,t,r,n){_ve(this);var i=n.raw,s=n.size||vve,o=n.jump&&(""+n.jump).toLowerCase(),a=n.radius||gve,u=n.ignoreConnectors||mve;C4.indexOf(o)===-1&&(o=C4[0]);var c=this.paper,f=c.model,h=f.getLinks();if(h.length===1)return k4(fE(e,t,r),s,o,a);var v=this.model,y=h.indexOf(v),m=c.options.defaultConnector||{},_=h.filter(function(O,N){var d=O.get("connector")||m;return zr(u).includes(d.name)?!1:N>y?d.name!=="jumpover":!0}),x=_.map(function(O){return c.findViewByModel(O)}),S=fE(e,t,r),P=x.map(function(O){return O==null?[]:O===this?S:fE(O.sourcePoint,O.targetPoint,O.route)},this),T=S.reduce(function(O,N){var d=_.reduce(function(C,R,k){if(R!==v){const B=P[k].slice(),z=B.findIndex(Y=>yve(N,Y));z>-1&&N.containsPoint(B[z].end)&&B.splice(z+1,1);const U=wve(N,B);C.push.apply(C,U)}return C},[]).sort(function(C,R){return R4(N.start,C)-R4(N.start,R)});return d.length>0?O.push.apply(O,xve(N,d,s)):O.push(N),O},[]),E=k4(T,s,o,a);return i?E:E.serialize()},Ave=function(e,t,r=[],n={}){const{raw:i}=n;return RT(e,t,r,{cornerType:"point",raw:i})},Tve=10,Pve=0,Cve=function(e,t,r=[],n={}){const{radius:i=Tve,raw:s}=n;return RT(e,t,r,{cornerType:"cubic",cornerRadius:i,precision:Pve,raw:s})},Ove=function(e,t,r,n){var i=n&&n.raw,s;if(r&&r.length!==0){var o=[e].concat(r).concat([t]),a=Qr.throughPoints(o);s=new zt(a)}else{s=new zt;var u;if(u=zt.createSegment("M",e),s.appendSegment(u),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;u=zt.createSegment("C",c,e.y,c,t.y,t.x,t.y),s.appendSegment(u)}else{var f=(e.y+t.y)/2;u=zt.createSegment("C",e.x,f,t.x,f,t.x,t.y),s.appendSegment(u)}}return i?s:s.serialize()},fo={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},es={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},kT=function(e,t,r=[],n={},i){const s=!!n.raw,{direction:o=fo.AUTO,precision:a=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new me(n.sourceTangent):null,targetTangent:n.targetTangent?new me(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new me(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new me(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new me(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new me(n.targetDirection).normalize():null;const c=[e,...r,t].map(_=>new me(_));let f;if(u.sourceTangent)f=u.sourceTangent;else{const _=Lve(i,c,o,u),x=c[0].distance(c[1])*u.coeff,S=c[1].difference(c[0]).normalize(),P=ZE(_,S);if(P>Math.PI/4){const T=x+(P-Math.PI/4)*u.angleTangentCoefficient;f=_.clone().scale(T,T)}else f=_.clone().scale(x,x)}let h;if(u.targetTangent)h=u.targetTangent;else{const _=Nve(i,c,o,u),x=c.length-1,S=c[x-1].distance(c[x])*u.coeff,P=c[x-1].difference(c[x]).normalize(),T=ZE(_,P);if(T>Math.PI/4){const E=S+(T-Math.PI/4)*u.angleTangentCoefficient;h=_.clone().scale(E,E)}else h=_.clone().scale(S,S)}const y=Dve(c,f,h,u).map(_=>Fve(_,u)),m=new zt(y).round(a);return s?m:m.serialize()};kT.Directions=fo;kT.TangentDirections=es;function Ive(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.x>t[1].x?i="right":i="left";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"left":o=new me(-1,0);break;case"right":default:o=new me(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Rve(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.x>t[t.length-2].x?i="left":i="right";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"left":o=new me(-1,0);break;case"right":default:o=new me(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function kve(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.y>t[1].y?i="bottom":i="top";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new me(0,-1);break;case"bottom":default:o=new me(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function Mve(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.y>t[t.length-2].y?i="top":i="bottom";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new me(0,-1);break;case"bottom":default:o=new me(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function M4(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)i=n.sideNearestToPoint(t[1]);else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new me(0,-1);break;case"bottom":o=new me(0,1);break;case"right":o=new me(1,0);break;case"left":o=new me(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function L4(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)i=n.sideNearestToPoint(t[t.length-2]);else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new me(0,-1);break;case"bottom":o=new me(0,1);break;case"right":o=new me(1,0);break;case"left":o=new me(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function N4(e,t,r){return t[1].difference(t[0]).normalize()}function q4(e,t,r){const n=t.length-1;return t[n-1].difference(t[n]).normalize()}function D4(e,t,r){const{sourceBBox:n}=e,i=n.center();return t[0].difference(i).normalize()}function F4(e,t,r){const{targetBBox:n}=e,i=n.center();return t[t.length-1].difference(i).normalize()}function Lve(e,t,r,n){if(n.sourceDirection)switch(n.sourceDirection){case es.UP:return new me(0,-1);case es.DOWN:return new me(0,1);case es.LEFT:return new me(-1,0);case es.RIGHT:return new me(1,0);case es.AUTO:return M4(e,t,n);case es.CLOSEST_POINT:return N4(e,t);case es.OUTWARDS:return D4(e,t);default:return n.sourceDirection}switch(r){case fo.HORIZONTAL:return Ive(e,t,n);case fo.VERTICAL:return kve(e,t,n);case fo.CLOSEST_POINT:return N4(e,t);case fo.OUTWARDS:return D4(e,t);case fo.AUTO:default:return M4(e,t,n)}}function Nve(e,t,r,n){if(n.targetDirection)switch(n.targetDirection){case es.UP:return new me(0,-1);case es.DOWN:return new me(0,1);case es.LEFT:return new me(-1,0);case es.RIGHT:return new me(1,0);case es.AUTO:return L4(e,t,n);case es.CLOSEST_POINT:return q4(e,t);case es.OUTWARDS:return F4(e,t);default:return n.targetDirection}switch(r){case fo.HORIZONTAL:return Rve(e,t,n);case fo.VERTICAL:return Mve(e,t,n);case fo.CLOSEST_POINT:return q4(e,t);case fo.OUTWARDS:return F4(e,t);case fo.AUTO:default:return L4(e,t,n)}}function qve(e,t){const r=Math.cos(t),n=Math.sin(t),i=r*e.x-n*e.y,s=n*e.x+r*e.y;e.x=i,e.y=s}function ZE(e,t){let r=e.dot(t)/(e.magnitude()*t.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function B4(e,t){return e.x*t.y-e.y*t.x}function Dve(e,t,r,n){const{tau:i,coeff:s}=n,o=[],a=[],u=[],c=e.length-1;for(let f=0;f<c;f++)o[f]=e[f].distance(e[f+1]);a[0]=t,a[c]=r;for(let f=1;f<c;f++){let h,v;f===1?h=e[f-1].clone().offset(a[f-1].x,a[f-1].y):h=e[f-1].clone(),f===c-1?v=e[f+1].clone().offset(a[f+1].x,a[f+1].y):v=e[f+1].clone();const y=h.difference(e[f]).normalize(),m=v.difference(e[f]).normalize(),_=ZE(y,m);let x=(Math.PI-_)/2,S;const P=B4(y,m);let T;T=B4(e[f].difference(e[f+1]),e[f].difference(e[f-1])),P<0&&(x=-x),_<Math.PI/2&&(x<0&&T<0||x>0&&T>0)&&(x=x-Math.PI),S=m.clone(),qve(S,x);const E=S.clone(),O=S.clone(),N=o[f-1]*s,d=o[f]*s;E.scale(N,N),O.scale(d,d),a[f]=[E,O]}for(let f=0;f<c;f++){let h,v;f===0?h=e[f+1].difference(a[f].x/i,a[f].y/i):h=e[f+1].difference(a[f][1].x/i,a[f][1].y/i),f===c-1?v=e[f].clone().offset(a[f+1].x/i,a[f+1].y/i):v=e[f].difference(a[f+1][0].x/i,a[f+1][0].y/i),u[f]=[h,e[f],e[f+1],v]}return u}function Fve(e,t){const{tau:r}=t,n=new me;n.x=e[1].x+(e[2].x-e[0].x)/(6*r),n.y=e[1].y+(e[2].y-e[0].y)/(6*r);const i=new me;return i.x=e[2].x+(e[3].x-e[1].x)/(6*r),i.y=e[2].y+(e[3].y-e[1].y)/(6*r),new Qr(e[1],n,i,e[2])}const Bve=Object.freeze(Object.defineProperty({__proto__:null,curve:kT,jumpover:Eve,normal:Ave,rounded:Cve,smooth:Ove,straight:RT},Symbol.toStringTag,{value:"Module"})),or={TOOLS:Tr.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Zi=Tr.extend({className:function(){var e=Tr.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Tr.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[or.RENDER],attrs:[or.UPDATE],router:[or.UPDATE],connector:[or.CONNECTOR],smooth:[or.UPDATE],manhattan:[or.UPDATE],toolMarkup:[or.LEGACY_TOOLS],labels:[or.LABELS],labelMarkup:[or.LABELS],vertices:[or.VERTICES,or.UPDATE],vertexMarkup:[or.VERTICES],source:[or.SOURCE,or.UPDATE],target:[or.TARGET,or.UPDATE]},initFlag:[or.RENDER,or.SOURCE,or.TARGET,or.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,or.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,or.SOURCE)}if(this.hasFlag(e,or.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,or.TARGET)}const{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return e;if(this.hasFlag(e,or.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[or.RENDER,or.UPDATE,or.VERTICES,or.LABELS,or.TOOLS,or.LEGACY_TOOLS,or.CONNECTOR]),e;let s=!1;this.hasFlag(e,or.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,or.VERTICES));const{model:o}=this,{attributes:a}=o;let u=this.hasFlag(e,or.LABELS),c=this.hasFlag(e,or.LEGACY_TOOLS);u&&(this.onLabelsChange(o,a.labels,t),e=this.removeFlag(e,or.LABELS),s=!0),c&&(this.renderTools(),e=this.removeFlag(e,or.LEGACY_TOOLS));const f=this.hasFlag(e,or.UPDATE),h=this.hasFlag(e,or.CONNECTOR);return(f||h)&&(f?t.translateBy&&o.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[or.UPDATE,or.TOOLS,or.CONNECTOR]),u=!1,c=!1,s=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,or.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,or.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(or.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],n=r.length;if(n>1){var i=!!t[r[1]];if(i){if(n===2)return"markup"in Object(e.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=We(e);Array.isArray(t)||(t=[t]);for(var r=this._V,n=0,i=t.length;n<i;n++){var s=t[n],o=s.attr("class");o&&(o=Kde(o),r[Nt.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=We(e),r=document.createDocumentFragment();if(!Array.isArray(t))r.appendChild(t.node);else for(var n=0,i=t.length;n<i;n++){var s=t[n].node;r.appendChild(s)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=t.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=We("g").append(t):r=We(n[0]),r.addClass("label"),{node:r.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=We("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(Mo(ni(this,"className"))),t.attr("model-id",i.id)));for(var a=0;a<o;a++){var u=s[a],c=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),f,h;if(c)f=c.node,h=c.selectors;else{var v=i._builtins.defaultLabel,y=this._normalizeLabelMarkup(this._getLabelMarkup(v.markup)),m=i._getDefaultLabel(),_=this._normalizeLabelMarkup(this._getLabelMarkup(m.markup)),x=_||y;f=x.node,h=x.selectors}f.setAttribute("label-idx",a),t.append(f),r[a]=f;var S=this.selector;if(h[S])throw new Error("dia.LinkView: ambiguous label root selector.");h[S]=f,n[a]=h}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:r,_V:n,options:i}=this,{labels:s}=n;if(!s||!r.hasLabels())return;const{node:o}=s;i.labelsLayer?t.getLayerView(i.labelsLayer).insertSortedNode(o,r.get("z")):o.parentNode!==e&&e.appendChild(o)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:r}=t;r&&e.labelsLayer&&r.remove()},findLabelNode:function(e,t){const r=this._labelCache[e];if(!r)return null;const n=this._labelSelectors[e],[i=null]=this.findBySelector(t,r,n);return i},_mergeLabelAttrs:function(e,t,r,n){return t===null?null:t===void 0?r===null?null:r===void 0?e?void 0:n:e?r:ai({},n,r):e?ai({},r,t):ai({},n,r,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:ai({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],r=this.can("labelMove"),n=e._builtins.defaultLabel,i=n.attrs,s=e._getDefaultLabel(),o=s.markup,a=s.attrs,u=s.size,c=0,f=t.length;c<f;c++){var h=this._labelCache[c];h.setAttribute("cursor",r?"move":"default");var v=this._labelSelectors[c],y=t[c],m=y.markup,_=y.attrs,x=y.size,S=this._mergeLabelAttrs(m||o,_,a,i),P=this._mergeLabelSize(x,u);this.updateDOMSubtreeAttributes(h,S,{rootBBox:new yt(P),selectors:v})}return this},renderTools:function(){if(!this._V.linkTools)return this;var e=Nt(this._V.linkTools.node).empty(),t=Ji(this.model.get("toolMarkup")||this.model.toolMarkup),r=We(t());if(e.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=Ji(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=We(t())):n=r.clone(),e.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=Nt(this._V.markerVertices.node).empty(),t=Ji(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){e.append(We(t(Xt({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=Nt(this._V.markerArrowheads.node);e.empty();var t=Ji(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=We(t({end:"source"})),this._V.targetArrowhead=We(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],s=i.length,o=new wn(i);o.simplify({threshold:.001});const a=o.points.map(c=>c.toJSON()),u=a.length;return s===u?0:(r.vertices(a.slice(1,u-1),e),s-u)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new me(this.sourceAnchor);case"target":return new me(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new me(this.sourcePoint);case"target":return new me(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:r,path:n}=this;if(!r||!n)return;const i=new wn(r);i.translate(e,t),this.route=i.points,this._translateConnectionPoints(e,t),n.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),r=this.findAnchors(t),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,s=this.findRoute(t);this.route=s;var o=this.findConnectionPoints(s,n,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:r}=this,n=this.findMarkerPoints(e,t,r),i=this.findPath(e,n.source||t,n.target||r);this.path=i},findMarkerPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this._markerCache,o,a;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=me(t).move(n||r,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),a=me(r).move(i||t,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||t.clone(),s.targetPoint=a||r.clone(),{source:o,target:a}},findAnchorsOrdered:function(e,t,r,n){var i,s,o,a,u=this.model,c=u.get(e),f=u.get(r),h=this.getEndView(e),v=this.getEndView(r),y=this.getEndMagnet(e),m=this.getEndMagnet(r);h?(t?o=new me(t):v?o=m:o=new me(f),i=this.getAnchor(c.anchor,h,y,o,e)):i=new me(c),v?(a=new me(n||i),s=this.getAnchor(f.anchor,v,m,a,r)):s=new me(f);var _={};return _[e]=i,_[r]=s,_},findAnchors:function(e){var t=this.model,r=e[0],n=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this.model,o=s.get("source"),a=s.get("target"),u=this.sourceView,c=this.targetView,f=this.paper.options,h,v,y;if(u&&!u.isNodeConnection(this.sourceMagnet)){h=this.sourceMagnet||u.el;var m=o.connectionPoint||f.defaultConnectionPoint,_=n||r,x=new Et(_,t);y=this.getConnectionPoint(m,u,h,x,"source")}else y=t;var S;if(c&&!c.isNodeConnection(this.targetMagnet)){v=this.targetMagnet||c.el;var P=a.connectionPoint||f.defaultConnectionPoint,T=i||t,E=new Et(T,r);S=this.getConnectionPoint(P,c,v,E,"target")}else S=r;return{source:y,target:S}},getAnchor:function(e,t,r,n,i){var s=t.isNodeConnection(r),o=this.paper.options;if(e||(s?e=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?e={name:"perpendicular"}:e=o.defaultAnchor),!e)throw new Error("Anchor required.");var a;if(typeof e=="function")a=e;else{var u=e.name,c=s?"linkAnchorNamespace":"anchorNamespace";if(a=o[c][u],typeof a!="function")throw new Error("Unknown anchor: "+u)}var f=a.call(this,t,r,n,e.args||{},i,this);return f?f.round(this.decimalsRounding):new me},getConnectionPoint:function(e,t,r,n,i){var s,o=n.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var u=r===t.el?void 0:r;if(s=a.linkConnectionPoint(this,t,u,n.start,i),s)return s}if(!e)return o;var c;if(typeof e=="function")c=e;else{var f=e.name;if(c=a.connectionPointNamespace[f],typeof c!="function")throw new Error("Unknown connection point: "+f)}return s=c.call(this,n,t,r,e.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(e,t){var r=this._markerCache;r.sourcePoint.offset(e,t),r.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,r=t.position,n=e._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return ai({},r,i)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:ai({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,r=t.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,s=r.length;i<s;i++){var o=this._labelCache[i];if(o){var a=r[i],u=this._normalizeLabelPosition(a.position),c=this._mergeLabelPositionProperty(u,n),f=this._getLabelTransformationMatrix(c);o.setAttribute("transform",We.matrixToTransformString(f)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:r}=this,n=r[e];if(n)for(let i in n){const{id:s}=n[i];s&&s in t&&delete t[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var n=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+e),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||t;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+e),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(Nt.css(this._V.markerArrowheads.node,"display")==="none")return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:r}=this,n=`${e}View`,i=t.get(e),s=i&&i.id;if(!s)return this[n]=null,this.updateEndMagnet(e),!0;const o=r.getModelById(s);if(!o)throw new Error("LinkView: invalid "+e+" cell.");const a=o.findView(r);return a?(this[n]=a,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,r=this.getEndView(e);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(e));n===r.el&&(n=null),this[t]=n}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var r=zr(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:ai({},t,e)},addLabel:function(e,t,r,n){var i,s,o=0,a;typeof e!="number"?(i=e.x,s=e.y,typeof t=="number"?(o=t,a=r):a=t):(i=e,s=t,typeof r=="number"?(o=r,a=n):a=r);var u=this._getDefaultLabelPositionArgs(),c=a,f=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,s,o,f)},v=-1;return this.model.insertLabel(v,h,a),v},addVertex:function(e,t,r){var n=typeof e!="number",i=n?e.x:e,s=n?e.y:t,o=n?t:r,a={x:i,y:s},u=this.getVertexIndex(i,s);return this.model.insertVertex(u,a,o),u},sendToken:function(e,t,r){function n(h,v){return function(){h.remove(),typeof v=="function"&&v()}}var i,s,o;Jr(t)?(i=t.duration,s=t.direction==="reverse",o=t.connection):(i=t,s=!1,o=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(a.keyPoints="1;0",a.keyTimes="0;1");var u=We(e),c;if(typeof o=="string")c=this.findBySelector(o,this.el,this.selectors)[0];else{var f=this._V;c=f.connection?f.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,c),setTimeout(n(u,r),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||fve,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return e.map(me);var i=_n(r)?r:t[r.name];if(!_n(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var s=r.args||{},o=i.call(this,e,s,this);return o||e.map(me)},findPath:function(e,t,r){var n=this.paper.options.connectorNamespace||Bve,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=_n(i)?i:n[i.name];if(!_n(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=ha(i.args||{});a.raw=!0;var u=o.call(this,t,r,e,a,this);return typeof u=="string"&&(u=new zt(We.normalizePathData(u))),u},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var r=e.serialize();return t.data=r,r},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var r=e.getSegmentSubdivisions();return t.segmentSubdivisions=r,r},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var r=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=r,r},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(ki(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,r,n){var i={},s=0,o;typeof r=="number"?(s=r,o=n):o=r,o&&(i.args=o);var a=!(o&&o.absoluteDistance),u=o&&o.absoluteDistance&&o.reverseDistance,c=o&&o.absoluteOffset,f=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},v=new me(e,t),y=f.closestPointT(v,h),m=f.lengthAtT(y,h);a&&(m=m/this.getConnectionLength()||0),u&&(m=-1*(this.getConnectionLength()-m)||1),i.distance=m;var _;c||(_=f.tangentAtT(y));var x;if(_)x=_.pointOffset(v);else{var S=f.pointAtT(y),P=v.difference(S);x={x:P.x,y:P.y}}return i.offset=x,i.angle=s,i},_getLabelTransformationMatrix:function(e){var t,r=0,n={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")n=e.args||{},t=e.distance,r=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=t>0&&t<=1,s=0,o={x:0,y:0};if(e.offset){var a=e.offset;typeof a=="number"&&(s=a),a.x&&(o.x=a.x),a.y&&(o.y=a.y)}var u=o.x!==0||o.y!==0||s===0,c=n.keepGradient,f=n.ensureLegibility,h=this.path,v={segmentSubdivisions:this.getConnectionSubdivisions()},y=i?t*this.getConnectionLength():t,m=h.tangentAtLength(y,v),_,x=r;if(m){if(u)_=m.start.clone(),_.offset(o);else{var S=m.clone();S.rotate(m.start,-90),S.setLength(s),_=S.end}c&&(x=m.angle()+r,f&&(x=$o((x+90)%180-90)))}else _=h.start.clone(),u&&_.offset(o);return We.createSVGMatrix().translate(_.x,_.y).rotate(x)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new me(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new me(e,t)),s=0,o=n.length;s<o;s++){var a=n[s],u=this.getClosestPointLength(a);if(i<u)break}return s},notifyPointerdown(e,t,r){Tr.prototype.pointerdown.call(this,e,t,r),this.notify("link:pointerdown",e,t,r)},notifyPointermove(e,t,r){Tr.prototype.pointermove.call(this,e,t,r),this.notify("link:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("link:pointerup",e,t,r),Tr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){Tr.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){Tr.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,r)},contextmenu:function(e,t,r){Tr.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r);var n=e.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(e,t,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(e,t,r);return;case"marker-arrowhead":this.dragArrowheadStart(e,t,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(e,t,r);return;case"marker-source":case"marker-target":return}this.dragStart(e,t,r)},pointermove:function(e,t,r){var n=this._dragData;n&&this.eventData(e,n);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertex(e,t,r);break;case"label-move":this.dragLabel(e,t,r);break;case"arrowhead-move":this.dragArrowhead(e,t,r);break;case"move":this.drag(e,t,r);break}n&&Xt(n,this.eventData(e)),this.notifyPointermove(e,t,r)},pointerup:function(e,t,r){var n=this._dragData;n&&(this.eventData(e,n),this._dragData=null);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertexEnd(e,t,r);break;case"label-move":this.dragLabelEnd(e,t,r);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,r);break;case"move":this.dragEnd(e,t,r)}this.notifyPointerup(e,t,r),this.checkMouseleave(e)},mouseover:function(e){Tr.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){Tr.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){Tr.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){Tr.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,r,n){Tr.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){var i=We(e.target).findParentByClass("link-tool",this.el);if(i){if(e.stopPropagation(),this.can("useLinkTools"))if(t==="remove"){this.model.remove({ui:!0});return}else this.notify(t,e,r,n);this.notifyPointerdown(e,r,n),this.paper.delegateDragEvents(this,e.data)}else Tr.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragLabelStart(e,t,r);var n=this.eventData(e).stopPropagation;n&&e.stopPropagation()},dragConnectionStart:function(e,t,r){if(this.can("vertexAdd")){var n=this.addVertex({x:t,y:r},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(e,t,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var n=e.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(o,s),u=this.getLabelCoordinates(a),c=u.x-t,f=u.y-r,h=this._getLabelPositionAngle(i),v=this._getLabelPositionArgs(i),y=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(v,y);this.eventData(e,{action:"label-move",labelIdx:i,dx:c,dy:f,positionAngle:h,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,r){if(this.can("vertexMove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(e,t,r){if(this.can("vertexRemove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(e,t,r){if(this.can("arrowheadMove")){var n=e.target,i=n.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,t,r){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:r})},dragLabel:function(e,t,r){var n=this.eventData(e),i={position:this.getLabelPosition(t+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(s.async=!1),this.model.label(n.labelIdx,i,s)},dragVertex:function(e,t,r){var n=this.eventData(e);this.model.vertex(n.vertexIdx,{x:t,y:r},{ui:!0})},dragArrowhead:function(e,t,r){this.paper.options.snapLinks?!this._snapArrowhead(e,t,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,r):this._connectArrowhead(this.getEventTarget(e),t,r,this.eventData(e))},drag:function(e,t,r){var n=this.eventData(e);this.model.translate(t-n.dx,r-n.dy,{ui:!0}),this.eventData(e,{dx:t,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,r){var n=this.eventData(e),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,t,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,e)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var r=e.arrowhead,n=e.initialEnd,i=this.model.prop(r),s=i&&!vf.endsEqual(n,i);if(s){var o=this.paper;n.id&&this.notify("link:disconnect",t,o.findViewByModel(n.id),e.initialMagnet,r),i.id&&this.notify("link:connect",t,o.findViewByModel(i.id),e.magnetUnderPointer,r)}},_snapToPoints:function(e,t,r){let n=null,i=1/0,s=null,o=1/0,a=e.x,u=e.y;for(let c=0;c<t.length;c++){const f=Math.abs(t[c].x-e.x);f<i&&(i=f,n=t[c]);const h=Math.abs(t[c].y-e.y);h<o&&(o=h,s=t[c])}return i<r&&(a=n.x),o<r&&(u=s.y),{x:a,y:u}},_snapArrowheadSelf:function(e,t,r){const{paper:n,model:i}=this,{snapLinksSelf:s}=n.options,o=this.eventData(e),a=s.radius||20,u=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),c=i.vertices(),f=[u,...c],h=this._snapToPoints({x:t,y:r},f,a),v=n.localToClientPoint(h);this._connectArrowhead(document.elementFromPoint(v.x,v.y),h.x,h.y,this.eventData(e))},_snapArrowhead:function(e,t,r){const{paper:n}=this,{snapLinks:i,connectionStrategy:s}=n.options,o=this.eventData(e);let a=!1;var u=i.radius||50,c=n.findViewsInArea({x:t-u,y:r-u,width:2*u,height:2*u}),f=o.closestView||null,h=o.closestMagnet||null,v=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var y=Number.MAX_VALUE,m=new me(t,r);c.forEach(function(O){const N=[];O.el.getAttribute("magnet")!=="false"&&N.push({bbox:O.model.getBBox(),magnet:O.el}),O.$("[magnet]").toArray().forEach(d=>{N.push({bbox:O.getNodeBBox(d),magnet:d})}),N.forEach(d=>{const{magnet:C,bbox:R}=d,k=R.center().squaredDistance(m);k<y&&(h===C||n.options.validateConnection.apply(n,o.validateConnectionArgs(O,O.el===C?null:C)))&&(y=k,o.closestView=O,o.closestMagnet=C)})},this);var _,x=null,S=o.closestView,P=o.closestMagnet;P&&(x=o.magnetProxy=S.findProxyNode(P,"highlighter"));var T=o.arrowhead,E=h!==P;if(f&&E&&f.unhighlight(v,{connecting:!0,snapping:!0}),S){const{prevEnd:O,prevX:N,prevY:d}=o;if(o.prevX=t,o.prevY=r,a=!0,!E&&(typeof s!="function"||N===t&&d===r)||(_=S.getLinkEnd(P,t,r,this.model,T),!E&&Tl(O,_)))return a;o.prevEnd=_,E&&S.highlight(x,{connecting:!0,snapping:!0})}else _={x:t,y:r};return this.model.set(T,_||{x:t,y:r},{ui:!0}),f&&this.notify("link:snap:disconnect",e,f,h,T),S&&this.notify("link:snap:connect",e,S,P,T),a},_snapArrowheadEnd:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(r)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,r,n){const{paper:i,model:s}=this;if(n.eventTarget!==e){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});const o=n.viewUnderPointer=i.findView(e);if(o){const a=n.magnetUnderPointer=o.findMagnet(e),u=n.magnetProxy=o.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(o,a))?u&&o.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=e,s.set(n.arrowhead,{x:t,y:r},{ui:!0})},_connectArrowheadEnd:function(e={},t,r){const{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:a}=e;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const u=i.getLinkEnd(s,t,r,n,a);n.set(a,u,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var r,n=0,i=0;e==="source"?(n=2,r="target"):(i=2,r="source");var s=this.model.get(r);if(s.id){var o=t[n]=this.paper.findViewByModel(s.id),a=o.getMagnetFromLinkEnd(s);a===o.el&&(a=void 0),t[n+1]=a}function u(c,f){return t[i]=c,t[i+1]=c.el===f?void 0:f,t}return u},_markAvailableMagnets:function(e){function t(h,v){var y=h.paper,m=y.options.validateConnection;return m.apply(y,this.validateConnectionArgs(h,v))}var r=this.paper,n=r.model.getCells();e.marked={};for(var i=0,s=n.length;i<s;i++){var o=n[i].findView(r);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&a.push(o.el);var u=a.filter(t.bind(e,o));if(u.length>0){for(var c=0,f=u.length;c<f;c++)o.highlight(u[c],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),e.marked[o.model.id]=u}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),r,n,i=0,s=t.length;i<s;i++){r=t[i],n=e.marked[r];var o=this.paper.findViewByModel(r);if(o){for(var a=0,u=n.length;a<u;a++)o.unhighlight(n[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var r={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:ha(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(r),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){Tr.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Tr.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Tr.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:or});Object.defineProperty(Zi.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new yt(t.x,t.y)}var r=this.sourceMagnet;return e.isNodeConnection(r)?new yt(this.sourceAnchor):e.getNodeBBox(r||e.el)}});Object.defineProperty(Zi.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new yt(t.x,t.y)}var r=this.targetMagnet;return e.isNodeConnection(r)?new yt(this.targetAnchor):e.getNodeBBox(r||e.el)}});const zve=Lo.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:r}=this,{useFirstSubpath:n}=r;let i;try{const s=We(t);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&n){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=e.getNodeBoundingRect(t);i=We.rectToPath(Xt({},r,o.toJSON()))}return i},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:r,options:n}=this,{padding:i,layer:s}=n;let o=this.getNodeMatrix(e,t);if(i){!s&&t===e.el&&r.remove();let a=e.getNodeBoundingRect(t);const u=a.x+a.width/2,c=a.y+a.height/2;a=We.transformRect(a,o);const f=Math.max(a.width,1),h=Math.max(a.height,1),v=(f+i)/f,y=(h+i)/h,m=We.createSVGMatrix({a:v,b:0,c:0,d:y,e:u-v*u,f:c-y*c});o=o.multiply(m)}r.attr({d:this.getPathData(e,t),transform:We.matrixToTransformString(o)})},highlight(e,t){const{vel:r,options:n}=this;r.attr(n.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),z4=20;function Vve(e,t){const r=e.children();for(;r.length>0;){const n=r.shift();t(n)&&r.push(...n.children())}}const Gve=Lo.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:z4,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,s=t.tagName();if(!We.isSVGGraphicsElement(t)||i.includes(s))return t.remove(),!1;if(n.includes(s)){const o=e.vel.findOne(`#${t.id}`);if(o){const{node:a}=o;let u=e.getNodeBoundingRect(a);e.model.isElement()&&(u=We.transformRect(u,e.getNodeMatrix(a)));const c=We("rect",u.toJSON()),{x:f,y:h}=u.center(),{angle:v,cx:y=f,cy:m=h}=o.rotate();v&&c.rotate(v,y,m),t.parent().append(c)}return t.remove(),!1}return r.forEach(o=>{o==="fill"&&t.attr("fill")==="none"||t.removeAttr(o)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{t.removeAttr(n)})},getMaskShape(e,t){const{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,s=t.tagName();let o;if(s==="G"){if(!i)return null;o=t.clone(),Vve(o,a=>this.transformMaskChild(e,a))}else{if(n.includes(s))return null;o=t.clone()}return this.transformMaskRoot(e,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:s,attrs:o}=i,a="stroke-width"in o?o["stroke-width"]:1,u=t.attr("fill")!=="none";let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const f=c+s*2,h=f+a*2;let v=this.getMaskShape(e,t);if(!v){const y=e.getNodeBoundingRect(t.node);y.inflate(y.width?0:.5,y.height?0:.5),v=We("rect",y.toJSON())}return v.attr(o),We("mask",{id:this.getMaskId()}).append([v.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":h}),v.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":f})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:r,vel:n}=this,{padding:i,attrs:s,maskClip:o=z4,layer:a}=r,u="stroke"in s?s.stroke:"#000000";!a&&t===e.el&&n.remove();const c=e.getNodeBoundingRect(t).inflate(i+o),f=this.getNodeMatrix(e,t),h=this.getMask(e,We(t));this.addMask(e.paper,h),n.attr(c.toJSON()),n.attr({transform:We.matrixToTransformString(f),mask:`url(#${h.id})`,fill:u})},unhighlight(e){this.removeMask(e.paper)}}),$ve=Lo.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Mo("highlight-opacity"),highlight:function(e,t){We(t).addClass(this.opacityClassName)},unhighlight:function(e,t){We(t).removeClass(this.opacityClassName)}}),V4=Mo("highlighted"),Uve=Lo.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:V4},highlight:function(e,t){We(t).addClass(this.options.className)},unhighlight:function(e,t){We(t).removeClass(this.options.className)}},{className:V4}),hE={ROW:"row",COLUMN:"column"},jve=Lo.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const r=e.model,{attribute:n,size:i=20,gap:s=5,direction:o=hE.ROW}=this.options;if(!n)throw new Error("List: attribute is required");const a=typeof i=="number"?{width:i,height:i}:i,u=o===hE.ROW,c=u?a.width:a.height;let f=r.get(n);Array.isArray(f)||(f=[]);const h=this._prevItems||[],v=f.map((x,S)=>Tl(h[S],f[S]));if(h.length!==f.length||v.some(x=>!x)){const x=this.vel.children(),S=f.map((P,T)=>{const E=T in x?x[T].node:null;if(v[T])return E;const O=this.createListItem(P,a,E);if(!O)return null;if(!(O instanceof SVGElement))throw new Error("List: item must be an SVGElement");O.dataset.index=T,O.dataset.attribute=n;const N=T*(c+s);return O.setAttribute("transform",u?`translate(${N}, 0)`:`translate(0, ${N})`),O});this.vel.empty().append(S),this._prevItems=f}const y=f.length,m=y===0?0:y*c+(y-1)*s,_=u?{width:m,height:a.height}:{width:a.width,height:m};this.position(r,_)},position(e,t){const{vel:r,options:n}=this,{margin:i=5,position:s="top-left"}=n,{width:o,height:a}=e.size(),{left:u,right:c,top:f,bottom:h}=Cc(i),v=new yt(u,f,o-(u+c),a-(f+h));let{x:y,y:m}=Zj(v,s);switch(s){case Wn.CENTER:case Wn.TOP:case Wn.BOTTOM:{y-=t.width/2;break}case Wn.RIGHT:case Wn.BOTTOM_RIGHT:case Wn.TOP_RIGHT:{y-=t.width;break}}switch(s){case Wn.CENTER:case Wn.RIGHT:case Wn.LEFT:{m-=t.height/2;break}case Wn.BOTTOM:case Wn.BOTTOM_RIGHT:case Wn.BOTTOM_LEFT:{m-=t.height;break}}r.attr("transform",`translate(${y}, ${m})`)}},{Directions:hE,Positions:Wn}),Hve=Object.freeze(Object.defineProperty({__proto__:null,addClass:Uve,list:jve,mask:Gve,opacity:$ve,stroke:zve},Symbol.toStringTag,{value:"Module"}));function Wve(e,t,r,n){var i="ratio"in n?n.ratio:.5;return e.getPointAtRatio(i)}function Xve(e,t,r,n){var i="length"in n?n.length:20;return e.getPointAtLength(i)}function Yve(e,t,r,n){var i=1e6,s=e.getConnection(),o=e.getConnectionSubdivisions(),a=new Et(r.clone().offset(0,i),r.clone().offset(0,-1e6)),u=new Et(r.clone().offset(i,0),r.clone().offset(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),f=u.intersect(s,{segmentSubdivisions:o}),h=[];return c&&Array.prototype.push.apply(h,c),f&&Array.prototype.push.apply(h,f),h.length>0?r.chooseClosest(h):"fallbackAt"in n?p9(e,n.fallbackAt):v9(e,t,r,n)}function Kve(e,t,r,n){var i=e.getClosestPoint(r);return i||new me}function hd(e){return function(t,r,n,i){if(n instanceof Element){var s=this.paper.findView(n),o;if(s)if(s.isNodeConnection(n)){var a="fixedAt"in i?i.fixedAt:"50%";o=p9(s,a)}else o=s.getNodeBBox(n).center();else o=new me;return e.call(this,t,r,o,i)}return e.apply(this,arguments)}}function p9(e,t){var r=parseFloat(t);return ki(t)?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const Jve=hd(Yve),v9=hd(Kve),Zve=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:v9,connectionLength:Xve,connectionPerpendicular:Jve,connectionRatio:Wve,resolveRef:hd},Symbol.toStringTag,{value:"Module"}));function Rg(e,t,r){if(ri(r)){const{x:i,y:s}=r;if(isFinite(s)){const o=new Et(t,e),{start:a,end:u}=o.parallel(s);t=a,e=u}r=i}if(!isFinite(r))return e;var n=e.distance(t);return r===0&&n>0?e:e.move(t,-Math.min(r,n-1))}function MT(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function Qve(e,t,r=0){let n,i,s,o;const{start:a,end:u}=e;switch(t){case"left":n="x",i=u,s=a,o=-1;break;case"right":n="x",i=a,s=u,o=1;break;case"top":n="y",i=u,s=a,o=-1;break;case"bottom":n="y",i=a,s=u,o=1;break;default:return}a[n]<u[n]?i[n]=s[n]:s[n]=i[n],isFinite(r)&&(i[n]+=o*r,s[n]+=o*r)}function ege(e,t,r,n){let{offset:i,alignOffset:s,align:o}=n;return o&&Qve(e,o,s),Rg(e.end,e.start,i)}function g9(e,t,r,n){var i=t.getNodeBBox(r);n.stroke&&i.inflate(MT(r)/2);var s=e.intersect(i),o=s?e.start.chooseClosest(s):e.end;return Rg(o,e.start,n.offset)}function tge(e,t,r,n){var i=t.model.angle();if(i===0)return g9(e,t,r,n);var s=t.getNodeUnrotatedBBox(r);n.stroke&&s.inflate(MT(r)/2);var o=s.center(),a=e.clone().rotate(o,i),u=a.setLength(1e6).intersect(s),c=u?a.start.chooseClosest(u).rotate(o,-i):e.end;return Rg(c,e.start,n.offset)}function rge(e){if(!e)return null;var t=e;do{var r=t.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")t=t.firstElementChild;else if(r==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var dE="segmentSubdivisons",pE="shapeBBox";function nge(e,t,r,n){var i,s,o=n.selector,a=e.end;if(typeof o=="string"?i=t.findBySelector(o)[0]:o===!1?i=r:Array.isArray(o)?i=Nh(r,o):i=rge(r),!We.isSVGGraphicsElement(i)){if(i===r||!We.isSVGGraphicsElement(r))return a;i=r}var u=t.getNodeShape(i),c=t.getNodeMatrix(i),f=t.getRootTranslateMatrix(),h=t.getRootRotateMatrix(),v=f.multiply(h).multiply(c),y=v.inverse(),m=We.transformLine(e,y),_=m.start.clone(),x=t.getNodeData(i);if(n.insideout===!1){x[pE]||(x[pE]=u.bbox());var S=x[pE];if(S.containsPoint(_))return a}var P;if(u instanceof zt){var T=n.precision||2;x[dE]||(x[dE]=u.getSegmentSubdivisions({precision:T})),P={precision:T,segmentSubdivisions:x[dE]}}n.extrapolate===!0&&m.setLength(1e6),s=m.intersect(u,P),s?We.isArray(s)&&(s=_.chooseClosest(s)):n.sticky===!0&&(u instanceof yt?s=u.pointNearestToPoint(_):u instanceof rs?s=u.intersectionWithLineFromCenterToPoint(_):s=u.closestPoint(_,P));var E=s?We.transformPoint(s,v):a,O=n.offset||0;return n.stroke&&(O+=MT(i)/2),Rg(E,e.start,O)}const ige=ege,sge=g9,oge=tge,age=nge,uge=Object.freeze(Object.defineProperty({__proto__:null,anchor:ige,bbox:sge,boundary:age,rectangle:oge},Symbol.toStringTag,{value:"Module"}));function hu(e){return function(t,r,n,i){var s=!!i.rotate,o=s?t.getNodeUnrotatedBBox(r):t.getNodeBBox(r),a=o[e](),u=i.dx;if(u){var c=ki(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=o.width),a.x+=u)}var f=i.dy;if(f){var h=ki(f);f=parseFloat(f),isFinite(f)&&(h&&(f/=100,f*=o.height),a.y+=f)}return s?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}function cge(e,t,r,n){var i=e.model.angle(),s=e.getNodeBBox(t),o=s.center(),a=s.origin(),u=s.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=r.y&&r.y<=u.y-c){var f=r.y-o.y;o.x+=i===0||i===180?0:f*1/Math.tan(bs(i)),o.y+=f}else if(a.x+c<=r.x&&r.x<=u.x-c){var h=r.x-o.x;o.y+=i===90||i===270?0:h*Math.tan(bs(i)),o.x+=h}return o}function lge(e,t,r,n){var i=!!n.rotate,s,o,a;i?(s=e.getNodeUnrotatedBBox(t),a=e.model.getBBox().center(),o=e.model.angle()):s=e.getNodeBBox(t);var u=n.padding;isFinite(u)&&s.inflate(u),i&&r.rotate(a,o);var c=s.sideNearestToPoint(r),f;switch(c){case"left":f=s.leftMiddle();break;case"right":f=s.rightMiddle();break;case"top":f=s.topMiddle();break;case"bottom":f=s.bottomMiddle();break}return i?f.rotate(a,-o):f}function fge(e,t,r,n,i){return e.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}const hge=hu("center"),dge=hu("topMiddle"),pge=hu("bottomMiddle"),vge=hu("leftMiddle"),gge=hu("rightMiddle"),mge=hu("origin"),yge=hu("topRight"),_ge=hu("bottomLeft"),bge=hu("corner"),wge=hd(cge),xge=hd(lge),Sge=fge,Ege=Object.freeze(Object.defineProperty({__proto__:null,bottom:pge,bottomLeft:_ge,bottomRight:bge,center:hge,left:vge,midSide:xge,modelCenter:Sge,perpendicular:wge,right:gge,top:dge,topLeft:mge,topRight:yge},Symbol.toStringTag,{value:"Module"})),bl={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Age=50,G4=20,$4=1e3,Tge=1/0,Ip=9007199254740991,vE=Tr.Highlighting,U4={[vE.DEFAULT]:{name:"stroke",options:{padding:3}},[vE.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[vE.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Pge=[{name:uo.BACK},{name:uo.CELLS},{name:uo.LABELS},{name:uo.FRONT},{name:uo.TOOLS}],m9=nu.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:Ai,linkView:Zi,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:U4,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new vf,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,r){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,r,n,i,s){return(i==="target"?r:e)instanceof Ai},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:bl.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,r,n,i){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(e,r,n)},onViewPostponed:function(e,t,r){return r.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Hve,anchorNamespace:Ege,linkAnchorNamespace:Zve,connectionPointNamespace:uge,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Qa(joint,"shapes")?joint.shapes:null);const r=this.model=e.model||new Fo;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=Nt(t.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,r){var n=r.position;this.isAsync()||!gs(n)?this.renderView(e,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,r){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===bl.APPROX){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(t)&&!r.hasActiveBatch(n)&&this.updateViews(e)}var i=this.SORT_DELAYING_BATCHES;i.includes(t)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:a,cellViewNamespace:u,interactive:c}=e;!u&&typeof joint<"u"&&Qa(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),_n(t)||(e.defaultConnector=oo(t)),_n(r)||(e.defaultRouter=oo(r)),_n(n)||(e.defaultConnectionPoint=oo(n)),_n(i)||(e.defaultAnchor=oo(i)),_n(s)||(e.defaultLinkAnchor=oo(s)),ri(c)&&(e.interactive=Xt({},c)),ri(a)&&(e.highlighting=CT({},a,U4)),e.origin=Xt({},o)},children:function(){var e=We.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Mo("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Mo("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Mo("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:r,defs:n,layers:i,background:s,grid:o}=e;return r.style.overflow=t.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=Nt(s),this.$grid=Nt(o),this.renderLayers(),We.ensureId(r),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Pge){this.removeLayers(),e.forEach(({name:i,sorted:s})=>{const o=new qpe({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const t=this.getLayerView(uo.CELLS),r=this.getLayerView(uo.TOOLS),n=this.getLayerView(uo.LABELS);this.tools=r.el,this.cells=this.viewport=t.el,t.vel.addClass(Mo("viewport")),n.vel.addClass(Mo("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(e===void 0){var r=t.getAttribute("transform");return(this._viewportTransformString||null)===r?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=r),We.createSVGMatrix(e)}e=We.createSVGMatrix(e);var n=We.matrixToTransformString(e);return t.setAttribute("transform",n),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return We.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,r){if(e instanceof Tr)for(var n=e.model,i=this.model.getConnectedLinks(n),s=0,o=i.length;s<o;s++){var a=i[s],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var f=Math.max(t+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),f,r)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof Tr))return!1;var r=e.model;if(r.isElement())return!1;if((t&e.getFlag(["SOURCE","TARGET"]))===0){var n={silent:!0},i=0,s=this.findViewByModel(r.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,n),e.updateEndMagnet("source"));var o=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a,n),e.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(e,n)}return!1},requestViewUpdate:function(e,t,r,n){n||(n={}),this.scheduleViewUpdate(e,t,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(n);i&&this.notifyAfterRender(s,n)}},scheduleViewUpdate:function(e,t,r,n){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=e;let f=i.priorities[r];if(f||(f=i.priorities[r]={}),r>u)for(let y=r-1;y>=u;y--){const m=i.priorities[y];!m||!(c in m)||(f[c]|=m[c],delete m[c])}let h=f[c]||0;if((h&t)===t)return;h||i.count++,t&o&&h&a?f[c]^=a:t&a&&h&o&&(f[c]^=o),f[c]|=t;const v=s.onViewUpdate;typeof v=="function"&&v.call(this,e,t,r,n||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,r=e.cid,n=t.priorities[e.UPDATE_PRIORITY],i=this.registerMountedView(e)|n[r];return delete n[r],i},dumpView:function(e,t={}){const r=this.dumpViewUpdate(e);if(!r)return 0;const n=!t.silent;n&&this.notifyBeforeRender(t);const i=this.updateView(e,r,t);if(n){const s={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(s,t)}return i},updateView:function(e,t,r){if(!e)return 0;const{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:s,model:o}=e;if(e instanceof Tr){if(t&n)return this.removeView(o),0;if(t&i){const a=!!(t&s);a&&(t^=s),this.insertView(e,a),t^=i}}return t?e.confirmUpdate(t,r||{}):0},requireView:function(e,t){var r=this.findViewByModel(e);return r?(this.dumpView(r,t),r):null},registerUnmountedView:function(e){var t=e.cid,r=this._updates;if(t in r.unmounted)return 0;var n=r.unmounted[t]|=e.FLAG_INSERT;return r.unmountedCids.push(t),delete r.mounted[t],n},registerMountedView:function(e){var t=e.cid,r=this._updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var n=r.unmounted[t]||0;return delete r.unmounted[t],n},isViewMounted:function(e){if(!e)return!1;var t=e.cid,r=this._updates;return t in r.mounted},dumpViews:function(e){var t=qs({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,r=0,n=0,i=Ip;do n++,t=this.updateViewsBatch(e),r+=t.updated,i=Math.min(t.priority,i);while(!t.empty);const s={updated:r,batches:n,priority:i};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let r=t.length;for(;r>0&&r--;)for(let n in e[t[r]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:Ip});const{_updates:r,options:n}=this,i=r.id;if(i){HE(i),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const s=this.updateViewsBatch(e),o=qs({},e,{mountBatchSize:$4-s.mounted,unmountBatchSize:$4-s.unmounted}),a=this.checkViewport(o),u=a.unmounted,c=a.mounted;let f=t.processed;const h=r.count;s.updated>0?(f+=s.updated+s.unmounted,s.processed=f,t.priority=Math.min(s.priority,t.priority),s.empty&&c===0?(s.unmounted+=u,s.mounted+=c,s.priority=t.priority,this.notifyAfterRender(s,e),t.processed=0,t.priority=Ip,r.count=0):t.processed=f):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",e));const v=e.progress;if(h&&typeof v=="function"&&v.call(this,s.empty,f,h,s,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=jE(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let r=t.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||Tge,r=this._updates,n=0,i=0,s=0,o=0,a=Ip,u=!0,c=this.options,f=r.priorities,h="viewport"in e?e.viewport:c.viewport;typeof h!="function"&&(h=null);var v=c.onViewPostponed;typeof v!="function"&&(v=null);var y=Object.keys(f);e:for(var m=0,_=y.length;m<_;m++){var x=+y[m],S=f[x];for(var P in S){if(n>=t){u=!1;break e}var T=vc[P];if(!T){delete S[P];continue}var E=S[P];if((E&T.FLAG_REMOVE)===0){var O=P in r.unmounted;if(T.DETACHABLE&&h&&!h.call(this,T,!O,this)){O||(this.registerUnmountedView(T),this.detachView(T)),r.unmounted[P]|=E,delete S[P],s++;continue}O&&(E|=T.FLAG_INSERT,o++),E|=this.registerMountedView(T)}var N=this.updateView(T,E,e);if(N>0&&(S[P]=N,!v||!v.call(this,T,N,this)||S[P])){i++,u=!1;continue}a>x&&(a=x),n++,delete S[P]}}return{priority:a,updated:n,postponed:i,unmounted:s,mounted:o,empty:u}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=vc[t[i]];return n},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=vc[t[i]];return n},checkUnmountedViews:function(e,t){t||(t={});var r=0;typeof e!="function"&&(e=null);for(var n=("mountBatchSize"in t)?t.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=vc[c];if(f){if(f.DETACHABLE&&e&&!e.call(this,f,!1,this)){s.push(c);continue}r++;var h=this.registerMountedView(f);h&&this.scheduleViewUpdate(f,h,f.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,a),r},checkMountedViews:function(e,t){t||(t={});var r=0;if(typeof e!="function")return r;for(var n=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=vc[c];if(f){if(!f.DETACHABLE||e.call(this,f,!0,this)){s.push(c);continue}r++;var h=this.registerUnmountedView(f);h&&this.detachView(f)}}}return s.splice(0,a),r},checkViewVisibility:function(e,t={}){let r="viewport"in t?t.viewport:this.options.viewport;typeof r!="function"&&(r=null);const n=this._updates,{mounted:i,unmounted:s}=n,o=!e.DETACHABLE||!r||r.call(this,e,!1,this);let a=!1,u=!1;if(e.cid in i&&!o){this.registerUnmountedView(e)&&this.detachView(e);const h=n.mountedCids.indexOf(e.cid);n.mountedCids.splice(h,1),a=!0}if(!a&&e.cid in s&&o){const f=n.unmountedCids.indexOf(e.cid);n.unmountedCids.splice(f,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=qs({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in t?t.viewport:this.options.viewport,n=this.checkMountedViews(r,t);if(n>0){var i=this._updates.unmountedCids;t.mountBatchSize=Math.min(i.length-n,t.mountBatchSize)}var s=this.checkUnmountedViews(r,t);return{mounted:s,unmounted:n}},freeze:function(e){e||(e={});var t=this._updates,r=e.key,n=this.options.frozen,i=t.freezeKey;if(r&&r!==i){if(n&&i)return;t.freezeKey=r,t.keyFrozen=n}this.options.frozen=!0;var s=t.id;t.id=null,this.isAsync()&&s&&HE(s)},unfreeze:function(e){e||(e={});var t=this._updates,r=e.key,n=t.freezeKey;r&&n&&r!==n||(t.freezeKey=null,!(r&&r===n&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===bl.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,r=e.height;return gs(t)||(t=this.el.clientWidth),gs(r)||(r=this.el.clientHeight),{width:t,height:r}},setDimensions:function(e,t){const{options:r}=this,{width:n,height:i}=r;let s=e===void 0?n:e,o=t===void 0?i:t;if(n===s&&i===o)return;r.width=s,r.height=o,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,r=e.height;gs(t)&&(t=Math.round(t)),gs(r)&&(r=Math.round(r)),this.$el.css({width:t===null?"":t,height:r===null?"":r})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,r,n){Jr(e)?n=e:n=Xt({gridWidth:e,gridHeight:t,padding:r},n);const{x:i,y:s,width:o,height:a}=this.getFitToContentArea(n),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-s*c),this.setDimensions(o*u,a*c),new yt(i,s,o,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,r=e.gridHeight||1,n=Cc(e.padding||0),i=Math.max(e.minWidth||0,t),s=Math.max(e.minHeight||0,r),o=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,u=e.allowNewOrigin,c="contentArea"in e?new yt(e.contentArea):this.getContentArea(e),{sx:f,sy:h}=this.scale();c.x*=f,c.y*=h,c.width*=f,c.height*=h;let v=Math.ceil((c.width+c.x)/t),y=Math.ceil((c.height+c.y)/r);e.allowNegativeBottomRight||(v=Math.max(v,1),y=Math.max(y,1)),v*=t,y*=r;let m=0;(u==="negative"&&c.x<0||u==="positive"&&c.x>=0||u==="any")&&(m=Math.ceil(-c.x/t)*t,m+=n.left,v+=m);let _=0;return(u==="negative"&&c.y<0||u==="positive"&&c.y>=0||u==="any")&&(_=Math.ceil(-c.y/r)*r,_+=n.top,y+=_),v+=n.right,y+=n.bottom,v=Math.max(v,i),y=Math.max(y,s),v=Math.min(v,o),y=Math.min(y,a),new yt(-m/f,-_/h,v/f,y/h)},transformToFitContent:function(e){e||(e={});let t,r;if("contentArea"in e){const x=e.contentArea;t=this.localToPaperRect(x),r=new me(x)}else t=this.getContentBBox(e),r=this.paperToLocalPoint(t);if(!t.width||!t.height)return;qs(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const n=Cc(e.padding),i=e.minScaleX||e.minScale,s=e.maxScaleX||e.maxScale,o=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let u;if(e.fittingBBox)u=e.fittingBBox;else{const x=this.translate(),S=this.getComputedSize();u={x:x.tx,y:x.ty,width:S.width,height:S.height}}u=new yt(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});const c=this.scale();let f=u.width/t.width*c.sx,h=u.height/t.height*c.sy;if(e.preserveAspectRatio&&(f=h=Math.min(f,h)),e.scaleGrid){const x=e.scaleGrid;f=x*Math.floor(f/x),h=x*Math.floor(h/x)}f=Math.min(s,Math.max(i,f)),h=Math.min(a,Math.max(o,h));const v={x:f/c.sx,y:h/c.sy},y=this.options.origin;let m=u.x-r.x*f-y.x,_=u.y-r.y*h-y.y;switch(e.verticalAlign){case"middle":_=_+(u.height-t.height*v.y)/2;break;case"bottom":_=_+(u.height-t.height*v.y);break}switch(e.horizontalAlign){case"middle":m=m+(u.width-t.width*v.x)/2;break;case"right":m=m+(u.width-t.width*v.x);break}this.scale(f,h),this.translate(m,_)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new yt:We(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let r;return _n(t)?r=t.apply(this,e):t===!0?r=this.getArea():t?r=new yt(t):r=null,r},createViewForModel:function(e){const{options:t}=this;var r,n,i=t.cellViewNamespace,s=e.get("type")+"View",o=Nh(i,s,".");e.isLink()?(r=t.linkView,n=Zi):(r=t.elementView,n=Ai);var a=r.prototype instanceof ii.View?o||r:r.call(this,e)||o||n;return new a({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?uo.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:r,_updates:n}=this,i=r[t];if(i){var{cid:s}=i;const{mounted:o,unmounted:a}=n;i.remove(),delete r[t],delete o[s],delete a[s]}return i},renderView:function(e,t){const{id:r}=e,n=this._views;let i,s,o=!0;return r in n&&(i=n[r],i.model===e?(s=i.FLAG_INSERT,o=!1):this.removeView(e)),o&&(i=n[r]=this.createViewForModel(e),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(ni(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,t),i},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=e.length;n<i;n++)this.renderView(e[n],t);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){Do(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=Nt(this.cells).children("[model-id]"),t=this.model.get("cells");ipe(e,function(r,n){var i=t.get(r.getAttribute("model-id")),s=t.get(n.getAttribute("model-id")),o=i.attributes.z||0,a=s.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(e,t){const r=this.getLayerView(uo.CELLS),{el:n,model:i}=e;switch(this.options.sorting){case bl.APPROX:r.insertSortedNode(n,i.get("z"));break;case bl.EXACT:default:r.insertNode(n);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,r,n){if(e===void 0)return We.matrixToScale(this.matrix());t===void 0&&(t=e),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var s=i.tx-r*(e-1),o=i.ty-n*(t-1);this.translate(s,o)}e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var a=this.matrix();return a.a=e,a.d=t,this.matrix(a),this.trigger("scale",e,t,r,n),this},rotate:function(e,t,r){if(e===void 0)return We.matrixToRotate(this.matrix());if(t===void 0){var n=this.cells.getBBox();t=n.width/2,r=n.height/2}var i=this.matrix().translate(t,r).rotate(e).translate(-t,-r);return this.matrix(i),this},translate:function(e,t){if(e===void 0)return We.matrixToTranslate(this.matrix());const{options:r}=this,{origin:n,drawGrid:i}=r;e||(e=0),t||(t=0);const s=this.matrix();if(s.e===e&&s.f===t)return this;s.e=e,s.f=t,this.matrix(s);const{tx:o,ty:a}=this.translate();return n.x=o,n.y=a,this.trigger("translate",o,a),i&&this.drawGrid(),this},findView:function(e){var t=Fi(e)?this.cells.querySelector(e):e instanceof Nt?e[0]:e,r=this.findAttribute("model-id",t);if(r)return this._views[r]},findViewByModel:function(e){var t=Fi(e)||gs(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new me(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=qs(t||{},{strict:!1}),e=new yt(e);var r=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return r.filter(function(i){return i&&e[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var r=new me(e,t),n=We.transformPoint(r,this.matrix());return n},localToPaperRect:function(e,t,r,n){var i=new yt(e,t,r,n),s=We.transformRect(i,this.matrix());return s},paperToLocalPoint:function(e,t){var r=new me(e,t),n=We.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(e,t,r,n){var i=new yt(e,t,r,n),s=We.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(e,t){var r=new me(e,t),n=We.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(e,t,r,n){var i=new yt(e,t,r,n),s=We.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(e,t){var r=new me(e,t),n=We.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(e,t,r,n){var i=new yt(e,t,r,n),s=We.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,r,n){return this.localToPaperRect(e,t,r,n).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new me(e,t),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(e,t,r,n){var i=this.pageOffset(),s=new yt(e,t,r,n);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new me(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Zi))throw new Error("Must provide a linkView.");var t=e.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,t)||!r.linkPinning&&!i.linkPinning.call(this,n,t)||typeof r.allowLink=="function"&&!r.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return _n(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:r}=e;const{highlighting:n,highlighterNamespace:i}=this.options;if(t===void 0){if(!n||r&&(t=n[r],t===!1))return!1;t||(t=n.default)}if(!t)return!1;Fi(t)&&(t={name:t});const s=t.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:s}},onCellHighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.highlight(e,t,s)},onCellUnhighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.unhighlight(e,t,s)},pointerdblclick:function(e){e.preventDefault(),e=ti(e);var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,r.x,r.y):this.trigger("blank:pointerdblclick",e,r.x,r.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=ti(e);var r=this.findView(e.target);if(this.guard(e,r))return;var n=this.snapToGrid(e.clientX,e.clientY);r?r.pointerclick(e,n.x,n.y):this.trigger("blank:pointerclick",e,n.x,n.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=ti(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,r.x,r.y):this.trigger("blank:contextmenu",e,r.x,r.y)}},pointerdown:function(e){e=ti(e);const{target:t,button:r}=e,n=this.findView(t),i=r===2;if(n){if(!i&&this.guard(e,n))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!s&&e.preventDefault(),s&&n.preventDefaultInteraction(e);const o=this.customEventTrigger(e,n);if(o){if(o.isPropagationStopped())return;e.data=o.data}const a=t.closest("[magnet]");if(a&&n.el!==a&&n.el.contains(a)){const u=ti(Nt.Event(e.originalEvent,{data:e.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&e.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}e.data=u.data}}if(i){this.contextMenuFired=!0;const s=Nt.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdown(e,s.x,s.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,s.x,s.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var r=++t.mousemoved;if(!(r<=this.options.moveThreshold)){e=ti(e);var n=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,n.x,n.y):this.trigger("blank:pointermove",e,n.x,n.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=ti(e),r=this.snapToGrid(t.clientX,t.clientY),n=this.eventData(e).sourceView;n?n.pointerup(t,r.x,r.y):this.trigger("blank:pointerup",t,r.x,r.y),t.isPropagationStopped()||this.pointerclick(Nt.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=ti(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=ti(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=ti(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseenter(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=ti(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseleave(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:Gde(function(){const{event:e,deltas:t}=this._mw_evt_buffer,r=t.reduce((o,a)=>o+epe(a,Age),0),n=Math.pow(.995,r),{x:i,y:s}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,i,s,n),this._mw_evt_buffer={event:null,deltas:[]}},G4,{maxWait:G4}),mousewheel:function(e){e=ti(e);const t=this.findView(e.target);if(this.guard(e,t))return;const r=e.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:s}=Qde(r),o=this._events["paper:pinch"];if(e.ctrlKey&&o&&o.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,r.wheelDelta));t?t.mousewheel(e,n.x,n.y,a):this.trigger("blank:mousewheel",e,n.x,n.y,a),this.trigger("paper:pan",e,i,s)}},onevent:function(e){var t=e.currentTarget,r=t.getAttribute("event");if(r){var n=this.findView(t);if(n){if(e=ti(e),this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n.onevent(e,r,i.x,i.y)}}},magnetEvent:function(e,t){var r=e.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(e=ti(e),this.guard(e,i))return;var s=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,r,s.x,s.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=Nt.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,r,n,i,s){t.onmagnet(r,i,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetpointerdblclick(r,n,i,s)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetcontextmenu(r,n,i,s)})},onlabel:function(e){var t=e.currentTarget,r=this.findView(t);if(!r||(e=ti(e),this.guard(e,r)))return;const n=this.customEventTrigger(e,r,t);if(n){if(n.isPropagationStopped())return;e.data=n.data}var i=this.snapToGrid(e.clientX,e.clientY);r.onlabel(e,i.x,i.y)},getPointerArgs(e){const t=ti(e),{x:r,y:n}=this.snapToGrid(t.clientX,t.clientY);return[t,r,n]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:r}=e;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(t&&t.model&&t.model instanceof xa||this.svg===r||this.el===r||Nt.contains(this.svg,r))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:We("svg",{width:"100%",height:"100%"},We("defs")),patterns:{},add:function(e,t){We(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append(We("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return this.patterns[e]!==void 0}}),this._gridCache},setGrid:function(e){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var t=Array.isArray(e)?e:[e||{}];return t.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(Fi(e)&&Array.isArray(t[e]))return t[e].map(function(u){return Xt({},u)});var r=e||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(t[i])){var s=t[i].map(function(u){return Xt({},u)}),o=Array.isArray(r.args)?r.args:[r.args||{}];qs(o[0],Pc(e,"args"));for(var a=0;a<o.length;a++)s[a]&&Xt(s[a],o[a]);return s}return n?r:[r]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var r=Array.isArray(e)?e:[e],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,a){var u="pattern_"+a,c=ai(o,r[a],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});c.width=t*(n.a||1)*(c.scaleFactor||1),c.height=t*(n.d||1)*(c.scaleFactor||1),i.exist(u)||i.add(u,We("pattern",{id:u,patternUnits:"userSpaceOnUse"},We(c.markup)));var f=i.get(u);_n(c.update)&&c.update(f.node.childNodes[0],c);var h=c.ox%c.width;h<0&&(h+=c.width);var v=c.oy%c.height;v<0&&(v+=c.height),f.attr({x:h,y:v,width:c.width,height:c.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",r=e.size||"auto auto",n=this.scale(),i=this.translate();if(Jr(t)){var s=i.tx+n.sx*(t.x||0),o=i.ty+n.sy*(t.y||0);t=s+"px "+o+"px"}Jr(r)&&(r=new yt(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var r,n=t.size,i=t.repeat||"no-repeat",s=t.opacity||1,o=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[Wde(i)];if(_n(a)){e.width*=o,e.height*=o;var u=a(e,t);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",Jr(n)?(n.width*=u.width/e.width,n.height*=u.height/e.height):n===void 0&&(t.size={width:u.width/o,height:u.height/o})}else r=e.src,n===void 0&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=oo(e),Pl(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Do(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Jr(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,r=e.name;if(t||(t=r+this.svg.id+xp(JSON.stringify(e))),!this.isDefined(t)){var n=ope,i=n[r]&&n[r](e.args||{});if(!i)throw new Error("Non-existing filter "+r);var s=Xt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});We(i,s).appendTo(this.defs)}return t},defineGradient:function(e){if(!Jr(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{type:n,id:i=n+t.id+xp(JSON.stringify(e)),stops:s,attrs:o={}}=e;if(this.isDefined(i))return i;const a=zr(s).map(({offset:c,color:f,opacity:h})=>We("stop").attr({offset:c,"stop-color":f,"stop-opacity":Number.isFinite(h)?h:1})),u=We(n,o,a);return u.id=i,u.appendTo(r),i},definePattern:function(e){if(!Jr(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+xp(JSON.stringify(e)),markup:i,attrs:s={}}=e;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;const o=We("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=n,o.attr(s),typeof i=="string")o.append(We(i));else{const{fragment:a}=sv(i);o.append(a)}return o.appendTo(r),n},defineMarker:function(e){if(!Jr(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+xp(JSON.stringify(e)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=e;if(this.isDefined(n))return n;const a=We("marker",{orient:"auto",overflow:"visible",markerUnits:o});a.id=n,a.attr(s);let u;if(i){let h;if(typeof i=="string")h=We(i),h=Array.isArray(h)?h:[h];else{const{fragment:v}=sv(i);h=We(v).children()}h.length>1?u=We("g").append(h):u=h[0]}else{const{type:h="path"}=e;u=We(h)}const c=Pc(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(h=>{const v=c[h],y=u.attr(h);if(y==null)u.attr(h,v);else switch(h){case"transform":u.attr(h,v+" "+y);break}}),u.appendTo(a),a.appendTo(r),n},customEventTrigger:function(e,t,r=t.el){const n=e.target.closest("[event]");if(n&&r!==n&&t.el.contains(n)){const i=ti(Nt.Event(e.originalEvent,{data:e.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&e.preventDefault(),i}return null}},{sorting:bl,Layers:uo,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=2*r,t.height=2*n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,r,n),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,r,n),t},flipX:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r*2,t.height=n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(e,0,0,r,n),t},flipY:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r,t.height=n*2;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(e,0,0,r,n),t},watermark:function(e,t){t=t||{};var r=e.width,n=e.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var s=i.getContext("2d"),o=gs(t.watermarkAngle)?-t.watermarkAngle:-20,a=bs(o),u=i.width/4,c=i.height/4,f=0;f<4;f++)for(var h=0;h<4;h++)(f+h)%2>0&&(s.setTransform(1,0,0,1,(2*f-1)*u,(2*h-1)*c),s.rotate(a),s.drawImage(e,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){We(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var r=t.sx<=1?t.thickness*t.sx:t.thickness;We(e).attr({width:r,height:r,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",We(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",We(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",We(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}]}}),kg=nu.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){const{paper:t,relatedView:r}=this;return!t||!r?!0:t.guard(e,r)}}),Cge=nu.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=Xt(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var r=e.relatedView;if(!(r instanceof Tr))return this;for(var n=this.tools=[],i=0,s=t.length;i<s;i++){var o=t[i];o instanceof kg&&(o.configure(r,this),this.vel.append(o.el),n.push(o))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var r=this.isRendered,n=0,i=t.length;n<i;n++){var s=t[n];r?e.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];e===i?i.show():i.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];i!==e&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,r=e.length;t<r;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:r,layer:n=uo.TOOLS,z:i}=e;return r&&(n?r.paper.getLayerView(n).insertSortedNode(t,i):r.el.appendChild(t)),this}}),qh={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{},r={minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0};return r},importElement:function(e,t,r){var n=this.getCell(t),i=r.node(t);e.setPosition?e.setPosition(n,i):n.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(e,t,r){const i=this.getCell(t.name),s=r.edge(t),o=s.points||[],a=new wn(o);if(e.setVertices||e.setLinkVertices)if(_n(e.setVertices))e.setVertices(i,o);else{a.simplify({threshold:.001});const u=a.points.map(f=>f.toJSON()),c=u.length;i.set("vertices",u.slice(1,c-1))}if(e.setLabels&&"x"in s&&"y"in s){const u={x:s.x,y:s.y};if(_n(e.setLabels))e.setLabels(i,u,o);else{const c=a.closestPointLength(u),f=a.pointAtLength(c),h=c/a.length(),v=new me(u).difference(f).toJSON();i.label(0,{position:{distance:h,offset:v}})}}},layout:function(e,t){var r;e instanceof Fo?r=e:r=new Fo().resetCells(e,{dry:!0,sort:!1}),e=null,t=qs(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const n=t.dagre||(typeof dagre<"u"?dagre:void 0);if(n===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=qh.toGraphLib(r,{graphlib:t.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(f){return f.id}}),s={},o=t.marginX||0,a=t.marginY||0;if(t.rankDir&&(s.rankdir=t.rankDir),t.align&&(s.align=t.align),t.nodeSep&&(s.nodesep=t.nodeSep),t.edgeSep&&(s.edgesep=t.edgeSep),t.rankSep&&(s.ranksep=t.rankSep),t.ranker&&(s.ranker=t.ranker),o&&(s.marginx=o),a&&(s.marginy=a),i.setGraph(s),n.layout(i,{debugTiming:!!t.debugTiming}),r.startBatch("layout"),qh.fromGraphLib(i,{importNode:this.importElement.bind(r,t),importEdge:this.importLink.bind(r,t)}),t.resizeClusters){var u=i.nodes().filter(function(f){return i.children(f).length>0}).map(r.getCell.bind(r)).sort(function(f,h){return h.getAncestors().length-f.getAncestors().length});Do(u,"fitToChildren",{padding:t.clusterPadding})}r.stopBatch("layout");var c=i.graph();return new yt(o,a,Math.abs(c.width-2*o),Math.abs(c.height-2*a))},fromGraphLib:function(e,t){t=t||{};var r=t.importNode||Jf,n=t.importEdge||Jf,i=this instanceof Fo?this:new Fo;return e.nodes().forEach(function(s){r.call(i,s,e,i,t)}),e.edges().forEach(function(s){n.call(i,s,e,i,t)}),i},toGraphLib:function(e,t){t=t||{};const r=t.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(r===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=Hde(t,"directed","compound","multigraph"),i=new r.Graph(n),s=t.setNodeLabel||Jf,o=t.setEdgeLabel||Jf,a=t.setEdgeName||Jf,u=e.get("cells"),c=0,f=u.length;c<f;c++){var h=u.at(c);if(h.isLink()){var v=h.get("source"),y=h.get("target");if(!v.id||!y.id)break;i.setEdge(v.id,y.id,o(h),a(h))}else if(i.setNode(h.id,s(h)),i.isCompound()&&h.has("parent")){var m=h.get("parent");u.has(m)&&i.setParent(h.id,m)}}return i}};Fo.prototype.toGraphLib=function(e){return qh.toGraphLib(this,e)};Fo.prototype.fromGraphLib=function(e,t){return qh.fromGraphLib.call(this,e,t)};const y9={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[e];if(typeof r<"u")return r;try{r=t()}catch{r=!1}return this._results[e]=r,r}},ys=Gi.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});ys.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});Ai.extend({presentationAttributes:Ai.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var e=Ai.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"SCALE")&&(this.resize(),e=this.removeFlag(e,"SCALE")),e}});ys.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});ys.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});ys.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});ys.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});ys.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});ys.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const Oge=ys.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});Oge.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const cv=y9.test("svgforeignobject");ys.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',cv?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),ys.prototype.initialize.apply(this,arguments)},updateSize:function(e,t){this.attr({".fobj":Xt({},t),div:{style:Xt({},t)}})},updateContent:function(e,t){cv?this.attr({".content":{html:npe(t)}}):this.attr({".content":{text:t}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});Ai.extend({presentationAttributes:cv?Ai.prototype.presentationAttributes:Ai.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var e=Ai.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"CONTENT")&&(this.updateContent(this.model),e=this.removeFlag(e,"CONTENT")),e},update:function(e,t){var r=this.model;if(cv)Ai.prototype.update.call(this,r,t);else{var n=Pc(t||r.get("attrs"),".content");Ai.prototype.update.call(this,r,n),(!t||Qa(t,".content"))&&this.updateContent(r,t)}},updateContent:function(e,t){var r=ai({},(t||e.get("attrs"))[".content"]);r=Pc(r,"text");var n=Wj(e.get("content"),e.get("size"),r,{svgDocument:this.paper.svg}),i=UE({},".content",r,"/");i[".content"].text=n,Ai.prototype.update.call(this,e,i)}});Gi.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});const Ige=Gi.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]});Gi.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]});Gi.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]});Gi.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]});Gi.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]});Gi.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Gi.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Gi.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Gi.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Gi.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var gE=10;Gi.define("standard.Cylinder",{attrs:{body:{lateralArea:gE,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:gE,refRx:"50%",ry:gE,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var r=ki(e),n={lateralArea:e},i=r?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e};return this.attr({body:n,top:i},t)}},{attributes:{lateralArea:{set:function(e,t){var r=ki(e);r&&(e=parseFloat(e)/100);var n=t.x,i=t.y,s=t.width,o=t.height,a=s/2,u=r?o*e:e,c=We.KAPPA,f=c*a,h=c*(r?o*e:e),v=n,y=n+s/2,m=n+s,_=i+u,x=_-u,S=i+o-u,P=i+o,T=["M",v,_,"L",v,S,"C",n,S+h,y-f,P,y,P,"C",y+f,P,m,S+h,m,S,"L",m,_,"C",m,_-h,y+f,x,y,x,"C",y-f,x,v,_-h,v,_,"Z"];return{d:T.join(" ")}}}}});var Rge={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},kge={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Mge=y9.test("svgforeignobject")?Rge:kge;Gi.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Mge]},{attributes:{text:{set:function(e,t,r,n){if(r instanceof HTMLElement)r.textContent=e;else{var i=n.style||{},s={text:e,width:-5,height:"100%"},o=Xt({textVerticalAnchor:"middle"},i);return Jj.textWrap.set.call(this,s,t,r,o),{fill:i.color||null}}},position:function(e,t,r){if(r instanceof SVGElement)return t.center()}}}});const Bp=vf.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});vf.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});vf.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var j4=nu.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(e,t){const{vel:r,options:n}=this,{scale:i}=n;let s=We.createSVGMatrix().translate(e,t);i&&(s=s.scale(i)),r.transform(s,{absolute:!0})},onPointerDown:function(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,e.data),this.trigger("will-change",this,e))},onPointerMove:function(e){this.trigger("changing",this,e)},onDoubleClick:function(e){this.trigger("remove",this,e)},onPointerUp:function(e){this.trigger("changed",this,e),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const Lge=kg.extend({name:"vertices",options:{handleClass:j4,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var e=this.relatedView,t=e.model.vertices();return t.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var e=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(e))for(var t=0,r=e.length;t<r;t++)e[t].remove()},renderHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=new this.options.handleClass({index:r,paper:this.paper,scale:this.options.scale,guard:o=>this.guard(o)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=this.handles[r];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(e){var t=this.relatedView;t.can("vertexMove")&&(this.listenTo(e,"will-change",this.onHandleWillChange),this.listenTo(e,"changing",this.onHandleChanging),this.listenTo(e,"changed",this.onHandleChanged)),t.can("vertexRemove")&&this.listenTo(e,"remove",this.onHandleRemove)},getNeighborPoints:function(e){var t=this.relatedView,r=t.model.vertices(),n=e>0?r[e-1]:t.sourceAnchor,i=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:new me(n),next:new me(i)}},onHandleWillChange:function(e,t){this.focus();const{relatedView:r,options:n}=this;r.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown(...r.paper.getPointerArgs(t))},onHandleChanging:function(e,t){const{options:r,relatedView:n}=this;var i=e.options.index,[s,o,a]=n.paper.getPointerArgs(t),u={x:o,y:a};this.snapVertex(u,i),n.model.vertex(i,u,{ui:!0,tool:this.cid}),e.position(u.x,u.y),r.stopPropagation||n.notifyPointermove(s,o,a)},onHandleChanged:function(e,t){const{options:r,relatedView:n}=this;if(r.vertexAdding&&this.updatePath(),!!r.redundancyRemoval){var i=n.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(t).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,o,a]=n.paper.getPointerArgs(t);r.stopPropagation||n.notifyPointerup(s,o,a),n.checkMouseleave(s)}},snapVertex:function(e,t){var r=this.options.snapRadius;if(r>0){var n=this.getNeighborPoints(t),i=n.prev,s=n.next;Math.abs(e.x-i.x)<r?e.x=i.x:Math.abs(e.x-s.x)<r&&(e.x=s.x),Math.abs(e.y-i.y)<r?e.y=n.prev.y:Math.abs(e.y-s.y)<r&&(e.y=s.y)}},onHandleRemove:function(e,t){var r=e.options.index,n=this.relatedView;n.model.removeVertex(r,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(ti(t))},onPathPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=ti(e),r=this.paper.snapToGrid(t.clientX,t.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=n.getVertexIndex(r.x,r.y);this.snapVertex(r,i),n.model.insertVertex(i,r,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(t,{vertexAdded:!0}),s.onPointerDown(t)}},onRemove:function(){this.resetHandles()}},{VertexHandle:j4});function Nge(e,t){const{model:r}=e;return t?r.getBBox():r.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const _9=kg.extend({tagName:"path",xAxisVector:new me(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var e=this.ratio,t=this.relatedView,r=t.getTangentAtRatio(e),n,i;if(r?(n=r.start,i=r.vector().vectorAngle(this.xAxisVector)||0):(n=t.getPointAtRatio(e),i=0),!n)return this;var s=We.createSVGMatrix().translate(n.x,n.y).rotate(i);const{scale:o}=this.options;return o&&(s=s.scale(o)),this.vel.transform(s,{absolute:!0}),this},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.relatedView;t.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),t.can("arrowheadMove")&&(t.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),t.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(e){var t=ti(e),r=this.paper.snapToGrid(t.clientX,t.clientY);this.relatedView.pointermove(t,r.x,r.y)},onPointerUp:function(e){this.undelegateDocumentEvents();var t=this.relatedView,r=t.paper,n=ti(e),i=r.snapToGrid(n.clientX,n.clientY);t.pointerup(n,i.x,i.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",t.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),qge=_9.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Dge=_9.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),QE=kg.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:e}=this;e.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:e,options:t}=this;let{x:r=0,y:n=0,offset:i={},useModelGeometry:s,rotate:o,scale:a}=t,u=Nge(e,s);const c=e.model.angle();o||(u=u.bbox(c));const{x:f=0,y:h=0}=i;ki(r)?r=parseFloat(r)/100*u.width:co(r)&&(r=Number(lo(r,u))),ki(n)?n=parseFloat(n)/100*u.height:co(n)&&(n=Number(lo(n,u)));let v=We.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return o&&(v=v.rotate(c)),v=v.translate(r+f-u.width/2,n+h-u.height/2),a&&(v=v.scale(a)),v},getLinkMatrix(){const{relatedView:e,options:t}=this,{offset:r=0,distance:n=0,rotate:i,scale:s}=t;let o,a,u;ki(n)?o=e.getTangentAtRatio(parseFloat(n)/100):o=e.getTangentAtLength(n),o?(a=o.start,u=o.vector().vectorAngle(new me(1,0))||0):(a=e.getConnection().start,u=0);let c=We.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(c=c.rotate(-u)),s&&(c=c.scale(s)),c},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.action;typeof t=="function"&&t.call(this.relatedView,e,this.relatedView,this)}}}),H4=QE.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(e,t,r){t.model.remove({ui:!0,tool:r.cid})}}});var dh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Fge=dh.exports,W4;function Bge(){return W4||(W4=1,function(e,t){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,v=2,y=4,m=1,_=2,x=1,S=2,P=4,T=8,E=16,O=32,N=64,d=128,C=256,R=512,k=30,B="...",z=800,U=16,Y=1,oe=2,W=3,D=1/0,F=9007199254740991,H=17976931348623157e292,ie=NaN,se=4294967295,we=se-1,ge=se>>>1,te=[["ary",d],["bind",x],["bindKey",S],["curry",T],["curryRight",E],["flip",R],["partial",O],["partialRight",N],["rearg",C]],ue="[object Arguments]",re="[object Array]",Q="[object AsyncFunction]",le="[object Boolean]",Ge="[object Date]",Ne="[object DOMException]",Oe="[object Error]",Ze="[object Function]",$e="[object GeneratorFunction]",q="[object Map]",G="[object Number]",K="[object Null]",J="[object Object]",Ee="[object Promise]",fe="[object Proxy]",Te="[object RegExp]",Ce="[object Set]",Ue="[object String]",Le="[object Symbol]",Ie="[object Undefined]",Se="[object WeakMap]",Ye="[object WeakSet]",ft="[object ArrayBuffer]",bt="[object DataView]",dt="[object Float32Array]",it="[object Float64Array]",Jt="[object Int8Array]",Sr="[object Int16Array]",sr="[object Int32Array]",vr="[object Uint8Array]",qr="[object Uint8ClampedArray]",Vr="[object Uint16Array]",In="[object Uint32Array]",ur=/\b__p \+= '';/g,Mr=/\b(__p \+=) '' \+/g,Tn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pn=/&(?:amp|lt|gt|quot|#39);/g,xn=/[&<>"']/g,Xn=RegExp(Pn.source),oi=RegExp(xn.source),Ht=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,Gr=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rn=/^\w*$/,Yr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yn=/[\\^$.*+?()[\]{}|]/g,yi=RegExp(Yn.source),tn=/^\s+/,Kn=/\s/,Bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_i=/\{\n\/\* \[wrapped with (.+)\] \*/,Je=/,? & /,Ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Lt=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,Bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ct=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,Rt=/^\[object .+?Constructor\]$/,Wt=/^0o[0-7]+$/i,ln=/^(?:0|[1-9]\d*)$/,Jn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dt=/($^)/,rn=/['\n\r\u2028\u2029\\]/g,Pr="\\ud800-\\udfff",Dr="\\u0300-\\u036f",$r="\\ufe20-\\ufe2f",Cr="\\u20d0-\\u20ff",kn=Dr+$r+Cr,Zt="\\u2700-\\u27bf",bi="a-z\\xdf-\\xf6\\xf8-\\xff",Ci="\\xac\\xb1\\xd7\\xf7",$i="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qe="\\u2000-\\u206f",mt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="A-Z\\xc0-\\xd6\\xd8-\\xde",vt="\\ufe0e\\ufe0f",Mt=Ci+$i+Qe+mt,cr="['â]",Kr="["+Pr+"]",mn="["+Mt+"]",Ur="["+kn+"]",Cn="\\d+",jn="["+Zt+"]",wi="["+bi+"]",Qo="[^"+Pr+Mt+Cn+Zt+bi+pt+"]",Ts="\\ud83c[\\udffb-\\udfff]",Zn="(?:"+Ur+"|"+Ts+")",ka="[^"+Pr+"]",as="(?:\\ud83c[\\udde6-\\uddff]){2}",Ma="[\\ud800-\\udbff][\\udc00-\\udfff]",ea="["+pt+"]",ta="\\u200d",ra="(?:"+wi+"|"+Qo+")",mf="(?:"+ea+"|"+Qo+")",yd="(?:"+cr+"(?:d|ll|m|re|s|t|ve))?",pu="(?:"+cr+"(?:D|LL|M|RE|S|T|VE))?",yf=Zn+"?",el="["+vt+"]?",_d="(?:"+ta+"(?:"+[ka,as,Ma].join("|")+")"+el+yf+")*",bd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Bg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_f=el+yf+_d,zg="(?:"+[jn,as,Ma].join("|")+")"+_f,Vg="(?:"+[ka+Ur+"?",Ur,as,Ma,Kr].join("|")+")",bf=RegExp(cr,"g"),Gg=RegExp(Ur,"g"),wf=RegExp(Ts+"(?="+Ts+")|"+Vg+_f,"g"),$g=RegExp([ea+"?"+wi+"+"+yd+"(?="+[mn,ea,"$"].join("|")+")",mf+"+"+pu+"(?="+[mn,ea+ra,"$"].join("|")+")",ea+"?"+ra+"+"+yd,ea+"+"+pu,Bg,bd,Cn,zg].join("|"),"g"),Ug=RegExp("["+ta+Pr+kn+vt+"]"),jg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wg=-1,yn={};yn[dt]=yn[it]=yn[Jt]=yn[Sr]=yn[sr]=yn[vr]=yn[qr]=yn[Vr]=yn[In]=!0,yn[ue]=yn[re]=yn[ft]=yn[le]=yn[bt]=yn[Ge]=yn[Oe]=yn[Ze]=yn[q]=yn[G]=yn[J]=yn[Te]=yn[Ce]=yn[Ue]=yn[Se]=!1;var nn={};nn[ue]=nn[re]=nn[ft]=nn[bt]=nn[le]=nn[Ge]=nn[dt]=nn[it]=nn[Jt]=nn[Sr]=nn[sr]=nn[q]=nn[G]=nn[J]=nn[Te]=nn[Ce]=nn[Ue]=nn[Le]=nn[vr]=nn[qr]=nn[Vr]=nn[In]=!0,nn[Oe]=nn[Ze]=nn[Se]=!1;var wd={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},xf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sf=parseFloat,Xg=parseInt,Ed=typeof Di=="object"&&Di&&Di.Object===Object&&Di,Yg=typeof self=="object"&&self&&self.Object===Object&&self,zn=Ed||Yg||Function("return this")(),tl=t&&!t.nodeType&&t,Ao=tl&&!0&&e&&!e.nodeType&&e,Ad=Ao&&Ao.exports===tl,Ef=Ad&&Ed.process,us=function(){try{var ne=Ao&&Ao.require&&Ao.require("util").types;return ne||Ef&&Ef.binding&&Ef.binding("util")}catch{}}(),g=us&&us.isArrayBuffer,w=us&&us.isDate,I=us&&us.isMap,L=us&&us.isRegExp,V=us&&us.isSet,$=us&&us.isTypedArray;function X(ne,_e,ye){switch(ye.length){case 0:return ne.call(_e);case 1:return ne.call(_e,ye[0]);case 2:return ne.call(_e,ye[0],ye[1]);case 3:return ne.call(_e,ye[0],ye[1],ye[2])}return ne.apply(_e,ye)}function ve(ne,_e,ye,Xe){for(var tt=-1,Ot=ne==null?0:ne.length;++tt<Ot;){var kt=ne[tt];_e(Xe,kt,ye(kt),ne)}return Xe}function ce(ne,_e){for(var ye=-1,Xe=ne==null?0:ne.length;++ye<Xe&&_e(ne[ye],ye,ne)!==!1;);return ne}function Ae(ne,_e){for(var ye=ne==null?0:ne.length;ye--&&_e(ne[ye],ye,ne)!==!1;);return ne}function ze(ne,_e){for(var ye=-1,Xe=ne==null?0:ne.length;++ye<Xe;)if(!_e(ne[ye],ye,ne))return!1;return!0}function He(ne,_e){for(var ye=-1,Xe=ne==null?0:ne.length,tt=0,Ot=[];++ye<Xe;){var kt=ne[ye];_e(kt,ye,ne)&&(Ot[tt++]=kt)}return Ot}function ke(ne,_e){var ye=ne==null?0:ne.length;return!!ye&&fn(ne,_e,0)>-1}function lt(ne,_e,ye){for(var Xe=-1,tt=ne==null?0:ne.length;++Xe<tt;)if(ye(_e,ne[Xe]))return!0;return!1}function Pt(ne,_e){for(var ye=-1,Xe=ne==null?0:ne.length,tt=Array(Xe);++ye<Xe;)tt[ye]=_e(ne[ye],ye,ne);return tt}function dr(ne,_e){for(var ye=-1,Xe=_e.length,tt=ne.length;++ye<Xe;)ne[tt+ye]=_e[ye];return ne}function fr(ne,_e,ye,Xe){var tt=-1,Ot=ne==null?0:ne.length;for(Xe&&Ot&&(ye=ne[++tt]);++tt<Ot;)ye=_e(ye,ne[tt],tt,ne);return ye}function di(ne,_e,ye,Xe){var tt=ne==null?0:ne.length;for(Xe&&tt&&(ye=ne[--tt]);tt--;)ye=_e(ye,ne[tt],tt,ne);return ye}function Vn(ne,_e){for(var ye=-1,Xe=ne==null?0:ne.length;++ye<Xe;)if(_e(ne[ye],ye,ne))return!0;return!1}var Ws=La("length");function Xs(ne){return ne.split("")}function Or(ne){return ne.match(Ct)||[]}function na(ne,_e,ye){var Xe;return ye(ne,function(tt,Ot,kt){if(_e(tt,Ot,kt))return Xe=Ot,!1}),Xe}function Ir(ne,_e,ye,Xe){for(var tt=ne.length,Ot=ye+(Xe?1:-1);Xe?Ot--:++Ot<tt;)if(_e(ne[Ot],Ot,ne))return Ot;return-1}function fn(ne,_e,ye){return _e===_e?Zg(ne,_e,ye):Ir(ne,rl,ye)}function tc(ne,_e,ye,Xe){for(var tt=ye-1,Ot=ne.length;++tt<Ot;)if(Xe(ne[tt],_e))return tt;return-1}function rl(ne){return ne!==ne}function Ps(ne,_e){var ye=ne==null?0:ne.length;return ye?Mi(ne,_e)/ye:ie}function La(ne){return function(_e){return _e==null?r:_e[ne]}}function cs(ne){return function(_e){return ne==null?r:ne[_e]}}function To(ne,_e,ye,Xe,tt){return tt(ne,function(Ot,kt,At){ye=Xe?(Xe=!1,Ot):_e(ye,Ot,kt,At)}),ye}function ia(ne,_e){var ye=ne.length;for(ne.sort(_e);ye--;)ne[ye]=ne[ye].value;return ne}function Mi(ne,_e){for(var ye,Xe=-1,tt=ne.length;++Xe<tt;){var Ot=_e(ne[Xe]);Ot!==r&&(ye=ye===r?Ot:ye+Ot)}return ye}function rc(ne,_e){for(var ye=-1,Xe=Array(ne);++ye<ne;)Xe[ye]=_e(ye);return Xe}function Po(ne,_e){return Pt(_e,function(ye){return[ye,ne[ye]]})}function Ys(ne){return ne&&ne.slice(0,Pd(ne)+1).replace(tn,"")}function Ui(ne){return function(_e){return ne(_e)}}function Af(ne,_e){return Pt(_e,function(ye){return ne[ye]})}function nc(ne,_e){return ne.has(_e)}function Zr(ne,_e){for(var ye=-1,Xe=ne.length;++ye<Xe&&fn(_e,ne[ye],0)>-1;);return ye}function ic(ne,_e){for(var ye=ne.length;ye--&&fn(_e,ne[ye],0)>-1;);return ye}function Cs(ne,_e){for(var ye=ne.length,Xe=0;ye--;)ne[ye]===_e&&++Xe;return Xe}var vu=cs(wd),Kg=cs(xf);function Jg(ne){return"\\"+Sd[ne]}function Td(ne,_e){return ne==null?r:ne[_e]}function ls(ne){return Ug.test(ne)}function Tf(ne){return jg.test(ne)}function sa(ne){for(var _e,ye=[];!(_e=ne.next()).done;)ye.push(_e.value);return ye}function nl(ne){var _e=-1,ye=Array(ne.size);return ne.forEach(function(Xe,tt){ye[++_e]=[tt,Xe]}),ye}function gu(ne,_e){return function(ye){return ne(_e(ye))}}function Os(ne,_e){for(var ye=-1,Xe=ne.length,tt=0,Ot=[];++ye<Xe;){var kt=ne[ye];(kt===_e||kt===f)&&(ne[ye]=f,Ot[tt++]=ye)}return Ot}function Na(ne){var _e=-1,ye=Array(ne.size);return ne.forEach(function(Xe){ye[++_e]=Xe}),ye}function Pf(ne){var _e=-1,ye=Array(ne.size);return ne.forEach(function(Xe){ye[++_e]=[Xe,Xe]}),ye}function Zg(ne,_e,ye){for(var Xe=ye-1,tt=ne.length;++Xe<tt;)if(ne[Xe]===_e)return Xe;return-1}function il(ne,_e,ye){for(var Xe=ye+1;Xe--;)if(ne[Xe]===_e)return Xe;return Xe}function oa(ne){return ls(ne)?Cd(ne):Ws(ne)}function ji(ne){return ls(ne)?ae(ne):Xs(ne)}function Pd(ne){for(var _e=ne.length;_e--&&Kn.test(ne.charAt(_e)););return _e}var Cf=cs(xd);function Cd(ne){for(var _e=wf.lastIndex=0;wf.test(ne);)++_e;return _e}function ae(ne){return ne.match(wf)||[]}function xe(ne){return ne.match($g)||[]}var Re=function ne(_e){_e=_e==null?zn:qe.defaults(zn.Object(),_e,qe.pick(zn,Hg));var ye=_e.Array,Xe=_e.Date,tt=_e.Error,Ot=_e.Function,kt=_e.Math,At=_e.Object,yr=_e.RegExp,Yt=_e.String,Er=_e.TypeError,pi=ye.prototype,xi=Ot.prototype,vi=At.prototype,Hi=_e["__core-js_shared__"],Co=xi.toString,lr=vi.hasOwnProperty,FH=0,JT=function(){var l=/[^.]+$/.exec(Hi&&Hi.keys&&Hi.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Od=vi.toString,BH=Co.call(At),zH=zn._,VH=yr("^"+Co.call(lr).replace(Yn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Id=Ad?_e.Buffer:r,mu=_e.Symbol,Rd=_e.Uint8Array,ZT=Id?Id.allocUnsafe:r,kd=gu(At.getPrototypeOf,At),QT=At.create,eP=vi.propertyIsEnumerable,Md=pi.splice,tP=mu?mu.isConcatSpreadable:r,Of=mu?mu.iterator:r,sc=mu?mu.toStringTag:r,Ld=function(){try{var l=lc(At,"defineProperty");return l({},"",{}),l}catch{}}(),GH=_e.clearTimeout!==zn.clearTimeout&&_e.clearTimeout,$H=Xe&&Xe.now!==zn.Date.now&&Xe.now,UH=_e.setTimeout!==zn.setTimeout&&_e.setTimeout,Nd=kt.ceil,qd=kt.floor,Qg=At.getOwnPropertySymbols,jH=Id?Id.isBuffer:r,rP=_e.isFinite,HH=pi.join,WH=gu(At.keys,At),gi=kt.max,Li=kt.min,XH=Xe.now,YH=_e.parseInt,nP=kt.random,KH=pi.reverse,em=lc(_e,"DataView"),If=lc(_e,"Map"),tm=lc(_e,"Promise"),sl=lc(_e,"Set"),Rf=lc(_e,"WeakMap"),kf=lc(At,"create"),Dd=Rf&&new Rf,ol={},JH=fc(em),ZH=fc(If),QH=fc(tm),eW=fc(sl),tW=fc(Rf),Fd=mu?mu.prototype:r,Mf=Fd?Fd.valueOf:r,iP=Fd?Fd.toString:r;function Z(l){if(Hn(l)&&!pr(l)&&!(l instanceof Fr)){if(l instanceof Ks)return l;if(lr.call(l,"__wrapped__"))return sC(l)}return new Ks(l)}var al=function(){function l(){}return function(p){if(!Gn(p))return{};if(QT)return QT(p);l.prototype=p;var b=new l;return l.prototype=r,b}}();function Bd(){}function Ks(l,p){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=r}Z.templateSettings={escape:Ht,evaluate:jt,interpolate:Gr,variable:"",imports:{_:Z}},Z.prototype=Bd.prototype,Z.prototype.constructor=Z,Ks.prototype=al(Bd.prototype),Ks.prototype.constructor=Ks;function Fr(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function rW(){var l=new Fr(this.__wrapped__);return l.__actions__=fs(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=fs(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=fs(this.__views__),l}function nW(){if(this.__filtered__){var l=new Fr(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function iW(){var l=this.__wrapped__.value(),p=this.__dir__,b=pr(l),M=p<0,j=b?l.length:0,ee=gX(0,j,this.__views__),de=ee.start,be=ee.end,Pe=be-de,rt=M?be:de-1,nt=this.__iteratees__,ut=nt.length,xt=0,Vt=Li(Pe,this.__takeCount__);if(!b||!M&&j==Pe&&Vt==Pe)return CP(l,this.__actions__);var tr=[];e:for(;Pe--&&xt<Vt;){rt+=p;for(var wr=-1,rr=l[rt];++wr<ut;){var Lr=nt[wr],jr=Lr.iteratee,ks=Lr.type,Yi=jr(rr);if(ks==oe)rr=Yi;else if(!Yi){if(ks==Y)continue e;break e}}tr[xt++]=rr}return tr}Fr.prototype=al(Bd.prototype),Fr.prototype.constructor=Fr;function oc(l){var p=-1,b=l==null?0:l.length;for(this.clear();++p<b;){var M=l[p];this.set(M[0],M[1])}}function sW(){this.__data__=kf?kf(null):{},this.size=0}function oW(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p}function aW(l){var p=this.__data__;if(kf){var b=p[l];return b===u?r:b}return lr.call(p,l)?p[l]:r}function uW(l){var p=this.__data__;return kf?p[l]!==r:lr.call(p,l)}function cW(l,p){var b=this.__data__;return this.size+=this.has(l)?0:1,b[l]=kf&&p===r?u:p,this}oc.prototype.clear=sW,oc.prototype.delete=oW,oc.prototype.get=aW,oc.prototype.has=uW,oc.prototype.set=cW;function qa(l){var p=-1,b=l==null?0:l.length;for(this.clear();++p<b;){var M=l[p];this.set(M[0],M[1])}}function lW(){this.__data__=[],this.size=0}function fW(l){var p=this.__data__,b=zd(p,l);if(b<0)return!1;var M=p.length-1;return b==M?p.pop():Md.call(p,b,1),--this.size,!0}function hW(l){var p=this.__data__,b=zd(p,l);return b<0?r:p[b][1]}function dW(l){return zd(this.__data__,l)>-1}function pW(l,p){var b=this.__data__,M=zd(b,l);return M<0?(++this.size,b.push([l,p])):b[M][1]=p,this}qa.prototype.clear=lW,qa.prototype.delete=fW,qa.prototype.get=hW,qa.prototype.has=dW,qa.prototype.set=pW;function Da(l){var p=-1,b=l==null?0:l.length;for(this.clear();++p<b;){var M=l[p];this.set(M[0],M[1])}}function vW(){this.size=0,this.__data__={hash:new oc,map:new(If||qa),string:new oc}}function gW(l){var p=Zd(this,l).delete(l);return this.size-=p?1:0,p}function mW(l){return Zd(this,l).get(l)}function yW(l){return Zd(this,l).has(l)}function _W(l,p){var b=Zd(this,l),M=b.size;return b.set(l,p),this.size+=b.size==M?0:1,this}Da.prototype.clear=vW,Da.prototype.delete=gW,Da.prototype.get=mW,Da.prototype.has=yW,Da.prototype.set=_W;function ac(l){var p=-1,b=l==null?0:l.length;for(this.__data__=new Da;++p<b;)this.add(l[p])}function bW(l){return this.__data__.set(l,u),this}function wW(l){return this.__data__.has(l)}ac.prototype.add=ac.prototype.push=bW,ac.prototype.has=wW;function Oo(l){var p=this.__data__=new qa(l);this.size=p.size}function xW(){this.__data__=new qa,this.size=0}function SW(l){var p=this.__data__,b=p.delete(l);return this.size=p.size,b}function EW(l){return this.__data__.get(l)}function AW(l){return this.__data__.has(l)}function TW(l,p){var b=this.__data__;if(b instanceof qa){var M=b.__data__;if(!If||M.length<i-1)return M.push([l,p]),this.size=++b.size,this;b=this.__data__=new Da(M)}return b.set(l,p),this.size=b.size,this}Oo.prototype.clear=xW,Oo.prototype.delete=SW,Oo.prototype.get=EW,Oo.prototype.has=AW,Oo.prototype.set=TW;function sP(l,p){var b=pr(l),M=!b&&hc(l),j=!b&&!M&&xu(l),ee=!b&&!M&&!j&&fl(l),de=b||M||j||ee,be=de?rc(l.length,Yt):[],Pe=be.length;for(var rt in l)(p||lr.call(l,rt))&&!(de&&(rt=="length"||j&&(rt=="offset"||rt=="parent")||ee&&(rt=="buffer"||rt=="byteLength"||rt=="byteOffset")||Va(rt,Pe)))&&be.push(rt);return be}function oP(l){var p=l.length;return p?l[hm(0,p-1)]:r}function PW(l,p){return Qd(fs(l),uc(p,0,l.length))}function CW(l){return Qd(fs(l))}function rm(l,p,b){(b!==r&&!Io(l[p],b)||b===r&&!(p in l))&&Fa(l,p,b)}function Lf(l,p,b){var M=l[p];(!(lr.call(l,p)&&Io(M,b))||b===r&&!(p in l))&&Fa(l,p,b)}function zd(l,p){for(var b=l.length;b--;)if(Io(l[b][0],p))return b;return-1}function OW(l,p,b,M){return yu(l,function(j,ee,de){p(M,j,b(j),de)}),M}function aP(l,p){return l&&ua(p,Si(p),l)}function IW(l,p){return l&&ua(p,ds(p),l)}function Fa(l,p,b){p=="__proto__"&&Ld?Ld(l,p,{configurable:!0,enumerable:!0,value:b,writable:!0}):l[p]=b}function nm(l,p){for(var b=-1,M=p.length,j=ye(M),ee=l==null;++b<M;)j[b]=ee?r:Dm(l,p[b]);return j}function uc(l,p,b){return l===l&&(b!==r&&(l=l<=b?l:b),p!==r&&(l=l>=p?l:p)),l}function Js(l,p,b,M,j,ee){var de,be=p&h,Pe=p&v,rt=p&y;if(b&&(de=j?b(l,M,j,ee):b(l)),de!==r)return de;if(!Gn(l))return l;var nt=pr(l);if(nt){if(de=yX(l),!be)return fs(l,de)}else{var ut=Ni(l),xt=ut==Ze||ut==$e;if(xu(l))return RP(l,be);if(ut==J||ut==ue||xt&&!j){if(de=Pe||xt?{}:KP(l),!be)return Pe?aX(l,IW(de,l)):oX(l,aP(de,l))}else{if(!nn[ut])return j?l:{};de=_X(l,ut,be)}}ee||(ee=new Oo);var Vt=ee.get(l);if(Vt)return Vt;ee.set(l,de),AC(l)?l.forEach(function(rr){de.add(Js(rr,p,b,rr,l,ee))}):SC(l)&&l.forEach(function(rr,Lr){de.set(Lr,Js(rr,p,b,Lr,l,ee))});var tr=rt?Pe?Sm:xm:Pe?ds:Si,wr=nt?r:tr(l);return ce(wr||l,function(rr,Lr){wr&&(Lr=rr,rr=l[Lr]),Lf(de,Lr,Js(rr,p,b,Lr,l,ee))}),de}function RW(l){var p=Si(l);return function(b){return uP(b,l,p)}}function uP(l,p,b){var M=b.length;if(l==null)return!M;for(l=At(l);M--;){var j=b[M],ee=p[j],de=l[j];if(de===r&&!(j in l)||!ee(de))return!1}return!0}function cP(l,p,b){if(typeof l!="function")throw new Er(o);return Vf(function(){l.apply(r,b)},p)}function Nf(l,p,b,M){var j=-1,ee=ke,de=!0,be=l.length,Pe=[],rt=p.length;if(!be)return Pe;b&&(p=Pt(p,Ui(b))),M?(ee=lt,de=!1):p.length>=i&&(ee=nc,de=!1,p=new ac(p));e:for(;++j<be;){var nt=l[j],ut=b==null?nt:b(nt);if(nt=M||nt!==0?nt:0,de&&ut===ut){for(var xt=rt;xt--;)if(p[xt]===ut)continue e;Pe.push(nt)}else ee(p,ut,M)||Pe.push(nt)}return Pe}var yu=qP(aa),lP=qP(sm,!0);function kW(l,p){var b=!0;return yu(l,function(M,j,ee){return b=!!p(M,j,ee),b}),b}function Vd(l,p,b){for(var M=-1,j=l.length;++M<j;){var ee=l[M],de=p(ee);if(de!=null&&(be===r?de===de&&!Rs(de):b(de,be)))var be=de,Pe=ee}return Pe}function MW(l,p,b,M){var j=l.length;for(b=_r(b),b<0&&(b=-b>j?0:j+b),M=M===r||M>j?j:_r(M),M<0&&(M+=j),M=b>M?0:PC(M);b<M;)l[b++]=p;return l}function fP(l,p){var b=[];return yu(l,function(M,j,ee){p(M,j,ee)&&b.push(M)}),b}function Oi(l,p,b,M,j){var ee=-1,de=l.length;for(b||(b=wX),j||(j=[]);++ee<de;){var be=l[ee];p>0&&b(be)?p>1?Oi(be,p-1,b,M,j):dr(j,be):M||(j[j.length]=be)}return j}var im=DP(),hP=DP(!0);function aa(l,p){return l&&im(l,p,Si)}function sm(l,p){return l&&hP(l,p,Si)}function Gd(l,p){return He(p,function(b){return Ga(l[b])})}function cc(l,p){p=bu(p,l);for(var b=0,M=p.length;l!=null&&b<M;)l=l[ca(p[b++])];return b&&b==M?l:r}function dP(l,p,b){var M=p(l);return pr(l)?M:dr(M,b(l))}function Wi(l){return l==null?l===r?Ie:K:sc&&sc in At(l)?vX(l):CX(l)}function om(l,p){return l>p}function LW(l,p){return l!=null&&lr.call(l,p)}function NW(l,p){return l!=null&&p in At(l)}function qW(l,p,b){return l>=Li(p,b)&&l<gi(p,b)}function am(l,p,b){for(var M=b?lt:ke,j=l[0].length,ee=l.length,de=ee,be=ye(ee),Pe=1/0,rt=[];de--;){var nt=l[de];de&&p&&(nt=Pt(nt,Ui(p))),Pe=Li(nt.length,Pe),be[de]=!b&&(p||j>=120&&nt.length>=120)?new ac(de&&nt):r}nt=l[0];var ut=-1,xt=be[0];e:for(;++ut<j&&rt.length<Pe;){var Vt=nt[ut],tr=p?p(Vt):Vt;if(Vt=b||Vt!==0?Vt:0,!(xt?nc(xt,tr):M(rt,tr,b))){for(de=ee;--de;){var wr=be[de];if(!(wr?nc(wr,tr):M(l[de],tr,b)))continue e}xt&&xt.push(tr),rt.push(Vt)}}return rt}function DW(l,p,b,M){return aa(l,function(j,ee,de){p(M,b(j),ee,de)}),M}function qf(l,p,b){p=bu(p,l),l=eC(l,p);var M=l==null?l:l[ca(Qs(p))];return M==null?r:X(M,l,b)}function pP(l){return Hn(l)&&Wi(l)==ue}function FW(l){return Hn(l)&&Wi(l)==ft}function BW(l){return Hn(l)&&Wi(l)==Ge}function Df(l,p,b,M,j){return l===p?!0:l==null||p==null||!Hn(l)&&!Hn(p)?l!==l&&p!==p:zW(l,p,b,M,Df,j)}function zW(l,p,b,M,j,ee){var de=pr(l),be=pr(p),Pe=de?re:Ni(l),rt=be?re:Ni(p);Pe=Pe==ue?J:Pe,rt=rt==ue?J:rt;var nt=Pe==J,ut=rt==J,xt=Pe==rt;if(xt&&xu(l)){if(!xu(p))return!1;de=!0,nt=!1}if(xt&&!nt)return ee||(ee=new Oo),de||fl(l)?WP(l,p,b,M,j,ee):dX(l,p,Pe,b,M,j,ee);if(!(b&m)){var Vt=nt&&lr.call(l,"__wrapped__"),tr=ut&&lr.call(p,"__wrapped__");if(Vt||tr){var wr=Vt?l.value():l,rr=tr?p.value():p;return ee||(ee=new Oo),j(wr,rr,b,M,ee)}}return xt?(ee||(ee=new Oo),pX(l,p,b,M,j,ee)):!1}function VW(l){return Hn(l)&&Ni(l)==q}function um(l,p,b,M){var j=b.length,ee=j,de=!M;if(l==null)return!ee;for(l=At(l);j--;){var be=b[j];if(de&&be[2]?be[1]!==l[be[0]]:!(be[0]in l))return!1}for(;++j<ee;){be=b[j];var Pe=be[0],rt=l[Pe],nt=be[1];if(de&&be[2]){if(rt===r&&!(Pe in l))return!1}else{var ut=new Oo;if(M)var xt=M(rt,nt,Pe,l,p,ut);if(!(xt===r?Df(nt,rt,m|_,M,ut):xt))return!1}}return!0}function vP(l){if(!Gn(l)||SX(l))return!1;var p=Ga(l)?VH:Rt;return p.test(fc(l))}function GW(l){return Hn(l)&&Wi(l)==Te}function $W(l){return Hn(l)&&Ni(l)==Ce}function UW(l){return Hn(l)&&sp(l.length)&&!!yn[Wi(l)]}function gP(l){return typeof l=="function"?l:l==null?ps:typeof l=="object"?pr(l)?_P(l[0],l[1]):yP(l):FC(l)}function cm(l){if(!zf(l))return WH(l);var p=[];for(var b in At(l))lr.call(l,b)&&b!="constructor"&&p.push(b);return p}function jW(l){if(!Gn(l))return PX(l);var p=zf(l),b=[];for(var M in l)M=="constructor"&&(p||!lr.call(l,M))||b.push(M);return b}function lm(l,p){return l<p}function mP(l,p){var b=-1,M=hs(l)?ye(l.length):[];return yu(l,function(j,ee,de){M[++b]=p(j,ee,de)}),M}function yP(l){var p=Am(l);return p.length==1&&p[0][2]?ZP(p[0][0],p[0][1]):function(b){return b===l||um(b,l,p)}}function _P(l,p){return Pm(l)&&JP(p)?ZP(ca(l),p):function(b){var M=Dm(b,l);return M===r&&M===p?Fm(b,l):Df(p,M,m|_)}}function $d(l,p,b,M,j){l!==p&&im(p,function(ee,de){if(j||(j=new Oo),Gn(ee))HW(l,p,de,b,$d,M,j);else{var be=M?M(Om(l,de),ee,de+"",l,p,j):r;be===r&&(be=ee),rm(l,de,be)}},ds)}function HW(l,p,b,M,j,ee,de){var be=Om(l,b),Pe=Om(p,b),rt=de.get(Pe);if(rt){rm(l,b,rt);return}var nt=ee?ee(be,Pe,b+"",l,p,de):r,ut=nt===r;if(ut){var xt=pr(Pe),Vt=!xt&&xu(Pe),tr=!xt&&!Vt&&fl(Pe);nt=Pe,xt||Vt||tr?pr(be)?nt=be:Qn(be)?nt=fs(be):Vt?(ut=!1,nt=RP(Pe,!0)):tr?(ut=!1,nt=kP(Pe,!0)):nt=[]:Gf(Pe)||hc(Pe)?(nt=be,hc(be)?nt=CC(be):(!Gn(be)||Ga(be))&&(nt=KP(Pe))):ut=!1}ut&&(de.set(Pe,nt),j(nt,Pe,M,ee,de),de.delete(Pe)),rm(l,b,nt)}function bP(l,p){var b=l.length;if(b)return p+=p<0?b:0,Va(p,b)?l[p]:r}function wP(l,p,b){p.length?p=Pt(p,function(ee){return pr(ee)?function(de){return cc(de,ee.length===1?ee[0]:ee)}:ee}):p=[ps];var M=-1;p=Pt(p,Ui(Qt()));var j=mP(l,function(ee,de,be){var Pe=Pt(p,function(rt){return rt(ee)});return{criteria:Pe,index:++M,value:ee}});return ia(j,function(ee,de){return sX(ee,de,b)})}function WW(l,p){return xP(l,p,function(b,M){return Fm(l,M)})}function xP(l,p,b){for(var M=-1,j=p.length,ee={};++M<j;){var de=p[M],be=cc(l,de);b(be,de)&&Ff(ee,bu(de,l),be)}return ee}function XW(l){return function(p){return cc(p,l)}}function fm(l,p,b,M){var j=M?tc:fn,ee=-1,de=p.length,be=l;for(l===p&&(p=fs(p)),b&&(be=Pt(l,Ui(b)));++ee<de;)for(var Pe=0,rt=p[ee],nt=b?b(rt):rt;(Pe=j(be,nt,Pe,M))>-1;)be!==l&&Md.call(be,Pe,1),Md.call(l,Pe,1);return l}function SP(l,p){for(var b=l?p.length:0,M=b-1;b--;){var j=p[b];if(b==M||j!==ee){var ee=j;Va(j)?Md.call(l,j,1):vm(l,j)}}return l}function hm(l,p){return l+qd(nP()*(p-l+1))}function YW(l,p,b,M){for(var j=-1,ee=gi(Nd((p-l)/(b||1)),0),de=ye(ee);ee--;)de[M?ee:++j]=l,l+=b;return de}function dm(l,p){var b="";if(!l||p<1||p>F)return b;do p%2&&(b+=l),p=qd(p/2),p&&(l+=l);while(p);return b}function Ar(l,p){return Im(QP(l,p,ps),l+"")}function KW(l){return oP(hl(l))}function JW(l,p){var b=hl(l);return Qd(b,uc(p,0,b.length))}function Ff(l,p,b,M){if(!Gn(l))return l;p=bu(p,l);for(var j=-1,ee=p.length,de=ee-1,be=l;be!=null&&++j<ee;){var Pe=ca(p[j]),rt=b;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return l;if(j!=de){var nt=be[Pe];rt=M?M(nt,Pe,be):r,rt===r&&(rt=Gn(nt)?nt:Va(p[j+1])?[]:{})}Lf(be,Pe,rt),be=be[Pe]}return l}var EP=Dd?function(l,p){return Dd.set(l,p),l}:ps,ZW=Ld?function(l,p){return Ld(l,"toString",{configurable:!0,enumerable:!1,value:zm(p),writable:!0})}:ps;function QW(l){return Qd(hl(l))}function Zs(l,p,b){var M=-1,j=l.length;p<0&&(p=-p>j?0:j+p),b=b>j?j:b,b<0&&(b+=j),j=p>b?0:b-p>>>0,p>>>=0;for(var ee=ye(j);++M<j;)ee[M]=l[M+p];return ee}function eX(l,p){var b;return yu(l,function(M,j,ee){return b=p(M,j,ee),!b}),!!b}function Ud(l,p,b){var M=0,j=l==null?M:l.length;if(typeof p=="number"&&p===p&&j<=ge){for(;M<j;){var ee=M+j>>>1,de=l[ee];de!==null&&!Rs(de)&&(b?de<=p:de<p)?M=ee+1:j=ee}return j}return pm(l,p,ps,b)}function pm(l,p,b,M){var j=0,ee=l==null?0:l.length;if(ee===0)return 0;p=b(p);for(var de=p!==p,be=p===null,Pe=Rs(p),rt=p===r;j<ee;){var nt=qd((j+ee)/2),ut=b(l[nt]),xt=ut!==r,Vt=ut===null,tr=ut===ut,wr=Rs(ut);if(de)var rr=M||tr;else rt?rr=tr&&(M||xt):be?rr=tr&&xt&&(M||!Vt):Pe?rr=tr&&xt&&!Vt&&(M||!wr):Vt||wr?rr=!1:rr=M?ut<=p:ut<p;rr?j=nt+1:ee=nt}return Li(ee,we)}function AP(l,p){for(var b=-1,M=l.length,j=0,ee=[];++b<M;){var de=l[b],be=p?p(de):de;if(!b||!Io(be,Pe)){var Pe=be;ee[j++]=de===0?0:de}}return ee}function TP(l){return typeof l=="number"?l:Rs(l)?ie:+l}function Is(l){if(typeof l=="string")return l;if(pr(l))return Pt(l,Is)+"";if(Rs(l))return iP?iP.call(l):"";var p=l+"";return p=="0"&&1/l==-1/0?"-0":p}function _u(l,p,b){var M=-1,j=ke,ee=l.length,de=!0,be=[],Pe=be;if(b)de=!1,j=lt;else if(ee>=i){var rt=p?null:fX(l);if(rt)return Na(rt);de=!1,j=nc,Pe=new ac}else Pe=p?[]:be;e:for(;++M<ee;){var nt=l[M],ut=p?p(nt):nt;if(nt=b||nt!==0?nt:0,de&&ut===ut){for(var xt=Pe.length;xt--;)if(Pe[xt]===ut)continue e;p&&Pe.push(ut),be.push(nt)}else j(Pe,ut,b)||(Pe!==be&&Pe.push(ut),be.push(nt))}return be}function vm(l,p){return p=bu(p,l),l=eC(l,p),l==null||delete l[ca(Qs(p))]}function PP(l,p,b,M){return Ff(l,p,b(cc(l,p)),M)}function jd(l,p,b,M){for(var j=l.length,ee=M?j:-1;(M?ee--:++ee<j)&&p(l[ee],ee,l););return b?Zs(l,M?0:ee,M?ee+1:j):Zs(l,M?ee+1:0,M?j:ee)}function CP(l,p){var b=l;return b instanceof Fr&&(b=b.value()),fr(p,function(M,j){return j.func.apply(j.thisArg,dr([M],j.args))},b)}function gm(l,p,b){var M=l.length;if(M<2)return M?_u(l[0]):[];for(var j=-1,ee=ye(M);++j<M;)for(var de=l[j],be=-1;++be<M;)be!=j&&(ee[j]=Nf(ee[j]||de,l[be],p,b));return _u(Oi(ee,1),p,b)}function OP(l,p,b){for(var M=-1,j=l.length,ee=p.length,de={};++M<j;){var be=M<ee?p[M]:r;b(de,l[M],be)}return de}function mm(l){return Qn(l)?l:[]}function ym(l){return typeof l=="function"?l:ps}function bu(l,p){return pr(l)?l:Pm(l,p)?[l]:iC(sn(l))}var tX=Ar;function wu(l,p,b){var M=l.length;return b=b===r?M:b,!p&&b>=M?l:Zs(l,p,b)}var IP=GH||function(l){return zn.clearTimeout(l)};function RP(l,p){if(p)return l.slice();var b=l.length,M=ZT?ZT(b):new l.constructor(b);return l.copy(M),M}function _m(l){var p=new l.constructor(l.byteLength);return new Rd(p).set(new Rd(l)),p}function rX(l,p){var b=p?_m(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.byteLength)}function nX(l){var p=new l.constructor(l.source,ct.exec(l));return p.lastIndex=l.lastIndex,p}function iX(l){return Mf?At(Mf.call(l)):{}}function kP(l,p){var b=p?_m(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.length)}function MP(l,p){if(l!==p){var b=l!==r,M=l===null,j=l===l,ee=Rs(l),de=p!==r,be=p===null,Pe=p===p,rt=Rs(p);if(!be&&!rt&&!ee&&l>p||ee&&de&&Pe&&!be&&!rt||M&&de&&Pe||!b&&Pe||!j)return 1;if(!M&&!ee&&!rt&&l<p||rt&&b&&j&&!M&&!ee||be&&b&&j||!de&&j||!Pe)return-1}return 0}function sX(l,p,b){for(var M=-1,j=l.criteria,ee=p.criteria,de=j.length,be=b.length;++M<de;){var Pe=MP(j[M],ee[M]);if(Pe){if(M>=be)return Pe;var rt=b[M];return Pe*(rt=="desc"?-1:1)}}return l.index-p.index}function LP(l,p,b,M){for(var j=-1,ee=l.length,de=b.length,be=-1,Pe=p.length,rt=gi(ee-de,0),nt=ye(Pe+rt),ut=!M;++be<Pe;)nt[be]=p[be];for(;++j<de;)(ut||j<ee)&&(nt[b[j]]=l[j]);for(;rt--;)nt[be++]=l[j++];return nt}function NP(l,p,b,M){for(var j=-1,ee=l.length,de=-1,be=b.length,Pe=-1,rt=p.length,nt=gi(ee-be,0),ut=ye(nt+rt),xt=!M;++j<nt;)ut[j]=l[j];for(var Vt=j;++Pe<rt;)ut[Vt+Pe]=p[Pe];for(;++de<be;)(xt||j<ee)&&(ut[Vt+b[de]]=l[j++]);return ut}function fs(l,p){var b=-1,M=l.length;for(p||(p=ye(M));++b<M;)p[b]=l[b];return p}function ua(l,p,b,M){var j=!b;b||(b={});for(var ee=-1,de=p.length;++ee<de;){var be=p[ee],Pe=M?M(b[be],l[be],be,b,l):r;Pe===r&&(Pe=l[be]),j?Fa(b,be,Pe):Lf(b,be,Pe)}return b}function oX(l,p){return ua(l,Tm(l),p)}function aX(l,p){return ua(l,XP(l),p)}function Hd(l,p){return function(b,M){var j=pr(b)?ve:OW,ee=p?p():{};return j(b,l,Qt(M,2),ee)}}function ul(l){return Ar(function(p,b){var M=-1,j=b.length,ee=j>1?b[j-1]:r,de=j>2?b[2]:r;for(ee=l.length>3&&typeof ee=="function"?(j--,ee):r,de&&Xi(b[0],b[1],de)&&(ee=j<3?r:ee,j=1),p=At(p);++M<j;){var be=b[M];be&&l(p,be,M,ee)}return p})}function qP(l,p){return function(b,M){if(b==null)return b;if(!hs(b))return l(b,M);for(var j=b.length,ee=p?j:-1,de=At(b);(p?ee--:++ee<j)&&M(de[ee],ee,de)!==!1;);return b}}function DP(l){return function(p,b,M){for(var j=-1,ee=At(p),de=M(p),be=de.length;be--;){var Pe=de[l?be:++j];if(b(ee[Pe],Pe,ee)===!1)break}return p}}function uX(l,p,b){var M=p&x,j=Bf(l);function ee(){var de=this&&this!==zn&&this instanceof ee?j:l;return de.apply(M?b:this,arguments)}return ee}function FP(l){return function(p){p=sn(p);var b=ls(p)?ji(p):r,M=b?b[0]:p.charAt(0),j=b?wu(b,1).join(""):p.slice(1);return M[l]()+j}}function cl(l){return function(p){return fr(qC(NC(p).replace(bf,"")),l,"")}}function Bf(l){return function(){var p=arguments;switch(p.length){case 0:return new l;case 1:return new l(p[0]);case 2:return new l(p[0],p[1]);case 3:return new l(p[0],p[1],p[2]);case 4:return new l(p[0],p[1],p[2],p[3]);case 5:return new l(p[0],p[1],p[2],p[3],p[4]);case 6:return new l(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new l(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var b=al(l.prototype),M=l.apply(b,p);return Gn(M)?M:b}}function cX(l,p,b){var M=Bf(l);function j(){for(var ee=arguments.length,de=ye(ee),be=ee,Pe=ll(j);be--;)de[be]=arguments[be];var rt=ee<3&&de[0]!==Pe&&de[ee-1]!==Pe?[]:Os(de,Pe);if(ee-=rt.length,ee<b)return $P(l,p,Wd,j.placeholder,r,de,rt,r,r,b-ee);var nt=this&&this!==zn&&this instanceof j?M:l;return X(nt,this,de)}return j}function BP(l){return function(p,b,M){var j=At(p);if(!hs(p)){var ee=Qt(b,3);p=Si(p),b=function(be){return ee(j[be],be,j)}}var de=l(p,b,M);return de>-1?j[ee?p[de]:de]:r}}function zP(l){return za(function(p){var b=p.length,M=b,j=Ks.prototype.thru;for(l&&p.reverse();M--;){var ee=p[M];if(typeof ee!="function")throw new Er(o);if(j&&!de&&Jd(ee)=="wrapper")var de=new Ks([],!0)}for(M=de?M:b;++M<b;){ee=p[M];var be=Jd(ee),Pe=be=="wrapper"?Em(ee):r;Pe&&Cm(Pe[0])&&Pe[1]==(d|T|O|C)&&!Pe[4].length&&Pe[9]==1?de=de[Jd(Pe[0])].apply(de,Pe[3]):de=ee.length==1&&Cm(ee)?de[be]():de.thru(ee)}return function(){var rt=arguments,nt=rt[0];if(de&&rt.length==1&&pr(nt))return de.plant(nt).value();for(var ut=0,xt=b?p[ut].apply(this,rt):nt;++ut<b;)xt=p[ut].call(this,xt);return xt}})}function Wd(l,p,b,M,j,ee,de,be,Pe,rt){var nt=p&d,ut=p&x,xt=p&S,Vt=p&(T|E),tr=p&R,wr=xt?r:Bf(l);function rr(){for(var Lr=arguments.length,jr=ye(Lr),ks=Lr;ks--;)jr[ks]=arguments[ks];if(Vt)var Yi=ll(rr),Ms=Cs(jr,Yi);if(M&&(jr=LP(jr,M,j,Vt)),ee&&(jr=NP(jr,ee,de,Vt)),Lr-=Ms,Vt&&Lr<rt){var ei=Os(jr,Yi);return $P(l,p,Wd,rr.placeholder,b,jr,ei,be,Pe,rt-Lr)}var Ro=ut?b:this,Ua=xt?Ro[l]:l;return Lr=jr.length,be?jr=OX(jr,be):tr&&Lr>1&&jr.reverse(),nt&&Pe<Lr&&(jr.length=Pe),this&&this!==zn&&this instanceof rr&&(Ua=wr||Bf(Ua)),Ua.apply(Ro,jr)}return rr}function VP(l,p){return function(b,M){return DW(b,l,p(M),{})}}function Xd(l,p){return function(b,M){var j;if(b===r&&M===r)return p;if(b!==r&&(j=b),M!==r){if(j===r)return M;typeof b=="string"||typeof M=="string"?(b=Is(b),M=Is(M)):(b=TP(b),M=TP(M)),j=l(b,M)}return j}}function bm(l){return za(function(p){return p=Pt(p,Ui(Qt())),Ar(function(b){var M=this;return l(p,function(j){return X(j,M,b)})})})}function Yd(l,p){p=p===r?" ":Is(p);var b=p.length;if(b<2)return b?dm(p,l):p;var M=dm(p,Nd(l/oa(p)));return ls(p)?wu(ji(M),0,l).join(""):M.slice(0,l)}function lX(l,p,b,M){var j=p&x,ee=Bf(l);function de(){for(var be=-1,Pe=arguments.length,rt=-1,nt=M.length,ut=ye(nt+Pe),xt=this&&this!==zn&&this instanceof de?ee:l;++rt<nt;)ut[rt]=M[rt];for(;Pe--;)ut[rt++]=arguments[++be];return X(xt,j?b:this,ut)}return de}function GP(l){return function(p,b,M){return M&&typeof M!="number"&&Xi(p,b,M)&&(b=M=r),p=$a(p),b===r?(b=p,p=0):b=$a(b),M=M===r?p<b?1:-1:$a(M),YW(p,b,M,l)}}function Kd(l){return function(p,b){return typeof p=="string"&&typeof b=="string"||(p=eo(p),b=eo(b)),l(p,b)}}function $P(l,p,b,M,j,ee,de,be,Pe,rt){var nt=p&T,ut=nt?de:r,xt=nt?r:de,Vt=nt?ee:r,tr=nt?r:ee;p|=nt?O:N,p&=~(nt?N:O),p&P||(p&=-4);var wr=[l,p,j,Vt,ut,tr,xt,be,Pe,rt],rr=b.apply(r,wr);return Cm(l)&&tC(rr,wr),rr.placeholder=M,rC(rr,l,p)}function wm(l){var p=kt[l];return function(b,M){if(b=eo(b),M=M==null?0:Li(_r(M),292),M&&rP(b)){var j=(sn(b)+"e").split("e"),ee=p(j[0]+"e"+(+j[1]+M));return j=(sn(ee)+"e").split("e"),+(j[0]+"e"+(+j[1]-M))}return p(b)}}var fX=sl&&1/Na(new sl([,-0]))[1]==D?function(l){return new sl(l)}:$m;function UP(l){return function(p){var b=Ni(p);return b==q?nl(p):b==Ce?Pf(p):Po(p,l(p))}}function Ba(l,p,b,M,j,ee,de,be){var Pe=p&S;if(!Pe&&typeof l!="function")throw new Er(o);var rt=M?M.length:0;if(rt||(p&=-97,M=j=r),de=de===r?de:gi(_r(de),0),be=be===r?be:_r(be),rt-=j?j.length:0,p&N){var nt=M,ut=j;M=j=r}var xt=Pe?r:Em(l),Vt=[l,p,b,M,j,nt,ut,ee,de,be];if(xt&&TX(Vt,xt),l=Vt[0],p=Vt[1],b=Vt[2],M=Vt[3],j=Vt[4],be=Vt[9]=Vt[9]===r?Pe?0:l.length:gi(Vt[9]-rt,0),!be&&p&(T|E)&&(p&=-25),!p||p==x)var tr=uX(l,p,b);else p==T||p==E?tr=cX(l,p,be):(p==O||p==(x|O))&&!j.length?tr=lX(l,p,b,M):tr=Wd.apply(r,Vt);var wr=xt?EP:tC;return rC(wr(tr,Vt),l,p)}function jP(l,p,b,M){return l===r||Io(l,vi[b])&&!lr.call(M,b)?p:l}function HP(l,p,b,M,j,ee){return Gn(l)&&Gn(p)&&(ee.set(p,l),$d(l,p,r,HP,ee),ee.delete(p)),l}function hX(l){return Gf(l)?r:l}function WP(l,p,b,M,j,ee){var de=b&m,be=l.length,Pe=p.length;if(be!=Pe&&!(de&&Pe>be))return!1;var rt=ee.get(l),nt=ee.get(p);if(rt&&nt)return rt==p&&nt==l;var ut=-1,xt=!0,Vt=b&_?new ac:r;for(ee.set(l,p),ee.set(p,l);++ut<be;){var tr=l[ut],wr=p[ut];if(M)var rr=de?M(wr,tr,ut,p,l,ee):M(tr,wr,ut,l,p,ee);if(rr!==r){if(rr)continue;xt=!1;break}if(Vt){if(!Vn(p,function(Lr,jr){if(!nc(Vt,jr)&&(tr===Lr||j(tr,Lr,b,M,ee)))return Vt.push(jr)})){xt=!1;break}}else if(!(tr===wr||j(tr,wr,b,M,ee))){xt=!1;break}}return ee.delete(l),ee.delete(p),xt}function dX(l,p,b,M,j,ee,de){switch(b){case bt:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case ft:return!(l.byteLength!=p.byteLength||!ee(new Rd(l),new Rd(p)));case le:case Ge:case G:return Io(+l,+p);case Oe:return l.name==p.name&&l.message==p.message;case Te:case Ue:return l==p+"";case q:var be=nl;case Ce:var Pe=M&m;if(be||(be=Na),l.size!=p.size&&!Pe)return!1;var rt=de.get(l);if(rt)return rt==p;M|=_,de.set(l,p);var nt=WP(be(l),be(p),M,j,ee,de);return de.delete(l),nt;case Le:if(Mf)return Mf.call(l)==Mf.call(p)}return!1}function pX(l,p,b,M,j,ee){var de=b&m,be=xm(l),Pe=be.length,rt=xm(p),nt=rt.length;if(Pe!=nt&&!de)return!1;for(var ut=Pe;ut--;){var xt=be[ut];if(!(de?xt in p:lr.call(p,xt)))return!1}var Vt=ee.get(l),tr=ee.get(p);if(Vt&&tr)return Vt==p&&tr==l;var wr=!0;ee.set(l,p),ee.set(p,l);for(var rr=de;++ut<Pe;){xt=be[ut];var Lr=l[xt],jr=p[xt];if(M)var ks=de?M(jr,Lr,xt,p,l,ee):M(Lr,jr,xt,l,p,ee);if(!(ks===r?Lr===jr||j(Lr,jr,b,M,ee):ks)){wr=!1;break}rr||(rr=xt=="constructor")}if(wr&&!rr){var Yi=l.constructor,Ms=p.constructor;Yi!=Ms&&"constructor"in l&&"constructor"in p&&!(typeof Yi=="function"&&Yi instanceof Yi&&typeof Ms=="function"&&Ms instanceof Ms)&&(wr=!1)}return ee.delete(l),ee.delete(p),wr}function za(l){return Im(QP(l,r,uC),l+"")}function xm(l){return dP(l,Si,Tm)}function Sm(l){return dP(l,ds,XP)}var Em=Dd?function(l){return Dd.get(l)}:$m;function Jd(l){for(var p=l.name+"",b=ol[p],M=lr.call(ol,p)?b.length:0;M--;){var j=b[M],ee=j.func;if(ee==null||ee==l)return j.name}return p}function ll(l){var p=lr.call(Z,"placeholder")?Z:l;return p.placeholder}function Qt(){var l=Z.iteratee||Vm;return l=l===Vm?gP:l,arguments.length?l(arguments[0],arguments[1]):l}function Zd(l,p){var b=l.__data__;return xX(p)?b[typeof p=="string"?"string":"hash"]:b.map}function Am(l){for(var p=Si(l),b=p.length;b--;){var M=p[b],j=l[M];p[b]=[M,j,JP(j)]}return p}function lc(l,p){var b=Td(l,p);return vP(b)?b:r}function vX(l){var p=lr.call(l,sc),b=l[sc];try{l[sc]=r;var M=!0}catch{}var j=Od.call(l);return M&&(p?l[sc]=b:delete l[sc]),j}var Tm=Qg?function(l){return l==null?[]:(l=At(l),He(Qg(l),function(p){return eP.call(l,p)}))}:Um,XP=Qg?function(l){for(var p=[];l;)dr(p,Tm(l)),l=kd(l);return p}:Um,Ni=Wi;(em&&Ni(new em(new ArrayBuffer(1)))!=bt||If&&Ni(new If)!=q||tm&&Ni(tm.resolve())!=Ee||sl&&Ni(new sl)!=Ce||Rf&&Ni(new Rf)!=Se)&&(Ni=function(l){var p=Wi(l),b=p==J?l.constructor:r,M=b?fc(b):"";if(M)switch(M){case JH:return bt;case ZH:return q;case QH:return Ee;case eW:return Ce;case tW:return Se}return p});function gX(l,p,b){for(var M=-1,j=b.length;++M<j;){var ee=b[M],de=ee.size;switch(ee.type){case"drop":l+=de;break;case"dropRight":p-=de;break;case"take":p=Li(p,l+de);break;case"takeRight":l=gi(l,p-de);break}}return{start:l,end:p}}function mX(l){var p=l.match(_i);return p?p[1].split(Je):[]}function YP(l,p,b){p=bu(p,l);for(var M=-1,j=p.length,ee=!1;++M<j;){var de=ca(p[M]);if(!(ee=l!=null&&b(l,de)))break;l=l[de]}return ee||++M!=j?ee:(j=l==null?0:l.length,!!j&&sp(j)&&Va(de,j)&&(pr(l)||hc(l)))}function yX(l){var p=l.length,b=new l.constructor(p);return p&&typeof l[0]=="string"&&lr.call(l,"index")&&(b.index=l.index,b.input=l.input),b}function KP(l){return typeof l.constructor=="function"&&!zf(l)?al(kd(l)):{}}function _X(l,p,b){var M=l.constructor;switch(p){case ft:return _m(l);case le:case Ge:return new M(+l);case bt:return rX(l,b);case dt:case it:case Jt:case Sr:case sr:case vr:case qr:case Vr:case In:return kP(l,b);case q:return new M;case G:case Ue:return new M(l);case Te:return nX(l);case Ce:return new M;case Le:return iX(l)}}function bX(l,p){var b=p.length;if(!b)return l;var M=b-1;return p[M]=(b>1?"& ":"")+p[M],p=p.join(b>2?", ":" "),l.replace(Bn,`{
/* [wrapped with `+p+`] */
`)}function wX(l){return pr(l)||hc(l)||!!(tP&&l&&l[tP])}function Va(l,p){var b=typeof l;return p=p??F,!!p&&(b=="number"||b!="symbol"&&ln.test(l))&&l>-1&&l%1==0&&l<p}function Xi(l,p,b){if(!Gn(b))return!1;var M=typeof p;return(M=="number"?hs(b)&&Va(p,b.length):M=="string"&&p in b)?Io(b[p],l):!1}function Pm(l,p){if(pr(l))return!1;var b=typeof l;return b=="number"||b=="symbol"||b=="boolean"||l==null||Rs(l)?!0:Rn.test(l)||!Un.test(l)||p!=null&&l in At(p)}function xX(l){var p=typeof l;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?l!=="__proto__":l===null}function Cm(l){var p=Jd(l),b=Z[p];if(typeof b!="function"||!(p in Fr.prototype))return!1;if(l===b)return!0;var M=Em(b);return!!M&&l===M[0]}function SX(l){return!!JT&&JT in l}var EX=Hi?Ga:jm;function zf(l){var p=l&&l.constructor,b=typeof p=="function"&&p.prototype||vi;return l===b}function JP(l){return l===l&&!Gn(l)}function ZP(l,p){return function(b){return b==null?!1:b[l]===p&&(p!==r||l in At(b))}}function AX(l){var p=np(l,function(M){return b.size===c&&b.clear(),M}),b=p.cache;return p}function TX(l,p){var b=l[1],M=p[1],j=b|M,ee=j<(x|S|d),de=M==d&&b==T||M==d&&b==C&&l[7].length<=p[8]||M==(d|C)&&p[7].length<=p[8]&&b==T;if(!(ee||de))return l;M&x&&(l[2]=p[2],j|=b&x?0:P);var be=p[3];if(be){var Pe=l[3];l[3]=Pe?LP(Pe,be,p[4]):be,l[4]=Pe?Os(l[3],f):p[4]}return be=p[5],be&&(Pe=l[5],l[5]=Pe?NP(Pe,be,p[6]):be,l[6]=Pe?Os(l[5],f):p[6]),be=p[7],be&&(l[7]=be),M&d&&(l[8]=l[8]==null?p[8]:Li(l[8],p[8])),l[9]==null&&(l[9]=p[9]),l[0]=p[0],l[1]=j,l}function PX(l){var p=[];if(l!=null)for(var b in At(l))p.push(b);return p}function CX(l){return Od.call(l)}function QP(l,p,b){return p=gi(p===r?l.length-1:p,0),function(){for(var M=arguments,j=-1,ee=gi(M.length-p,0),de=ye(ee);++j<ee;)de[j]=M[p+j];j=-1;for(var be=ye(p+1);++j<p;)be[j]=M[j];return be[p]=b(de),X(l,this,be)}}function eC(l,p){return p.length<2?l:cc(l,Zs(p,0,-1))}function OX(l,p){for(var b=l.length,M=Li(p.length,b),j=fs(l);M--;){var ee=p[M];l[M]=Va(ee,b)?j[ee]:r}return l}function Om(l,p){if(!(p==="constructor"&&typeof l[p]=="function")&&p!="__proto__")return l[p]}var tC=nC(EP),Vf=UH||function(l,p){return zn.setTimeout(l,p)},Im=nC(ZW);function rC(l,p,b){var M=p+"";return Im(l,bX(M,IX(mX(M),b)))}function nC(l){var p=0,b=0;return function(){var M=XH(),j=U-(M-b);if(b=M,j>0){if(++p>=z)return arguments[0]}else p=0;return l.apply(r,arguments)}}function Qd(l,p){var b=-1,M=l.length,j=M-1;for(p=p===r?M:p;++b<p;){var ee=hm(b,j),de=l[ee];l[ee]=l[b],l[b]=de}return l.length=p,l}var iC=AX(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(Yr,function(b,M,j,ee){p.push(j?ee.replace(Ft,"$1"):M||b)}),p});function ca(l){if(typeof l=="string"||Rs(l))return l;var p=l+"";return p=="0"&&1/l==-1/0?"-0":p}function fc(l){if(l!=null){try{return Co.call(l)}catch{}try{return l+""}catch{}}return""}function IX(l,p){return ce(te,function(b){var M="_."+b[0];p&b[1]&&!ke(l,M)&&l.push(M)}),l.sort()}function sC(l){if(l instanceof Fr)return l.clone();var p=new Ks(l.__wrapped__,l.__chain__);return p.__actions__=fs(l.__actions__),p.__index__=l.__index__,p.__values__=l.__values__,p}function RX(l,p,b){(b?Xi(l,p,b):p===r)?p=1:p=gi(_r(p),0);var M=l==null?0:l.length;if(!M||p<1)return[];for(var j=0,ee=0,de=ye(Nd(M/p));j<M;)de[ee++]=Zs(l,j,j+=p);return de}function kX(l){for(var p=-1,b=l==null?0:l.length,M=0,j=[];++p<b;){var ee=l[p];ee&&(j[M++]=ee)}return j}function MX(){var l=arguments.length;if(!l)return[];for(var p=ye(l-1),b=arguments[0],M=l;M--;)p[M-1]=arguments[M];return dr(pr(b)?fs(b):[b],Oi(p,1))}var LX=Ar(function(l,p){return Qn(l)?Nf(l,Oi(p,1,Qn,!0)):[]}),NX=Ar(function(l,p){var b=Qs(p);return Qn(b)&&(b=r),Qn(l)?Nf(l,Oi(p,1,Qn,!0),Qt(b,2)):[]}),qX=Ar(function(l,p){var b=Qs(p);return Qn(b)&&(b=r),Qn(l)?Nf(l,Oi(p,1,Qn,!0),r,b):[]});function DX(l,p,b){var M=l==null?0:l.length;return M?(p=b||p===r?1:_r(p),Zs(l,p<0?0:p,M)):[]}function FX(l,p,b){var M=l==null?0:l.length;return M?(p=b||p===r?1:_r(p),p=M-p,Zs(l,0,p<0?0:p)):[]}function BX(l,p){return l&&l.length?jd(l,Qt(p,3),!0,!0):[]}function zX(l,p){return l&&l.length?jd(l,Qt(p,3),!0):[]}function VX(l,p,b,M){var j=l==null?0:l.length;return j?(b&&typeof b!="number"&&Xi(l,p,b)&&(b=0,M=j),MW(l,p,b,M)):[]}function oC(l,p,b){var M=l==null?0:l.length;if(!M)return-1;var j=b==null?0:_r(b);return j<0&&(j=gi(M+j,0)),Ir(l,Qt(p,3),j)}function aC(l,p,b){var M=l==null?0:l.length;if(!M)return-1;var j=M-1;return b!==r&&(j=_r(b),j=b<0?gi(M+j,0):Li(j,M-1)),Ir(l,Qt(p,3),j,!0)}function uC(l){var p=l==null?0:l.length;return p?Oi(l,1):[]}function GX(l){var p=l==null?0:l.length;return p?Oi(l,D):[]}function $X(l,p){var b=l==null?0:l.length;return b?(p=p===r?1:_r(p),Oi(l,p)):[]}function UX(l){for(var p=-1,b=l==null?0:l.length,M={};++p<b;){var j=l[p];M[j[0]]=j[1]}return M}function cC(l){return l&&l.length?l[0]:r}function jX(l,p,b){var M=l==null?0:l.length;if(!M)return-1;var j=b==null?0:_r(b);return j<0&&(j=gi(M+j,0)),fn(l,p,j)}function HX(l){var p=l==null?0:l.length;return p?Zs(l,0,-1):[]}var WX=Ar(function(l){var p=Pt(l,mm);return p.length&&p[0]===l[0]?am(p):[]}),XX=Ar(function(l){var p=Qs(l),b=Pt(l,mm);return p===Qs(b)?p=r:b.pop(),b.length&&b[0]===l[0]?am(b,Qt(p,2)):[]}),YX=Ar(function(l){var p=Qs(l),b=Pt(l,mm);return p=typeof p=="function"?p:r,p&&b.pop(),b.length&&b[0]===l[0]?am(b,r,p):[]});function KX(l,p){return l==null?"":HH.call(l,p)}function Qs(l){var p=l==null?0:l.length;return p?l[p-1]:r}function JX(l,p,b){var M=l==null?0:l.length;if(!M)return-1;var j=M;return b!==r&&(j=_r(b),j=j<0?gi(M+j,0):Li(j,M-1)),p===p?il(l,p,j):Ir(l,rl,j,!0)}function ZX(l,p){return l&&l.length?bP(l,_r(p)):r}var QX=Ar(lC);function lC(l,p){return l&&l.length&&p&&p.length?fm(l,p):l}function eY(l,p,b){return l&&l.length&&p&&p.length?fm(l,p,Qt(b,2)):l}function tY(l,p,b){return l&&l.length&&p&&p.length?fm(l,p,r,b):l}var rY=za(function(l,p){var b=l==null?0:l.length,M=nm(l,p);return SP(l,Pt(p,function(j){return Va(j,b)?+j:j}).sort(MP)),M});function nY(l,p){var b=[];if(!(l&&l.length))return b;var M=-1,j=[],ee=l.length;for(p=Qt(p,3);++M<ee;){var de=l[M];p(de,M,l)&&(b.push(de),j.push(M))}return SP(l,j),b}function Rm(l){return l==null?l:KH.call(l)}function iY(l,p,b){var M=l==null?0:l.length;return M?(b&&typeof b!="number"&&Xi(l,p,b)?(p=0,b=M):(p=p==null?0:_r(p),b=b===r?M:_r(b)),Zs(l,p,b)):[]}function sY(l,p){return Ud(l,p)}function oY(l,p,b){return pm(l,p,Qt(b,2))}function aY(l,p){var b=l==null?0:l.length;if(b){var M=Ud(l,p);if(M<b&&Io(l[M],p))return M}return-1}function uY(l,p){return Ud(l,p,!0)}function cY(l,p,b){return pm(l,p,Qt(b,2),!0)}function lY(l,p){var b=l==null?0:l.length;if(b){var M=Ud(l,p,!0)-1;if(Io(l[M],p))return M}return-1}function fY(l){return l&&l.length?AP(l):[]}function hY(l,p){return l&&l.length?AP(l,Qt(p,2)):[]}function dY(l){var p=l==null?0:l.length;return p?Zs(l,1,p):[]}function pY(l,p,b){return l&&l.length?(p=b||p===r?1:_r(p),Zs(l,0,p<0?0:p)):[]}function vY(l,p,b){var M=l==null?0:l.length;return M?(p=b||p===r?1:_r(p),p=M-p,Zs(l,p<0?0:p,M)):[]}function gY(l,p){return l&&l.length?jd(l,Qt(p,3),!1,!0):[]}function mY(l,p){return l&&l.length?jd(l,Qt(p,3)):[]}var yY=Ar(function(l){return _u(Oi(l,1,Qn,!0))}),_Y=Ar(function(l){var p=Qs(l);return Qn(p)&&(p=r),_u(Oi(l,1,Qn,!0),Qt(p,2))}),bY=Ar(function(l){var p=Qs(l);return p=typeof p=="function"?p:r,_u(Oi(l,1,Qn,!0),r,p)});function wY(l){return l&&l.length?_u(l):[]}function xY(l,p){return l&&l.length?_u(l,Qt(p,2)):[]}function SY(l,p){return p=typeof p=="function"?p:r,l&&l.length?_u(l,r,p):[]}function km(l){if(!(l&&l.length))return[];var p=0;return l=He(l,function(b){if(Qn(b))return p=gi(b.length,p),!0}),rc(p,function(b){return Pt(l,La(b))})}function fC(l,p){if(!(l&&l.length))return[];var b=km(l);return p==null?b:Pt(b,function(M){return X(p,r,M)})}var EY=Ar(function(l,p){return Qn(l)?Nf(l,p):[]}),AY=Ar(function(l){return gm(He(l,Qn))}),TY=Ar(function(l){var p=Qs(l);return Qn(p)&&(p=r),gm(He(l,Qn),Qt(p,2))}),PY=Ar(function(l){var p=Qs(l);return p=typeof p=="function"?p:r,gm(He(l,Qn),r,p)}),CY=Ar(km);function OY(l,p){return OP(l||[],p||[],Lf)}function IY(l,p){return OP(l||[],p||[],Ff)}var RY=Ar(function(l){var p=l.length,b=p>1?l[p-1]:r;return b=typeof b=="function"?(l.pop(),b):r,fC(l,b)});function hC(l){var p=Z(l);return p.__chain__=!0,p}function kY(l,p){return p(l),l}function ep(l,p){return p(l)}var MY=za(function(l){var p=l.length,b=p?l[0]:0,M=this.__wrapped__,j=function(ee){return nm(ee,l)};return p>1||this.__actions__.length||!(M instanceof Fr)||!Va(b)?this.thru(j):(M=M.slice(b,+b+(p?1:0)),M.__actions__.push({func:ep,args:[j],thisArg:r}),new Ks(M,this.__chain__).thru(function(ee){return p&&!ee.length&&ee.push(r),ee}))});function LY(){return hC(this)}function NY(){return new Ks(this.value(),this.__chain__)}function qY(){this.__values__===r&&(this.__values__=TC(this.value()));var l=this.__index__>=this.__values__.length,p=l?r:this.__values__[this.__index__++];return{done:l,value:p}}function DY(){return this}function FY(l){for(var p,b=this;b instanceof Bd;){var M=sC(b);M.__index__=0,M.__values__=r,p?j.__wrapped__=M:p=M;var j=M;b=b.__wrapped__}return j.__wrapped__=l,p}function BY(){var l=this.__wrapped__;if(l instanceof Fr){var p=l;return this.__actions__.length&&(p=new Fr(this)),p=p.reverse(),p.__actions__.push({func:ep,args:[Rm],thisArg:r}),new Ks(p,this.__chain__)}return this.thru(Rm)}function zY(){return CP(this.__wrapped__,this.__actions__)}var VY=Hd(function(l,p,b){lr.call(l,b)?++l[b]:Fa(l,b,1)});function GY(l,p,b){var M=pr(l)?ze:kW;return b&&Xi(l,p,b)&&(p=r),M(l,Qt(p,3))}function $Y(l,p){var b=pr(l)?He:fP;return b(l,Qt(p,3))}var UY=BP(oC),jY=BP(aC);function HY(l,p){return Oi(tp(l,p),1)}function WY(l,p){return Oi(tp(l,p),D)}function XY(l,p,b){return b=b===r?1:_r(b),Oi(tp(l,p),b)}function dC(l,p){var b=pr(l)?ce:yu;return b(l,Qt(p,3))}function pC(l,p){var b=pr(l)?Ae:lP;return b(l,Qt(p,3))}var YY=Hd(function(l,p,b){lr.call(l,b)?l[b].push(p):Fa(l,b,[p])});function KY(l,p,b,M){l=hs(l)?l:hl(l),b=b&&!M?_r(b):0;var j=l.length;return b<0&&(b=gi(j+b,0)),op(l)?b<=j&&l.indexOf(p,b)>-1:!!j&&fn(l,p,b)>-1}var JY=Ar(function(l,p,b){var M=-1,j=typeof p=="function",ee=hs(l)?ye(l.length):[];return yu(l,function(de){ee[++M]=j?X(p,de,b):qf(de,p,b)}),ee}),ZY=Hd(function(l,p,b){Fa(l,b,p)});function tp(l,p){var b=pr(l)?Pt:mP;return b(l,Qt(p,3))}function QY(l,p,b,M){return l==null?[]:(pr(p)||(p=p==null?[]:[p]),b=M?r:b,pr(b)||(b=b==null?[]:[b]),wP(l,p,b))}var eK=Hd(function(l,p,b){l[b?0:1].push(p)},function(){return[[],[]]});function tK(l,p,b){var M=pr(l)?fr:To,j=arguments.length<3;return M(l,Qt(p,4),b,j,yu)}function rK(l,p,b){var M=pr(l)?di:To,j=arguments.length<3;return M(l,Qt(p,4),b,j,lP)}function nK(l,p){var b=pr(l)?He:fP;return b(l,ip(Qt(p,3)))}function iK(l){var p=pr(l)?oP:KW;return p(l)}function sK(l,p,b){(b?Xi(l,p,b):p===r)?p=1:p=_r(p);var M=pr(l)?PW:JW;return M(l,p)}function oK(l){var p=pr(l)?CW:QW;return p(l)}function aK(l){if(l==null)return 0;if(hs(l))return op(l)?oa(l):l.length;var p=Ni(l);return p==q||p==Ce?l.size:cm(l).length}function uK(l,p,b){var M=pr(l)?Vn:eX;return b&&Xi(l,p,b)&&(p=r),M(l,Qt(p,3))}var cK=Ar(function(l,p){if(l==null)return[];var b=p.length;return b>1&&Xi(l,p[0],p[1])?p=[]:b>2&&Xi(p[0],p[1],p[2])&&(p=[p[0]]),wP(l,Oi(p,1),[])}),rp=$H||function(){return zn.Date.now()};function lK(l,p){if(typeof p!="function")throw new Er(o);return l=_r(l),function(){if(--l<1)return p.apply(this,arguments)}}function vC(l,p,b){return p=b?r:p,p=l&&p==null?l.length:p,Ba(l,d,r,r,r,r,p)}function gC(l,p){var b;if(typeof p!="function")throw new Er(o);return l=_r(l),function(){return--l>0&&(b=p.apply(this,arguments)),l<=1&&(p=r),b}}var Mm=Ar(function(l,p,b){var M=x;if(b.length){var j=Os(b,ll(Mm));M|=O}return Ba(l,M,p,b,j)}),mC=Ar(function(l,p,b){var M=x|S;if(b.length){var j=Os(b,ll(mC));M|=O}return Ba(p,M,l,b,j)});function yC(l,p,b){p=b?r:p;var M=Ba(l,T,r,r,r,r,r,p);return M.placeholder=yC.placeholder,M}function _C(l,p,b){p=b?r:p;var M=Ba(l,E,r,r,r,r,r,p);return M.placeholder=_C.placeholder,M}function bC(l,p,b){var M,j,ee,de,be,Pe,rt=0,nt=!1,ut=!1,xt=!0;if(typeof l!="function")throw new Er(o);p=eo(p)||0,Gn(b)&&(nt=!!b.leading,ut="maxWait"in b,ee=ut?gi(eo(b.maxWait)||0,p):ee,xt="trailing"in b?!!b.trailing:xt);function Vt(ei){var Ro=M,Ua=j;return M=j=r,rt=ei,de=l.apply(Ua,Ro),de}function tr(ei){return rt=ei,be=Vf(Lr,p),nt?Vt(ei):de}function wr(ei){var Ro=ei-Pe,Ua=ei-rt,BC=p-Ro;return ut?Li(BC,ee-Ua):BC}function rr(ei){var Ro=ei-Pe,Ua=ei-rt;return Pe===r||Ro>=p||Ro<0||ut&&Ua>=ee}function Lr(){var ei=rp();if(rr(ei))return jr(ei);be=Vf(Lr,wr(ei))}function jr(ei){return be=r,xt&&M?Vt(ei):(M=j=r,de)}function ks(){be!==r&&IP(be),rt=0,M=Pe=j=be=r}function Yi(){return be===r?de:jr(rp())}function Ms(){var ei=rp(),Ro=rr(ei);if(M=arguments,j=this,Pe=ei,Ro){if(be===r)return tr(Pe);if(ut)return IP(be),be=Vf(Lr,p),Vt(Pe)}return be===r&&(be=Vf(Lr,p)),de}return Ms.cancel=ks,Ms.flush=Yi,Ms}var fK=Ar(function(l,p){return cP(l,1,p)}),hK=Ar(function(l,p,b){return cP(l,eo(p)||0,b)});function dK(l){return Ba(l,R)}function np(l,p){if(typeof l!="function"||p!=null&&typeof p!="function")throw new Er(o);var b=function(){var M=arguments,j=p?p.apply(this,M):M[0],ee=b.cache;if(ee.has(j))return ee.get(j);var de=l.apply(this,M);return b.cache=ee.set(j,de)||ee,de};return b.cache=new(np.Cache||Da),b}np.Cache=Da;function ip(l){if(typeof l!="function")throw new Er(o);return function(){var p=arguments;switch(p.length){case 0:return!l.call(this);case 1:return!l.call(this,p[0]);case 2:return!l.call(this,p[0],p[1]);case 3:return!l.call(this,p[0],p[1],p[2])}return!l.apply(this,p)}}function pK(l){return gC(2,l)}var vK=tX(function(l,p){p=p.length==1&&pr(p[0])?Pt(p[0],Ui(Qt())):Pt(Oi(p,1),Ui(Qt()));var b=p.length;return Ar(function(M){for(var j=-1,ee=Li(M.length,b);++j<ee;)M[j]=p[j].call(this,M[j]);return X(l,this,M)})}),Lm=Ar(function(l,p){var b=Os(p,ll(Lm));return Ba(l,O,r,p,b)}),wC=Ar(function(l,p){var b=Os(p,ll(wC));return Ba(l,N,r,p,b)}),gK=za(function(l,p){return Ba(l,C,r,r,r,p)});function mK(l,p){if(typeof l!="function")throw new Er(o);return p=p===r?p:_r(p),Ar(l,p)}function yK(l,p){if(typeof l!="function")throw new Er(o);return p=p==null?0:gi(_r(p),0),Ar(function(b){var M=b[p],j=wu(b,0,p);return M&&dr(j,M),X(l,this,j)})}function _K(l,p,b){var M=!0,j=!0;if(typeof l!="function")throw new Er(o);return Gn(b)&&(M="leading"in b?!!b.leading:M,j="trailing"in b?!!b.trailing:j),bC(l,p,{leading:M,maxWait:p,trailing:j})}function bK(l){return vC(l,1)}function wK(l,p){return Lm(ym(p),l)}function xK(){if(!arguments.length)return[];var l=arguments[0];return pr(l)?l:[l]}function SK(l){return Js(l,y)}function EK(l,p){return p=typeof p=="function"?p:r,Js(l,y,p)}function AK(l){return Js(l,h|y)}function TK(l,p){return p=typeof p=="function"?p:r,Js(l,h|y,p)}function PK(l,p){return p==null||uP(l,p,Si(p))}function Io(l,p){return l===p||l!==l&&p!==p}var CK=Kd(om),OK=Kd(function(l,p){return l>=p}),hc=pP(function(){return arguments}())?pP:function(l){return Hn(l)&&lr.call(l,"callee")&&!eP.call(l,"callee")},pr=ye.isArray,IK=g?Ui(g):FW;function hs(l){return l!=null&&sp(l.length)&&!Ga(l)}function Qn(l){return Hn(l)&&hs(l)}function RK(l){return l===!0||l===!1||Hn(l)&&Wi(l)==le}var xu=jH||jm,kK=w?Ui(w):BW;function MK(l){return Hn(l)&&l.nodeType===1&&!Gf(l)}function LK(l){if(l==null)return!0;if(hs(l)&&(pr(l)||typeof l=="string"||typeof l.splice=="function"||xu(l)||fl(l)||hc(l)))return!l.length;var p=Ni(l);if(p==q||p==Ce)return!l.size;if(zf(l))return!cm(l).length;for(var b in l)if(lr.call(l,b))return!1;return!0}function NK(l,p){return Df(l,p)}function qK(l,p,b){b=typeof b=="function"?b:r;var M=b?b(l,p):r;return M===r?Df(l,p,r,b):!!M}function Nm(l){if(!Hn(l))return!1;var p=Wi(l);return p==Oe||p==Ne||typeof l.message=="string"&&typeof l.name=="string"&&!Gf(l)}function DK(l){return typeof l=="number"&&rP(l)}function Ga(l){if(!Gn(l))return!1;var p=Wi(l);return p==Ze||p==$e||p==Q||p==fe}function xC(l){return typeof l=="number"&&l==_r(l)}function sp(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=F}function Gn(l){var p=typeof l;return l!=null&&(p=="object"||p=="function")}function Hn(l){return l!=null&&typeof l=="object"}var SC=I?Ui(I):VW;function FK(l,p){return l===p||um(l,p,Am(p))}function BK(l,p,b){return b=typeof b=="function"?b:r,um(l,p,Am(p),b)}function zK(l){return EC(l)&&l!=+l}function VK(l){if(EX(l))throw new tt(s);return vP(l)}function GK(l){return l===null}function $K(l){return l==null}function EC(l){return typeof l=="number"||Hn(l)&&Wi(l)==G}function Gf(l){if(!Hn(l)||Wi(l)!=J)return!1;var p=kd(l);if(p===null)return!0;var b=lr.call(p,"constructor")&&p.constructor;return typeof b=="function"&&b instanceof b&&Co.call(b)==BH}var qm=L?Ui(L):GW;function UK(l){return xC(l)&&l>=-9007199254740991&&l<=F}var AC=V?Ui(V):$W;function op(l){return typeof l=="string"||!pr(l)&&Hn(l)&&Wi(l)==Ue}function Rs(l){return typeof l=="symbol"||Hn(l)&&Wi(l)==Le}var fl=$?Ui($):UW;function jK(l){return l===r}function HK(l){return Hn(l)&&Ni(l)==Se}function WK(l){return Hn(l)&&Wi(l)==Ye}var XK=Kd(lm),YK=Kd(function(l,p){return l<=p});function TC(l){if(!l)return[];if(hs(l))return op(l)?ji(l):fs(l);if(Of&&l[Of])return sa(l[Of]());var p=Ni(l),b=p==q?nl:p==Ce?Na:hl;return b(l)}function $a(l){if(!l)return l===0?l:0;if(l=eo(l),l===D||l===-1/0){var p=l<0?-1:1;return p*H}return l===l?l:0}function _r(l){var p=$a(l),b=p%1;return p===p?b?p-b:p:0}function PC(l){return l?uc(_r(l),0,se):0}function eo(l){if(typeof l=="number")return l;if(Rs(l))return ie;if(Gn(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=Gn(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=Ys(l);var b=wt.test(l);return b||Wt.test(l)?Xg(l.slice(2),b?2:8):Ke.test(l)?ie:+l}function CC(l){return ua(l,ds(l))}function KK(l){return l?uc(_r(l),-9007199254740991,F):l===0?l:0}function sn(l){return l==null?"":Is(l)}var JK=ul(function(l,p){if(zf(p)||hs(p)){ua(p,Si(p),l);return}for(var b in p)lr.call(p,b)&&Lf(l,b,p[b])}),OC=ul(function(l,p){ua(p,ds(p),l)}),ap=ul(function(l,p,b,M){ua(p,ds(p),l,M)}),ZK=ul(function(l,p,b,M){ua(p,Si(p),l,M)}),QK=za(nm);function eJ(l,p){var b=al(l);return p==null?b:aP(b,p)}var tJ=Ar(function(l,p){l=At(l);var b=-1,M=p.length,j=M>2?p[2]:r;for(j&&Xi(p[0],p[1],j)&&(M=1);++b<M;)for(var ee=p[b],de=ds(ee),be=-1,Pe=de.length;++be<Pe;){var rt=de[be],nt=l[rt];(nt===r||Io(nt,vi[rt])&&!lr.call(l,rt))&&(l[rt]=ee[rt])}return l}),rJ=Ar(function(l){return l.push(r,HP),X(IC,r,l)});function nJ(l,p){return na(l,Qt(p,3),aa)}function iJ(l,p){return na(l,Qt(p,3),sm)}function sJ(l,p){return l==null?l:im(l,Qt(p,3),ds)}function oJ(l,p){return l==null?l:hP(l,Qt(p,3),ds)}function aJ(l,p){return l&&aa(l,Qt(p,3))}function uJ(l,p){return l&&sm(l,Qt(p,3))}function cJ(l){return l==null?[]:Gd(l,Si(l))}function lJ(l){return l==null?[]:Gd(l,ds(l))}function Dm(l,p,b){var M=l==null?r:cc(l,p);return M===r?b:M}function fJ(l,p){return l!=null&&YP(l,p,LW)}function Fm(l,p){return l!=null&&YP(l,p,NW)}var hJ=VP(function(l,p,b){p!=null&&typeof p.toString!="function"&&(p=Od.call(p)),l[p]=b},zm(ps)),dJ=VP(function(l,p,b){p!=null&&typeof p.toString!="function"&&(p=Od.call(p)),lr.call(l,p)?l[p].push(b):l[p]=[b]},Qt),pJ=Ar(qf);function Si(l){return hs(l)?sP(l):cm(l)}function ds(l){return hs(l)?sP(l,!0):jW(l)}function vJ(l,p){var b={};return p=Qt(p,3),aa(l,function(M,j,ee){Fa(b,p(M,j,ee),M)}),b}function gJ(l,p){var b={};return p=Qt(p,3),aa(l,function(M,j,ee){Fa(b,j,p(M,j,ee))}),b}var mJ=ul(function(l,p,b){$d(l,p,b)}),IC=ul(function(l,p,b,M){$d(l,p,b,M)}),yJ=za(function(l,p){var b={};if(l==null)return b;var M=!1;p=Pt(p,function(ee){return ee=bu(ee,l),M||(M=ee.length>1),ee}),ua(l,Sm(l),b),M&&(b=Js(b,h|v|y,hX));for(var j=p.length;j--;)vm(b,p[j]);return b});function _J(l,p){return RC(l,ip(Qt(p)))}var bJ=za(function(l,p){return l==null?{}:WW(l,p)});function RC(l,p){if(l==null)return{};var b=Pt(Sm(l),function(M){return[M]});return p=Qt(p),xP(l,b,function(M,j){return p(M,j[0])})}function wJ(l,p,b){p=bu(p,l);var M=-1,j=p.length;for(j||(j=1,l=r);++M<j;){var ee=l==null?r:l[ca(p[M])];ee===r&&(M=j,ee=b),l=Ga(ee)?ee.call(l):ee}return l}function xJ(l,p,b){return l==null?l:Ff(l,p,b)}function SJ(l,p,b,M){return M=typeof M=="function"?M:r,l==null?l:Ff(l,p,b,M)}var kC=UP(Si),MC=UP(ds);function EJ(l,p,b){var M=pr(l),j=M||xu(l)||fl(l);if(p=Qt(p,4),b==null){var ee=l&&l.constructor;j?b=M?new ee:[]:Gn(l)?b=Ga(ee)?al(kd(l)):{}:b={}}return(j?ce:aa)(l,function(de,be,Pe){return p(b,de,be,Pe)}),b}function AJ(l,p){return l==null?!0:vm(l,p)}function TJ(l,p,b){return l==null?l:PP(l,p,ym(b))}function PJ(l,p,b,M){return M=typeof M=="function"?M:r,l==null?l:PP(l,p,ym(b),M)}function hl(l){return l==null?[]:Af(l,Si(l))}function CJ(l){return l==null?[]:Af(l,ds(l))}function OJ(l,p,b){return b===r&&(b=p,p=r),b!==r&&(b=eo(b),b=b===b?b:0),p!==r&&(p=eo(p),p=p===p?p:0),uc(eo(l),p,b)}function IJ(l,p,b){return p=$a(p),b===r?(b=p,p=0):b=$a(b),l=eo(l),qW(l,p,b)}function RJ(l,p,b){if(b&&typeof b!="boolean"&&Xi(l,p,b)&&(p=b=r),b===r&&(typeof p=="boolean"?(b=p,p=r):typeof l=="boolean"&&(b=l,l=r)),l===r&&p===r?(l=0,p=1):(l=$a(l),p===r?(p=l,l=0):p=$a(p)),l>p){var M=l;l=p,p=M}if(b||l%1||p%1){var j=nP();return Li(l+j*(p-l+Sf("1e-"+((j+"").length-1))),p)}return hm(l,p)}var kJ=cl(function(l,p,b){return p=p.toLowerCase(),l+(b?LC(p):p)});function LC(l){return Bm(sn(l).toLowerCase())}function NC(l){return l=sn(l),l&&l.replace(Jn,vu).replace(Gg,"")}function MJ(l,p,b){l=sn(l),p=Is(p);var M=l.length;b=b===r?M:uc(_r(b),0,M);var j=b;return b-=p.length,b>=0&&l.slice(b,j)==p}function LJ(l){return l=sn(l),l&&oi.test(l)?l.replace(xn,Kg):l}function NJ(l){return l=sn(l),l&&yi.test(l)?l.replace(Yn,"\\$&"):l}var qJ=cl(function(l,p,b){return l+(b?"-":"")+p.toLowerCase()}),DJ=cl(function(l,p,b){return l+(b?" ":"")+p.toLowerCase()}),FJ=FP("toLowerCase");function BJ(l,p,b){l=sn(l),p=_r(p);var M=p?oa(l):0;if(!p||M>=p)return l;var j=(p-M)/2;return Yd(qd(j),b)+l+Yd(Nd(j),b)}function zJ(l,p,b){l=sn(l),p=_r(p);var M=p?oa(l):0;return p&&M<p?l+Yd(p-M,b):l}function VJ(l,p,b){l=sn(l),p=_r(p);var M=p?oa(l):0;return p&&M<p?Yd(p-M,b)+l:l}function GJ(l,p,b){return b||p==null?p=0:p&&(p=+p),YH(sn(l).replace(tn,""),p||0)}function $J(l,p,b){return(b?Xi(l,p,b):p===r)?p=1:p=_r(p),dm(sn(l),p)}function UJ(){var l=arguments,p=sn(l[0]);return l.length<3?p:p.replace(l[1],l[2])}var jJ=cl(function(l,p,b){return l+(b?"_":"")+p.toLowerCase()});function HJ(l,p,b){return b&&typeof b!="number"&&Xi(l,p,b)&&(p=b=r),b=b===r?se:b>>>0,b?(l=sn(l),l&&(typeof p=="string"||p!=null&&!qm(p))&&(p=Is(p),!p&&ls(l))?wu(ji(l),0,b):l.split(p,b)):[]}var WJ=cl(function(l,p,b){return l+(b?" ":"")+Bm(p)});function XJ(l,p,b){return l=sn(l),b=b==null?0:uc(_r(b),0,l.length),p=Is(p),l.slice(b,b+p.length)==p}function YJ(l,p,b){var M=Z.templateSettings;b&&Xi(l,p,b)&&(p=r),l=sn(l),p=ap({},p,M,jP);var j=ap({},p.imports,M.imports,jP),ee=Si(j),de=Af(j,ee),be,Pe,rt=0,nt=p.interpolate||Dt,ut="__p += '",xt=yr((p.escape||Dt).source+"|"+nt.source+"|"+(nt===Gr?Bt:Dt).source+"|"+(p.evaluate||Dt).source+"|$","g"),Vt="//# sourceURL="+(lr.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wg+"]")+`
`;l.replace(xt,function(rr,Lr,jr,ks,Yi,Ms){return jr||(jr=ks),ut+=l.slice(rt,Ms).replace(rn,Jg),Lr&&(be=!0,ut+=`' +
__e(`+Lr+`) +
'`),Yi&&(Pe=!0,ut+=`';
`+Yi+`;
__p += '`),jr&&(ut+=`' +
((__t = (`+jr+`)) == null ? '' : __t) +
'`),rt=Ms+rr.length,rr}),ut+=`';
`;var tr=lr.call(p,"variable")&&p.variable;if(!tr)ut=`with (obj) {
`+ut+`
}
`;else if(Lt.test(tr))throw new tt(a);ut=(Pe?ut.replace(ur,""):ut).replace(Mr,"$1").replace(Tn,"$1;"),ut="function("+(tr||"obj")+`) {
`+(tr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(be?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ut+`return __p
}`;var wr=DC(function(){return Ot(ee,Vt+"return "+ut).apply(r,de)});if(wr.source=ut,Nm(wr))throw wr;return wr}function KJ(l){return sn(l).toLowerCase()}function JJ(l){return sn(l).toUpperCase()}function ZJ(l,p,b){if(l=sn(l),l&&(b||p===r))return Ys(l);if(!l||!(p=Is(p)))return l;var M=ji(l),j=ji(p),ee=Zr(M,j),de=ic(M,j)+1;return wu(M,ee,de).join("")}function QJ(l,p,b){if(l=sn(l),l&&(b||p===r))return l.slice(0,Pd(l)+1);if(!l||!(p=Is(p)))return l;var M=ji(l),j=ic(M,ji(p))+1;return wu(M,0,j).join("")}function eZ(l,p,b){if(l=sn(l),l&&(b||p===r))return l.replace(tn,"");if(!l||!(p=Is(p)))return l;var M=ji(l),j=Zr(M,ji(p));return wu(M,j).join("")}function tZ(l,p){var b=k,M=B;if(Gn(p)){var j="separator"in p?p.separator:j;b="length"in p?_r(p.length):b,M="omission"in p?Is(p.omission):M}l=sn(l);var ee=l.length;if(ls(l)){var de=ji(l);ee=de.length}if(b>=ee)return l;var be=b-oa(M);if(be<1)return M;var Pe=de?wu(de,0,be).join(""):l.slice(0,be);if(j===r)return Pe+M;if(de&&(be+=Pe.length-be),qm(j)){if(l.slice(be).search(j)){var rt,nt=Pe;for(j.global||(j=yr(j.source,sn(ct.exec(j))+"g")),j.lastIndex=0;rt=j.exec(nt);)var ut=rt.index;Pe=Pe.slice(0,ut===r?be:ut)}}else if(l.indexOf(Is(j),be)!=be){var xt=Pe.lastIndexOf(j);xt>-1&&(Pe=Pe.slice(0,xt))}return Pe+M}function rZ(l){return l=sn(l),l&&Xn.test(l)?l.replace(Pn,Cf):l}var nZ=cl(function(l,p,b){return l+(b?" ":"")+p.toUpperCase()}),Bm=FP("toUpperCase");function qC(l,p,b){return l=sn(l),p=b?r:p,p===r?Tf(l)?xe(l):Or(l):l.match(p)||[]}var DC=Ar(function(l,p){try{return X(l,r,p)}catch(b){return Nm(b)?b:new tt(b)}}),iZ=za(function(l,p){return ce(p,function(b){b=ca(b),Fa(l,b,Mm(l[b],l))}),l});function sZ(l){var p=l==null?0:l.length,b=Qt();return l=p?Pt(l,function(M){if(typeof M[1]!="function")throw new Er(o);return[b(M[0]),M[1]]}):[],Ar(function(M){for(var j=-1;++j<p;){var ee=l[j];if(X(ee[0],this,M))return X(ee[1],this,M)}})}function oZ(l){return RW(Js(l,h))}function zm(l){return function(){return l}}function aZ(l,p){return l==null||l!==l?p:l}var uZ=zP(),cZ=zP(!0);function ps(l){return l}function Vm(l){return gP(typeof l=="function"?l:Js(l,h))}function lZ(l){return yP(Js(l,h))}function fZ(l,p){return _P(l,Js(p,h))}var hZ=Ar(function(l,p){return function(b){return qf(b,l,p)}}),dZ=Ar(function(l,p){return function(b){return qf(l,b,p)}});function Gm(l,p,b){var M=Si(p),j=Gd(p,M);b==null&&!(Gn(p)&&(j.length||!M.length))&&(b=p,p=l,l=this,j=Gd(p,Si(p)));var ee=!(Gn(b)&&"chain"in b)||!!b.chain,de=Ga(l);return ce(j,function(be){var Pe=p[be];l[be]=Pe,de&&(l.prototype[be]=function(){var rt=this.__chain__;if(ee||rt){var nt=l(this.__wrapped__),ut=nt.__actions__=fs(this.__actions__);return ut.push({func:Pe,args:arguments,thisArg:l}),nt.__chain__=rt,nt}return Pe.apply(l,dr([this.value()],arguments))})}),l}function pZ(){return zn._===this&&(zn._=zH),this}function $m(){}function vZ(l){return l=_r(l),Ar(function(p){return bP(p,l)})}var gZ=bm(Pt),mZ=bm(ze),yZ=bm(Vn);function FC(l){return Pm(l)?La(ca(l)):XW(l)}function _Z(l){return function(p){return l==null?r:cc(l,p)}}var bZ=GP(),wZ=GP(!0);function Um(){return[]}function jm(){return!1}function xZ(){return{}}function SZ(){return""}function EZ(){return!0}function AZ(l,p){if(l=_r(l),l<1||l>F)return[];var b=se,M=Li(l,se);p=Qt(p),l-=se;for(var j=rc(M,p);++b<l;)p(b);return j}function TZ(l){return pr(l)?Pt(l,ca):Rs(l)?[l]:fs(iC(sn(l)))}function PZ(l){var p=++FH;return sn(l)+p}var CZ=Xd(function(l,p){return l+p},0),OZ=wm("ceil"),IZ=Xd(function(l,p){return l/p},1),RZ=wm("floor");function kZ(l){return l&&l.length?Vd(l,ps,om):r}function MZ(l,p){return l&&l.length?Vd(l,Qt(p,2),om):r}function LZ(l){return Ps(l,ps)}function NZ(l,p){return Ps(l,Qt(p,2))}function qZ(l){return l&&l.length?Vd(l,ps,lm):r}function DZ(l,p){return l&&l.length?Vd(l,Qt(p,2),lm):r}var FZ=Xd(function(l,p){return l*p},1),BZ=wm("round"),zZ=Xd(function(l,p){return l-p},0);function VZ(l){return l&&l.length?Mi(l,ps):0}function GZ(l,p){return l&&l.length?Mi(l,Qt(p,2)):0}return Z.after=lK,Z.ary=vC,Z.assign=JK,Z.assignIn=OC,Z.assignInWith=ap,Z.assignWith=ZK,Z.at=QK,Z.before=gC,Z.bind=Mm,Z.bindAll=iZ,Z.bindKey=mC,Z.castArray=xK,Z.chain=hC,Z.chunk=RX,Z.compact=kX,Z.concat=MX,Z.cond=sZ,Z.conforms=oZ,Z.constant=zm,Z.countBy=VY,Z.create=eJ,Z.curry=yC,Z.curryRight=_C,Z.debounce=bC,Z.defaults=tJ,Z.defaultsDeep=rJ,Z.defer=fK,Z.delay=hK,Z.difference=LX,Z.differenceBy=NX,Z.differenceWith=qX,Z.drop=DX,Z.dropRight=FX,Z.dropRightWhile=BX,Z.dropWhile=zX,Z.fill=VX,Z.filter=$Y,Z.flatMap=HY,Z.flatMapDeep=WY,Z.flatMapDepth=XY,Z.flatten=uC,Z.flattenDeep=GX,Z.flattenDepth=$X,Z.flip=dK,Z.flow=uZ,Z.flowRight=cZ,Z.fromPairs=UX,Z.functions=cJ,Z.functionsIn=lJ,Z.groupBy=YY,Z.initial=HX,Z.intersection=WX,Z.intersectionBy=XX,Z.intersectionWith=YX,Z.invert=hJ,Z.invertBy=dJ,Z.invokeMap=JY,Z.iteratee=Vm,Z.keyBy=ZY,Z.keys=Si,Z.keysIn=ds,Z.map=tp,Z.mapKeys=vJ,Z.mapValues=gJ,Z.matches=lZ,Z.matchesProperty=fZ,Z.memoize=np,Z.merge=mJ,Z.mergeWith=IC,Z.method=hZ,Z.methodOf=dZ,Z.mixin=Gm,Z.negate=ip,Z.nthArg=vZ,Z.omit=yJ,Z.omitBy=_J,Z.once=pK,Z.orderBy=QY,Z.over=gZ,Z.overArgs=vK,Z.overEvery=mZ,Z.overSome=yZ,Z.partial=Lm,Z.partialRight=wC,Z.partition=eK,Z.pick=bJ,Z.pickBy=RC,Z.property=FC,Z.propertyOf=_Z,Z.pull=QX,Z.pullAll=lC,Z.pullAllBy=eY,Z.pullAllWith=tY,Z.pullAt=rY,Z.range=bZ,Z.rangeRight=wZ,Z.rearg=gK,Z.reject=nK,Z.remove=nY,Z.rest=mK,Z.reverse=Rm,Z.sampleSize=sK,Z.set=xJ,Z.setWith=SJ,Z.shuffle=oK,Z.slice=iY,Z.sortBy=cK,Z.sortedUniq=fY,Z.sortedUniqBy=hY,Z.split=HJ,Z.spread=yK,Z.tail=dY,Z.take=pY,Z.takeRight=vY,Z.takeRightWhile=gY,Z.takeWhile=mY,Z.tap=kY,Z.throttle=_K,Z.thru=ep,Z.toArray=TC,Z.toPairs=kC,Z.toPairsIn=MC,Z.toPath=TZ,Z.toPlainObject=CC,Z.transform=EJ,Z.unary=bK,Z.union=yY,Z.unionBy=_Y,Z.unionWith=bY,Z.uniq=wY,Z.uniqBy=xY,Z.uniqWith=SY,Z.unset=AJ,Z.unzip=km,Z.unzipWith=fC,Z.update=TJ,Z.updateWith=PJ,Z.values=hl,Z.valuesIn=CJ,Z.without=EY,Z.words=qC,Z.wrap=wK,Z.xor=AY,Z.xorBy=TY,Z.xorWith=PY,Z.zip=CY,Z.zipObject=OY,Z.zipObjectDeep=IY,Z.zipWith=RY,Z.entries=kC,Z.entriesIn=MC,Z.extend=OC,Z.extendWith=ap,Gm(Z,Z),Z.add=CZ,Z.attempt=DC,Z.camelCase=kJ,Z.capitalize=LC,Z.ceil=OZ,Z.clamp=OJ,Z.clone=SK,Z.cloneDeep=AK,Z.cloneDeepWith=TK,Z.cloneWith=EK,Z.conformsTo=PK,Z.deburr=NC,Z.defaultTo=aZ,Z.divide=IZ,Z.endsWith=MJ,Z.eq=Io,Z.escape=LJ,Z.escapeRegExp=NJ,Z.every=GY,Z.find=UY,Z.findIndex=oC,Z.findKey=nJ,Z.findLast=jY,Z.findLastIndex=aC,Z.findLastKey=iJ,Z.floor=RZ,Z.forEach=dC,Z.forEachRight=pC,Z.forIn=sJ,Z.forInRight=oJ,Z.forOwn=aJ,Z.forOwnRight=uJ,Z.get=Dm,Z.gt=CK,Z.gte=OK,Z.has=fJ,Z.hasIn=Fm,Z.head=cC,Z.identity=ps,Z.includes=KY,Z.indexOf=jX,Z.inRange=IJ,Z.invoke=pJ,Z.isArguments=hc,Z.isArray=pr,Z.isArrayBuffer=IK,Z.isArrayLike=hs,Z.isArrayLikeObject=Qn,Z.isBoolean=RK,Z.isBuffer=xu,Z.isDate=kK,Z.isElement=MK,Z.isEmpty=LK,Z.isEqual=NK,Z.isEqualWith=qK,Z.isError=Nm,Z.isFinite=DK,Z.isFunction=Ga,Z.isInteger=xC,Z.isLength=sp,Z.isMap=SC,Z.isMatch=FK,Z.isMatchWith=BK,Z.isNaN=zK,Z.isNative=VK,Z.isNil=$K,Z.isNull=GK,Z.isNumber=EC,Z.isObject=Gn,Z.isObjectLike=Hn,Z.isPlainObject=Gf,Z.isRegExp=qm,Z.isSafeInteger=UK,Z.isSet=AC,Z.isString=op,Z.isSymbol=Rs,Z.isTypedArray=fl,Z.isUndefined=jK,Z.isWeakMap=HK,Z.isWeakSet=WK,Z.join=KX,Z.kebabCase=qJ,Z.last=Qs,Z.lastIndexOf=JX,Z.lowerCase=DJ,Z.lowerFirst=FJ,Z.lt=XK,Z.lte=YK,Z.max=kZ,Z.maxBy=MZ,Z.mean=LZ,Z.meanBy=NZ,Z.min=qZ,Z.minBy=DZ,Z.stubArray=Um,Z.stubFalse=jm,Z.stubObject=xZ,Z.stubString=SZ,Z.stubTrue=EZ,Z.multiply=FZ,Z.nth=ZX,Z.noConflict=pZ,Z.noop=$m,Z.now=rp,Z.pad=BJ,Z.padEnd=zJ,Z.padStart=VJ,Z.parseInt=GJ,Z.random=RJ,Z.reduce=tK,Z.reduceRight=rK,Z.repeat=$J,Z.replace=UJ,Z.result=wJ,Z.round=BZ,Z.runInContext=ne,Z.sample=iK,Z.size=aK,Z.snakeCase=jJ,Z.some=uK,Z.sortedIndex=sY,Z.sortedIndexBy=oY,Z.sortedIndexOf=aY,Z.sortedLastIndex=uY,Z.sortedLastIndexBy=cY,Z.sortedLastIndexOf=lY,Z.startCase=WJ,Z.startsWith=XJ,Z.subtract=zZ,Z.sum=VZ,Z.sumBy=GZ,Z.template=YJ,Z.times=AZ,Z.toFinite=$a,Z.toInteger=_r,Z.toLength=PC,Z.toLower=KJ,Z.toNumber=eo,Z.toSafeInteger=KK,Z.toString=sn,Z.toUpper=JJ,Z.trim=ZJ,Z.trimEnd=QJ,Z.trimStart=eZ,Z.truncate=tZ,Z.unescape=rZ,Z.uniqueId=PZ,Z.upperCase=nZ,Z.upperFirst=Bm,Z.each=dC,Z.eachRight=pC,Z.first=cC,Gm(Z,function(){var l={};return aa(Z,function(p,b){lr.call(Z.prototype,b)||(l[b]=p)}),l}(),{chain:!1}),Z.VERSION=n,ce(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){Z[l].placeholder=Z}),ce(["drop","take"],function(l,p){Fr.prototype[l]=function(b){b=b===r?1:gi(_r(b),0);var M=this.__filtered__&&!p?new Fr(this):this.clone();return M.__filtered__?M.__takeCount__=Li(b,M.__takeCount__):M.__views__.push({size:Li(b,se),type:l+(M.__dir__<0?"Right":"")}),M},Fr.prototype[l+"Right"]=function(b){return this.reverse()[l](b).reverse()}}),ce(["filter","map","takeWhile"],function(l,p){var b=p+1,M=b==Y||b==W;Fr.prototype[l]=function(j){var ee=this.clone();return ee.__iteratees__.push({iteratee:Qt(j,3),type:b}),ee.__filtered__=ee.__filtered__||M,ee}}),ce(["head","last"],function(l,p){var b="take"+(p?"Right":"");Fr.prototype[l]=function(){return this[b](1).value()[0]}}),ce(["initial","tail"],function(l,p){var b="drop"+(p?"":"Right");Fr.prototype[l]=function(){return this.__filtered__?new Fr(this):this[b](1)}}),Fr.prototype.compact=function(){return this.filter(ps)},Fr.prototype.find=function(l){return this.filter(l).head()},Fr.prototype.findLast=function(l){return this.reverse().find(l)},Fr.prototype.invokeMap=Ar(function(l,p){return typeof l=="function"?new Fr(this):this.map(function(b){return qf(b,l,p)})}),Fr.prototype.reject=function(l){return this.filter(ip(Qt(l)))},Fr.prototype.slice=function(l,p){l=_r(l);var b=this;return b.__filtered__&&(l>0||p<0)?new Fr(b):(l<0?b=b.takeRight(-l):l&&(b=b.drop(l)),p!==r&&(p=_r(p),b=p<0?b.dropRight(-p):b.take(p-l)),b)},Fr.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Fr.prototype.toArray=function(){return this.take(se)},aa(Fr.prototype,function(l,p){var b=/^(?:filter|find|map|reject)|While$/.test(p),M=/^(?:head|last)$/.test(p),j=Z[M?"take"+(p=="last"?"Right":""):p],ee=M||/^find/.test(p);j&&(Z.prototype[p]=function(){var de=this.__wrapped__,be=M?[1]:arguments,Pe=de instanceof Fr,rt=be[0],nt=Pe||pr(de),ut=function(Lr){var jr=j.apply(Z,dr([Lr],be));return M&&xt?jr[0]:jr};nt&&b&&typeof rt=="function"&&rt.length!=1&&(Pe=nt=!1);var xt=this.__chain__,Vt=!!this.__actions__.length,tr=ee&&!xt,wr=Pe&&!Vt;if(!ee&&nt){de=wr?de:new Fr(this);var rr=l.apply(de,be);return rr.__actions__.push({func:ep,args:[ut],thisArg:r}),new Ks(rr,xt)}return tr&&wr?l.apply(this,be):(rr=this.thru(ut),tr?M?rr.value()[0]:rr.value():rr)})}),ce(["pop","push","shift","sort","splice","unshift"],function(l){var p=pi[l],b=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",M=/^(?:pop|shift)$/.test(l);Z.prototype[l]=function(){var j=arguments;if(M&&!this.__chain__){var ee=this.value();return p.apply(pr(ee)?ee:[],j)}return this[b](function(de){return p.apply(pr(de)?de:[],j)})}}),aa(Fr.prototype,function(l,p){var b=Z[p];if(b){var M=b.name+"";lr.call(ol,M)||(ol[M]=[]),ol[M].push({name:p,func:b})}}),ol[Wd(r,S).name]=[{name:"wrapper",func:r}],Fr.prototype.clone=rW,Fr.prototype.reverse=nW,Fr.prototype.value=iW,Z.prototype.at=MY,Z.prototype.chain=LY,Z.prototype.commit=NY,Z.prototype.next=qY,Z.prototype.plant=FY,Z.prototype.reverse=BY,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=zY,Z.prototype.first=Z.prototype.head,Of&&(Z.prototype[Of]=DY),Z},qe=Re();Ao?((Ao.exports=qe)._=qe,tl._=qe):zn._=qe}).call(Fge)}(dh,dh.exports)),dh.exports}var zge=Bge();const Nn=tf(zge);var Vge=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Gge=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},zp;function ro(e,t,r){return t.map((n,i)=>e(n,r[i]))}function Rp(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function fa(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function $ge(e){return e>>5}function va(e){return e&31}function Ol(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&va(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function LT(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Uge=LT(1,8),jge=LT(3,3),Hge=LT(4,8);function b9(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function w9(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function e2(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=Hge[f];va(a)==0&&u++;const v=(1<<4*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=4*f.length}a<r&&Ol(a,u,o,n,i)}function x9(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Uge[f];va(a)==0&&u++;const v=(1<<1*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=1*f.length}a<r&&Ol(a,u,o,n,i)}class NT extends Error{constructor(t){super(t),Object.setPrototypeOf(this,NT.prototype)}}function Ei(e,t){if(!e)throw new NT("Assertion failed: "+t)}class et{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:Ei(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new et(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return et.make(t,-1)}static ones(t){return et.make(t,1)}static xes(t){return et.make(t,0)}static fromBool(t,r=1){return et.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),va(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new et(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?et.fromIteratorPow2(t,r,n):et.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)va(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&Ol(s,o,i,a,u),new et(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)va(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&Ol(s,o,i,a,u),new et(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);va(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&Ol(s,o,i,a,u),new et(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return x9(t,0,r,i,s),new et(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=jge[t[f]];va(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&Ol(s,o,i,a,u),new et(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return e2(t,0,r,i,s),new et(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);Ei(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return et.fromBin(s,i);case"o":return et.fromOct(s,i);case"h":return et.fromHex(s,i);case"d":return et.fromNumber(BigInt(s),i)}}static fromClonable(t){return new et(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return et.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return et.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=va(t),n=$ge(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=ro((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=ro((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return Ei(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new et(this._bits,ro((r,n)=>r&n,t._avec,this._avec),ro((r,n)=>r&n,t._bvec,this._bvec))}or(t){return Ei(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new et(this._bits,ro((r,n)=>r|n,t._avec,this._avec),ro((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return Ei(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new et(this._bits,Rp((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),Rp((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return Ei(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new et(this._bits,ro((r,n)=>~(r&n),t._bvec,this._bvec),ro((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return Ei(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new et(this._bits,ro((r,n)=>~(r|n),t._bvec,this._bvec),ro((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return Ei(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new et(this._bits,Rp((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),Rp((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new et(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=ro((r,n)=>r^n,this._avec,this._bvec);return new et(this._bits,t,t)}reduceAnd(){return new et(1,Uint32Array.of(fa((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(fa((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new et(1,Uint32Array.of(fa((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(fa((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new et(1,Uint32Array.of(~fa((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~fa((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new et(1,Uint32Array.of(~fa((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~fa((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=ro((i,s)=>~i&s,this._avec,this._bvec),r=fa((i,s)=>i|s,t,this._lastmask,0),n=fa((i,s)=>i^s,this._avec,this._lastmask,0);return new et(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return et.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),va(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new et(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new et(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return w9(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),b9(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(Ei(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),Ei(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return Ei(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),Ei(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),Ei(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(Ei(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return Ei(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),Ei(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}et.empty=et.zeros(0);et.one=et.ones(1);et.zero=et.zeros(1);et.x=et.xes(1);class Ll{constructor(t,r,n){n===void 0&&(n=0),this._bits=t|0,this._size=r|0,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(r*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(r*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(t.length==0)return new Ll(0,0);const r=new Ll(t[0].bits,t.length);for(const n in t){t[n].normalize(),Ei(t[n].bits==r._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let i=0;i<r._wpc;i++){const s=Number(n)*r._wpc+i;r._avec[s]=t[n]._avec[i],r._bvec[s]=t[n]._bvec[i]}}return r}get bits(){return this._bits}get words(){return this._size}get(t){const r=this._wpc*t;return new et(this._bits,this._avec.slice(r,r+this._wpc),this._bvec.slice(r,r+this._wpc))}set(t,r){Ei(r.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),r.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=r._avec[n],this._bvec[t*this._wpc+n]=r._bvec[n]}toJSON(){const t=[];let r=[],n,i=0;const s=()=>{if(r.length!=0){if(r.reduce((u,c)=>u+c.length,0)==this._bits){const u=r.pop();r.length>0&&t.push(r.join("")),t.push(u)}else t.push(r.join(""));r=[]}},o=()=>{i!=0&&(i==1?n.length==this._bits?(s(),t.push(n)):r.push(n):(s(),t.push(i),t.push(n)),n=void 0,i=0)},a=u=>{n==u?i++:(o(),n=u,i=1)};for(let u=0;u<this._size;u++){const c=()=>{for(let f=0;f<this._wpc;f++){const h=this._avec[u*this._wpc+f]^this._bvec[u*this._wpc+f];for(let v=0;v<4;v++){const y=255<<v*16,m=h&y;if(m!=y||m!=0)return!1}}return!0};this._bits>0&&c()?a(b9(u*this._wpc,this._bits,this._avec,this._bvec)):a(w9(u*this._wpc,this._bits,this._avec,this._bvec))}return o(),s(),t}static fromJSON(t,r){const n=Math.ceil(t/4);let i=0;const s=c=>c.length==t||c.length==n?1:c.length/n;for(let c=0;c<r.length;c++)typeof r[c]=="string"?i+=s(r[c]):typeof r[c]=="number"&&(i+=r[c]*s(r[c+1]),c++);const o=new Ll(t,i,-1);let a=0;const u=c=>{if(c.length==t)x9(c,a,t,o._avec,o._bvec),a+=o._wpc;else if(c.length==n)e2(c,a,t,o._avec,o._bvec),a+=o._wpc;else for(let f=0;f<c.length/n;f++)e2(c.slice(f*n,(f+1)*n),a,t,o._avec,o._bvec),a+=o._wpc};for(let c=0;c<r.length;c++)if(typeof r[c]=="string")u(r[c]);else if(typeof r[c]=="number"){for(const f of Array(r[c]).keys())u(r[c+1]);c++}return o}toArray(){return Array(this._size).fill(0).map((t,r)=>this.get(r))}toHex(){return this.toArray().map(t=>t.toHex())}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let r=0;r<this._size;r++)if(!t.get(r).eq(this.get(r)))return!1;return!0}}class gf{constructor(t){zp.set(this,void 0),this.pattern=t,Vge(this,zp,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,r){return Gge(this,zp,"f").test(t)}}zp=new WeakMap;class Wge extends gf{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,r){return!0}read(t,r){return et.fromHex(t,r)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}class Xge extends gf{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,r){return!0}read(t,r){return et.fromBin(t,r)}show(t){return t.toBin()}size(t){return t}}class Yge extends gf{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,r){return!0}read(t,r){return et.fromOct(t,r)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}class Kge extends gf{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,r){return!0}read(t,r){return t=="x"?et.xes(r):et.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class Jge extends gf{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,r){return r>0}read(t,r){return t=="x"?et.xes(r):et.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}class S9{constructor(){this.displays={},this.addDisplay(new Wge),this.addDisplay(new Xge),this.addDisplay(new Yge),this.addDisplay(new Kge),this.addDisplay(new Jge)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,r){const n=[];for(let i of Object.values(this.displays))i.can(t,r)&&n.push(i);return n.sort((i,s)=>i.sort-s.sort?i.sort-s.sort:i.name.localeCompare(s.name)).map(i=>i.name)}show(t,r){return this.displays[t].show(r)}read(t,r,n){return this.displays[t].read(r,n)}pattern(t){return this.displays[t].pattern}validate(t,r,n){return this.displays[t].validate(r,n)}size(t,r){return this.displays[t].size(r)}}const E9={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},Zge=Dge.extend(Nn.merge({},E9)),Qge=qge.extend(Nn.merge({},E9)),A9=QE.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,QE.prototype.update.apply(this,arguments)}}),X4=A9.extend({name:"remove",children:H4.prototype.children,options:H4.prototype.options}),Y4=A9.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(e){this.notify("link:monitor")}}}),lv={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},On=ys.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:Nn.merge({},lv,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:Nn.merge({},lv,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation(){return{}},initialize(){const e=this.get("ports");e.items&&this._preprocessPorts(e.items),ys.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(t=>"change:"+t).join(" "),(t,r,n)=>{if(n.init)return;const i=Nn.intersection(Object.keys(this.changed),this._unsupportedPropChanges);i.forEach(s=>{this.set(s,this.previous(s),{init:!0})}),console.warn('Beta property change support: "'+i+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(e,t){this.attr(e,this.get(t)),this.on("change:"+t,(r,n)=>this.attr(e,n))},_changeOutputSignals(e){Nn.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(t=>t.get("source").port).forEach((t,r)=>t.forEach(n=>n.set("signal",e[r]))).value()},_setInput(e,t){const r=Nn.clone(this.get("inputSignals"));r[t]=e,this.set("inputSignals",r)},_clearInput(e){const t=this.getPort(e).bits;this._setInput(et.xes(t),e)},_preprocessPorts(e){this._resetPortsSignals(e);for(const t of e){if(t.attrs={},t.attrs.bits={text:this._getBitsText(t.bits)},t.labelled){const r={text:"portlabel"in t?t.portlabel:t.id};t.polarity===!1&&(r["text-decoration"]="overline"),t.decor&&(console.assert(t.group=="in"),r.refX=10),t.attrs.iolabel=r}t.decor&&(t.attrs.decor={d:t.decor})}},_setPortsBits(e){const t=Nn.cloneDeep(this.get("ports")),r=[];for(const n in e){const i=e[n],s=t.items.find(function(o){return o.id&&o.id===n});s.bits=i,s.attrs.bits.text=this._getBitsText(i),r.push(s)}this._resetPortsSignals(r),this.set("ports",t),this.graph.getConnectedLinks(this,{outbound:!0}).filter(n=>n.get("source").port in e).forEach(n=>n._changeSource(n.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(n=>n.get("target").port in e).forEach(n=>n._changeTarget(n.get("target")))},_getBitsText(e){return e>1?e:""},_resetPortValue(e){return et.xes(e.bits)},_resetPortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)console.assert(r.bits>=0),t[r.dir][r.id]=this._resetPortValue(r);this.set("inputSignals",t.in),this.set("outputSignals",t.out)},_removePortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)delete t[r.dir][r.id];this.set("inputSignals",t.in),this.set("outputSignals",t.out)},addPort(e){this.addPorts([e])},addPorts(e){this._preprocessPorts(e),ys.prototype.addPorts.apply(this,arguments)},removePort(e,t){this.removePorts([e])},removePorts(e,t){this._removePortsSignals(e),ys.prototype.removePorts.apply(this,arguments)},_getStackedPosition(e){return function(t,r){const n=e.side||"left",i=e.step||16,s=e.offset||12,o=n=="left"?r.topLeft().x:n=="right"?r.topRight().x:void 0,a=n=="top"?r.topLeft().y:n=="bottom"?r.bottomRight().y:void 0;return o!==void 0?Nn.map(t,function(u,c){return c+=u.idxOffset||0,me({x:o,y:c*i+s})}):Nn.map(t,function(u,c){return c+=u.idxOffset||0,me({x:c*i+s,y:a})})}},getLayoutSize(){return this.size()},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(e){return Nn.cloneDeep(Nn.pick(this.attributes,this._gateParams.concat(e?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),er=Ai.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:Ai.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(e){e.stopPropagation()},confirmUpdate(e){this.hasFlag(e,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(e,"SIGNAL2")&&this._updatePortSignals("out"),Ai.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(e){const t=e==="in"?this.model.get("inputSignals"):e==="out"?this.model.get("outputSignals"):Nn.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const r in t){const n=t[r],i=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(r,i)}},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},_applyPortAttrs(e,t){if(e in this._portElementsCache)for(const r in t){const n=this._portElementsCache[e].portSelectors[r];this.setNodeAttributes(n,t[r])}},_updatePorts(){Ai.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),T9=Bp.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:et.xes(1),bits:1,warning:!1,z:0},{initialize(){Bp.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const e=this.get("target"),t=this.graph.getCell(e.id);t&&"port"in e&&t._clearInput(e.port),Bp.prototype.remove.apply(this,arguments)},_propagateSignal(e,t){const r=this.getTargetElement();r&&(this.get("warning")?r._clearInput(e.port):r._setInput(t,e.port))},_changeSignal(e){this._propagateSignal(this.get("target"),e)},_changeSource(e){const t=this.getSourceElement();t&&"port"in e?(this.set("bits",t.getPort(e.port).bits),this._checkConnection(),this.set("signal",t.get("outputSignals")[e.port])):this.set("signal",et.xes(this.get("bits")))},_changeTarget(e){if(this._checkConnection(),"port"in e&&this._propagateSignal(e,this.get("signal")),!this.hasChanged("target"))return;const t=this.previous("target"),r=this.graph.getCell(t.id);r&&"port"in t&&r._clearInput(t.port)},_checkConnection(){const e=this.get("target"),t=this.graph.getCell(e.id);this.set("warning",t&&t.getPort(e.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(e){const t={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(t.name=this.get("netname")),e&&this.has("vertices")&&this.get("vertices").length>0&&(t.vertices=Nn.cloneDeep(this.get("vertices"))),t},getWirePath(){const e=[];for(let t=this.graph.get("subcircuit");t!=null;t=t.graph.get("subcircuit")){if(!t.has("label"))return null;e.push(t.get("label"))}return e.reverse()}}),eme=Zi.extend({initFlag:Zi.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:typeof window<"u"?new Cge({tools:[new Lge({focusOpacity:.5}),new Zge,new Qge,new X4({distanceShort:"75%",distanceLong:"50"}),new X4({distance:"-50",secondary:!0}),new Y4({distanceShort:"25%",distanceLong:"30"}),new Y4({distance:"-30",secondary:!0})]}):null,presentationAttributes:Zi.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){Zi.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(e){Zi.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateSignal(),this.hasFlag(e,"BITS")&&this._updateBits(),this.hasFlag(e,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const e=this.model.get("signal"),t=this.attrs.signal[e.isDefined?e.isHigh?"high":e.isLow?"low":"def":"undef"];this._applyAttrs(t)},_updateBits(){const e=this.model.get("bits"),t=this.attrs.bits[e>1?"bus":"single"];this._applyAttrs(t)},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},update(){Zi.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){Zi.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(e){Zi.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:e.clientX+5,y:e.clientY+5})},mouseleave(e){Zi.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(e){this.model.get("bits")!=1&&(this.wire_hover||(this.wire_hover=Nt('<div class="wire_hover">').css("left",e.x).css("top",e.y).appendTo(Nt(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const e=this.model.get("signal"),t=this.model.graph._display3vl,r=["Hex: "+t.show("hex",e)+"<br>","Dec: "+t.show("dec",e)+"<br>","Oct: "+t.show("oct",e)+"<br>","Bin: "+t.show("bin",e)].join("");this.wire_hover.html(r)},onEndModelChange(e,t,r){typeof t=="object"&&t!=null&&t==this.prevModels[e]&&Object.keys(t.changed).length>0&&!("position"in t.changed)||(Zi.prototype.onEndModelChange.apply(this,arguments),this.prevModels[e]=t)}}),$t=On.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){On.prototype.initialize.apply(this,arguments),this.on("change:size",(e,t)=>{t.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:On.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"ð",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(e=>e.join(" ")).join(" L")}),ui=er.extend({_autoResizeBox:!1,render(){er.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const e=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),t=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),r=Math.max(...e.map(o=>o.getBBox().width)),n=Math.max(...t.map(o=>o.getBBox().width)),i=o=>o==-1/0?-5:o;return i(r)+i(n)+25}}),vs=$t.define("NumBase",{numbase:"hex",bits:1},{initialize(){$t.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,t)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:$t.prototype._gateParams.concat(["numbase"])}),Nu=ui.extend({presentationAttributes:ui.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(e){this.model.set("numbase",e.target.value||"bin")},_calculateBoxWidth(){const e=document.createElementNS("http://www.w3.org/2000/svg","text");Nt(e).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const t=e.getBBox().width+20;return e.remove(),t},confirmUpdate(e){ui.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"BITS")||this.hasFlag(e,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(e,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const e=this.model.get("numbase"),t=this.model.graph._display3vl;for(const r of t.usableDisplays(this.model.numbaseType,this.model.get("bits")))Nt("<option>").attr("value",r).prop("selected",r==e).text(r).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),No=vs.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:e}],vs.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{const n={};n[this._portDirection]=r,this._setPortsBits(n),this.get("mode")!=0&&this._checkMode()}),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const e=this.graph&&this.graph.has("subcircuit"),t=this.get("bits"),r=e?0:t==1?1:2;return this.set("mode",r),this.set("box_resized",!1),this.set("markup",r==0?this.markupInSubcircuit:r==1?this.markupSingle:this.markupBus),r},_setPortsBits(e){if(vs.prototype._setPortsBits.apply(this,arguments),this.get("mode")!=0)return;const t=this.graph.get("subcircuit");console.assert(t!=null);const r={};r[this.get("net")]=e[this._portDirection],t._setPortsBits(r)},markupSingle:vs.prototype.markup,markupBus:vs.prototype.markup.concat(vs.prototype.markupTooltip),markupInSubcircuit:vs.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:vs.prototype._gateParams.concat(["bits","net","order"])}),ya=Nu.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const e=this.selectors.ioname;return e.getAttribute("display")!=="none"?e.getBBox().width+10:20;case 1:return 30;case 2:return Nu.prototype._calculateBoxWidth.call(this)}}}),dd=No.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(e){if(e.id=="out"&&e.dir=="out"){const t=this.get("bits");return this.get("mode")==1?et.zeros(t):et.xes(t)}else return No.prototype._resetPortValue.call(this,e)},_checkMode(){No.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(e){this._setInput(e),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(e){if(e.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:e})},markupSingle:No.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:No.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),qT=ya.extend({attrs:Nn.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},ya.prototype.attrs),confirmUpdate(e){ya.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL2")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry();break}},_updateButton(){const e=this.model.get("outputSignals").out,t=this.attrs.button[e.isHigh?"high":"low"];this._applyAttrs(t)},_updateNumEntry(){const e=this.model.graph._display3vl;this.$("input").val(e.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){ya.prototype.render.apply(this,arguments),this._updateView()},events:Nn.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},Nu.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(e){const t=this.model.get("numbase"),r=this.model.get("bits"),n=this.model.graph._display3vl;if(n.validate(t,e.target.value,r)){const i=n.read(t,e.target.value,r);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),P9=dd,tme=qT,C9=dd,rme=qT,pd=No.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:No.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:No.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),DT=ya.extend({attrs:Nn.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},ya.prototype.attrs),confirmUpdate(e){ya.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay();break}},_updateLamp(){const e=this.model.get("inputSignals").in,t=this.attrs.lamp[e.isHigh?"high":e.isLow?"low":"undef"];this._applyAttrs(t)},_updateNumDisplay(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){ya.prototype.render.apply(this,arguments),this._updateView()}}),O9=pd,nme=DT,I9=pd,ime=DT,R9=vs.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],vs.prototype.initialize.apply(this,arguments),this.on("change:constant",(r,n)=>{const i=n.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",et.fromBin(n,i))})},prepare(){const e=this.get("constant"),t=e.length;this.set("constantCache",et.fromBin(e,t))},operation(){return{out:this.get("constantCache")}},markup:vs.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:vs.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),sme=Nu.extend({presentationAttributes:Nu.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(e){Nu.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"CONSTANT")||this.hasFlag(e,"NUMBASE"))&&this._showText()},_showText(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){Nu.prototype.update.apply(this,arguments),this._showText()}}),k9=$t.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue(e){return e.id=="out"&&e.dir=="out"?et.zero:$t.prototype._resetPortValue(e)},operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:$t.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:$t.prototype._unsupportedPropChanges.concat(["bits"])}),ome=ui.extend({presentationAttributes:ui.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(e){ui.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(e){ui.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this.updatePropagation()},_changePropagation(e){const t=e.target.value,r=String(t)==String(Number(t));r&&this.model.set("propagation",Number(t)||1),this.$("input").toggleClass("invalid",!r)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),K4=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL"];class ame extends gf{constructor(){super("[ -~Â -Ã¿ï¿½â-â¡]|"+K4.join("|"))}get name(){return"ascii"}get sort(){return 1}can(t,r){return r==7||r==8}read(t,r){if(t.length==1){const n=t.charCodeAt(0);return n==65533?et.xes(r):n==9249?et.fromHex("7f",r):n>=9216&&n<=9248?et.fromHex((n-9216).toString(16),r):et.fromHex(n.toString(16),r)}else{const n=K4.indexOf(t);return n<0?et.xes(r):n==33?et.fromHex("7f",r):et.fromHex(n.toString(16),r)}}show(t){if(!t.isFullyDefined)return"ï¿½";const r=parseInt(t.toHex(),16);return r<=32?String.fromCharCode(9216+r):r==127?"â¡":r>127&&r<160?"ï¿½":String.fromCharCode(r)}size(t){return 1}}function FT(e,t,r){return'<select name="base">'+e.usableDisplays("read",t).map(i=>'<option value="'+i+'"'+(i==r?' selected="selected"':"")+">"+i+"</option>").join("")+"</select>"}function t2(e,t){for(const r in t)if(!e[r].eq(t[r]))return!1;return!0}const Mg="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",ec="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",M9="M18-2v36l2-1 32-17h0L20-1z",ume="M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z",Lg={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:ume}},Kc={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function du(e=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(e)}}const ma=On.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:On.prototype.markup.concat([du()]),_gateParams:On.prototype._gateParams.concat(["bits"])}),BT=ma.define("Gate11",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:e}],ma.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r,out:r})})}}),Jc=ma.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const e=this.get("bits"),t=this.get("inputs"),r=[];for(let i=1;i<=t;i++)r.push({id:"in"+i,group:"in",dir:"in",bits:e});r.push({id:"out",group:"out",dir:"out",bits:e}),this.get("ports").items=r;const n=t/2;this.set("size",{width:60*n,height:32*n}),this.attr("body/transform","translate(-4, 0) scale("+n+")"),this.prop("ports/groups/in/position/args/dx",30*n),this.prop("ports/groups/in/attrs/wire/x2",-30*n-20),this.prop("ports/groups/in/attrs/port/refX",-30*n-20),this.prop("ports/groups/out/position/args/dx",-30*n),this.prop("ports/groups/out/attrs/wire/x2",30*n+20),this.prop("ports/groups/out/attrs/port/refX",30*n+20),ma.prototype.initialize.apply(this,arguments),this.on("change:bits",(i,s)=>{const o=this.get("inputs"),a={out:s};for(let u=1;u<=o;u++)a["in"+u]=s;this._setPortsBits(a)})},operation(e){let t=e.in1;for(let r=2;r<=this.get("inputs");r++)t=this.binoperation(t,e["in"+r]);return{out:this.finoperation(t)}},finoperation(e){return e},_gateParams:ma.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:ma.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:ma.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Gu=ma.define("GateReduce",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:1}],ma.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r})})}}),L9=BT.define("Repeater",{attrs:{gate:{d:M9}}},{operation(e){return{out:e.in}}}),cme=er,N9=BT.define("Not",{attrs:{gate:{d:M9}}},{operation(e){return{out:e.in.not()}},markup:On.prototype.markup.concat([du([Kc])])}),lme=er,q9=Jc.define("Or",{attrs:{gate:{d:ec}}},{binoperation(e,t){return e.or(t)}}),fme=er,D9=Jc.define("And",{attrs:{gate:{d:Mg}}},{binoperation(e,t){return e.and(t)}}),hme=er,F9=Jc.define("Nor",{attrs:{gate:{d:ec}}},{binoperation(e,t){return e.or(t)},finoperation(e){return e.not()},markup:On.prototype.markup.concat([du([Kc])])}),dme=er,B9=Jc.define("Nand",{attrs:{gate:{d:Mg}}},{binoperation(e,t){return e.and(t)},finoperation(e){return e.not()},markup:On.prototype.markup.concat([du([Kc])])}),pme=er,z9=Jc.define("Xor",{attrs:{gate:{d:ec}}},{binoperation(e,t){return e.xor(t)},markup:On.prototype.markup.concat([du([Lg])])}),vme=er,V9=Jc.define("Xnor",{attrs:{gate:{d:ec}}},{binoperation(e,t){return e.xor(t)},finoperation(e){return e.not()},markup:On.prototype.markup.concat([du([Lg,Kc])])}),gme=er,r2=Gu.define("OrReduce",{attrs:{gate:{d:ec}}},{operation(e){return{out:e.in.reduceOr()}}}),mme=er,n2=Gu.define("NorReduce",{attrs:{gate:{d:ec}}},{operation(e){return{out:e.in.reduceNor()}},markup:Gu.prototype.markup.concat([Kc])}),yme=er,G9=Gu.define("AndReduce",{attrs:{gate:{d:Mg}}},{operation(e){return{out:e.in.reduceAnd()}}}),_me=er,$9=Gu.define("NandReduce",{attrs:{gate:{d:Mg}}},{operation(e){return{out:e.in.reduceNand()}},markup:On.prototype.markup.concat([du([Kc])])}),bme=er,U9=Gu.define("XorReduce",{attrs:{gate:{d:ec}}},{operation(e){return{out:e.in.reduceXor()}},markup:On.prototype.markup.concat([du([Lg])])}),wme=er,j9=Gu.define("XnorReduce",{attrs:{gate:{d:ec}}},{operation(e){return{out:e.in.reduceXnor()}},markup:On.prototype.markup.concat([du([Lg,Kc])])}),xme=er;function i2(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER}const Ti=On.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:On.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:On.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:On.prototype._unsupportedPropChanges.concat(["signed"])}),zT=Ti.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],Ti.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits");return e.in.isFullyDefined?{out:et.fromNumber(this.arithop(e.in.toBigInt(this.get("signed"))),t.out)}:{out:et.xes(t.out)}},_operationHelpers:Ti.prototype._operationHelpers.concat(["arithop"])}),Zc=Ti.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],Ti.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:et.xes(t.out)}:{out:et.fromNumber(this.arithop(e.in1.toBigInt(r.in1&&r.in2),e.in2.toBigInt(r.in1&&r.in2)),t.out)}},_operationHelpers:Ti.prototype._operationHelpers.concat(["arithop"])});function s2(e,t,r,n,i,s,o){const a=e.get(e.bits-1),u=et.make(Math.max(0,n-r),o?0:i?a:-1),c=e.concat(u);return(t<0?et.make(-t,o?0:-1).concat(c):c.slice(t).concat(et.make(t,o?0:s?c.get(c.bits-1):-1))).slice(0,n)}const VT=Ti.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],Ti.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx");if(!e.in2.isFullyDefined)return{out:et.xes(t.out)};const i=e.in2.toNumber(r.in2)*this.shiftdir;return{out:s2(e.in1,i,t.in1,t.out,r.in1,r.out,n)}},_gateParams:Ti.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:Ti.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:Ti.prototype._operationHelpers.concat(["shiftdir"])}),Dh=Ti.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:1}],Ti.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})}}),vd=Dh.define("Compare",{},{operation(e){this.get("bits");const t=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:et.xes(1)}:{out:et.fromBool(this.arithcomp(e.in1.toBigInt(t.in1&&t.in2),e.in2.toBigInt(t.in1&&t.in2)))}},_operationHelpers:Dh.prototype._operationHelpers.concat(["arithcomp"])}),GT=Dh.define("EqCompare",{},{operation(e){const t=this.get("bits"),r=this.get("signed"),n=t.in1>=t.in2?e.in1:e.in1.concat(et.make(t.in2-t.in1,r.in1&&r.in2?e.in1.msb:-1)),i=t.in2>=t.in1?e.in2:e.in2.concat(et.make(t.in1-t.in2,r.in1&&r.in2?e.in2.msb:-1));return{out:this.bincomp(n,i)}},_operationHelpers:Dh.prototype._operationHelpers.concat(["bincomp"])}),H9=zT.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:e=>-e}),Sme=er,W9=zT.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:e=>e}),Eme=er,X9=Zc.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(e,t)=>e+t}),Ame=er,Y9=Zc.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(e,t)=>e-t}),Tme=er,K9=Zc.define("Multiplication",{attrs:{oper:{text:"Ã"}}},{arithop:(e,t)=>e*t}),Pme=er,J9=Zc.define("Division",{attrs:{oper:{text:"Ã·"}}},{arithop:(e,t)=>t==0n?e:e/t}),Cme=er,Z9=Zc.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(e,t)=>t==0n?e:e%t}),Ome=er,Q9=Zc.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Ime=er,eH=VT.define("ShiftLeft",{attrs:{oper:{text:"âª"}}},{shiftdir:-1}),Rme=er,tH=VT.define("ShiftRight",{attrs:{oper:{text:"â«"}}},{shiftdir:1}),kme=er,rH=vd.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(e,t)=>e<t}),Mme=er,nH=vd.define("Le",{attrs:{oper:{text:"â¤"}}},{arithcomp:(e,t)=>e<=t}),Lme=er,iH=vd.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(e,t)=>e>t}),Nme=er,sH=vd.define("Ge",{attrs:{oper:{text:"â¥"}}},{arithcomp:(e,t)=>e>=t}),qme=er,oH=GT.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(e,t)=>e.xnor(t).reduceAnd()}),Dme=er,aH=GT.define("Ne",{attrs:{oper:{text:"â "}}},{bincomp:(e,t)=>e.xor(t).reduceOr()}),Fme=er,_a=Ti.define("OpConst",{leftOp:!1,constant:0},{initialize(){Ti.prototype.initialize.apply(this,arguments);let e=this.get("constant");(typeof e=="string"||e instanceof String)&&(e=BigInt(e),i2(e)&&(e=Number(e)),this.set("constant",e));const t=()=>{const n=30+String(this.get("constant")).length*10;this.prop("size",{width:n,height:n}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};t(),this.on("change:bits",(r,n)=>{this._setPortsBits(n)}),this.on("change:constant",()=>t()),this.on("change:leftOp",()=>t())},getGateParams(){const e=Ti.prototype.getGateParams.apply(this,arguments);return typeof e.constant=="bigint"&&(i2(e.constant)?e.constant=Number(e.constant):e.constant=String(e.constant)),e},_gateParams:Ti.prototype._gateParams.concat(["leftOp","constant"])}),Qc=_a.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],_a.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:et.fromNumber(this.arithop(BigInt(n),e.in.toBigInt(r.in)),t.out)}:{out:et.fromNumber(this.arithop(e.in.toBigInt(r.in),BigInt(n)),t.out)}:{out:et.xes(t.out)}},_operationHelpers:_a.prototype._operationHelpers.concat(["arithop"])}),$T=_a.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],_a.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!e.in.isFullyDefined)return{out:et.xes(t.out)};const s=e.in.toNumber(r.in),o=et.fromNumber(i);return{out:s2(o,s*this.shiftdir,o.bits,t.out,i<0,r.out,n)}}else return console.assert(i2(i)),{out:s2(e.in,Number(i)*this.shiftdir,t.in,t.out,r.in,r.out,n)}},_gateParams:_a.prototype._gateParams.concat(["fillx"]),_operationHelpers:_a.prototype._operationHelpers.concat(["shiftdir"])}),Fh=_a.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:1}],_a.prototype.initialize.apply(this,arguments)}}),gd=Fh.define("CompareConst",{},{operation(e){this.get("bits");const t=this.get("signed"),r=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:et.fromBool(this.arithcomp(BigInt(r),e.in.toBigInt(t.in)))}:{out:et.fromBool(this.arithcomp(e.in.toBigInt(t.in),BigInt(r)))}:{out:et.x}},_operationHelpers:Fh.prototype._operationHelpers.concat(["arithcomp"])}),UT=Fh.define("EqCompareConst",{},{operation(e){const t=this.get("bits");this.get("signed");const r=this.get("constant");return this.get("leftOp")?{out:this.bincomp(et.fromNumber(r,t.in),e.in)}:{out:this.bincomp(e.in,et.fromNumber(r,t.in))}},_operationHelpers:Fh.prototype._operationHelpers.concat(["bincomp"])}),Bme=Qc.define("AdditionConst",{},{operSymbol:"+",arithop:(e,t)=>e+t}),zme=er,Vme=Qc.define("SubtractionConst",{},{operSymbol:"-",arithop:(e,t)=>e-t}),Gme=er,$me=Qc.define("MultiplicationConst",{},{operSymbol:"Ã",arithop:(e,t)=>e*t}),Ume=er,jme=Qc.define("DivisionConst",{},{operSymbol:"Ã·",arithop:(e,t)=>t==0n?e:e/t}),Hme=er,Wme=Qc.define("ModuloConst",{},{operSymbol:"%",arithop:(e,t)=>t==0n?e:e%t}),Xme=er,Yme=Qc.define("PowerConst",{},{operSymbol:"^",arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Kme=er,Jme=$T.define("ShiftLeftConst",{},{operSymbol:"âª",shiftdir:-1}),Zme=er,Qme=$T.define("ShiftRightConst",{},{operSymbol:"â«",shiftdir:1}),e0e=er,t0e=gd.define("LtConst",{},{operSymbol:"<",arithcomp:(e,t)=>e<t}),r0e=er,n0e=gd.define("LeConst",{},{operSymbol:"â¤",arithcomp:(e,t)=>e<=t}),i0e=er,s0e=gd.define("GtConst",{},{operSymbol:">",arithcomp:(e,t)=>e>t}),o0e=er,a0e=gd.define("GeConst",{},{operSymbol:"â¥",arithcomp:(e,t)=>e>=t}),u0e=er,c0e=UT.define("EqConst",{},{operSymbol:"=",bincomp:(e,t)=>e.xnor(t).reduceAnd()}),l0e=er,f0e=UT.define("NeConst",{},{operSymbol:"â ",bincomp:(e,t)=>e.xor(t).reduceOr()}),h0e=er,jT=$t.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const e=this.get("extend");console.assert(e.input<=e.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.input},{id:"out",group:"out",dir:"out",bits:e.output}],$t.prototype.initialize.apply(this,arguments),this.on("change:extend",(t,r)=>{this._setPortsBits({in:r.input,out:r.output})})},operation(e){const t=this.get("extend");return{out:e.in.concat(et.make(t.output-t.input,this._extBit(e.in)))}},markup:$t.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:$t.prototype._gateParams.concat(["extend"]),_operationHelpers:$t.prototype._operationHelpers.concat(["_extBit"])}),HT=ui.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),uH=jT.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit(e){return-1}}),d0e=HT,cH=jT.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit(e){return e.get(e.bits-1)}}),p0e=HT,lH=$t.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const e=this.get("slice"),t=e.count==1?e.first:e.first+"-"+(e.first+e.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.total},{id:"out",group:"out",dir:"out",bits:e.count,portlabel:t,labelled:!0}],$t.prototype.initialize.apply(this,arguments),this.on("change:slice",(r,n)=>{this._setPortsBits({in:n.total,out:n.count})})},operation(e){const t=this.get("slice");return{out:e.in.slice(t.first,t.first+t.count)}},_gateParams:$t.prototype._gateParams.concat(["slice"])}),v0e=ui.extend({_autoResizeBox:!0}),WT=$t.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var e=0;const t=[],r=this.get("groups");this.get("size").height=r.length*16+8;for(const[i,s]of r.entries()){const o=e+(s>1?"-"+(e+s-1):"");e+=s,t.push({id:this.group_dir+i,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:o,labelled:!0})}this.set("bits",e);const n=this.group_dir=="out"?"in":"out";t.push({id:n,group:n,dir:n,bits:e}),this.get("ports").items=t,$t.prototype.initialize.apply(this,arguments)},_gateParams:$t.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:$t.prototype._unsupportedPropChanges.concat(["groups"])}),XT=ui.extend({_autoResizeBox:!0}),fH=WT.define("BusGroup",{},{group_dir:"in",operation(e){const t=[];for(const r of this.get("groups").keys())t.push(e["in"+r]);return{out:et.concat(...t)}}}),g0e=XT,hH=WT.define("BusUngroup",{},{group_dir:"out",operation(e){const t={};let r=0;for(const[n,i]of this.get("groups").entries())t["out"+n]=e.in.slice(r,r+i),r+=i;return t}}),m0e=XT,J4=10,y0e=10,dH=$t.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const e=this.get("graph");console.assert(e instanceof Fo),e.set("subcircuit",this);const t=e.getCells().filter(c=>c instanceof No),r=t.filter(c=>c instanceof dd),n=t.filter(c=>c instanceof pd);function i(c,f){return c.has("order")||f.has("order")?c.get("order")-f.get("order"):c.get("net").localeCompare(f.get("net"))}r.sort(i),n.sort(i);const o={width:80,height:Math.max(r.length,n.length)*16+8},a=[],u={};for(const[c,f]of r.entries())a.push({id:f.get("net"),group:"in",dir:"in",bits:f.get("bits"),labelled:!0});for(const[c,f]of n.entries())a.push({id:f.get("net"),group:"out",dir:"out",bits:f.get("bits"),labelled:!0});for(const c of t)u[c.get("net")]=c.get("id");this.set("size",o),this.set("circuitIOmap",u),this.get("ports").items=a,this.set("warning",e._warnings>0),$t.prototype.initialize.apply(this,arguments)},_resetPortValue(e){const t=this.get("circuitIOmap"),r=this.get("graph");return e.dir=="in"?r.getCell(t[e.id]).get("outputSignals").out:e.dir=="out"?r.getCell(t[e.id]).get("inputSignals").in:$t.prototype._resetPortValue.call(this,e)},getLayoutSize(){const e=this.size();return e.height+=y0e,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+J4})},getPortsPositions(){const e=$t.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+J4;return t},markup:[{tagName:"rect",selector:"wrapper"}].concat($t.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],$t.prototype.markupZoom),_gateParams:$t.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:$t.prototype._unsupportedPropChanges.concat(["celltype"])}),_0e=ui.extend({attrs:Nn.merge({},ui.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:ui.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(e){ui.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"WARNING")&&this._updateWarning()},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},update(){ui.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(e){return e.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),Z4=20,b0e=30,qu=On.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:Nn.merge({},lv,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const e=this.get("bits"),t=[{id:"sel",group:"in2",dir:"in",bits:e.sel},{id:"out",group:"out",dir:"out",bits:e.in}],r=this.muxInputs(e.sel);this.get("size").height=r.length*16+8;const i="M"+[[2,0],[5,5],[10,-5]].map(o=>o.join(" ")).join(" L");for(const[o,a]of r.entries()){const u={id:"in"+o,group:"in",dir:"in",bits:e.in,decor:i};a&&(u.portlabel=String(a),u.labelled=!0),t.push(u)}this.get("ports").items=t,On.prototype.initialize.apply(this,arguments);const s=o=>this.attr(["body","points"],[[0,-5],[o.width,5],[o.width,o.height-5],[0,o.height+5]].map(a=>a.join(",")).join(" "));s(this.get("size")),this.on("change:size",(o,a)=>s(a))},operation(e){const t=this.muxInput(e.sel);return t===void 0?{out:et.xes(this.get("bits").in)}:{out:e["in"+t]}},getLayoutSize(){const e=this.size();return e.height+=b0e,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+Z4})},getPortsPositions(){const e=On.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+Z4;return t},markup:On.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:On.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:On.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:On.prototype._operationHelpers.concat(["muxInput"])}),Ng=er.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),er.prototype.initialize.apply(this,arguments)},confirmUpdate(e){er.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){er.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(e){const t=this.model.muxInput(e.sel);for(const r of this.ins.keys())this.$("[port=in"+r+"] path.decor").css("visibility",t==r?"visible":"hidden")}}),pH=qu.define("Mux",{},{muxInputs:e=>Array(1<<e),muxInput:e=>e.isFullyDefined?e.toBigInt().toString():void 0}),w0e=Ng,vH=qu.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:qu.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:e=>Array(e+1),muxInput:e=>{const t=e.toArray();return e.isFullyDefined&&t.filter(r=>r==1).length<=1?String(t.indexOf(1)+1):void 0}}),x0e=Ng,S0e=qu.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const e=this.get("inputs");for(let t=0;t<e.length;t++)typeof e[t]!="bigint"&&(e[t]=BigInt(e[t]));qu.prototype.initialize.apply(this,arguments)},muxInputs(e){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(e){const t=this.get("default_input");if(!e.isFullyDefined)return;const r=this.get("inputs").indexOf(e.toBigInt());return r<0?t?0:void 0:t?r+1:r},_gateParams:qu.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:qu.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),E0e=Ng,gH=$t.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:$t.prototype._getStackedPosition({side:"left"})},out:{position:$t.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits");this.get("initial");const t=this.get("polarity")||{},r=[];this.get("no_data")||r.push({id:"in",group:"in",dir:"in",bits:e,portlabel:"D",labelled:!0}),r.push({id:"out",group:"out",dir:"out",bits:e,portlabel:"Q",labelled:!0}),"arst"in t&&!this.get("arst_value")&&this.set("arst_value",Array(e).fill("0").join("")),"srst"in t&&!this.get("srst_value")&&this.set("srst_value",Array(e).fill("0").join(""));let n=1;"aload"in t&&(n+=2,r.push({id:"ain",group:"in",dir:"in",bits:e,portlabel:"AD",labelled:!0}),r.push({id:"aload",group:"in",dir:"in",bits:1,polarity:t.aload,labelled:!0})),"clock"in t&&(n++,r.push({id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:$t.prototype.decorClock,labelled:!0})),"set"in t&&(n++,r.push({id:"set",group:"in",dir:"in",bits:e,polarity:t.set,portlabel:"S",labelled:!0})),"clr"in t&&(n++,r.push({id:"clr",group:"in",dir:"in",bits:e,polarity:t.clr,portlabel:"R",labelled:!0})),"srst"in t&&(n++,r.push({id:"srst",group:"in",dir:"in",bits:1,polarity:t.srst,labelled:!0})),"arst"in t&&(n++,r.push({id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0})),"enable"in t&&(n++,r.push({id:"en",group:"in",dir:"in",bits:1,polarity:t.enable,labelled:!0})),this.get("size").height=n*16+8,this.get("ports").items=r,this.last_clk=0,$t.prototype.initialize.apply(this,arguments)},_resetPortValue(e){return e.id=="out"&&e.dir=="out"?et.fromBin(this.get("initial"),e.bits):$t.prototype._resetPortValue.call(this,e)},operation(e){const t=this.get("polarity"),r=a=>t[a]?1:-1;let n,i,s;const o=a=>({out:i?a.and(s).or(i):a});if("clock"in t&&(n=this.last_clk,this.last_clk=e.clk.get(0)),"arst"in t&&e.arst.get(0)==r("arst"))return{out:et.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in t&&e.aload.get(0)==r("aload"))return{out:e.ain};if("set"in t&&(i=t.set?e.set:e.set.not(),s=t.set?e.set.not():e.set),"clr"in t){i=i||et.zeros(this.get("bits"));const a=t.clr?e.clr.not():e.clr;s=s?a.and(s):a}return"enable"in t&&e.en.get(0)!=r("enable")&&this.get("enable_srst")?o(this.get("outputSignals").out):!("clock"in t)||e.clk.get(0)==r("clock")&&n==-r("clock")?"srst"in t&&e.srst.get(0)==r("srst")?o(et.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in t&&e.en.get(0)!=r("enable")&&!this.get("enable_srst")?o(this.get("outputSignals").out):this.get("no_data")?o(this.get("outputSignals").out):o(e.in):o(this.get("outputSignals").out)},_gateParams:$t.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:$t.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),A0e=ui.extend({_autoResizeBox:!0}),mH=$t.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:$t.prototype._getStackedPosition({side:"left"})},out:{position:$t.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("abits");this.get("rdports"),this.get("wrports");let r=0,n=0;const i=[],s=[];for(const[o,a]of this._memrdports())i.push({id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0},{id:o+"data",group:"out",dir:"out",bits:e,portlabel:"data",labelled:!0,args:{idxOffset:n}}),r+=1,"srst_polarity"in a&&(r++,n++,i.push({id:o+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(r++,n++,i.push({id:o+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(r++,n++,i.push({id:o+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,n++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:$t.prototype.decorClock,labelled:!0})),s.push(r);for(const[o,a]of this._memwrports())r+=2,i.push({id:o+"data",group:"in",dir:"in",bits:e,portlabel:"data",labelled:!0},{id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0}),"enable_polarity"in a&&(r++,i.push({id:o+"en",group:"in",dir:"in",bits:a.no_bit_enable?1:e,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:$t.prototype.decorClock,labelled:!0})),s.push(r);s.pop(),this.get("size").height=r*16+8,this.get("ports").items=i,$t.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(o,a)=>{const u=[];for(const c of s)u.push([[0,16*c+4],[a.width,16*c+4]].map(f=>f.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+u.join(" M "))})},_resetPortValue(e){if(e.dir=="out"){const t=/^rd([0-9]+)data$/.exec(e.id),r=t?this.get("rdports")[t[1]]:{};if("init_value"in r)return et.fromBin(r.init_value,e.bits)}return $t.prototype._resetPortValue.call(this,e)},prepare(){const e=this.get("bits");var t=this.get("words");const r=this.get("memdata");t||(t=1<<this.get("abits"),this.prop("words",t,{init:!0})),r?this.memdata=Ll.fromJSON(e,r):this.memdata=new Ll(e,t),console.assert(this.memdata.words==t),this.last_clk={};for(const[n,i]of this._memports())"clock_polarity"in i&&(this.last_clk[n+"clk"]=0)},operation(e){const t=this.get("bits"),r={},n=(m,_)=>m[_+"_polarity"]?1:-1,i=(m,_)=>!("enable_polarity"in _&&!e[m+"en"].toArray().some(x=>x==n(_,"enable"))),s=(m,_)=>{const x=m+"clk";return"clock_polarity"in _?e[x].get(0)==n(_,"clock")&&this.last_clk[x]==-n(_,"clock"):!0},o=m=>m>=0&&m<this.get("words"),a=(m,_)=>{const x=this._calcaddr(e[m+"addr"]);o(x)?r[m+"data"]=this.memdata.get(x):r[m+"data"]=et.xes(t)},u=(m,_,x,S)=>{if(_.no_bit_enable||!("enable_polarity"in _))return S;const P=_.enable_polarity?e[m+"en"]:e[m+"en"].not();return S.and(P).or(x.and(P.not()))},c=(m,_)=>{a(m);for(const[x,S]of this.get("wrports").entries()){const P="wr"+x,T=(E,O)=>typeof E=="boolean"?E:E[O];"transparent"in _&&T(_.transparent,x)&&s(P,S)&&i(P,S)&&e[m+"addr"]==e[P+"addr"]&&(r[m+"data"]=u(P,S,r[m+"data"],e[P+"data"])),"collision"in _&&T(_.collision,x)&&s(P,S)&&i(P,S)&&e[m+"addr"]==e[P+"addr"]&&(r[m+"data"]=u(P,S,r[m+"data"],et.xes(t)))}},f=(m,_)=>{const x=this._calcaddr(e[m+"addr"]);if(o(x)){const S=this.memdata.get(x),P=u(m,_,S,e[m+"data"]),T=!S.eq(P);this.memdata.set(x,P),T&&this.trigger("memChange",x,P)}},h=(m,_)=>{e[m+"srst"].get(0)==n(_,"srst")&&(r[m+"data"]="srst_value"in _?et.fromBin(_.srst_value,t):et.zeros(t))},v=(m,_)=>{e[m+"arst"].get(0)==n(_,"arst")&&(r[m+"data"]="arst_value"in _?et.fromBin(_.arst_value,t):et.zeros(t))},y=(m,_)=>{if("clock_polarity"in _){const x=m+"clk";this.last_clk[x]=e[x].get(0)}};for(const[m,_]of this._memrdports())r[m+"data"]=this.get("outputSignals")[m+"data"],"clock_polarity"in _&&i(m,_)&&s(m,_)&&c(m,_);for(const[m,_]of this._memwrports())i(m,_)&&s(m,_)&&f(m,_);for(const[m,_]of this._memrdports())!("clock_polarity"in _)&&i(m,_)&&a(m);for(const[m,_]of this._memrdports())"srst_polarity"in _&&(i(m,_)||!("enable_srst"in _))&&s(m,_)&&h(m,_),"arst_polarity"in _&&v(m,_);for(const[m,_]of this._memrdports())y(m,_);for(const[m,_]of this._memwrports())y(m,_);return r},_calcaddr(e){return e.isFullyDefined?e.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[e,t]of this.get("rdports").entries())yield["rd"+e,t]},*_memwrports(){for(const[e,t]of this.get("wrports").entries())yield["wr"+e,t]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:$t.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],$t.prototype.markupZoom),getGateParams(){const e=$t.prototype.getGateParams.apply(this,arguments);return e.memdata=this.memdata.toJSON(),e},_gateParams:$t.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:$t.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:$t.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),T0e=ui.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=this.model,r=t.graph._display3vl,n=Nt("<div>",{title:"Memory contents: "+t.get("label")}).appendTo("html > body");n.append(Nt('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">â</button><button name="next" type="button" class="btn btn-secondary" title="Next page">â</button></div><div class="input-group">'+FT(r,t.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=t.get("words"),s=t.memdata,o=Math.ceil(t.get("abits")/4),a=8;let u,c=0;const f=()=>n.find("select[name=base]").val(),h=P=>{const T=Math.floor((P-c)/u),E=P-c-T*u;return n.find("table tr:nth-child("+(T+1)+") td:nth-child("+(E+2)+") input")},v=P=>{for(const[T,E]of t._memrdports())h(t._calcaddr(P[T+"addr"])).removeClass("isread");for(const[T,E]of t._memwrports())h(t._calcaddr(P[T+"addr"])).removeClass("iswrite")},y=P=>{for(const[T,E]of t._memrdports())h(t._calcaddr(P[T+"addr"])).addClass("isread");for(const[T,E]of t._memwrports())h(t._calcaddr(P[T+"addr"])).addClass("iswrite")},m=()=>{const P=f();n.find("button[name=prev]").prop("disabled",c<=0),n.find("button[name=next]").prop("disabled",c+a*u>=i);let T=n.find("table tr:first-child");const E=t.memdata;for(let O=0;O<a&&!(c+O*u>=i);O++,T=T.next()){const N=(c+O*u).toString(16);let d=T.find("td:first-child");d.text("0".repeat(o-N.length)+N),d=d.next();for(let C=0;C<u&&!(c+O*u+C>=i);C++,d=d.next())d.find("input").val(r.show(P,E.get(c+O*u+C))).removeClass("invalid")}y(t.get("inputSignals"))},_=()=>{const P=f(),T=r.pattern(P),E=r.size(P,t.get("bits"));u=Math.min(i,16,Math.ceil(32/E)),c=Math.max(0,Math.min(i-a*u,c));const O=n.find("table");O.empty();for(let N=0;N<a&&!(c+N*u>=i);N++){const d=Nt("<tr>");Nt("<td>").appendTo(d);for(let C=0;C<u&&!(c+N*u+C>=i);C++){const R=Nt("<td>");Nt('<input type="text">').attr("size",E).attr("maxlength",E).attr("pattern",T).appendTo(R),R.appendTo(d)}d.appendTo(O)}m()};_(),n.find("select[name=base]").on("change",_),n.find("button[name=prev]").on("click",()=>{v(t.get("inputSignals")),c=Math.max(0,c-a*u),m()}),n.find("button[name=next]").on("click",()=>{v(t.get("inputSignals")),c=Math.min(i-a*u,c+a*u),m()}),n.on("change","input",P=>{const T=f(),E=Nt(P.target),O=E.closest("td").index()-1,N=E.closest("tr").index(),d=c+N*u+O,C=t.get("bits");if(r.validate(T,P.target.value,C)){const R=r.read(T,P.target.value,C);s.set(d,R),t.trigger("manualMemChange",t,d,R),E.removeClass("invalid")}else E.addClass("invalid")});const x=(P,T)=>{if(P<c||P>c+a*u)return;const E=f(),O=h(P).val(r.show(E,s.get(P))).removeClass("invalid").removeClass("flash");setTimeout(()=>{O.addClass("flash")},10)},S=(P,T)=>{v(t.previous("inputSignals")),y(T)};return t.on("memChange",x),t.on("change:inputSignals",S),this.paper.trigger("open:memorycontent",n,()=>{n.remove(),t.off("memChange",x),t.off("change:inputSignals",S)}),!1}}),yH=$t.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:3*16+8},ports:{groups:{in:{position:$t.prototype._getStackedPosition({side:"left"})},out:{position:$t.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("polarity"),r=this.get("init_state"),n=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:$t.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:e.out,labelled:!0}],$t.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new Fo;for(let s=0;s<n;s++){const o=new Ige({stateNo:s,id:"state"+s,isInit:s==r});o.attr("label/text",String(s)),o.resize(100,50),s==r&&o.attr("body/strokeWidth",3),s==i&&o.attr("body/class","current_state"),o.addTo(this.fsmgraph)}for(const[s,o]of this.transitions)for(const a of o){const u=new Bp({id:a.id,ctrlIn:a.ctrlIn,ctrlOut:a.ctrlOut});u.appendLabel({attrs:{text:{text:u.get("ctrlIn").toBin()+"/"+u.get("ctrlOut").toBin()}}}),u.source({id:"state"+s}),u.target({id:"state"+a.stateOut}),u.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(s,o)=>{const a=s.previous("current_state");this.fsmgraph.getCell("state"+a).removeAttr("body/class"),this.fsmgraph.getCell("state"+o).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(s,o)=>{const a=s.previous("next_trans");if(a){const u=this.fsmgraph.getCell(a);u.removeAttr("line/class"),u.removeAttr("line/targetMarker/class")}o&&this.fsmgraph.getCell(o).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const e=this.get("bits");this.transitions=new Map;var t=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+t,stateOut:n.state_out,ctrlIn:et.fromBin(n.ctrl_in,e.in),ctrlOut:et.fromBin(n.ctrl_out,e.out)}),t++;var r=this.get("current_state");r===void 0&&(r=this.get("init_state"),this.set("current_state",r)),this.last_clk=0},operation(e){const t=this.get("bits"),r=this.get("polarity"),n=()=>{const a=this.transitions.get(this.get("current_state"))||[];for(const u of a){const c=u.ctrlIn,f=c.xmask();if(e.in.or(f).eq(c.or(f)))return u}},i=()=>{const a=this.transitions.get(this.get("current_state"))||[],u=e.in.xmask(),c=[];for(const h of a){const v=h.ctrlIn,y=v.xmask().or(u);e.in.or(y).eq(v.or(y))&&c.push(h.ctrlOut)}const f=et.xes(t.out);if(c.length==0)return f;for(;c.length>1;){const h=c.pop(),v=c[0].xnor(h).or(f);c[0]=c[0].and(v).or(f.and(v.xmask()))}return c[0]},s=a=>r[a]?1:-1;if(e.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const a=this.last_clk;if(e.clk.get(0)==s("clock")&&a==-s("clock")){const u=n();this.set("current_state",u?u.stateOut:this.get("init_state"))}}this.last_clk=e.clk.get(0);const o=n();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:i()}},markup:$t.prototype.markup.concat($t.prototype.markupZoom),_gateParams:$t.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:$t.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:$t.prototype._presentationParams.concat(["current_state","next_trans"])}),P0e=ui.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=Nt("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),r=Nt("<div>").appendTo(t),n=this.model.fsmgraph,i=new m9({el:r,model:n});return n.resetCells(n.getCells()),n.get("laid_out")||(qh.layout(n,{dagre:Kle,graphlib:Zle}),n.set("laid_out",!0)),i.listenTo(n,"change:position",s=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",t,()=>{i.remove(),t.remove()}),!1}}),Pu="#03c03c",Wa="#3c3c3c",_H=No.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:Wa,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:vs.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),C0e=ya.extend({_autoResizeBox:!1,confirmUpdate(e){ui.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const e=this.model.getOutput(),t={dp:{fill:e.get(7)===1?Pu:Wa},a:{fill:e.get(6)===1?Pu:Wa},b:{fill:e.get(5)===1?Pu:Wa},c:{fill:e.get(4)===1?Pu:Wa},d:{fill:e.get(3)===1?Pu:Wa},e:{fill:e.get(2)===1?Pu:Wa},f:{fill:e.get(1)===1?Pu:Wa},g:{fill:e.get(0)===1?Pu:Wa}};this._applyAttrs(t)}}),O0e=Object.freeze(Object.defineProperty({__proto__:null,Addition:X9,AdditionConst:Bme,AdditionConstView:zme,AdditionView:Ame,And:D9,AndReduce:G9,AndReduceView:_me,AndView:hme,Arith:Ti,Arith11:zT,Arith21:Zc,ArithConst:Qc,BaseCompare:Dh,BaseCompareConst:Fh,BitExtend:jT,BitExtendView:HT,Box:$t,BoxView:ui,BusGroup:fH,BusGroupView:g0e,BusRegroup:WT,BusRegroupView:XT,BusSlice:lH,BusSliceView:v0e,BusUngroup:hH,BusUngroupView:m0e,Button:P9,ButtonView:tme,Clock:k9,ClockView:ome,Compare:vd,CompareConst:gd,Constant:R9,ConstantView:sme,Dff:gH,DffView:A0e,Display7:_H,Display7View:C0e,Division:J9,DivisionConst:jme,DivisionConstView:Hme,DivisionView:Cme,Eq:oH,EqCompare:GT,EqCompareConst:UT,EqConst:c0e,EqConstView:l0e,EqView:Dme,FSM:yH,FSMView:P0e,Gate:On,Gate11:BT,GateReduce:Gu,GateSVG:ma,GateView:er,GateX1:Jc,Ge:sH,GeConst:a0e,GeConstView:u0e,GeView:qme,GenMux:qu,GenMuxView:Ng,Gt:iH,GtConst:s0e,GtConstView:o0e,GtView:Nme,IO:No,IOView:ya,Input:dd,InputView:qT,Lamp:O9,LampView:nme,Le:nH,LeConst:n0e,LeConstView:i0e,LeView:Lme,Lt:rH,LtConst:t0e,LtConstView:r0e,LtView:Mme,Memory:mH,MemoryView:T0e,Modulo:Z9,ModuloConst:Wme,ModuloConstView:Xme,ModuloView:Ome,Multiplication:K9,MultiplicationConst:$me,MultiplicationConstView:Ume,MultiplicationView:Pme,Mux:pH,Mux1Hot:vH,Mux1HotView:x0e,MuxSparse:S0e,MuxSparseView:E0e,MuxView:w0e,Nand:B9,NandReduce:$9,NandReduceView:bme,NandView:pme,Ne:aH,NeConst:f0e,NeConstView:h0e,NeView:Fme,Negation:H9,NegationView:Sme,Nor:F9,NorReduce:n2,NorReduceView:yme,NorView:dme,Not:N9,NotView:lme,NumBase:vs,NumBaseView:Nu,NumDisplay:I9,NumDisplayView:ime,NumEntry:C9,NumEntryView:rme,OpConst:_a,Or:q9,OrReduce:r2,OrReduceView:mme,OrView:fme,Output:pd,OutputView:DT,Power:Q9,PowerConst:Yme,PowerConstView:Kme,PowerView:Ime,Repeater:L9,RepeaterView:cme,Shift:VT,ShiftConst:$T,ShiftLeft:eH,ShiftLeftConst:Jme,ShiftLeftConstView:Zme,ShiftLeftView:Rme,ShiftRight:tH,ShiftRightConst:Qme,ShiftRightConstView:e0e,ShiftRightView:kme,SignExtend:cH,SignExtendView:p0e,Subcircuit:dH,SubcircuitView:_0e,Subtraction:Y9,SubtractionConst:Vme,SubtractionConstView:Gme,SubtractionView:Tme,UnaryPlus:W9,UnaryPlusView:Eme,Wire:T9,WireView:eme,Xnor:V9,XnorReduce:j9,XnorReduceView:xme,XnorView:gme,Xor:z9,XorReduce:U9,XorReduceView:wme,XorView:vme,ZeroExtend:uH,ZeroExtendView:d0e,portGroupAttrs:lv},Symbol.toStringTag,{value:"Module"}));var mE,Q4;function I0e(){if(Q4)return mE;Q4=1;var e=function(r,n){return r<n};function t(r){if(!(this instanceof t))return new t(r);this.array=[],this.size=0,this.compare=r||e}return t.prototype.clone=function(){var r=new t(this.compare);return r.size=this.size,r.array=this.array.slice(0,this.size),r},t.prototype.add=function(r){var n=this.size;this.array[this.size]=r,this.size+=1;for(var i,s;n>0&&(i=n-1>>1,s=this.array[i],!!this.compare(r,s));)this.array[n]=s,n=i;this.array[n]=r},t.prototype.heapify=function(r){this.array=r,this.size=r.length;var n;for(n=this.size>>1;n>=0;n--)this._percolateDown(n)},t.prototype._percolateUp=function(r,n){for(var i=this.array[r],s,o;r>0&&(s=r-1>>1,o=this.array[s],!(!n&&!this.compare(i,o)));)this.array[r]=o,r=s;this.array[r]=i},t.prototype._percolateDown=function(r){for(var n=this.size,i=this.size>>>1,s=this.array[r],o,a,u;r<i&&(o=(r<<1)+1,a=o+1,u=this.array[o],a<n&&this.compare(this.array[a],u)&&(o=a,u=this.array[a]),!!this.compare(u,s));)this.array[r]=u,r=o;this.array[r]=s},t.prototype._removeAt=function(r){if(!(r>this.size-1||r<0))return this._percolateUp(r,!0),this.poll()},t.prototype.remove=function(r){for(var n=0;n<this.size;n++)if(!this.compare(this.array[n],r)&&!this.compare(r,this.array[n]))return this._removeAt(n),!0;return!1},t.prototype.removeOne=function(r){if(typeof r=="function"){for(var n=0;n<this.size;n++)if(r(this.array[n]))return this._removeAt(n)}},t.prototype.removeMany=function(r,n){if(typeof r!="function"||this.size<1)return[];n=n?Math.min(n,this.size):this.size;for(var i=0,s=new Array(n),o=0,a=new Array(this.size);i<n&&!this.isEmpty();){var u=this.poll();r(u)?s[i++]=u:a[o++]=u}s.length=i;for(var c=0;c<o;)this.add(a[c++]);return s},t.prototype.peek=function(){if(this.size!=0)return this.array[0]},t.prototype.poll=function(){if(this.size!=0){var r=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,r}},t.prototype.replaceTop=function(r){if(this.size!=0){var n=this.array[0];return this.array[0]=r,this._percolateDown(0),n}},t.prototype.trim=function(){this.array=this.array.slice(0,this.size)},t.prototype.isEmpty=function(){return this.size===0},t.prototype.forEach=function(r){if(!(this.isEmpty()||typeof r!="function"))for(var n=0,i=this.clone();!i.isEmpty();)r(i.poll(),n++)},t.prototype.kSmallest=function(r){if(this.size==0)return[];r=Math.min(this.size,r);var n=new t(this.compare);const i=Math.min((r>0?Math.pow(2,r-1):0)+1,this.size);n.size=i,n.array=this.array.slice(0,i);for(var s=new Array(r),o=0;o<r;o++)s[o]=n.poll();return s},mE=t,mE}var R0e=I0e();const k0e=tf(R0e);class bH{constructor(t){this._graph=t}_addGate(t,r){r.get("type")=="Subcircuit"&&this._addGraph(r.get("graph"))}_addLink(t,r){}_addGraph(t){this.listenTo(t,"add",r=>{r.isLink()?this._addLink(t,r):this._addGate(t,r)}),this.listenTo(t,"remove",r=>{r.isLink()?this._removeLink(t,r):this._removeGate(t,r)}),this.listenTo(t,"change:source",(r,n)=>{this._changeLinkSource(t,r,n,r.previous("source"))}),this.listenTo(t,"change:target",(r,n)=>{this._changeLinkTarget(t,r,n,r.previous("target"))}),this.listenTo(t,"change:warning",(r,n)=>{this._changeLinkWarning(t,r,n,r.previous("warning"))});for(const r of t.getElements())this._addGate(t,r);for(const r of t.getLinks())this._addLink(t,r)}_removeGate(t,r){}_removeLink(t,r){}_changeLinkSource(t,r,n,i){}_changeLinkTarget(t,r,n,i){}_changeLinkWarning(t,r,n,i){}}Nn.extend(bH.prototype,ii.Events);class M0e extends bH{constructor(t,{cells:r}){super(t),this._queue=new Map,this._pq=new k0e,this._tick=0,this._cells=r,this._monitorChecks=new Map,this._alarms=new Map,this._alarmQueue=new Map,this._addGraph(t)}get hasPendingEvents(){return this._queue.size>0}get tick(){return this._tick}shutdown(){this.stopListening()}_updateSubcircuit(t,r,n={}){r||(r=t.get("inputSignals"));const i=t.get("circuitIOmap");for(const[s,o]of Object.entries(r)){if(n[s]&&o.eq(n[s]))continue;const a=t.get("graph").getCell(i[s]);console.assert(a.isInput),a._setInput(o)}}_addGate(t,r){super._addGate(t,r),this._enqueue(r),r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r)}_addGraph(t){this.listenTo(t,"manualMemChange",r=>{this._enqueue(r)}),this.listenTo(t,"change:constantCache",r=>{this._enqueue(r)}),this.listenTo(t,"change:inputSignals",(r,n)=>{const i=r.previous("inputSignals");if(!t2(n,i)){if(r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r,n,i),r instanceof this._cells.Output&&r.get("mode")==0){const s=r.graph.get("subcircuit");if(s!=!0){console.assert(s!=null);const o=r.get("net"),a=Nn.clone(s.get("outputSignals"));a[o]=r.getOutput(),s.set("outputSignals",a)}}this._enqueue(r)}}),super._addGraph(t)}_enqueue(t){const r=this._tick+t.get("propagation")|0;(()=>{const i=this._queue.get(r);if(i!==void 0)return i;const s=new Map;return this._queue.set(r,s),this._pq.add(r),s})().set(t,t.get("inputSignals"))}updateGatesNext(){const t=this._pq.poll()|0;console.assert(t>=this._tick),this._tick=t;const r=this._queue.get(t);let n=0;for(;r.size;){const[i,s]=r.entries().next().value;if(r.delete(i),i instanceof this._cells.Subcircuit||i instanceof this._cells.Input||i instanceof this._cells.Output||!i.graph)continue;const a=i.operation(s);"_clock_hack"in a&&(delete a._clock_hack,this._enqueue(i)),i.set("outputSignals",a),n++}return this._queue.delete(t),this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,n),Promise.resolve(n)}updateGates(){if(this._pq.peek()==this._tick)return this.updateGatesNext();{const t=this._tick|0;return this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,0),Promise.resolve(0)}}synchronize(){return Promise.resolve()}start(){throw new Error("start() not supported")}startFast(){throw new Error("startFast() not supported")}stop(){return Promise.resolve()}get interval(){throw new Error("interval not supported")}set interval(t){throw new Error("interval not supported")}get running(){return!1}observeGraph(t){}unobserveGraph(t){}monitor(t,r,n,{triggerValues:i,stopOnTrigger:s,oneShot:o}){const a=(u,c)=>{const f=c[r];this._monitorChecks.set(a,{gate:u,sig:f,cb:a,callback:n,triggerValues:i,stopOnTrigger:s,oneShot:o})};return t.on("change:outputSignals",a),i==null&&n(this._tick,t.get("outputSignals")[r]),{gate:t,callback:a}}unmonitor(t){t.gate.off("change:outputSignals",t.callback)}alarm(t,r,{stopOnAlarm:n}){console.assert(t>this._tick);const i=()=>{this.unalarm(i),r()};return this._alarms.set(i,{tick:t,stopOnAlarm:n}),this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(i),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map),i}unalarm(t){const{tick:r}=this._alarms.get(t);this._alarmQueue.get(r).delete(t),this._alarmQueue.get(r).size==0&&this._alarmQueue.delete(r),this._alarms.delete(t)}_checkMonitors(){for(const{gate:t,sig:r,cb:n,callback:i,triggerValues:s,stopOnTrigger:o,oneShot:a}of this._monitorChecks.values()){let u=!0;s!=null&&(u=s.some(c=>r.eq(c))),u&&(a&&t.off("change:outputSignals",n),i(this._tick,r)&&o&&this.stop())}if(this._monitorChecks=new Map,this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:r}=this._alarms.get(t);t()&&r&&this.stop()}this._alarmQueue.delete(this._tick)}}}function L0e(e){const t={$not:N9,$and:D9,$nand:B9,$or:q9,$nor:F9,$xor:z9,$xnor:V9,$reduce_and:G9,$reduce_nand:$9,$reduce_or:r2,$reduce_nor:n2,$reduce_xor:U9,$reduce_xnor:j9,$reduce_bool:r2,$logic_not:n2,$repeater:L9,$shl:eH,$shr:tH,$lt:rH,$le:nH,$eq:oH,$ne:aH,$gt:iH,$ge:sH,$constant:R9,$neg:H9,$pos:W9,$add:X9,$sub:Y9,$mul:K9,$div:J9,$mod:Z9,$pow:Q9,$mux:pH,$pmux:vH,$dff:gH,$mem:mH,$fsm:yH,$clock:k9,$button:P9,$lamp:O9,$numdisplay:I9,$numentry:C9,$input:dd,$output:pd,$busgroup:fH,$busungroup:hH,$busslice:lH,$zeroextend:uH,$signextend:cH,$display7:_H};return e in t?t[e]:dH}class wH{constructor(t,{cellsNamespace:r={},engine:n=M0e,engineOptions:i={}}={}){this._cells=Object.assign(O0e,r),this._display3vl=new S9,this._display3vl.addDisplay(new ame),this._graph=this._makeGraph(t,t.subcircuits),i.cells=this._cells,this._engine=new n(this._graph,i),this.makeLabelIndex(),this.listenTo(this._engine,"postUpdateGates",(s,o)=>{this.trigger("postUpdateGates",s,o)})}addDisplay(t){this._display3vl.addDisplay(t),this.trigger("display:add",t)}shutdown(){this.trigger("shutdown"),this.stop(),this._engine.shutdown(),this.stopListening()}hasWarnings(){return this._graph._warnings>0}_makeGraph(t,r,n){n=n||{};const i=new Fo;i._display3vl=this._display3vl,i._warnings=0,n.nested&&i.set("subcircuit",!0);const s=a=>{i._warnings+=a,console.assert(i._warnings>=0),i._warnings>0&&this.running&&this.stop();const u=i.get("subcircuit");u==null||u==!0||u.set("warning",i._warnings>0)};this.listenTo(i,"userChange",a=>{this.trigger("userChange",a)}),this.listenTo(i,"change:inputSignals",(a,u)=>{t2(u,a.previous("inputSignals"))||a._changeInputSignals&&a._changeInputSignals(u)}),this.listenTo(i,"change:outputSignals",(a,u)=>{t2(u,a.previous("outputSignals"))||a._changeOutputSignals(u)}),this.listenTo(i,"change:signal",(a,u)=>{a._changeSignal(u)}),this.listenTo(i,"change:source",(a,u)=>{this._labelIndex=null,a._changeSource(u)}),this.listenTo(i,"change:target",(a,u)=>{this._labelIndex=null,a._changeTarget(u)}),this.listenTo(i,"change:warning",(a,u)=>{a.previous("warning")!==u&&s(u?1:-1)}),this.listenTo(i,"add",(a,u,c)=>{this._labelIndex=null,a.onAdd&&a.onAdd(),a.get("warning")&&s(1)}),this.listenTo(i,"remove",(a,u,c)=>{this._labelIndex=null,a.get("warning")&&s(-1)});let o=!1;for(const a in t.devices){const u=t.devices[a];u.position&&(o=!0);const c=u.type in this._cells?this._cells[u.type]:L0e(u.celltype),f=Nn.clone(u);f.id=a,c==this._cells.Subcircuit&&(f.graph=this._makeGraph(r[u.celltype],r,{nested:!0}));const h=new c(f);i.addCell(h)}for(const a of t.connectors)i.addCell(new this._cells.Wire({source:{id:a.from.id,port:a.from.port,magnet:"port"},target:{id:a.to.id,port:a.to.port,magnet:"port"},netname:a.name,vertices:a.vertices||[],source_positions:a.source_positions||[]}));return o&&i.set("laid_out",!0),i}updateGatesNext(t){return this._engine.updateGatesNext(t)}updateGates(t){return this._engine.updateGates(t)}synchronize(){return this._engine.synchronize()}get hasPendingEvents(){return this._engine.hasPendingEvents}get tick(){return this._engine.tick}start(){if(!this.hasWarnings())return this._engine.start()}startFast(){if(!this.hasWarnings())return this._engine.startFast()}stop(t){return this._engine.stop(t)}get interval(){return this._engine.interval}set interval(t){this._engine.interval=t}get running(){return this._engine.running}getInputCells(){return this._graph.getElements().filter(t=>t.isInput)}getOutputCells(){return this._graph.getElements().filter(t=>t.isOutput)}setInput(t,r){const n=this._graph.getCell(t);if(n.isInput)n.setInput(r);else throw new Error("Invalid call to setInput")}getOutput(t){const r=this._graph.getCell(t);if(r.isOutput)return r.getOutput();throw new Error("Invalid call to getOutput")}makeLabelIndex(){if(this._labelIndex)return this._labelIndex;const t=r=>{const n={wires:{},devices:{},subcircuits:{},inputs:{},outputs:{},graph:r};for(const i of r.getElements()){if(i.has("net")&&(i.isInput&&(n.inputs[i.get("net")]=i),i.isOutput&&(n.outputs[i.get("net")]=i)),!i.has("label"))continue;const s=i.get("label");n.devices[s]=i,i instanceof this._cells.Subcircuit&&(n.subcircuits[s]=t(i.get("graph")))}for(const i of r.getLinks())i.has("netname")&&(n.wires[i.get("netname")]=i);return n};return this._labelIndex=t(this._graph)}getLabelIndex(t=[]){const r=(n,i)=>{if(n==t.length)return i;{const s=i.subcircuits[t[n]];if(s)return r(n+1,s)}};return r(0,this.makeLabelIndex())}findWireByLabel(t,r=[]){return this.getLabelIndex(r).wires[t]}findDeviceByLabel(t,r=[]){return this.getLabelIndex(r).devices[t]}findInputByNet(t){return this.getLabelIndex([]).inputs[t]}findOutputByNet(t){return this.getLabelIndex([]).outputs[t]}toJSON(t=!0){const r={},n=s=>{const o={devices:{},connectors:[]},a=s.get("laid_out");for(const u of s.getElements()){const c=o.devices[u.get("id")]=u.getGateParams(t);a||delete c.position,u instanceof this._cells.Subcircuit&&!r[u.get("celltype")]&&(r[u.get("celltype")]=n(u.get("graph")))}for(const u of s.getLinks())o.connectors.push(u.getWireParams(t));return o},i=n(this._graph);return i.subcircuits=r,i}waitForWire(t,r){return r instanceof et&&(r=[r]),new Promise(n=>{this.monitorWire(t,(i,s)=>{n(i)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:r})})}waitFor(t,r,n){return n instanceof et&&(n=[n]),new Promise(i=>{this.monitor(t,r,(s,o)=>{i(s)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:n})})}monitorWire(t,r,n={}){const i=t.get("source"),s=t.getSourceElement();return s==null?null:this.monitor(s,i.port,r,n)}monitor(t,r,n,i={}){return this._engine.monitor(t,r,n,i)}unmonitor(t){this._engine.unmonitor(t)}observeGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}unobserveGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}alarm(t,r,n={}){return this._engine.alarm(t,r,n)}unalarm(t){this._engine.unalarm(t)}}Nn.extend(wH.prototype,ii.Events);class N0e{constructor(t,r=[]){this._bits=t,this._data=r,r.length==0?this._present=-1:this._present=this._data[this._data.length-1][0]}get bits(){return this._bits}updatePresent(t){this._present=Math.max(this._present,t)}push(t,r){if(console.assert(r.bits==this._bits&&t>=this._present),this._present=t,this._data.length>0){const[n,i]=this._data[this._data.length-1];if(i.eq(r))return;if(console.assert(t>=n),t==n){this._data[this._data.length-1][1]=r;return}}this._data.push([t,r])}getRange(t,r){if(this._data.length==0)return[];const n=a=>{let u=0,c=this._data.length;for(;c>u;){const f=u+c>>1,h=this._data[f][0];if(a==h)return f;a<h?c=f:u=f+1}return u==this._data.length?u-1:u};let i=n(t),s=n(t+r);i>0&&this._data[i][0]>t&&i--,s<this._data.length-1&&this._data[s][0]<t+r&&s++;const o=this._data.slice(i,s+1).map(a=>[a[0],a[1]]);return o[o.length-1][0]<t+r&&this._present>o[o.length-1][0]&&o.push([this._present,o[o.length-1][1]]),o}}const xH={start:0,pixelsPerTick:10,bitColors:["#fc7c68","#999","#03c03c","#779ecb"],gapScale:.2,heightFill:.8,base:"hex",gridWidth:.5,gridColor:"gray",gridStep:1,gridMinDist:10,font:"10px sans-serif",textColor:"black"};Object.freeze(xH);function e7(e,t){var r={};for(const[i,s]of Object.entries(t))r[i]={value:s,writable:!0};return Object.create(e,r)}function SH(e){let t=e.gridStep;for(;t*e.pixelsPerTick<e.gridMinDist;)10*t*e.pixelsPerTick<e.gridMinDist?t*=10:2*t*e.pixelsPerTick>=e.gridMinDist?t*=2:5*t*e.pixelsPerTick>=e.gridMinDist?t*=5:t*=10;return t}function q0e(e,t,r,n=new S9){t.clearRect(0,0,t.canvas.width,t.canvas.height);const i=t.canvas.width/r.pixelsPerTick;"present"in r&&e.updatePresent(r.present);const s=e.getRange(r.start,Math.ceil(i)),o=s.map((x,S)=>[x,s[S+1]]);o.pop();const a=x=>(Math.max(Math.min(x,r.start+i),r.start)-r.start)*r.pixelsPerTick,u=.5*t.canvas.height,c=(.5-r.heightFill/2)*t.canvas.height,f=(.5+r.heightFill/2)*t.canvas.height,h=x=>[f,u,c][x+1],v=x=>r.bitColors[x+1],y=x=>r.bitColors[x.isDefined?x.isLow?0:x.isHigh?2:3:1],m=t.createLinearGradient(0,f,0,c);m.addColorStop(0,r.bitColors[0]),m.addColorStop(.5,r.bitColors[1]),m.addColorStop(1,r.bitColors[2]),t.lineWidth=r.gridWidth;const _=SH(r);for(let x=r.start-r.start%_;x<r.start+i;x+=_){const S=a(x);t.beginPath(),t.strokeStyle=r.gridColor,t.moveTo(S,0),t.lineTo(S,t.canvas.height),t.stroke()}t.lineWidth=2;for(const[[x,S],[P,T]]of o){const E=a(x),O=a(P);if(e.bits==1){const N=S.get(0),d=T.get(0),C=h(N),R=h(d),k=v(N);v(d);const B=Math.min(Math.abs(C-R)*r.gapScale,r.pixelsPerTick/2);t.beginPath(),t.strokeStyle=m,t.moveTo(O-B,C),t.lineTo(O,R),t.stroke(),t.beginPath(),t.strokeStyle=k,t.moveTo(E,C),t.lineTo(O-B,C),t.stroke()}else{const N=Math.min(Math.abs(c-f)*r.gapScale,r.pixelsPerTick/2),d=y(S),C=y(T),R=S.isDefined,k=T.isDefined;if(R){t.textAlign="center",t.textBaseline="middle",t.font=r.font,t.fillStyle=r.textColor;const B=n.show(r.base,S);t.measureText(B).width<(O-E-N)*2&&t.fillText(B,(E+O-N)/2,t.canvas.height/2,O-E-N)}!R&&!k?(t.beginPath(),t.strokeStyle=d,t.moveTo(E,u),t.lineTo(O,u),t.stroke()):S.eq(T)?(t.strokeStyle=C,t.beginPath(),t.moveTo(E,c),t.lineTo(O,c),t.stroke(),t.beginPath(),t.moveTo(E,f),t.lineTo(O,f),t.stroke()):(t.strokeStyle=C,k?(t.beginPath(),t.moveTo(O,c),t.lineTo(O-N/2,u),t.lineTo(O,f),t.stroke()):(t.beginPath(),t.moveTo(O,u),t.lineTo(O-N/2,u),t.stroke()),t.strokeStyle=d,R?(t.beginPath(),t.moveTo(E,c),t.lineTo(O-N,c),t.lineTo(O-N/2,u),t.lineTo(O-N,f),t.lineTo(E,f),t.stroke()):(t.beginPath(),t.moveTo(E,u),t.lineTo(O-N/2,u),t.stroke()))}}}var EH=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];r.call(n,o[1],o[0])}},t}()}(),o2=typeof window<"u"&&typeof document<"u"&&window.document===document,fv=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),D0e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(fv):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),F0e=2;function B0e(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&a()}function o(){D0e(s)}function a(){var u=Date.now();if(r){if(u-i<F0e)return;n=!0}else r=!0,n=!1,setTimeout(o,t);i=u}return a}var z0e=20,V0e=["top","right","bottom","left","width","height","size","weight"],G0e=typeof MutationObserver<"u",$0e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=B0e(this.refresh.bind(this),z0e)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!o2||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),G0e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!o2||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=V0e.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),AH=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Wl=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||fv},TH=qg(0,0,0,0);function hv(e){return parseFloat(e)||0}function t7(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var s=e["border-"+i+"-width"];return n+hv(s)},0)}function U0e(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var s=i[n],o=e["padding-"+s];r[s]=hv(o)}return r}function j0e(e){var t=e.getBBox();return qg(0,0,t.width,t.height)}function H0e(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return TH;var n=Wl(e).getComputedStyle(e),i=U0e(n),s=i.left+i.right,o=i.top+i.bottom,a=hv(n.width),u=hv(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==t&&(a-=t7(n,"left","right")+s),Math.round(u+o)!==r&&(u-=t7(n,"top","bottom")+o)),!X0e(e)){var c=Math.round(a+s)-t,f=Math.round(u+o)-r;Math.abs(c)!==1&&(a-=c),Math.abs(f)!==1&&(u-=f)}return qg(i.left,i.top,a,u)}var W0e=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Wl(e).SVGGraphicsElement}:function(e){return e instanceof Wl(e).SVGElement&&typeof e.getBBox=="function"}}();function X0e(e){return e===Wl(e).document.documentElement}function Y0e(e){return o2?W0e(e)?j0e(e):H0e(e):TH}function K0e(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return AH(o,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),o}function qg(e,t,r,n){return{x:e,y:t,width:r,height:n}}var J0e=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qg(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Y0e(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Z0e=function(){function e(t,r){var n=K0e(r);AH(this,{target:t,contentRect:n})}return e}(),Q0e=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new EH,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Wl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new J0e(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Wl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Z0e(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),PH=typeof WeakMap<"u"?new WeakMap:new EH,CH=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=$0e.getInstance(),n=new Q0e(t,r,this);PH.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){CH.prototype[e]=function(){var t;return(t=PH.get(this))[e].apply(t,arguments)}});var eye=function(){return typeof fv.ResizeObserver<"u"?fv.ResizeObserver:CH}();function Nl(e){const t=[e.cid];for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))t.push(r.cid);return t.reverse(),t.join(".")}function tye(e){const t=[];if(e.has("netname"))t.push(e.get("netname"));else{const r=e.source();t.push(r.port);const n=e.graph.getCell(r.id);n.has("label")?t.push(n.get("label")):t.push(r.id)}for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))r.has("label")?t.push(r.get("label")):t.push(r.id);return t.reverse(),t.join(".")}class rye{constructor(t){this._circuit=t,this._wires=new Map,this.listenTo(this._circuit,"new:paper",r=>this.attachTo(r))}attachTo(t){this.listenTo(t,"link:monitor",r=>{this.addWire(r.model)})}addWire(t){const r=Nl(t);if(this._wires.has(r))return;const n=new N0e(t.get("bits")),i={wire:t,waveform:n,monitorId:void 0};this._wires.set(r,i),this.trigger("add",t),i.monitorId=this._circuit.monitorWire(t,(s,o)=>{this._handleChange(s,t,o)})}removeWire(t){typeof t=="string"&&(t=this._wires.get(t).wire),this.trigger("remove",t);const r=Nl(t);this._circuit.unmonitor(this._wires.get(r).monitorId),this._wires.delete(r)}getWires(){const t=[];for(const r of this._wires.values())t.push(r.wire);return t}getWiresDesc(){return this.getWires().map(t=>{if(t.has("netname"))return{name:t.get("netname"),path:t.getWirePath(),bits:t.get("bits")}}).filter(t=>t!==void 0)}loadWiresDesc(t){for(const r of t){const n=this._circuit.findWireByLabel(r.name,r.path);n&&n.get("bits")==r.bits&&this.addWire(n)}}_handleChange(t,r,n){this._wires.get(Nl(r)).waveform.push(t,n),this.trigger("change",r,n)}}Nn.extend(rye.prototype,ii.Events);class Ube extends ii.View{initialize(t){this._width=800,this._settings=e7(xH,{start:0,pixelsPerTick:5,gridStep:1}),this._settingsFor=new Map,this._live=!0,this._autoredraw=!1,this._idle=null,this._removeButtonMarkup=t.removeButtonMarkup||'<button type="button" name="remove">â</button>',this._baseSelectorMarkup=t.baseSelectorMarkup||FT,this._bitTriggerMarkup=t.bitTriggerMarkup||'<select name="trigger" title="Trigger"><option value="none"></option><option value="rising">â</option><option value="falling">â</option><option value="risefall">â</option><option value="undef">x</option></select>',this._busTriggerMarkup=t.busTriggerMarkup||'<input type="text" name="trigger" title="Trigger" placeholder="trigger" pattern="[0-9a-fx]*">',this.listenTo(this.model,"add",this._handleAdd),this.listenTo(this.model,"remove",this._handleRemove),this.listenTo(this.model._circuit,"display:add",()=>{this.render()}),this.listenTo(this.model._circuit,"postUpdateGates",f=>{this._live&&(this.start=f-this._width/this._settings.pixelsPerTick),this._settings.present=f,this._idle||(this._idle=requestIdleCallback(()=>{this._drawAll(),this._idle=null},{timeout:100}))}),this.render(),this._resizeObserver=new eye(()=>{this._canvasResize()}),this._resizeObserver.observe(this.el);function r(f){return Nt(f.target).closest("tr").attr("wireid")}const n=this.model._circuit._display3vl;this.$el.on("click","button[name=remove]",f=>{this.model.removeWire(r(f))}),this.$el.on("input","select[name=base]",f=>{const h=f.target.value,v=this._settingsFor.get(r(f));v.base=h;const m=Nt(f.target).closest("tr").find("input[name=trigger]");m.attr("pattern",n.pattern(h)),v.trigger.length&&m.val(n.show(h,v.trigger[0])),this.trigger("change")});const i=()=>!0,s=(f,h)=>{const v=this._settingsFor.get(f);if(v.triggerId&&(this.model._circuit.unmonitor(v.triggerId),v.triggerId=null),h.length>0){const y=this.model._wires.get(f).wire;v.triggerId=this.model._circuit.monitorWire(y,i,{triggerValues:h,stopOnTrigger:!0})}v.trigger=h};this.$el.on("input","select[name=trigger]",f=>{const h=r(f);switch(f.target.value){case"rising":s(h,[et.one]);break;case"falling":s(h,[et.zero]);break;case"risefall":s(h,[et.one,et.zero]);break;case"undef":s(h,[et.x]);break;default:s(h,[])}}),this.$el.on("change","input[name=trigger]",f=>{const h=r(f),y=this._settingsFor.get(h).base,m=this.model._wires.get(h).waveform.bits;if(f.target.value=="")s(h,[]);else if(n.validate(y,f.target.value,m)){const _=n.read(y,f.target.value,m);s(h,[_]),f.target.value=n.show(y,_)}else s(h,[])}),this.listenTo(this,"change",()=>{this._autoredraw&&this._drawAll()});const o=new Image(0,0);o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let a,u;const c=f=>{const h=f.originalEvent.screenX-a;this.start=u-h/this._settings.pixelsPerTick};this.$el.on("dragstart","canvas",f=>{const h=f.originalEvent.dataTransfer;h.setData("text/plain","dragging"),h.setDragImage(o,0,0),a=f.originalEvent.screenX,u=this._settings.start,this.live=!1,Nt(document).on("dragover",c)}),this.$el.on("dragend","canvas",f=>{Nt(document).off("dragover",c)}),this.$el.on("wheel","canvas",f=>{f.preventDefault();const h=2**Math.sign(f.originalEvent.deltaY);this.start+=f.originalEvent.offsetX/this._settings.pixelsPerTick*(1-1/h),this.pixelsPerTick*=h})}render(){this.$el.html('<table class="monitor"></table>');for(const t of this.model._wires.values())this.$("table").append(this._handleAdd(t.wire));return this._canvasResize(),this}shutdown(){this.$el.off(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.stopListening()}get gridStep(){return SH(this._settings)}get autoredraw(){return this._autoredraw}set autoredraw(t){this._autoredraw=t,t&&this._drawAll()}get width(){return this._width}get live(){return this._live}set live(t){this.live!=t&&(this._live=t,this.trigger("change:live",t),this.trigger("change"))}get start(){return this._settings.start}set start(t){this._settings.start!=t&&(this._settings.start=t,this.trigger("change:start",t),this.trigger("change"))}get pixelsPerTick(){return this._settings.pixelsPerTick}set pixelsPerTick(t){this._settings.pixelsPerTick!=t&&(this._settings.pixelsPerTick=t,this.trigger("change:pixelsPerTick",t),this.trigger("change"))}_canvasResize(){this._width=Math.max(this.$el.width()-300,100),this.$("canvas").attr("width",this._width),this.trigger("change:width",this._width),this.trigger("change")}_drawAll(){for(const t of this.model._wires.keys())this._draw(t)}_draw(t){const r=this.model._circuit._display3vl,n=this.$('tr[wireid="'+t+'"]').find("canvas"),i=this.model._wires.get(t).waveform;q0e(i,n[0].getContext("2d"),this._settingsFor.get(t),r)}_handleAdd(t){const r=Nl(t);this._settingsFor.set(r,e7(this._settings,{base:"hex",trigger:[],triggerId:null})),this.$("table").append(this._createRow(t))}_handleRemove(t){const r=Nl(t);this.$('tr[wireid="'+r+'"]').remove();const n=this._settingsFor.get(r);n.triggerId&&this.model._circuit.unmonitor(n.triggerId),this._settingsFor.delete(r)}_createRow(t){const r=Nl(t),n=this._settingsFor.get(r),i=this.model._circuit._display3vl,s=t.get("bits")>1?this._baseSelectorMarkup instanceof Function?this._baseSelectorMarkup(i,t.get("bits"),n.base):this._baseSelectorMarkup:"",o=t.get("bits")>1?this._busTriggerMarkup:this._bitTriggerMarkup,a=Nt('<tr><td class="name"></td><td>'+s+"</td><td>"+o+"</td><td>"+this._removeButtonMarkup+'</td><td><canvas class="wavecanvas" height="30" draggable="true"></canvas></td></tr>');return a.attr("wireid",r),a.children("td").first().text(tye(t)),a}}let nye=0;class jbe extends ii.View{initialize(t){this._idnum=nye++,this._inputPanelMarkup=t.inputPanelMarkup||'<div data-iopanel="input"></div>',this._outputPanelMarkup=t.outputPanelMarkup||'<div data-iopanel="output"></div>',this._baseSelectorMarkup=t.baseSelectorMarkup||FT,this._labelMarkup=t.labelMarkup||"<label></label>",this._buttonMarkup=t.buttonMarkup||'<input type="checkbox">',this._lampMarkup=t.lampMarkup||'<input type="checkbox">',this._rowMarkup=t.rowMarkup||"<div></div>",this._colMarkup=t.colMarkup||"<div></div>",this._inputMarkup=t.inputMarkup||'<input type="text">',this.render(),this.listenTo(this.model._graph,"add",this._handleAdd),this.listenTo(this.model._graph,"remove",this._handleRemove),this.listenTo(this.model,"display:add",()=>{this.render()})}render(){this.$el.html('<form onsubmit="return false">'+this._inputPanelMarkup+this._outputPanelMarkup+"</form>");for(const t of this.model.getInputCells())this._handleAddInput(t);for(const t of this.model.getOutputCells())this._handleAddOutput(t)}shutdown(){this.$el.off(),this.stopListening()}_id(t){return"iopanel-"+t+"-"+this._idnum}_handleAdd(t){t.isInput?this._handleAddInput(t):t.isOutput&&this._handleAddOutput(t)}_addLabel(t,r){return Nt(this._labelMarkup).appendTo(t).find("label").addBack("label").text(r.get("net")||r.get("label"))}_addLabelFor(t,r){return this._addLabel(t,r).attr("for",this._id(r.id))}_handleAddInput(t){const r=this.model._display3vl,n=Nt(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabelFor(n,t);const i=Nt(this._colMarkup).appendTo(n);if(t.get("mode")==1){const o=Nt(this._buttonMarkup).appendTo(i).find("input").addBack("input").attr("id",this._id(t.id)).on("click",u=>{t.setInput(et.fromBool(u.target.checked))}),a=(u,c)=>{o.prop("checked",c.out.isHigh)};this.listenTo(t,"change:outputSignals",a),a(t,t.get("outputSignals"))}else{const s=Nt(this._inputMarkup).appendTo(i);let o="hex";Nt(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);let a=r.size(o,t.get("bits"));const u=t.get("bits"),c=s.find("input").addBack("input").prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)).on("change",h=>{r.validate(o,h.target.value,u)&&t.setInput(r.read(o,h.target.value,u))}),f=(h,v)=>{s.val(r.show(o,v.out))};this.listenTo(t,"change:outputSignals",f),f(t,t.get("outputSignals")),n.on("input","select[name=base]",h=>{o=h.target.value,a=r.size(o,t.get("bits")),c.prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)),f(t,t.get("outputSignals"))})}}_handleAddOutput(t){const r=this.model._display3vl,n=Nt(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabel(n,t);const i=Nt(this._colMarkup).appendTo(n);if(t.get("bits")==1){const o=Nt(this._lampMarkup).appendTo(i).find("input").addBack("input").prop("disabled",!0),a=(u,c)=>{const f=u.getOutput();o.prop("checked",f.isHigh),o.prop("indeterminate",!f.isDefined)};this.listenTo(t,"change:inputSignals",a),a(t,t.get("inputSignals"))}else{const s=Nt(this._inputMarkup).appendTo(i);let o="hex";Nt(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);const a=r.size(o,t.get("bits")),u=s.find("input").addBack("input").prop("disabled",!0).prop("size",a),c=(f,h)=>{const v=f.getOutput();s.val(r.show(o,v))};this.listenTo(t,"change:inputSignals",c),c(t,t.get("inputSignals")),n.on("input","select[name=base]",f=>{o=f.target.value,u.prop("size",r.size(o,t.get("bits"))),c(t,t.get("inputSignals"))})}}_handleRemove(t){this.stopListening(t)}}m9.sorting.APPROX,new T9;function OH(e){let t=new Array;return Object.keys(e).forEach(r=>{const[n,i,s]=r.split("_");e[r].forEach(([o,a])=>{const u={from:{id:`${i}_${s}`,port:n},name:`${r}-${a}`,to:{id:o,port:a.split("_")[0]}};t.push(u)})}),t}function iye(e){e.devices=e.devices;var t=[],r=[];return Object.keys(e.devices).forEach(n=>{var i=e.devices[n];i.type=="Button"?(i.type="Input",t.push(i)):i.type=="Lamp"&&(i.type="Output",r.push(i))}),t.sort((n,i)=>n.position&&i.position?n.position.y-i.position.y:0),t.forEach((n,i)=>{n.net=`in${i+1}`}),r.sort((n,i)=>n.position&&i.position?n.position.y-i.position.y:0),r.forEach((n,i)=>{n.net=`out${i+1}`}),{devices:e.devices,connectors:OH(e.connectors),subcircuits:e.subcircuits}}function IH(e,t){let r=t||{};return e.forEach(n=>{var i=localStorage.getItem(n);i?(r[n]=iye(JSON.parse(i)),IH(r[n].subcircuits,r)):alert(`Subcircuit not found: ${n}`)}),r}function sye(e,t){let r={},n={};return Object.keys(e).forEach(i=>{if(e[i].type=="TunnelInput"){let s=e[i].celltype;e[i].type="Repeater";let o=e[i];s in r&&alert("Multiple tunnel inputs with same name"),r[s]=o}}),Object.keys(e).forEach(i=>{if(e[i].type=="TunnelOutput"){let s=e[i].celltype;e[i].type="Repeater";let o=e[i];s in n?n[s].push(o):n[s]=[o]}}),Object.keys(r).forEach(i=>{Object.keys(t).forEach(s=>{t[s].forEach((a,u)=>{a[0]==r[i].label})}),t[`out_${r[i].label}`]=[],n[i].forEach(s=>{t[`out_${r[i].label}`].push([s.label,`in_${s.label}`])})}),{devices:e,connections:t}}class RH extends wH{constructor(t,r){const{devices:n,connections:i}=sye(structuredClone(t.devices),structuredClone(t.connectors)),s=OH(i),o=IH(t.subcircuits),a={devices:n,connectors:s,subcircuits:o};console.log(a),super(a,r),console.log("CustomHeadlessCircuit Initialized")}}let oye=Ta.ones(1),aye=Ta.zeros(1),xs=Ve(null),bh=bn(!1);const Vs=()=>A(bh);let md=bn(0);const uye=()=>A(md);Object.defineProperty(RH.prototype,"running",{get(){return!1}});function cye(e){A(bh)?(console.log("Simulation Stopped"),xs.set(null),pe(md,0),pe(bh,!1)):(console.log("Simulation Started"),pe(bh,!0),st(xs)===null&&(console.log(st(Sn)),xs.set(new RH(st(Sn)))),kH(e))}function kH(e){if(A(bh)===!1)return;const t=st(xs);if(t===null){console.log("impossible");return}t.updateGates(),pe(md,t.tick,!0),setTimeout(()=>kH(e),e)}function lye(e,t){let r=e==null?void 0:e.findWireByLabel(t);return r||(console.warn("Wire not created yet on headless circuit creation or update"),null)}function fye(e){let t;return e.attributes.signal?(e.attributes.signal._avec[0]==e.attributes.signal._bvec[0]?t=e.attributes.signal._avec[0]:t=-1,t):-1}function hye(){if(xs==null){console.log("Circuit is null");return}const e=st(xs);if(e===null){console.log("impossible");return}e.updateGates(),pe(md,e.tick,!0)}function dye(){if(xs==null){console.log("Circuit is null");return}const e=st(xs);if(e===null){console.log("impossible");return}e.updateGatesNext(),pe(md,e.tick,!0)}function pye(e){let t;if(xs==null){console.log("Circuit is null");return}const r=st(xs);if(r===null){console.log("impossible");return}t=r.getLabelIndex().devices[e].attributes.outputSignals.out._avec[0],t==1?r.setInput(e,aye):r.setInput(e,oye)}function YT(e){return[...e].find(r=>/^(in\d+|in_|out_)/.test(r))||null}function vye(e,t){const r=(u,c)=>u.startsWith(c),n=u=>r(u,"in"),i=u=>r(u,"out"),s=u=>({isInput:n(u),isOutput:i(u)}),{a1:o,a2:a}={a1:s(e),a2:s(t)};return o.isInput&&a.isOutput?"good_in_to_out":a.isInput&&o.isOutput?"good_out_to_in":o.isInput&&a.isInput?"bad_dual_input":"bad_dual_output"}function gye(e,t){const[r,,]=e.split("_"),n=r.startsWith("out")&&e||t,i=r.startsWith("in")?e:t;return{fromOutputId:n,toInputId:i}}function mye(e,t){const r=(s,o)=>s+"-"+o,{fromOutputId:n,toInputId:i}=gye(e,t);return Sn.addConnection(n,i),r(n,i)}function yye(e,t){const r=YT(e);if(r===null)return"bad_invalid_drop";const n=[...e].find(o=>o==="linked"),i=vye(t,r);if(i.startsWith("bad"))return i;const s=o=>o.startsWith("in");return n&&s(r)?"bad_input_already_linked":n&&!s(t)?"good_output_multi_wires":`${i}-${r}`}function r7(e,t,r=Nbe){const n=yye(t,e);if(n.startsWith("bad"))return n;const i=YT(t),s=mye(e,i);return r(s),s}function _ye(e,t,r){const n="."+e+"_"+t,i=document.querySelector(`${n}`);if(console.assert(i!==null,"could not find Anchor class when setting anchor colors while running"),i===null)return;const s=(h,v)=>h.classList.contains(v),o=h=>s(h,"on"),a=h=>s(h,"off"),u=h=>[a(h),o(h)],[c,f]=u(i);r===1&&c?(i.classList.remove("off"),i.classList.add("on")):r===0&&f?(i.classList.remove("on"),i.classList.add("off")):r===-1?(i.classList.remove("on"),i.classList.remove("off")):!c&&!f&&i.classList.add(r===1?"on":"off")}function Dg(e){return console.assert(e!==null,"A wire was mounted with an empty edgeWrapper binding, maybe it hasn't loaded yet"),e==null?void 0:e.parentElement}function bye(e){var r;const t=Dg(e);return console.assert(t,"edge Wrapper is not null but edgeWrapper binding has no parentElement"),((r=e==null?void 0:e.parentElement)==null?void 0:r.childNodes)??null}const wye=e=>{const t=e.indexOf("-")+1,r=e.indexOf("/");return e.substring(t,r)};function MH(e){const t=bye(e);return t&&Array.from(t).find(n=>n.role==="presentation")||null}function LH(e,t){var i;const r=(i=MH(e))==null?void 0:i.getAttribute("id");if(!r)throw new Error("No ID found on the edgeNode");return[t+"-"+wye(r),r]}const xye="http://www.w3.org/2000/svg",Fg=[".handle1",".handle2",".end_point1",".end_point2","#controlPoint1","#controlPoint2"],Ii=Fg.map(e=>e.substring(1));function Xl(e,t){const r=document.createElementNS(xye,e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.setAttribute(n,t[n]);return r}function n7(e,t,r,n="control-line"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(t==null?void 0:t.x)||isNaN(t==null?void 0:t.y)?(console.error("Invalid coordinates provided to createHandleLine:",e,t),Xl("line",{class:r+" "+n,x1:"0",y1:"0",x2:"0",y2:"0"})):Xl("line",{class:r+" "+n,x1:e.x.toString(),y1:e.y.toString(),x2:t.x.toString(),y2:t.y.toString()})}function i7(e,t,r=6,n="end-point"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r)?(console.error("Invalid parameters provided to createEndPointCircle:",e,r),Xl("circle",{class:t+" "+n,cx:"0",cy:"0",r:"6"})):Xl("circle",{class:t+" "+n,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()})}function s7(e,t,r=10,n="control-point"){if(isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r))return console.error("Invalid parameters provided to createControlPointCircle:",e,r),Xl("circle",{class:n,cx:"0",cy:"0",r:"6"});const i=Xl("circle",{class:n,id:t,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()});return i.style.touchAction="none",i}function o7(e){if(!e||typeof e!="string"||e.trim()==="")return console.warn("parseCubicBezierD received invalid input:",e),null;let t="";const r=e.indexOf("M");t=e.substring(r+1).replace("C","");const n=t.split(" ").reduce((i,s)=>(s=s.trim(),s!==""&&(s.endsWith(",")&&(s=s.slice(0,-1)),i.push(s)),i),[]);try{const i={p0:{x:parseFloat(n[0]),y:parseFloat(n[1])},p1:{x:parseFloat(n[2]),y:parseFloat(n[3])},p2:{x:parseFloat(n[4]),y:parseFloat(n[5])},p3:{x:parseFloat(n[6]),y:parseFloat(n[7])}};return isNaN(i.p0.x)||isNaN(i.p0.y)||isNaN(i.p1.x)||isNaN(i.p1.y)||isNaN(i.p2.x)||isNaN(i.p2.y)||isNaN(i.p3.x)||isNaN(i.p3.y)?(console.error("Parsed coordinates resulted in NaN:",e,i),null):i}catch(i){return console.error("Error parsing numbers from path data:",e,i),null}}function NH(e){const t=Dg(e);if(!t)throw new Error("Wire is not god");Fg.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display="none")})}function Sye(e){const t=Dg(e);if(!t)throw new Error("Wire is not god");Fg.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display=n.style.display==="none"?"":"none")})}function a7(e,t,r=""){var E,O,N,d,C,R,k,B,z,U;const n=r!==""&&o7(r)||null;let i=e.getAttribute("d")&&o7(e.getAttribute("d"));if(!i)return console.log("unable to parse path"),null;const s=Dg(e);if(!s)throw new Error("Wire is not god");const o=new Map(Fg.map(Y=>[Y.substring(1),s.querySelector(Y)||null]));let a=new Map([[Ii[0],o.get(Ii[0])||n7(i.p0,i.p1,"handle1")],[Ii[1],o.get(Ii[1])||n7(i.p3,i.p2,"handle2")],[Ii[2],o.get(Ii[2])||i7((n==null?void 0:n.p0)||i.p0,"end_point1")],[Ii[3],o.get(Ii[3])||i7((n==null?void 0:n.p3)||i.p3,"end_point2")],[Ii[4],o.get(Ii[4])||s7((n==null?void 0:n.p1)||i.p1,"controlPoint1")],[Ii[5],o.get(Ii[5])||s7((n==null?void 0:n.p2)||i.p2,"controlPoint2")]]);const u=a.get(Ii[2]),c=a.get(Ii[4]),f=a.get(Ii[5]);if(u){const Y=u.getAttribute("cx"),oe=u.getAttribute("cy"),W=(n==null?void 0:n.p0.x.toString())||i.p0.x.toString(),D=(n==null?void 0:n.p0.y.toString())||i.p0.y.toString();u.setAttribute("cx",W),u.setAttribute("cy",D);const F=parseFloat(W)-parseFloat(Y||""),H=parseFloat(D)-parseFloat(oe||"");c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+F)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+H)),f==null||f.setAttribute("cx",String(parseFloat(f.getAttribute("cx")||"0")+F)),f==null||f.setAttribute("cy",String(parseFloat(f.getAttribute("cy")||"0")+H))}const h=a.get(Ii[3]);if(h){const Y=h.getAttribute("cx"),oe=h.getAttribute("cy"),W=(n==null?void 0:n.p3.x.toString())||i.p3.x.toString(),D=(n==null?void 0:n.p3.y.toString())||i.p3.y.toString();h.setAttribute("cx",W),h.setAttribute("cy",D);const F=parseFloat(W)-parseFloat(Y||""),H=parseFloat(D)-parseFloat(oe||"");c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+F)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+H)),f==null||f.setAttribute("cx",String(parseFloat(f.getAttribute("cx")||"0")+F)),f==null||f.setAttribute("cy",String(parseFloat(f.getAttribute("cy")||"0")+H))}for(const Y of Ii)s.appendChild(a.get(Y));let v=null,y={x:0,y:0},m={p0:{x:parseFloat((E=a.get("end_point1"))==null?void 0:E.getAttribute("cx")),y:parseFloat((O=a.get("end_point1"))==null?void 0:O.getAttribute("cy"))},p1:{x:parseFloat((N=a.get("controlPoint1"))==null?void 0:N.getAttribute("cx")),y:parseFloat((d=a.get("controlPoint1"))==null?void 0:d.getAttribute("cy"))},p2:{x:parseFloat((C=a.get("controlPoint2"))==null?void 0:C.getAttribute("cx")),y:parseFloat((R=a.get("controlPoint2"))==null?void 0:R.getAttribute("cy"))},p3:{x:parseFloat((k=a.get("end_point2"))==null?void 0:k.getAttribute("cx")),y:parseFloat((B=a.get("end_point2"))==null?void 0:B.getAttribute("cy"))}};function _(){var oe,W,D,F,H,ie,se,we;const Y=`M ${m.p0.x} ${m.p0.y} C ${m.p1.x} ${m.p1.y}, ${m.p2.x} ${m.p2.y}, ${m.p3.x} ${m.p3.y}`;if(e.setAttribute("d",Y),!a.get("handle1")||!a.get("handle2"))return console.warn("no handles on the edge you tried to update"),null;(oe=a.get("handle1"))==null||oe.setAttribute("x1",m.p0.x.toString()),(W=a.get("handle1"))==null||W.setAttribute("y1",m.p0.y.toString()),(D=a.get("handle1"))==null||D.setAttribute("x2",m.p1.x.toString()),(F=a.get("handle1"))==null||F.setAttribute("y2",m.p1.y.toString()),(H=a.get("handle2"))==null||H.setAttribute("x1",m.p3.x.toString()),(ie=a.get("handle2"))==null||ie.setAttribute("y1",m.p3.y.toString()),(se=a.get("handle2"))==null||se.setAttribute("x2",m.p2.x.toString()),(we=a.get("handle2"))==null||we.setAttribute("y2",m.p2.y.toString())}function x(Y){var F,H,ie,se;if(!e)return console.warn("no svg found on get mouse position"),null;const oe=e.getScreenCTM();if(!oe)return{x:0,y:0};const W=Y.clientX??((H=(F=Y.touches)==null?void 0:F[0])==null?void 0:H.clientX),D=Y.clientY??((se=(ie=Y.touches)==null?void 0:ie[0])==null?void 0:se.clientY);return W===void 0||D===void 0?(console.warn("Could not get clientX/Y from event:",Y),null):{x:(W-oe.e)/oe.a,y:(D-oe.f)/oe.d}}function S(Y){if(Y.type==="mousedown"&&Y.preventDefault(),Y.target.classList.contains("control-point")){v=Y.target;const oe=x(Y);if(!oe)return;y.x=oe.x-parseFloat(v.getAttribute("cx")),y.y=oe.y-parseFloat(v.getAttribute("cy")),document.addEventListener("mousemove",P),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("mouseup",T),document.addEventListener("touchend",T),document.addEventListener("mouseleave",T)}}function P(Y){if(v){Y.type==="touchmove"&&Y.preventDefault();const oe=x(Y);if(!oe)return;const W=oe.x-y.x,D=oe.y-y.y;v.setAttribute("cx",W.toString()),v.setAttribute("cy",D.toString()),v.id==="controlPoint1"?(m.p1.x=W,m.p1.y=D):v.id==="controlPoint2"?(m.p2.x=W,m.p2.y=D):console.warn("reached error"),_()}}function T(Y){const oe=`M ${m.p0.x} ${m.p0.y} C ${m.p1.x} ${m.p1.y}, ${m.p2.x} ${m.p2.y}, ${m.p3.x} ${m.p3.y}`;t(oe),v&&(console.log("Ended manipulation drag"),document.removeEventListener("mousemove",P),document.removeEventListener("touchmove",P),document.removeEventListener("mouseup",T),document.removeEventListener("touchend",T),document.removeEventListener("mouseleave",T),v=null)}(z=a.get("controlPoint1"))==null||z.addEventListener("mousedown",S),(U=a.get("controlPoint2"))==null||U.addEventListener("mousedown",S),_()}let eh=Ve(localStorage.getItem("manipulations")&&JSON.parse(localStorage.getItem("manipulations")||"{}")||{});var Eye=(e,t,r,n,i,s)=>{e.preventDefault(),!(!A(t)||!A(r))&&(A(t)in n()||(dn(i,Tt(n)[A(t)]=["",!1],Tt(n)),dn(i,Tt(n)[A(t)][0]=s.currentPath,Tt(n)),dn(i,Tt(n)[A(t)][1]=!1,Tt(n))),dn(i,Tt(n)[A(t)][1]=!n()[A(t)][1],Tt(n)),St(i,n()),Sye(A(r)))},Aye=(e,t,r,n,i)=>{e.preventDefault();const s=MH(A(t));!s||!A(t)||(NH(A(t)),A(r)&&(delete n()[A(r)],St(i,n())),A(t).setAttribute("d",s.getAttribute("d")))},Tye=vn('<path id="bezierCurve" role="presentation"></path>');function Pye(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(eh,"$wireManipulationStore",r);let s=bn(null);const o=(c,f)=>{if(f==="")return console.warn("tried to save manipulations for empty wire id"),null;JSON.stringify(i())!==JSON.stringify(c)&&(dn(eh,Tt(i)[f][0]=c,Tt(i)),St(eh,i()))};let a=bn(void 0);An(()=>{if(pe(a,LH(A(s),t.initAncId)[0],!0),t.monitorWire(A(a)),!A(s))return;let c="";A(a)in i()&&(c=i()[A(a)][0],a7(A(s),f=>o(f,A(a)||""),c),i()[A(a)][1]||NH(A(s)))}),Fu(()=>{t.currentPath&&A(s)&&A(a)&&A(a)in i()&&(a7(A(s),c=>o(c,A(a)||""),t.currentPath),localStorage.setItem("manipulations",JSON.stringify(i())))});var u=Tye();u.__click=[Eye,a,s,i,eh,t],u.__contextmenu=[Aye,s,a,i,eh],Gs(u,c=>pe(s,c),()=>A(s)),It(()=>{ht(u,"d",t.currentPath),on(u,0,y2(t.wireActive===-1?"":t.wireActive===1?"on":"off"),"svelte-15cv7c7")}),De(e,u),ir(),n()}$u(["click","contextmenu"]);var Cye=vn("<path></path>");function Oye(e,t){nr(t,!0);let r=bn(null);An(()=>{let[i,s]=LH(A(r),t.initAncId);t.monitorWire(i)});var n=Cye();Gs(n,i=>pe(r,i),()=>A(r)),It(()=>{on(n,0,y2(t.wireActive===-1?"hit-area":t.wireActive===1?"hit-area on":"hit-area off"),"svelte-1gi7ewc"),ht(n,"d",t.currentPath)}),De(e,n),ir()}var Iye=vn('<svg><path fill="currentColor" d="m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zM11 20h1.975l.35-2.65q.775-.2 1.438-.587t1.212-.938l2.475 1.025l.975-1.7l-2.15-1.625q.125-.35.175-.737T17.5 12t-.05-.787t-.175-.738l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.212-.962t-1.438-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.55.575 1.213.963t1.437.587zm1.05-4.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5M12 12"></path></svg>');function Rye(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=Iye();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}let io=Ve({wireType:localStorage.getItem("wireType")||"step",theme:localStorage.getItem("theme")==="dark"?"dark":"light",useTapUpdate:JSON.parse(localStorage.getItem("useTapUpdate")||"true"),useCarry:JSON.parse(localStorage.getItem("useCarry")||"true")});var kye=(e,t,r)=>{dn(r,Tt(t).wireType="bezier",Tt(t))},Mye=(e,t,r)=>{dn(r,Tt(t).wireType="step",Tt(t))},Lye=(e,t,r)=>{dn(r,Tt(t).wireType="straight",Tt(t))},Nye=(e,t)=>pe(t,!A(t)),qye=(e,t)=>{e.stopPropagation(),pe(t,!1)},Dye=Gt('<div class="modal svelte-1llzl1q"><h2 class="svelte-1llzl1q">Settings</h2> <div style="display:flex;justify-content:center;align-items:center;" class="svelte-1llzl1q"><p style="margin-right:auto" class="svelte-1llzl1q">Default Wires:</p> <select id="wire-type-select" class="svelte-1llzl1q"><option>Bezier</option><option>Step</option><option>Straight</option></select></div> <div class="svelte-1llzl1q"><p class="svelte-1llzl1q">Theme:</p> <select id="theme-select" class="svelte-1llzl1q"><option>Light</option><option>Dark</option></select></div> <div style="display: flex;flex-direction: column;align-items:flex-start;margin-bottom:-5px" class="svelte-1llzl1q"><label style="display:flex;align-items:center"><input style="margin-right:5px;margin-top:2px" type="checkbox"> Tap Anchor to Update Wire Type</label> <label style="display:flex;align-items:center"><input style="margin-right:5px;margin-top:2px" type="checkbox">Carry Over Wire types</label></div> <div style="display:flex;flex-direction: row;justify-content: space-between;width: 100%;margin-bottom:-25px;margin-top:5px;" class="svelte-1llzl1q"><button class="kittyBtn svelte-1llzl1q"> </button> <button class="closeBtn svelte-1llzl1q">Close Menu</button></div> <br></div>'),Fye=Gt('<div class="wireTypeSelect svelte-1llzl1q" style="display: flex;flex-direction:column;align-items:flex-end;"><button>Curve</button> <button>Step</button> <button>Straight</button></div> <button class="launch-button svelte-1llzl1q"><!></button> <!>',1);function Bye(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(io,"$settingsStore",r);let s=bn(!1),o=bn(!1);io.subscribe(T=>{localStorage.setItem("wireType",T.wireType)}),Fu(()=>{localStorage.setItem("useCarry",i().useCarry),localStorage.setItem("useTapUpdate",i().useTapUpdate)}),Ds(i().wireType);var a=Fye(),u=_t(a),c=gt(u);let f;c.__click=[kye,i,io];var h=at(c,2);let v;h.__click=[Mye,i,io];var y=at(h,2);let m;y.__click=[Lye,i,io];var _=at(u,2);_.__click=[Nye,s];var x=gt(_);Rye(x,{height:30,width:30});var S=at(_,2);{var P=T=>{var E=Dye(),O=at(gt(E),2),N=at(gt(O),2),d=gt(N);d.value=(d.__value="bezier")==null?"":"bezier";var C=at(d);C.value=(C.__value="step")==null?"":"step";var R=at(C);R.value=(R.__value="straight")==null?"":"straight";var k=at(O,2),B=at(gt(k),2),z=gt(B);z.value=(z.__value="light")==null?"":"light";var U=at(z);U.value=(U.__value="dark")==null?"":"dark";var Y=at(k,2),oe=gt(Y),W=gt(oe),D=at(oe,2),F=gt(D),H=at(Y,2),ie=gt(H);ie.__click=()=>{const ge=document.querySelector("#kitty");ge?A(o)?(ge.style.display="none",pe(o,!1)):(ge.style.display="unset",pe(o,!0)):(herekittykittykitty("Furnando"),pe(o,!0))};var se=gt(ie),we=at(ie,2);we.__click=[qye,s],It(()=>Bi(se,A(o)?"Despawn Kitty":"KITTY")),sO(N,()=>i().wireType,ge=>dn(io,Tt(i).wireType=ge,Tt(i))),sO(B,()=>i().theme,ge=>dn(io,Tt(i).theme=ge,Tt(i))),iO(W,()=>i().useTapUpdate,ge=>dn(io,Tt(i).useTapUpdate=ge,Tt(i))),iO(F,()=>i().useCarry,ge=>dn(io,Tt(i).useCarry=ge,Tt(i))),De(T,E)};Kt(S,T=>{A(s)&&T(P)})}It((T,E,O)=>{f=on(c,1,"wire-btn wire-bez svelte-1llzl1q",null,f,T),v=on(h,1,"wire-btn wire-step svelte-1llzl1q",null,v,E),m=on(y,1,"wire-btn wire-str svelte-1llzl1q",null,m,O)},[()=>({activeType:i().wireType==="bezier"}),()=>({activeType:i().wireType==="step"}),()=>({activeType:i().wireType==="straight"})]),De(e,a),ir(),n()}$u(["click"]);const zye=[-5,35.43];function Vye(e,t){let r=document.querySelector(`#N-${e} svg.LampSVG`);r!==null&&r.setLampState(t)}var Gye=Gt('<div style="min-width: 85px !important;"><svg width="85" height="65" viewBox="-12 0 95 100" xmlns="http://www.w3.org/2000/svg"><line x1="-50" x2="5" y1="45" y2="45" stroke-width="8"></line><circle cx="50" cy="50" r="45" stroke-width="7"></circle></svg></div> <!>',1);function $ye(e,t){nr(t,!0),he(t,"width",3,80),he(t,"height",3,50);let r=bn(!1),n=qn(()=>({fill:Vs()?A(r)?"green":"red":"gray",stroke:Vs()?A(r)?"var(--lime-green)":"var(--lime-red)":"lightgray"}));function i(v){pe(r,v==1)}let s;An(()=>{Object.assign(s,{setLampState:i})}),xs.subscribe(v=>{if(v===null){pe(r,!1);return}});var o=Gye(),a=_t(o),u=gt(a);on(u,0,"LampSVG");var c=gt(u),f=at(c);Gs(u,v=>s=v,()=>s);var h=at(a,2);Bo(h,{io:"input",ioId:"",get id(){return t.nodeId},side:"west",offset:zye}),It(()=>{ht(c,"stroke",A(n).stroke),ht(f,"fill",A(n).fill),ht(f,"stroke",A(n).stroke)}),De(e,o),ir()}let Ha=Ve({}),Cu=Ve({type:"",id:""}),a2=Ve(!1);function Uye(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(io,"$settingsStore",r),s=()=>Be(Ha,"$wireSaveData",r),o=()=>Be(Sn,"$CircuitStore",r),a=()=>Be(Cu,"$lastDel",r),u=()=>Be(a2,"$handleDisconnect",r),c=()=>Be(xs,"$CircuitEngine",r);let f=bn(-1),h=bn(""),v=he(t,"wireType",23,()=>i().wireType);Object.keys(s()).length===0&&(St(Ha,o().wireManipulations),St(Ha,s()));async function y(E){var N,d;console.log("Mouse up target class:"),((d=Array.from((N=E.target)==null?void 0:N.classList))==null?void 0:d.includes("custom_anchor"))||(dn(Cu,Tt(a).type="",Tt(a)),dn(Cu,Tt(a).id="",Tt(a)),St(Cu,a()),m&&Ha.update(C=>(delete C[A(h)],C))),window.removeEventListener("mouseup",y,{capture:!0})}const m=!i().useTapUpdate,_=!i().useCarry;au(async()=>{u()&&A(h)!==""&&!A(h).includes("cursor")&&A(h)in s()&&(Cu.update(()=>({type:v(),id:A(h)})),window.addEventListener("mouseup",y,{capture:!0}),m||Ha.update(E=>(delete E[A(h)],E)),St(a2,!1))}),Fu(()=>{if(A(h)!==""&&!A(h).includes("cursor")){if(!(A(h)in s())){if(a().type!==""&&u()===!1){dn(Ha,Tt(s)[A(h)]=_?i().wireType:a().type,Tt(s)),v(s()[A(h)]),Ha.update(E=>(delete E[a().id],E)),dn(Cu,Tt(a).type="",Tt(a)),dn(Cu,Tt(a).id="",Tt(a)),St(Cu,a());return}dn(Ha,Tt(s)[A(h)]=i().wireType,Tt(s))}v(s()[A(h)])}});function x(E,O=N=>pe(h,N,!0)){if(!E||(O(E),E.includes("cursor")))return null;(c()!==null&&S(c())||(()=>null))()}function S(E,O=N=>pe(f,N,!0)){const N=lye(E,A(h));return N===null?void 0:()=>E.monitorWire(N,C=>{var Y;const R=fye(N);O(R);const{id:k,port:B,magnet:z}=(Y=N.attributes)==null?void 0:Y.target;if(!k||!B)return;if(_ye(B,k,R),!(k&&E.getLabelIndex().outputs[k]))return null;Vye(k,R)})}xs.subscribe(E=>{if(E===null){pe(f,-1);return}(E!==null&&S(E)||(()=>null))()}),Ha.subscribe(E=>{dn(Sn,Tt(o).wireManipulations=E,Tt(o)),St(Sn,o())});const P=qn(()=>v()==="straight"),T=qn(()=>v()==="step");IE(e,{get straight(){return A(P)},get step(){return A(T)},children:bv,$$slots:{default:(E,O)=>{const N=qn(()=>O.path);qn(()=>O.destroy),qn(()=>O.hovering);var d=Ut(),C=_t(d);{var R=B=>{Pye(B,{get initAncId(){return t.initAncId},get currentPath(){return A(N)},get wireActive(){return A(f)},monitorWire:x})},k=(B,z)=>{{var U=Y=>{Oye(Y,{get initAncId(){return t.initAncId},get currentPath(){return A(N)},get wireActive(){return A(f)},monitorWire:x})};Kt(B,Y=>{(v()==="step"||v()==="straight")&&Y(U)},z)}};Kt(C,B=>{v()==="bezier"?B(R):B(k,!1)})}De(E,d)}}}),ir(),n()}var jye=Gt("<div></div>");function Hye(e,t){nr(t,!0);const[r,n]=Xr();let i=he(t,"io",3,"output"),s=bn("");const o=h=>{function v(y){y.preventDefault(),y.stopPropagation(),pe(s,r7(h,y.target.classList),!0),document.removeEventListener("mousedown",v,!0)}return v};function a(h){const v=o(h);document.addEventListener("mousedown",v,!0)}function u(h){const v=YT(h.target.classList);v!==null&&v===t.anchorId?a(v):pe(s,r7(t.anchorId,h.target.classList),!0),document.removeEventListener("mouseup",u,!0)}Fu(()=>{t.connecting&&document.addEventListener("mouseup",u,!0)});var c=jye();let f;It(h=>f=on(c,1,`custom_anchor ${i()==="input"&&"input"||"output"} ${t.anchorId??""}`,"svelte-1dytm7c",f,h),[()=>({linked:t.linked,hovering:t.hovering,connecting:t.connecting})]),ar("mousedown",c,h=>{h.preventDefault(),t.linked&&i()==="input"&&!Vs()&&(Sn.removeConnection(t.anchorId),St(a2,!0))},!0),De(e,c),ir(),n()}let yE=Ve([]);function Wye(e,t){switch(e){case"north":t+=90;break;case"east":t+=180;break;case"south":t+=270;break}switch(t%=360,t){case 0:return"west";case 90:return"north";case 180:return"east";case 270:return"south";default:return"west"}}var Xye=Gt("<div><!></div>");function Bo(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(c,"$rotation",r),s=m=>{var _=Xye(),x=gt(_);const S=qn(()=>Wye(t.side,i())),P=qn(()=>t.io==="output"&&!0||!1),T=qn(()=>t.io==="input"&&!0||!1),E=qn(Vs);ah(x,{id:u,key:u,get direction(){return A(S)},get output(){return A(P)},get input(){return A(T)},get locked(){return A(E)},get connections(){return t.connections},children:bv,$$slots:{default:(O,N)=>{const d=qn(()=>N.linked),C=qn(()=>N.hovering),R=qn(()=>N.connecting);Hye(O,{get io(){return t.io},get connecting(){return A(R)},get linked(){return A(d)},anchorId:u,get hovering(){return A(C)}})},edge:(O,N)=>{Uye(O,{initAncId:u,slot:"edge"})}}}),It(()=>Nr(_,`position:absolute;left: ${o()[0]}${a()?"px":"%"}; top: ${o()[1]}${a()?"px":"%"};`)),De(m,_)};let o=he(t,"offset",19,()=>[]),a=he(t,"usePixelOffset",3,!1);const u=`${t.io==="input"?"in":"out"}${t.ioId}_${t.id}`,c=gr("rotation");c.subscribe(()=>{let m=xte(u);m&&yE.update(_=>[..._,m])});let f=bn(!1),h=!1;An(()=>{yE.subscribe(m=>{m.includes(u)&&!h&&(h=!0,setTimeout(()=>{pe(f,!A(f)),yE.update(()=>m.filter(_=>_!==u)),h=!1}))})});var v=Ut(),y=_t(v);Ah(y,i,m=>{var _=Ut(),x=_t(_);{var S=T=>{s(T)},P=T=>{var E=Ut(),O=_t(E);Ah(O,()=>A(f),N=>{s(N)}),De(T,E)};Kt(x,T=>{t.io==="input"?T(S):T(P,!1)})}De(m,_)}),De(e,v),ir(),n()}const Yye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='500px'%20height='500px'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e",Kye="data:image/svg+xml,%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NAND%20Gate%20Body%20--%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105z'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='151'%20width='71'%20height='18'%20fill='%23000000'/%3e%3crect%20x='16'%20y='343'%20width='71'%20height='18'%20fill='%23000000'/%3e%3c!--%20Output%20Circle%20(Inverter)%20--%3e%3ccircle%20cx='384'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='112'%20height='18'%20fill='%23000000'/%3e%3c/svg%3e",Jye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20OR%20Gate%20Body%20with%20Smooth%20Curves%20and%20Proportions%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='12'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='12'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='100'%20height='18'%20fill='black'/%3e%3c/svg%3e",Zye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='460'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",Qye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Additional%20Back%20Curve%20for%20XOR%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XOR%20Gate%20Body%20(Same%20as%20OR%20Gate)%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",e_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Adjusted%20Back%20Curve%20to%20Intersect%20Input%20Lines%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XNOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='12'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='465'%20y='248'%20width='80'%20height='18'%20fill='black'/%3e%3c/svg%3e";function t_e(e){if(e.startsWith("data:image/svg+xml,"))return decodeURIComponent(e.replace("data:image/svg+xml,",""));throw new Error("svg format does not match expected format")}function qH(e){const t=new DOMParser;let r;try{r=t.parseFromString(t_e(e),"image/svg+xml")}catch(n){console.error("Error parsing SVG:",n),r=t.parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle">SVG Error</text></svg>',"image/svg+xml")}return r.documentElement}function DH(e){let t;return e.hasAttribute("viewBox")?t=e.getAttribute("viewBox"):(console.warn("svg passed in does not have a view box attribute"),t="10 100 490 312"),t}const _E={in1:[-7.5,68.5],in2:[-7.5,7.5],out:[100,37.58]},r_e={And:Yye,Nand:Kye,Or:Jye,Nor:Zye,Xor:Qye,Xnor:e_e};var n_e=vn('<svg class="circuitSvgContainer"></svg><!><!><!>',1);function i_e(e,t){nr(t,!0);let r=he(t,"width",3,80),n=he(t,"height",3,50),i=he(t,"gateType",3,"And"),s;An(()=>{const h=qH(r_e[i()]);s.setAttribute("viewBox",DH(h)),s.setAttribute("width",r().toString()),s.setAttribute("height",n().toString()),s.innerHTML=h.innerHTML});var o=n_e(),a=_t(o);Gs(a,h=>s=h,()=>s);var u=at(a);Bo(u,{io:"input",ioId:"1",get id(){return t.nodeId},side:"west",get offset(){return _E.in1}});var c=at(u);Bo(c,{io:"input",ioId:"2",get id(){return t.nodeId},side:"west",get offset(){return _E.in2}});var f=at(c);Bo(f,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return st(Sn).connectors["out_"+t.nodeId]},side:"east",get offset(){return _E.out}}),De(e,o),ir()}const s_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='30'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='470'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",o_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",u7={in:[-15,38.7],out:[100,38]},a_e={Not:s_e,Repeater:o_e};var u_e=vn('<svg class="circuitSvgContainer"></svg><!><!>',1);function c_e(e,t){nr(t,!0);let r=he(t,"width",3,80),n=he(t,"height",3,50),i=he(t,"gateType",3,"Not"),s;An(()=>{const f=qH(a_e[i()]);s.setAttribute("viewBox",DH(f)),s.setAttribute("width",r().toString()),s.setAttribute("height",n().toString()),s.innerHTML=f.innerHTML});var o=u_e(),a=_t(o);Gs(a,f=>s=f,()=>s);var u=at(a);Bo(u,{io:"input",ioId:"",get id(){return t.nodeId},side:"west",get offset(){return u7.in}});var c=at(u);Bo(c,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return st(Sn).connectors["out_"+t.nodeId]},side:"east",get offset(){return u7.out}}),De(e,o),ir()}const l_e=[95,40.4];function f_e(e,t,r){Vs()&&(pe(t,!A(t)),pye(r.nodeId))}var h_e=vn('<svg width="75" height="60" viewBox="-2 2 140 95" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100" height="100" fill="black" stroke-width="2"></rect><line x1="100" x2="190" y1="50" y2="50" stroke-width="8"></line><circle class="button-circle" role="presentation" cx="50" cy="50" r="30" aria-label="input button node toggle" stroke-width="7"></circle></svg><!>',1);function d_e(e,t){nr(t,!0),he(t,"width",3,80),he(t,"height",3,50);let r=bn(!1),n=qn(()=>({fill:Vs()?A(r)?"green":"red":"gray",stroke:Vs()?A(r)?"var(--lime-green)":"var(--lime-red)":"lightgray"}));xs.subscribe(f=>{if(f===null){pe(r,!1);return}});var i=h_e(),s=_t(i),o=gt(s),a=at(o),u=at(a);u.__click=[f_e,r,t];var c=at(s);Bo(c,{io:"output",ioId:"",get id(){return t.nodeId},get connections(){return st(Sn).connectors["out_"+t.nodeId]},side:"east",offset:l_e}),It(()=>{ht(o,"stroke",A(n).stroke),ht(a,"stroke",A(n).stroke),ht(u,"fill",A(n).fill),ht(u,"stroke",A(n).stroke)}),De(e,i),ir()}$u(["click"]);const th=15,Ou=5;var p_e=vn('<svg xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><rect x="0" y="0" fill="black"></rect><text x="50%" y="50%" text-anchor="middle" alignment-baseline="middle" textLength="80%" lengthAdjust="spacingAndGlyphs" font-size="200%" fill="white"> </text></svg><!><!>',1);function v_e(e,t){nr(t,!0);const r=100,n=(th+Ou)*Math.max(t.inputs,t.outputs)+Ou,i=(n-(th+Ou)*t.inputs+Ou)/2+1,s=(n-(th+Ou)*t.outputs+Ou)/2+1;var o=p_e(),a=_t(o);ht(a,"width",r),ht(a,"height",n),ht(a,"viewBox",`0 0 ${r} ${n??""}`);var u=gt(a);ht(u,"width",r),ht(u,"height",n);var c=at(u),f=gt(c),h=at(a);Pi(h,17,()=>({length:t.inputs}),Ka,(y,m,_)=>{const x=qn(()=>(_+1).toString());Bo(y,{io:"input",get ioId(){return A(x)},get id(){return t.nodeId},side:"west",offset:[-7.5,i+(th+Ou)*_],usePixelOffset:!0})});var v=at(h);Pi(v,17,()=>({length:t.outputs}),Ka,(y,m,_)=>{const x=qn(()=>(_+1).toString());Bo(y,{io:"output",get ioId(){return A(x)},get id(){return t.nodeId},get connections(){return st(Sn).connectors[`out${_+1}_`+t.nodeId]},side:"east",offset:[r-5,s+(th+Ou)*_],usePixelOffset:!0})}),It(()=>Bi(f,t.celltype)),De(e,o),ir()}var g_e=vn('<svg xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><rect x="0" y="0" fill="black"></rect><text x="50%" y="50%" text-anchor="middle" alignment-baseline="middle" textLength="80%" lengthAdjust="spacingAndGlyphs" font-size="200%" fill="white"> </text></svg><!>',1);function m_e(e,t){var i=g_e(),s=_t(i);ht(s,"width",80),ht(s,"height",50),ht(s,"viewBox","0 0 80 50");var o=gt(s);ht(o,"width",80),ht(o,"height",50);var a=at(o),u=gt(a),c=at(s);Bo(c,{io:"input",ioId:"",get id(){return t.nodeId},side:"west",offset:[-7.5,20],usePixelOffset:!0}),It(()=>Bi(u,t.celltype)),De(e,i)}var y_e=vn('<svg xmlns="http://www.w3.org/2000/svg" style="max-width:unset;"><rect x="0" y="0" fill="black"></rect><text x="50%" y="50%" text-anchor="middle" alignment-baseline="middle" textLength="80%" lengthAdjust="spacingAndGlyphs" font-size="200%" fill="white"> </text></svg><!>',1);function b_e(e,t){var i=y_e(),s=_t(i);ht(s,"width",80),ht(s,"height",50),ht(s,"viewBox","0 0 80 50");var o=gt(s);ht(o,"width",80),ht(o,"height",50);var a=at(o),u=gt(a),c=at(s);Bo(c,{io:"output",ioId:"",get id(){return t.nodeId},side:"east",offset:[75,20],usePixelOffset:!0}),It(()=>Bi(u,t.celltype)),De(e,i)}const xc=Ve({"Logic Gates":{svg:void 0,groupElements:[{name:"And",nodeType:"And",icon:ate},{name:"Nand",nodeType:"Nand",icon:dte},{name:"Or",nodeType:"Or",icon:cte},{name:"Nor",nodeType:"Nor",icon:lte},{name:"Xor",nodeType:"Xor",icon:fte},{name:"Xnor",nodeType:"Xnor",icon:hte},{name:"Not",nodeType:"Not",icon:pte},{name:"Repeater",nodeType:"Repeater",icon:ute}]},"Input/Output":{svg:void 0,groupElements:[{name:"Lamp",nodeType:"Lamp",icon:PE},{name:"Button",nodeType:"Button",icon:vO}]},Tunnels:{svg:void 0,groupElements:[{name:"Tunnel Input",nodeType:"TunnelInput",icon:PE},{name:"Tunnel Output",nodeType:"TunnelOutput",icon:vO}]},Subcomponents:{svg:void 0,groupElements:[]},GhostElement:{svg:void 0,groupElements:[]}});function w_e(e){switch(e){case"And":case"Nor":case"Xor":case"Xnor":case"Or":case"Nand":return i_e;case"Repeater":case"Not":return c_e;case"Button":return d_e;case"Lamp":return $ye;case"Subcircuit":return v_e;case"TunnelInput":return m_e;case"TunnelOutput":return b_e}}var x_e=Gt(' <img class="menu-item-icon">',1),S_e=Gt("<!> <!>",1),E_e=Gt("<!> <!>",1),A_e=Gt('<div class="menu svelte-1cqze2u"><!></div>'),T_e=Gt('<main><button class="menu-toggle-button svelte-1cqze2u">CMD Menu</button> <!></main>');function P_e(e,t){nr(t,!1);const r=Me();let n=Me(!1),i=Me(""),s=Me(""),o=null,a=!1,u=null,c=Me([]);function f(){pe(n,!A(n)),A(n)||(pe(c,[]),pe(i,""),u=null,a=!1)}function h(z){pe(c,[...A(c),z]),pe(i,""),pe(s,"")}function v(){A(c).length>0&&(pe(c,A(c).slice(0,-1)),pe(i,""),pe(s,""))}x2(()=>{if(A(n)){const z=document.querySelector(".cmdk-input");z instanceof HTMLInputElement&&z.focus()}});const y=Object.keys(xc).filter(z=>z!=="GhostElement").map(z=>({id:z,label:z}));An(()=>{window.addEventListener("keydown",z=>{console.log(`Key pressed: ${z.key}`),z.key==="-"?(console.log("Menu toggle triggered"),z.preventDefault(),f()):z.key==="Delete"?(console.log("Delete!"),_()()):z.key==="c"?x()():z.key==="v"&&S()()})});let m=he(t,"createCanvasDevice",8),_=he(t,"deletedSelectedNodes",8),x=he(t,"copySelectedNodes",8),S=he(t,"pasteNodes",8);function P(z){if(o)return;o=document.createElement("div"),o.className="drag-ghost",o.style.position="fixed",o.style.pointerEvents="none",o.style.left="0px",o.style.top="0px",o.style.zIndex="1000";const U=document.createElement("img");U.src=z.icon,U.alt=z.name,U.style.width="40px",U.style.opacity="0.7",o.appendChild(U),document.body.appendChild(o),window.addEventListener("mousemove",T)}function T(z){o&&(o.style.left=`${z.pageX}px`,o.style.top=`${z.pageY}px`)}function E(){o&&(o.remove(),o=null),window.removeEventListener("mousemove",T),a=!1}function O(z,U){a||(u=z,P(U),a=!0,console.log(`Dragging started for: ${z}`))}function N(z){if(a&&u){const U={x:z.pageX,y:z.pageY};console.log(`Creating node at position: ${U.x}, ${U.y}`),m()({...z,gateType:u}),u=null,E()}}function d(z,U){a||O(z,U)}An(()=>{window.addEventListener("mouseup",N),window.addEventListener("mousemove",T)}),au(()=>{window.removeEventListener("mouseup",N),window.removeEventListener("mousemove",T),E()}),Fe(()=>A(c),()=>{pe(r,A(c).length>0?A(c)[A(c).length-1]:void 0)}),Fe(()=>(A(i),A(s)),()=>{A(i)!==A(s)&&pe(s,A(i))}),li(),gn();var C=T_e(),R=gt(C),k=at(R,2);{var B=z=>{var U=Ut(),Y=_t(U);Ah(Y,()=>`${A(r)}:${A(s)}`,oe=>{var W=A_e(),D=gt(W);Wee(D,{filter:()=>1,children:(F,H)=>{var ie=E_e(),se=_t(ie);ite(se,{class:"cmdk-input",placeholder:"Search...",get value(){return A(i)},set value(ge){pe(i,ge)},$$legacy:!0});var we=at(se,2);r0(we,{children:(ge,te)=>{var ue=Ut(),re=_t(ue);{var Q=Ge=>{r0(Ge,{children:(Ne,Oe)=>{var Ze=Ut(),$e=_t(Ze);Pi($e,1,()=>y.filter(q=>q.label.toLowerCase().startsWith(A(i).toLowerCase())),q=>q.id,(q,G)=>{t0(q,{onSelect:()=>h(A(G).id),class:"menu-item",children:(K,J)=>{var Ee=QC();It(()=>Bi(Ee,A(G).label)),De(K,Ee)},$$slots:{default:!0}})}),De(Ne,Ze)},$$slots:{default:!0}})},le=Ge=>{r0(Ge,{children:(Ne,Oe)=>{var Ze=S_e(),$e=_t(Ze);tte($e,{get heading(){return A(r)},children:(G,K)=>{var J=Ut(),Ee=_t(J);Pi(Ee,1,()=>xc[A(r)].groupElements.filter(fe=>fe.name.toLowerCase().startsWith(A(i).toLowerCase())),fe=>fe.nodeType,(fe,Te)=>{t0(fe,{onSelect:()=>d(A(Te).nodeType,A(Te)),class:"menu-item",children:(Ce,Ue)=>{var Le=x_e(),Ie=_t(Le),Se=at(Ie);It(()=>{Bi(Ie,`${A(Te).name??""} `),ht(Se,"src",A(Te).icon),ht(Se,"alt",A(Te).name)}),De(Ce,Le)},$$slots:{default:!0}})}),De(G,J)},$$slots:{default:!0}});var q=at($e,2);t0(q,{onSelect:v,class:"menu-item",children:(G,K)=>{var J=QC("â Back");De(G,J)},$$slots:{default:!0}}),De(Ne,Ze)},$$slots:{default:!0}})};Kt(re,Ge=>{A(r)?Ge(le,!1):Ge(Q)})}De(ge,ue)},$$slots:{default:!0}}),De(F,ie)},$$slots:{default:!0}}),De(oe,W)}),De(z,U)};Kt(k,z=>{A(n)&&z(B)})}ar("click",R,f),De(e,C),ir()}var C_e=vn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 0 1-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 0 0 9 9c.239 0 .254.018.488 0A9 9 0 0 1 12 21"></path></svg>');function O_e(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=C_e();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}var I_e=vn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05L5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636L16.95 7.05M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path></svg>');function R_e(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=I_e();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}var k_e=Gt('<div class="side_menu_header svelte-ndv5xm"><div style="display: flex;align-items:center"><img src="./logicap.webp" alt="app-logo" style="max-width: 18%;min-width:10%; aspect-ratio: 1 / 1;margin-right: 5%;margin-block:15px;"> <h2 class="svelte-ndv5xm"><span class="l_cap svelte-ndv5xm">L</span><span class="o_cap svelte-ndv5xm">o</span><span class="g_cap svelte-ndv5xm">g</span><span class="i_cap svelte-ndv5xm">i</span><span class="c_cap svelte-ndv5xm">c</span><span class="a_cap svelte-ndv5xm" style="margin-left:4px;">A</span><span class="p_cap svelte-ndv5xm">P</span></h2></div> <!></div>');function M_e(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(io,"$settingsStore",r);let s=bn(!1);An(()=>{pe(s,localStorage.getItem("theme")==="dark"),a()});function o(){pe(s,!A(s)),dn(io,Tt(i).theme=A(s)?"dark":"light",Tt(i)),localStorage.setItem("theme",A(s)?"dark":"light"),a()}function a(){A(s)?document.body.className="dark":document.body.className="light"}Fu(()=>{i().theme==="light"?(document.body.className="light",localStorage.setItem("theme","light"),pe(s,!1)):i().theme==="dark"&&(document.body.className="dark",localStorage.setItem("theme","dark"),pe(s,!0))});var u=k_e(),c=at(gt(u),2);{var f=v=>{R_e(v,{onclick:o,style:"color:var(--neon-purple); min-width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})},h=v=>{O_e(v,{onclick:o,style:"color:grey !important; min-width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})};Kt(c,v=>{A(s)?v(f):v(h,!1)})}De(e,u),ir(),n()}var L_e=(e,t,r)=>t(A(r),e),N_e=Gt('<li class="svelte-1lw7vlc"><button class="gate-button" style="background:none; border:none; padding:0; cursor:inherit;"><img class="svelte-1lw7vlc"></button> </li>'),q_e=Gt('<ol class="side_menu_group svelte-1lw7vlc"></ol>');function D_e(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(xc,"$menuJsonData",r);let s=he(t,"zIndex",3,0),o=he(t,"subMenuHeader",3,"Logic Gates");const a=qn(()=>i()[o()].groupElements);let u=null,c=null;function f(S,P,T){c=document.createElement("div"),c.className="drag-ghost",c.style.position="fixed",c.style.pointerEvents="none",c.style.left=P+"px",c.style.top=T+"px",c.style.zIndex="200",c.style.transform="scale(1.3)";const E=document.createElement("img");E.src=S.icon,E.alt=S.nodeType+"drag gate ghost",E.style.width="82px",E.style.opacity="0.7",c.appendChild(E),document.body.appendChild(c)}function h(S,P){c&&(c.style.left=S+"px",c.style.top=P+"px")}function v(){c&&(c.remove(),c=null)}function y(S,P){P.preventDefault(),!Vs()&&(u=S,f(S,P.pageX,P.pageY))}function m(S){c&&h(S.pageX,S.pageY)}function _(S){if(S.stopPropagation(),u&&c){const T=document.elementFromPoint(S.clientX,S.clientY);h(S.pageX,S.pageY);const E=document.querySelector(".svelvet-wrapper");if(E==null?void 0:E.contains(T)){var P;if(u.nodeType=="Subcircuit"){let N=0,d=0,C=localStorage.getItem(u.name);if(C){let k=JSON.parse(C).devices;Object.keys(k).forEach(B=>{k[B].type=="Button"&&(N+=1)}),Object.keys(k).forEach(B=>{k[B].type=="Lamp"&&(d+=1)})}else alert("Critical: subcircuit not found");console.log(N),P={...S,gateType:u.nodeType,celltype:u.name,inputs:N,outputs:d}}else u.nodeType=="TunnelInput"||u.nodeType=="TunnelOutput"?P={...S,gateType:u.nodeType,celltype:u.name}:P={...S,gateType:u.nodeType};t.createCanvasDevice(P)}u=null,v(),S.stopPropagation()}}An(()=>{document.addEventListener("mousemove",m),document.addEventListener("click",_)}),au(()=>{document.removeEventListener("mousemove",m),document.removeEventListener("click",_),v()});var x=q_e();Pi(x,21,()=>A(a),Ka,(S,P)=>{var T=N_e();T.__mousedown=[L_e,y,P];var E=gt(T),O=gt(E),N=at(E);It(()=>{ht(O,"src",A(P).icon),ht(O,"alt",`${A(P).name??""} logic gate, hand-drawn`),Bi(N,` ${A(P).name??""}`)}),De(S,T)}),It(()=>{Nr(x,`z-index:${s()};`),ht(x,"id",`section_${s()??""}`)}),De(e,x),ir(),n()}$u(["mousedown"]);const F_e=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href,B_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='27.081'%20viewBox='0%200%20500%2027.081'%3e%3cpath%20id='b'%20data-name='16'%20d='M500,25.653c-.271,.462-.732,.434-1.18,.548-.418,.107-.762,.508-1.277,.879h-22.196c-.256-.224-.609-.535-1.012-.889h-7.665c-.362-.338-.71-.663-1.069-.998h-7.711c-.363-.336-.711-.66-1.076-.998h-8.658c-.498-.437-.823-.963-1.6-.956-4.344,.039-8.688,.019-12.911,.019-.349-.349-.577-.577-.845-.845-1.218-.293-2.5-.073-3.769-.115-1.29-.043-2.584-.01-3.876-.01h-7.267c-1.292,0-2.585,.036-3.876-.01-1.267-.045-2.549,.192-3.758-.121-.274-.274-.502-.502-.784-.784h-28.005c-.379-.333-.732-.644-1.134-.997h-45.514c-.305,.285-.654,.61-1.011,.943h-53.262l-1.063-.992h-118.18c-.251-.251-.479-.479-.708-.708-.129-.08-.251-.214-.387-.228-.319-.034-.645-.011-.968-.011-4.36,0-8.721,.001-13.081-.004-.147,0-.295-.064-.448-.099-.438-.438-.811-.889-1.573-.884-5.006,.036-10.013,.024-15.019,.012-.625-.001-1.267,.129-1.846-.126-.255-.255-.483-.483-.716-.716-.939-.229-1.899-.113-2.85-.114-7.59-.011-15.181-.018-22.771,.012-.774,.003-1.106-.509-1.604-.953h-17.45c-.292,.269-.641,.59-1.009,.929H34.387c-.343-.32-.692-.645-1.055-.984h-11.548c-.393-.35-.746-.663-1.122-.998h-5.724c-.278-.278-.469-.587-.744-.716-.402-.188-.938-.144-1.286-.386-.522-.363-.93-.889-1.387-1.346l-.345-.345c-.923,.165-1.464-.42-1.997-1.03h-.968c-2.05-2.059-4.101-4.118-6.23-6.256-.022-.369-.058-.835-.075-1.301-.034-.93-.106-1.035-1.056-1.154-.334-.042-.612-.094-.829-.465,.284-.322,.579-.658,.876-.995C.607,1.136,.304,.793,0,.451Q.875,0,5.143,0c.244,.192,.491,.38,.728,.579,.123,.103,.23,.227,.369,.366h6.736c.362,.338,.71,.663,1.068,.997h14.493c.364,.337,.713,.66,1.009,.934h16.478c.498-.438,.825-.956,1.6-.955,17.603,.023,35.206,.017,52.809,.022,.307,0,.614,.073,.928,.112,.431,.452,.82,.889,1.579,.871,2.26-.053,4.521-.019,6.782-.019,5.006,0,10.013,.017,15.019-.019,.759-.005,1.142,.431,1.63,.932h12.505c.38,.333,.734,.644,1.137,.998h108.444c.359,.333,.708,.657,1.071,.993h43.567c.357,.333,.705,.658,1.015,.947h3.881c.253-.253,.481-.481,.71-.71,.129-.078,.258-.226,.387-.226,27.764-.01,55.528-.01,83.195-.01,.541,.535,.911,.99,1.674,.987,8.075-.029,16.15-.023,24.224-.01,.785,.001,1.589-.156,2.34,.129,.246,.246,.475,.475,.703,.703,.144,.043,.287,.123,.431,.123,2.745,.007,5.491,.006,8.236,.006s5.491,.03,8.236-.019c.774-.014,1.11,.503,1.606,.952h9.622c.368,.337,.717,.658,1.088,.998h7.707c.356,.333,.705,.659,1.067,.998h7.707c.25,.25,.478,.478,.706,.706,.128,.08,.251,.216,.386,.23,.319,.034,.645,.011,.968,.011,8.236,0,16.473,0,24.709,.004,.148,0,.296,.062,.444,.095,1.256,1.256,2.512,2.512,3.768,3.768,1.374-.003,1.396,.046,1.46,1.249,.017,.322-.015,.647,.007,.969,.029,.428,.425,.7,1.034,.699,.323,0,.646-.005,.969,.002,.155,.003,.309,.03,.466,.047,.491,.678,1.129,1.073,1.992,1.025,2.058,2.058,4.114,4.114,6.166,6.166Z'/%3e%3c/svg%3e",z_e=""+new URL("line_23-6xYtaVUR.svg",import.meta.url).href,V_e=""+new URL("line_24-DEoQpS3B.svg",import.meta.url).href,G_e=""+new URL("line_25-BJNXJfeQ.svg",import.meta.url).href,$_e=""+new URL("line_27-Bg8z01MR.svg",import.meta.url).href,U_e=""+new URL("line_17-DTelLRhX.svg",import.meta.url).href,j_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='14.048'%20viewBox='0%200%20500%2014.048'%3e%3cpath%20id='b'%20data-name='20'%20d='M500,11.891c-.491,.804-1.263,1.347-1.881,2.033-.123,.035-.245,.101-.368,.102-1.375,.007-2.751-.032-4.124,.021-.663,.025-.942-.435-1.365-.812h-18.918c-.311-.287-.609-.561-.922-.849h-30.487c-.303-.283-.6-.559-.873-.813h-47.818c-.333,.297-.633,.564-.861,.768h-18.167c-.235-.235-.429-.429-.624-.624-.253-.054-.505-.152-.759-.153-3.42-.01-6.84-.007-10.127-.007-.325,.325-.519,.519-.762,.762-.347,.019-.744,.06-1.143,.06-29.56,.003-59.12,.003-88.68,.003-.138,0-.278-.019-.412,.003-.653,.107-.957-.392-1.398-.828H56.332c-1.237,0-2.476,.022-3.711-.023-.187-.007-.448-.298-.519-.51-.077-.23-.07-.609,.073-.769,.635-.71,1.333-1.365,1.994-2.027h19.006c.43-.625,.988-.935,1.743-.796,.63,.116,1.004-.273,1.355-.691,.804-.252,1.622-.127,2.428-.128,12.374-.009,24.748-.006,37.122-.01,.395,0,.812,.1,1.171-.154,.096-.068,.233-.211,.213-.283-.032-.115-.172-.278-.275-.284-.811-.052-1.625-.097-2.437-.097-13.199-.005-26.398-.004-39.65-.004-.271-.238-.572-.503-.913-.804h-30.452c-.307-.286-.604-.563-.908-.847H19.505c-.307-.285-.603-.562-.912-.849H.37c-.111-.362-.222-.727-.37-1.211C.741,1.461,1.481,.854,2.46,.051H12.864c.218,.192,.519,.457,.861,.758h59.327c.306,.285,.603,.562,.907,.847,4.11,0,8.235,.002,12.359-.012,.098,0,.233-.166,.283-.283,.086-.198-.045-.465-.356-.512-.533-.081-1.085-.036-1.626-.08-.105-.008-.289-.255-.279-.268,.14-.178,.302-.467,.469-.473,1.085-.042,2.172-.022,3.169-.022,.462,.484,.793,.853,1.439,.841,2.336-.041,4.675,.009,7.011-.033,.647-.011,.972,.369,1.433,.841h56.795c.412,0,.83,.041,1.236-.009,.666-.082,.935,.444,1.36,.81h54.397c.308,.286,.605,.561,.914,.847h91.543c.299,.28,.596,.557,.902,.844h44.485c.333,.297,.632,.564,.951,.848h33.767c.665,1.068,1.616,.826,2.549,.656,.195-.194,.389-.389,.583-.583,.122-.037,.244-.108,.366-.108,8.387-.005,16.774-.005,25.229-.005,.263,.225,.566,.483,.928,.793h1.55c.314,.287,.612,.56,.911,.833,.286-.261,.583-.531,.879-.8,4.262,0,8.524,.004,12.786-.008,.302,0,.606,.039,.661,.339,.03,.164-.205,.435-.386,.568-.413,.302-.318,.719-.309,1.111,.002,.104,.138,.258,.245,.297,.241,.087,.5,.146,.756,.164,.943,.065,1.898-.122,2.825,.132,.201,.201,.395,.395,.6,.6,.652,.201,1.335,.091,2.007,.093,5.774,.01,11.549,.017,17.323-.01,.658-.003,.944,.428,1.367,.81h22.215c.312,.286,.611,.559,.926,.849h18.934c.305,.283,.602,.559,.891,.828,.648,.145,1.383-.29,1.95,.339Zm-93.618,.51c-3.829-.031-7.658-.023-11.486-.009-.098,0-.227,.159-.287,.272-.102,.192,.024,.513,.324,.52,1.914,.042,3.828,.021,5.743,.021s3.829,.004,5.743-.012c.099,0,.227-.159,.287-.272,.101-.192-.026-.518-.324-.521Zm14.022,.825c-2.454-.036-4.91-.024-7.364-.008-.098,0-.227,.161-.284,.276-.095,.192,.032,.503,.332,.516,1.226,.051,2.454,.021,3.682,.021s2.455,.006,3.682-.012c.098-.002,.227-.161,.284-.276,.095-.192-.035-.512-.331-.516Z'/%3e%3c/svg%3e",H_e=""+new URL("line_21-BR_oFIB4.svg",import.meta.url).href,W_e=""+new URL("line_29-C9eu5sMJ.svg",import.meta.url).href;function dv(){xc.update(e=>({"Logic Gates":{...e["Logic Gates"]},"Input/Output":{...e["Input/Output"]},Tunnels:{...e.Tunnels},Subcomponents:{svg:e.Subcomponents.svg,groupElements:[...KT().map(t=>({name:t,nodeType:"Subcircuit",icon:PE}))]},GhostElement:{...e.GhostElement}}))}var X_e=Gt('<li class="svelte-mjlxbp"><div class="menu_group_section svelte-mjlxbp"><button class="svelte-mjlxbp"><span style="margin-left:5%;"> </span></button> <img class="sketch_bar svelte-mjlxbp"></div> <!></li>'),Y_e=Gt('<nav class="side_menu noselect svelte-mjlxbp" aria-label="Side Menu"><div class="side_menu_header svelte-mjlxbp"><!> <img class="wiggle_bar svelte-mjlxbp" alt="sketched line bottom border for main app bar"></div> <ul class="svelte-mjlxbp"></ul></nav>');function K_e(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(xc,"$menuJsonData",r),s={line_15:B_e,line_23:z_e,line_24:V_e,line_25:G_e,line_27:$_e,line_17:U_e,line_19:j_e,line_21:H_e,line_29:W_e},o=qn(()=>Object.entries(i())),a=qn(()=>Object.keys(i())),u=[15,23,24,25,27,17,19,21,29];function c(T){return Math.floor(Math.random()*T)+1}let f=localStorage.getItem("randomLineSelectionStore");function h(T){return s[`line_${T}`]}if(f===null){const T=A(a).map(E=>{const O=c(u.length-1),N=u[O],d=h(N);return dn(xc,Tt(i)[E].svg=d,Tt(i)),u.splice(O,1),N});localStorage.setItem("randomLineSelectionStore",JSON.stringify(T))}else JSON.parse(f).forEach((E,O)=>{const N=A(a)[O],d=h(parseInt(E,10));N!==void 0&&dn(xc,Tt(i)[N].svg=d,Tt(i))});let v=Ds(Array(A(a).length).fill(!0));function y(T,E){return T[E]?"transition: max-height .4s ease-in; max-height:405px":"transition: max-height .4s ease-out; max-height:75px"}An(()=>{dv()});var m=Y_e(),_=gt(m),x=gt(_);M_e(x,{});var S=at(x,2);ht(S,"src",F_e);var P=at(_,2);Pi(P,23,()=>A(o),([T,E])=>T,(T,E,O)=>{let N=()=>A(E)[0],d=()=>A(E)[1];var C=X_e(),R=gt(C),k=gt(R);k.__mousedown=()=>{v[A(O)]=!v[A(O)]};var B=gt(k),z=gt(B),U=at(k,2),Y=at(R,2);D_e(Y,{get createCanvasDevice(){return t.createCanvasDevice},get zIndex(){return A(O)},get subMenuHeader(){return N()}}),It(oe=>{ht(C,"id",`menu_group_${A(O)??""}`),Nr(C,oe),Bi(z,N()),ht(U,"src",d().svg),ht(U,"alt",`sketched line bottom border for main app bar section ${N()??""}`)},[()=>y(v,A(O))]),De(T,C)}),De(e,m),ir(),n()}$u(["mousedown"]);var J_e=Gt("<div><!></div>"),Z_e=Gt("<div> </div>");function Q_e(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(Sn,"$CircuitStore",r),s=()=>Be(u,"$rotation",r),o=(m,_=Bs)=>{const x=qn(()=>t.position!==void 0?!1:"cursor"),S=qn(Vs);T2(m,{get drop(){return A(x)},get position(){return t.position},editable:!1,get locked(){return A(S)},get id(){return t.nodeId},$$events:{nodeClicked:P=>{c=P.detail.e.currentTarget.classList.contains("selected")},nodeReleased:P=>{Vs()||!c||P.detail.e.shiftKey||(St(u,(s()+90)%360),dn(Sn,Tt(i).devices[t.nodeId].rotation=s(),Tt(i)))}},children:bv,$$slots:{default:(P,T)=>{const E=qn(()=>T.selected);var O=J_e();let N;var d=gt(O);pc(d,_,(C,R)=>{R(C,Vl({get nodeId(){return t.nodeId}},()=>t.nodeProps))}),It(C=>{Nr(O,`transform:rotate(${s()??""}deg)`),N=on(O,1,"svelte-rehu4",null,N,C)},[()=>({selected:A(E)})]),De(P,O)}}})},a=w_e(t.gateType);let u=Ve(i().devices[t.nodeId].rotation||0);Hr("rotation",u);let c=!1;var f=Ut(),h=_t(f);{var v=m=>{o(m,()=>a)},y=m=>{var _=Z_e(),x=gt(_);It(()=>Bi(x,`Unknown gate type: ${t.gateType??""}`)),De(m,_)};Kt(h,m=>{a?m(v):m(y,!1)})}De(e,f),ir(),n()}var ebe=vn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M.5 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18L1.6 3.11a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.62z"></path><path d="M6.997 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18l-5.08-3.32a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.6zM13.5 2.5v9"></path></g></svg>');function tbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=ebe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),De(e,n)}var rbe=vn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M1.436 12.33a1.14 1.14 0 0 0 .63 1a1.24 1.24 0 0 0 1.22 0l8.65-5.35a1.11 1.11 0 0 0 0-2L3.286.67a1.24 1.24 0 0 0-1.22 0a1.14 1.14 0 0 0-.63 1z"></path></svg>');function nbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=rbe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),De(e,n)}var ibe=vn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M4 .5H1.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1H4a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1m8.5 0H10a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h2.5a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1"></path></svg>');function sbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=ibe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),De(e,n)}var obe=vn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M13.5.5v13m-13-1.84a1 1 0 0 0 .52.88a1 1 0 0 0 1 0l7.19-4.7a1 1 0 0 0 0-1.68L2 1.5a1 1 0 0 0-1 0a1 1 0 0 0-.52.88Z"></path></svg>');function abe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=obe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),De(e,n)}var ube=vn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"></path></g></svg>');function cbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=ube();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}var lbe=vn('<svg><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"></path></svg>');function fbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=lbe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}var hbe=vn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m14-7l-5-5l-5 5m5-5v12"></path></svg>');function dbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=hbe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}const u2=(e,t)=>{let r=()=>zQ(t==null?void 0:t(),[]);var n=Ut(),i=_t(n);pc(i,()=>r().Component,(s,o)=>{o(s,{get style(){return r().styles},width:"30px",height:"100%"})}),De(e,n)},rh=(e,t=Bs,r=Bs,n,i)=>{let s=pn(()=>jC(n==null?void 0:n(),"tooltipTest")),o=pn(()=>jC(i==null?void 0:i(),""));var a=vbe();a.__click=[pbe,r];var u=gt(a);u2(u,t),It(()=>{Nr(a,A(o)),ht(a,"title",A(s))}),De(e,a)};var pbe=(e,t)=>t()(),vbe=Gt('<button class="svelte-15k4qkc"><!></button>'),gbe=(e,t)=>t()(),mbe=Gt('<button style="display:flex;align-items: center;padding-block:2px;" class="svelte-15k4qkc"><div style="margin-right:2px;transform:scale(0.85)"><!></div> <p id="tickNumber" class="svelte-15k4qkc"> </p></button>'),ybe=Gt('<div class="floatingMenu svelte-15k4qkc"><div class="menuRunButtons svelte-15k4qkc"><!> <span class="vl svelte-15k4qkc"></span> <!> <span class="vl svelte-15k4qkc"></span> <!> <span class="vl svelte-15k4qkc"></span> <!></div> <div class="editBtnSection svelte-15k4qkc"><!> <span class="vl svelte-15k4qkc" style="margin-block:4px"></span> <!></div></div>');function _be(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(Sn,"$CircuitStore",r),s=(d,C=Bs)=>{var R=mbe();R.__click=[gbe,C];var k=gt(R),B=gt(k);{var z=W=>{u2(W,()=>o.pauseTick)},U=W=>{u2(W,()=>o.playTick)};Kt(B,W=>{Vs()?W(z):W(U,!1)})}var Y=at(k,2),oe=gt(Y);It((W,D,F)=>{ht(R,"title",W),Nr(Y,D),Bi(oe,F)},[()=>Vs()?"Pause Simulation":"Play Simulation",()=>Vs()?"border-color:green":"border-color:red",uye]),De(d,R)},o={playTick:{Component:nbe,width:40},pauseTick:{Component:sbe,width:40},updateGates:{Component:abe,width:40},updateGatesNext:{Component:tbe,width:40},save:{Component:cbe,width:40},trash:{Component:fbe,width:40},load:{Component:dbe,width:40}},a=()=>{const d=document.querySelector("#logicap");d&&(d.classList.contains("running")?d.classList.remove("running"):d.classList.add("running"))};function u(d){a(),cye(10)}function c(d){dye()}function f(d){hye()}function h(d){const C=localStorage.getItem("currActiveTab");if(!C)return console.log("could not download because current active tab name is null"),null;Ote(C)}async function v(d){await Ite(),t.setCanvas(i().devices)}function y(){Cte(),Sn.reset(),t.clearCanvas()}var m=ybe(),_=gt(m),x=gt(_);s(x,()=>u);var S=at(x,4);rh(S,()=>o.updateGates,()=>f,()=>"update gates");var P=at(S,4);rh(P,()=>o.updateGatesNext,()=>c,()=>"update gates next");var T=at(P,4);rh(T,()=>o.trash,()=>y,()=>"Clear Tab");var E=at(_,2),O=gt(E);rh(O,()=>o.save,()=>h,()=>"download circuit json");var N=at(O,4);rh(N,()=>o.load,()=>v,()=>"upload circuit json file"),De(e,m),ir(),n()}$u(["click"]);function c7(e=10){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=crypto.getRandomValues(new Uint8Array(e));return Array.from(r,n=>t[n%t.length]).join("")}function bbe(){const e=()=>{const t=document.querySelector(".svelvet-wrapper");if(t){const r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0});t.dispatchEvent(r);const n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}};document.addEventListener("DOMContentLoaded",()=>{e()})}var wbe=vn('<svg><path fill="currentColor" d="M5 19V5zv-.025zm0 2q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v7q0 .425-.288.713T20 13t-.712-.288T19 12V5H5v14h7q.425 0 .713.288T13 20t-.288.713T12 21zm14.175-1H16q-.425 0-.712-.288T15 19t.288-.712T16 18h3.175l-.9-.9Q18 16.825 18 16.413t.3-.713q.275-.275.7-.275t.7.275l2.6 2.6q.3.3.3.7t-.3.7l-2.6 2.6q-.275.275-.687.288T18.3 22.3q-.275-.275-.275-.7t.275-.7zM11 13v3q0 .425.288.713T12 17t.713-.288T13 16v-3h3q.425 0 .713-.288T17 12t-.288-.712T16 11h-3V8q0-.425-.288-.712T12 7t-.712.288T11 8v3H8q-.425 0-.712.288T7 12t.288.713T8 13z"></path></svg>');function xbe(e,t){const r=Ho(t,["$$slots","$$events","$$legacy"]);var n=wbe();let i;It(()=>i=ci(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),De(e,n)}const nh="primary circuit";function Sbe(){const e=KT().map(t=>{const r=t.match(/^sub_(\d+)$/);return r?parseInt(r[1]):null}).filter(t=>t!==null).reduce((t,r)=>t>r?t:r,0)+1;qbe(`sub_${e}`),dv()}var Ebe=async(e,t,r)=>await t(r),Abe=(e,t,r)=>{e.key==="Enter"?t():e.key==="Escape"&&r()},Tbe=Gt('<input type="text" class="svelte-1ai65tg">'),Pbe=async(e,t,r)=>await t(A(r)),Cbe=(e,t,r)=>t(A(r)),Obe=Gt('<button type="button" class="tab-title svelte-1ai65tg"> </button>'),Ibe=(e,t,r)=>t(A(r)),Rbe=Gt('<div><!> <button type="button" class="delete-btn svelte-1ai65tg" title="Delete Tab">Ã</button></div>'),kbe=Gt('<div class="tabs svelte-1ai65tg"><div class="scrollable-tabs svelte-1ai65tg"><div class="tab-item svelte-1ai65tg"><button type="button"></button></div> <!></div> <button type="button" class="new-tab-btn svelte-1ai65tg"><!></button></div>');function Mbe(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(Sn,"$CircuitStore",r);let s=qn(KT),o=bn(Ds(localStorage.getItem("currActiveTab")||nh));async function a(O){if(!A(s).includes(O)){alert(`Subcomponent '${O}' not found!`);return}A(o)===O&&await u(nh),Dbe(O),dv()}async function u(O){if(A(o)===O)return;let N=localStorage.getItem(O);if(N===null){alert(`Subcomponent '${O}' not found!`);return}await ku();const d=localStorage.getItem("circuitStoreSave");if(!d){console.log("Empty after trying to save (this should not happen!)");return}localStorage.setItem(A(o),d),localStorage.setItem("circuitStoreSave",N),A2(),t.setDeviceData(i().devices),pe(o,O,!0),localStorage.setItem("currActiveTab",O)}let c=bn(null),f=bn("");function h(O){pe(c,O,!0),pe(f,O,!0)}function v(){pe(c,null),pe(f,"")}function y(){if(!A(c)){alert("There is no tab being edited! ");return}const O=A(f).trim();if(O){if(A(s).includes(O)){A(c)===O?v():alert("Subcomponent name already exists! Please choose a different name.");return}Fbe(A(c),O),dv(),A(c)===A(o)&&(pe(o,O,!0),localStorage.setItem("currActiveTab",O)),v()}}var m=kbe(),_=gt(m),x=gt(_),S=gt(x);S.__click=[Ebe,u,nh],S.textContent=nh;var P=at(x,2);Pi(P,19,()=>A(s),(O,N)=>O+N,(O,N)=>{var d=Rbe(),C=gt(d);{var R=z=>{var U=Tbe();U.__keydown=[Abe,y,v],ar("blur",U,v),_2(U,()=>A(f),Y=>pe(f,Y)),De(z,U)},k=z=>{var U=Obe();U.__click=[Pbe,u,N],U.__dblclick=[Cbe,h,N];var Y=gt(U);It(()=>Bi(Y,A(N))),De(z,U)};Kt(C,z=>{A(c)===A(N)?z(R):z(k,!1)})}var B=at(C,2);B.__click=[Ibe,a,N],It(()=>on(d,1,`tab-item ${(A(o)===A(N)?"tab-selected":"")??""}`,"svelte-1ai65tg")),De(O,d)});var T=at(_,2);T.__click=[Sbe];var E=gt(T);xbe(E,{}),It(()=>on(S,1,`tab-title ${(A(o)===nh?"tab-selected":"")??""}`,"svelte-1ai65tg")),De(e,m),ir(),n()}$u(["click","keydown","dblclick"]);function Lbe(e,t){nr(t,!1),An(()=>{const r=gr("graph");bte(r.transforms.scale.set,r.transforms.translation.set),window.getCursor=()=>{let n=st(r.cursor);return{x:n.x,y:n.y}}}),gn(),ir()}function Nbe(e){return console.log("Success new connection made id: "+e),null}let Sa=Ds(JSON.parse(localStorage.getItem("subcircuits")||"[]"));function qbe(e){Sa.indexOf(e)==-1&&(Sa.push(e),localStorage.setItem("subcircuits",JSON.stringify(Sa)),localStorage.setItem(e,""))}function Dbe(e){const t=Sa.indexOf(e);t!=-1&&(Sa.splice(t,1),localStorage.setItem("subcircuits",JSON.stringify(Sa)),localStorage.removeItem(e))}function Fbe(e,t){const r=Sa.indexOf(e),n=localStorage.getItem(e);n===null||r==-1||(Sa[r]=t,localStorage.setItem("subcircuits",JSON.stringify(Sa)),localStorage.removeItem(e),localStorage.setItem(t,n))}function KT(){return Sa}var Bbe=Gt("<!>  <!>",1),zbe=Gt('<main id="logicap" class="svelte-2kmgjz"><!> <!> <!> <!> <!> <!></main>');function Vbe(e,t){nr(t,!0);const[r,n]=Xr(),i=()=>Be(Sn,"$CircuitStore",r);let s=bn(Ds({...i().devices}));const o=()=>pe(s,{},!0),a=k=>pe(s,k,!0);let u=bn(1),c=bn(Ds({x:0,y:0})),f;const h='[class^="svelvet-graph-wrapper"]';function v(k){const B=k.match(/translate\(([-.\d]+)px,\s*([-.\d]+)px\)\s*scale\(([-.\d]+)\)/);if(!B)return;const[,z,U,Y]=B.map(Number);localStorage.setItem("canvasZoom",Y.toString()),localStorage.setItem("canvasTranslation",JSON.stringify({x:z,y:U}))}An(()=>{pe(u,parseFloat(localStorage.getItem("canvasZoom")||"1"),!0),pe(c,JSON.parse(localStorage.getItem("canvasTranslation")||'{"x":0,"y":0}'),!0),A2(),pe(s,i().devices,!0),bbe(),requestAnimationFrame(()=>{const k=document.querySelector(h);if(!k){console.warn("ZoomTrackerDOM: Svelvet wrapper not found");return}v(k.style.transform),f=new MutationObserver(()=>{v(k.style.transform)}),f.observe(k,{attributes:!0,attributeFilter:["style"]})})}),window.addEventListener("beforeunload",()=>{ku()});function y(k){const B=k.gateType,z=c7();var U;k.celltype?U=Sn.addCircuitDevice(B,z,{celltype:k.celltype,inputs:k.inputs,outputs:k.outputs}):U=Sn.addCircuitDevice(B,z),pe(s,U,!0),ku()}let m=k=>pe(s,k,!0),_="";function x(){let k=Object.keys(A(s)).map(Y=>"N-"+Y).map(Y=>document.getElementById(Y)),B=k.filter(Y=>Y===null?!1:Y.classList.contains("selected"));k.filter(Y=>Y===null?!1:!Y.classList.contains("selected"));let z=A(s);B.map(Y=>Y===null?"":Y.id.substring(2)).forEach(Y=>{z=Sn.removeCircuitDevice(Y)}),pe(s,z,!0),ku()}async function S(){let z=Object.keys(A(s)).map(W=>"N-"+W).map(W=>document.getElementById(W)).filter(W=>W===null?!1:W.classList.contains("selected")).map(W=>W===null?"":W.id.substring(2));ku();let U=JSON.parse(localStorage.getItem("circuitStoreSave")??""),Y={devices:{},connectors:{}};Y.devices=Object.fromEntries(Object.entries(U.devices).filter(([W])=>z.includes(W)));let oe=(W,D)=>D.some(F=>W.endsWith(F));Y.connectors=U.connectors;for(const W of Object.keys(Y.connectors))if(oe(W,z)){let D=Y.connectors[W].filter(F=>z.includes(F[0]));Y.connectors[W]=D}else delete Y.connectors[W];await navigator.clipboard.writeText(JSON.stringify(Y))}function P(){navigator.clipboard.readText().then(k=>{let B=JSON.parse(k),z={};const U=Object.values(B.devices).map(F=>F.position),Y=Math.min(...U.map(F=>F.x));Math.max(...U.map(F=>F.x));const oe=Math.min(...U.map(F=>F.y));Math.max(...U.map(F=>F.y));let W=window.getCursor(),D=null;for(let F of Object.keys(B.devices)){z[F]=F.split("_")[0]+"_"+c7();let H=B.devices[F].type,ie=B.devices[F],se=ie.position.x-Y,we=ie.position.y-oe,ge={...ie};ge.position={x:W.x+se,y:W.y+we},delete ge.label,delete ge.net,D=Sn.addCircuitDevice(H,z[F].split("_")[1],ge)}pe(s,D,!0);for(let F of Object.keys(B.connectors)){let H=F.split("_")[0]+"_"+z[F.split("_").slice(1).join("_")];for(let ie of B.connectors[F]){let se=z[ie[0]],we=ie[1].replace(ie[0],se);console.log("adding",H,we),Sn.addConnection(H,we)}}console.log("rename",z),ku()})}var T=zbe(),E=gt(T);Bye(E,{});var O=at(E,2);K_e(O,{createCanvasDevice:y});var N=at(O,2);_be(N,{clearCanvas:o,get currCircuitName(){return _},setCanvas:m});var d=at(N,2);P_e(d,{createCanvasDevice:y,deletedSelectedNodes:x,copySelectedNodes:S,pasteNodes:P});var C=at(d,2);Mbe(C,{clearDeviceData:o,setDeviceData:a});var R=at(C,2);Tne(R,{theme:"LogiCap",get zoom(){return A(u)},get translation(){return A(c)},editable:!1,disableSelection:!1,controls:!0,children:(k,B)=>{var z=Bbe(),U=_t(z);Lbe(U,{});var Y=at(U,2);Pi(Y,17,()=>Object.entries(A(s)),([oe,W])=>oe,(oe,W)=>{let D=()=>A(W)[0],F=()=>A(W)[1];const H=qn(()=>({...F().type&&{gateType:F().type},width:80,height:50,...F().celltype&&{celltype:F().celltype,inputs:F().inputs,outputs:F().outputs}}));Q_e(oe,{get gateType(){return F().type},get position(){return F().position},get nodeId(){return D()},get nodeProps(){return A(H)}})}),De(k,z)},$$slots:{default:!0,minimap:(k,B)=>{yV(k,{width:100,corner:"NE",slot:"minimap"})},toggle:(k,B)=>{_V(k,{main:"LogiCap",corner:"NW",alt:"LogiCap",slot:"toggle"})}}}),De(e,T),ir(),n()}KQ(Vbe,{target:document.getElementById("app")});export{sO as A,Fs as B,Gs as C,Bi as D,Ve as E,An as F,au as G,Me as H,_t as I,pe as J,dl as K,Mp as L,vn as M,pc as N,ht as O,Pi as P,he as a,mr as b,It as c,on as d,De as e,ir as f,gr as g,Xr as h,gn as i,Kt as j,st as k,gt as l,at as m,A as n,pn as o,nr as p,Nr as q,ar as r,Be as s,Gt as t,ho as u,vo as v,wre as w,$be as x,_2 as y,EO as z};
