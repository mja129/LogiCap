/*! For license information please see main.mjs.LICENSE.txt */
var t={659:(t,e,n)=>{var r=n(51873),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},935:(t,e,n)=>{var r=n(92127);r(r.S,"Object",{create:n(84719)})},1060:(t,e)=>{e.f=Object.getOwnPropertySymbols},1158:(t,e,n)=>{var r=n(4228);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1176:(t,e,n)=>{var r=n(97380),i=n(4228),o=n(40627),s=r.has,a=r.key,u=function(t,e,n){if(s(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},1508:(t,e,n)=>{var r=n(60906),i=n(67574)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},1763:(t,e,n)=>{t.exports=!n(79448)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},1882:(t,e,n)=>{var r=n(72552),i=n(23805);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},2490:(t,e,n)=>{n(37209)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},2523:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},2543:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",v="[object Array]",m="[object Boolean]",y="[object Date]",b="[object Error]",x="[object Function]",w="[object GeneratorFunction]",_="[object Map]",A="[object Number]",S="[object Object]",E="[object Promise]",k="[object RegExp]",T="[object Set]",P="[object String]",C="[object Symbol]",O="[object WeakMap]",M="[object ArrayBuffer]",N="[object DataView]",L="[object Float32Array]",I="[object Float64Array]",j="[object Int8Array]",B="[object Int16Array]",R="[object Int32Array]",D="[object Uint8Array]",F="[object Uint8ClampedArray]",V="[object Uint16Array]",z="[object Uint32Array]",G=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,W=RegExp(H.source),X=RegExp($.source),Y=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",At="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+wt+"]",Ct="["+Tt+"]",Ot="["+_t+"]",Mt="\\d+",Nt="["+At+"]",Lt="["+St+"]",It="[^"+wt+Tt+Mt+At+St+Et+"]",jt="\\ud83c[\\udffb-\\udfff]",Bt="[^"+wt+"]",Rt="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+Et+"]",Vt="\\u200d",zt="(?:"+Lt+"|"+It+")",Gt="(?:"+Ft+"|"+It+")",Ut="(?:['’](?:d|ll|m|re|s|t|ve))?",qt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Ot+"|"+jt+")?",$t="["+kt+"]?",Wt=$t+Ht+"(?:"+Vt+"(?:"+[Bt,Rt,Dt].join("|")+")"+$t+Ht+")*",Xt="(?:"+[Nt,Rt,Dt].join("|")+")"+Wt,Yt="(?:"+[Bt+Ot+"?",Ot,Rt,Dt,Pt].join("|")+")",Jt=RegExp("['’]","g"),Zt=RegExp(Ot,"g"),Kt=RegExp(jt+"(?="+jt+")|"+Yt+Wt,"g"),Qt=RegExp([Ft+"?"+Lt+"+"+Ut+"(?="+[Ct,Ft,"$"].join("|")+")",Gt+"+"+qt+"(?="+[Ct,Ft+zt,"$"].join("|")+")",Ft+"?"+zt+"+"+Ut,Ft+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Xt].join("|"),"g"),te=RegExp("["+Vt+wt+_t+kt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[L]=ie[I]=ie[j]=ie[B]=ie[R]=ie[D]=ie[F]=ie[V]=ie[z]=!0,ie[g]=ie[v]=ie[M]=ie[m]=ie[N]=ie[y]=ie[b]=ie[x]=ie[_]=ie[A]=ie[S]=ie[k]=ie[T]=ie[P]=ie[O]=!1;var oe={};oe[g]=oe[v]=oe[M]=oe[N]=oe[m]=oe[y]=oe[L]=oe[I]=oe[j]=oe[B]=oe[R]=oe[_]=oe[A]=oe[S]=oe[k]=oe[T]=oe[P]=oe[C]=oe[D]=oe[F]=oe[V]=oe[z]=!0,oe[b]=oe[x]=oe[O]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ue=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,le="object"==typeof self&&self&&self.Object===Object&&self,he=ce||le||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,ge=pe&&ce.process,ve=function(){try{return de&&de.require&&de.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),me=ve&&ve.isArrayBuffer,ye=ve&&ve.isDate,be=ve&&ve.isMap,xe=ve&&ve.isRegExp,we=ve&&ve.isSet,_e=ve&&ve.isTypedArray;function Ae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Se(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function Ee(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ce(t,e){return!(null==t||!t.length)&&Fe(t,e,0)>-1}function Oe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Me(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Le(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ie(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Be=Ue("length");function Re(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function De(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Fe(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):De(t,ze,n)}function Ve(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function ze(t){return t!=t}function Ge(t,e){var n=null==t?0:t.length;return n?$e(t,e)/n:f}function Ue(t){return function(e){return null==e?i:e[t]}}function qe(t){return function(e){return null==t?i:t[e]}}function He(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function $e(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function We(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Xe(t){return t?t.slice(0,fn(t)+1).replace(rt,""):t}function Ye(t){return function(e){return t(e)}}function Je(t,e){return Me(e,(function(e){return t[e]}))}function Ze(t,e){return t.has(e)}function Ke(t,e){for(var n=-1,r=t.length;++n<r&&Fe(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length;n--&&Fe(e,t[n],0)>-1;);return n}var tn=qe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+se[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function sn(t,e){return function(n){return t(e(n))}}function an(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ln(t){return rn(t)?function(t){for(var e=Kt.lastIndex=0;Kt.test(t);)++e;return e}(t):Be(t)}function hn(t){return rn(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var dn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?he:pn.defaults(he.Object(),e,pn.pick(he,ne))).Array,it=e.Date,wt=e.Error,_t=e.Function,At=e.Math,St=e.Object,Et=e.RegExp,kt=e.String,Tt=e.TypeError,Pt=r.prototype,Ct=_t.prototype,Ot=St.prototype,Mt=e["__core-js_shared__"],Nt=Ct.toString,Lt=Ot.hasOwnProperty,It=0,jt=(n=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Bt=Ot.toString,Rt=Nt.call(St),Dt=he._,Ft=Et("^"+Nt.call(Lt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=pe?e.Buffer:i,zt=e.Symbol,Gt=e.Uint8Array,Ut=Vt?Vt.allocUnsafe:i,qt=sn(St.getPrototypeOf,St),Ht=St.create,$t=Ot.propertyIsEnumerable,Wt=Pt.splice,Xt=zt?zt.isConcatSpreadable:i,Yt=zt?zt.iterator:i,Kt=zt?zt.toStringTag:i,te=function(){try{var t=uo(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),se=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ce=it&&it.now!==he.Date.now&&it.now,le=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=At.ceil,de=At.floor,ge=St.getOwnPropertySymbols,ve=Vt?Vt.isBuffer:i,Be=e.isFinite,qe=Pt.join,gn=sn(St.keys,St),vn=At.max,mn=At.min,yn=it.now,bn=e.parseInt,xn=At.random,wn=Pt.reverse,_n=uo(e,"DataView"),An=uo(e,"Map"),Sn=uo(e,"Promise"),En=uo(e,"Set"),kn=uo(e,"WeakMap"),Tn=uo(St,"create"),Pn=kn&&new kn,Cn={},On=jo(_n),Mn=jo(An),Nn=jo(Sn),Ln=jo(En),In=jo(kn),jn=zt?zt.prototype:i,Bn=jn?jn.valueOf:i,Rn=jn?jn.toString:i;function Dn(t){if(Ks(t)&&!zs(t)&&!(t instanceof Gn)){if(t instanceof zn)return t;if(Lt.call(t,"__wrapped__"))return Bo(t)}return new zn(t)}var Fn=function(){function t(){}return function(e){if(!Zs(e))return{};if(Ht)return Ht(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Vn(){}function zn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Wn(t){var e=this.__data__=new qn(t);this.size=e.size}function Xn(t,e){var n=zs(t),r=!n&&Vs(t),i=!n&&!r&&Hs(t),o=!n&&!r&&!i&&sa(t),s=n||r||i||o,a=s?We(t.length,kt):[],u=a.length;for(var c in t)!e&&!Lt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,u))||a.push(c);return a}function Yn(t){var e=t.length;return e?t[Hr(0,e-1)]:i}function Jn(t,e){return No(ki(t),or(e,0,t.length))}function Zn(t){return No(ki(t))}function Kn(t,e,n){(n!==i&&!Rs(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Qn(t,e,n){var r=t[e];Lt.call(t,e)&&Rs(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Rs(t[n][0],e))return n;return-1}function er(t,e,n,r){return lr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Ti(e,Pa(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Aa(t,e[n]);return s}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function sr(t,e,n,r,o,s){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!Zs(t))return t;var h=zs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Lt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ki(t,a)}else{var f=ho(t),d=f==x||f==w;if(Hs(t))return xi(t,u);if(f==S||f==g||d&&!o){if(a=c||d?{}:po(t),!u)return c?function(t,e){return Ti(t,lo(t),e)}(t,function(t,e){return t&&Ti(e,Ca(e),t)}(a,t)):function(t,e){return Ti(t,co(t),e)}(t,nr(a,t))}else{if(!oe[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case M:return wi(t);case m:case y:return new i(+t);case N:return function(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case I:case j:case B:case R:case D:case F:case V:case z:return _i(t,n);case _:return new i;case A:case P:return new i(t);case k:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new i;case C:return r=t,Bn?St(Bn.call(r)):{}}}(t,f,u)}}s||(s=new Wn);var p=s.get(t);if(p)return p;s.set(t,a),ra(t)?t.forEach((function(r){a.add(sr(r,e,n,r,t,s))})):Qs(t)&&t.forEach((function(r,i){a.set(i,sr(r,e,n,i,t,s))}));var v=h?i:(l?c?eo:to:c?Ca:Pa)(t);return Ee(v||t,(function(r,i){v&&(r=t[i=r]),Qn(a,i,sr(r,e,n,i,t,s))})),a}function ar(t,e,n){var r=n.length;if(null==t)return!r;for(t=St(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Tt(o);return Po((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,o=Ce,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Me(e,Ye(n))),r?(o=Oe,s=!1):e.length>=200&&(o=Ze,s=!1,e=new $n(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Dn.templateSettings={escape:Y,evaluate:J,interpolate:Z,variable:"",imports:{_:Dn}},Dn.prototype=Vn.prototype,Dn.prototype.constructor=Dn,zn.prototype=Fn(Vn.prototype),zn.prototype.constructor=zn,Gn.prototype=Fn(Vn.prototype),Gn.prototype.constructor=Gn,Un.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(t){var e=this.__data__;if(Tn){var n=e[t];return n===s?i:n}return Lt.call(e,t)?e[t]:i},Un.prototype.has=function(t){var e=this.__data__;return Tn?e[t]!==i:Lt.call(e,t)},Un.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tn&&e===i?s:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Wt.call(e,n,1),--this.size,0))},qn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},qn.prototype.has=function(t){return tr(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(An||qn),string:new Un}},Hn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return so(this,t).get(t)},Hn.prototype.has=function(t){return so(this,t).has(t)},Hn.prototype.set=function(t,e){var n=so(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(t){return this.__data__.set(t,s),this},$n.prototype.has=function(t){return this.__data__.has(t)},Wn.prototype.clear=function(){this.__data__=new qn,this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Wn.prototype.get=function(t){return this.__data__.get(t)},Wn.prototype.has=function(t){return this.__data__.has(t)},Wn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!An||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(t,e),this.size=n.size,this};var lr=Oi(yr),hr=Oi(br,!0);function fr(t,e){var n=!0;return lr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!oa(a):n(a,u)))var u=a,c=s}return c}function pr(t,e){var n=[];return lr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=go),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?gr(a,e-1,n,r,i):Ne(i,a):r||(i[i.length]=a)}return i}var vr=Mi(),mr=Mi(!0);function yr(t,e){return t&&vr(t,e,Pa)}function br(t,e){return t&&mr(t,e,Pa)}function xr(t,e){return Pe(e,(function(e){return Xs(t[e])}))}function wr(t,e){for(var n=0,r=(e=vi(e,t)).length;null!=t&&n<r;)t=t[Io(e[n++])];return n&&n==r?t:i}function _r(t,e,n){var r=e(t);return zs(t)?r:Ne(r,n(t))}function Ar(t){return null==t?t===i?"[object Undefined]":"[object Null]":Kt&&Kt in St(t)?function(t){var e=Lt.call(t,Kt),n=t[Kt];try{t[Kt]=i;var r=!0}catch(t){}var o=Bt.call(t);return r&&(e?t[Kt]=n:delete t[Kt]),o}(t):function(t){return Bt.call(t)}(t)}function Sr(t,e){return t>e}function Er(t,e){return null!=t&&Lt.call(t,e)}function kr(t,e){return null!=t&&e in St(t)}function Tr(t,e,n){for(var o=n?Oe:Ce,s=t[0].length,a=t.length,u=a,c=r(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Me(f,Ye(e))),l=mn(f.length,l),c[u]=!n&&(e||s>=120&&f.length>=120)?new $n(u&&f):i}f=t[0];var d=-1,p=c[0];t:for(;++d<s&&h.length<l;){var g=f[d],v=e?e(g):g;if(g=n||0!==g?g:0,!(p?Ze(p,v):o(h,v,n))){for(u=a;--u;){var m=c[u];if(!(m?Ze(m,v):o(t[u],v,n)))continue t}p&&p.push(v),h.push(g)}}return h}function Pr(t,e,n){var r=null==(t=Eo(t,e=vi(e,t)))?t:t[Io(Wo(e))];return null==r?i:Ae(r,t,n)}function Cr(t){return Ks(t)&&Ar(t)==g}function Or(t,e,n,r,o){return t===e||(null==t||null==e||!Ks(t)&&!Ks(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=zs(t),u=zs(e),c=a?v:ho(t),l=u?v:ho(e),h=(c=c==g?S:c)==S,f=(l=l==g?S:l)==S,d=c==l;if(d&&Hs(t)){if(!Hs(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Wn),a||sa(t)?Ki(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!o(new Gt(t),new Gt(e)));case m:case y:case A:return Rs(+t,+e);case b:return t.name==e.name&&t.message==e.message;case k:case P:return t==e+"";case _:var a=on;case T:var u=1&r;if(a||(a=un),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Ki(a(t),a(e),r,i,o,s);return s.delete(t),l;case C:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var p=h&&Lt.call(t,"__wrapped__"),x=f&&Lt.call(e,"__wrapped__");if(p||x){var w=p?t.value():t,E=x?e.value():e;return s||(s=new Wn),o(w,E,n,r,s)}}return!!d&&(s||(s=new Wn),function(t,e,n,r,o,s){var a=1&n,u=to(t),c=u.length;if(c!=to(e).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:Lt.call(e,h)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++l<c;){var v=t[h=u[l]],m=e[h];if(r)var y=a?r(m,v,h,e,t,s):r(v,m,h,t,e,s);if(!(y===i?v===m||o(v,m,n,r,s):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,o,s))}(t,e,n,r,Or,o))}function Mr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=St(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new Wn;if(r)var d=r(l,h,c,t,e,f);if(!(d===i?Or(h,l,3,r,f):d))return!1}}return!0}function Nr(t){return!(!Zs(t)||(e=t,jt&&jt in e))&&(Xs(t)?Ft:gt).test(jo(t));var e}function Lr(t){return"function"==typeof t?t:null==t?tu:"object"==typeof t?zs(t)?Dr(t[0],t[1]):Rr(t):cu(t)}function Ir(t){if(!wo(t))return gn(t);var e=[];for(var n in St(t))Lt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t,e){return t<e}function Br(t,e){var n=-1,i=Us(t)?r(t.length):[];return lr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Rr(t){var e=ao(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Mr(n,t,e)}}function Dr(t,e){return yo(t)&&_o(e)?Ao(Io(t),e):function(n){var r=Aa(n,t);return r===i&&r===e?Sa(n,t):Or(e,r,3)}}function Fr(t,e,n,r,o){t!==e&&vr(e,(function(s,a){if(o||(o=new Wn),Zs(s))!function(t,e,n,r,o,s,a){var u=ko(t,n),c=ko(e,n),l=a.get(c);if(l)Kn(t,n,l);else{var h=s?s(u,c,n+"",t,e,a):i,f=h===i;if(f){var d=zs(c),p=!d&&Hs(c),g=!d&&!p&&sa(c);h=c,d||p||g?zs(u)?h=u:qs(u)?h=ki(u):p?(f=!1,h=xi(c,!0)):g?(f=!1,h=_i(c,!0)):h=[]:ea(c)||Vs(c)?(h=u,Vs(u)?h=pa(u):Zs(u)&&!Xs(u)||(h=po(c))):f=!1}f&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Kn(t,n,h)}}(t,e,a,n,Fr,r,o);else{var u=r?r(ko(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Kn(t,a,u)}}),Ca)}function Vr(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:i}function zr(t,e,n){e=e.length?Me(e,(function(t){return zs(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t})):[tu];var r=-1;e=Me(e,Ye(oo()));var i=Br(t,(function(t,n,i){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t){var e=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Ai(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));e--;)t[e]=t[e].value;return t}(i)}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=wr(t,s);n(a,s)&&Jr(o,vi(s,t),a)}return o}function Ur(t,e,n,r){var i=r?Ve:Fe,o=-1,s=e.length,a=t;for(t===e&&(e=ki(e)),n&&(a=Me(t,Ye(n)));++o<s;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&Wt.call(a,u,1),Wt.call(t,u,1);return t}function qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;vo(i)?Wt.call(t,i,1):ui(t,i)}}return t}function Hr(t,e){return t+de(xn()*(e-t+1))}function $r(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Wr(t,e){return Co(So(t,e,tu),t+"")}function Xr(t){return Yn(Ra(t))}function Yr(t,e){var n=Ra(t);return No(n,or(e,0,n.length))}function Jr(t,e,n,r){if(!Zs(t))return t;for(var o=-1,s=(e=vi(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=Io(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=Zs(h)?h:vo(e[o+1])?[]:{})}Qn(u,c,l),u=u[c]}return t}var Zr=Pn?function(t,e){return Pn.set(t,e),t}:tu,Kr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Za(e),writable:!0})}:tu;function Qr(t){return No(Ra(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ei(t,e){var n;return lr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!oa(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ri(t,e,tu,n)}function ri(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,c=oa(e),l=e===i;o<s;){var h=de((o+s)/2),f=n(t[h]),d=f!==i,p=null===f,g=f==f,v=oa(f);if(a)var m=r||g;else m=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);m?o=h+1:s=h}return mn(s,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Rs(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function oi(t){return"number"==typeof t?t:oa(t)?f:+t}function si(t){if("string"==typeof t)return t;if(zs(t))return Me(t,si)+"";if(oa(t))return Rn?Rn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ai(t,e,n){var r=-1,i=Ce,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Oe;else if(o>=200){var c=e?null:$i(t);if(c)return un(c);s=!1,i=Ze,u=new $n}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ui(t,e){return null==(t=Eo(t,e=vi(e,t)))||delete t[Io(Wo(e))]}function ci(t,e,n,r){return Jr(t,e,n(wr(t,e)),r)}function li(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),Le(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?ai(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=cr(s[o]||a,t[u],e,n));return ai(gr(s,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function pi(t){return qs(t)?t:[]}function gi(t){return"function"==typeof t?t:tu}function vi(t,e){return zs(t)?t:yo(t,e)?[t]:Lo(ga(t))}var mi=Wr;function yi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var bi=se||function(t){return he.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Ut?Ut(n):new t.constructor(n);return t.copy(r),r}function wi(t){var e=new t.constructor(t.byteLength);return new Gt(e).set(new Gt(t)),e}function _i(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=oa(t),a=e!==i,u=null===e,c=e==e,l=oa(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!l&&t<e||l&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Si(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,l=vn(s-a,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function Ei(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,l=e.length,h=vn(s-u,0),f=r(h+l),d=!i;++o<h;)f[o]=t[o];for(var p=o;++c<l;)f[p+c]=e[c];for(;++a<u;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function ki(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ti(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?rr(n,u,c):Qn(n,u,c)}return n}function Pi(t,e){return function(n,r){var i=zs(n)?Se:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ci(t){return Wr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&mo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=St(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}function Oi(t,e){return function(n,r){if(null==n)return n;if(!Us(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=St(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Mi(t){return function(e,n,r){for(var i=-1,o=St(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Ni(t){return function(e){var n=rn(e=ga(e))?hn(e):i,r=n?n[0]:e.charAt(0),o=n?yi(n,1).join(""):e.slice(1);return r[t]()+o}}function Li(t){return function(e){return Le(Xa(Va(e).replace(Jt,"")),t,"")}}function Ii(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fn(t.prototype),r=t.apply(n,e);return Zs(r)?r:n}}function ji(t){return function(e,n,r){var o=St(e);if(!Us(e)){var s=oo(n,3);e=Pa(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Bi(t){return Qi((function(e){var n=e.length,r=n,s=zn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Tt(o);if(s&&!u&&"wrapper"==ro(a))var u=new zn([],!0)}for(r=u?r:n;++r<n;){var c=ro(a=e[r]),l="wrapper"==c?no(a):i;u=l&&bo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[ro(l[0])].apply(u,l[3]):1==a.length&&bo(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&zs(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ri(t,e,n,o,s,a,u,l,h,f){var d=e&c,p=1&e,g=2&e,v=24&e,m=512&e,y=g?i:Ii(t);return function c(){for(var b=arguments.length,x=r(b),w=b;w--;)x[w]=arguments[w];if(v)var _=io(c),A=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(x,_);if(o&&(x=Si(x,o,s,v)),a&&(x=Ei(x,a,u,v)),b-=A,v&&b<f){var S=an(x,_);return qi(t,e,Ri,c.placeholder,n,x,S,l,h,f-b)}var E=p?n:this,k=g?E[t]:t;return b=x.length,l?x=function(t,e){for(var n=t.length,r=mn(e.length,n),o=ki(t);r--;){var s=e[r];t[r]=vo(s,n)?o[s]:i}return t}(x,l):m&&b>1&&x.reverse(),d&&h<b&&(x.length=h),this&&this!==he&&this instanceof c&&(k=y||Ii(k)),k.apply(E,x)}}function Di(t,e){return function(n,r){return function(t,e,n,r){return yr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Fi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Vi(t){return Qi((function(e){return e=Me(e,Ye(oo())),Wr((function(n){var r=this;return t(e,(function(t){return Ae(t,r,n)}))}))}))}function zi(t,e){var n=(e=e===i?" ":si(e)).length;if(n<2)return n?$r(e,t):e;var r=$r(e,fe(t/ln(e)));return rn(e)?yi(hn(r),0,t).join(""):r.slice(0,t)}function Gi(t){return function(e,n,o){return o&&"number"!=typeof o&&mo(e,n,o)&&(n=o=i),e=la(e),n===i?(n=e,e=0):n=la(n),function(t,e,n,i){for(var o=-1,s=vn(fe((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:la(o),t)}}function Ui(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=da(e),n=da(n)),t(e,n)}}function qi(t,e,n,r,o,s,a,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,l,h],p=n.apply(i,d);return bo(t)&&To(p,d),p.placeholder=r,Oo(p,t,e)}function Hi(t){var e=At[t];return function(t,n){if(t=da(t),(n=null==n?0:mn(ha(n),292))&&Be(t)){var r=(ga(t)+"e").split("e");return+((r=(ga(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var $i=En&&1/un(new En([,-0]))[1]==l?function(t){return new En(t)}:ou;function Wi(t){return function(e){var n=ho(e);return n==_?on(e):n==T?cn(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,n,s,l,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new Tt(o);var g=s?s.length:0;if(g||(e&=-97,s=l=i),f=f===i?f:vn(ha(f),0),d=d===i?d:ha(d),g-=l?l.length:0,64&e){var v=s,m=l;s=l=i}var y=p?i:no(t),b=[t,e,n,s,l,v,m,h,f,d];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Si(l,u,e[4]):u,t[4]=l?an(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?Ei(l,u,e[6]):u,t[6]=l?an(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],s=b[3],l=b[4],!(d=b[9]=b[9]===i?p?0:t.length:vn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var o=Ii(t);return function s(){for(var a=arguments.length,u=r(a),c=a,l=io(s);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:an(u,l);return(a-=h.length)<n?qi(t,e,Ri,s.placeholder,i,u,h,i,i,n-a):Ae(this&&this!==he&&this instanceof s?o:t,this,u)}}(t,e,d):e!=u&&33!=e||l.length?Ri.apply(i,b):function(t,e,n,i){var o=1&e,s=Ii(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==he&&this instanceof e?s:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return Ae(f,o?n:this,h)}}(t,e,n,s);else var x=function(t,e,n){var r=1&e,i=Ii(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Oo((y?Zr:To)(x,b),t,e)}function Yi(t,e,n,r){return t===i||Rs(t,Ot[n])&&!Lt.call(r,n)?e:t}function Ji(t,e,n,r,o,s){return Zs(t)&&Zs(e)&&(s.set(e,t),Fr(t,e,i,Ji,s),s.delete(e)),t}function Zi(t){return ea(t)?i:t}function Ki(t,e,n,r,o,s){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new $n:i;for(s.set(t,e),s.set(e,t);++f<u;){var g=t[f],v=e[f];if(r)var m=a?r(v,g,f,e,t,s):r(g,v,f,t,e,s);if(m!==i){if(m)continue;d=!1;break}if(p){if(!je(e,(function(t,e){if(!Ze(p,e)&&(g===t||o(g,t,n,r,s)))return p.push(e)}))){d=!1;break}}else if(g!==v&&!o(g,v,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function Qi(t){return Co(So(t,i,Go),t+"")}function to(t){return _r(t,Pa,co)}function eo(t){return _r(t,Ca,lo)}var no=Pn?function(t){return Pn.get(t)}:ou;function ro(t){for(var e=t.name+"",n=Cn[e],r=Lt.call(Cn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Lt.call(Dn,"placeholder")?Dn:t).placeholder}function oo(){var t=Dn.iteratee||eu;return t=t===eu?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ao(t){for(var e=Pa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,_o(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Nr(n)?n:i}var co=ge?function(t){return null==t?[]:(t=St(t),Pe(ge(t),(function(e){return $t.call(t,e)})))}:fu,lo=ge?function(t){for(var e=[];t;)Ne(e,co(t)),t=qt(t);return e}:fu,ho=Ar;function fo(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,o=!1;++r<i;){var s=Io(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Js(i)&&vo(s,i)&&(zs(t)||Vs(t))}function po(t){return"function"!=typeof t.constructor||wo(t)?{}:Fn(qt(t))}function go(t){return zs(t)||Vs(t)||!!(Xt&&t&&t[Xt])}function vo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!Zs(n))return!1;var r=typeof e;return!!("number"==r?Us(n)&&vo(e,n.length):"string"==r&&e in n)&&Rs(n[e],t)}function yo(t,e){if(zs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!oa(t))||Q.test(t)||!K.test(t)||null!=e&&t in St(e)}function bo(t){var e=ro(t),n=Dn[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(_n&&ho(new _n(new ArrayBuffer(1)))!=N||An&&ho(new An)!=_||Sn&&ho(Sn.resolve())!=E||En&&ho(new En)!=T||kn&&ho(new kn)!=O)&&(ho=function(t){var e=Ar(t),n=e==S?t.constructor:i,r=n?jo(n):"";if(r)switch(r){case On:return N;case Mn:return _;case Nn:return E;case Ln:return T;case In:return O}return e});var xo=Mt?Xs:du;function wo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function _o(t){return t==t&&!Zs(t)}function Ao(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in St(n))}}function So(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=vn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),Ae(t,this,u)}}function Eo(t,e){return e.length<2?t:wr(t,ti(e,0,-1))}function ko(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var To=Mo(Zr),Po=le||function(t,e){return he.setTimeout(t,e)},Co=Mo(Kr);function Oo(t,e,n){var r=e+"";return Co(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ee(p,(function(n){var r="_."+n[0];e&n[1]&&!Ce(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Mo(t){var e=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function No(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Hr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Lo=function(){var t=Ms((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===e.size&&e.clear(),t})),e=t.cache;return t}();function Io(t){if("string"==typeof t||oa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Nt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bo(t){if(t instanceof Gn)return t.clone();var e=new zn(t.__wrapped__,t.__chain__);return e.__actions__=ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ro=Wr((function(t,e){return qs(t)?cr(t,gr(e,1,qs,!0)):[]})),Do=Wr((function(t,e){var n=Wo(e);return qs(n)&&(n=i),qs(t)?cr(t,gr(e,1,qs,!0),oo(n,2)):[]})),Fo=Wr((function(t,e){var n=Wo(e);return qs(n)&&(n=i),qs(t)?cr(t,gr(e,1,qs,!0),i,n):[]}));function Vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ha(n);return i<0&&(i=vn(r+i,0)),De(t,oo(e,3),i)}function zo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ha(n),o=n<0?vn(r+o,0):mn(o,r-1)),De(t,oo(e,3),o,!0)}function Go(t){return null!=t&&t.length?gr(t,1):[]}function Uo(t){return t&&t.length?t[0]:i}var qo=Wr((function(t){var e=Me(t,pi);return e.length&&e[0]===t[0]?Tr(e):[]})),Ho=Wr((function(t){var e=Wo(t),n=Me(t,pi);return e===Wo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Tr(n,oo(e,2)):[]})),$o=Wr((function(t){var e=Wo(t),n=Me(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Tr(n,i,e):[]}));function Wo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Xo=Wr(Yo);function Yo(t,e){return t&&t.length&&e&&e.length?Ur(t,e):t}var Jo=Qi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return qr(t,Me(e,(function(t){return vo(t,n)?+t:t})).sort(Ai)),r}));function Zo(t){return null==t?t:wn.call(t)}var Ko=Wr((function(t){return ai(gr(t,1,qs,!0))})),Qo=Wr((function(t){var e=Wo(t);return qs(e)&&(e=i),ai(gr(t,1,qs,!0),oo(e,2))})),ts=Wr((function(t){var e=Wo(t);return e="function"==typeof e?e:i,ai(gr(t,1,qs,!0),i,e)}));function es(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(qs(t))return e=vn(t.length,e),!0})),We(e,(function(e){return Me(t,Ue(e))}))}function ns(t,e){if(!t||!t.length)return[];var n=es(t);return null==e?n:Me(n,(function(t){return Ae(e,i,t)}))}var rs=Wr((function(t,e){return qs(t)?cr(t,e):[]})),is=Wr((function(t){return fi(Pe(t,qs))})),os=Wr((function(t){var e=Wo(t);return qs(e)&&(e=i),fi(Pe(t,qs),oo(e,2))})),ss=Wr((function(t){var e=Wo(t);return e="function"==typeof e?e:i,fi(Pe(t,qs),i,e)})),as=Wr(es),us=Wr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ns(t,n)}));function cs(t){var e=Dn(t);return e.__chain__=!0,e}function ls(t,e){return e(t)}var hs=Qi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&vo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ls,args:[o],thisArg:i}),new zn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),fs=Pi((function(t,e,n){Lt.call(t,n)?++t[n]:rr(t,n,1)})),ds=ji(Vo),ps=ji(zo);function gs(t,e){return(zs(t)?Ee:lr)(t,oo(e,3))}function vs(t,e){return(zs(t)?ke:hr)(t,oo(e,3))}var ms=Pi((function(t,e,n){Lt.call(t,n)?t[n].push(e):rr(t,n,[e])})),ys=Wr((function(t,e,n){var i=-1,o="function"==typeof e,s=Us(t)?r(t.length):[];return lr(t,(function(t){s[++i]=o?Ae(e,t,n):Pr(t,e,n)})),s})),bs=Pi((function(t,e,n){rr(t,n,e)}));function xs(t,e){return(zs(t)?Me:Br)(t,oo(e,3))}var ws=Pi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),_s=Wr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,gr(e,1),[])})),As=ce||function(){return he.Date.now()};function Ss(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Xi(t,c,i,i,i,i,e)}function Es(t,e){var n;if("function"!=typeof e)throw new Tt(o);return t=ha(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var ks=Wr((function(t,e,n){var r=1;if(n.length){var i=an(n,io(ks));r|=u}return Xi(t,r,e,n,i)})),Ts=Wr((function(t,e,n){var r=3;if(n.length){var i=an(n,io(Ts));r|=u}return Xi(e,r,t,n,i)}));function Ps(t,e,n){var r,s,a,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Tt(o);function g(e){var n=r,o=s;return r=s=i,h=e,u=t.apply(o,n)}function v(t){var n=t-l;return l===i||n>=e||n<0||d&&t-h>=a}function m(){var t=As();if(v(t))return y(t);c=Po(m,function(t){var n=e-(t-l);return d?mn(n,a-(t-h)):n}(t))}function y(t){return c=i,p&&r?g(t):(r=s=i,u)}function b(){var t=As(),n=v(t);if(r=arguments,s=this,l=t,n){if(c===i)return function(t){return h=t,c=Po(m,e),f?g(t):u}(l);if(d)return bi(c),c=Po(m,e),g(l)}return c===i&&(c=Po(m,e)),u}return e=da(e)||0,Zs(n)&&(f=!!n.leading,a=(d="maxWait"in n)?vn(da(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==i&&bi(c),h=0,r=l=s=c=i},b.flush=function(){return c===i?u:y(As())},b}var Cs=Wr((function(t,e){return ur(t,1,e)})),Os=Wr((function(t,e,n){return ur(t,da(e)||0,n)}));function Ms(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ms.Cache||Hn),n}function Ns(t){if("function"!=typeof t)throw new Tt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ms.Cache=Hn;var Ls=mi((function(t,e){var n=(e=1==e.length&&zs(e[0])?Me(e[0],Ye(oo())):Me(gr(e,1),Ye(oo()))).length;return Wr((function(r){for(var i=-1,o=mn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ae(t,this,r)}))})),Is=Wr((function(t,e){var n=an(e,io(Is));return Xi(t,u,i,e,n)})),js=Wr((function(t,e){var n=an(e,io(js));return Xi(t,64,i,e,n)})),Bs=Qi((function(t,e){return Xi(t,256,i,i,i,e)}));function Rs(t,e){return t===e||t!=t&&e!=e}var Ds=Ui(Sr),Fs=Ui((function(t,e){return t>=e})),Vs=Cr(function(){return arguments}())?Cr:function(t){return Ks(t)&&Lt.call(t,"callee")&&!$t.call(t,"callee")},zs=r.isArray,Gs=me?Ye(me):function(t){return Ks(t)&&Ar(t)==M};function Us(t){return null!=t&&Js(t.length)&&!Xs(t)}function qs(t){return Ks(t)&&Us(t)}var Hs=ve||du,$s=ye?Ye(ye):function(t){return Ks(t)&&Ar(t)==y};function Ws(t){if(!Ks(t))return!1;var e=Ar(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ea(t)}function Xs(t){if(!Zs(t))return!1;var e=Ar(t);return e==x||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ys(t){return"number"==typeof t&&t==ha(t)}function Js(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Zs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ks(t){return null!=t&&"object"==typeof t}var Qs=be?Ye(be):function(t){return Ks(t)&&ho(t)==_};function ta(t){return"number"==typeof t||Ks(t)&&Ar(t)==A}function ea(t){if(!Ks(t)||Ar(t)!=S)return!1;var e=qt(t);if(null===e)return!0;var n=Lt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Nt.call(n)==Rt}var na=xe?Ye(xe):function(t){return Ks(t)&&Ar(t)==k},ra=we?Ye(we):function(t){return Ks(t)&&ho(t)==T};function ia(t){return"string"==typeof t||!zs(t)&&Ks(t)&&Ar(t)==P}function oa(t){return"symbol"==typeof t||Ks(t)&&Ar(t)==C}var sa=_e?Ye(_e):function(t){return Ks(t)&&Js(t.length)&&!!ie[Ar(t)]},aa=Ui(jr),ua=Ui((function(t,e){return t<=e}));function ca(t){if(!t)return[];if(Us(t))return ia(t)?hn(t):ki(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=ho(t);return(e==_?on:e==T?un:Ra)(t)}function la(t){return t?(t=da(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ha(t){var e=la(t),n=e%1;return e==e?n?e-n:e:0}function fa(t){return t?or(ha(t),0,d):0}function da(t){if("number"==typeof t)return t;if(oa(t))return f;if(Zs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Zs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Xe(t);var n=pt.test(t);return n||vt.test(t)?ue(t.slice(2),n?2:8):dt.test(t)?f:+t}function pa(t){return Ti(t,Ca(t))}function ga(t){return null==t?"":si(t)}var va=Ci((function(t,e){if(wo(e)||Us(e))Ti(e,Pa(e),t);else for(var n in e)Lt.call(e,n)&&Qn(t,n,e[n])})),ma=Ci((function(t,e){Ti(e,Ca(e),t)})),ya=Ci((function(t,e,n,r){Ti(e,Ca(e),t,r)})),ba=Ci((function(t,e,n,r){Ti(e,Pa(e),t,r)})),xa=Qi(ir),wa=Wr((function(t,e){t=St(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&mo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Ca(s),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||Rs(h,Ot[l])&&!Lt.call(t,l))&&(t[l]=s[l])}return t})),_a=Wr((function(t){return t.push(i,Ji),Ae(Ma,i,t)}));function Aa(t,e,n){var r=null==t?i:wr(t,e);return r===i?n:r}function Sa(t,e){return null!=t&&fo(t,e,kr)}var Ea=Di((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),Za(tu)),ka=Di((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),Lt.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Ta=Wr(Pr);function Pa(t){return Us(t)?Xn(t):Ir(t)}function Ca(t){return Us(t)?Xn(t,!0):function(t){if(!Zs(t))return function(t){var e=[];if(null!=t)for(var n in St(t))e.push(n);return e}(t);var e=wo(t),n=[];for(var r in t)("constructor"!=r||!e&&Lt.call(t,r))&&n.push(r);return n}(t)}var Oa=Ci((function(t,e,n){Fr(t,e,n)})),Ma=Ci((function(t,e,n,r){Fr(t,e,n,r)})),Na=Qi((function(t,e){var n={};if(null==t)return n;var r=!1;e=Me(e,(function(e){return e=vi(e,t),r||(r=e.length>1),e})),Ti(t,eo(t),n),r&&(n=sr(n,7,Zi));for(var i=e.length;i--;)ui(n,e[i]);return n})),La=Qi((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Sa(t,n)}))}(t,e)}));function Ia(t,e){if(null==t)return{};var n=Me(eo(t),(function(t){return[t]}));return e=oo(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var ja=Wi(Pa),Ba=Wi(Ca);function Ra(t){return null==t?[]:Je(t,Pa(t))}var Da=Li((function(t,e,n){return e=e.toLowerCase(),t+(n?Fa(e):e)}));function Fa(t){return Wa(ga(t).toLowerCase())}function Va(t){return(t=ga(t))&&t.replace(yt,tn).replace(Zt,"")}var za=Li((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ga=Li((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ua=Ni("toLowerCase"),qa=Li((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ha=Li((function(t,e,n){return t+(n?" ":"")+Wa(e)})),$a=Li((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Wa=Ni("toUpperCase");function Xa(t,e,n){return t=ga(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Ya=Wr((function(t,e){try{return Ae(t,i,e)}catch(t){return Ws(t)?t:new wt(t)}})),Ja=Qi((function(t,e){return Ee(e,(function(e){e=Io(e),rr(t,e,ks(t[e],t))})),t}));function Za(t){return function(){return t}}var Ka=Bi(),Qa=Bi(!0);function tu(t){return t}function eu(t){return Lr("function"==typeof t?t:sr(t,1))}var nu=Wr((function(t,e){return function(n){return Pr(n,t,e)}})),ru=Wr((function(t,e){return function(n){return Pr(t,n,e)}}));function iu(t,e,n){var r=Pa(e),i=xr(e,r);null!=n||Zs(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Pa(e)));var o=!(Zs(n)&&"chain"in n&&!n.chain),s=Xs(t);return Ee(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=ki(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function ou(){}var su=Vi(Me),au=Vi(Te),uu=Vi(je);function cu(t){return yo(t)?Ue(Io(t)):function(t){return function(e){return wr(e,t)}}(t)}var lu=Gi(),hu=Gi(!0);function fu(){return[]}function du(){return!1}var pu,gu=Fi((function(t,e){return t+e}),0),vu=Hi("ceil"),mu=Fi((function(t,e){return t/e}),1),yu=Hi("floor"),bu=Fi((function(t,e){return t*e}),1),xu=Hi("round"),wu=Fi((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new Tt(o);return t=ha(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=Ss,Dn.assign=va,Dn.assignIn=ma,Dn.assignInWith=ya,Dn.assignWith=ba,Dn.at=xa,Dn.before=Es,Dn.bind=ks,Dn.bindAll=Ja,Dn.bindKey=Ts,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return zs(t)?t:[t]},Dn.chain=cs,Dn.chunk=function(t,e,n){e=(n?mo(t,e,n):e===i)?1:vn(ha(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(fe(o/e));s<o;)u[a++]=ti(t,s,s+=e);return u},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ne(zs(n)?ki(n):[n],gr(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new Tt(o);return[n(t[0]),t[1]]})):[],Wr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ae(i[0],this,n))return Ae(i[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=Pa(t);return function(n){return ar(n,t,e)}}(sr(t,1))},Dn.constant=Za,Dn.countBy=fs,Dn.create=function(t,e){var n=Fn(t);return null==e?n:nr(n,e)},Dn.curry=function t(e,n,r){var o=Xi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Dn.curryRight=function t(e,n,r){var o=Xi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Dn.debounce=Ps,Dn.defaults=wa,Dn.defaultsDeep=_a,Dn.defer=Cs,Dn.delay=Os,Dn.difference=Ro,Dn.differenceBy=Do,Dn.differenceWith=Fo,Dn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ha(e))<0?0:e,r):[]},Dn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ha(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0):[]},Dn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&mo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ha(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ha(r))<0&&(r+=o),r=n>r?0:fa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Dn.filter=function(t,e){return(zs(t)?Pe:pr)(t,oo(e,3))},Dn.flatMap=function(t,e){return gr(xs(t,e),1)},Dn.flatMapDeep=function(t,e){return gr(xs(t,e),l)},Dn.flatMapDepth=function(t,e,n){return n=n===i?1:ha(n),gr(xs(t,e),n)},Dn.flatten=Go,Dn.flattenDeep=function(t){return null!=t&&t.length?gr(t,l):[]},Dn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:ha(e)):[]},Dn.flip=function(t){return Xi(t,512)},Dn.flow=Ka,Dn.flowRight=Qa,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Dn.functions=function(t){return null==t?[]:xr(t,Pa(t))},Dn.functionsIn=function(t){return null==t?[]:xr(t,Ca(t))},Dn.groupBy=ms,Dn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Dn.intersection=qo,Dn.intersectionBy=Ho,Dn.intersectionWith=$o,Dn.invert=Ea,Dn.invertBy=ka,Dn.invokeMap=ys,Dn.iteratee=eu,Dn.keyBy=bs,Dn.keys=Pa,Dn.keysIn=Ca,Dn.map=xs,Dn.mapKeys=function(t,e){var n={};return e=oo(e,3),yr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},Dn.mapValues=function(t,e){var n={};return e=oo(e,3),yr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},Dn.matches=function(t){return Rr(sr(t,1))},Dn.matchesProperty=function(t,e){return Dr(t,sr(e,1))},Dn.memoize=Ms,Dn.merge=Oa,Dn.mergeWith=Ma,Dn.method=nu,Dn.methodOf=ru,Dn.mixin=iu,Dn.negate=Ns,Dn.nthArg=function(t){return t=ha(t),Wr((function(e){return Vr(e,t)}))},Dn.omit=Na,Dn.omitBy=function(t,e){return Ia(t,Ns(oo(e)))},Dn.once=function(t){return Es(2,t)},Dn.orderBy=function(t,e,n,r){return null==t?[]:(zs(e)||(e=null==e?[]:[e]),zs(n=r?i:n)||(n=null==n?[]:[n]),zr(t,e,n))},Dn.over=su,Dn.overArgs=Ls,Dn.overEvery=au,Dn.overSome=uu,Dn.partial=Is,Dn.partialRight=js,Dn.partition=ws,Dn.pick=La,Dn.pickBy=Ia,Dn.property=cu,Dn.propertyOf=function(t){return function(e){return null==t?i:wr(t,e)}},Dn.pull=Xo,Dn.pullAll=Yo,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,oo(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,i,n):t},Dn.pullAt=Jo,Dn.range=lu,Dn.rangeRight=hu,Dn.rearg=Bs,Dn.reject=function(t,e){return(zs(t)?Pe:pr)(t,Ns(oo(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return qr(t,i),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new Tt(o);return Wr(t,e=e===i?e:ha(e))},Dn.reverse=Zo,Dn.sampleSize=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:ha(e),(zs(t)?Jn:Yr)(t,e)},Dn.set=function(t,e,n){return null==t?t:Jr(t,e,n)},Dn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Jr(t,e,n,r)},Dn.shuffle=function(t){return(zs(t)?Zn:Qr)(t)},Dn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&mo(t,e,n)?(e=0,n=r):(e=null==e?0:ha(e),n=n===i?r:ha(n)),ti(t,e,n)):[]},Dn.sortBy=_s,Dn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&mo(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ga(t))&&("string"==typeof e||null!=e&&!na(e))&&!(e=si(e))&&rn(t)?yi(hn(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new Tt(o);return e=null==e?0:vn(ha(e),0),Wr((function(n){var r=n[e],i=yi(n,0,e);return r&&Ne(i,r),Ae(t,this,i)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ha(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ha(e)))<0?0:e,r):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?li(t,oo(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Tt(o);return Zs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ps(t,e,{leading:r,maxWait:e,trailing:i})},Dn.thru=ls,Dn.toArray=ca,Dn.toPairs=ja,Dn.toPairsIn=Ba,Dn.toPath=function(t){return zs(t)?Me(t,Io):oa(t)?[t]:ki(Lo(ga(t)))},Dn.toPlainObject=pa,Dn.transform=function(t,e,n){var r=zs(t),i=r||Hs(t)||sa(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Zs(t)&&Xs(o)?Fn(qt(t)):{}}return(i?Ee:yr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Dn.unary=function(t){return Ss(t,1)},Dn.union=Ko,Dn.unionBy=Qo,Dn.unionWith=ts,Dn.uniq=function(t){return t&&t.length?ai(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?ai(t,oo(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ai(t,i,e):[]},Dn.unset=function(t,e){return null==t||ui(t,e)},Dn.unzip=es,Dn.unzipWith=ns,Dn.update=function(t,e,n){return null==t?t:ci(t,e,gi(n))},Dn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,gi(n),r)},Dn.values=Ra,Dn.valuesIn=function(t){return null==t?[]:Je(t,Ca(t))},Dn.without=rs,Dn.words=Xa,Dn.wrap=function(t,e){return Is(gi(e),t)},Dn.xor=is,Dn.xorBy=os,Dn.xorWith=ss,Dn.zip=as,Dn.zipObject=function(t,e){return di(t||[],e||[],Qn)},Dn.zipObjectDeep=function(t,e){return di(t||[],e||[],Jr)},Dn.zipWith=us,Dn.entries=ja,Dn.entriesIn=Ba,Dn.extend=ma,Dn.extendWith=ya,iu(Dn,Dn),Dn.add=gu,Dn.attempt=Ya,Dn.camelCase=Da,Dn.capitalize=Fa,Dn.ceil=vu,Dn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=da(n))==n?n:0),e!==i&&(e=(e=da(e))==e?e:0),or(da(t),e,n)},Dn.clone=function(t){return sr(t,4)},Dn.cloneDeep=function(t){return sr(t,5)},Dn.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:i)},Dn.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:i)},Dn.conformsTo=function(t,e){return null==e||ar(t,e,Pa(e))},Dn.deburr=Va,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=mu,Dn.endsWith=function(t,e,n){t=ga(t),e=si(e);var r=t.length,o=n=n===i?r:or(ha(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Dn.eq=Rs,Dn.escape=function(t){return(t=ga(t))&&X.test(t)?t.replace($,en):t},Dn.escapeRegExp=function(t){return(t=ga(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Dn.every=function(t,e,n){var r=zs(t)?Te:fr;return n&&mo(t,e,n)&&(e=i),r(t,oo(e,3))},Dn.find=ds,Dn.findIndex=Vo,Dn.findKey=function(t,e){return Re(t,oo(e,3),yr)},Dn.findLast=ps,Dn.findLastIndex=zo,Dn.findLastKey=function(t,e){return Re(t,oo(e,3),br)},Dn.floor=yu,Dn.forEach=gs,Dn.forEachRight=vs,Dn.forIn=function(t,e){return null==t?t:vr(t,oo(e,3),Ca)},Dn.forInRight=function(t,e){return null==t?t:mr(t,oo(e,3),Ca)},Dn.forOwn=function(t,e){return t&&yr(t,oo(e,3))},Dn.forOwnRight=function(t,e){return t&&br(t,oo(e,3))},Dn.get=Aa,Dn.gt=Ds,Dn.gte=Fs,Dn.has=function(t,e){return null!=t&&fo(t,e,Er)},Dn.hasIn=Sa,Dn.head=Uo,Dn.identity=tu,Dn.includes=function(t,e,n,r){t=Us(t)?t:Ra(t),n=n&&!r?ha(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),ia(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Fe(t,e,n)>-1},Dn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ha(n);return i<0&&(i=vn(r+i,0)),Fe(t,e,i)},Dn.inRange=function(t,e,n){return e=la(e),n===i?(n=e,e=0):n=la(n),function(t,e,n){return t>=mn(e,n)&&t<vn(e,n)}(t=da(t),e,n)},Dn.invoke=Ta,Dn.isArguments=Vs,Dn.isArray=zs,Dn.isArrayBuffer=Gs,Dn.isArrayLike=Us,Dn.isArrayLikeObject=qs,Dn.isBoolean=function(t){return!0===t||!1===t||Ks(t)&&Ar(t)==m},Dn.isBuffer=Hs,Dn.isDate=$s,Dn.isElement=function(t){return Ks(t)&&1===t.nodeType&&!ea(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(Us(t)&&(zs(t)||"string"==typeof t||"function"==typeof t.splice||Hs(t)||sa(t)||Vs(t)))return!t.length;var e=ho(t);if(e==_||e==T)return!t.size;if(wo(t))return!Ir(t).length;for(var n in t)if(Lt.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return Or(t,e)},Dn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Or(t,e,i,n):!!r},Dn.isError=Ws,Dn.isFinite=function(t){return"number"==typeof t&&Be(t)},Dn.isFunction=Xs,Dn.isInteger=Ys,Dn.isLength=Js,Dn.isMap=Qs,Dn.isMatch=function(t,e){return t===e||Mr(t,e,ao(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Mr(t,e,ao(e),n)},Dn.isNaN=function(t){return ta(t)&&t!=+t},Dn.isNative=function(t){if(xo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=ta,Dn.isObject=Zs,Dn.isObjectLike=Ks,Dn.isPlainObject=ea,Dn.isRegExp=na,Dn.isSafeInteger=function(t){return Ys(t)&&t>=-9007199254740991&&t<=h},Dn.isSet=ra,Dn.isString=ia,Dn.isSymbol=oa,Dn.isTypedArray=sa,Dn.isUndefined=function(t){return t===i},Dn.isWeakMap=function(t){return Ks(t)&&ho(t)==O},Dn.isWeakSet=function(t){return Ks(t)&&"[object WeakSet]"==Ar(t)},Dn.join=function(t,e){return null==t?"":qe.call(t,e)},Dn.kebabCase=za,Dn.last=Wo,Dn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ha(n))<0?vn(r+o,0):mn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):De(t,ze,o,!0)},Dn.lowerCase=Ga,Dn.lowerFirst=Ua,Dn.lt=aa,Dn.lte=ua,Dn.max=function(t){return t&&t.length?dr(t,tu,Sr):i},Dn.maxBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Sr):i},Dn.mean=function(t){return Ge(t,tu)},Dn.meanBy=function(t,e){return Ge(t,oo(e,2))},Dn.min=function(t){return t&&t.length?dr(t,tu,jr):i},Dn.minBy=function(t,e){return t&&t.length?dr(t,oo(e,2),jr):i},Dn.stubArray=fu,Dn.stubFalse=du,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=bu,Dn.nth=function(t,e){return t&&t.length?Vr(t,ha(e)):i},Dn.noConflict=function(){return he._===this&&(he._=Dt),this},Dn.noop=ou,Dn.now=As,Dn.pad=function(t,e,n){t=ga(t);var r=(e=ha(e))?ln(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return zi(de(i),n)+t+zi(fe(i),n)},Dn.padEnd=function(t,e,n){t=ga(t);var r=(e=ha(e))?ln(t):0;return e&&r<e?t+zi(e-r,n):t},Dn.padStart=function(t,e,n){t=ga(t);var r=(e=ha(e))?ln(t):0;return e&&r<e?zi(e-r,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ga(t).replace(rt,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&mo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=la(t),e===i?(e=t,t=0):e=la(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=xn();return mn(t+o*(e-t+ae("1e-"+((o+"").length-1))),e)}return Hr(t,e)},Dn.reduce=function(t,e,n){var r=zs(t)?Le:He,i=arguments.length<3;return r(t,oo(e,4),n,i,lr)},Dn.reduceRight=function(t,e,n){var r=zs(t)?Ie:He,i=arguments.length<3;return r(t,oo(e,4),n,i,hr)},Dn.repeat=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:ha(e),$r(ga(t),e)},Dn.replace=function(){var t=arguments,e=ga(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var r=-1,o=(e=vi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Io(e[r])];s===i&&(r=o,s=n),t=Xs(s)?s.call(t):s}return t},Dn.round=xu,Dn.runInContext=t,Dn.sample=function(t){return(zs(t)?Yn:Xr)(t)},Dn.size=function(t){if(null==t)return 0;if(Us(t))return ia(t)?ln(t):t.length;var e=ho(t);return e==_||e==T?t.size:Ir(t).length},Dn.snakeCase=qa,Dn.some=function(t,e,n){var r=zs(t)?je:ei;return n&&mo(t,e,n)&&(e=i),r(t,oo(e,3))},Dn.sortedIndex=function(t,e){return ni(t,e)},Dn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Rs(t[r],e))return r}return-1},Dn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Rs(t[n],e))return n}return-1},Dn.startCase=Ha,Dn.startsWith=function(t,e,n){return t=ga(t),n=null==n?0:or(ha(n),0,t.length),e=si(e),t.slice(n,n+e.length)==e},Dn.subtract=wu,Dn.sum=function(t){return t&&t.length?$e(t,tu):0},Dn.sumBy=function(t,e){return t&&t.length?$e(t,oo(e,2)):0},Dn.template=function(t,e,n){var r=Dn.templateSettings;n&&mo(t,e,n)&&(e=i),t=ga(t),e=ya({},e,r,Yi);var o,s,a=ya({},e.imports,r.imports,Yi),u=Pa(a),c=Je(a,u),l=0,h=e.interpolate||bt,f="__p += '",d=Et((e.escape||bt).source+"|"+h.source+"|"+(h===Z?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Lt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(xt,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var g=Lt.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(G,""):f).replace(U,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Ya((function(){return _t(u,p+"return "+f).apply(i,c)}));if(v.source=f,Ws(v))throw v;return v},Dn.times=function(t,e){if((t=ha(t))<1||t>h)return[];var n=d,r=mn(t,d);e=oo(e),t-=d;for(var i=We(r,e);++n<t;)e(n);return i},Dn.toFinite=la,Dn.toInteger=ha,Dn.toLength=fa,Dn.toLower=function(t){return ga(t).toLowerCase()},Dn.toNumber=da,Dn.toSafeInteger=function(t){return t?or(ha(t),-9007199254740991,h):0===t?t:0},Dn.toString=ga,Dn.toUpper=function(t){return ga(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=ga(t))&&(n||e===i))return Xe(t);if(!t||!(e=si(e)))return t;var r=hn(t),o=hn(e);return yi(r,Ke(r,o),Qe(r,o)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=ga(t))&&(n||e===i))return t.slice(0,fn(t)+1);if(!t||!(e=si(e)))return t;var r=hn(t);return yi(r,0,Qe(r,hn(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=ga(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=si(e)))return t;var r=hn(t);return yi(r,Ke(r,hn(e))).join("")},Dn.truncate=function(t,e){var n=30,r="...";if(Zs(e)){var o="separator"in e?e.separator:o;n="length"in e?ha(e.length):n,r="omission"in e?si(e.omission):r}var s=(t=ga(t)).length;if(rn(t)){var a=hn(t);s=a.length}if(n>=s)return t;var u=n-ln(r);if(u<1)return r;var c=a?yi(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),na(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=Et(o.source,ga(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(si(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},Dn.unescape=function(t){return(t=ga(t))&&W.test(t)?t.replace(H,dn):t},Dn.uniqueId=function(t){var e=++It;return ga(t)+e},Dn.upperCase=$a,Dn.upperFirst=Wa,Dn.each=gs,Dn.eachRight=vs,Dn.first=Uo,iu(Dn,(pu={},yr(Dn,(function(t,e){Lt.call(Dn.prototype,e)||(pu[e]=t)})),pu),{chain:!1}),Dn.VERSION="4.17.21",Ee(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),Ee(["drop","take"],(function(t,e){Gn.prototype[t]=function(n){n=n===i?1:vn(ha(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ee(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ee(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),Ee(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(tu)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Wr((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return Pr(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(Ns(oo(t)))},Gn.prototype.slice=function(t,e){t=ha(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ha(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(d)},yr(Gn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Dn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Dn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Gn,c=a[0],l=u||zs(e),h=function(t){var e=o.apply(Dn,Ne([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=u&&!d;if(!s&&l){e=g?e:new Gn(this);var v=t.apply(e,a);return v.__actions__.push({func:ls,args:[h],thisArg:i}),new zn(v,f)}return p&&g?t.apply(this,a):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})})),Ee(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(zs(i)?i:[],t)}return this[n]((function(n){return e.apply(zs(n)?n:[],t)}))}})),yr(Gn.prototype,(function(t,e){var n=Dn[e];if(n){var r=n.name+"";Lt.call(Cn,r)||(Cn[r]=[]),Cn[r].push({name:e,func:n})}})),Cn[Ri(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=ki(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ki(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ki(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=zs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=mn(e,t+s);break;case"takeRight":t=vn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=mn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return hi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,v=t[c+=e];++g<h;){var m=l[g],y=m.iteratee,b=m.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue t;break t}}p[f++]=v}return p},Dn.prototype.at=hs,Dn.prototype.chain=function(){return cs(this)},Dn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===i&&(this.__values__=ca(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var r=Bo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:ls,args:[Zo],thisArg:i}),new zn(e,this.__chain__)}return this.thru(Zo)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,Yt&&(Dn.prototype[Yt]=function(){return this}),Dn}();he._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},2780:(t,e,n)=>{var r,i,o,s=n(35052),a=n(24877),u=n(61308),c=n(46034),l=n(67526),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,v=0,m={},y="onreadystatechange",b=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},x=function(t){b.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete m[t]},"process"==n(55089)(h)?r=function(t){h.nextTick(s(b,t,1))}:g&&g.now?r=function(t){g.now(s(b,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=x,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",x,!1)):r=y in c("script")?function(t){u.appendChild(c("script"))[y]=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:f,clear:d}},3107:(t,e,n)=>{var r=n(97380),i=n(4228),o=r.has,s=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},3335:t=>{t.exports=function(t,e){return t>e}},3344:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},3504:(t,e,n)=>{var r=n(92127),i=n(66179)(0),o=n(86884)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},3559:(t,e,n)=>{n(52468)("sub",(function(t){return function(){return t(this,"sub","","")}}))},3650:(t,e,n)=>{var r=n(74335)(Object.keys,Object);t.exports=r},3656:(t,e,n)=>{t=n.nmd(t);var r=n(9325),i=n(89935),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;t.exports=u},3733:t=>{t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},3844:(t,e,n)=>{var r=n(47967).f,i=n(57917),o=n(67574)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},3988:(t,e,n)=>{var r=n(56857),i=n(68191).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,u=t.width/2,c=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*u>Math.abs(s)*c?(a<0&&(c=-c),n=c*s/a,r=c):(s<0&&(u=-u),n=u,r=u*a/s),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(s(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,o=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%o!=0?--i:i&&r.forEach(e,(function(e){t.node(e).rank+=i}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},4040:(t,e,n)=>{var r=n(4228),i=n(81485),o=n(28828),s=n(52535);n(69228)("match",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return s(u,c);var l=u.unicode;u.lastIndex=0;for(var h,f=[],d=0;null!==(h=s(u,c));){var p=String(h[0]);f[d]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),d++}return 0===d?null:f}]}))},4104:(t,e,n)=>{var r=n(92127),i=n(33842),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},4228:(t,e,n)=>{var r=n(43305);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},4376:(t,e,n)=>{var r=n(92127),i=n(68641).f,o=n(4228);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},4415:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},4509:(t,e,n)=>{var r=n(12651);t.exports=function(t){return r(this,t).has(t)}},4514:(t,e,n)=>{var r=n(67526).navigator;t.exports=r&&r.userAgent||""},4523:(t,e,n)=>{n.r(e),n.d(e,{VERSION:()=>i,after:()=>Ie,all:()=>tn,allKeys:()=>vt,any:()=>en,assign:()=>It,before:()=>je,bind:()=>_e,bindAll:()=>Ee,chain:()=>ye,chunk:()=>Dn,clone:()=>Dt,collect:()=>Xe,compact:()=>Tn,compose:()=>Le,constant:()=>K,contains:()=>nn,countBy:()=>mn,create:()=>Rt,debounce:()=>Oe,default:()=>Un,defaults:()=>jt,defer:()=>Pe,delay:()=>Te,detect:()=>He,difference:()=>Cn,drop:()=>En,each:()=>We,escape:()=>se,every:()=>tn,extend:()=>Lt,extendOwn:()=>It,filter:()=>Ke,find:()=>He,findIndex:()=>Fe,findKey:()=>Re,findLastIndex:()=>Ve,findWhere:()=>$e,first:()=>Sn,flatten:()=>Pn,foldl:()=>Je,foldr:()=>Ze,forEach:()=>We,functions:()=>Mt,get:()=>Ut,groupBy:()=>gn,has:()=>qt,head:()=>Sn,identity:()=>Ht,include:()=>nn,includes:()=>nn,indexBy:()=>vn,indexOf:()=>Ue,initial:()=>An,inject:()=>Je,intersection:()=>Ln,invert:()=>Ot,invoke:()=>rn,isArguments:()=>Y,isArray:()=>$,isArrayBuffer:()=>R,isBoolean:()=>P,isDataView:()=>H,isDate:()=>L,isElement:()=>C,isEmpty:()=>ut,isEqual:()=>gt,isError:()=>j,isFinite:()=>J,isFunction:()=>V,isMap:()=>St,isMatch:()=>ct,isNaN:()=>Z,isNull:()=>k,isNumber:()=>N,isObject:()=>E,isRegExp:()=>I,isSet:()=>kt,isString:()=>M,isSymbol:()=>B,isTypedArray:()=>it,isUndefined:()=>T,isWeakMap:()=>Et,isWeakSet:()=>Tt,iteratee:()=>Jt,keys:()=>at,last:()=>kn,lastIndexOf:()=>qe,map:()=>Xe,mapObject:()=>Kt,matcher:()=>$t,matches:()=>$t,max:()=>an,memoize:()=>ke,methods:()=>Mt,min:()=>un,mixin:()=>Vn,negate:()=>Ne,noop:()=>Qt,now:()=>re,object:()=>Bn,omit:()=>_n,once:()=>Be,pairs:()=>Ct,partial:()=>we,partition:()=>yn,pick:()=>wn,pluck:()=>on,property:()=>Wt,propertyOf:()=>te,random:()=>ne,range:()=>Rn,reduce:()=>Je,reduceRight:()=>Ze,reject:()=>Qe,rest:()=>En,restArguments:()=>S,result:()=>ge,sample:()=>hn,select:()=>Ke,shuffle:()=>fn,size:()=>bn,some:()=>en,sortBy:()=>dn,sortedIndex:()=>ze,tail:()=>En,take:()=>Sn,tap:()=>Ft,template:()=>pe,templateSettings:()=>ue,throttle:()=>Ce,times:()=>ee,toArray:()=>ln,toPath:()=>Vt,transpose:()=>In,unescape:()=>ae,union:()=>Nn,uniq:()=>Mn,unique:()=>Mn,uniqueId:()=>me,unzip:()=>In,values:()=>Pt,where:()=>sn,without:()=>On,wrap:()=>Me,zip:()=>jn});var r={};n.r(r),n.d(r,{VERSION:()=>i,after:()=>Ie,all:()=>tn,allKeys:()=>vt,any:()=>en,assign:()=>It,before:()=>je,bind:()=>_e,bindAll:()=>Ee,chain:()=>ye,chunk:()=>Dn,clone:()=>Dt,collect:()=>Xe,compact:()=>Tn,compose:()=>Le,constant:()=>K,contains:()=>nn,countBy:()=>mn,create:()=>Rt,debounce:()=>Oe,default:()=>zn,defaults:()=>jt,defer:()=>Pe,delay:()=>Te,detect:()=>He,difference:()=>Cn,drop:()=>En,each:()=>We,escape:()=>se,every:()=>tn,extend:()=>Lt,extendOwn:()=>It,filter:()=>Ke,find:()=>He,findIndex:()=>Fe,findKey:()=>Re,findLastIndex:()=>Ve,findWhere:()=>$e,first:()=>Sn,flatten:()=>Pn,foldl:()=>Je,foldr:()=>Ze,forEach:()=>We,functions:()=>Mt,get:()=>Ut,groupBy:()=>gn,has:()=>qt,head:()=>Sn,identity:()=>Ht,include:()=>nn,includes:()=>nn,indexBy:()=>vn,indexOf:()=>Ue,initial:()=>An,inject:()=>Je,intersection:()=>Ln,invert:()=>Ot,invoke:()=>rn,isArguments:()=>Y,isArray:()=>$,isArrayBuffer:()=>R,isBoolean:()=>P,isDataView:()=>H,isDate:()=>L,isElement:()=>C,isEmpty:()=>ut,isEqual:()=>gt,isError:()=>j,isFinite:()=>J,isFunction:()=>V,isMap:()=>St,isMatch:()=>ct,isNaN:()=>Z,isNull:()=>k,isNumber:()=>N,isObject:()=>E,isRegExp:()=>I,isSet:()=>kt,isString:()=>M,isSymbol:()=>B,isTypedArray:()=>it,isUndefined:()=>T,isWeakMap:()=>Et,isWeakSet:()=>Tt,iteratee:()=>Jt,keys:()=>at,last:()=>kn,lastIndexOf:()=>qe,map:()=>Xe,mapObject:()=>Kt,matcher:()=>$t,matches:()=>$t,max:()=>an,memoize:()=>ke,methods:()=>Mt,min:()=>un,mixin:()=>Vn,negate:()=>Ne,noop:()=>Qt,now:()=>re,object:()=>Bn,omit:()=>_n,once:()=>Be,pairs:()=>Ct,partial:()=>we,partition:()=>yn,pick:()=>wn,pluck:()=>on,property:()=>Wt,propertyOf:()=>te,random:()=>ne,range:()=>Rn,reduce:()=>Je,reduceRight:()=>Ze,reject:()=>Qe,rest:()=>En,restArguments:()=>S,result:()=>ge,sample:()=>hn,select:()=>Ke,shuffle:()=>fn,size:()=>bn,some:()=>en,sortBy:()=>dn,sortedIndex:()=>ze,tail:()=>En,take:()=>Sn,tap:()=>Ft,template:()=>pe,templateSettings:()=>ue,throttle:()=>Ce,times:()=>ee,toArray:()=>ln,toPath:()=>Vt,transpose:()=>In,unescape:()=>ae,union:()=>Nn,uniq:()=>Mn,unique:()=>Mn,uniqueId:()=>me,unzip:()=>In,values:()=>Pt,where:()=>sn,without:()=>On,wrap:()=>Me,zip:()=>jn});var i="1.13.7",o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,c=s.push,l=s.slice,h=a.toString,f=a.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,g=Array.isArray,v=Object.keys,m=Object.create,y=d&&ArrayBuffer.isView,b=isNaN,x=isFinite,w=!{toString:null}.propertyIsEnumerable("toString"),_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A=Math.pow(2,53)-1;function S(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function E(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function k(t){return null===t}function T(t){return void 0===t}function P(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)}function C(t){return!(!t||1!==t.nodeType)}function O(t){var e="[object "+t+"]";return function(t){return h.call(t)===e}}const M=O("String"),N=O("Number"),L=O("Date"),I=O("RegExp"),j=O("Error"),B=O("Symbol"),R=O("ArrayBuffer");var D=O("Function"),F=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof F&&(D=function(t){return"function"==typeof t||!1});const V=D,z=O("Object");var G=p&&(!/\[native code\]/.test(String(DataView))||z(new DataView(new ArrayBuffer(8)))),U="undefined"!=typeof Map&&z(new Map),q=O("DataView");const H=G?function(t){return null!=t&&V(t.getInt8)&&R(t.buffer)}:q,$=g||O("Array");function W(t,e){return null!=t&&f.call(t,e)}var X=O("Arguments");!function(){X(arguments)||(X=function(t){return W(t,"callee")})}();const Y=X;function J(t){return!B(t)&&x(t)&&!isNaN(parseFloat(t))}function Z(t){return N(t)&&b(t)}function K(t){return function(){return t}}function Q(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=A}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Q(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const it=d?function(t){return y?y(t)&&!H(t):nt(t)&&rt.test(h.call(t))}:K(!1),ot=tt("length");function st(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=_.length,r=t.constructor,i=V(r)&&r.prototype||a,o="constructor";for(W(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=_[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function at(t){if(!E(t))return[];if(v)return v(t);var e=[];for(var n in t)W(t,n)&&e.push(n);return w&&st(t,e),e}function ut(t){if(null==t)return!0;var e=ot(t);return"number"==typeof e&&($(t)||M(t)||Y(t))?0===e:0===ot(at(t))}function ct(t,e){var n=at(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}function lt(t){return t instanceof lt?t:this instanceof lt?void(this._wrapped=t):new lt(t)}function ht(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}lt.VERSION=i,lt.prototype.value=function(){return this._wrapped},lt.prototype.valueOf=lt.prototype.toJSON=lt.prototype.value,lt.prototype.toString=function(){return String(this._wrapped)};var ft="[object DataView]";function dt(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&pt(t,e,n,r)}function pt(t,e,n,r){t instanceof lt&&(t=t._wrapped),e instanceof lt&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;if(G&&"[object Object]"==i&&H(t)){if(!H(e))return!1;i=ft}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return u.valueOf.call(t)===u.valueOf.call(e);case"[object ArrayBuffer]":case ft:return pt(ht(t),ht(e),n,r)}var o="[object Array]"===i;if(!o&&it(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(V(s)&&s instanceof s&&V(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!dt(t[c],e[c],n,r))return!1}else{var l,f=at(t);if(c=f.length,at(e).length!==c)return!1;for(;c--;)if(!W(e,l=f[c])||!dt(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0}function gt(t,e){return dt(t,e)}function vt(t){if(!E(t))return[];var e=[];for(var n in t)e.push(n);return w&&st(t,e),e}function mt(t){var e=ot(t);return function(n){if(null==n)return!1;var r=vt(n);if(ot(r))return!1;for(var i=0;i<e;i++)if(!V(n[t[i]]))return!1;return t!==_t||!V(n[yt])}}var yt="forEach",bt=["clear","delete"],xt=["get","has","set"],wt=bt.concat(yt,xt),_t=bt.concat(xt),At=["add"].concat(bt,yt,"has");const St=U?mt(wt):O("Map"),Et=U?mt(_t):O("WeakMap"),kt=U?mt(At):O("Set"),Tt=O("WeakSet");function Pt(t){for(var e=at(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Ct(t){for(var e=at(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function Ot(t){for(var e={},n=at(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function Mt(t){var e=[];for(var n in t)V(t[n])&&e.push(n);return e.sort()}function Nt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}}const Lt=Nt(vt),It=Nt(at),jt=Nt(vt,!0);function Bt(t){if(!E(t))return{};if(m)return m(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Rt(t,e){var n=Bt(t);return e&&It(n,e),n}function Dt(t){return E(t)?$(t)?t.slice():Lt({},t):t}function Ft(t,e){return e(t),t}function Vt(t){return $(t)?t:[t]}function zt(t){return lt.toPath(t)}function Gt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function Ut(t,e,n){var r=Gt(t,zt(e));return T(r)?n:r}function qt(t,e){for(var n=(e=zt(e)).length,r=0;r<n;r++){var i=e[r];if(!W(t,i))return!1;t=t[i]}return!!n}function Ht(t){return t}function $t(t){return t=It({},t),function(e){return ct(e,t)}}function Wt(t){return t=zt(t),function(e){return Gt(e,t)}}function Xt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return null==t?Ht:V(t)?Xt(t,e,n):E(t)&&!$(t)?$t(t):Wt(t)}function Jt(t,e){return Yt(t,e,1/0)}function Zt(t,e,n){return lt.iteratee!==Jt?lt.iteratee(t,e):Yt(t,e,n)}function Kt(t,e,n){e=Zt(e,n);for(var r=at(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o}function Qt(){}function te(t){return null==t?Qt:function(e){return Ut(t,e)}}function ee(t,e,n){var r=Array(Math.max(0,t));e=Xt(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}lt.toPath=Vt,lt.iteratee=Jt;const re=Date.now||function(){return(new Date).getTime()};function ie(t){var e=function(e){return t[e]},n="(?:"+at(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}}const oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},se=ie(oe),ae=ie(Ot(oe)),ue=lt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,le={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},he=/\\|'|\r|\n|\u2028|\u2029/g;function fe(t){return"\\"+le[t]}var de=/^\s*(\w|\$)+\s*$/;function pe(t,e,n){!e&&n&&(e=n),e=jt({},e,lt.templateSettings);var r=RegExp([(e.escape||ce).source,(e.interpolate||ce).source,(e.evaluate||ce).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,(function(e,n,r,s,a){return o+=t.slice(i,a).replace(he,fe),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e})),o+="';\n";var s,a=e.variable;if(a){if(!de.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(t){throw t.source=o,t}var u=function(t){return s.call(this,t,lt)};return u.source="function("+a+"){\n"+o+"}",u}function ge(t,e,n){var r=(e=zt(e)).length;if(!r)return V(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=V(o)?o.call(t):o}return t}var ve=0;function me(t){var e=++ve+"";return t?t+e:e}function ye(t){var e=lt(t);return e._chain=!0,e}function be(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Bt(t.prototype),s=t.apply(o,i);return E(s)?s:o}var xe=S((function(t,e){var n=xe.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return be(t,r,this,this,s)};return r}));xe.placeholder=lt;const we=xe,_e=S((function(t,e,n){if(!V(t))throw new TypeError("Bind must be called on a function");var r=S((function(i){return be(t,r,e,this,n.concat(i))}));return r})),Ae=Q(ot);function Se(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,s=ot(t);o<s;o++){var a=t[o];if(Ae(a)&&($(a)||Y(a)))if(e>1)Se(a,e-1,n,r),i=r.length;else for(var u=0,c=a.length;u<c;)r[i++]=a[u++];else n||(r[i++]=a)}return r}const Ee=S((function(t,e){var n=(e=Se(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=_e(t[r],t)}return t}));function ke(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return W(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}const Te=S((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Pe=we(Te,lt,1);function Ce(t,e,n){var r,i,o,s,a=0;n||(n={});var u=function(){a=!1===n.leading?0:re(),r=null,s=t.apply(i,o),r||(i=o=null)},c=function(){var c=re();a||!1!==n.leading||(a=c);var l=e-(c-a);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),s};return c.cancel=function(){clearTimeout(r),a=0,r=i=o=null},c}function Oe(t,e,n){var r,i,o,s,a,u=function(){var c=re()-i;e>c?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(a,o)),r||(o=a=null))},c=S((function(c){return a=this,o=c,i=re(),r||(r=setTimeout(u,e),n&&(s=t.apply(a,o))),s}));return c.cancel=function(){clearTimeout(r),r=o=a=null},c}function Me(t,e){return we(e,t)}function Ne(t){return function(){return!t.apply(this,arguments)}}function Le(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function Ie(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function je(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Be=we(je,2);function Re(t,e,n){e=Zt(e,n);for(var r,i=at(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r}function De(t){return function(e,n,r){n=Zt(n,r);for(var i=ot(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}const Fe=De(1),Ve=De(-1);function ze(t,e,n,r){for(var i=(n=Zt(n,r,1))(e),o=0,s=ot(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o}function Ge(t,e,n){return function(r,i,o){var s=0,a=ot(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(l.call(r,s,a),Z))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(r[o]===i)return o;return-1}}const Ue=Ge(1,Fe,ze),qe=Ge(-1,Ve);function He(t,e,n){var r=(Ae(t)?Fe:Re)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function $e(t,e){return He(t,$t(e))}function We(t,e,n){var r,i;if(e=Xt(e,n),Ae(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=at(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Xe(t,e,n){e=Zt(e,n);for(var r=!Ae(t)&&at(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o}function Ye(t){return function(e,n,r,i){var o=arguments.length>=3;return function(e,n,r,i){var o=!Ae(e)&&at(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var u=o?o[a]:a;r=n(r,e[u],u,e)}return r}(e,Xt(n,i,4),r,o)}}const Je=Ye(1),Ze=Ye(-1);function Ke(t,e,n){var r=[];return e=Zt(e,n),We(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function Qe(t,e,n){return Ke(t,Ne(Zt(e)),n)}function tn(t,e,n){e=Zt(e,n);for(var r=!Ae(t)&&at(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0}function en(t,e,n){e=Zt(e,n);for(var r=!Ae(t)&&at(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1}function nn(t,e,n,r){return Ae(t)||(t=Pt(t)),("number"!=typeof n||r)&&(n=0),Ue(t,e,n)>=0}const rn=S((function(t,e,n){var r,i;return V(e)?i=e:(e=zt(e),r=e.slice(0,-1),e=e[e.length-1]),Xe(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=Gt(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function on(t,e){return Xe(t,Wt(e))}function sn(t,e){return Ke(t,$t(e))}function an(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=Ae(t)?t:Pt(t)).length;a<u;a++)null!=(r=t[a])&&r>o&&(o=r);else e=Zt(e,n),We(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o}function un(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=Ae(t)?t:Pt(t)).length;a<u;a++)null!=(r=t[a])&&r<o&&(o=r);else e=Zt(e,n),We(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o}var cn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ln(t){return t?$(t)?l.call(t):M(t)?t.match(cn):Ae(t)?Xe(t,Ht):Pt(t):[]}function hn(t,e,n){if(null==e||n)return Ae(t)||(t=Pt(t)),t[ne(t.length-1)];var r=ln(t),i=ot(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=ne(s,o),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,e)}function fn(t){return hn(t,1/0)}function dn(t,e,n){var r=0;return e=Zt(e,n),on(Xe(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function pn(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=Zt(r,i),We(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}}const gn=pn((function(t,e,n){W(t,n)?t[n].push(e):t[n]=[e]})),vn=pn((function(t,e,n){t[n]=e})),mn=pn((function(t,e,n){W(t,n)?t[n]++:t[n]=1})),yn=pn((function(t,e,n){t[n?0:1].push(e)}),!0);function bn(t){return null==t?0:Ae(t)?t.length:at(t).length}function xn(t,e,n){return e in n}const wn=S((function(t,e){var n={},r=e[0];if(null==t)return n;V(r)?(e.length>1&&(r=Xt(r,e[1])),e=vt(t)):(r=xn,e=Se(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),_n=S((function(t,e){var n,r=e[0];return V(r)?(r=Ne(r),e.length>1&&(n=e[1])):(e=Xe(Se(e,!1,!1),String),r=function(t,n){return!nn(e,n)}),wn(t,r,n)}));function An(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function Sn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:An(t,t.length-e)}function En(t,e,n){return l.call(t,null==e||n?1:e)}function kn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:En(t,Math.max(0,t.length-e))}function Tn(t){return Ke(t,Boolean)}function Pn(t,e){return Se(t,e,!1)}const Cn=S((function(t,e){return e=Se(e,!0,!0),Ke(t,(function(t){return!nn(e,t)}))})),On=S((function(t,e){return Cn(t,e)}));function Mn(t,e,n,r){P(e)||(r=n,n=e,e=!1),null!=n&&(n=Zt(n,r));for(var i=[],o=[],s=0,a=ot(t);s<a;s++){var u=t[s],c=n?n(u,s,t):u;e&&!n?(s&&o===c||i.push(u),o=c):n?nn(o,c)||(o.push(c),i.push(u)):nn(i,u)||i.push(u)}return i}const Nn=S((function(t){return Mn(Se(t,!0,!0))}));function Ln(t){for(var e=[],n=arguments.length,r=0,i=ot(t);r<i;r++){var o=t[r];if(!nn(e,o)){var s;for(s=1;s<n&&nn(arguments[s],o);s++);s===n&&e.push(o)}}return e}function In(t){for(var e=t&&an(t,ot).length||0,n=Array(e),r=0;r<e;r++)n[r]=on(t,r);return n}const jn=S(In);function Bn(t,e){for(var n={},r=0,i=ot(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Rn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function Dn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(l.call(t,r,r+=e));return n}function Fn(t,e){return t._chain?lt(e).chain():e}function Vn(t){return We(Mt(t),(function(e){var n=lt[e]=t[e];lt.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Fn(this,n.apply(lt,t))}})),lt}We(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];lt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Fn(this,n)}})),We(["concat","join","slice"],(function(t){var e=s[t];lt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Fn(this,t)}}));const zn=lt;var Gn=Vn(r);Gn._=Gn;const Un=Gn},4570:(t,e,n)=>{var r=n(92127),i=n(67227);r(r.S+r.F*n(79448)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},4664:(t,e,n)=>{var r=n(79770),i=n(63345),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return o.call(t,e)})))}:i;t.exports=a},4765:(t,e,n)=>{var r=n(57221),i=n(59415).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},4850:(t,e,n)=>{var r=n(56857);function i(t){r.forEach(t.nodes(),(function(e){o(t.node(e))})),r.forEach(t.edges(),(function(e){o(t.edge(e))}))}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){s(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"y")&&s(n)}))}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)}))}(t),i(t))}}},4901:(t,e,n)=>{var r=n(72552),i=n(30294),o=n(40346),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},5128:(t,e,n)=>{var r=n(80909),i=n(64894);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},5443:(t,e,n)=>{var r=n(47967),i=n(68641),o=n(40627),s=n(57917),a=n(92127),u=n(11996),c=n(4228),l=n(43305);a(a.S,"Reflect",{set:function t(e,n,a){var h,f,d=arguments.length<4?e:arguments[3],p=i.f(c(e),n);if(!p){if(l(f=o(e)))return t(f,n,a,d);p=u(0)}if(s(p,"value")){if(!1===p.writable||!l(d))return!1;if(h=i.f(d,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=a,r.f(d,n,h)}else r.f(d,n,u(0,a));return!0}return void 0!==p.set&&(p.set.call(d,a),!0)}})},5861:(t,e,n)=>{var r=n(55580),i=n(68223),o=n(32804),s=n(76545),a=n(28303),u=n(72552),c=n(47473),l="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",g=c(r),v=c(i),m=c(o),y=c(s),b=c(a),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=l||o&&x(o.resolve())!=h||s&&x(new s)!=f||a&&x(new a)!=d)&&(x=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return p;case v:return l;case m:return h;case y:return f;case b:return d}return e}),t.exports=x},6032:(t,e,n)=>{var r=n(84719),i=n(11996),o=n(3844),s={};n(33341)(s,n(67574)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},6328:(t,e,n)=>{var r=n(92127),i=n(18270),o=n(83048),s=n(40627),a=n(68641).f;n(1763)&&r(r.P+n(91913),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=a(n,r))return e.set}while(n=s(n))}})},6543:(t,e,n)=>{var r=n(63387),i=n(18270),o=n(61249),s=n(81485);t.exports=function(t,e,n,a,u){r(e);var c=i(t),l=o(c),h=s(c.length),f=u?h-1:0,d=u?-1:1;if(n<2)for(;;){if(f in l){a=l[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in l&&(a=e(a,l[f],f,c));return a}},6701:(t,e,n)=>{var r=n(92127),i=n(79448),o=n(15122),s=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==s.call(1,void 0)}))||!i((function(){s.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},7083:(t,e,n)=>{n(52468)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},7103:(t,e,n)=>{var r=n(92127),i=n(63387),o=n(4228),s=(n(67526).Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!n(79448)((function(){s((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return s?s(r,e,u):a.call(r,e,u)}})},7309:(t,e,n)=>{var r=n(62006)(n(24713));t.exports=r},7359:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},7367:(t,e,n)=>{n(49307)("Map")},7531:(t,e,n)=>{var r=n(92127),i=n(18270),o=n(63387),s=n(47967);n(1763)&&r(r.P+n(91913),"Object",{__defineGetter__:function(t,e){s.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},7849:(t,e,n)=>{var r=Date.prototype,i="Invalid Date",o="toString",s=r[o],a=r.getTime;new Date(NaN)+""!=i&&n(28859)(r,o,(function(){var t=a.call(this);return t==t?s.call(this):i}))},8032:(t,e,n)=>{var r=n(67526),i=n(1763),o=n(22750),s=n(80237),a=n(33341),u=n(96065),c=n(79448),l=n(16440),h=n(27087),f=n(81485),d=n(73133),p=n(59415).f,g=n(47967).f,v=n(35564),m=n(3844),y="ArrayBuffer",b="DataView",x="prototype",w="Wrong index!",_=r[y],A=r[b],S=r.Math,E=r.RangeError,k=r.Infinity,T=_,P=S.abs,C=S.pow,O=S.floor,M=S.log,N=S.LN2,L="buffer",I="byteLength",j="byteOffset",B=i?"_b":L,R=i?"_l":I,D=i?"_o":j;function F(t,e,n){var r,i,o,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,c=u>>1,l=23===e?C(2,-24)-C(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=P(t))!=t||t===k?(i=t!=t?1:0,r=u):(r=O(M(t)/N),t*(o=C(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*C(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*C(2,e),r+=c):(i=t*C(2,c-1)*C(2,e),r=0));e>=8;s[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,a+=e;a>0;s[h++]=255&r,r/=256,a-=8);return s[--h]|=128*f,s}function V(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;a>0;l=256*l+t[u],u--,a-=8);for(r=l&(1<<-a)-1,l>>=-a,a+=e;a>0;r=256*r+t[u],u--,a-=8);if(0===l)l=1-s;else{if(l===o)return r?NaN:c?-k:k;r+=C(2,e),l-=s}return(c?-1:1)*r*C(2,l-e)}function z(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function G(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function q(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function H(t){return F(t,52,8)}function $(t){return F(t,23,4)}function W(t,e,n){g(t[x],e,{get:function(){return this[n]}})}function X(t,e,n,r){var i=d(+n);if(i+e>t[R])throw E(w);var o=t[B]._b,s=i+t[D],a=o.slice(s,s+e);return r?a:a.reverse()}function Y(t,e,n,r,i,o){var s=d(+n);if(s+e>t[R])throw E(w);for(var a=t[B]._b,u=s+t[D],c=r(+i),l=0;l<e;l++)a[u+l]=c[o?l:e-l-1]}if(s.ABV){if(!c((function(){_(1)}))||!c((function(){new _(-1)}))||c((function(){return new _,new _(1.5),new _(NaN),_.name!=y}))){for(var J,Z=(_=function(t){return l(this,_),new T(d(t))})[x]=T[x],K=p(T),Q=0;K.length>Q;)(J=K[Q++])in _||a(_,J,T[J]);o||(Z.constructor=_)}var tt=new A(new _(2)),et=A[x].setInt8;tt.setInt8(0,2147483648),tt.setInt8(1,2147483649),!tt.getInt8(0)&&tt.getInt8(1)||u(A[x],{setInt8:function(t,e){et.call(this,t,e<<24>>24)},setUint8:function(t,e){et.call(this,t,e<<24>>24)}},!0)}else _=function(t){l(this,_,y);var e=d(t);this._b=v.call(new Array(e),0),this[R]=e},A=function(t,e,n){l(this,A,b),l(t,_,b);var r=t[R],i=h(e);if(i<0||i>r)throw E("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw E("Wrong length!");this[B]=t,this[D]=i,this[R]=n},i&&(W(_,I,"_l"),W(A,L,"_b"),W(A,I,"_l"),W(A,j,"_o")),u(A[x],{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t){var e=X(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=X(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return z(X(this,4,t,arguments[1]))},getUint32:function(t){return z(X(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return V(X(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return V(X(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,G,e)},setUint8:function(t,e){Y(this,1,t,G,e)},setInt16:function(t,e){Y(this,2,t,U,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,U,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,q,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,q,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,$,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,H,e,arguments[2])}});m(_,y),m(A,b),a(A[x],s.VIEW,!0),e[y]=_,e[b]=A},8301:(t,e,n)=>{var r=n(67526),i=n(98880),o=n(47967).f,s=n(59415).f,a=n(95411),u=n(1158),c=r.RegExp,l=c,h=c.prototype,f=/a/g,d=/a/g,p=new c(f)!==f;if(n(1763)&&(!p||n(79448)((function(){return d[n(67574)("match")]=!1,c(f)!=f||c(d)==d||"/a/i"!=c(f,"i")})))){c=function(t,e){var n=this instanceof c,r=a(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:h,c)};for(var g=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=s(l),m=0;v.length>m;)g(v[m++]);h.constructor=c,c.prototype=h,n(28859)(r,"RegExp",c)}n(55762)("RegExp")},8449:(t,e)=>{e.f={}.propertyIsEnumerable},8537:(t,e,n)=>{n(37209)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},9087:(t,e,n)=>{var r=n(92127),i=n(61464)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(88184)("includes")},9325:(t,e,n)=>{var r=n(34840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},9429:(t,e,n)=>{var r=n(92127),i=n(55385);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},9676:(t,e,n)=>{var r=n(92127),i=n(55089);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},9999:(t,e,n)=>{var r=n(37217),i=n(83729),o=n(16547),s=n(74733),a=n(43838),u=n(93290),c=n(23007),l=n(92271),h=n(48948),f=n(50002),d=n(83349),p=n(5861),g=n(76189),v=n(77199),m=n(35529),y=n(56449),b=n(3656),x=n(87730),w=n(23805),_=n(38440),A=n(95950),S=n(37241),E="[object Arguments]",k="[object Function]",T="[object Object]",P={};P[E]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[T]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[k]=P["[object WeakMap]"]=!1,t.exports=function t(e,n,C,O,M,N){var L,I=1&n,j=2&n,B=4&n;if(C&&(L=M?C(e,O,M,N):C(e)),void 0!==L)return L;if(!w(e))return e;var R=y(e);if(R){if(L=g(e),!I)return c(e,L)}else{var D=p(e),F=D==k||"[object GeneratorFunction]"==D;if(b(e))return u(e,I);if(D==T||D==E||F&&!M){if(L=j||F?{}:m(e),!I)return j?h(e,a(L,e)):l(e,s(L,e))}else{if(!P[D])return M?e:{};L=v(e,D,I)}}N||(N=new r);var V=N.get(e);if(V)return V;N.set(e,L),_(e)?e.forEach((function(r){L.add(t(r,n,C,r,e,N))})):x(e)&&e.forEach((function(r,i){L.set(i,t(r,n,C,i,e,N))}));var z=R?void 0:(B?j?d:f:j?S:A)(e);return i(z||e,(function(r,i){z&&(r=e[i=r]),o(L,i,t(r,n,C,i,e,N))})),L}},10117:(t,e,n)=>{var r;try{r={clone:n(32629),constant:n(37334),each:n(76135),filter:n(87612),has:n(61448),isArray:n(56449),isEmpty:n(62193),isFunction:n(1882),isUndefined:n(62216),keys:n(95950),map:n(55378),reduce:n(40860),size:n(47091),transform:n(69752),union:n(80299),values:n(35880)}}catch(t){}r||(r=window._),t.exports=r},10124:(t,e,n)=>{var r=n(9325);t.exports=function(){return r.Date.now()}},10177:(t,e,n)=>{var r=n(92127),i=n(81485),o=n(78942),s="startsWith",a=""[s];r(r.P+r.F*n(25203)(s),"String",{startsWith:function(t){var e=o(this,t,s),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},10392:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},10540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},10776:(t,e,n)=>{var r=n(30756),i=n(95950);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}},11331:(t,e,n)=>{var r=n(72552),i=n(28879),o=n(40346),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},11430:(t,e,n)=>{var r=n(92127);r(r.S+r.F,"Object",{assign:n(28206)})},11692:(t,e,n)=>{var r=n(92127);r(r.G,{global:n(67526)})},11879:(t,e,n)=>{var r=n(68641),i=n(40627),o=n(57917),s=n(92127),a=n(43305),u=n(4228);s(s.S,"Reflect",{get:function t(e,n){var s,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(s=r.f(e,n))?o(s,"value")?s.value:void 0!==s.get?s.get.call(l):void 0:a(c=i(e))?t(c,n,l):void 0}})},11996:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},12220:(t,e,n)=>{var r=n(92127),i=n(70157),o=String.fromCharCode,s=String.fromCodePoint;r(r.S+r.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,s=0;r>s;){if(e=+arguments[s++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},12651:(t,e,n)=>{var r=n(74218);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},12749:(t,e,n)=>{var r=n(81042),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},12888:(t,e,n)=>{var r=n(43305);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},12988:(t,e,n)=>{var r=n(4415)("meta"),i=n(43305),o=n(57917),s=n(47967).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(79448)((function(){return u(Object.preventExtensions({}))})),l=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},13222:(t,e,n)=>{var r=n(77556);t.exports=function(t){return null==t?"":r(t)}},13292:(t,e,n)=>{var r=n(92127);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},14248:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},14520:(t,e,n)=>{var r=n(56857),i=n(33860),o=n(44959),s=n(35169);t.exports=function t(e,n,a,u){var c=e.children(n),l=e.node(n),h=l?l.borderLeft:void 0,f=l?l.borderRight:void 0,d={};h&&(c=r.filter(c,(function(t){return t!==h&&t!==f})));var p=i(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var i=t(e,n.v,a,u);d[n.v]=i,r.has(i,"barycenter")&&(o=n,s=i,r.isUndefined(o.barycenter)?(o.barycenter=s.barycenter,o.weight=s.weight):(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight))}var o,s}));var g=o(p,a);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(g,d);var v=s(g,u);if(h&&(v.vs=r.flatten([h,v.vs,f],!0),e.predecessors(h).length)){var m=e.node(e.predecessors(h)[0]),y=e.node(e.predecessors(f)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+m.order+y.order)/(v.weight+2),v.weight+=2}return v}},14528:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},14702:(t,e,n)=>{n(37209)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},14974:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},15122:(t,e,n)=>{var r=n(55089);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},15144:(t,e,n)=>{var r=n(92127),i=n(66179)(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),r(r.P+r.F*s,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(88184)(o)},15325:(t,e,n)=>{var r=n(96131);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},15327:(t,e,n)=>{var r=n(92127),i=Math.imul;r(r.S+r.F*n(79448)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,s=n&i;return 0|o*s+((n&r>>>16)*s+o*(n&i>>>16)<<16>>>0)}})},15339:(t,e,n)=>{n(18966)("WeakSet")},15389:(t,e,n)=>{var r=n(93663),i=n(87978),o=n(83488),s=n(56449),a=n(50583);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}},15538:(t,e,n)=>{var r=n(63387),i=n(43305),o=n(24877),s=[].slice,a={};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),u=function(){var r=n.concat(s.call(arguments));return this instanceof u?function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)}(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},15572:(t,e,n)=>{var r=n(43305),i=n(12988).onFreeze;n(80923)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},15909:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{log1p:n(71473)})},15932:(t,e,n)=>{var r=n(92127),i=n(4228),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},15969:(t,e,n)=>{var r=n(51311),i=n(1060),o=n(8449);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},16038:(t,e,n)=>{var r=n(5861),i=n(40346);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},16043:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},16291:(t,e,n)=>{var r=n(10117);t.exports=function(t){var e=0,n=[],i={},o=[];function s(a){var u=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(s(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))})),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(a!==c);o.push(l)}}return t.nodes().forEach((function(t){r.has(i,t)||s(t)})),o}},16440:t=>{t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},16547:(t,e,n)=>{var r=n(43360),i=n(75288),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},16574:(t,e,n)=>{var r=n(80909);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},16678:(t,e,n)=>{var r=n(10117),i=n(16291);t.exports=function(t){return r.filter(i(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},17224:(t,e,n)=>{var r=n(92127),i=n(81485),o=n(78942),s="endsWith",a=""[s];r(r.P+r.F*n(25203)(s),"String",{endsWith:function(t){var e=o(this,t,s),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),u=void 0===n?r:Math.min(i(n),r),c=String(t);return a?a.call(e,c,u):e.slice(u-c.length,u)===c}})},17255:(t,e,n)=>{var r=n(47422);t.exports=function(t){return function(e){return r(e,t)}}},17400:(t,e,n)=>{var r=n(99374),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},17482:(t,e,n)=>{var r=n(34848),i={};i[n(67574)("toStringTag")]="z",i+""!="[object z]"&&n(28859)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},17670:(t,e,n)=>{var r=n(12651);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},17925:(t,e,n)=>{n(37209)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},18132:(t,e,n)=>{var r=n(92127);r(r.S,"Object",{setPrototypeOf:n(25170).set})},18209:(t,e,n)=>{var r=n(56857),i=n(3988);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,o,s=e.v,a=t.node(s).rank,u=e.w,c=t.node(u).rank,l=e.name,h=t.edge(e),f=h.labelRank;if(c!==a+1){for(t.removeEdge(e),o=0,++a;a<c;++o,++a)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=i.addDummyNode(t,"edge",r,"_d"),a===f&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(s,n,{weight:h.weight},l),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,u,{weight:h.weight},l)}}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}}},18223:(t,e,n)=>{var r=n(92127);r(r.P+r.R,"Set",{toJSON:n(34490)("Set")})},18270:(t,e,n)=>{var r=n(3344);t.exports=function(t){return Object(r(t))}},18772:(t,e,n)=>{var r=n(67526),i=n(92127),o=n(4514),s=[].slice,a=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&s.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*a,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},18966:(t,e,n)=>{var r=n(92127);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},19190:(t,e,n)=>{var r=n(4228),i=n(63387),o=n(67574)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},19219:t=>{t.exports=function(t,e){return t.has(e)}},19269:(t,e,n)=>{var r=n(71632),i=n(80956),o=n(97380),s=n(4228),a=n(40627),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=a(t);if(null===o)return n;var s=l(o,e);return s.length?n.length?i(new r(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return l(s(t),arguments.length<2?void 0:c(arguments[1]))}})},19570:(t,e,n)=>{var r=n(37334),i=n(93243),o=n(83488),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},19620:(t,e,n)=>{var r=n(92127);r(r.P,"Array",{copyWithin:n(84438)}),n(88184)("copyWithin")},20062:(t,e,n)=>{n(40629)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},20107:(t,e,n)=>{var r=n(4228),i=n(83048),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),t!=o)}},20317:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},20341:(t,e,n)=>{var r=n(95411),i=n(4228),o=n(19190),s=n(28828),a=n(81485),u=n(52535),c=n(69600),l=n(79448),h=Math.min,f=[].push,d="split",p="length",g="lastIndex",v=4294967295,m=!l((function(){RegExp(v,"y")}));n(69228)("split",2,(function(t,e,n,l){var y;return y="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[p]||2!="ab"[d](/(?:ab)*/)[p]||4!="."[d](/(.?)(.?)/)[p]||"."[d](/()()/)[p]>1||""[d](/.?/)[p]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,s,a,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?v:e>>>0,m=new RegExp(t.source,l+"g");(o=c.call(m,i))&&!((s=m[g])>h&&(u.push(i.slice(h,o.index)),o[p]>1&&o.index<i[p]&&f.apply(u,o.slice(1)),a=o[0][p],h=s,u[p]>=d));)m[g]===o.index&&m[g]++;return h===i[p]?!a&&m.test("")||u.push(""):u.push(i.slice(h)),u[p]>d?u.slice(0,d):u}:"0"[d](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):y.call(String(i),n,r)},function(t,e){var r=l(y,t,this,e,y!==n);if(r.done)return r.value;var c=i(t),f=String(this),d=o(c,RegExp),p=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),b=new d(m?c:"^(?:"+c.source+")",g),x=void 0===e?v:e>>>0;if(0===x)return[];if(0===f.length)return null===u(b,f)?[f]:[];for(var w=0,_=0,A=[];_<f.length;){b.lastIndex=m?_:0;var S,E=u(b,m?f:f.slice(_));if(null===E||(S=h(a(b.lastIndex+(m?0:_)),f.length))===w)_=s(f,_,p);else{if(A.push(f.slice(w,_)),A.length===x)return A;for(var k=1;k<=E.length-1;k++)if(A.push(E[k]),A.length===x)return A;_=w=S}}return A.push(f.slice(w)),A}]}))},20391:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},20426:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},20762:(t,e,n)=>{var r=n(34848),i=n(67574)("iterator"),o=n(60906);t.exports=n(56094).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},20957:(t,e,n)=>{n(40629)("trim",(function(t){return function(){return t(this,3)}}))},20999:(t,e,n)=>{var r=n(69302),i=n(36800);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}},21391:(t,e,n)=>{var r,i,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g,r=[n(4523),n(26198),e],i=function(t,e,n){o.Backbone=function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.4.1",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s,a=e.Events={},u=/\s+/,c=function(t,e,r,i,o){var s,a=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)e=c(t,e,s[a],r[s[a]],o)}else if(r&&u.test(r))for(s=r.split(u);a<s.length;a++)e=t(e,s[a],i,o);else e=t(e,r,i,o);return e};a.on=function(t,e,n){return this._events=c(l,this._events||{},t,e,{context:n,ctx:this,listening:s}),s&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1),this},a.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=s=o[i];a||(this._listenId||(this._listenId=n.uniqueId("l")),a=s=o[i]=new v(this,t));var u=h(t,e,r,this);if(s=void 0,u)throw u;return a.interop&&a.on(e,r),this};var l=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return t},h=function(t,e,n,r){try{t.on(e,n,r)}catch(t){return t}};a.off=function(t,e,n){return this._events?(this._events=c(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(e,r,this),a.interop&&a.off(e,r)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var f=function(t,e,r,i){if(t){var o,s=i.context,a=i.listeners,u=0;if(e||s||r){for(o=e?[e]:n.keys(t);u<o.length;u++){var c=t[e=o[u]];if(!c)break;for(var l=[],h=0;h<c.length;h++){var f=c[h];if(r&&r!==f.callback&&r!==f.callback._callback||s&&s!==f.context)l.push(f);else{var d=f.listening;d&&d.off(e,r)}}l.length?t[e]=l:delete t[e]}return t}for(o=n.keys(a);u<o.length;u++)a[o[u]].cleanup()}};a.once=function(t,e,n){var r=c(d,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(r,e,n)},a.listenToOnce=function(t,e,n){var r=c(d,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,r)};var d=function(t,e,r,i){if(r){var o=t[e]=n.once((function(){i(e,o),r.apply(this,arguments)}));o._callback=r}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return c(p,this._events,t,void 0,n),this};var p=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&g(i,r),o&&g(o,[e].concat(r))}return t},g=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},v=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};v.prototype.on=a.on,v.prototype.off=function(t,e){var n;this.interop?(this._events=c(f,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},v.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(e,a);var m=e.Model=function(t,e){var r=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(m.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var i;if("object"==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in i)e=i[f],n.isEqual(c[f],e)||a.push(f),n.isEqual(h[f],e)?delete l[f]:l[f]=e,o?delete c[f]:c[f]=e;if(this.idAttribute in i){var d=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,d,r)}if(!s){a.length&&(this._pending=r);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],r)}if(u)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,r=this._changing?this._previousAttributes:this.attributes,i={};for(var o in t){var s=t[o];n.isEqual(r[o],s)||(i[o]=s,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;r&&r.call(t.context,e,n,t),e.trigger("sync",e,n,t)},q(this,t),this.sync("read",this,t)},save:function(t,e,r){var i;null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,u=this.attributes;r.success=function(t){s.attributes=u;var e=r.parse?s.parse(t,r):t;if(o&&(e=n.extend({},i,e)),e&&!s.set(e,r))return!1;a&&a.call(r.context,s,t,r),s.trigger("sync",s,t,r)},q(this,r),i&&o&&(this.attributes=n.extend({},u,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var l=this.sync(c,this,r);return this.attributes=u,l},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(q(this,t),s=this.sync("delete",this,t)),i||o(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||U();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1)}});var y=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},w=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(y.prototype,a,{model:m,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger("update",this,e)),r?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],u=[],c=[],l=[],h={},f=e.add,d=e.merge,p=e.remove,g=!1,v=this.comparator&&null==i&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var y=this.get(o);if(y){if(d&&o!==y){var x=this._isModel(o)?o.attributes:o;e.parse&&(x=y.parse(x,e)),y.set(x,e),c.push(y),v&&!g&&(g=y.hasChanged(m))}h[y.cid]||(h[y.cid]=!0,a.push(y)),t[s]=y}else f&&(o=t[s]=this._prepareModel(o,e))&&(u.push(o),this._addReference(o,e),h[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)h[(o=this.models[s]).cid]||l.push(o);l.length&&this._removeModels(l,e)}var _=!1,A=!v&&f&&p;if(a.length&&A?(_=this.length!==a.length||n.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,w(this.models,a,0),this.length=this.models.length):u.length&&(v&&(g=!0),w(this.models,u,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<u.length;s++)null!=i&&(e.index=i+s),(o=u[s]).trigger("add",o,this,e);(g||_)&&this.trigger("sort",this,e),(u.length||l.length||c.length)&&(e.changes={added:u,removed:l,merged:c},this.trigger("update",this,e))}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},q(this,t),this.sync("read",this,t)},create:function(t,e){var r=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&i.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new A(this,S)},keys:function(){return new A(this,E)},entries:function(){return new A(this,k)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?n.clone(e):{}).collection=this,(r=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger("invalid",this,r.validationError,e),!1):r);var r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=o,i.trigger("remove",i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof m},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes,t.idAttribute);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,r),"changeId"===t){var i=this.modelId(e.previousAttributes(),e.idAttribute),o=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e)}}this.trigger.apply(this,arguments)}});var _="function"==typeof Symbol&&Symbol.iterator;_&&(y.prototype[_]=y.prototype.values);var A=function(t,e){this._collection=t,this._kind=e,this._index=0},S=1,E=2,k=3;_&&(A.prototype[_]=function(){return this}),A.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===S)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===E?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var T=e.View=function(t){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,C)),this._ensureElement(),this.initialize.apply(this,arguments)},P=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];n.extend(T.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(P);this.delegate(i[1],i[2],r.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var O=function(t,e,r,i){n.each(r,(function(n,r){e[r]&&(t.prototype[r]=function(t,e,n,r){switch(e){case 1:return function(){return t[n](this[r])};case 2:return function(e){return t[n](this[r],e)};case 3:return function(e,i){return t[n](this[r],M(e,this),i)};case 4:return function(e,i,o){return t[n](this[r],M(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),t[n].apply(t,e)}}}(e,n,r,i))}))},M=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?N(t):n.isString(t)?function(e){return e.get(t)}:t},N=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}};n.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[m,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(t){var e=t[0],r=t[1],i=t[2];e.mixin=function(t){var r=n.reduce(n.functions(t),(function(t,e){return t[e]=0,t}),{});O(e,t,r,i)},O(e,n,r,i)})),e.sync=function(t,r,i){var o=L[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||U()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var u=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,u&&u.call(i.context,t,e,n)};var c=i.xhr=e.ajax(n.extend(s,i));return r.trigger("request",r,c,i),c};var L={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var I=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,R=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(I.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,(function(n){var s=o._extractParameters(t,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),e.history.trigger("route",o,r,s))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(j,"(?:$1)?").replace(B,(function(t,e){return e?t:"([^/?]+)"})).replace(R,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,(function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null}))}});var F=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,G=/#.*$/;F.started=!1,n.extend(F.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(V,"")},start:function(t){if(F.started)throw new Error("Backbone.history has already been started");if(F.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(z,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!F.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+t;t=t.replace(G,"");var i=this.decodeFragment(t);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new F;m.extend=y.extend=I.extend=T.extend=F.extend=function(t,e){var r,i=this;return r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e),r.prototype=n.create(i.prototype,t),r.prototype.constructor=r,r.__super__=i.prototype,r};var U=function(){throw new Error('A "url" property or function must be specified')},q=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger("error",t,r,e)}};return e}(o,n,t,e)}.apply(e,r),void 0===i||(t.exports=i)},21549:(t,e,n)=>{var r=n(22032),i=n(63862),o=n(66721),s=n(12749),a=n(35749);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},21626:(t,e,n)=>{var r=n(47967),i=n(4228),o=n(51311);t.exports=n(1763)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},21791:(t,e,n)=>{var r=n(16547),i=n(43360);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?i(n,c,l):r(n,c,l)}return n}},21883:(t,e,n)=>{var r=n(92127);r(r.S,"Reflect",{has:function(t,e){return e in t}})},21986:(t,e,n)=>{var r=n(51873),i=n(37828),o=n(75288),s=n(25911),a=n(20317),u=n(84247),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=a;case"[object Set]":var p=1&r;if(d||(d=u),t.size!=e.size&&!p)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var v=s(d(t),d(e),r,c,h,f);return f.delete(t),v;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},22031:(t,e,n)=>{var r=n(56857),i=n(68191).Graph,o=n(39859);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w).in+=i)}));var c=r.range(a+s+3).map((function(){return new o})),l=s+1;return r.forEach(n.nodes(),(function(t){u(c,l,n.node(t))})),{graph:n,buckets:c,zeroIdx:l}}(t,e||s),c=function(t,e,n){for(var r,i=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var s=r.constant(1);function a(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),(function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,u(e,n,a)})),r.forEach(t.outEdges(i.v),(function(r){var i=t.edge(r),o=r.w,s=t.node(o);s.in-=i,u(e,n,s)})),t.removeNode(i.v),s}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},22032:(t,e,n)=>{var r=n(81042);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},22313:function(t,e){var n,r=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},i=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};function o(t,e,n){return e.map(((e,r)=>t(e,n[r])))}function s(t,e,n,r,i){return e.map(((e,o)=>t(e,n[o],r[o],i[o])))}function a(t,e,n,r){if(0==e.length)return 1==r?1:0;let i=e[e.length-1];1==r?i|=~n:i&=n;for(let n=0;n<e.length-1;n++)i=t(i,e[n]);return i=t(i,i>>>16),i=t(i,i>>>8),i=t(i,i>>>4),i=t(i,i>>>2),i=t(i,i>>>1),1&i}function u(t){return 31&t}function c(t,e,n,r,i){const o=t>0&&!(r[e]&1<<t-1)&&i[e]&1<<t-1;o&&u(t)&&(i[e]|=-1<<t),o&&e+1<n&&i.fill(-1,e+1)}function l(t,e){const n={};return function r(i,o){if(n[i]=o,!(i.length*t>=e)){for(let e=0;e<1<<t;e+=1)r(i+e.toString(1<<t),o<<t|e|e<<16);r(i+"x",o<<t|(1<<t)-1)}}("",0),Object.seal(n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.Display3vl=e.Display3vlOct=e.Display3vlBin=e.Display3vlHex=e.Display3vlWithRegex=e.Mem3vl=e.Vector3vl=e.Error3vl=void 0;const h=l(1,8),f=l(3,3),d=l(4,8);function p(t,e,n,r){const i=[];let o=0,s=t;for(;o<e;){const t="00000000"+n[s].toString(16),a=n[s]^r[s];s++;for(let n=0;n<8&&o<e;n++,o+=4)a&15<<4*n?i.push("x"):i.push(t[t.length-1-n])}return i.reverse().join("")}function g(t,e,n,r){const i=[];let o=0,s=t;for(;o<e;){const t="00000000000000000000000000000000"+n[s].toString(2),a=n[s]^r[s];s++;for(let n=0;n<32&&o<e;n++,o++)a&1<<n?i.push("x"):i.push(t[t.length-1-n])}return i.reverse().join("")}function v(t,e,n,r,i){const o=n+31>>>5;let s=0,a=-1+e;for(let e=t.length;e>0;){const n=t.slice(Math.max(0,e-2),e);e-=n.length;const o=d[n];0==u(s)&&a++;const c=(1<<4*n.length)-1;r[a]|=(o>>>16&c)<<s,i[a]|=(o&c)<<s,s+=4*n.length}s<n&&c(s,a,o,r,i)}function m(t,e,n,r,i){const o=n+31>>>5;let s=0,a=-1+e;for(let e=t.length;e>0;){const n=t.slice(Math.max(0,e-8),e);e-=n.length;const o=h[n];0==u(s)&&a++;const c=(1<<1*n.length)-1;r[a]|=(o>>>16&c)<<s,i[a]|=(o&c)<<s,s+=1*n.length}s<n&&c(s,a,o,r,i)}class y extends Error{constructor(t){super(t),Object.setPrototypeOf(this,y.prototype)}}function b(t,e){if(!t)throw new y("Assertion failed: "+e)}e.Error3vl=y;class x{constructor(t,e,n){this._bits=t,this._avec=e,this._bvec=n}static make(t,e){let n,r;switch(t|=0,e){case!0:case"1":case 1:n=r=-1;break;case!1:case"0":case-1:case void 0:n=r=0;break;case"x":case 0:n=0,r=-1;break;default:b(!1,"Vector3vl.make() called with invalid initializer")}const i=(t+31)/32|0;return new x(t,new Uint32Array(i).fill(n),new Uint32Array(i).fill(r))}static zeros(t){return x.make(t,-1)}static ones(t){return x.make(t,1)}static xes(t){return x.make(t,0)}static fromBool(t,e=1){return x.make(e,t?1:-1)}static concat(...t){const e=t.reduce(((t,e)=>e.bits+t),0)+31>>>5;let n=0,r=-1,i=new Uint32Array(e),o=new Uint32Array(e);for(const s of t)if(s.normalize(),0==u(n))i.set(s._avec,r+1),o.set(s._bvec,r+1),n+=s._bits,r+=s._bits+31>>>5;else{for(const t in s._avec){if(i[r]|=s._avec[t]<<n,o[r]|=s._bvec[t]<<n,r++,r==e)break;i[r]=s._avec[t]>>>-n,o[r]=s._bvec[t]>>>-n}n+=s._bits,r+1>n+31>>>5&&r--}return new x(n,i,o)}static fromIterator(t,e,n){return e&e-1?x.fromIteratorAnySkip(t,e,n):x.fromIteratorPow2(t,e,n)}static fromIteratorAnySkip(t,e,n){const r=n+31>>>5;let i=0,o=-1,s=new Uint32Array(r),a=new Uint32Array(r);const l=(1<<e)-1;for(const n of t)0==u(i)&&o++,s[o]|=(n>>>e&l)<<i,a[o]|=(n&l)<<i,l<<i>>>i!=l&&(o++,s[o]=(n>>>e&l)>>>-i,a[o]=(n&l)>>>-i),i+=e;return i<n&&c(i,o,r,s,a),new x(n,s,a)}static fromIteratorPow2(t,e,n){const r=n+31>>>5;let i=0,o=-1,s=new Uint32Array(r),a=new Uint32Array(r);const l=(1<<e)-1;for(const n of t)0==u(i)&&o++,s[o]|=(n>>>e&l)<<i,a[o]|=(n&l)<<i,i+=e;return i<n&&c(i,o,r,s,a),new x(n,s,a)}static fromArray(t){const e=t.length,n=e+31>>>5;let r=0,i=-1,o=new Uint32Array(n),s=new Uint32Array(n);for(const e of t){const t=e+1+Number(e>0);0==u(r)&&i++,o[i]|=(t>>>1&1)<<r,s[i]|=(1&t)<<r,r+=1}return r<e&&c(r,i,n,o,s),new x(e,o,s)}static fromBin(t,e){void 0===e&&(e=t.length);const n=e+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);return m(t,0,e,r,i),new x(e,r,i)}static fromOct(t,e){void 0===e&&(e=3*t.length);const n=e+31>>>5;let r=0,i=-1,o=new Uint32Array(n),s=new Uint32Array(n);for(let e=t.length-1;e>=0;e--){const n=f[t[e]];0==u(r)&&i++,o[i]|=(n>>>16&7)<<r,s[i]|=(7&n)<<r,7<<r>>>r!=7&&(i++,o[i]=(n>>>16&7)>>>-r,s[i]=(7&n)>>>-r),r+=3}return r<e&&c(r,i,n,o,s),new x(e,o,s)}static fromHex(t,e){void 0===e&&(e=4*t.length);const n=e+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);return v(t,0,e,r,i),new x(e,r,i)}static fromString(t){const e=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);b(null!=e,"Vector3vl.fromString() Invalid string");const n=e[1].length?Number(e[1]):void 0,r=e[2].slice(1);switch(e[2][0]){case"b":return x.fromBin(r,n);case"o":return x.fromOct(r,n);case"h":return x.fromHex(r,n);case"d":return x.fromNumber(BigInt(r),n)}}static fromClonable(t){return new x(t._bits,t._avec,t._bvec)}static fromNumber(t,e){const n=void 0===e?0:e,r=BigInt(t);if(r>=BigInt(0)){let t=r.toString(2);return x.fromBin("0".repeat(Math.max(0,n-t.length))+t,e)}{const t=(-r).toString(2).length;let i=(r+(BigInt(1)<<BigInt(t))).toString(2);return x.fromBin("1".repeat(Math.max(1,n-t))+"0".repeat(t-i.length)+i,e)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const e=u(t),n=function(t){return t>>5}(t);return(this._avec[n]>>>e&1)+(this._bvec[n]>>>e&1)-1}get isHigh(){if(0==this._bits)return!0;const t=this._lastmask,e=e=>e.slice(0,e.length-1).every((t=>0==~t))&&(e[e.length-1]&t)==t;return e(this._avec)&&e(this._bvec)}get isLow(){if(0==this._bits)return!0;const t=this._lastmask,e=e=>e.slice(0,e.length-1).every((t=>0==t))&&!(e[e.length-1]&t);return e(this._avec)&&e(this._bvec)}get isDefined(){if(0==this._bits)return!1;const t=o(((t,e)=>t^e),this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every((t=>0==~t))}get isFullyDefined(){if(0==this._bits)return!0;const t=o(((t,e)=>t^e),this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some((t=>Boolean(t)))}and(t){return b(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>t&e),t._avec,this._avec),o(((t,e)=>t&e),t._bvec,this._bvec))}or(t){return b(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>t|e),t._avec,this._avec),o(((t,e)=>t|e),t._bvec,this._bvec))}xor(t){return b(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new x(this._bits,s(((t,e,n,r)=>(t|n)&(e^r)),t._avec,t._bvec,this._avec,this._bvec),s(((t,e,n,r)=>t&n^(e|r)),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return b(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>~(t&e)),t._bvec,this._bvec),o(((t,e)=>~(t&e)),t._avec,this._avec))}nor(t){return b(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new x(this._bits,o(((t,e)=>~(t|e)),t._bvec,this._bvec),o(((t,e)=>~(t|e)),t._avec,this._avec))}xnor(t){return b(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new x(this._bits,s(((t,e,n,r)=>t&n^~(e|r)),t._avec,t._bvec,this._avec,this._bvec),s(((t,e,n,r)=>~((t|n)&(e^r))),t._avec,t._bvec,this._avec,this._bvec))}not(){return new x(this._bits,this._bvec.map((t=>~t)),this._avec.map((t=>~t)))}xmask(){const t=o(((t,e)=>t^e),this._avec,this._bvec);return new x(this._bits,t,t)}reduceAnd(){return new x(1,Uint32Array.of(a(((t,e)=>t&e),this._avec,this._lastmask,1)),Uint32Array.of(a(((t,e)=>t&e),this._bvec,this._lastmask,1)))}reduceOr(){return new x(1,Uint32Array.of(a(((t,e)=>t|e),this._avec,this._lastmask,0)),Uint32Array.of(a(((t,e)=>t|e),this._bvec,this._lastmask,0)))}reduceNand(){return new x(1,Uint32Array.of(~a(((t,e)=>t&e),this._bvec,this._lastmask,1)),Uint32Array.of(~a(((t,e)=>t&e),this._avec,this._lastmask,1)))}reduceNor(){return new x(1,Uint32Array.of(~a(((t,e)=>t|e),this._bvec,this._lastmask,0)),Uint32Array.of(~a(((t,e)=>t|e),this._avec,this._lastmask,0)))}reduceXor(){const t=a(((t,e)=>t|e),o(((t,e)=>~t&e),this._avec,this._bvec),this._lastmask,0),e=a(((t,e)=>t^e),this._avec,this._lastmask,0);return new x(1,Uint32Array.of(e&~t),Uint32Array.of(e|t))}reduceXnor(){return this.reduceXor().not()}concat(...t){return x.concat(this,...t)}slice(t,e){if(void 0===t&&(t=0),void 0===e&&(e=this._bits),e>this.bits&&(e=this.bits),t>e&&(e=t),0==u(t)){const n=this._avec.slice(t>>>5,e+31>>>5),r=this._bvec.slice(t>>>5,e+31>>>5);return new x(e-t,n,r)}{const n=e-t+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);let o=0;r[o]=this._avec[t>>5]>>>t,i[o]=this._bvec[t>>5]>>>t;for(let s=1+(t>>5);s<=e>>>5&&(r[o]|=this._avec[s]<<-t,i[o]|=this._bvec[s]<<-t,o++,o!=n);s++)r[o]=this._avec[s]>>>t,i[o]=this._bvec[s]>>>t;return new x(e-t,r,i)}}toIterator(t){return t&t-1?this.toIteratorAnySkip(t):this.toIteratorPow2(t)}*toIteratorAnySkip(t){this.normalize();const e=(1<<t)-1;let n=0,r=0,i=e;for(;n<this._bits;){let o=(this._avec[r]&i)>>>n,s=(this._bvec[r]&i)>>>n;if(i>>>n!=e&&r+1!=this._avec.length){const t=e>>-n;o|=(this._avec[r+1]&t)<<-n,s|=(this._bvec[r+1]&t)<<-n}yield o<<t|s,i<<=t,n+=t,0==i&&(r++,i=e<<n)}}*toIteratorPow2(t){this.normalize();const e=(1<<t)-1;let n=0,r=0,i=e;for(;n<this._bits;){const o=(this._avec[r]&i)>>>n,s=(this._bvec[r]&i)>>>n;yield o<<t|s,i<<=t,n+=t,0==i&&(r++,i=e)}}toArray(){this.normalize();let t=0,e=0,n=1,r=[];for(;t<this._bits;){const i=(this._avec[e]&n)>>>t<<1|(this._bvec[e]&n)>>>t;r.push(i-1-Number(i>1)),n<<=1,t+=1,0==n&&(e++,n=1)}return r}toBin(){return g(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();let t=0,e=0,n=7,r=[];for(;t<this._bits;){let i=(this._avec[e]&n)>>>t,o=(this._bvec[e]&n)>>>t;if(n>>>t!=7&&e+1!=this._avec.length){const n=7>>-t;i|=(this._avec[e+1]&n)<<-t,o|=(this._bvec[e+1]&n)<<-t}const s=i<<3|o;7&s&~(s>>3)?r.push("x"):r.push((s>>3).toString()),n<<=3,t+=3,0==n&&(e++,n=7<<t)}return r.reverse().join("")}toHex(){return this.normalize(),p(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(b(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),b(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),0==this._bits?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return b(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),b(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),b(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),1==this.msb?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(b(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),0==this._bits?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return b(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),b(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),1==this.msb?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const e in this._avec){if(this._avec[e]!=t._avec[e])return!1;if(this._bvec[e]!=t._bvec[e])return!1}return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}e.Vector3vl=x,x.empty=x.zeros(0),x.one=x.ones(1),x.zero=x.zeros(1),x.x=x.xes(1);class w{constructor(t,e,n){void 0===n&&(n=0),this._bits=0|t,this._size=0|e,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(e*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(e*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(0==t.length)return new w(0,0);const e=new w(t[0].bits,t.length);for(const n in t){t[n].normalize(),b(t[n].bits==e._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let r=0;r<e._wpc;r++){const i=Number(n)*e._wpc+r;e._avec[i]=t[n]._avec[r],e._bvec[i]=t[n]._bvec[r]}}return e}get bits(){return this._bits}get words(){return this._size}get(t){const e=this._wpc*t;return new x(this._bits,this._avec.slice(e,e+this._wpc),this._bvec.slice(e,e+this._wpc))}set(t,e){b(e.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),e.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=e._avec[n],this._bvec[t*this._wpc+n]=e._bvec[n]}toJSON(){const t=[];let e,n=[],r=0;const i=()=>{if(0!=n.length){if(n.reduce(((t,e)=>t+e.length),0)==this._bits){const e=n.pop();n.length>0&&t.push(n.join("")),t.push(e)}else t.push(n.join(""));n=[]}},o=()=>{0!=r&&(1==r?e.length==this._bits?(i(),t.push(e)):n.push(e):(i(),t.push(r),t.push(e)),e=void 0,r=0)},s=t=>{e==t?r++:(o(),e=t,r=1)};for(let t=0;t<this._size;t++){const e=()=>{for(let e=0;e<this._wpc;e++){const n=this._avec[t*this._wpc+e]^this._bvec[t*this._wpc+e];for(let t=0;t<4;t++){const e=255<<16*t,r=n&e;if(r!=e||0!=r)return!1}}return!0};this._bits>0&&e()?s(p(t*this._wpc,this._bits,this._avec,this._bvec)):s(g(t*this._wpc,this._bits,this._avec,this._bvec))}return o(),i(),t}static fromJSON(t,e){const n=Math.ceil(t/4);let r=0;const i=e=>e.length==t||e.length==n?1:e.length/n;for(let t=0;t<e.length;t++)"string"==typeof e[t]?r+=i(e[t]):"number"==typeof e[t]&&(r+=e[t]*i(e[t+1]),t++);const o=new w(t,r,-1);let s=0;const a=e=>{if(e.length==t)m(e,s,t,o._avec,o._bvec),s+=o._wpc;else if(e.length==n)v(e,s,t,o._avec,o._bvec),s+=o._wpc;else for(let r=0;r<e.length/n;r++)v(e.slice(r*n,(r+1)*n),s,t,o._avec,o._bvec),s+=o._wpc};for(let t=0;t<e.length;t++)if("string"==typeof e[t])a(e[t]);else if("number"==typeof e[t]){for(const n of Array(e[t]).keys())a(e[t+1]);t++}return o}toArray(){return Array(this._size).fill(0).map(((t,e)=>this.get(e)))}toHex(){return this.toArray().map((t=>t.toHex()))}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let e=0;e<this._size;e++)if(!t.get(e).eq(this.get(e)))return!1;return!0}}e.Mem3vl=w;class _{constructor(t){n.set(this,void 0),this.pattern=t,r(this,n,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,e){return i(this,n,"f").test(t)}}e.Display3vlWithRegex=_,n=new WeakMap;class A extends _{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,e){return!0}read(t,e){return x.fromHex(t,e)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}e.Display3vlHex=A;class S extends _{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,e){return!0}read(t,e){return x.fromBin(t,e)}show(t){return t.toBin()}size(t){return t}}e.Display3vlBin=S;class E extends _{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,e){return!0}read(t,e){return x.fromOct(t,e)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}e.Display3vlOct=E;class k extends _{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,e){return!0}read(t,e){return"x"==t?x.xes(e):x.fromNumber(BigInt(t),e)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class T extends _{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,e){return e>0}read(t,e){return"x"==t?x.xes(e):x.fromNumber(BigInt(t),e)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}e.Display3vl=class{constructor(){this.displays={},this.addDisplay(new A),this.addDisplay(new S),this.addDisplay(new E),this.addDisplay(new k),this.addDisplay(new T)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,e){const n=[];for(let r of Object.values(this.displays))r.can(t,e)&&n.push(r);return n.sort(((t,e)=>t.sort-e.sort?t.sort-e.sort:t.name.localeCompare(e.name))).map((t=>t.name))}show(t,e){return this.displays[t].show(e)}read(t,e,n){return this.displays[t].read(e,n)}pattern(t){return this.displays[t].pattern}validate(t,e,n){return this.displays[t].validate(e,n)}size(t,e){return this.displays[t].size(e)}}},22642:(t,e,n)=>{var r=n(57221),i=n(68641).f;n(80923)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},22687:(t,e,n)=>{var r=n(92127),i=n(91212)(!0),o=n(79448)((function(){return"𠮷"!=="𠮷".at(0)}));r(r.P+r.F*o,"String",{at:function(t){return i(this,t)}})},22750:t=>{t.exports=!1},22956:(t,e,n)=>{t.exports=!n(1763)&&!n(79448)((function(){return 7!=Object.defineProperty(n(46034)("div"),"a",{get:function(){return 7}}).a}))},23007:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},23181:(t,e,n)=>{var r=n(85508)();t.exports=r},23483:(t,e,n)=>{var r=n(92127),i=n(57221),o=n(81485);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<r&&s.push(String(arguments[a]));return s.join("")}})},23537:(t,e,n)=>{var r=n(92127);r(r.S,"System",{global:n(67526)})},23805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},24066:(t,e,n)=>{var r=n(83488);t.exports=function(t){return"function"==typeof t?t:r}},24258:(t,e,n)=>{var r=n(63387);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},24423:(t,e,n)=>{var r=n(10117),i=n(66454),o=n(71737);t.exports=function(t,e){var n,s=new i,a={},u=new o;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),(function(t){u.add(t,Number.POSITIVE_INFINITY),s.setNode(t)})),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(n=u.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return s}},24713:(t,e,n)=>{var r=n(2523),i=n(15389),o=n(61489),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var u=null==n?0:o(n);return u<0&&(u=s(a+u,0)),r(t,i(e,3),u)}},24739:(t,e,n)=>{var r=n(26025);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},24877:t=>{t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},25113:(t,e,n)=>{e._0=e.KT=e.on=e.L6=e.C$=void 0;const r=n(22313);function i(t){let e=t.gridStep;for(;e*t.pixelsPerTick<t.gridMinDist;)10*e*t.pixelsPerTick<t.gridMinDist?e*=10:2*e*t.pixelsPerTick>=t.gridMinDist?e*=2:5*e*t.pixelsPerTick>=t.gridMinDist?e*=5:e*=10;return e}e.C$=class{constructor(t,e=[]){this._bits=t,this._data=e,0==e.length?this._present=-1:this._present=this._data[this._data.length-1][0]}get bits(){return this._bits}updatePresent(t){this._present=Math.max(this._present,t)}push(t,e){if(console.assert(e.bits==this._bits&&t>=this._present),this._present=t,this._data.length>0){const[n,r]=this._data[this._data.length-1];if(r.eq(e))return;if(console.assert(t>=n),t==n)return void(this._data[this._data.length-1][1]=e)}this._data.push([t,e])}getRange(t,e){if(0==this._data.length)return[];const n=t=>{let e=0,n=this._data.length;for(;n>e;){const r=e+n>>1,i=this._data[r][0];if(t==i)return r;t<i?n=r:e=r+1}return e==this._data.length?e-1:e};let r=n(t),i=n(t+e);r>0&&this._data[r][0]>t&&r--,i<this._data.length-1&&this._data[i][0]<t+e&&i++;const o=this._data.slice(r,i+1).map((t=>[t[0],t[1]]));return o[o.length-1][0]<t+e&&this._present>o[o.length-1][0]&&o.push([this._present,o[o.length-1][1]]),o}},e.L6={start:0,pixelsPerTick:10,bitColors:["#fc7c68","#999","#03c03c","#779ecb"],gapScale:.2,heightFill:.8,base:"hex",gridWidth:.5,gridColor:"gray",gridStep:1,gridMinDist:10,font:"10px sans-serif",textColor:"black"},Object.freeze(e.L6),e.on=function(t,e){var n={};for(const[t,r]of Object.entries(e))n[t]={value:r,writable:!0};return Object.create(t,n)},e.KT=i,e._0=function(t,e,n,o=new r.Display3vl){e.clearRect(0,0,e.canvas.width,e.canvas.height);const s=e.canvas.width/n.pixelsPerTick;"present"in n&&t.updatePresent(n.present);const a=t.getRange(n.start,Math.ceil(s)),u=a.map(((t,e)=>[t,a[e+1]]));u.pop();const c=t=>(Math.max(Math.min(t,n.start+s),n.start)-n.start)*n.pixelsPerTick,l=.5*e.canvas.height,h=(.5-n.heightFill/2)*e.canvas.height,f=(.5+n.heightFill/2)*e.canvas.height,d=t=>[f,l,h][t+1],p=t=>n.bitColors[t+1],g=t=>n.bitColors[t.isDefined?t.isLow?0:t.isHigh?2:3:1],v=e.createLinearGradient(0,f,0,h);v.addColorStop(0,n.bitColors[0]),v.addColorStop(.5,n.bitColors[1]),v.addColorStop(1,n.bitColors[2]),e.lineWidth=n.gridWidth;const m=i(n);for(let t=n.start-n.start%m;t<n.start+s;t+=m){const r=c(t);e.beginPath(),e.strokeStyle=n.gridColor,e.moveTo(r,0),e.lineTo(r,e.canvas.height),e.stroke()}e.lineWidth=2;for(const[[r,i],[s,a]]of u){const u=c(r),m=c(s);if(1==t.bits){const t=i.get(0),r=a.get(0),o=d(t),s=d(r),c=p(t),l=(p(r),Math.min(Math.abs(o-s)*n.gapScale,n.pixelsPerTick/2));e.beginPath(),e.strokeStyle=v,e.moveTo(m-l,o),e.lineTo(m,s),e.stroke(),e.beginPath(),e.strokeStyle=c,e.moveTo(u,o),e.lineTo(m-l,o),e.stroke()}else{const t=Math.min(Math.abs(h-f)*n.gapScale,n.pixelsPerTick/2),r=g(i),s=g(a),c=i.isDefined,d=a.isDefined;if(c){e.textAlign="center",e.textBaseline="middle",e.font=n.font,e.fillStyle=n.textColor;const r=o.show(n.base,i);e.measureText(r).width<2*(m-u-t)&&e.fillText(r,(u+m-t)/2,e.canvas.height/2,m-u-t)}c||d?i.eq(a)?(e.strokeStyle=s,e.beginPath(),e.moveTo(u,h),e.lineTo(m,h),e.stroke(),e.beginPath(),e.moveTo(u,f),e.lineTo(m,f),e.stroke()):(e.strokeStyle=s,d?(e.beginPath(),e.moveTo(m,h),e.lineTo(m-t/2,l),e.lineTo(m,f),e.stroke()):(e.beginPath(),e.moveTo(m,l),e.lineTo(m-t/2,l),e.stroke()),e.strokeStyle=r,c?(e.beginPath(),e.moveTo(u,h),e.lineTo(m-t,h),e.lineTo(m-t/2,l),e.lineTo(m-t,f),e.lineTo(u,f),e.stroke()):(e.beginPath(),e.moveTo(u,l),e.lineTo(m-t/2,l),e.stroke())):(e.beginPath(),e.strokeStyle=r,e.moveTo(u,l),e.lineTo(m,l),e.stroke())}}}},25170:(t,e,n)=>{var r=n(43305),i=n(4228),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(35052)(Function.call,n(68641).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},25203:(t,e,n)=>{var r=n(67574)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},25911:(t,e,n)=>{var r=n(38859),i=n(14248),o=n(19219);t.exports=function(t,e,n,s,a,u){var c=1&n,l=t.length,h=e.length;if(l!=h&&!(c&&h>l))return!1;var f=u.get(t),d=u.get(e);if(f&&d)return f==e&&d==t;var p=-1,g=!0,v=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<l;){var m=t[p],y=e[p];if(s)var b=c?s(y,m,p,e,t,u):s(m,y,p,t,e,u);if(void 0!==b){if(b)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(m===t||a(m,t,n,s,u)))return v.push(e)}))){g=!1;break}}else if(m!==y&&!a(m,y,n,s,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},26025:(t,e,n)=>{var r=n(75288);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},26198:(t,e,n)=>{var r=n(74692),i=n(34160);void 0===i.$&&(i.$=r),t.exports=r},26316:(t,e,n)=>{var r=n(92127),i=n(25170);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},27087:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},27301:t=>{t.exports=function(t){return function(e){return t(e)}}},27534:(t,e,n)=>{var r=n(72552),i=n(40346);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},27594:(t,e,n)=>{var r=n(92127),i=n(43854)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},27926:(t,e,n)=>{var r=n(27087),i=n(3344);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},28077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},28206:(t,e,n)=>{var r=n(1763),i=n(51311),o=n(1060),s=n(8449),a=n(18270),u=n(61249),c=Object.assign;t.exports=!c||n(79448)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=a(t),c=arguments.length,l=1,h=o.f,f=s.f;c>l;)for(var d,p=u(arguments[l++]),g=h?i(p).concat(h(p)):i(p),v=g.length,m=0;v>m;)d=g[m++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:c},28303:(t,e,n)=>{var r=n(56110)(n(9325),"WeakMap");t.exports=r},28543:(t,e,n)=>{n(52468)("strike",(function(t){return function(){return t(this,"strike","","")}}))},28586:(t,e,n)=>{var r=n(56449),i=n(44394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},28828:(t,e,n)=>{var r=n(91212)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},28859:(t,e,n)=>{var r=n(67526),i=n(33341),o=n(57917),s=n(4415)("src"),a=n(49461),u="toString",c=(""+a).split(u);n(56094).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||i(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},28872:(t,e,n)=>{var r=n(92127),i=n(78942),o="includes";r(r.P+r.F*n(25203)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},28879:(t,e,n)=>{var r=n(74335)(Object.getPrototypeOf,Object);t.exports=r},28905:(t,e,n)=>{var r=n(10117),i=n(71737);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,s,a={},u=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),c=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)}));u.size()>0&&(o=u.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return a}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},29147:(t,e,n)=>{var r=n(92127),i=n(75551);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},29172:(t,e,n)=>{var r=n(5861),i=n(40346);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},29276:(t,e,n)=>{var r=n(10117);function i(t,e,n,o,s,a){r.has(o,e)||(o[e]=!0,n||a.push(e),r.each(s(e),(function(e){i(t,e,n,o,s,a)})),n&&a.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,o,s)})),s}},29817:t=>{t.exports=function(t){return this.__data__.has(t)}},29888:(t,e,n)=>{var r=n(10117);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),(function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))})),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},29905:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},30294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},30333:(t,e,n)=>{n(37209)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},30361:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},30514:(t,e,n)=>{var r=n(34932);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},30641:(t,e,n)=>{var r=n(86649),i=n(95950);t.exports=function(t,e){return t&&r(t,e,i)}},30756:(t,e,n)=>{var r=n(23805);t.exports=function(t){return t==t&&!r(t)}},31041:(t,e,n)=>{var r=n(92127),i=n(24258),o=n(80128);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},31045:(t,e,n)=>{var r=n(29276);t.exports=function(t,e){return r(t,e,"post")}},31104:(t,e,n)=>{var r=n(92127),i=n(40627),o=n(4228);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},31166:(t,e,n)=>{t.exports={Graph:n(66454),version:n(44458)}},31175:(t,e,n)=>{var r=n(26025);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},31380:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},31384:(t,e,n)=>{var r=n(67526),i=n(2780).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(55089)(s);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},31667:(t,e,n)=>{t.exports={components:n(33619),dijkstra:n(28905),dijkstraAll:n(34919),findCycles:n(16678),floydWarshall:n(73590),isAcyclic:n(60498),postorder:n(31045),preorder:n(46016),prim:n(24423),tarjan:n(16291),topsort:n(29888)}},31684:(t,e,n)=>{var r=n(93599),i=n(56176),o=n(83488);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},31769:(t,e,n)=>{var r=n(56449),i=n(28586),o=n(61802),s=n(13222);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},31800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},32405:(t,e,n)=>{var r=n(92127),i=n(91212)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},32629:(t,e,n)=>{var r=n(9999);t.exports=function(t){return r(t,4)}},32804:(t,e,n)=>{var r=n(56110)(n(9325),"Promise");t.exports=r},32820:(t,e,n)=>{n(45392)("asyncIterator")},32865:(t,e,n)=>{var r=n(19570),i=n(51811)(r);t.exports=i},33031:(t,e,n)=>{var r=n(83120),i=n(46155),o=n(69302),s=n(36800),a=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=a},33341:(t,e,n)=>{var r=n(47967),i=n(11996);t.exports=n(1763)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},33589:(t,e,n)=>{var r=n(67526).parseFloat,i=n(40629).trim;t.exports=1/r(n(78451)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},33619:(t,e,n)=>{var r=n(10117);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),(function(t){e=[],o(t),e.length&&i.push(e)})),i}},33706:(t,e,n)=>{var r=n(92127),i=n(57221),o=n(27087),s=n(81485),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(86884)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=i(this),n=s(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},33842:(t,e,n)=>{var r=n(43305),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},33860:(t,e,n)=>{var r=n(56857);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}},34160:(t,e,n)=>{t.exports=function(){if("object"==typeof globalThis)return globalThis;var t;try{t=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return t}()},34180:(t,e,n)=>{n(45392)("observable")},34419:(t,e,n)=>{var r=n(92127);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},34490:(t,e,n)=>{var r=n(34848),i=n(80956);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},34561:(t,e,n)=>{var r=n(57917),i=n(57221),o=n(61464)(!1),s=n(40766)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},34609:(t,e,n)=>{var r=n(92127),i=n(61464)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!n(86884)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},34840:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},34848:(t,e,n)=>{var r=n(55089),i=n(67574)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},34919:(t,e,n)=>{var r=n(28905),i=n(10117);t.exports=function(t,e,n){return i.transform(t.nodes(),(function(i,o){i[o]=r(t,o,e,n)}),{})}},34932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},35052:(t,e,n)=>{var r=n(63387);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},35169:(t,e,n)=>{var r=n(56857),i=n(3988);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,s=i.partition(t,(function(t){return r.has(t,"barycenter")})),a=s.lhs,u=r.sortBy(s.rhs,(function(t){return-t.i})),c=[],l=0,h=0,f=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),f=o(c,u,f),r.forEach(a,(function(t){f+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,f=o(c,u,f)}));var d={vs:r.flatten(c,!0)};return h&&(d.barycenter=l/h,d.weight=h),d}},35433:(t,e,n)=>{var r=n(92127),i=n(4228),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},35529:(t,e,n)=>{var r=n(39344),i=n(28879),o=n(55527);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},35564:(t,e,n)=>{var r=n(18270),i=n(70157),o=n(81485);t.exports=function(t){for(var e=r(this),n=o(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>a;)e[a++]=t;return e}},35738:(t,e,n)=>{n(18966)("Map")},35749:(t,e,n)=>{var r=n(81042);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},35880:(t,e,n)=>{var r=n(30514),i=n(95950);t.exports=function(t){return null==t?[]:r(t,i(t))}},35890:(t,e,n)=>{for(var r=n(95165),i=n(51311),o=n(28859),s=n(67526),a=n(33341),u=n(60906),c=n(67574),l=c("iterator"),h=c("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),g=0;g<p.length;g++){var v,m=p[g],y=d[m],b=s[m],x=b&&b.prototype;if(x&&(x[l]||a(x,l,f),x[h]||a(x,h,m),u[m]=f,y))for(v in r)x[v]||o(x,v,r[v],!0)}},35970:(t,e,n)=>{var r=n(83120);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},36197:(t,e,n)=>{var r=n(47967).f,i=n(84719),o=n(96065),s=n(35052),a=n(16440),u=n(48790),c=n(98175),l=n(74970),h=n(55762),f=n(1763),d=n(12988).fastKey,p=n(12888),g=f?"_s":"size",v=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){a(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[g]=0,null!=r&&u(r,n,t[c],t)}));return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(t){p(this,e);for(var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return p(this,e)[g]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=p(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?l(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,l(1))}),n?"entries":"values",!n,!0),h(e)}}},36533:(t,e,n)=>{var r=n(93599),i=n(15389),o=n(56176);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},36639:(t,e,n)=>{var r=n(56857);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,(function(t,e){return e}))),o=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")})),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var u=r.map(new Array(a),(function(){return 0})),c=0;return r.forEach(o.forEach((function(t){var e=t.pos+s;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},36800:(t,e,n)=>{var r=n(75288),i=n(64894),o=n(30361),s=n(23805);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},36860:(t,e,n)=>{var r=n(56857),i=n(38481),o=n(68073).slack,s=n(68073).longestPath,a=n(68191).alg.preorder,u=n(68191).alg.postorder,c=n(3988).simplify;function l(t){t=c(t),s(t);var e,n=i(t);for(d(n),h(n,t);e=g(n);)m(n,t,e,v(n,t,e))}function h(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=f(t,e,n)}(t,e,n)}))}function f(t,e,n){var i=t.node(n).parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,r.forEach(e.nodeEdges(n),(function(r){var s,u,c=r.v===n,l=c?r.w:r.v;if(l!==i){var h=c===o,f=e.edge(r).weight;if(a+=h?f:-f,s=n,u=l,t.hasEdge(s,u)){var d=t.edge(n,l).cutvalue;a+=h?-d:d}}})),a}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,o){var s=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),(function(o){r.has(e,o)||(n=p(t,e,n,o,i))})),a.low=s,a.lim=n++,o?a.parent=o:delete a.parent,n}function g(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function v(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),u=t.node(s),c=a,l=!1;a.lim>u.lim&&(c=u,l=!0);var h=r.filter(e.edges(),(function(e){return l===y(0,t.node(e.v),c)&&l!==y(0,t.node(e.w),c)}));return r.minBy(h,(function(t){return o(e,t)}))}function m(t,e,n,i){var o=n.v,s=n.w;t.removeEdge(o,s),t.setEdge(i.v,i.w,{}),d(t),h(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),i=a(t,n);i=i.slice(1),r.forEach(i,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function y(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=d,l.initCutValues=h,l.calcCutValue=f,l.leaveEdge=g,l.enterEdge=v,l.exchangeEdges=m},37167:(t,e,n)=>{var r=n(4901),i=n(27301),o=n(86009),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},37209:(t,e,n)=>{if(n(1763)){var r=n(22750),i=n(67526),o=n(79448),s=n(92127),a=n(80237),u=n(8032),c=n(35052),l=n(16440),h=n(11996),f=n(33341),d=n(96065),p=n(27087),g=n(81485),v=n(73133),m=n(70157),y=n(83048),b=n(57917),x=n(34848),w=n(43305),_=n(18270),A=n(1508),S=n(84719),E=n(40627),k=n(59415).f,T=n(20762),P=n(4415),C=n(67574),O=n(66179),M=n(61464),N=n(19190),L=n(95165),I=n(60906),j=n(98931),B=n(55762),R=n(35564),D=n(84438),F=n(47967),V=n(68641),z=F.f,G=V.f,U=i.RangeError,q=i.TypeError,H=i.Uint8Array,$="ArrayBuffer",W="Shared"+$,X="BYTES_PER_ELEMENT",Y="prototype",J=Array[Y],Z=u.ArrayBuffer,K=u.DataView,Q=O(0),tt=O(2),et=O(3),nt=O(4),rt=O(5),it=O(6),ot=M(!0),st=M(!1),at=L.values,ut=L.keys,ct=L.entries,lt=J.lastIndexOf,ht=J.reduce,ft=J.reduceRight,dt=J.join,pt=J.sort,gt=J.slice,vt=J.toString,mt=J.toLocaleString,yt=C("iterator"),bt=C("toStringTag"),xt=P("typed_constructor"),wt=P("def_constructor"),_t=a.CONSTR,At=a.TYPED,St=a.VIEW,Et="Wrong length!",kt=O(1,(function(t,e){return Mt(N(t,t[wt]),e)})),Tt=o((function(){return 1===new H(new Uint16Array([1]).buffer)[0]})),Pt=!!H&&!!H[Y].set&&o((function(){new H(1).set({})})),Ct=function(t,e){var n=p(t);if(n<0||n%e)throw U("Wrong offset!");return n},Ot=function(t){if(w(t)&&At in t)return t;throw q(t+" is not a typed array!")},Mt=function(t,e){if(!w(t)||!(xt in t))throw q("It is not a typed array constructor!");return new t(e)},Nt=function(t,e){return Lt(N(t,t[wt]),e)},Lt=function(t,e){for(var n=0,r=e.length,i=Mt(t,r);r>n;)i[n]=e[n++];return i},It=function(t,e,n){z(t,e,{get:function(){return this._d[n]}})},jt=function(t){var e,n,r,i,o,s,a=_(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=T(a);if(null!=f&&!A(f)){for(s=f.call(a),r=[],e=0;!(o=s.next()).done;e++)r.push(o.value);a=r}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,n=g(a.length),i=Mt(this,n);n>e;e++)i[e]=h?l(a[e],e):a[e];return i},Bt=function(){for(var t=0,e=arguments.length,n=Mt(this,e);e>t;)n[t]=arguments[t++];return n},Rt=!!H&&o((function(){mt.call(new H(1))})),Dt=function(){return mt.apply(Rt?gt.call(Ot(this)):Ot(this),arguments)},Ft={copyWithin:function(t,e){return D.call(Ot(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return R.apply(Ot(this),arguments)},filter:function(t){return Nt(this,tt(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(Ot(this),arguments)},lastIndexOf:function(t){return lt.apply(Ot(this),arguments)},map:function(t){return kt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ht.apply(Ot(this),arguments)},reduceRight:function(t){return ft.apply(Ot(this),arguments)},reverse:function(){for(var t,e=this,n=Ot(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Ot(this),t)},subarray:function(t,e){var n=Ot(this),r=n.length,i=m(t,r);return new(N(n,n[wt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===e?r:m(e,r))-i))}},Vt=function(t,e){return Nt(this,gt.call(Ot(this),t,e))},zt=function(t){Ot(this);var e=Ct(arguments[1],1),n=this.length,r=_(t),i=g(r.length),o=0;if(i+e>n)throw U(Et);for(;o<i;)this[e+o]=r[o++]},Gt={entries:function(){return ct.call(Ot(this))},keys:function(){return ut.call(Ot(this))},values:function(){return at.call(Ot(this))}},Ut=function(t,e){return w(t)&&t[At]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},qt=function(t,e){return Ut(t,e=y(e,!0))?h(2,t[e]):G(t,e)},Ht=function(t,e,n){return!(Ut(t,e=y(e,!0))&&w(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?z(t,e,n):(t[e]=n.value,t)};_t||(V.f=qt,F.f=Ht),s(s.S+s.F*!_t,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Ht}),o((function(){vt.call({})}))&&(vt=mt=function(){return dt.call(this)});var $t=d({},Ft);d($t,Gt),f($t,yt,Gt.values),d($t,{slice:Vt,set:zt,constructor:function(){},toString:vt,toLocaleString:Dt}),It($t,"buffer","b"),It($t,"byteOffset","o"),It($t,"byteLength","l"),It($t,"length","e"),z($t,bt,{get:function(){return this[At]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,d="set"+t,p=i[c],m=p||{},y=p&&E(p),b=!p||!a.ABV,_={},A=p&&p[Y],T=function(t,n){z(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,Tt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,Tt)}(this,n,t)},enumerable:!0})};b?(p=n((function(t,n,r,i){l(t,p,c,"_d");var o,s,a,u,h=0,d=0;if(w(n)){if(!(n instanceof Z||(u=x(n))==$||u==W))return At in n?Lt(p,n):jt.call(p,n);o=n,d=Ct(r,e);var m=n.byteLength;if(void 0===i){if(m%e)throw U(Et);if((s=m-d)<0)throw U(Et)}else if((s=g(i)*e)+d>m)throw U(Et);a=s/e}else a=v(n),o=new Z(s=a*e);for(f(t,"_d",{b:o,o:d,l:s,e:a,v:new K(o)});h<a;)T(t,h++)})),A=p[Y]=S($t),f(A,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&j((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,i){var o;return l(t,p,c),w(n)?n instanceof Z||(o=x(n))==$||o==W?void 0!==i?new m(n,Ct(r,e),i):void 0!==r?new m(n,Ct(r,e)):new m(n):At in n?Lt(p,n):jt.call(p,n):new m(v(n))})),Q(y!==Function.prototype?k(m).concat(k(y)):k(m),(function(t){t in p||f(p,t,m[t])})),p[Y]=A,r||(A.constructor=p));var P=A[yt],C=!!P&&("values"==P.name||null==P.name),O=Gt.values;f(p,xt,!0),f(A,At,c),f(A,St,!0),f(A,wt,p),(u?new p(1)[bt]==c:bt in A)||z(A,bt,{get:function(){return c}}),_[c]=p,s(s.G+s.W+s.F*(p!=m),_),s(s.S,c,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o((function(){m.of.call(p,1)})),c,{from:jt,of:Bt}),X in A||f(A,X,e),s(s.P,c,Ft),B(c),s(s.P+s.F*Pt,c,{set:zt}),s(s.P+s.F*!C,c,Gt),r||A.toString==vt||(A.toString=vt),s(s.P+s.F*o((function(){new p(1).slice()})),c,{slice:Vt}),s(s.P+s.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){A.toLocaleString.call([1,2])}))),c,{toLocaleString:Dt}),I[c]=C?P:O,r||C||f(A,yt,O)}}else t.exports=function(){}},37217:(t,e,n)=>{var r=n(80079),i=n(51420),o=n(90938),s=n(63605),a=n(29817),u=n(80945);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,t.exports=c},37241:(t,e,n)=>{var r=n(70695),i=n(72903),o=n(64894);t.exports=function(t){return o(t)?r(t,!0):i(t)}},37334:t=>{t.exports=function(t){return function(){return t}}},37727:(t,e,n)=>{var r=n(92127),i=n(27087),o=n(15122),s=n(27926),a=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h="0",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+s.call(h,7-n.length)+n}return e},g=function(t,e,n){return 0===e?n:e%2==1?g(t,e-1,n*t):g(t*t,e/2,n)};r(r.P+r.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(79448)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,n,r,a,u=o(this,l),c=i(t),v="",m=h;if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*g(2,69,1))-69,n=e<0?u*g(2,-e,1):u/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(g(10,r,1),0),r=e-1;r>=23;)d(1<<23),r-=23;d(1<<r),f(1,1),d(2),m=p()}else f(0,n),f(1<<-e,0),m=p()+s.call(h,c);return c>0?v+((a=m.length)<=c?"0."+s.call(h,c-a)+m:m.slice(0,a-c)+"."+m.slice(a-c)):v+m}})},37828:(t,e,n)=>{var r=n(9325).Uint8Array;t.exports=r},38329:(t,e,n)=>{var r=n(64894);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},38362:(t,e,n)=>{var r=n(31166);t.exports={Graph:r.Graph,json:n(57494),alg:n(31667),version:r.version}},38437:(t,e,n)=>{n(52468)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},38440:(t,e,n)=>{var r=n(16038),i=n(27301),o=n(86009),s=o&&o.isSet,a=s?i(s):r;t.exports=a},38451:(t,e,n)=>{var r=n(92127);r(r.S,"Object",{is:n(7359)})},38481:(t,e,n)=>{var r=n(56857),i=n(68191).Graph,o=n(68073).slack;function s(t,e){return r.forEach(t.nodes(),(function n(i){r.forEach(e.nodeEdges(i),(function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))}))})),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)}))}function u(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(r.setNode(c,{});s(r,t)<l;)e=a(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),u(r,t,n);return r}},38816:(t,e,n)=>{var r=n(35970),i=n(56757),o=n(32865);t.exports=function(t){return o(i(t,void 0,r),t+"")}},38859:(t,e,n)=>{var r=n(53661),i=n(31380),o=n(51459);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},39344:(t,e,n)=>{var r=n(23805),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},39497:(t,e,n)=>{var r=n(92127);r(r.S,"Number",{isNaN:function(t){return t!=t}})},39530:(t,e,n)=>{var r=n(92127),i=n(67526),o=n(56094),s=n(31384)(),a=n(67574)("observable"),u=n(63387),c=n(4228),l=n(16440),h=n(96065),f=n(33341),d=n(48790),p=d.RETURN,g=function(t){return null==t?void 0:u(t)},v=function(t){var e=t._c;e&&(t._c=void 0,e())},m=function(t){return void 0===t._o},y=function(t){m(t)||(t._o=void 0,v(t))},b=function(t,e){c(t),this._c=void 0,this._o=t,t=new x(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}m(this)&&v(this)};b.prototype=h({},{unsubscribe:function(){y(this)}});var x=function(t){this._s=t};x.prototype=h({},{next:function(t){var e=this._s;if(!m(e)){var n=e._o;try{var r=g(n.next);if(r)return r.call(n,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(m(e))throw t;var n=e._o;e._o=void 0;try{var r=g(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{v(e)}finally{throw t}}return v(e),t},complete:function(t){var e=this._s;if(!m(e)){var n=e._o;e._o=void 0;try{var r=g(n.complete);t=r?r.call(n,t):void 0}catch(t){try{v(e)}finally{throw t}}return v(e),t}}});var w=function(t){l(this,w,"Observable","_f")._f=u(t)};h(w.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)((function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})}))}}),h(w,{from:function(t){var e="function"==typeof this?this:w,n=g(c(t)[a]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e((function(t){return r.subscribe(t)}))}return new e((function(e){var n=!1;return s((function(){if(!n){try{if(d(t,!1,(function(t){if(e.next(t),n)return p}))===p)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}})),function(){n=!0}}))},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:w)((function(t){var e=!1;return s((function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}})),function(){e=!0}}))}}),f(w.prototype,a,(function(){return this})),r(r.G,{Observable:w}),n(55762)("Observable")},39616:(t,e,n)=>{n(18966)("Set")},39638:(t,e,n)=>{n(1763)&&"g"!=/./g.flags&&n(47967).f(RegExp.prototype,"flags",{configurable:!0,get:n(1158)})},39653:(t,e,n)=>{if(n(56813),n(95780),n(88262),n.g._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");function r(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}n.g._babelPolyfill=!0,r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(t){[][t]&&r(Array,t,Function.call.bind([][t]))}))},39741:(t,e,n)=>{var r=n(56857),i=n(68191).Graph,o=n(3988);function s(t,e){var n={};return r.reduce(e,(function(e,i){var o=0,s=0,a=e.length,c=r.last(i);return r.forEach(i,(function(e,l){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),f=h?t.node(h).order:a;(h||e===c)&&(r.forEach(i.slice(s,l+1),(function(e){r.forEach(t.predecessors(e),(function(r){var i=t.node(r),s=i.order;!(s<o||f<s)||i.dummy&&t.node(e).dummy||u(n,r,e)}))})),s=l+1,o=f)})),i})),n}function a(t,e){var n={};function i(e,i,o,s,a){var c;r.forEach(r.range(i,o),(function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&u(n,e,c)}))}))}return r.reduce(e,(function(e,n){var o,s=-1,a=0;return r.forEach(n,(function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,a,u,s,o),a=u,s=o)}i(n,a,n.length,o,e.length)})),n})),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function l(t,e,n,i){var o={},s={},a={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){o[t]=t,s[t]=t,a[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var u=i(t);if(u.length){u=r.sortBy(u,(function(t){return a[t]}));for(var l=(u.length-1)/2,h=Math.floor(l),f=Math.ceil(l);h<=f;++h){var d=u[h];s[t]===t&&e<a[d]&&!c(n,t,d)&&(s[d]=t,s[t]=o[t]=o[d],e=a[d])}}}))})),{root:o,align:s}}function h(t,e,n,o,s){var a={},u=function(t,e,n,o){var s=new i,a=t.graph(),u=function(t,e,n){return function(i,o,s){var a,u=i.node(o),c=i.node(s),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(l+=n?a:-a),a=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=c.width/2;break;case"r":a=-c.width/2}return a&&(l+=n?a:-a),a=0,l}}(a.nodesep,a.edgesep,o);return r.forEach(e,(function(e){var i;r.forEach(e,(function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(u(t,e,i),a||0))}i=e}))})),s}(t,e,n,s),c=s?"borderLeft":"borderRight";function l(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l((function(t){a[t]=u.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+u.edge(e))}),0)}),u.predecessors.bind(u)),l((function(e){var n=u.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-u.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(a[e]=Math.max(a[e],n))}),u.successors.bind(u)),r.forEach(o,(function(t){a[t]=a[n[t]]})),a}function f(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)})),n-i}))}function d(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(s){var a,u=n+s,c=t[u];if(c!==e){var l=r.values(c);(a="l"===s?i-r.min(l):o-r.max(l))&&(t[u]=r.mapValues(c,(function(t){return t+a})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2}))}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),u={};r.forEach(["u","d"],(function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var s=("u"===o?t.predecessors:t.successors).bind(t),a=l(0,e,i,s),c=h(t,e,a.root,a.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),u[o+n]=c}))}));var c=f(t,u);return d(u,c),p(u,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:h,alignCoordinates:d,findSmallestWidthAlignment:f,balance:p}},39754:(t,e,n)=>{var r=n(83729),i=n(80909),o=n(24066),s=n(56449);t.exports=function(t,e){return(s(t)?r:i)(t,o(e))}},39813:(t,e,n)=>{var r=n(92127),i=n(66179)(2);r(r.P+r.F*!n(86884)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},39859:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},40135:(t,e,n)=>{var r=n(56857),i=n(3988);function o(t,e,n,r,o,s){var a={width:0,height:0,rank:s,borderType:e},u=o[e][s-1],c=i.addDummyNode(t,"border",a,n);o[e][s]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var i=t.children(n),s=t.node(n);if(i.length&&r.forEach(i,e),r.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,u=s.maxRank+1;a<u;++a)o(t,"borderLeft","_bl",n,s,a),o(t,"borderRight","_br",n,s,a)}}))}},40345:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{sign:n(3733)})},40346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},40627:(t,e,n)=>{var r=n(57917),i=n(18270),o=n(40766)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},40629:(t,e,n)=>{var r=n(92127),i=n(3344),o=n(79448),s=n(78451),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),l=function(t,e,n){var i={},a=o((function(){return!!s[t]()||"​"!="​"[t]()})),u=i[t]=a?e(h):s[t];n&&(i[n]=u),r(r.P+r.F*a,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},40766:(t,e,n)=>{var r=n(44556)("keys"),i=n(4415);t.exports=function(t){return r[t]||(r[t]=i(t))}},40860:(t,e,n)=>{var r=n(40882),i=n(80909),o=n(15389),s=n(85558),a=n(56449);t.exports=function(t,e,n){var u=a(t)?r:s,c=arguments.length<3;return u(t,o(e,4),n,c,i)}},40882:t=>{t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},41113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},41208:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(71354),i=n.n(r),o=n(76314),s=n.n(o)()(i());s.push([t.id,".joint-element .highlighted {\n    outline: none;\n    fill: #ecf0f1;\n    stroke: #bdc3c7;\n    cursor: crosshair;\n}\n\n.djs.fixed .joint-link {\n    pointer-events: none;\n}\n.djs.fixed .joint-element {\n    cursor: default;\n}\n\n\n\n/* .viewport is a <g> node wrapping all diagram elements in the paper */\n.joint-viewport {\n   -webkit-user-select: none;\n   -moz-user-select: none;\n   user-select: none;\n}\n\n.joint-paper > svg,\n.joint-paper-background,\n.joint-paper-grid {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n/*\n1. IE can't handle paths without the `d` attribute for bounding box calculation\n2. IE can't even handle 'd' attribute as a css selector (e.g path[d]) so the following rule will\n   break the links rendering.\n\npath:not([d]) {\n    display: none;\n}\n\n*/\n\n\n/* magnet is an element that can be either source or a target of a link */\n.djs:not(.fixed) [magnet=true]:not(.joint-element) {\n   cursor: crosshair;\n}\n.djs:not(.fixed) [magnet=true]:not(.joint-element):hover {\n   opacity: .7;\n}\n\n/*\n\nElements have CSS classes named by their types. E.g. type: basic.Rect has a CSS class \"element basic Rect\".\nThis makes it possible to easilly style elements in CSS and have generic CSS rules applying to\nthe whole group of elements. Each plugin can provide its own stylesheet.\n\n*/\n\n.joint-element {\n   /* Give the user a hint that he can drag&drop the element. */\n   cursor: move;\n}\n\n.joint-element * {\n   user-drag: none;\n}\n\n.joint-element .scalable * {\n   /* The default behavior when scaling an element is not to scale the stroke in order to prevent the ugly effect of stroke with different proportions. */\n   vector-effect: non-scaling-stroke;\n}\n/*\n\nconnection-wrap is a <path> element of the joint.dia.Link that follows the .connection <path> of that link.\nIn other words, the `d` attribute of the .connection-wrap contains the same data as the `d` attribute of the\n.connection <path>. The advantage of using .connection-wrap is to be able to catch pointer events\nin the neighborhood of the .connection <path>. This is especially handy if the .connection <path> is\nvery thin.\n\n*/\n\n.marker-source,\n.marker-target {\n   /* This makes the arrowheads point to the border of objects even though the transform: scale() is applied on them. */\n   vector-effect: non-scaling-stroke;\n}\n\n/* Paper */\n.joint-paper {\n    position: relative;\n}\n/* Paper */\n\n/*  Highlighting  */\n.joint-highlight-opacity {\n    opacity: 0.3;\n}\n/*  Highlighting  */\n\n\n/* foreignObject inside the elements (i.e joint.shapes.basic.TextBlock) */\n.joint-element .fobj {\n    overflow: hidden;\n}\n.joint-element .fobj body {\n    background-color: transparent;\n    margin: 0px;\n    position: static;\n}\n.joint-element .fobj div {\n    text-align: center;\n    vertical-align: middle;\n    display: table-cell;\n    padding: 0px 5px 0px 5px;\n}\n\n/* Paper */\n.joint-paper.joint-theme-dark {\n    background-color: #18191b;\n}\n.joint-paper.joint-theme-default {\n    background-color: #FFFFFF;\n}\n/* Paper */\n\nbody {\n    font-family: 'verdana', sans-serif;\n    font-weight: normal;\n    font-style: normal;\n}\n\n.joint-element foreignObject {\n    overflow: hidden;\n}\n\n.joint-element foreignObject body {\n    background-color: transparent;\n    display: block;\n    margin: 0;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    cursor: initial;\n}\n\n.joint-element foreignObject body input,\n.joint-element foreignObject body select {\n    pointer-events: all;\n}\n\n.joint-element foreignObject body input[type='text'],\n.joint-element foreignObject body input[type='number'],\n.joint-element foreignObject body select {\n    font-size: 8pt;\n    border: 1px solid gray;\n    box-sizing: border-box;\n    position: absolute;\n    transform: translate(0, -50%);\n    top: 50%;\n}\n\n.joint-element foreignObject body input[type='text'] {\n    font-family: 'monospace';\n    width: 100%;\n}\n\n.joint-element foreignObject.tooltip body input[type='number'] {\n    width: calc(100% - 10px);\n}\n\n.joint-element foreignObject body a {\n    text-decoration: none;\n}\n\n.joint-element input.invalid, table.memeditor input.invalid {\n    background: #ffaaaa;\n}\n\n.joint-element foreignObject.tooltip {\n    visibility: hidden;\n    opacity:0;\n    transition:visibility 0s linear 0.5s,opacity 0.5s linear;\n}\n\n.joint-element foreignObject.tooltip:hover,\ng:hover > foreignObject.tooltip {\n    visibility: visible;\n    opacity:1;\n    transition-delay:0s;\n}\n\n.joint-element foreignObject.tooltip body {\n    border: 1px solid gray;\n    box-sizing: border-box;\n    background: white;\n    padding: 5px;\n}\n\ndiv.wire_hover {\n    position: fixed;\n    pointer-events: none;\n    background: white;\n    border: 1px solid black;\n    padding: 5px;\n    font-size: 8pt;\n    z-index: 200;\n}\n\n.joint-element .numvalue {\n    font-family: monospace;\n    font-size: 10px;\n}\n\n.joint-element text.numvalue {\n    fill: black;\n    text-anchor: middle;\n}\n\ntable.monitor tr {\n  padding: 0; margin: 0;\n  font-size: 10px;\n}\n\ntable.monitor td {\n  padding: 0; margin: 0;\n}\n\ntable.monitor {\n  border-collapse: collapse;\n  width: 100%;\n}\n\ntable.monitor td.name {\n  width: 100%;\n}\n\ntable.monitor input[name=trigger], table.monitor select[name=trigger] {\n    width: 5em;\n}\n\ncanvas.wavecanvas {\n  display: block;\n}\n\ntable.memeditor {\n    margin-top: 0.5em;\n}\n\ntable.memeditor input {\n    font-family: monospace;\n    border: 1px solid #aaa;\n    border-radius: 4px;\n    padding: 0.2em 0.5em;\n}\n\ndiv[data-iopanel=\"input\"] input, div[data-iopanel=\"output\"] {\n    font-family: monospace;\n}\n\ntable.memeditor td:first-child {\n    font-family: monospace;\n    padding-right: 1em;\n}\n\ntable.memeditor input.flash {\n    animation-name: flash-animation;\n    animation-duration: 1s;\n}\n\ntable.memeditor input.isread {\n    box-shadow: 0px 0px 5px green;\n}\n\ntable.memeditor input.iswrite {\n    box-shadow: 0px 0px 5px red;\n}\n\ntable.memeditor input.iswrite.isread {\n    box-shadow: 1px 1px 5px -1px red,\n                -1px -1px 5px -1px green;\n}\n\n@keyframes flash-animation {\n    from { background-color: yellow; }\n    to   { background-color: default; }\n}\n\n.joint-element circle.current_state {\n    fill: yellow;\n}\n\n.joint-link path.next_trans, marker path.next_trans {\n    stroke: #03c03c;\n    fill: #03c03c;\n}\n\n/* jqueryui fix */\n.ui-dialog, .ui-dialog-content {\n    box-sizing: content-box;\n}\n","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;IACI,aAAa;IACb,aAAa;IACb,eAAe;IACf,iBAAiB;AACrB;;AAEA;IACI,oBAAoB;AACxB;AACA;IACI,eAAe;AACnB;;;;AAIA,uEAAuE;AACvE;GACG,yBAAyB;GACzB,sBAAsB;GACtB,iBAAiB;AACpB;;AAEA;;;EAGE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;;;;;;;;;CASC;;;AAGD,yEAAyE;AACzE;GACG,iBAAiB;AACpB;AACA;GACG,WAAW;AACd;;AAEA;;;;;;CAMC;;AAED;GACG,4DAA4D;GAC5D,YAAY;AACf;;AAEA;GACG,eAAe;AAClB;;AAEA;GACG,sJAAsJ;GACtJ,iCAAiC;AACpC;AACA;;;;;;;;CAQC;;AAED;;GAEG,oHAAoH;GACpH,iCAAiC;AACpC;;AAEA,UAAU;AACV;IACI,kBAAkB;AACtB;AACA,UAAU;;AAEV,mBAAmB;AACnB;IACI,YAAY;AAChB;AACA,mBAAmB;;;AAGnB,yEAAyE;AACzE;IACI,gBAAgB;AACpB;AACA;IACI,6BAA6B;IAC7B,WAAW;IACX,gBAAgB;AACpB;AACA;IACI,kBAAkB;IAClB,sBAAsB;IACtB,mBAAmB;IACnB,wBAAwB;AAC5B;;AAEA,UAAU;AACV;IACI,yBAAyB;AAC7B;AACA;IACI,yBAAyB;AAC7B;AACA,UAAU;;AAEV;IACI,kCAAkC;IAClC,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,6BAA6B;IAC7B,cAAc;IACd,SAAS;IACT,eAAe;IACf,WAAW;IACX,YAAY;IACZ,eAAe;AACnB;;AAEA;;IAEI,mBAAmB;AACvB;;AAEA;;;IAGI,cAAc;IACd,sBAAsB;IACtB,sBAAsB;IACtB,kBAAkB;IAClB,6BAA6B;IAC7B,QAAQ;AACZ;;AAEA;IACI,wBAAwB;IACxB,WAAW;AACf;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,wDAAwD;AAC5D;;AAEA;;IAEI,mBAAmB;IACnB,SAAS;IACT,mBAAmB;AACvB;;AAEA;IACI,sBAAsB;IACtB,sBAAsB;IACtB,iBAAiB;IACjB,YAAY;AAChB;;AAEA;IACI,eAAe;IACf,oBAAoB;IACpB,iBAAiB;IACjB,uBAAuB;IACvB,YAAY;IACZ,cAAc;IACd,YAAY;AAChB;;AAEA;IACI,sBAAsB;IACtB,eAAe;AACnB;;AAEA;IACI,WAAW;IACX,mBAAmB;AACvB;;AAEA;EACE,UAAU,EAAE,SAAS;EACrB,eAAe;AACjB;;AAEA;EACE,UAAU,EAAE,SAAS;AACvB;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;IACI,UAAU;AACd;;AAEA;EACE,cAAc;AAChB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,sBAAsB;IACtB,sBAAsB;IACtB,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,sBAAsB;AAC1B;;AAEA;IACI,sBAAsB;IACtB,kBAAkB;AACtB;;AAEA;IACI,+BAA+B;IAC/B,sBAAsB;AAC1B;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,2BAA2B;AAC/B;;AAEA;IACI;wCACoC;AACxC;;AAEA;IACI,OAAO,wBAAwB,EAAE;IACjC,OAAO,yBAAyB,EAAE;AACtC;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,eAAe;IACf,aAAa;AACjB;;AAEA,iBAAiB;AACjB;IACI,uBAAuB;AAC3B",sourcesContent:[".joint-element .highlighted {\n    outline: none;\n    fill: #ecf0f1;\n    stroke: #bdc3c7;\n    cursor: crosshair;\n}\n\n.djs.fixed .joint-link {\n    pointer-events: none;\n}\n.djs.fixed .joint-element {\n    cursor: default;\n}\n\n\n\n/* .viewport is a <g> node wrapping all diagram elements in the paper */\n.joint-viewport {\n   -webkit-user-select: none;\n   -moz-user-select: none;\n   user-select: none;\n}\n\n.joint-paper > svg,\n.joint-paper-background,\n.joint-paper-grid {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n/*\n1. IE can't handle paths without the `d` attribute for bounding box calculation\n2. IE can't even handle 'd' attribute as a css selector (e.g path[d]) so the following rule will\n   break the links rendering.\n\npath:not([d]) {\n    display: none;\n}\n\n*/\n\n\n/* magnet is an element that can be either source or a target of a link */\n.djs:not(.fixed) [magnet=true]:not(.joint-element) {\n   cursor: crosshair;\n}\n.djs:not(.fixed) [magnet=true]:not(.joint-element):hover {\n   opacity: .7;\n}\n\n/*\n\nElements have CSS classes named by their types. E.g. type: basic.Rect has a CSS class \"element basic Rect\".\nThis makes it possible to easilly style elements in CSS and have generic CSS rules applying to\nthe whole group of elements. Each plugin can provide its own stylesheet.\n\n*/\n\n.joint-element {\n   /* Give the user a hint that he can drag&drop the element. */\n   cursor: move;\n}\n\n.joint-element * {\n   user-drag: none;\n}\n\n.joint-element .scalable * {\n   /* The default behavior when scaling an element is not to scale the stroke in order to prevent the ugly effect of stroke with different proportions. */\n   vector-effect: non-scaling-stroke;\n}\n/*\n\nconnection-wrap is a <path> element of the joint.dia.Link that follows the .connection <path> of that link.\nIn other words, the `d` attribute of the .connection-wrap contains the same data as the `d` attribute of the\n.connection <path>. The advantage of using .connection-wrap is to be able to catch pointer events\nin the neighborhood of the .connection <path>. This is especially handy if the .connection <path> is\nvery thin.\n\n*/\n\n.marker-source,\n.marker-target {\n   /* This makes the arrowheads point to the border of objects even though the transform: scale() is applied on them. */\n   vector-effect: non-scaling-stroke;\n}\n\n/* Paper */\n.joint-paper {\n    position: relative;\n}\n/* Paper */\n\n/*  Highlighting  */\n.joint-highlight-opacity {\n    opacity: 0.3;\n}\n/*  Highlighting  */\n\n\n/* foreignObject inside the elements (i.e joint.shapes.basic.TextBlock) */\n.joint-element .fobj {\n    overflow: hidden;\n}\n.joint-element .fobj body {\n    background-color: transparent;\n    margin: 0px;\n    position: static;\n}\n.joint-element .fobj div {\n    text-align: center;\n    vertical-align: middle;\n    display: table-cell;\n    padding: 0px 5px 0px 5px;\n}\n\n/* Paper */\n.joint-paper.joint-theme-dark {\n    background-color: #18191b;\n}\n.joint-paper.joint-theme-default {\n    background-color: #FFFFFF;\n}\n/* Paper */\n\nbody {\n    font-family: 'verdana', sans-serif;\n    font-weight: normal;\n    font-style: normal;\n}\n\n.joint-element foreignObject {\n    overflow: hidden;\n}\n\n.joint-element foreignObject body {\n    background-color: transparent;\n    display: block;\n    margin: 0;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    cursor: initial;\n}\n\n.joint-element foreignObject body input,\n.joint-element foreignObject body select {\n    pointer-events: all;\n}\n\n.joint-element foreignObject body input[type='text'],\n.joint-element foreignObject body input[type='number'],\n.joint-element foreignObject body select {\n    font-size: 8pt;\n    border: 1px solid gray;\n    box-sizing: border-box;\n    position: absolute;\n    transform: translate(0, -50%);\n    top: 50%;\n}\n\n.joint-element foreignObject body input[type='text'] {\n    font-family: 'monospace';\n    width: 100%;\n}\n\n.joint-element foreignObject.tooltip body input[type='number'] {\n    width: calc(100% - 10px);\n}\n\n.joint-element foreignObject body a {\n    text-decoration: none;\n}\n\n.joint-element input.invalid, table.memeditor input.invalid {\n    background: #ffaaaa;\n}\n\n.joint-element foreignObject.tooltip {\n    visibility: hidden;\n    opacity:0;\n    transition:visibility 0s linear 0.5s,opacity 0.5s linear;\n}\n\n.joint-element foreignObject.tooltip:hover,\ng:hover > foreignObject.tooltip {\n    visibility: visible;\n    opacity:1;\n    transition-delay:0s;\n}\n\n.joint-element foreignObject.tooltip body {\n    border: 1px solid gray;\n    box-sizing: border-box;\n    background: white;\n    padding: 5px;\n}\n\ndiv.wire_hover {\n    position: fixed;\n    pointer-events: none;\n    background: white;\n    border: 1px solid black;\n    padding: 5px;\n    font-size: 8pt;\n    z-index: 200;\n}\n\n.joint-element .numvalue {\n    font-family: monospace;\n    font-size: 10px;\n}\n\n.joint-element text.numvalue {\n    fill: black;\n    text-anchor: middle;\n}\n\ntable.monitor tr {\n  padding: 0; margin: 0;\n  font-size: 10px;\n}\n\ntable.monitor td {\n  padding: 0; margin: 0;\n}\n\ntable.monitor {\n  border-collapse: collapse;\n  width: 100%;\n}\n\ntable.monitor td.name {\n  width: 100%;\n}\n\ntable.monitor input[name=trigger], table.monitor select[name=trigger] {\n    width: 5em;\n}\n\ncanvas.wavecanvas {\n  display: block;\n}\n\ntable.memeditor {\n    margin-top: 0.5em;\n}\n\ntable.memeditor input {\n    font-family: monospace;\n    border: 1px solid #aaa;\n    border-radius: 4px;\n    padding: 0.2em 0.5em;\n}\n\ndiv[data-iopanel=\"input\"] input, div[data-iopanel=\"output\"] {\n    font-family: monospace;\n}\n\ntable.memeditor td:first-child {\n    font-family: monospace;\n    padding-right: 1em;\n}\n\ntable.memeditor input.flash {\n    animation-name: flash-animation;\n    animation-duration: 1s;\n}\n\ntable.memeditor input.isread {\n    box-shadow: 0px 0px 5px green;\n}\n\ntable.memeditor input.iswrite {\n    box-shadow: 0px 0px 5px red;\n}\n\ntable.memeditor input.iswrite.isread {\n    box-shadow: 1px 1px 5px -1px red,\n                -1px -1px 5px -1px green;\n}\n\n@keyframes flash-animation {\n    from { background-color: yellow; }\n    to   { background-color: default; }\n}\n\n.joint-element circle.current_state {\n    fill: yellow;\n}\n\n.joint-link path.next_trans, marker path.next_trans {\n    stroke: #03c03c;\n    fill: #03c03c;\n}\n\n/* jqueryui fix */\n.ui-dialog, .ui-dialog-content {\n    box-sizing: content-box;\n}\n"],sourceRoot:""}]);const a=s},41318:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{fround:n(72122)})},41799:(t,e,n)=>{var r=n(37217),i=n(60270);t.exports=function(t,e,n,o){var s=n.length,a=s,u=!o;if(null==t)return!a;for(t=Object(t);s--;){var c=n[s];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<a;){var l=(c=n[s])[0],h=t[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in t))return!1}else{var d=new r;if(o)var p=o(h,f,l,t,e,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},42650:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{imulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,s=i&n,a=r>>16,u=i>>16,c=(a*s>>>0)+(o*s>>>16);return a*u+(c>>16)+((o*u>>>0)+(c&n)>>16)}})},42818:(t,e,n)=>{n(52468)("small",(function(t){return function(){return t(this,"small","","")}}))},42824:(t,e,n)=>{var r=n(87805),i=n(93290),o=n(71961),s=n(23007),a=n(35529),u=n(72428),c=n(56449),l=n(83693),h=n(3656),f=n(1882),d=n(23805),p=n(11331),g=n(37167),v=n(14974),m=n(69884);t.exports=function(t,e,n,y,b,x,w){var _=v(t,n),A=v(e,n),S=w.get(A);if(S)r(t,n,S);else{var E=x?x(_,A,n+"",t,e,w):void 0,k=void 0===E;if(k){var T=c(A),P=!T&&h(A),C=!T&&!P&&g(A);E=A,T||P||C?c(_)?E=_:l(_)?E=s(_):P?(k=!1,E=i(A,!0)):C?(k=!1,E=o(A,!0)):E=[]:p(A)||u(A)?(E=_,u(_)?E=m(_):d(_)&&!f(_)||(E=a(A))):k=!1}k&&(w.set(A,E),b(E,A,y,x,w),w.delete(A)),r(t,n,E)}}},43305:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},43360:(t,e,n)=>{var r=n(93243);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},43714:(t,e,n)=>{var r=n(53730);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++i<a;){var c=r(o[i],s[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},43838:(t,e,n)=>{var r=n(21791),i=n(37241);t.exports=function(t,e){return t&&r(e,i(e),t)}},43854:(t,e,n)=>{var r=n(1763),i=n(51311),o=n(57221),s=n(8449).f;t.exports=function(t){return function(e){for(var n,a=o(e),u=i(a),c=u.length,l=0,h=[];c>l;)n=u[l++],r&&!s.call(a,n)||h.push(t?[n,a[n]]:a[n]);return h}}},44383:(t,e,n)=>{var r=n(76001),i=n(38816)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},44394:(t,e,n)=>{var r=n(72552),i=n(40346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},44458:t=>{t.exports="2.1.8"},44517:(t,e,n)=>{var r=n(76545),i=n(63950),o=n(84247),s=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=s},44556:(t,e,n)=>{var r=n(56094),i=n(67526),o="__core-js_shared__",s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(22750)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},44894:(t,e,n)=>{var r=n(92127);r(r.P,"String",{repeat:n(27926)})},44959:(t,e,n)=>{var r=n(56857);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){var n,i,o,s;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,s=0,(n=t).weight&&(o+=n.barycenter*n.weight,s+=n.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},45083:(t,e,n)=>{var r=n(1882),i=n(87296),o=n(23805),s=n(47473),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},45392:(t,e,n)=>{var r=n(67526),i=n(56094),o=n(22750),s=n(47960),a=n(47967).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},45693:(t,e,n)=>{var r=n(92127),i=n(74472),o=n(4514),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*s,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},45706:(t,e,n)=>{var r=n(92127),i=n(80237),o=n(8032),s=n(4228),a=n(70157),u=n(81485),c=n(43305),l=n(67526).ArrayBuffer,h=n(19190),f=o.ArrayBuffer,d=o.DataView,p=i.ABV&&l.isView,g=f.prototype.slice,v=i.VIEW,m="ArrayBuffer";r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,m,{isView:function(t){return p&&p(t)||c(t)&&v in t}}),r(r.P+r.U+r.F*n(79448)((function(){return!new f(2).slice(1,void 0).byteLength})),m,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(s(this),t);for(var n=s(this).byteLength,r=a(t,n),i=a(void 0===e?n:e,n),o=new(h(this,f))(u(i-r)),c=new d(this),l=new d(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(55762)(m)},45891:(t,e,n)=>{var r=n(51873),i=n(72428),o=n(56449),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},46016:(t,e,n)=>{var r=n(29276);t.exports=function(t,e){return r(t,e,"pre")}},46034:(t,e,n)=>{var r=n(43305),i=n(67526).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},46155:(t,e,n)=>{var r=n(34932),i=n(47422),o=n(15389),s=n(5128),a=n(73937),u=n(27301),c=n(43714),l=n(83488),h=n(56449);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[l];var f=-1;e=r(e,u(o));var d=s(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++f,value:t}}));return a(d,(function(t,e){return c(t,e,n)}))}},46592:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},47091:(t,e,n)=>{var r=n(88984),i=n(5861),o=n(64894),s=n(85015),a=n(81993);t.exports=function(t){if(null==t)return 0;if(o(t))return s(t)?a(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},47237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},47248:(t,e,n)=>{var r=n(16547),i=n(51234);t.exports=function(t,e){return i(t||[],e||[],r)}},47334:(t,e,n)=>{n(52468)("bold",(function(t){return function(){return t(this,"b","","")}}))},47422:(t,e,n)=>{var r=n(31769),i=n(77797);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},47473:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},47874:(t,e,n)=>{var r=n(92127),i=n(6543);r(r.P+r.F*!n(86884)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},47899:(t,e,n)=>{var r=n(92127);r(r.S,"Array",{isArray:n(77981)})},47960:(t,e,n)=>{e.f=n(67574)},47967:(t,e,n)=>{var r=n(4228),i=n(22956),o=n(83048),s=Object.defineProperty;e.f=n(1763)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},48236:(t,e,n)=>{var r=n(43305),i=n(12988).onFreeze;n(80923)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},48655:(t,e,n)=>{var r=n(26025);t.exports=function(t){return r(this.__data__,t)>-1}},48699:(t,e,n)=>{n(37209)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},48790:(t,e,n)=>{var r=n(35052),i=n(97368),o=n(1508),s=n(4228),a=n(81485),u=n(20762),c={},l={},h=t.exports=function(t,e,n,h,f){var d,p,g,v,m=f?function(){return t}:u(t),y=r(n,h,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=a(t.length);d>b;b++)if((v=e?y(s(p=t[b])[0],p[1]):y(t[b]))===c||v===l)return v}else for(g=m.call(t);!(p=g.next()).done;)if((v=i(g,y,p.value,e))===c||v===l)return v};h.BREAK=c,h.RETURN=l},48948:(t,e,n)=>{var r=n(21791),i=n(86375);t.exports=function(t,e){return r(t,i(t),e)}},48951:(t,e,n)=>{var r=n(67574)("toPrimitive"),i=Date.prototype;r in i||n(33341)(i,r,n(20107))},49307:(t,e,n)=>{var r=n(92127),i=n(63387),o=n(35052),s=n(48790);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,a,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),null==t?new this:(n=[],e?(r=0,a=o(u,arguments[2],2),s(t,!1,(function(t){n.push(a(t,r++))}))):s(t,!1,n.push,n),new this(n))}})}},49326:(t,e,n)=>{var r=n(31769),i=n(72428),o=n(56449),s=n(30361),a=n(30294),u=n(77797);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,h=!1;++c<l;){var f=u(e[c]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&a(l)&&s(f,l)&&(o(t)||i(t))}},49461:(t,e,n)=>{t.exports=n(44556)("native-function-to-string",Function.toString)},49653:(t,e,n)=>{var r=n(37828);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},49698:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},50002:(t,e,n)=>{var r=n(82199),i=n(4664),o=n(95950);t.exports=function(t){return r(t,o,i)}},50104:(t,e,n)=>{var r=n(53661);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},50583:(t,e,n)=>{var r=n(47237),i=n(17255),o=n(28586),s=n(77797);t.exports=function(t){return o(t)?r(s(t)):i(t)}},50660:(t,e,n)=>{var r=n(92127);r(r.G+r.W+r.F*!n(80237).ABV,{DataView:n(8032).DataView})},50689:(t,e,n)=>{var r=n(50002),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var h=l;h--;){var f=c[h];if(!(u?f in e:i.call(e,f)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=u;++h<l;){var m=t[f=c[h]],y=e[f];if(o)var b=u?o(y,m,f,e,t,a):o(m,y,f,t,e,a);if(!(void 0===b?m===y||s(m,y,n,o,a):b)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},51220:(t,e,n)=>{n(37209)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},51234:t=>{t.exports=function(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}},51311:(t,e,n)=>{var r=n(34561),i=n(86140);t.exports=Object.keys||function(t){return r(t,i)}},51420:(t,e,n)=>{var r=n(80079);t.exports=function(){this.__data__=new r,this.size=0}},51453:(t,e,n)=>{var r=n(56857),i=n(98918),o=n(36639),s=n(14520),a=n(97860),u=n(94384),c=n(68191).Graph,l=n(3988);function h(t,e,n){return r.map(e,(function(e){return a(t,e,n)}))}function f(t,e){var n=new c;r.forEach(t,(function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,(function(e,n){t.node(e).order=n})),u(t,n,o.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=l.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),s=h(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);d(t,a);for(var u,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){f(p%2?n:s,p%4>=2),a=l.buildLayerMatrix(t);var v=o(t,a);v<c&&(g=0,u=r.cloneDeep(a),c=v)}d(t,u)}},51459:t=>{t.exports=function(t){return this.__data__.has(t)}},51811:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},51873:(t,e,n)=>{var r=n(9325).Symbol;t.exports=r},52346:(t,e,n)=>{var r=n(92127),i=n(18270),o=n(83048);r(r.P+r.F*n(79448)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},52420:(t,e,n)=>{var r=n(86649),i=n(24066),o=n(37241);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},52468:(t,e,n)=>{var r=n(92127),i=n(79448),o=n(3344),s=/"/g,a=function(t,e,n,r){var i=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),a+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},52535:(t,e,n)=>{var r=n(34848),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},52650:(t,e,n)=>{var r=n(68641),i=n(92127),o=n(4228);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},53e3:(t,e,n)=>{var r=n(18270),i=n(40627);n(80923)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},53661:(t,e,n)=>{var r=n(63040),i=n(17670),o=n(90289),s=n(4509),a=n(72949);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},53702:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{umulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,s=i&n,a=r>>>16,u=i>>>16,c=(a*s>>>0)+(o*s>>>16);return a*u+(c>>>16)+((o*u>>>0)+(c&n)>>>16)}})},53730:(t,e,n)=>{var r=n(44394);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,s=r(t),a=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!l&&t<e||l&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}},54128:(t,e,n)=>{var r=n(31800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},54300:(t,e,n)=>{var r=n(92127),i=n(18270),o=n(83048),s=n(40627),a=n(68641).f;n(1763)&&r(r.P+n(91913),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=a(n,r))return e.get}while(n=s(n))}})},54591:(t,e,n)=>{n(52468)("blink",(function(t){return function(){return t(this,"blink","","")}}))},54913:(t,e,n)=>{var r=n(92127),i=n(66179)(1);r(r.P+r.F*!n(86884)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},55e3:(t,e,n)=>{var r=n(92127);r(r.S,"Reflect",{ownKeys:n(96222)})},55056:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},55089:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},55364:(t,e,n)=>{var r=n(85250),i=n(20999)((function(t,e,n){r(t,e,n)}));t.exports=i},55378:(t,e,n)=>{var r=n(34932),i=n(15389),o=n(5128),s=n(56449);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},55385:(t,e,n)=>{var r=n(79448),i=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:o},55481:(t,e,n)=>{var r=n(9325)["__core-js_shared__"];t.exports=r},55527:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},55538:(t,e,n)=>{var r=n(92127);r(r.S,"Number",{isInteger:n(33842)})},55580:(t,e,n)=>{var r=n(56110)(n(9325),"DataView");t.exports=r},55762:(t,e,n)=>{var r=n(67526),i=n(47967),o=n(1763),s=n(67574)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},55765:(t,e,n)=>{var r=n(38859),i=n(15325),o=n(29905),s=n(19219),a=n(44517),u=n(84247);t.exports=function(t,e,n){var c=-1,l=i,h=t.length,f=!0,d=[],p=d;if(n)f=!1,l=o;else if(h>=200){var g=e?null:a(t);if(g)return u(g);f=!1,l=s,p=new r}else p=e?[]:d;t:for(;++c<h;){var v=t[c],m=e?e(v):v;if(v=n||0!==v?v:0,f&&m==m){for(var y=p.length;y--;)if(p[y]===m)continue t;e&&p.push(m),d.push(v)}else l(p,m,n)||(p!==d&&p.push(m),d.push(v))}return d}},55771:(t,e,n)=>{var r=n(92127),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},56094:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},56110:(t,e,n)=>{var r=n(45083),i=n(10392);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},56176:t=>{t.exports=function(t,e){return t<e}},56289:(t,e,n)=>{var r=n(92127),i=n(67963)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},56353:(t,e,n)=>{var r=n(56857),i=n(3988);function o(t,e,n,s,a,u,c){var l=t.children(c);if(l.length){var h=i.addBorderNode(t,"_bt"),f=i.addBorderNode(t,"_bb"),d=t.node(c);t.setParent(h,c),d.borderTop=h,t.setParent(f,c),d.borderBottom=f,r.forEach(l,(function(r){o(t,e,n,s,a,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,p=i.borderTop?s:2*s,g=l!==d?1:a-u[c]+1;t.setEdge(h,l,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,f,{weight:p,minlen:g,nestingEdge:!0})})),t.parent(c)||t.setEdge(e,h,{weight:0,minlen:a+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,(function(t){n(t,o+1)})),e[i]=o}return r.forEach(t.children(),(function(t){n(t,1)})),e}(t),s=r.max(r.values(n))-1,a=2*s+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(r){o(t,e,a,u,s,n,r)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},56449:t=>{var e=Array.isArray;t.exports=e},56576:(t,e,n)=>{var r=n(92127);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},56757:(t,e,n)=>{var r=n(91033),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),u=Array(a);++s<a;)u[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(u),r(t,this,c)}}},56813:(t,e,n)=>{n(99650),n(935),n(66064),n(89448),n(22642),n(53e3),n(88647),n(81895),n(48236),n(73822),n(15572),n(69318),n(65032),n(79073),n(11430),n(38451),n(18132),n(17482),n(65049),n(70489),n(95502),n(90571),n(96108),n(64509),n(37727),n(6701),n(34419),n(91933),n(55538),n(39497),n(4104),n(60210),n(56576),n(84437),n(88050),n(76648),n(55771),n(82392),n(72335),n(74896),n(94521),n(29147),n(41318),n(84352),n(15327),n(57509),n(15909),n(79584),n(40345),n(99134),n(67901),n(46592),n(12220),n(23483),n(20957),n(82975),n(32405),n(17224),n(28872),n(44894),n(10177),n(87360),n(89011),n(54591),n(47334),n(7083),n(69213),n(38437),n(62220),n(76549),n(42818),n(28543),n(3559),n(84153),n(13292),n(52346),n(9429),n(7849),n(48951),n(47899),n(93863),n(4570),n(96511),n(95853),n(97075),n(3504),n(54913),n(39813),n(86511),n(58888),n(81449),n(47874),n(34609),n(33706),n(19620),n(57762),n(15144),n(75369),n(76209),n(95165),n(8301),n(94116),n(78604),n(39638),n(4040),n(68305),n(74701),n(20341),n(66517),n(93386),n(71632),n(79397),n(98163),n(45706),n(50660),n(48699),n(14702),n(30333),n(51220),n(72087),n(98066),n(8537),n(17925),n(2490),n(7103),n(82586),n(92552),n(4376),n(75153),n(11879),n(52650),n(31104),n(21883),n(35433),n(55e3),n(15932),n(5443),n(26316),n(9087),n(99766),n(71390),n(22687),n(95380),n(45693),n(20062),n(60521),n(96311),n(32820),n(34180),n(84614),n(27594),n(87146),n(7531),n(85039),n(54300),n(6328),n(71657),n(18223),n(35738),n(39616),n(56841),n(15339),n(7367),n(82577),n(74748),n(72538),n(11692),n(23537),n(9676),n(76764),n(70447),n(68330),n(98423),n(84117),n(63758),n(42650),n(20391),n(94633),n(69557),n(53702),n(16043),n(68583),n(31041),n(77491),n(74907),n(79100),n(19269),n(91319),n(79732),n(1176),n(3107),n(61691),n(93642),n(39530),n(18772),n(75417),n(35890),t.exports=n(56094)},56841:(t,e,n)=>{n(18966)("WeakMap")},56857:(t,e,n)=>{var r;try{r={cloneDeep:n(88055),constant:n(37334),defaults:n(84684),each:n(76135),filter:n(87612),find:n(7309),flatten:n(35970),forEach:n(39754),forIn:n(52420),has:n(61448),isUndefined:n(62216),last:n(68090),map:n(55378),mapValues:n(73916),max:n(94506),merge:n(55364),min:n(31684),minBy:n(36533),now:n(10124),pick:n(44383),range:n(23181),reduce:n(40860),sortBy:n(33031),uniqueId:n(97200),values:n(35880),zipObject:n(47248)}}catch(t){}r||(r=window._),t.exports=r},57221:(t,e,n)=>{var r=n(61249),i=n(3344);t.exports=function(t){return r(i(t))}},57494:(t,e,n)=>{var r=n(10117),i=n(66454);function o(t){return r.map(t.nodes(),(function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o}))}function s(t){return r.map(t.edges(),(function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:s(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},57509:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},57762:(t,e,n)=>{var r=n(92127);r(r.P,"Array",{fill:n(35564)}),n(88184)("fill")},57917:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},58156:(t,e,n)=>{var r=n(47422);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},58888:(t,e,n)=>{var r=n(92127),i=n(66179)(4);r(r.P+r.F*!n(86884)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},58933:(t,e,n)=>{var r=n(67526),i=n(92127),o=n(28859),s=n(96065),a=n(12988),u=n(48790),c=n(16440),l=n(43305),h=n(79448),f=n(98931),d=n(3844),p=n(98880);t.exports=function(t,e,n,g,v,m){var y=r[t],b=y,x=v?"set":"add",w=b&&b.prototype,_={},A=function(t){var e=w[t];o(w,t,"delete"==t||"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(m||w.forEach&&!h((function(){(new b).entries().next()})))){var S=new b,E=S[x](m?{}:-0,1)!=S,k=h((function(){S.has(1)})),T=f((function(t){new b(t)})),P=!m&&h((function(){for(var t=new b,e=5;e--;)t[x](e,e);return!t.has(-0)}));T||((b=e((function(e,n){c(e,b,t);var r=p(new y,e,b);return null!=n&&u(n,v,r[x],r),r}))).prototype=w,w.constructor=b),(k||P)&&(A("delete"),A("has"),v&&A("get")),(P||E)&&A(x),m&&w.clear&&delete w.clear}else b=g.getConstructor(e,t,v,x),s(b.prototype,n),a.NEED=!0;return d(b,t),_[t]=b,i(i.G+i.W+i.F*(b!=y),_),m||g.setStrong(b,t,v),b}},59350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},59415:(t,e,n)=>{var r=n(34561),i=n(86140).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},60210:(t,e,n)=>{var r=n(92127);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},60270:(t,e,n)=>{var r=n(87068),i=n(40346);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,s,t,a))}},60498:(t,e,n)=>{var r=n(29888);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},60521:(t,e,n)=>{n(40629)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},60906:t=>{t.exports={}},61249:(t,e,n)=>{var r=n(55089);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},61308:(t,e,n)=>{var r=n(67526).document;t.exports=r&&r.documentElement},61448:(t,e,n)=>{var r=n(20426),i=n(49326);t.exports=function(t,e){return null!=t&&i(t,e,r)}},61464:(t,e,n)=>{var r=n(57221),i=n(81485),o=n(70157);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},61489:(t,e,n)=>{var r=n(17400);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},61691:(t,e,n)=>{var r=n(97380),i=n(4228),o=n(63387),s=r.key,a=r.set;r.exp({metadata:function(t,e){return function(n,r){a(t,e,(void 0!==r?i:o)(n),s(r))}}})},61802:(t,e,n)=>{var r=n(62224),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},62006:(t,e,n)=>{var r=n(15389),i=n(64894),o=n(95950);t.exports=function(t){return function(e,n,s){var a=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(a[t],t,a)}}var c=t(e,n,s);return c>-1?a[u?e[c]:c]:void 0}}},62193:(t,e,n)=>{var r=n(88984),i=n(5861),o=n(72428),s=n(56449),a=n(64894),u=n(3656),c=n(55527),l=n(37167),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},62216:t=>{t.exports=function(t){return void 0===t}},62220:(t,e,n)=>{n(52468)("italics",(function(t){return function(){return t(this,"i","","")}}))},62224:(t,e,n)=>{var r=n(50104);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},62322:(t,e,n)=>{var r=n(77981),i=n(43305),o=n(81485),s=n(35052),a=n(67574)("isConcatSpreadable");t.exports=function t(e,n,u,c,l,h,f,d){for(var p,g,v=l,m=0,y=!!f&&s(f,d,3);m<c;){if(m in u){if(p=y?y(u[m],m,n):u[m],g=!1,i(p)&&(g=void 0!==(g=p[a])?!!g:r(p)),g&&h>0)v=t(e,n,p,o(p.length),v,h-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}m++}return v}},62948:(t,e,n)=>{var r=n(56857);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),(function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}})),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,s=[],a=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,u=0,c=s[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=s[u])!==a&&t.node(c).maxRank<r.rank;)u++;c===a&&(l=!1)}if(!l){for(;u<s.length-1&&t.node(c=s[u+1]).minRank<=r.rank;)u++;c=s[u]}t.setParent(n,c),n=t.successors(n)[0]}}))}},63040:(t,e,n)=>{var r=n(21549),i=n(80079),o=n(68223);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},63345:t=>{t.exports=function(){return[]}},63387:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},63605:t=>{t.exports=function(t){return this.__data__.get(t)}},63606:(t,e,n)=>{var r=n(43305),i=n(77981),o=n(67574)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},63702:t=>{t.exports=function(){this.__data__=[],this.size=0}},63758:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|(i^~o)&i-o>>>0)>>>31)|0}})},63862:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},63950:t=>{t.exports=function(){}},64509:(t,e,n)=>{var r=n(67526),i=n(57917),o=n(55089),s=n(98880),a=n(83048),u=n(79448),c=n(59415).f,l=n(68641).f,h=n(47967).f,f=n(40629).trim,d="Number",p=r[d],g=p,v=p.prototype,m=o(n(84719)(v))==d,y="trim"in String.prototype,b=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=y?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var s,u=e.slice(2),c=0,l=u.length;c<l;c++)if((s=u.charCodeAt(c))<48||s>i)return NaN;return parseInt(u,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(m?u((function(){v.valueOf.call(n)})):o(n)!=d)?s(new g(b(e)),n,p):b(e)};for(var x,w=n(1763)?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)i(g,x=w[_])&&!i(p,x)&&h(p,x,l(g,x));p.prototype=v,v.constructor=p,n(28859)(r,d,p)}},64894:(t,e,n)=>{var r=n(1882),i=n(30294);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},65032:(t,e,n)=>{var r=n(43305);n(80923)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},65049:(t,e,n)=>{var r=n(92127);r(r.P,"Function",{bind:n(15538)})},66064:(t,e,n)=>{var r=n(92127);r(r.S+r.F*!n(1763),"Object",{defineProperty:n(47967).f})},66179:(t,e,n)=>{var r=n(35052),i=n(61249),o=n(18270),s=n(81485),a=n(93191);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||a;return function(e,a,p){for(var g,v,m=o(e),y=i(m),b=r(a,p,3),x=s(y.length),w=0,_=n?d(e,x):u?d(e,0):void 0;x>w;w++)if((f||w in y)&&(v=b(g=y[w],w,m),t))if(n)_[w]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:_.push(g)}else if(l)return!1;return h?-1:c||l?l:_}}},66454:(t,e,n)=>{var r=n(10117);t.exports=o;var i="\0";function o(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function u(t,e,n,i){var o=""+e,s=""+n;if(!t&&o>s){var a=o;o=s,s=a}return o+""+s+""+(r.isUndefined(i)?"\0":i)}function c(t,e){return u(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._in[e])}))},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._out[e])}))},o.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,(function(t){n.length>1?i.setNode(t,e):i.setNode(t)})),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children[i][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),r.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),(function(t){e.setParent(t,o(t))})),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,(function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r})),this},o.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var c=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[c]=l,s(this._preds[e],t),s(this._sucs[t],e),this._in[e][c]=l,this._out[t][c]=l,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.v===e})):i}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.w===e})):i}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},66517:(t,e,n)=>{var r,i,o,s,a=n(22750),u=n(67526),c=n(35052),l=n(34848),h=n(92127),f=n(43305),d=n(63387),p=n(16440),g=n(48790),v=n(19190),m=n(2780).set,y=n(31384)(),b=n(24258),x=n(80128),w=n(4514),_=n(85957),A="Promise",S=u.TypeError,E=u.process,k=E&&E.versions,T=k&&k.v8||"",P=u[A],C="process"==l(E),O=function(){},M=i=b.f,N=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[n(67574)("species")]=function(t){t(O,O)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var n=t._c;y((function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{a?(i||(2==t._h&&R(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===e.promise?c(S("Promise-chain cycle")):(o=L(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!s&&l.exit(),c(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)}))}},j=function(t){m.call(u,(function(){var e,n,r,i=t._v,o=B(t);if(o&&(e=x((function(){C?E.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=C||B(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){m.call(u,(function(){var e;C?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=L(t))?y((function(){var r={_w:n,_d:!1};try{e.call(t,c(F,r,1),c(D,r,1))}catch(t){D.call(r,t)}})):(n._v=t,n._s=1,I(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};N||(P=function(t){p(this,P,A,"_h"),d(t),r.call(this);try{t(c(F,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(96065)(P.prototype,{then:function(t,e){var n=M(v(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(F,t,1),this.reject=c(D,t,1)},b.f=M=function(t){return t===P||t===s?new o(t):i(t)}),h(h.G+h.W+h.F*!N,{Promise:P}),n(3844)(P,A),n(55762)(A),s=n(56094)[A],h(h.S+h.F*!N,A,{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!N),A,{resolve:function(t){return _(a&&this===s?P:this,t)}}),h(h.S+h.F*!(N&&n(98931)((function(t){P.all(t).catch(O)}))),A,{all:function(t){var e=this,n=M(e),r=n.resolve,i=n.reject,o=x((function(){var n=[],o=0,s=1;g(t,!1,(function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=M(e),r=n.reject,i=x((function(){g(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},66721:(t,e,n)=>{var r=n(81042),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},67197:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},67227:(t,e,n)=>{var r=n(47967),i=n(11996);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},67526:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},67574:(t,e,n)=>{var r=n(44556)("wks"),i=n(4415),o=n(67526).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},67901:(t,e,n)=>{var r=n(92127),i=n(75551),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},67963:t=>{t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},68073:(t,e,n)=>{var r=n(56857);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.min(r.map(t.outEdges(i),(function(e){return n(e.w)-t.edge(e).minlen})));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},68090:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},68191:(t,e,n)=>{var r;try{r=n(38362)}catch(t){}r||(r=window.graphlib),t.exports=r},68223:(t,e,n)=>{var r=n(56110)(n(9325),"Map");t.exports=r},68305:(t,e,n)=>{var r=n(4228),i=n(18270),o=n(81485),s=n(27087),a=n(28828),u=n(52535),c=Math.max,l=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(69228)("replace",2,(function(t,e,n,p){return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=p(n,t,this,e);if(i.done)return i.value;var h=r(t),f=String(this),d="function"==typeof e;d||(e=String(e));var v=h.global;if(v){var m=h.unicode;h.lastIndex=0}for(var y=[];;){var b=u(h,f);if(null===b)break;if(y.push(b),!v)break;""===String(b[0])&&(h.lastIndex=a(f,o(h.lastIndex),m))}for(var x,w="",_=0,A=0;A<y.length;A++){b=y[A];for(var S=String(b[0]),E=c(l(s(b.index),f.length),0),k=[],T=1;T<b.length;T++)k.push(void 0===(x=b[T])?x:String(x));var P=b.groups;if(d){var C=[S].concat(k,E,f);void 0!==P&&C.push(P);var O=String(e.apply(void 0,C))}else O=g(S,f,E,k,P,e);E>=_&&(w+=f.slice(_,E)+O,_=E+S.length)}return w+f.slice(_)}];function g(t,e,r,o,s,a){var u=r+t.length,c=o.length,l=d;return void 0!==s&&(s=i(s),l=f),n.call(a,l,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":a=s[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var f=h(l/10);return 0===f?n:f<=c?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}a=o[l-1]}return void 0===a?"":a}))}}))},68330:(t,e,n)=>{var r=n(92127),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},68583:(t,e,n)=>{var r=n(92127),i=n(56094),o=n(67526),s=n(19190),a=n(85957);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},68641:(t,e,n)=>{var r=n(8449),i=n(11996),o=n(57221),s=n(83048),a=n(57917),u=n(22956),c=Object.getOwnPropertyDescriptor;e.f=n(1763)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},69213:(t,e,n)=>{n(52468)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},69228:(t,e,n)=>{n(94116);var r=n(28859),i=n(33341),o=n(79448),s=n(3344),a=n(67574),u=n(69600),c=a("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=a(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!l||"split"===t&&!h){var g=/./[f],v=n(s,f,""[t],(function(t,e,n,r,i){return e.exec===u?d&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),m=v[0],y=v[1];r(String.prototype,t,m),i(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},69302:(t,e,n)=>{var r=n(83488),i=n(56757),o=n(32865);t.exports=function(t,e){return o(i(t,e,r),t+"")}},69318:(t,e,n)=>{var r=n(43305);n(80923)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},69557:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{scale:n(77836)})},69600:(t,e,n)=>{var r,i,o=n(1158),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,c="lastIndex",l=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r[c]||0!==i[c]),h=void 0!==/()??/.exec("")[1];(l||h)&&(u=function(t){var e,n,r,i,u=this;return h&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),l&&(e=u[c]),r=s.call(u,t),l&&r&&(u[c]=u.global?r.index+r[0].length:e),h&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},69752:(t,e,n)=>{var r=n(83729),i=n(39344),o=n(30641),s=n(15389),a=n(28879),u=n(56449),c=n(3656),l=n(1882),h=n(23805),f=n(37167);t.exports=function(t,e,n){var d=u(t),p=d||c(t)||f(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=p?d?new g:[]:h(t)&&l(g)?i(a(t)):{}}return(p?r:o)(t,(function(t,r,i){return e(n,t,r,i)})),n}},69884:(t,e,n)=>{var r=n(21791),i=n(37241);t.exports=function(t){return r(t,i(t))}},70080:(t,e,n)=>{var r=n(26025),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},70157:(t,e,n)=>{var r=n(27087),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},70447:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},70489:(t,e,n)=>{var r=n(47967).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n(1763)&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},70695:(t,e,n)=>{var r=n(78096),i=n(72428),o=n(56449),s=n(3656),a=n(30361),u=n(37167),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),h=!n&&!l&&s(t),f=!n&&!l&&!h&&u(t),d=n||l||h||f,p=d?r(t.length,String):[],g=p.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||p.push(v);return p}},71354:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},71390:(t,e,n)=>{var r=n(92127),i=n(62322),o=n(18270),s=n(81485),a=n(27087),u=n(93191);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=s(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:a(t)),r}}),n(88184)("flatten")},71451:t=>{var e=function(t,e){return t<e};function n(t){if(!(this instanceof n))return new n(t);this.array=[],this.size=0,this.compare=t||e}n.prototype.clone=function(){var t=new n(this.compare);return t.size=this.size,t.array=this.array.slice(0,this.size),t},n.prototype.add=function(t){var e,n,r=this.size;for(this.array[this.size]=t,this.size+=1;r>0&&(e=r-1>>1,n=this.array[e],this.compare(t,n));)this.array[r]=n,r=e;this.array[r]=t},n.prototype.heapify=function(t){var e;for(this.array=t,this.size=t.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},n.prototype._percolateUp=function(t,e){for(var n,r,i=this.array[t];t>0&&(n=t-1>>1,r=this.array[n],e||this.compare(i,r));)this.array[t]=r,t=n;this.array[t]=i},n.prototype._percolateDown=function(t){for(var e,n,r,i=this.size,o=this.size>>>1,s=this.array[t];t<o&&(n=1+(e=1+(t<<1)),r=this.array[e],n<i&&this.compare(this.array[n],r)&&(e=n,r=this.array[n]),this.compare(r,s));)this.array[t]=r,t=e;this.array[t]=s},n.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},n.prototype.remove=function(t){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],t)&&!this.compare(t,this.array[e]))return this._removeAt(e),!0;return!1},n.prototype.removeOne=function(t){if("function"==typeof t)for(var e=0;e<this.size;e++)if(t(this.array[e]))return this._removeAt(e)},n.prototype.removeMany=function(t,e){if("function"!=typeof t||this.size<1)return[];e=e?Math.min(e,this.size):this.size;for(var n=0,r=new Array(e),i=0,o=new Array(this.size);n<e&&!this.isEmpty();){var s=this.poll();t(s)?r[n++]=s:o[i++]=s}r.length=n;for(var a=0;a<i;)this.add(o[a++]);return r},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},n.prototype.replaceTop=function(t){if(0!=this.size){var e=this.array[0];return this.array[0]=t,this._percolateDown(0),e}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},n.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var e=0,n=this.clone();!n.isEmpty();)t(n.poll(),e++)},n.prototype.kSmallest=function(t){if(0==this.size)return[];t=Math.min(this.size,t);var e=new n(this.compare);const r=Math.min((t>0?Math.pow(2,t-1):0)+1,this.size);e.size=r,e.array=this.array.slice(0,r);for(var i=new Array(t),o=0;o<t;o++)i[o]=e.poll();return i},t.exports=n},71473:t=>{t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},71632:(t,e,n)=>{var r=n(36197),i=n(12888);t.exports=n(58933)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},71657:(t,e,n)=>{var r=n(92127);r(r.P+r.R,"Map",{toJSON:n(34490)("Map")})},71737:(t,e,n)=>{var r=n(10117);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},71961:(t,e,n)=>{var r=n(49653);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},72087:(t,e,n)=>{n(37209)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},72122:(t,e,n)=>{var r=n(3733),i=Math.pow,o=i(2,-52),s=i(2,-23),a=i(2,127)*(2-s),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/s+1/o-1/o)*u*s:(n=(e=(1+s/o)*i)-(e-i))>a||n!=n?c*(1/0):c*n}},72335:(t,e,n)=>{var r=n(92127),i=n(3733);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},72428:(t,e,n)=>{var r=n(27534),i=n(40346),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},72538:(t,e,n)=>{n(49307)("WeakSet")},72552:(t,e,n)=>{var r=n(51873),i=n(659),o=n(59350),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},72903:(t,e,n)=>{var r=n(23805),i=n(55527),o=n(90181),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},72949:(t,e,n)=>{var r=n(12651);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},73133:(t,e,n)=>{var r=n(27087),i=n(81485);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},73170:(t,e,n)=>{var r=n(16547),i=n(31769),o=n(30361),s=n(23805),a=n(77797);t.exports=function(t,e,n,u){if(!s(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,f=t;null!=f&&++c<l;){var d=a(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=h){var g=f[d];void 0===(p=u?u(g,d,f):void 0)&&(p=s(g)?g:o(e[c+1])?[]:{})}r(f,d,p),f=f[d]}return t}},73201:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},73590:(t,e,n)=>{var r=n(10117);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)}))}))})),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},73776:(t,e,n)=>{var r=n(56857),i=n(3988),o=n(39741).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,(function(e){var i=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=o+i/2})),o+=i+n}))})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),(function(e,n){t.node(n).x=e}))}},73822:(t,e,n)=>{var r=n(43305),i=n(12988).onFreeze;n(80923)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},73916:(t,e,n)=>{var r=n(43360),i=n(30641),o=n(15389);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},73937:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},74218:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},74335:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},74472:(t,e,n)=>{var r=n(81485),i=n(27926),o=n(3344);t.exports=function(t,e,n,s){var a=String(o(t)),u=a.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return a;var h=l-u,f=i.call(c,Math.ceil(h/c.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},74692:function(t,e){var n;!function(e,n){"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){var o=[],s=Object.getPrototypeOf,a=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,l=o.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,g=p.call(Object),v={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in x)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[f.call(t)]||"object":typeof t}var A="3.7.1",S=/HTML$/i,E=function(t,e){return new E.fn.init(t,e)};function k(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!m(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}E.fn=E.prototype={jquery:A,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(c&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,s[e]=E.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},E.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=s(t))&&("function"!=typeof(n=d.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(k(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=E.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?E.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!S.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(k(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return u(s)},guid:1,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var P=o.pop,C=o.sort,O=o.splice,M="[\\x20\\t\\r\\n\\f]",N=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g");E.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var L=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function I(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}E.escapeSelector=function(t){return(t+"").replace(L,I)};var j=b,B=c;!function(){var t,e,n,i,s,u,c,h,f,p,g=B,m=E.expando,y=0,b=0,x=tt(),w=tt(),_=tt(),A=tt(),S=function(t,e){return t===e&&(s=!0),0},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",I="\\["+M+"*("+L+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+M+"*\\]",R=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",D=new RegExp(M+"+","g"),F=new RegExp("^"+M+"*,"+M+"*"),V=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp(M+"|>"),G=new RegExp(R),U=new RegExp("^"+L+"$"),q={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),J=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Z=function(){ut()},K=ft((function(t){return!0===t.disabled&&T(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(o=a.call(j.childNodes),j.childNodes),o[j.childNodes.length].nodeType}catch(t){g={apply:function(t,e){B.apply(t,a.call(e))},call:function(t){B.apply(t,a.call(arguments,1))}}}function Q(t,e,n,r){var i,o,s,a,c,l,d,p=e&&e.ownerDocument,y=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return n;if(!r&&(ut(e),e=e||u,h)){if(11!==y&&(c=W.exec(t)))if(i=c[1]){if(9===y){if(!(s=e.getElementById(i)))return n;if(s.id===i)return g.call(n,s),n}else if(p&&(s=p.getElementById(i))&&Q.contains(e,s)&&s.id===i)return g.call(n,s),n}else{if(c[2])return g.apply(n,e.getElementsByTagName(t)),n;if((i=c[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(i)),n}if(!(A[t+" "]||f&&f.test(t))){if(d=t,p=e,1===y&&(z.test(t)||V.test(t))){for((p=X.test(t)&&at(e.parentNode)||e)==e&&v.scope||((a=e.getAttribute("id"))?a=E.escapeSelector(a):e.setAttribute("id",a=m)),o=(l=lt(t)).length;o--;)l[o]=(a?"#"+a:":scope")+" "+ht(l[o]);d=l.join(",")}try{return g.apply(n,p.querySelectorAll(d)),n}catch(e){A(t,!0)}finally{a===m&&e.removeAttribute("id")}}}return yt(t.replace(N,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[m]=!0,t}function nt(t){var e=u.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return T(e,"input")&&e.type===t}}function it(t){return function(e){return(T(e,"input")||T(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&K(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function st(t){return et((function(e){return e=+e,et((function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function ut(t){var n,r=t?t.ownerDocument||t:j;return r!=u&&9===r.nodeType&&r.documentElement?(c=(u=r).documentElement,h=!E.isXMLDoc(u),p=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&j!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",Z),v.getById=nt((function(t){return c.appendChild(t).id=E.expando,!u.getElementsByName||!u.getElementsByName(E.expando).length})),v.disconnectedMatch=nt((function(t){return p.call(t,"*")})),v.scope=nt((function(){return u.querySelectorAll(":scope")})),v.cssHas=nt((function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),v.getById?(e.filter.ID=function(t){var e=t.replace(Y,J);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Y,J);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},f=[],nt((function(t){var e;c.appendChild(t).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||f.push("\\["+M+"*(?:value|"+k+")"),t.querySelectorAll("[id~="+m+"-]").length||f.push("~="),t.querySelectorAll("a#"+m+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll(":checked").length||f.push(":checked"),(e=u.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(e=u.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")")})),v.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),S=function(t,e){if(t===e)return s=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument==j&&Q.contains(j,t)?-1:e===u||e.ownerDocument==j&&Q.contains(j,e)?1:i?l.call(i,t)-l.call(i,e):0:4&n?-1:1)},u):u}for(t in Q.matches=function(t,e){return Q(t,null,null,e)},Q.matchesSelector=function(t,e){if(ut(t),h&&!A[e+" "]&&(!f||!f.test(e)))try{var n=p.call(t,e);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){A(e,!0)}return Q(e,u,null,[t]).length>0},Q.contains=function(t,e){return(t.ownerDocument||t)!=u&&ut(t),E.contains(t,e)},Q.attr=function(t,n){(t.ownerDocument||t)!=u&&ut(t);var r=e.attrHandle[n.toLowerCase()],i=r&&d.call(e.attrHandle,n.toLowerCase())?r(t,n,!h):void 0;return void 0!==i?i:t.getAttribute(n)},Q.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},E.uniqueSort=function(t){var e,n=[],r=0,o=0;if(s=!v.sortStable,i=!v.sortStable&&a.call(t,0),C.call(t,S),s){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)O.call(t,n[r],1)}return i=null,t},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(a.apply(this)))},e=E.expr={cacheLength:50,createPseudo:et,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Y,J),t[3]=(t[3]||t[4]||t[5]||"").replace(Y,J),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Q.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Q.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=lt(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Y,J).toLowerCase();return"*"===t?function(){return!0}:function(t){return T(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+M+")"+t+"("+M+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=Q.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(D," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,d,p=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!u&&!a,x=!1;if(g){if(o){for(;p;){for(h=e;h=h[p];)if(a?T(h,v):1===h.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&b){for(x=(f=(c=(l=g[m]||(g[m]={}))[t]||[])[0]===y&&c[1])&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[p]||(x=f=0)||d.pop();)if(1===h.nodeType&&++x&&h===e){l[t]=[y,f,x];break}}else if(b&&(x=f=(c=(l=e[m]||(e[m]={}))[t]||[])[0]===y&&c[1]),!1===x)for(;(h=++f&&h&&h[p]||(x=f=0)||d.pop())&&(!(a?T(h,v):1===h.nodeType)||!++x||(b&&((l=h[m]||(h[m]={}))[t]=[y,x]),h!==e)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Q.error("unsupported pseudo: "+t);return i[m]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var r,o=i(t,n),s=o.length;s--;)t[r=l.call(t,o[s])]=!(e[r]=o[s])})):function(t){return i(t,0,r)}):i}},pseudos:{not:et((function(t){var e=[],n=[],r=mt(t.replace(N,"$1"));return r[m]?et((function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return Q(t,e).length>0}})),contains:et((function(t){return t=t.replace(Y,J),function(e){return(e.textContent||E.text(e)).indexOf(t)>-1}})),lang:et((function(t){return U.test(t||"")||Q.error("unsupported lang: "+t),t=t.replace(Y,J).toLowerCase(),function(e){var n;do{if(n=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return u.activeElement}catch(t){}}()&&u.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return T(t,"input")&&!!t.checked||T(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){return T(t,"input")&&"button"===t.type||T(t,"button")},text:function(t){var e;return T(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:st((function(){return[0]})),last:st((function(t,e){return[e-1]})),eq:st((function(t,e,n){return[n<0?n+e:n]})),even:st((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:st((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:st((function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:st((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function ct(){}function lt(t,n){var r,i,o,s,a,u,c,l=w[t+" "];if(l)return n?0:l.slice(0);for(a=t,u=[],c=e.preFilter;a;){for(s in r&&!(i=F.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=V.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(N," ")}),a=a.slice(r.length)),e.filter)!(i=q[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Q.error(t):w(t,u).slice(0)}function ht(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function ft(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=b++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,u){var c,l,h=[y,a];if(u){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(l=e[m]||(e[m]={}),i&&T(e,i))e=e[r]||e;else{if((c=l[o])&&c[0]===y&&c[1]===a)return h[2]=c[2];if(l[o]=h,h[2]=t(e,n,u))return!0}return!1}}function dt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function pt(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),c&&e.push(a)));return s}function gt(t,e,n,r,i,o){return r&&!r[m]&&(r=gt(r)),i&&!i[m]&&(i=gt(i,o)),et((function(o,s,a,u){var c,h,f,d,p=[],v=[],m=s.length,y=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)Q(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),b=!t||!o&&e?y:pt(y,p,t,a,u);if(n?n(b,d=i||(o?t:m||r)?[]:s,a,u):d=b,r)for(c=pt(d,v),r(c,[],a,u),h=c.length;h--;)(f=c[h])&&(d[v[h]]=!(b[v[h]]=f));if(o){if(i||t){if(i){for(c=[],h=d.length;h--;)(f=d[h])&&c.push(b[h]=f);i(null,d=[],c,u)}for(h=d.length;h--;)(f=d[h])&&(c=i?l.call(o,f):p[h])>-1&&(o[c]=!(s[c]=f))}}else d=pt(d===s?d.splice(m,d.length):d),i?i(null,s,d,u):g.apply(s,d)}))}function vt(t){for(var r,i,o,s=t.length,a=e.relative[t[0].type],u=a||e.relative[" "],c=a?1:0,h=ft((function(t){return t===r}),u,!0),f=ft((function(t){return l.call(r,t)>-1}),u,!0),d=[function(t,e,i){var o=!a&&(i||e!=n)||((r=e).nodeType?h(t,e,i):f(t,e,i));return r=null,o}];c<s;c++)if(i=e.relative[t[c].type])d=[ft(dt(d),i)];else{if((i=e.filter[t[c].type].apply(null,t[c].matches))[m]){for(o=++c;o<s&&!e.relative[t[o].type];o++);return gt(c>1&&dt(d),c>1&&ht(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(N,"$1"),i,c<o&&vt(t.slice(c,o)),o<s&&vt(t=t.slice(o)),o<s&&ht(t))}d.push(i)}return dt(d)}function mt(t,r){var i,o=[],s=[],a=_[t+" "];if(!a){for(r||(r=lt(t)),i=r.length;i--;)(a=vt(r[i]))[m]?o.push(a):s.push(a);a=_(t,function(t,r){var i=r.length>0,o=t.length>0,s=function(s,a,c,l,f){var d,p,v,m=0,b="0",x=s&&[],w=[],_=n,A=s||o&&e.find.TAG("*",f),S=y+=null==_?1:Math.random()||.1,k=A.length;for(f&&(n=a==u||a||f);b!==k&&null!=(d=A[b]);b++){if(o&&d){for(p=0,a||d.ownerDocument==u||(ut(d),c=!h);v=t[p++];)if(v(d,a||u,c)){g.call(l,d);break}f&&(y=S)}i&&((d=!v&&d)&&m--,s&&x.push(d))}if(m+=b,i&&b!==m){for(p=0;v=r[p++];)v(x,w,a,c);if(s){if(m>0)for(;b--;)x[b]||w[b]||(w[b]=P.call(l));w=pt(w)}g.apply(l,w),f&&!s&&w.length>0&&m+r.length>1&&E.uniqueSort(l)}return f&&(y=S,n=_),x};return i?et(s):s}(s,o)),a.selector=t}return a}function yt(t,n,r,i){var o,s,a,u,c,l="function"==typeof t&&t,f=!i&&lt(t=l.selector||t);if(r=r||[],1===f.length){if((s=f[0]=f[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===n.nodeType&&h&&e.relative[s[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(Y,J),n)||[])[0]))return r;l&&(n=n.parentNode),t=t.slice(s.shift().value.length)}for(o=q.needsContext.test(t)?0:s.length;o--&&(a=s[o],!e.relative[u=a.type]);)if((c=e.find[u])&&(i=c(a.matches[0].replace(Y,J),X.test(s[0].type)&&at(n.parentNode)||n))){if(s.splice(o,1),!(t=i.length&&ht(s)))return g.apply(r,i),r;break}}return(l||mt(t,f))(i,n,!h,r,!n||X.test(t)&&at(n.parentNode)||n),r}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,v.sortStable=m.split("").sort(S).join("")===m,ut(),v.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(u.createElement("fieldset"))})),E.find=Q,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Q.compile=mt,Q.select=yt,Q.setDocument=ut,Q.tokenize=lt,Q.escape=E.escapeSelector,Q.getText=E.text,Q.isXML=E.isXMLDoc,Q.selectors=E.expr,Q.support=E.support,Q.uniqueSort=E.uniqueSort}();var R=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&E(t).is(n))break;r.push(t)}return r},D=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},F=E.expr.match.needsContext,V=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(t,e,n){return m(e)?E.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return l.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?E.find.matchesSelector(r,t)?[r]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<r;e++)if(E.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)E.find(t,i[e],n);return r>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(z(this,t||[],!1))},not:function(t){return this.pushStack(z(this,t||[],!0))},is:function(t){return!!z(this,"string"==typeof t&&F.test(t)?E(t):t||[],!1).length}});var G,U=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||G,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:U.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),V.test(r[1])&&E.isPlainObject(e))for(r in e)m(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,G=E(b);var q=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function $(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&E(t);if(!F.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(E(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return R(t,"parentNode")},parentsUntil:function(t,e,n){return R(t,"parentNode",n)},next:function(t){return $(t,"nextSibling")},prev:function(t){return $(t,"previousSibling")},nextAll:function(t){return R(t,"nextSibling")},prevAll:function(t){return R(t,"previousSibling")},nextUntil:function(t,e,n){return R(t,"nextSibling",n)},prevUntil:function(t,e,n){return R(t,"previousSibling",n)},siblings:function(t){return D((t.parentNode||{}).firstChild,t)},children:function(t){return D(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(T(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,r){var i=E.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=E.filter(r,i)),this.length>1&&(H[t]||E.uniqueSort(i),q.test(t)&&i.reverse()),this.pushStack(i)}}));var W=/[^\x20\t\r\n\f]+/g;function X(t){return t}function Y(t){throw t}function J(t,e,n,r){var i;try{t&&m(i=t.promise)?i.call(t).done(e).fail(n):t&&m(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(W)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,r,i,o=[],s=[],a=-1,u=function(){for(i=i||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){E.each(n,(function(n,r){m(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,r){var i=m(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&m(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,u=arguments,c=function(){var r,c;if(!(t<o)){if((r=n.apply(a,u))===e.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,m(c)?i?c.call(r,s(o,e,X,i),s(o,e,Y,i)):(o++,c.call(r,s(o,e,X,i),s(o,e,Y,i),s(o,e,X,e.notifyWith))):(n!==X&&(a=void 0,u=[r]),(i||e.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,l.error),t+1>=o&&(n!==Y&&(a=void 0,u=[r]),e.rejectWith(a,u))}};t?l():(E.Deferred.getErrorHook?l.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(l.error=E.Deferred.getStackHook()),r.setTimeout(l))}}return E.Deferred((function(r){e[0][3].add(s(0,r,m(i)?i:X,r.notifyWith)),e[1][3].add(s(0,r,m(t)?t:X)),e[2][3].add(s(0,r,m(n)?n:Y))})).promise()},promise:function(t){return null!=t?E.extend(t,i):i}},o={};return E.each(e,(function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=a.call(arguments),o=E.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(J(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||m(i[n]&&i[n].then)))return o.then();for(;n--;)J(i[n],s(n),o.reject);return o.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&Z.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){r.setTimeout((function(){throw t}))};var K=E.Deferred();function Q(){b.removeEventListener("DOMContentLoaded",Q),r.removeEventListener("load",Q),E.ready()}E.fn.ready=function(t){return K.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||K.resolveWith(b,[E]))}}),E.ready.then=K.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",Q),r.addEventListener("load",Q));var tt=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===_(n))for(a in i=!0,n)tt(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,m(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(E(t),n)})),e))for(;a<u;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=E.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(W)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||E.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var at=new st,ut=new st,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,lt=/[A-Z]/g;function ht(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(lt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ct.test(t)?JSON.parse(t):t)}(n)}catch(t){}ut.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return ut.hasData(t)||at.hasData(t)},data:function(t,e,n){return ut.access(t,e,n)},removeData:function(t,e){ut.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=ut.get(o),1===o.nodeType&&!at.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=it(r.slice(5)),ht(o,r,i[r]));at.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){ut.set(this,t)})):tt(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=ut.get(o,t))||void 0!==(n=ht(o,t))?n:void 0;this.each((function(){ut.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ut.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=at.get(t,e),n&&(!r||Array.isArray(n)?r=at.access(t,e,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),r=n.length,i=n.shift(),o=E._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){E.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:E.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=E.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=at.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var ft=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+ft+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],gt=b.documentElement,vt=function(t){return E.contains(t.ownerDocument,t)},mt={composed:!0};gt.getRootNode&&(vt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(mt)===t.ownerDocument});var yt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&vt(t)&&"none"===E.css(t,"display")};function bt(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return E.css(t,e,"")},u=a(),c=n&&n[3]||(E.cssNumber[e]?"":"px"),l=t.nodeType&&(E.cssNumber[e]||"px"!==c&&+u)&&dt.exec(E.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;s--;)E.style(t,e,l+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),l/=o;l*=2,E.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var xt={};function wt(t){var e,n=t.ownerDocument,r=t.nodeName,i=xt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=E.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),xt[r]=i,i)}function _t(t,e){for(var n,r,i=[],o=0,s=t.length;o<s;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=at.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&yt(r)&&(i[o]=wt(r))):"none"!==n&&(i[o]="none",at.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}E.fn.extend({show:function(){return _t(this,!0)},hide:function(){return _t(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){yt(this)?E(this).show():E(this).hide()}))}});var At,St,Et=/^(?:checkbox|radio)$/i,kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i;At=b.createDocumentFragment().appendChild(b.createElement("div")),(St=b.createElement("input")).setAttribute("type","radio"),St.setAttribute("checked","checked"),St.setAttribute("name","t"),At.appendChild(St),v.checkClone=At.cloneNode(!0).cloneNode(!0).lastChild.checked,At.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!At.cloneNode(!0).lastChild.defaultValue,At.innerHTML="<option></option>",v.option=!!At.lastChild;var Pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ct(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?E.merge([t],n):n}function Ot(t,e){for(var n=0,r=t.length;n<r;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td,v.option||(Pt.optgroup=Pt.option=[1,"<select multiple='multiple'>","</select>"]);var Mt=/<|&#?\w+;/;function Nt(t,e,n,r,i){for(var o,s,a,u,c,l,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===_(o))E.merge(f,o.nodeType?[o]:o);else if(Mt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(kt.exec(o)||["",""])[1].toLowerCase(),u=Pt[a]||Pt._default,s.innerHTML=u[1]+E.htmlPrefilter(o)+u[2],l=u[0];l--;)s=s.lastChild;E.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(r&&E.inArray(o,r)>-1)i&&i.push(o);else if(c=vt(o),s=Ct(h.appendChild(o),"script"),c&&Ot(s),n)for(l=0;o=s[l++];)Tt.test(o.type||"")&&n.push(o);return h}var Lt=/^([^.]*)(?:\.(.+)|)/;function It(){return!0}function jt(){return!1}function Bt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Bt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=jt;else if(!i)return t;return 1===o&&(s=i,i=function(t){return E().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=E.guid++)),t.each((function(){E.event.add(this,e,i,r,n)}))}function Rt(t,e,n){n?(at.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var n,r=at.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),at.set(this,e,r),this[e](),n=at.get(this,e),at.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(at.set(this,e,E.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=It)}})):void 0===at.get(t,e)&&E.event.add(t,e,It)}E.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=at.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&E.find.matchesSelector(gt,i),n.guid||(n.guid=E.guid++),(u=v.events)||(u=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(W)||[""]).length;c--;)d=g=(a=Lt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=E.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=E.event.special[d]||{},l=E.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),E.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=at.hasData(t)&&at.get(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(W)||[""]).length;c--;)if(d=g=(a=Lt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=E.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||E.removeEvent(t,d,v.handle),delete u[d])}else for(d in u)E.event.remove(t,d+e[c],n,r,!0);E.isEmptyObject(u)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=new Array(arguments.length),u=E.event.fix(t),c=(at.get(this,"events")||Object.create(null))[u.type]||[],l=E.event.special[u.type]||{};for(a[0]=u,e=1;e<arguments.length;e++)a[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(s=E.event.handlers.call(this,u,c),e=0;(i=s[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?E(i,this).index(c)>-1:E.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Et.test(e.type)&&e.click&&T(e,"input")&&Rt(e,"click",!0),!1},trigger:function(t){var e=this||t;return Et.test(e.type)&&e.click&&T(e,"input")&&Rt(e,"click"),!0},_default:function(t){var e=t.target;return Et.test(e.type)&&e.click&&T(e,"input")&&at.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?It:jt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:jt,isPropagationStopped:jt,isImmediatePropagationStopped:jt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(b.documentMode){var n=at.get(this,"handle"),r=E.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else E.event.simulate(e,t.target,E.event.fix(t))}E.event.special[t]={setup:function(){var r;if(Rt(this,t,!0),!b.documentMode)return!1;(r=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(r||0)+1)},trigger:function(){return Rt(this,t),!0},teardown:function(){var t;if(!b.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},E.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=at.get(i,e);o||(b.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),at.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=at.get(i,e)-1;o?at.set(i,e,o):(b.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),at.remove(i,e))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||E.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,r){return Bt(this,t,e,n,r)},one:function(t,e,n,r){return Bt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,E(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=jt),this.each((function(){E.event.remove(this,t,n,e)}))}});var Dt=/<script|<style|<link/i,Ft=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function zt(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Gt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function qt(t,e){var n,r,i,o,s,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(i in at.remove(e,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)E.event.add(e,i,a[i][n]);ut.hasData(t)&&(o=ut.access(t),s=E.extend({},o),ut.set(e,s))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function $t(t,e,n,r){e=u(e);var i,o,s,a,c,l,h=0,f=t.length,d=f-1,p=e[0],g=m(p);if(g||f>1&&"string"==typeof p&&!v.checkClone&&Ft.test(p))return t.each((function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),$t(o,e,n,r)}));if(f&&(o=(i=Nt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=E.map(Ct(i,"script"),Gt)).length;h<f;h++)c=i,h!==d&&(c=E.clone(c,!0,!0),a&&E.merge(s,Ct(c,"script"))),n.call(t[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,E.map(s,Ut),h=0;h<a;h++)c=s[h],Tt.test(c.type||"")&&!at.access(c,"globalEval")&&E.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):w(c.textContent.replace(Vt,""),c,l))}return t}function Wt(t,e,n){for(var r,i=e?E.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(Ct(r)),r.parentNode&&(n&&vt(r)&&Ot(Ct(r,"script")),r.parentNode.removeChild(r));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=vt(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(s=Ct(a),r=0,i=(o=Ct(t)).length;r<i;r++)Ht(o[r],s[r]);if(e)if(n)for(o=o||Ct(t),s=s||Ct(a),r=0,i=o.length;r<i;r++)qt(o[r],s[r]);else qt(t,a);return(s=Ct(a,"script")).length>0&&Ot(s,!u&&Ct(t,"script")),a},cleanData:function(t){for(var e,n,r,i=E.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[at.expando]){if(e.events)for(r in e.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,e.handle);n[at.expando]=void 0}n[ut.expando]&&(n[ut.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return $t(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||zt(this,t).appendChild(t)}))},prepend:function(){return $t(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=zt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return $t(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return $t(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(Ct(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!Pt[(kt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(Ct(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return $t(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(Ct(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,r=[],i=E(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),E(i[s])[e](n),c.apply(r,n.get());return this.pushStack(r)}}));var Xt=new RegExp("^("+ft+")(?!px)[a-z%]+$","i"),Yt=/^--/,Jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Zt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Kt=new RegExp(pt.join("|"),"i");function Qt(t,e,n){var r,i,o,s,a=Yt.test(e),u=t.style;return(n=n||Jt(t))&&(s=n.getPropertyValue(e)||n[e],a&&s&&(s=s.replace(N,"$1")||void 0),""!==s||vt(t)||(s=E.style(t,e)),!v.pixelBoxStyles()&&Xt.test(s)&&Kt.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=s,s=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==s?s+"":s}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(c).appendChild(l);var t=r.getComputedStyle(l);n="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),gt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,s,a,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",gt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=b.createElement("div").style,re={};function ie(t){return E.cssProps[t]||re[t]||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=dt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ce(t,e,n,r,i,o){var s="width"===e?1:0,a=0,u=0,c=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=E.css(t,n+pt[s],!0,i)),r?("content"===n&&(u-=E.css(t,"padding"+pt[s],!0,i)),"margin"!==n&&(u-=E.css(t,"border"+pt[s]+"Width",!0,i))):(u+=E.css(t,"padding"+pt[s],!0,i),"padding"!==n?u+=E.css(t,"border"+pt[s]+"Width",!0,i):a+=E.css(t,"border"+pt[s]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))||0),u+c}function le(t,e,n){var r=Jt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,r),o=i,s=Qt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Xt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&T(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===E.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ce(t,e,n||(i?"border":"content"),o,r,s)+"px"}function he(t,e,n,r,i){return new he.prototype.init(t,e,n,r,i)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=it(e),u=Yt.test(e),c=t.style;if(u||(e=ie(a)),s=E.cssHooks[e]||E.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:c[e];"string"==(o=typeof n)&&(i=dt.exec(n))&&i[1]&&(n=bt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(E.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,s,a=it(e);return Yt.test(e)||(e=ie(a)),(s=E.cssHooks[e]||E.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Qt(t,e,r)),"normal"===i&&e in ae&&(i=ae[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?le(t,e,r):Zt(t,se,(function(){return le(t,e,r)}))},set:function(t,n,r){var i,o=Jt(t),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===E.css(t,"boxSizing",!1,o),u=r?ce(t,e,r,a,o):0;return a&&s&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ce(t,e,"border",!1,o)-.5)),u&&(i=dt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),ue(0,n,u)}}})),E.cssHooks.marginLeft=te(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Qt(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+pt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(E.cssHooks[t+e].set=ue)})),E.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Jt(t),i=e.length;s<i;s++)o[e[s]]=E.css(t,e[s],!1,r);return o}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=he,he.prototype={constructor:he,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=he.prototype.init,E.fx.step={};var fe,de,pe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function ve(){de&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ve):r.setTimeout(ve,E.fx.interval),E.fx.tick())}function me(){return r.setTimeout((function(){fe=void 0})),fe=Date.now()}function ye(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=pt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function be(t,e,n){for(var r,i=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function xe(t,e,n){var r,i,o=0,s=xe.prefilters.length,a=E.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=fe||me(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),r<1&&s?n:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:fe||me(),duration:n.duration,tweens:[],createTween:function(e,n){var r=E.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=E.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<s;o++)if(r=xe.prefilters[o].call(c,t,l,c.opts))return m(r.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return E.map(l,be,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return bt(n.elem,t,dt.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(W);for(var n,r=0,i=t.length;r<i;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,l,h="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&yt(t),v=at.get(t,"fxshow");for(r in n.queue||(null==(s=E._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always((function(){f.always((function(){s.unqueued--,E.queue(t,"fx").length||s.empty.fire()}))}))),e)if(i=e[r],pe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||E.style(t,r)}if((u=!E.isEmptyObject(e))||!E.isEmptyObject(d))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=at.get(t,"display")),"none"===(l=E.css(t,"display"))&&(c?l=c:(_t([t],!0),c=t.style.display||c,l=E.css(t,"display"),_t([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===E.css(t,"float")&&(u||(f.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=at.access(t,"fxshow",{display:c}),o&&(v.hidden=!g),g&&_t([t],!0),f.done((function(){for(r in g||_t([t]),at.remove(t,"fxshow"),d)E.style(t,r,d[r])}))),u=be(g?v[r]:0,r,f),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),E.speed=function(t,e,n){var r=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return E.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(t,e,n,r){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=E.isEmptyObject(t),o=E.speed(e,n,r),s=function(){var e=xe(this,E.extend({},t),o);(i||at.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=E.timers,s=at.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ge.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=at.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=E.timers,s=r?r.length:0;for(n.finish=!0,E.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ye(e,!0),t,r,i)}})),E.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(fe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),fe=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){de||(de=!0,ve())},E.fx.stop=function(){de=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var we,_e=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return tt(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,n):(1===o&&E.isXMLDoc(t)||(i=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=E.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&T(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(W);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=_e[e]||E.find.attr;_e[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=_e[s],_e[s]=i,i=null!=n(t,e,r)?s:null,_e[s]=o),i}}));var Ae=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function Ee(t){return(t.match(W)||[]).join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Te(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(W)||[]}E.fn.extend({prop:function(t,e){return tt(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,i=E.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):Ae.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,r,i,o,s;return m(t)?this.each((function(e){E(this).addClass(t.call(this,e,ke(this)))})):(e=Te(t)).length?this.each((function(){if(r=ke(this),n=1===this.nodeType&&" "+Ee(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=Ee(n),r!==s&&this.setAttribute("class",s)}})):this},removeClass:function(t){var e,n,r,i,o,s;return m(t)?this.each((function(e){E(this).removeClass(t.call(this,e,ke(this)))})):arguments.length?(e=Te(t)).length?this.each((function(){if(r=ke(this),n=1===this.nodeType&&" "+Ee(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=Ee(n),r!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,s=typeof t,a="string"===s||Array.isArray(t);return m(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,ke(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Te(t),this.each((function(){if(a)for(o=E(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==s||((r=ke(this))&&at.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Ee(ke(n))+" ").indexOf(e)>-1)return!0;return!1}});var Pe=/\r/g;E.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=m(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,E(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Pe,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(e=E(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=E.makeArray(e),s=i.length;s--;)((r=i[s]).selected=E.inArray(E.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},v.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Ce=r.location,Oe={guid:Date.now()},Me=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Ne=/^(?:focusinfocus|focusoutblur)$/,Le=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,i){var o,s,a,u,c,l,h,f,p=[n||b],g=d.call(t,"type")?t.type:t,v=d.call(t,"namespace")?t.namespace.split("."):[];if(s=f=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!Ne.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),h=E.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!y(n)){for(u=h.delegateType||g,Ne.test(u+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?u:h.bindType||g,(l=(at.get(s,"events")||Object.create(null))[t.type]&&at.get(s,"handle"))&&l.apply(s,e),(l=c&&s[c])&&l.apply&&ot(s)&&(t.result=l.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!ot(n)||c&&m(n[g])&&!y(n)&&((a=n[c])&&(n[c]=null),E.event.triggered=g,t.isPropagationStopped()&&f.addEventListener(g,Le),n[g](),t.isPropagationStopped()&&f.removeEventListener(g,Le),E.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,n){var r=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(r,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}});var Ie=/\[\]$/,je=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,r){var i;if(Array.isArray(e))E.each(e,(function(e,i){n||Ie.test(t)?r(t,i):De(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==_(e))r(t,e);else for(i in e)De(t+"["+i+"]",e[i],n,r)}E.param=function(t,e){var n,r=[],i=function(t,e){var n=m(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){i(this.name,this.value)}));else for(n in t)De(n,t[n],e,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Re.test(this.nodeName)&&!Be.test(t)&&(this.checked||!Et.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(je,"\r\n")}})):{name:e.name,value:n.replace(je,"\r\n")}})).get()}});var Fe=/%20/g,Ve=/#.*$/,ze=/([?&])_=[^&]*/,Ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:GET|HEAD)$/,qe=/^\/\//,He={},$e={},We="*/".concat("*"),Xe=b.createElement("a");function Ye(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(W)||[];if(m(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Je(t,e,n,r){var i={},o=t===$e;function s(a){var u;return i[a]=!0,E.each(t[a]||[],(function(t,a){var c=a(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),u}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Ze(t,e){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&E.extend(!0,t,r),t}Xe.href=Ce.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ze(Ze(t,E.ajaxSettings),e):Ze(E.ajaxSettings,t)},ajaxPrefilter:Ye(He),ajaxTransport:Ye($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,s,a,u,c,l,h,f,d=E.ajaxSetup({},e),p=d.context||d,g=d.context&&(p.nodeType||p.jquery)?E(p):E.event,v=E.Deferred(),m=E.Callbacks("once memory"),y=d.statusCode||{},x={},w={},_="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Ge.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==c&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)A.always(t[A.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||_;return n&&n.abort(e),S(0,e),this}};if(v.promise(A),d.url=((t||d.url||Ce.href)+"").replace(qe,Ce.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(W)||[""],null==d.crossDomain){u=b.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Xe.protocol+"//"+Xe.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=E.param(d.data,d.traditional)),Je(He,d,e,A),c)return A;for(h in(l=E.event&&d.global)&&0==E.active++&&E.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ue.test(d.type),i=d.url.replace(Ve,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Fe,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Me.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(ze,"$1"),f=(Me.test(i)?"&":"?")+"_="+Oe.guid+++f),d.url=i+f),d.ifModified&&(E.lastModified[i]&&A.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&A.setRequestHeader("If-None-Match",E.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&A.setRequestHeader("Content-Type",d.contentType),A.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+We+"; q=0.01":""):d.accepts["*"]),d.headers)A.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,A,d)||c))return A.abort();if(_="abort",m.add(d.complete),A.done(d.success),A.fail(d.error),n=Je($e,d,e,A)){if(A.readyState=1,l&&g.trigger("ajaxSend",[A,d]),c)return A;d.async&&d.timeout>0&&(a=r.setTimeout((function(){A.abort("timeout")}),d.timeout));try{c=!1,n.send(x,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,s,u){var h,f,b,x,w,_=e;c||(c=!0,a&&r.clearTimeout(a),n=void 0,o=u||"",A.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(x=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,A,s)),!h&&E.inArray("script",d.dataTypes)>-1&&E.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),x=function(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,x,A,h),h?(d.ifModified&&((w=A.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=w),(w=A.getResponseHeader("etag"))&&(E.etag[i]=w)),204===t||"HEAD"===d.type?_="nocontent":304===t?_="notmodified":(_=x.state,f=x.data,h=!(b=x.error))):(b=_,!t&&_||(_="error",t<0&&(t=0))),A.status=t,A.statusText=(e||_)+"",h?v.resolveWith(p,[f,_,A]):v.rejectWith(p,[A,_,b]),A.statusCode(y),y=void 0,l&&g.trigger(h?"ajaxSuccess":"ajaxError",[A,d,h?f:b]),m.fireWith(p,[A,_]),l&&(g.trigger("ajaxComplete",[A,d]),--E.active||E.event.trigger("ajaxStop")))}return A},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:i,data:n,success:r},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ke={0:200,1223:204},Qe=E.ajaxSettings.xhr();v.cors=!!Qe&&"withCredentials"in Qe,v.ajax=Qe=!!Qe,E.ajaxTransport((function(t){var e,n;if(v.cors||Qe&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ke[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||E.expando+"_"+Oe.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,s,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Me.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||E.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always((function(){void 0===o?E(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),s&&m(o)&&o(s[0]),s=o=void 0})),"script"})),v.createHTMLDocument=((tn=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=V.exec(t))?[e.createElement(i[1])]:(i=Nt([t],e,o),o&&o.length&&E(o).remove(),E.merge([],i.childNodes)));var r,i,o},E.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=Ee(t.slice(a)),t=t.slice(0,a)),m(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&E.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?E("<div>").append(E.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c=E.css(t,"position"),l=E(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=E.css(t,"top"),u=E.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),m(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):l.css(h)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),i.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-E.css(r,"marginTop",!0),left:e.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||gt}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(r){return tt(this,(function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=te(v.pixelPosition,(function(t,n){if(n)return n=Qt(t,e),Xt.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){E.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return tt(this,(function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?E.css(e,n,a):E.style(e,n,i,a)}),e,s?i:void 0,s)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return r=a.call(arguments,2),i=function(){return t.apply(e||this,r.concat(a.call(arguments)))},i.guid=t.guid=t.guid||E.guid++,i},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=T,E.isFunction=m,E.isWindow=y,E.camelCase=it,E.type=_,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var on=r.jQuery,sn=r.$;return E.noConflict=function(t){return r.$===E&&(r.$=sn),t&&r.jQuery===E&&(r.jQuery=on),E},void 0===i&&(r.jQuery=r.$=E),E}))},74701:(t,e,n)=>{var r=n(4228),i=n(7359),o=n(52535);n(69228)("search",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var a=r(t),u=String(this),c=a.lastIndex;i(c,0)||(a.lastIndex=0);var l=o(a,u);return i(a.lastIndex,c)||(a.lastIndex=c),null===l?-1:l.index}]}))},74733:(t,e,n)=>{var r=n(21791),i=n(95950);t.exports=function(t,e){return t&&r(e,i(e),t)}},74748:(t,e,n)=>{n(49307)("WeakMap")},74896:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},74907:(t,e,n)=>{var r=n(97380),i=n(4228),o=r.key,s=r.map,a=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=s(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=a.get(e);return u.delete(n),!!u.size||a.delete(e)}})},74970:t=>{t.exports=function(t,e){return{value:e,done:!!t}}},75153:(t,e,n)=>{var r=n(92127),i=n(4228),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(6032)(o,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},75288:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},75369:(t,e,n)=>{var r=n(92127),i=n(66179)(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),r(r.P+r.F*s,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(88184)(o)},75417:(t,e,n)=>{var r=n(92127),i=n(2780);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},75551:t=>{var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},76001:(t,e,n)=>{var r=n(97420),i=n(80631);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},76135:(t,e,n)=>{t.exports=n(39754)},76169:(t,e,n)=>{var r=n(49653);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},76189:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},76209:(t,e,n)=>{n(55762)("Array")},76246:(t,e,n)=>{t.exports={graphlib:n(68191),layout:n(78202),debug:n(78909),util:{time:n(3988).time,notime:n(3988).notime},version:n(87038)}},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(s[u]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},76545:(t,e,n)=>{var r=n(56110)(n(9325),"Set");t.exports=r},76549:(t,e,n)=>{n(52468)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},76648:(t,e,n)=>{var r=n(92127),i=n(71473),o=Math.sqrt,s=Math.acosh;r(r.S+r.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},76764:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},76959:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},77199:(t,e,n)=>{var r=n(49653),i=n(76169),o=n(73201),s=n(93736),a=n(71961);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return s(t)}}},77491:(t,e,n)=>{var r=n(97380),i=n(4228),o=r.key,s=r.set;r.exp({defineMetadata:function(t,e,n,r){s(t,e,i(n),o(r))}})},77556:(t,e,n)=>{var r=n(51873),i=n(34932),o=n(56449),s=n(44394),a=r?r.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},77659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},77797:(t,e,n)=>{var r=n(44394);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},77836:t=>{t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},77927:t=>{var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",l=c+u+"(?:\\u200d(?:"+[o,s,a].join("|")+")"+c+u+")*",h="(?:"+[o+r+"?",r,s,a,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+h+l,"g");t.exports=function(t){for(var e=f.lastIndex=0;f.test(t);)++e;return e}},77981:(t,e,n)=>{var r=n(55089);t.exports=Array.isArray||function(t){return"Array"==r(t)}},78096:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},78202:(t,e,n)=>{var r=n(56857),i=n(96822),o=n(18209),s=n(79361),a=n(3988).normalizeRanks,u=n(62948),c=n(3988).removeEmptyRanks,l=n(56353),h=n(40135),f=n(4850),d=n(51453),p=n(73776),g=n(3988),v=n(68191).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new v({multigraph:!0,compound:!0}),n=k(t.graph());return e.setGraph(r.merge({},y,E(n,m),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var i=k(t.node(n));e.setNode(n,r.defaults(E(i,x),w)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var i=k(t.edge(n));e.setEdge(n,r.merge({},A,E(i,_),r.pick(i,S)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){i.run(t)})),e("    nestingGraph.run",(function(){l.run(t)})),e("    rank",(function(){s(g.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};g.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){l.cleanup(t)})),e("    normalizeRanks",(function(){a(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){o.run(t)})),e("    parentDummyChains",(function(){u(t)})),e("    addBorderSegments",(function(){h(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,(function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){f.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){o.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){f.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,u=s.marginy||0;function c(t){var r=t.x,s=t.y,a=t.width,u=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-u/2),o=Math.max(o,s+u/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=a,i-=u,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=i})),r.forEach(t.edges(),(function(n){var o=t.edge(n);r.forEach(o.points,(function(t){t.x-=e,t.y-=i})),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)})),s.width=n-e+a,s.height=o-i+u}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){i.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(t.edges(),(function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function E(t,e){return r.mapValues(r.pick(t,e),Number)}function k(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},78451:t=>{t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},78604:(t,e,n)=>{n(39638);var r=n(4228),i=n(1158),o=n(1763),s="toString",a=/./[s],u=function(t){n(28859)(RegExp.prototype,s,t,!0)};n(79448)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?u((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):a.name!=s&&u((function(){return a.call(this)}))},78909:(t,e,n)=>{var r=n(56857),i=n(3988),o=n(68191).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},78942:(t,e,n)=>{var r=n(95411),i=n(3344);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},79073:(t,e,n)=>{var r=n(43305);n(80923)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},79100:(t,e,n)=>{var r=n(97380),i=n(4228),o=n(40627),s=r.has,a=r.get,u=r.key,c=function(t,e,n){if(s(t,e,n))return a(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},79361:(t,e,n)=>{var r=n(68073).longestPath,i=n(38481),o=n(36860);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){o(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t)}};var s=r},79397:(t,e,n)=>{var r,i=n(67526),o=n(66179)(0),s=n(28859),a=n(12988),u=n(28206),c=n(99882),l=n(43305),h=n(12888),f=n(12888),d=!i.ActiveXObject&&"ActiveXObject"in i,p="WeakMap",g=a.getWeak,v=Object.isExtensible,m=c.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(l(t)){var e=g(t);return!0===e?m(h(this,p)).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(h(this,p),t,e)}},x=t.exports=n(58933)(p,y,b,c,!0,!0);f&&d&&(u((r=c.getConstructor(y,p)).prototype,b),a.NEED=!0,o(["delete","has","get","set"],(function(t){var e=x.prototype,n=e[t];s(e,t,(function(e,i){if(l(e)&&!v(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)}))})))},79448:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},79584:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},79732:(t,e,n)=>{var r=n(97380),i=n(4228),o=r.keys,s=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:s(arguments[1]))}})},79770:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},80079:(t,e,n)=>{var r=n(63702),i=n(70080),o=n(24739),s=n(48655),a=n(31175);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},80128:t=>{t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},80237:(t,e,n)=>{for(var r,i=n(67526),o=n(33341),s=n(4415),a=s("typed_array"),u=s("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,a,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:a,VIEW:u}},80299:(t,e,n)=>{var r=n(83120),i=n(69302),o=n(55765),s=n(83693),a=i((function(t){return o(r(t,1,s,!0))}));t.exports=a},80631:(t,e,n)=>{var r=n(28077),i=n(49326);t.exports=function(t,e){return null!=t&&i(t,e,r)}},80909:(t,e,n)=>{var r=n(30641),i=n(38329)(r);t.exports=i},80923:(t,e,n)=>{var r=n(92127),i=n(56094),o=n(79448);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},80945:(t,e,n)=>{var r=n(80079),i=n(68223),o=n(53661);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},80956:(t,e,n)=>{var r=n(48790);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},81042:(t,e,n)=>{var r=n(56110)(Object,"create");t.exports=r},81449:(t,e,n)=>{var r=n(92127),i=n(6543);r(r.P+r.F*!n(86884)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},81485:(t,e,n)=>{var r=n(27087),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},81895:(t,e,n)=>{n(80923)("getOwnPropertyNames",(function(){return n(4765).f}))},81993:(t,e,n)=>{var r=n(99811),i=n(49698),o=n(77927);t.exports=function(t){return i(t)?o(t):r(t)}},82199:(t,e,n)=>{var r=n(14528),i=n(56449);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},82392:(t,e,n)=>{var r=n(92127),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},82577:(t,e,n)=>{n(49307)("Set")},82586:(t,e,n)=>{var r=n(92127),i=n(84719),o=n(63387),s=n(4228),a=n(43305),u=n(79448),c=n(15538),l=(n(67526).Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),f=!u((function(){l((function(){}))}));r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,d=i(a(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return a(p)?p:d}})},82738:(t,e,n)=>{var r=n(67526).parseInt,i=n(40629).trim,o=n(78451),s=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},82975:(t,e,n)=>{var r=n(91212)(!0);n(98175)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},83048:(t,e,n)=>{var r=n(43305);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},83120:(t,e,n)=>{var r=n(14528),i=n(45891);t.exports=function t(e,n,o,s,a){var u=-1,c=e.length;for(o||(o=i),a||(a=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},83221:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}},83349:(t,e,n)=>{var r=n(82199),i=n(86375),o=n(37241);t.exports=function(t){return r(t,o,i)}},83488:t=>{t.exports=function(t){return t}},83693:(t,e,n)=>{var r=n(64894),i=n(40346);t.exports=function(t){return i(t)&&r(t)}},83729:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},84117:(t,e,n)=>{var r=n(92127);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},84153:(t,e,n)=>{n(52468)("sup",(function(t){return function(){return t(this,"sup","","")}}))},84247:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},84352:(t,e,n)=>{var r=n(92127),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,s=0,a=arguments.length,u=0;s<a;)u<(n=i(arguments[s++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},84437:(t,e,n)=>{var r=n(92127),i=n(33589);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},84438:(t,e,n)=>{var r=n(18270),i=n(70157),o=n(81485);t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),a=i(t,s),u=i(e,s),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?s:i(c,s))-u,s-a),h=1;for(u<a&&a<u+l&&(h=-1,u+=l-1,a+=l-1);l-- >0;)u in n?n[a]=n[u]:delete n[a],a+=h,u+=h;return n}},84614:(t,e,n)=>{var r=n(92127),i=n(96222),o=n(57221),s=n(68641),a=n(67227);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=s.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,e=c[h++]))&&a(l,e,n);return l}})},84684:(t,e,n)=>{var r=n(69302),i=n(75288),o=n(36800),s=n(37241),a=Object.prototype,u=a.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],h=s(l),f=-1,d=h.length;++f<d;){var p=h[f],g=t[p];(void 0===g||i(g,a[p])&&!u.call(t,p))&&(t[p]=l[p])}return t}));t.exports=c},84719:(t,e,n)=>{var r=n(4228),i=n(21626),o=n(86140),s=n(40766)("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,e=n(46034)("iframe"),r=o.length;for(e.style.display="none",n(61308).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c[u][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=r(t),n=new a,a[u]=null,n[s]=t):n=c(),void 0===e?n:i(n,e)}},85015:(t,e,n)=>{var r=n(72552),i=n(56449),o=n(40346);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},85039:(t,e,n)=>{var r=n(92127),i=n(18270),o=n(63387),s=n(47967);n(1763)&&r(r.P+n(91913),"Object",{__defineSetter__:function(t,e){s.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},85072:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var u=t[a],c=r.base?u[0]+r.base:u[0],l=o[c]||0,h="".concat(c," ").concat(l);o[c]=l+1;var f=n(h),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=i(d,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:p,references:1})}s.push(h)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var u=r(t,i),c=0;c<o.length;c++){var l=n(o[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=u}}},85250:(t,e,n)=>{var r=n(37217),i=n(87805),o=n(86649),s=n(42824),a=n(23805),u=n(37241),c=n(14974);t.exports=function t(e,n,l,h,f){e!==n&&o(n,(function(o,u){if(f||(f=new r),a(o))s(e,n,u,l,t,h,f);else{var d=h?h(c(e,u),o,u+"",e,n,f):void 0;void 0===d&&(d=o),i(e,u,d)}}),u)}},85463:t=>{t.exports=function(t){return t!=t}},85508:(t,e,n)=>{var r=n(86151),i=n(36800),o=n(17400);t.exports=function(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),s=void 0===s?e<n?1:-1:o(s),r(e,n,s,t)}}},85558:t=>{t.exports=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}},85957:(t,e,n)=>{var r=n(4228),i=n(43305),o=n(24258);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},86009:(t,e,n)=>{t=n.nmd(t);var r=n(34840),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},86140:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},86151:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var s=-1,a=n(e((r-t)/(i||1)),0),u=Array(a);a--;)u[o?a:++s]=t,t+=i;return u}},86375:(t,e,n)=>{var r=n(14528),i=n(28879),o=n(4664),s=n(63345),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=a},86511:(t,e,n)=>{var r=n(92127),i=n(66179)(3);r(r.P+r.F*!n(86884)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},86649:(t,e,n)=>{var r=n(83221)();t.exports=r},86884:(t,e,n)=>{var r=n(79448);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},87038:t=>{t.exports="0.8.5"},87068:(t,e,n)=>{var r=n(37217),i=n(25911),o=n(21986),s=n(50689),a=n(5861),u=n(56449),c=n(3656),l=n(37167),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,m){var y=u(t),b=u(e),x=y?f:a(t),w=b?f:a(e),_=(x=x==h?d:x)==d,A=(w=w==h?d:w)==d,S=x==w;if(S&&c(t)){if(!c(e))return!1;y=!0,_=!1}if(S&&!_)return m||(m=new r),y||l(t)?i(t,e,n,g,v,m):o(t,e,x,n,g,v,m);if(!(1&n)){var E=_&&p.call(t,"__wrapped__"),k=A&&p.call(e,"__wrapped__");if(E||k){var T=E?t.value():t,P=k?e.value():e;return m||(m=new r),v(T,P,n,g,m)}}return!!S&&(m||(m=new r),s(t,e,n,g,v,m))}},87146:(t,e,n)=>{var r=n(92127),i=n(43854)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},87296:(t,e,n)=>{var r,i=n(55481),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},87360:(t,e,n)=>{n(52468)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},87612:(t,e,n)=>{var r=n(79770),i=n(16574),o=n(15389),s=n(56449);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},87730:(t,e,n)=>{var r=n(29172),i=n(27301),o=n(86009),s=o&&o.isMap,a=s?i(s):r;t.exports=a},87805:(t,e,n)=>{var r=n(43360),i=n(75288);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},87978:(t,e,n)=>{var r=n(60270),i=n(58156),o=n(80631),s=n(28586),a=n(30756),u=n(67197),c=n(77797);t.exports=function(t,e){return s(t)&&a(e)?u(c(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,3)}}},88050:(t,e,n)=>{var r=n(92127),i=n(82738);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},88055:(t,e,n)=>{var r=n(9999);t.exports=function(t){return r(t,5)}},88184:(t,e,n)=>{var r=n(67574)("unscopables"),i=Array.prototype;null==i[r]&&n(33341)(i,r,{}),t.exports=function(t){i[r][t]=!0}},88262:(t,e,n)=>{n(56289),t.exports=n(56094).RegExp.escape},88647:(t,e,n)=>{var r=n(18270),i=n(51311);n(80923)("keys",(function(){return function(t){return i(r(t))}}))},88984:(t,e,n)=>{var r=n(55527),i=n(3650),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},89011:(t,e,n)=>{n(52468)("big",(function(t){return function(){return t(this,"big","","")}}))},89448:(t,e,n)=>{var r=n(92127);r(r.S+r.F*!n(1763),"Object",{defineProperties:n(21626)})},89935:t=>{t.exports=function(){return!1}},90181:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},90289:(t,e,n)=>{var r=n(12651);t.exports=function(t){return r(this,t).get(t)}},90571:(t,e,n)=>{var r=n(92127),i=n(82738);r(r.G+r.F*(parseInt!=i),{parseInt:i})},90938:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},91033:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},91212:(t,e,n)=>{var r=n(27087),i=n(3344);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},91319:(t,e,n)=>{var r=n(97380),i=n(4228),o=r.get,s=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},91913:(t,e,n)=>{t.exports=n(22750)||!n(79448)((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete n(67526)[t]}))},91933:(t,e,n)=>{var r=n(92127),i=n(67526).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},92127:(t,e,n)=>{var r=n(67526),i=n(56094),o=n(33341),s=n(28859),a=n(35052),u="prototype",c=function(t,e,n){var l,h,f,d,p=t&c.F,g=t&c.G,v=t&c.S,m=t&c.P,y=t&c.B,b=g?r:v?r[e]||(r[e]={}):(r[e]||{})[u],x=g?i:i[e]||(i[e]={}),w=x[u]||(x[u]={});for(l in g&&(n=e),n)f=((h=!p&&b&&void 0!==b[l])?b:n)[l],d=y&&h?a(f,r):m&&"function"==typeof f?a(Function.call,f):f,b&&s(b,l,f,t&c.U),x[l]!=f&&o(x,l,d),m&&w[l]!=f&&(w[l]=f)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},92271:(t,e,n)=>{var r=n(21791),i=n(4664);t.exports=function(t,e){return r(t,i(t),e)}},92552:(t,e,n)=>{var r=n(47967),i=n(92127),o=n(4228),s=n(83048);i(i.S+i.F*n(79448)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},93191:(t,e,n)=>{var r=n(63606);t.exports=function(t,e){return new(r(t))(e)}},93243:(t,e,n)=>{var r=n(56110),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},93290:(t,e,n)=>{t=n.nmd(t);var r=n(9325),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},93386:(t,e,n)=>{var r=n(36197),i=n(12888),o="Map";t.exports=n(58933)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,o),t);return e&&e.v},set:function(t,e){return r.def(i(this,o),0===t?0:t,e)}},r,!0)},93599:(t,e,n)=>{var r=n(44394);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(void 0===u?a==a&&!r(a):n(a,u)))var u=a,c=s}return c}},93642:(t,e,n)=>{var r=n(92127),i=n(31384)(),o=n(67526).process,s="process"==n(55089)(o);r(r.G,{asap:function(t){var e=s&&o.domain;i(e?e.bind(t):t)}})},93663:(t,e,n)=>{var r=n(41799),i=n(10776),o=n(67197);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},93736:(t,e,n)=>{var r=n(51873),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},93863:(t,e,n)=>{var r=n(35052),i=n(92127),o=n(18270),s=n(97368),a=n(1508),u=n(81485),c=n(67227),l=n(20762);i(i.S+i.F*!n(98931)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,m=0,y=l(f);if(v&&(g=r(g,p>2?arguments[2]:void 0,2)),null==y||d==Array&&a(y))for(n=new d(e=u(f.length));e>m;m++)c(n,m,v?g(f[m],m):f[m]);else for(h=y.call(f),n=new d;!(i=h.next()).done;m++)c(n,m,v?s(h,g,[i.value,m],!0):i.value);return n.length=m,n}})},94116:(t,e,n)=>{var r=n(69600);n(92127)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},94384:(t,e,n)=>{var r=n(56857);t.exports=function(t,e,n){var i,o={};r.forEach(n,(function(n){for(var r,s,a=t.parent(n);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}}))}},94506:(t,e,n)=>{var r=n(93599),i=n(3335),o=n(83488);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},94521:(t,e,n)=>{var r=n(92127),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},94633:(t,e,n)=>{var r=n(92127),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},95165:(t,e,n)=>{var r=n(88184),i=n(74970),o=n(60906),s=n(57221);t.exports=n(98175)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},95380:(t,e,n)=>{var r=n(92127),i=n(74472),o=n(4514),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*s,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},95411:(t,e,n)=>{var r=n(43305),i=n(55089),o=n(67574)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},95502:(t,e,n)=>{var r=n(43305),i=n(40627),o=n(67574)("hasInstance"),s=Function.prototype;o in s||n(47967).f(s,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},95780:function(t,e,n){!function(e){var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c=e.regeneratorRuntime;if(c)t.exports=c;else{(c=e.regeneratorRuntime=t.exports).wrap=b;var l="suspendedStart",h="suspendedYield",f="executing",d="completed",p={},g={};g[s]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==r&&i.call(m,s)&&(g=m);var y=A.prototype=w.prototype=Object.create(g);_.prototype=y.constructor=A,A.constructor=_,A[u]=_.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(y),t},c.awrap=function(t){return{__await:t}},S(E.prototype),E.prototype[a]=function(){return this},c.AsyncIterator=E,c.async=function(t,e,n,r){var i=new E(b(t,e,n,r));return c.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(y),y[u]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=O,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),p}}}function b(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),s=new C(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=x(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function _(){}function A(){}function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){function n(e,r,o,s){var a=x(t[e],t,r);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):Promise.resolve(c).then((function(t){u.value=t,o(u)}),s)}s(a.arg)}var r;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function i(){return new Promise((function(r,i){n(t,e,r,i)}))}return r=r?r.then(i,i):i()}}function k(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,k(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function O(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:M}}function M(){return{value:n,done:!0}}}("object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:this)},95853:(t,e,n)=>{var r=n(92127),i=n(61308),o=n(55089),s=n(70157),a=n(81485),u=[].slice;r(r.P+r.F*n(79448)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var n=a(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=s(t,n),c=s(e,n),l=a(c-i),h=new Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},95950:(t,e,n)=>{var r=n(70695),i=n(88984),o=n(64894);t.exports=function(t){return o(t)?r(t):i(t)}},96065:(t,e,n)=>{var r=n(28859);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},96108:(t,e,n)=>{var r=n(92127),i=n(33589);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},96131:(t,e,n)=>{var r=n(2523),i=n(85463),o=n(76959);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},96222:(t,e,n)=>{var r=n(59415),i=n(1060),o=n(4228),s=n(67526).Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},96311:(t,e,n)=>{var r=n(92127),i=n(3344),o=n(81485),s=n(95411),a=n(1158),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(6032)(c,"RegExp String",(function(){var t=this._r.exec(this._s);return{value:t,done:null===t}})),r(r.P,"String",{matchAll:function(t){if(i(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):a.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},96511:(t,e,n)=>{var r=n(92127),i=n(57221),o=[].join;r(r.P+r.F*(n(61249)!=Object||!n(86884)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},96822:(t,e,n)=>{var r=n(56857),i=n(22031);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),(function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),(function(t){r.has(n,t.w)?e.push(t):o(t.w)})),delete n[s])})),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},97075:(t,e,n)=>{var r=n(92127),i=n(63387),o=n(18270),s=n(79448),a=[].sort,u=[1,2,3];r(r.P+r.F*(s((function(){u.sort(void 0)}))||!s((function(){u.sort(null)}))||!n(86884)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),i(t))}})},97200:(t,e,n)=>{var r=n(13222),i=0;t.exports=function(t){var e=++i;return r(t)+e}},97368:(t,e,n)=>{var r=n(4228);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},97380:(t,e,n)=>{var r=n(93386),i=n(92127),o=n(44556)("metadata"),s=o.store||(o.store=new(n(79397))),a=function(t,e,n){var i=s.get(t);if(!i){if(!n)return;s.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o};t.exports={store:s,map:a,has:function(t,e,n){var r=a(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=a(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){a(n,r,!0).set(t,e)},keys:function(t,e){var n=a(t,e,!1),r=[];return n&&n.forEach((function(t,e){r.push(e)})),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},97420:(t,e,n)=>{var r=n(47422),i=n(73170),o=n(31769);t.exports=function(t,e,n){for(var s=-1,a=e.length,u={};++s<a;){var c=e[s],l=r(t,c);n(l,c)&&i(u,o(c,t),l)}return u}},97825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},97860:(t,e,n)=>{var r=n(56857),i=n(68191).Graph;t.exports=function(t,e,n){var o=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||o),r.forEach(t[n](i),(function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})})),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),s}},98066:(t,e,n)=>{n(37209)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},98163:(t,e,n)=>{var r=n(99882),i=n(12888),o="WeakSet";n(58933)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},98175:(t,e,n)=>{var r=n(22750),i=n(92127),o=n(28859),s=n(33341),a=n(60906),u=n(6032),c=n(3844),l=n(40627),h=n(67574)("iterator"),f=!([].keys&&"next"in[].keys()),d="keys",p="values",g=function(){return this};t.exports=function(t,e,n,v,m,y,b){u(n,e,v);var x,w,_,A=function(t){if(!f&&t in T)return T[t];switch(t){case d:case p:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",E=m==p,k=!1,T=t.prototype,P=T[h]||T["@@iterator"]||m&&T[m],C=P||A(m),O=m?E?A("entries"):C:void 0,M="Array"==e&&T.entries||P;if(M&&(_=l(M.call(new t)))!==Object.prototype&&_.next&&(c(_,S,!0),r||"function"==typeof _[h]||s(_,h,g)),E&&P&&P.name!==p&&(k=!0,C=function(){return P.call(this)}),r&&!b||!f&&!k&&T[h]||s(T,h,C),a[e]=C,a[S]=g,m)if(x={values:E?C:A(p),keys:y?C:A(d),entries:O},b)for(w in x)w in T||o(T,w,x[w]);else i(i.P+i.F*(f||k),e,x);return x}},98423:(t,e,n)=>{var r=n(92127),i=n(77836),o=n(72122);r(r.S,"Math",{fscale:function(t,e,n,r,s){return o(i(t,e,n,r,s))}})},98880:(t,e,n)=>{var r=n(43305),i=n(25170).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},98918:(t,e,n)=>{var r=n(56857);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),i=r.max(r.map(n,(function(e){return t.node(e).rank}))),o=r.map(r.range(i+1),(function(){return[]})),s=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(s,(function n(i){if(!r.has(e,i)){e[i]=!0;var s=t.node(i);o[s.rank].push(i),r.forEach(t.successors(i),n)}})),o}},98931:(t,e,n)=>{var r=n(67574)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},99134:(t,e,n)=>{var r=n(92127),i=n(75551),o=Math.exp;r(r.S+r.F*n(79448)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},99374:(t,e,n)=>{var r=n(54128),i=n(23805),o=n(44394),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},99650:(t,e,n)=>{var r=n(67526),i=n(57917),o=n(1763),s=n(92127),a=n(28859),u=n(12988).KEY,c=n(79448),l=n(44556),h=n(3844),f=n(4415),d=n(67574),p=n(47960),g=n(45392),v=n(15969),m=n(77981),y=n(4228),b=n(43305),x=n(18270),w=n(57221),_=n(83048),A=n(11996),S=n(84719),E=n(4765),k=n(68641),T=n(1060),P=n(47967),C=n(51311),O=k.f,M=P.f,N=E.f,L=r.Symbol,I=r.JSON,j=I&&I.stringify,B="prototype",R=d("_hidden"),D=d("toPrimitive"),F={}.propertyIsEnumerable,V=l("symbol-registry"),z=l("symbols"),G=l("op-symbols"),U=Object[B],q="function"==typeof L&&!!T.f,H=r.QObject,$=!H||!H[B]||!H[B].findChild,W=o&&c((function(){return 7!=S(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=O(U,e);r&&delete U[e],M(t,e,n),r&&t!==U&&M(U,e,r)}:M,X=function(t){var e=z[t]=S(L[B]);return e._k=t,e},Y=q&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},J=function(t,e,n){return t===U&&J(G,e,n),y(t),e=_(e,!0),y(n),i(z,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=S(n,{enumerable:A(0,!1)})):(i(t,R)||M(t,R,A(1,{})),t[R][e]=!0),W(t,e,n)):M(t,e,n)},Z=function(t,e){y(t);for(var n,r=v(e=w(e)),i=0,o=r.length;o>i;)J(t,n=r[i++],e[n]);return t},K=function(t){var e=F.call(this,t=_(t,!0));return!(this===U&&i(z,t)&&!i(G,t))&&(!(e||!i(this,t)||!i(z,t)||i(this,R)&&this[R][t])||e)},Q=function(t,e){if(t=w(t),e=_(e,!0),t!==U||!i(z,e)||i(G,e)){var n=O(t,e);return!n||!i(z,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=N(w(t)),r=[],o=0;n.length>o;)i(z,e=n[o++])||e==R||e==u||r.push(e);return r},et=function(t){for(var e,n=t===U,r=N(n?G:w(t)),o=[],s=0;r.length>s;)!i(z,e=r[s++])||n&&!i(U,e)||o.push(z[e]);return o};q||(a((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(G,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),W(this,t,A(1,n))};return o&&$&&W(U,t,{configurable:!0,set:e}),X(t)})[B],"toString",(function(){return this._k})),k.f=Q,P.f=J,n(59415).f=E.f=tt,n(8449).f=K,T.f=et,o&&!n(22750)&&a(U,"propertyIsEnumerable",K,!0),p.f=function(t){return X(d(t))}),s(s.G+s.W+s.F*!q,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)d(nt[rt++]);for(var it=C(d.store),ot=0;it.length>ot;)g(it[ot++]);s(s.S+s.F*!q,"Symbol",{for:function(t){return i(V,t+="")?V[t]:V[t]=L(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in V)if(V[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),s(s.S+s.F*!q,"Object",{create:function(t,e){return void 0===e?S(t):Z(S(t),e)},defineProperty:J,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var st=c((function(){T.f(1)}));s(s.S+s.F*st,"Object",{getOwnPropertySymbols:function(t){return T.f(x(t))}}),I&&s(s.S+s.F*(!q||c((function(){var t=L();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!Y(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,j.apply(I,r)}}),L[B][D]||n(33341)(L[B],D,L[B].valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},99766:(t,e,n)=>{var r=n(92127),i=n(62322),o=n(18270),s=n(81485),a=n(63387),u=n(93191);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return a(t),e=s(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(88184)("flatMap")},99811:(t,e,n)=>{var r=n(47237)("length");t.exports=r},99882:(t,e,n)=>{var r=n(96065),i=n(12988).getWeak,o=n(4228),s=n(43305),a=n(16440),u=n(48790),c=n(66179),l=n(57917),h=n(12888),f=c(5),d=c(6),p=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},m=function(t,e){return f(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t((function(t,r){a(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=r&&u(r,n,t[o],t)}));return r(c.prototype,{delete:function(t){if(!s(t))return!1;var n=i(t);return!0===n?g(h(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=i(t);return!0===n?g(h(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?g(t).set(e,n):r[t._i]=n,t},ufstore:g}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.u=t=>t+".main.mjs",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;if("string"==typeof import.meta.url&&(t=import.meta.url),!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=new URL("./",import.meta.url),n.nc=void 0;var r={};n.d(r,{uu:()=>Gd,hM:()=>Kf,UH:()=>Ed,VA:()=>_d,m4:()=>Ad,Yo:()=>g,sP:()=>v,r0:()=>Zf,xc:()=>Vd,Yl:()=>p,pd:()=>m});var i={};n.r(i),n.d(i,{ellipseWithEllipse:()=>Vt,ellipseWithLine:()=>Ft,exists:()=>Rt,lineWithLine:()=>Dt,pathWithEllipse:()=>te,pathWithLine:()=>Qt,pathWithPath:()=>ie,pathWithPolygon:()=>re,pathWithPolyline:()=>ne,pathWithRect:()=>ee,polygonWithEllipse:()=>Yt,polygonWithLine:()=>Xt,polygonWithPolygon:()=>Kt,polygonWithPolyline:()=>Zt,polygonWithRect:()=>Jt,polylineWithEllipse:()=>Ht,polylineWithLine:()=>qt,polylineWithPolyline:()=>Wt,polylineWithRect:()=>$t,rectWithEllipse:()=>Gt,rectWithLine:()=>zt,rectWithRect:()=>Ut});var o={};n.r(o),n.d(o,{Curve:()=>wt,Ellipse:()=>et,Line:()=>J,Path:()=>At,Point:()=>$,Polygon:()=>Bt,Polyline:()=>gt,Rect:()=>lt,bezier:()=>jt,ellipse:()=>nt,intersection:()=>de,line:()=>Z,normalizeAngle:()=>S,point:()=>W,random:()=>P,rect:()=>ht,scale:()=>A,snapToGrid:()=>E,toDeg:()=>k,toRad:()=>T,types:()=>j});var s={};n.r(s),n.d(s,{absolute:()=>Fo,bottom:()=>Ho,ellipse:()=>Wo,ellipseSpread:()=>$o,fn:()=>Vo,left:()=>Go,line:()=>zo,right:()=>Uo,top:()=>qo});var a={};n.r(a),n.d(a,{bottom:()=>rs,inside:()=>as,insideOriented:()=>ss,left:()=>ts,manual:()=>Qo,outside:()=>os,outsideOriented:()=>is,radial:()=>us,radialOriented:()=>cs,right:()=>es,top:()=>ns});var u={};n.r(u),n.d(u,{manhattan:()=>Ks,metro:()=>ta,normal:()=>ys,oneSide:()=>bs,orthogonal:()=>Is,rightAngle:()=>va});var c={};n.r(c),n.d(c,{curve:()=>Ra,jumpover:()=>Oa,normal:()=>Ma,rounded:()=>La,smooth:()=>Ia,straight:()=>wa});var l={};n.r(l),n.d(l,{addClass:()=>uu,list:()=>lu,mask:()=>ou,opacity:()=>su,stroke:()=>ru});var h={};n.r(h),n.d(h,{connectionClosest:()=>vu,connectionLength:()=>fu,connectionPerpendicular:()=>gu,connectionRatio:()=>hu,resolveRef:()=>du});var f={};n.r(f),n.d(f,{anchor:()=>_u,bbox:()=>Au,boundary:()=>Eu,rectangle:()=>Su});var d={};n.r(d),n.d(d,{bottom:()=>Cu,bottomLeft:()=>Iu,bottomRight:()=>ju,center:()=>Tu,left:()=>Ou,midSide:()=>Ru,modelCenter:()=>Du,perpendicular:()=>Bu,right:()=>Mu,top:()=>Pu,topLeft:()=>Nu,topRight:()=>Lu});var p={};n.r(p),n.d(p,{CircleSourceArrowhead:()=>hc,CircleTargetArrowhead:()=>fc,DoublyButton:()=>dc,MonitorButton:()=>gc,RemoveButton:()=>pc});var g={};n.r(g),n.d(g,{Addition:()=>ql,AdditionConst:()=>Sh,AdditionConstView:()=>Eh,AdditionView:()=>Hl,And:()=>cl,AndReduce:()=>Al,AndReduceView:()=>Sl,AndView:()=>ll,Arith:()=>Nl,Arith11:()=>Ll,Arith21:()=>Il,ArithConst:()=>bh,BaseCompare:()=>Rl,BaseCompareConst:()=>wh,BitExtend:()=>Kh,BitExtendView:()=>Qh,Box:()=>wc,BoxView:()=>_c,BusGroup:()=>cf,BusGroupView:()=>lf,BusRegroup:()=>af,BusRegroupView:()=>uf,BusSlice:()=>of,BusSliceView:()=>sf,BusUngroup:()=>hf,BusUngroupView:()=>ff,Button:()=>Cc,ButtonView:()=>Oc,Clock:()=>zc,ClockView:()=>Gc,Compare:()=>Dl,CompareConst:()=>_h,Constant:()=>Fc,ConstantView:()=>Vc,Dff:()=>Af,DffView:()=>Sf,Display7:()=>Mf,Display7View:()=>Nf,Division:()=>Jl,DivisionConst:()=>Oh,DivisionConstView:()=>Mh,DivisionView:()=>Zl,Eq:()=>ph,EqCompare:()=>Fl,EqCompareConst:()=>Ah,EqConst:()=>Xh,EqConstView:()=>Yh,EqView:()=>gh,FSM:()=>Tf,FSMView:()=>Pf,Gate:()=>mc,Gate11:()=>tl,GateReduce:()=>nl,GateSVG:()=>Qc,GateView:()=>yc,GateX1:()=>el,Ge:()=>fh,GeConst:()=>$h,GeConstView:()=>Wh,GeView:()=>dh,GenMux:()=>gf,GenMuxView:()=>vf,Gt:()=>lh,GtConst:()=>qh,GtConstView:()=>Hh,GtView:()=>hh,IO:()=>Ec,IOView:()=>kc,Input:()=>Tc,InputView:()=>Pc,Lamp:()=>jc,LampView:()=>Bc,Le:()=>uh,LeConst:()=>Gh,LeConstView:()=>Uh,LeView:()=>ch,Lt:()=>sh,LtConst:()=>Vh,LtConstView:()=>zh,LtView:()=>ah,Memory:()=>Ef,MemoryView:()=>kf,Modulo:()=>Kl,ModuloConst:()=>Nh,ModuloConstView:()=>Lh,ModuloView:()=>Ql,Multiplication:()=>Xl,MultiplicationConst:()=>Ph,MultiplicationConstView:()=>Ch,MultiplicationView:()=>Yl,Mux:()=>mf,Mux1Hot:()=>bf,Mux1HotView:()=>xf,MuxSparse:()=>wf,MuxSparseView:()=>_f,MuxView:()=>yf,Nand:()=>dl,NandReduce:()=>El,NandReduceView:()=>kl,NandView:()=>pl,Ne:()=>vh,NeConst:()=>Jh,NeConstView:()=>Zh,NeView:()=>mh,Negation:()=>Vl,NegationView:()=>zl,Nor:()=>hl,NorReduce:()=>wl,NorReduceView:()=>_l,NorView:()=>fl,Not:()=>ol,NotView:()=>sl,NumBase:()=>Ac,NumBaseView:()=>Sc,NumDisplay:()=>Rc,NumDisplayView:()=>Dc,NumEntry:()=>Mc,NumEntryView:()=>Nc,OpConst:()=>yh,Or:()=>al,OrReduce:()=>bl,OrReduceView:()=>xl,OrView:()=>ul,Output:()=>Lc,OutputView:()=>Ic,Power:()=>th,PowerConst:()=>Ih,PowerConstView:()=>jh,PowerView:()=>eh,Repeater:()=>rl,RepeaterView:()=>il,Shift:()=>Bl,ShiftConst:()=>xh,ShiftLeft:()=>nh,ShiftLeftConst:()=>Bh,ShiftLeftConstView:()=>Rh,ShiftLeftView:()=>rh,ShiftRight:()=>ih,ShiftRightConst:()=>Dh,ShiftRightConstView:()=>Fh,ShiftRightView:()=>oh,SignExtend:()=>nf,SignExtendView:()=>rf,Subcircuit:()=>df,SubcircuitView:()=>pf,Subtraction:()=>$l,SubtractionConst:()=>kh,SubtractionConstView:()=>Th,SubtractionView:()=>Wl,UnaryPlus:()=>Gl,UnaryPlusView:()=>Ul,Wire:()=>bc,WireView:()=>xc,Xnor:()=>ml,XnorReduce:()=>Cl,XnorReduceView:()=>Ol,XnorView:()=>yl,Xor:()=>gl,XorReduce:()=>Tl,XorReduceView:()=>Pl,XorView:()=>vl,ZeroExtend:()=>tf,ZeroExtendView:()=>ef,portGroupAttrs:()=>vc});var v={};n.r(v),n.d(v,{BrowserSynchEngine:()=>Bf,SynchEngine:()=>jf,WorkerEngine:()=>Df});var m={};n.r(m),n.d(m,{CircuitModel:()=>Yf,integrateArithConstant:()=>Uf,integrateNegation:()=>zf,makeBinaryMuxes:()=>$f,makeDffWithEnable:()=>Wf,makeNAryGates:()=>Hf,removeRepeater:()=>Ff,transformCircuit:()=>Jf,transformations:()=>Xf}),n(39653);var y=n(76246),b=n(38362);const{round:x,floor:w,PI:_}=Math,A={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},S=function(t){return t%360+(t<0?360:0)},E=function(t,e){return e*x(t/e)},k=function(t){return 180*t/_%360},T=function(t,e){return(t=(e=e||!1)?t:t%360)*_/180},P=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return w(Math.random()*(e-t+1)+t)},{cos:C,sin:O,atan2:M}=Math,N=function(t,e){var n=T(t.y),r=T(e.y),i=t.x,o=e.x,s=T(o-i),a=O(s)*C(r),u=C(n)*O(r)-O(n)*C(r)*C(s),c=k(M(a,u))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},L=function(t,e){var n=t.x,r=t.y;return(n-=e.x)*n+(r-=e.y)*r},I=function(t,e){return Math.sqrt(L(t,e))},j={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:B,cos:R,sin:D,sqrt:F,min:V,max:z,atan2:G,round:U,pow:q,PI:H}=Math,$=function(t,e){if(!(this instanceof $))return new $(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};$.fromPolar=function(t,e,n){n=new $(n);var r=B(t*R(e)),i=B(t*D(e)),o=S(k(e));return o<90?i=-i:o<180?(r=-r,i=-i):o<270&&(r=-r),new $(n.x+r,n.y+i)},$.random=function(t,e,n,r){return new $(P(t,e),P(n,r))},$.prototype={type:j.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new $(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var o=new $(t[i]),s=this.squaredDistance(o);s<r&&(n=o,r=s)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=V(z(this.x,t.x),t.x+t.width),this.y=V(z(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return N(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new $(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new $(this.x-(t||0),this.y-(e||0))},distance:function(t){return I(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new $((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return F(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return B(t.x-this.x)+B(t.y-this.y)},move:function(t,e){var n=T(new $(t).theta(this));return this.offset(R(n)*e,-D(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new $(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new $(0,0),e=T(S(-e));var n=R(e),r=D(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,o=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=q(10,t)}return this.x=U(this.x*e)/e,this.y=U(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new $(n)||new $(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=E(this.x,t),this.y=E(this.y,e||t),this},squaredDistance:function(t){return L(this,t)},theta:function(t){var e=-((t=new $(t)).y-this.y),n=t.x-this.x,r=G(e,n);return r<0&&(r=2*H+r),180*r/H},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new $(t)||new $(0,0);var e=this.x,n=this.y;return this.x=F((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=T(t.theta(new $(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new $(0,0).angleBetween(this,t)}},$.prototype.translate=$.prototype.offset;const W=$,{max:X,min:Y}=Math,J=function(t,e){return this instanceof J?t instanceof J?new J(t.start,t.end):(this.start=new $(t),void(this.end=new $(e))):new J(t,e)};J.prototype={type:j.Line,angle:function(){var t=new $(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=Y(this.start.x,this.end.x),e=Y(this.start.y,this.end.y),n=X(this.start.x,this.end.x),r=X(this.start.y,this.end.y);return new lt(t,e,n-t,r-e)},bearing:function(){return N(this.start,this.end)},clone:function(){return new J(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new J(this.start,t).vector()),n=Y(1,X(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var r=this.length();return!(new J(e,t).length()>r||new J(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new J(this.start,e),new J(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new J(this.start,e),new J(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof J&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new $(this.end.x-this.start.x,this.end.y-this.start.y),n=new $(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new $(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,s=i.x*e.y-i.y*e.x;if(0===r||o*r<0||s*r<0)return null;if(r>0){if(o>r||s>r)return null}else if(o<r||s<r)return null;return[new $(this.start.x+o*e.x/r,this.start.y+o*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return I(this.start,this.end)},midpoint:function(){return new $((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new $(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return L(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new J(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new J(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new $(this.end.x-this.start.x,this.end.y-this.start.y)}},J.prototype.intersection=J.prototype.intersect;const Z=J,{sqrt:K,round:Q,pow:tt}=Math,et=function(t,e,n){return this instanceof et?t instanceof et?new et(new $(t.x,t.y),t.a,t.b):(t=new $(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new et(t,e,n)};et.fromRect=function(t){return t=new lt(t),new et(t.center(),t.width/2,t.height/2)},et.prototype={type:j.Ellipse,bbox:function(){return new lt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new $(this.x,this.y)},clone:function(){return new et(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,o=this.b,s=t.vector(),a=n.difference(new $(this)),u=new $(s.x/(i*i),s.y/(o*o)),c=new $(a.x/(i*i),a.y/(o*o)),l=s.dot(u),h=s.dot(c),f=h*h-l*(a.dot(c)-1);if(f<0)return null;if(f>0){var d=K(f),p=(-h-d)/l,g=(-h+d)/l;if((p<0||1<p)&&(g<0||1<g))return null;0<=p&&p<=1&&e.push(n.lerp(r,p)),0<=g&&g<=1&&e.push(n.lerp(r,g))}else{var v=-h/l;if(!(0<=v&&v<=1))return null;e.push(n.lerp(r,v))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new $(t),e&&t.rotate(new $(this.x,this.y),e);var n,r=t.x-this.x,i=t.y-this.y;if(0===r)return n=this.bbox().pointNearestToPoint(t),e?n.rotate(new $(this.x,this.y),-e):n;var o=i/r,s=o*o,a=this.a*this.a,u=this.b*this.b,c=K(1/(1/a+s/u)),l=o*(c=r<0?-c:c);return n=new $(this.x+c,this.y+l),e?n.rotate(new $(this.x,this.y),-e):n},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(r*r)+(n-s)*(n-s)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=tt(10,t)}return this.x=Q(this.x*e)/e,this.y=Q(this.y*e)/e,this.a=Q(this.a*e)/e,this.b=Q(this.b*e)/e,this},tangentTheta:function(t){var e,n,r=t.x,i=t.y,o=this.a,s=this.b,a=this.bbox().center(),u=a.x,c=a.y,l=r>a.x+o/2,h=r<a.x-o/2;return l||h?n=o*o/(r-u)-o*o*(i-c)*((e=r>a.x?i-30:i+30)-c)/(s*s*(r-u))+u:e=s*s/(i-c)-s*s*(r-u)*((n=i>a.y?r+30:r-30)-u)/(o*o*(i-c))+c,new $(n,e).theta(t)},toString:function(){return new $(this.x,this.y).toString()+" "+this.a+" "+this.b}};const nt=et,{abs:rt,cos:it,sin:ot,min:st,max:at,round:ut,pow:ct}=Math,lt=function(t,e,n,r){if(!(this instanceof lt))return new lt(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r};lt.fromEllipse=function(t){return t=new et(t),new lt(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},lt.fromPointUnion=function(...t){if(0===t.length)return null;const e=new $;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,u=e.y;a<n&&(n=a),a>i&&(i=a),u<r&&(r=u),u>o&&(o=u)}return new lt(n,r,i-n,o-r)},lt.fromRectUnion=function(...t){if(0===t.length)return null;const e=new lt;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,u=e.y,c=a+e.width,l=u+e.height;a<n&&(n=a),c>i&&(i=c),u<r&&(r=u),l>o&&(o=l)}return new lt(n,r,i-n,o-r)},lt.prototype={type:j.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=T(t),i=rt(ot(r)),o=rt(it(r)),s=e*o+n*i,a=e*i+n*o;return this.x+=(e-s)/2,this.y+=(n-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new $(this.x,this.y+this.height)},bottomLine:function(){return new J(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new $(this.x+this.width/2,this.y+this.height)},center:function(){return new $(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new lt(this)},containsPoint:function(t){return t instanceof $||(t=new $(t)),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new lt(this).normalize(),n=new lt(t).normalize(),r=e.width,i=e.height,o=n.width,s=n.height;if(!(r&&i&&o&&s))return!1;var a=e.x,u=e.y,c=n.x,l=n.y;return o+=c,r+=a,s+=l,i+=u,a<=c&&o<=r&&u<=l&&s<=i},corner:function(){return new $(this.x+this.width,this.y+this.height)},equals:function(t){var e=new lt(this).normalize(),n=new lt(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=at(e.x,r.x),s=at(e.y,r.y);return new lt(o,s,st(n.x,i.x)-o,st(n.y,i.y)-s)},intersectionWithLine:function(t){var e,n,r=this,i=[r.topLine(),r.rightLine(),r.bottomLine(),r.leftLine()],o=[],s=[],a=i.length;for(n=0;n<a;n++)null!==(e=t.intersect(i[n]))&&s.indexOf(e.toString())<0&&(o.push(e),s.push(e.toString()));return o.length>0?o:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new $(t);var n,r=new $(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(r,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new J(r,t),s=i.length-1;s>=0;--s){var a=i[s].intersection(o);if(null!==a){n=a;break}}return n&&e&&n.rotate(r,-e),n},leftLine:function(){return new J(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new $(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var n,r,i,o,s,a,u,c;t=new lt(t),e||(e=t.center());var l=e.x,h=e.y;n=r=i=o=s=a=u=c=1/0;var f=t.topLeft();f.x<l&&(n=(this.x-l)/(f.x-l)),f.y<h&&(s=(this.y-h)/(f.y-h));var d=t.bottomRight();d.x>l&&(r=(this.x+this.width-l)/(d.x-l)),d.y>h&&(a=(this.y+this.height-h)/(d.y-h));var p=t.topRight();p.x>l&&(i=(this.x+this.width-l)/(p.x-l)),p.y<h&&(u=(this.y-h)/(p.y-h));var g=t.bottomLeft();return g.x<l&&(o=(this.x-l)/(g.x-l)),g.y>h&&(c=(this.y+this.height-h)/(g.y-h)),{sx:st(n,r,i,o),sy:st(s,a,u,c)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return st(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return $.prototype.offset.call(this,t,e)},origin:function(){return new $(this.x,this.y)},pointNearestToPoint:function(t){if(t=new $(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new $(this.x+this.width,t.y);case"left":return new $(this.x,t.y);case"bottom":return new $(t.x,this.y+this.height);case"top":return new $(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new J(this.topRight(),this.bottomRight())},rightMiddle:function(){return new $(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=ct(10,t)}return this.x=ut(this.x*e)/e,this.y=ut(this.y*e)/e,this.width=ut(this.width*e)/e,this.height=ut(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new $(t)).x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=e,o="left";return n<i&&(i=n,o="right"),r<i&&(i=r,o="top"),this.y+this.height-t.y<i&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new J(this.topLeft(),this.topRight())},topMiddle:function(){return new $(this.x+this.width/2,this.y)},topRight:function(){return new $(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return lt.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}},lt.prototype.bottomRight=lt.prototype.corner,lt.prototype.topLeft=lt.prototype.origin,lt.prototype.translate=lt.prototype.offset;const ht=lt;function ft(t){const e=t.trim();if(""===e)return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let t=0;t<i;t+=2)n.push({x:+r[t],y:+r[t+1]});return n}function dt(t){const e=t.length;if(0===e)return[];const n=[];for(let r=0;r<e;r++){const e=t[r].clone();n.push(e)}return n}function pt(t){const{abs:e}=Math;var n,r,i,o=t.length;if(0===o)return[];for(n=0;n<o;n++)(void 0===i||t[n].y<i.y||t[n].y===i.y&&t[n].x>i.x)&&(i=t[n]);var s=[];for(n=0;n<o;n++){var a=i.theta(t[n]);0===a&&(a=360);var u=[t[n],n,a];s.push(u)}if(s.sort((function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n})),s.length>2){var c=s[s.length-1];s.unshift(c)}for(var l,h,f,d,p,g,v,m={},y=[];0!==s.length;)if(h=(l=s.pop())[0],!m.hasOwnProperty(l[0]+"@@"+l[1]))for(var b=!1;!b;)if(y.length<2)y.push(l),b=!0;else{d=(f=y.pop())[0];var x=(g=(p=y.pop())[0]).cross(d,h);if(x<0)y.push(p),y.push(f),y.push(l),b=!0;else if(0===x){var w=d.angleBetween(g,h);e(w-180)<1e-10||d.equals(h)||g.equals(d)?(m[f[0]+"@@"+f[1]]=d,y.push(p)):e((w+1)%360-1)<1e-10&&(y.push(p),s.push(f))}else m[f[0]+"@@"+f[1]]=d,y.push(p)}y.length>2&&y.pop();var _=-1;for(r=y.length,n=0;n<r;n++){var A=y[n][1];(void 0===v||A<v)&&(v=A,_=n)}var S=[];if(_>0){var E=y.slice(_),k=y.slice(0,_);S=E.concat(k)}else S=y;var T=[];for(r=S.length,n=0;n<r;n++)T.push(S[n][0]);return T}const gt=function(t){return this instanceof gt?"string"==typeof t?new gt.parse(t):void(this.points=Array.isArray(t)?t.map($):[]):new gt(t)};gt.parse=function(t){return new gt(ft(t))},gt.fromRect=function(t){return new gt([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},gt.prototype={type:j.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,o=i.length;if(0===o)return null;for(var s=0;s<o;s++){var a=i[s],u=a.x,c=a.y;u<t&&(t=u),u>e&&(e=u),c<n&&(n=c),c>r&&(r=c)}return new lt(t,n,e-t,r-n)},clone:function(){return new gt(dt(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,n=this.lengthPoints(),r=n.length;if(0===r)return 0;if(1===r)return 0;for(var i=1/0,o=0,s=r-1,a=0;a<s;a++){var u=new J(n[a],n[a+1]),c=u.length(),l=u.closestPointNormalizedLength(t),h=u.pointAt(l).squaredDistance(t);h<i&&(i=h,e=o+l*c),o+=c}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var r=t.x,i=t.y,o=n-1,s=0,a=0,u=new J,c=new J,l=new $;s<n;s++){var h=e[o],f=e[s];if(t.equals(h))return!0;if(u.start=h,u.end=f,u.containsPoint(t))return!0;if(i<=h.y&&i>f.y||i>h.y&&i<=f.y){var d=h.x-r>f.x-r?h.x-r:f.x-r;d>=0&&(l.x=r+d,l.y=i,c.start=t,c.end=l,u.intersect(c)&&a++)}o=s}return a%2==1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new gt(pt(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],s=t.points[i];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new J(t),n=[],r=this.lengthPoints(),i=new J,o=0,s=r.length-1;o<s;o++){i.start=r[o],i.end=r[o+1];var a=e.intersectionWithLine(i);a&&n.push(a[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=new J,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length()*t;return this.pointAtLength(r)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,o=n-1,s=0;s<o;s++){var a=r?s:o-1-s,u=e[a],c=e[a+1],l=new J(u,c),h=u.distance(c);if(t<=i+h)return l.pointAtLength((r?1:-1)*(t-i));i+=h}return(r?e[n-1]:e[0]).clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||1e-10;let r=0;for(;e[r+2];){const t=r+1,i=r+2,o=e[r],s=e[t],a=e[i];new J(o,a).closestPoint(s).distance(s)<=n?e.splice(t,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints().length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length()*t;return this.tangentAtLength(n)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return null;var r,i=!0;t<0&&(i=!1,t=-t);for(var o=0,s=n-1,a=0;a<s;a++){var u=i?a:s-1-a,c=e[u],l=e[u+1],h=new J(c,l),f=c.distance(l);if(h.isDifferentiable()){if(t<=o+f)return h.tangentAtLength((i?1:-1)*(t-o));r=h}o+=f}if(r){var d=i?1:0;return r.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}},Object.defineProperty(gt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(gt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});const{abs:vt,sqrt:mt,min:yt,max:bt,pow:xt}=Math,wt=function(t,e,n,r){return this instanceof wt?t instanceof wt?new wt(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new $(t),this.controlPoint1=new $(e),this.controlPoint2=new $(n),void(this.end=new $(r))):new wt(t,e,n,r)};function _t(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var o,s,a=r[e];for(s in a)a.hasOwnProperty(s)&&(delete i[s],o=Object.getOwnPropertyDescriptor(a,s),Object.defineProperty(i,s,o))}return i}wt.throughPoints=function(){function t(t){var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n}return function(e){if(!e||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var n=function(e){var n,r=[],i=[],o=e.length-1;if(1==o)return r[0]=new $((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),i[0]=new $(2*r[0].x-e[0].x,2*r[0].y-e[0].y),[r,i];var s=[];for(n=1;n<o-1;n++)s[n]=4*e[n].x+2*e[n+1].x;s[0]=e[0].x+2*e[1].x,s[o-1]=(8*e[o-1].x+e[o].x)/2;var a=t(s);for(n=1;n<o-1;++n)s[n]=4*e[n].y+2*e[n+1].y;s[0]=e[0].y+2*e[1].y,s[o-1]=(8*e[o-1].y+e[o].y)/2;var u=t(s);for(n=0;n<o;n++)r.push(new $(a[n],u[n])),n<o-1?i.push(new $(2*e[n+1].x-a[n+1],2*e[n+1].y-u[n+1])):i.push(new $((e[o].x+a[o-1])/2,(e[o].y+u[o-1])/2));return[r,i]}(e),r=[],i=n[0].length,o=0;o<i;o++){var s=new $(n[0][o].x,n[0][o].y),a=new $(n[1][o].x,n[1][o].y);r.push(new wt(e[o],s,a,e[o+1]))}return r}}(),wt.prototype={type:j.Curve,bbox:function(){for(var t,e,n,r,i,o,s,a,u=this.start,c=this.controlPoint1,l=this.controlPoint2,h=this.end,f=u.x,d=u.y,p=c.x,g=c.y,v=l.x,m=l.y,y=h.x,b=h.y,x=new Array,w=new Array,_=[new Array,new Array],A=0;A<2;++A)if(0===A?(e=6*f-12*p+6*v,t=-3*f+9*p-9*v+3*y,n=3*p-3*f):(e=6*d-12*g+6*m,t=-3*d+9*g-9*m+3*b,n=3*g-3*d),vt(t)<1e-12){if(vt(e)<1e-12)continue;0<(r=-n/e)&&r<1&&w.push(r)}else a=mt(s=e*e-4*n*t),s<0||(0<(i=(-e+a)/(2*t))&&i<1&&w.push(i),0<(o=(-e-a)/(2*t))&&o<1&&w.push(o));for(var S,E,k,T=w.length,P=T;T--;)E=(S=1-(r=w[T]))*S*S*f+3*S*S*r*p+3*S*r*r*v+r*r*r*y,_[0][T]=E,k=S*S*S*d+3*S*S*r*g+3*S*r*r*m+r*r*r*b,_[1][T]=k,x[T]={X:E,Y:k};w[P]=0,w[P+1]=1,x[P]={X:f,Y:d},x[P+1]={X:y,Y:b},_[0][P]=f,_[1][P]=d,_[0][P+1]=y,_[1][P+1]=b,w.length=P+2,_[0].length=P+2,_[1].length=P+2,x.length=P+2;var C=yt.apply(null,_[0]),O=yt.apply(null,_[1]),M=bt.apply(null,_[0]),N=bt.apply(null,_[1]);return new lt(C,O,M-C,N-O)},clone:function(){return new wt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,r),r)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},i=this.closestPointLength(t,r);if(!i)return 0;var o=this.length(r);return 0===o?0:i/o},closestPointT:function(t,e){for(var n,r,i,o,s,a,u,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.subdivisions?this.getSubdivisions({precision:c}):e.subdivisions,h=l.length,f=h?1/h:0,d=0;d<h;d++){var p=l[d],g=p.start.distance(t),v=p.end.distance(t),m=g+v;(!u||m<u)&&(n=p,r=d*f,i=(d+1)*f,o=g,s=v,a=p.start.distance(p.end),u=m)}for(var y=xt(10,-c);;){var b=o?vt(o-s)/o:0,x=s?vt(o-s)/s:0;if(b<y||x<y||!o||o<a*y||!s||s<a*y)return o<=s?r:i;var w=n.divide(.5);f/=2;var _=w[0].start.distance(t),A=w[0].end.distance(t),S=_+A,E=w[1].start.distance(t),k=w[1].end.distance(t);S<=E+k?(n=w[0],i-=f,o=_,s=A):(n=w[1],r+=f,o=E,s=k)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new wt(e,e,e,e),new wt(e,n,r,i)];if(t>=1)return[new wt(e,n,r,i),new wt(i,i,i,i)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,u=o.divider,c=o.dividerControlPoint1,l=o.dividerControlPoint2;return[new wt(e,s,a,u),new wt(u,c,l,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new J(e,n).pointAt(t),s=new J(n,r).pointAt(t),a=new J(r,i).pointAt(t),u=new J(o,s).pointAt(t),c=new J(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:u,divider:new J(u,c).pointAt(t),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end,s=[new wt(n,r,i,o)];if(0===e)return s;if(!this.isDifferentiable())return s;var a=this.endpointDistance(),u=xt(10,-e),c=2;0===r.cross(n,o)&&0===i.cross(n,o)&&(c=2*e);for(var l=0;;){l+=1;for(var h=[],f=s.length,d=0;d<f;d++){var p=s[d].divide(.5);h.push(p[0],p[1])}for(var g=0,v=h.length,m=0;m<v;m++)g+=h[m].endpointDistance();if(l>=c&&(0!==g?(g-a)/g:0)<u)return h;s=h,a=g}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,o=0;o<i;o++)r+=n[o].endpointDistance();return r},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new J(n,r);return o.translate(i.x-n.x,i.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},i=this.length(r)*t;return this.tAtLength(i,r)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var r,i,o,s,a,u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:u}):e.subdivisions,l={precision:u,subdivisions:c},h=0,f=c.length,d=1/f,p=0;p<f;p++){var g=n?p:f-1-p,v=c[p],m=v.endpointDistance();if(t<=h+m){r=v,i=g*d,o=(g+1)*d,s=n?t-h:m+h-t,a=n?m+h-t:t-h;break}h+=m}if(!r)return n?1:0;for(var y=this.length(l),b=xt(10,-u);;){var x,w;if((0!==y?s/y:0)<b)return i;if((0!==y?a/y:0)<b)return o;var _=r.divide(.5);d/=2;var A=_[0].endpointDistance(),S=_[1].endpointDistance();s<=A?(r=_[0],o-=d,w=A-(x=s)):(r=_[1],i+=d,w=S-(x=s-A)),s=x,a=w}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,o=0;o<i;o++){var s=n[o];r.push(s.end.clone())}return r},toPolyline:function(t){return new gt(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},wt.prototype.divide=wt.prototype.divideAtT;const At=function(t){if(!(this instanceof At))return new At(t);if("string"==typeof t)return new At.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce((function(t,e){return t.concat(e)}),[])).length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof J||o instanceof wt))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(At.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(At.createSegment("M",o.start)),o instanceof J?this.appendSegment(At.createSegment("L",o.end)):o instanceof wt&&this.appendSegment(At.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof J)this.appendSegment(At.createSegment("M",t.start)),this.appendSegment(At.createSegment("L",t.end));else if(t instanceof wt)this.appendSegment(At.createSegment("M",t.start)),this.appendSegment(At.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof gt))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){var s=t.points[e];0===e?this.appendSegment(At.createSegment("M",s)):this.appendSegment(At.createSegment("L",s))}}};function St(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}At.parse=function(t){if(!t)return new At;for(var e=new At,n=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),r=n.length,i=0;i<r;i++){var o=n[i].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=At.createSegment.apply(this,o);e.appendSegment(s)}return e},At.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=At.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return St(e,n)},At.prototype={type:j.Path,appendSegment:function(t){var e,n=this.segments,r=n.length,i=0!==r?n[r-1]:null;if(Array.isArray(t)){if(!(t=t.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,s=0;s<o;s++){var a=t[s];e=this.prepareSegment(a,i,null),n.push(e),i=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,i,null),n.push(e)}},bbox:function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var r=0;r<n;r++){var i=e[r];if(i.isVisible){var o=i.bbox();t=t?t.union(o):o}}if(t)return t;var s=e[n-1];return new lt(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new At,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.closestPointT(t,r);return i?this.lengthAtT(i,r):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.closestPointLength(t,r);if(0===i)return 0;var o=this.length(r);return 0===o?0:i/o},closestPointT:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var i,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],l=s[u];if(c.isVisible){var h=c.closestPointT(t,{precision:o,subdivisions:l}),f=c.pointAtT(h),d=new J(f,t).squaredLength();d<a&&(i={segmentIndex:u,value:h},a=d)}}return i||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var i,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],l=s[u];if(c.isDifferentiable()){var h=c.closestPointT(t,{precision:o,subdivisions:l}),f=c.pointAtT(h),d=new J(f,t).squaredLength();d<a&&(i=c.tangentAtT(h),a=d)}}return i||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,o=0;o<r;o++)n[o].containsPoint(t)&&i++;return i%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.divideAtLength(i,r)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);var i,o,s,a,u,c,l,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,f=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,d=0;for(i=0;i<n;i++){var p=r?i:n-1-i;o=this.getSegment(p);var g=f[p],v=o.length({precision:h,subdivisions:g});if(o.isDifferentiable()&&(u=o,c=p,t<=d+v)){a=p,s=o.divideAtLength((r?1:-1)*(t-d),{precision:h,subdivisions:g});break}d+=v}if(!u)return null;s||(a=c,l=r?1:0,s=u.divideAtT(l));var m=this.clone();m.replaceSegment(a,s);var y=a,b=a+1,x=a+2;s[0].isDifferentiable()||(m.removeSegment(y),b-=1,x-=1);var w=m.getSegment(b).start;m.insertSegment(b,At.createSegment("M",w)),x+=1,s[1].isDifferentiable()||(m.removeSegment(x-1),x-=1);var _=x-y-1;for(i=x;i<m.segments.length;i++){var A=this.getSegment(i-_);if("Z"===(o=m.getSegment(i)).type&&!A.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var S=At.createSegment("L",A.end);m.replaceSegment(i,S)}}return[new At(m.segments.slice(0,b)),new At(m.segments.slice(b))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],s=n[i];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=[],o=0;o<n;o++){var s=e[o].getSubdivisions({precision:r});i.push(s)}return i},getSubpaths:function(){const t=this.clone().validate().segments,e=t.length,n=[];for(let r=0;r<e;r++){const e=t[r];e.isSubpathStart?n.push(new At(e)):n[n.length-1].appendSegment(e)}return n},insertSegment:function(t,e){var n,r=this.segments,i=r.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==i&&(s=t>=1?(o=r[t-1]).nextSegment:r[0]),Array.isArray(e)){if(!(e=e.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,u=0;u<a;u++){var c=e[u];n=this.prepareSegment(c,o,s),r.splice(t+u,0,n),o=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,o,s),r.splice(t,0,n)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,o=r.length;i<o;i++){var s=r[i],a=t.intersect(s);a&&(n||(n=[]),Array.isArray(a)?Array.prototype.push.apply(n,a):n.push(a))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++)if(t[n].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=0,s=0;s<n;s++){var a=e[s],u=i[s];o+=a.length({subdivisions:u})}return o},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(0===r)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=r?(i=r-1,o=1):o<0?o=0:o>1&&(o=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c=0,l=0;l<i;l++){var h=n[l];s=u[l],c+=h.length({precisison:a,subdivisions:s})}return h=n[i],s=u[i],c+h.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.pointAtLength(i,r)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;if(0===t)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=a[l],d=h.length({precision:s,subdivisions:f});if(h.isVisible){if(t<=u+d)return h.pointAtLength((i?1:-1)*(t-u),{precision:s,subdivisions:f});o=h}u+=d}return o?i?o.end:o.start:n[r-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,o=r.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n,r=this.segments,i=r.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),t>=i||t<0)throw new Error("Index out of range.");var o=r[t],s=o.previousSegment,a=o.nextSegment,u=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var c=e.length,l=0;l<c;l++){var h=e[l];n=this.prepareSegment(h,s,a),r.splice(t+l,0,n),s=n,u&&n.isSubpathStart&&(u=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,s,a),r.splice(t,1,n),u&&n.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.segmentIndexAtLength(i,r)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=s[l],d=h.length({precision:o,subdivisions:f});if(h.isVisible){if(t<=u+d)return l;a=l}u+=d}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.tangentAtLength(i,r)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=a[l],d=h.length({precision:s,subdivisions:f});if(h.isDifferentiable()){if(t<=u+d)return h.tangentAtLength((i?1:-1)*(t-u),{precision:s,subdivisions:f});o=h}u+=d}if(o){var p=i?1:0;return o.tangentAtT(p)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=[],s=[],a=0;a<n;a++){var u=e[a];if(u.isVisible){var c=i[a];if(c.length>0){var l=c.map((function(t){return t.start}));Array.prototype.push.apply(s,l)}else s.push(u.start)}else s.length>0&&(s.push(e[a-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new gt(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++)n+=t[r].serialize()+" ";return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,At.createSegment("M",0,0)),this}},Object.defineProperty(At.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(At.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});var Et={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Et,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Et,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Et,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var kt=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof kt))return St(kt,n);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof J){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new $(+n[0],+n[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=2)o=n.slice(i,i+2),t.push(St(kt,o));return t}if(1===r)return this.end=new $(n[0]),this;for(t=[],i=0;i<r;i+=1)e=n[i],t.push(new kt(e));return t},Tt={clone:function(){return new kt(this.end)},divideAt:function(t){var e=new J(this.start,this.end).divideAt(t);return[new kt(e[0]),new kt(e[1])]},divideAtLength:function(t){var e=new J(this.start,this.end).divideAtLength(t);return[new kt(e[0]),new kt(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Tt,"type",{configurable:!0,enumerable:!0,value:"L"}),kt.prototype=_t(Et,J.prototype,Tt);var Pt=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof Pt))return St(Pt,n);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(n[0]instanceof wt){if(1===r)return this.controlPoint1=n[0].controlPoint1.clone(),this.controlPoint2=n[0].controlPoint2.clone(),this.end=n[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(6===r)return this.controlPoint1=new $(+n[0],+n[1]),this.controlPoint2=new $(+n[2],+n[3]),this.end=new $(+n[4],+n[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=6)o=n.slice(i,i+6),t.push(St(Pt,o));return t}if(3===r)return this.controlPoint1=new $(n[0]),this.controlPoint2=new $(n[1]),this.end=new $(n[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],i=0;i<r;i+=3)e=n.slice(i,i+3),t.push(St(Pt,e));return t},Ct={clone:function(){return new Pt(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new wt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new Pt(n[0]),new Pt(n[1])]},divideAtLength:function(t,e){var n=new wt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new Pt(n[0]),new Pt(n[1])]},divideAtT:function(t){var e=new wt(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new Pt(e[0]),new Pt(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(Ct,"type",{configurable:!0,enumerable:!0,value:"C"}),Pt.prototype=_t(Et,wt.prototype,Ct);var Ot=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof Ot))return St(Ot,n);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof J){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(n[0]instanceof wt){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new $(+n[0],+n[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=2)o=n.slice(i,i+2),0===i?t.push(St(Ot,o)):t.push(St(kt,o));return t}if(1===r)return this.end=new $(n[0]),this;for(t=[],i=0;i<r;i+=1)e=n[i],0===i?t.push(new Ot(e)):t.push(new kt(e));return t},Mt={bbox:function(){return null},clone:function(){return new Ot(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Mt,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Mt,"type",{configurable:!0,enumerable:!0,value:"M"}),Ot.prototype=_t(Et,Mt);var Nt=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Nt))return St(Nt,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},Lt={clone:function(){return new Nt},divideAt:function(t){var e=new J(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new kt(e[0]):this.clone(),new kt(e[1])]},divideAtLength:function(t){var e=new J(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new kt(e[0]):this.clone(),new kt(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Lt,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Lt,"type",{configurable:!0,enumerable:!0,value:"Z"}),Nt.prototype=_t(Et,J.prototype,Lt);var It=At.segmentTypes={L:kt,C:Pt,M:Ot,Z:Nt,z:Nt};At.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(It).join("")+",.]*$"),At.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const jt={curveThroughPoints:function(t){return console.warn("deprecated"),new At(wt.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,n=[],r=[],i=t.length-1;if(1==i)return n[0]=new $((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new $(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,r];var o=[];for(e=1;e<i-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[i-1]=(8*t[i-1].x+t[i].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<i-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[i-1]=(8*t[i-1].y+t[i].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<i;e++)n.push(new $(s[e],a[e])),e<i-1?r.push(new $(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):r.push(new $((t[i].x+s[i-1])/2,(t[i].y+a[i-1])/2));return[n,r]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new wt(t,e,n,r);return function(t){var e=i.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new wt(t,e,n,r);return function(t){return i.closestPointT(t)}}},Bt=function(t){return this instanceof Bt?"string"==typeof t?new Bt.parse(t):void(this.points=Array.isArray(t)?t.map($):[]):new Bt(t)};function Rt(t,e,n,r){switch(t.type){case j.Line:if(e.type===j.Line)return Dt(t,e);break;case j.Ellipse:switch(e.type){case j.Line:return Ft(t,e);case j.Ellipse:return Vt(t,e)}break;case j.Rect:switch(e.type){case j.Line:return zt(t,e);case j.Ellipse:return Gt(t,e);case j.Rect:return Ut(t,e)}break;case j.Polyline:switch(e.type){case j.Line:return qt(t,e);case j.Ellipse:return Ht(t,e);case j.Rect:return $t(t,e);case j.Polyline:return Wt(t,e)}break;case j.Polygon:switch(e.type){case j.Line:return Xt(t,e);case j.Ellipse:return Yt(t,e);case j.Rect:return Jt(t,e);case j.Polyline:return Zt(t,e);case j.Polygon:return Kt(t,e)}break;case j.Path:switch(e.type){case j.Line:return Qt(t,e,n);case j.Ellipse:return te(t,e,n);case j.Rect:return ee(t,e,n);case j.Polyline:return ne(t,e,n);case j.Polygon:return re(t,e,n);case j.Path:return ie(t,e,n,r)}}switch(e.type){case j.Ellipse:case j.Rect:case j.Polyline:case j.Polygon:case j.Path:return Rt(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Dt(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,o=t.end.y,s=e.start.x,a=e.start.y,u=i-n,c=o-r,l=e.end.x-s,h=e.end.y-a,f=n-s,d=r-a,p=u*h-l*c,g=(u*d-c*f)/p,v=(l*d-h*f)/p;return g>=0&&g<=1&&v>=0&&v<=1}function Ft(t,e){const n=t.a,r=t.b,i=t.x,o=t.y,s=e.start.x-i,a=e.end.x-i,u=e.start.y-o,c=n*n,l=r*r,h=a-s,f=e.end.y-o-u,d=h*h/c+f*f/l,p=2*s*h/c+2*u*f/l,g=p*p-4*d*(s*s/c+u*u/l-1);if(0===g){const t=-p/2/d;return t>=0&&t<=1}if(g>0){const t=Math.sqrt(g),e=(-p+t)/2/d,n=(-p-t)/2/d;return e>=0&&e<=1||n>=0&&n<=1}return!1}function Vt(t,e){return function(t,e,n){const{cos:r,sin:i}=Math,o=i(0),s=r(0),a=i(0),u=r(0),c=o*o,l=s*s,h=o*s,f=a*a,d=u*u,p=a*u,g=t.a*t.a,v=t.b*t.b,m=n.a*n.a,y=n.b*n.b,b=g*c+v*l,x=m*f+y*d,w=g*l+v*c,_=m*d+y*f;let A=2*(v-g)*h,S=2*(y-m)*p,E=-2*b*t.x-A*t.y,k=-2*x*n.x-S*n.y,T=-A*t.x-2*w*t.y,P=-S*n.x-2*_*n.y;const C=b*t.x*t.x+w*t.y*t.y+A*t.x*t.y-g*v,O=x*n.x*n.x+_*n.y*n.y+S*n.x*n.y-m*y;A/=2,S/=2,E/=2,k/=2,T/=2,P/=2;const M=fe([[b,A,E],[A,w,T],[E,T,C]]),N=fe([[x,S,k],[S,_,P],[k,P,O]]),L=.33333333*(fe([[x,A,E],[S,w,T],[k,T,C]])+fe([[b,S,E],[A,_,T],[E,P,C]])+fe([[b,A,k],[A,w,P],[E,T,O]])),I=.33333333*(fe([[b,S,k],[A,_,P],[E,P,O]])+fe([[x,A,k],[S,w,P],[k,T,O]])+fe([[x,S,E],[S,_,T],[k,P,C]])),j=he([[M,L],[L,I]]),B=he([[M,I],[L,N]]),R=he([[L,I],[I,N]]);return!(he([[2*j,B],[B,2*R]])>0&&(I>0||L>0))}(t,0,e)}function zt(t,e){const{start:n,end:r}=e,{x:i,y:o,width:s,height:a}=t;return!(n.x>i+s&&r.x>i+s||n.x<i&&r.x<i||n.y>o+a&&r.y>o+a||n.y<o&&r.y<o)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||Dt(t.topLine(),e)||Dt(t.rightLine(),e)||Dt(t.bottomLine(),e)||Dt(t.leftLine(),e))}function Gt(t,e){return!!Ut(t,lt.fromEllipse(e))&&Yt(Bt.fromRect(t),e)}function Ut(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function qt(t,e){return oe(t,e,{interior:!1})}function Ht(t,e){return se(t,e,{interior:!1})}function $t(t,e){return ae(t,e,{interior:!1})}function Wt(t,e){return ce(t,e,{interior:!1})}function Xt(t,e){return oe(t,e,{interior:!0})}function Yt(t,e){return se(t,e,{interior:!0})}function Jt(t,e){return ae(t,e,{interior:!0})}function Zt(t,e){return ce(t,e,{interior:!0})}function Kt(t,e){return le(t,e,{interior:!0})}function Qt(t,e,n){return t.getSubpaths().some((t=>{const[r]=t.toPolylines(n),{type:i}=t.getSegment(-1);return"Z"===i?Xt(r,e):qt(r,e)}))}function te(t,e,n){return t.getSubpaths().some((t=>{const[r]=t.toPolylines(n),{type:i}=t.getSegment(-1);return"Z"===i?Yt(r,e):Ht(r,e)}))}function ee(t,e,n){return re(t,Bt.fromRect(e),n)}function ne(t,e,n){return ue(t,e,n,{interior:!1})}function re(t,e,n){return ue(t,e,n,{interior:!0})}function ie(t,e,n,r){return t.getSubpaths().some((t=>{const[i]=t.toPolylines(n),{type:o}=t.getSegment(-1);return"Z"===o?re(e,i,r):ne(e,i,r)}))}function oe(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:n,end:r,points:o}=t;i=r.equals(n)?o:[...o,n]}else i=t.points;const{length:o}=i,s=new J;for(let t=0;t<o-1;t++)if(s.start=i[t],s.end=i[t+1],Dt(e,s))return!0;return!1}function se(t,e,n={}){const{start:r,end:i,points:o}=t;if(e.containsPoint(r))return!0;let s;const{interior:a=!1}=n;if(a){if(t.containsPoint(e.center()))return!0;s=i.equals(r)?o:[...o,r]}else s=o;const{length:u}=s,c=new J;for(let t=0;t<u-1;t++)if(c.start=s[t],c.end=s[t+1],Ft(e,c))return!0;return!1}function ae(t,e,n){return le(t,Bt.fromRect(e),n)}function ue(t,e,n,r){return t.getSubpaths().some((t=>{const[i]=t.toPolylines(n),{type:o}=t.getSegment(-1);return"Z"===o?le(e,i,r):ce(e,i,r)}))}function ce(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:n}=e;if(t.containsPoint(n))return!0;i=t.clone().close()}else i=t;const o=e.points,{length:s}=o,a=new J;for(let t=0;t<s-1;t++)if(a.start=o[t],a.end=o[t+1],qt(i,a))return!0;return!1}function le(t,e,n){return e.containsPoint(t.start)||ce(t,e.clone().close(),n)}function he(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function fe(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}Bt.parse=function(t){return new Bt(ft(t))},Bt.fromRect=function(t){return new Bt([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},Bt.prototype=_t(gt.prototype,{type:j.Polygon,clone:function(){return new Bt(dt(this.points))},convexHull:function(){return new Bt(pt(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});const de=i,pe=function(){if("object"!=typeof window||!window.SVGAngle)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},e=Math,n=e.PI,r=e.atan2,i=e.sqrt,s=e.min,a=e.max,u=e.cos,c=e.sin,l=function(e,n,r){if(!(this instanceof l))return l.apply(Object.create(l.prototype),arguments);if(e){if(l.isV(e)&&(e=e.node),n=n||{},l.isString(e)){if("svg"===(e=e.trim()).toLowerCase())e=l.createSvgDocument();else if("<"===e[0]){var i=l.createSvgDocument(e);if(i.childNodes.length>1){var o,s,a=[];for(o=0,s=i.childNodes.length;o<s;o++){var u=i.childNodes[o];a.push(new l(document.importNode(u,!0)))}return a}e=document.importNode(i.firstChild,!0)}else e=document.createElementNS(t.svg,e);l.ensureId(e)}return this.node=e,this.setAttributes(n),r&&this.append(r),this}},h=l.prototype;function f(t,e,n){n||(n={});for(var r=n.includeAnnotationIndices,i=n.eol,o=n.lineHeight,s=n.baseSize,a=0,u={},c=e.length-1,h=0;h<=c;h++){var f=e[h],d=null;if(l.isObject(f)){var p=f.attrs,g=l("tspan",p),v=g.node,m=f.t;i&&h===c&&(m+=i),v.textContent=m;var y=p.class;y&&g.addClass(y),r&&g.attr("annotations",f.annotations),d=parseFloat(p["font-size"]),isFinite(d)||(d=s),d&&d>a&&(a=d)}else i&&h===c&&(f+=i),v=document.createTextNode(f||" "),s&&s>a&&(a=s);t.appendChild(v)}return a&&(u.maxFontSize=a),o?u.lineHeight=o:a&&(u.lineHeight=1.2*a),u}Object.defineProperty(h,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),h.getTransformToElement=function(t){var e=this.node;if(l.isSVGGraphicsElement(t)&&l.isSVGGraphicsElement(e)){var n=l.toNode(t).getScreenCTM(),r=e.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return l.createSVGMatrix()},h.transform=function(t,e){var n=this.node;if(l.isUndefined(t))return l.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",l.matrixToTransformString(t));var r=l.createSVGTransform(t);return n.transform.baseVal.appendItem(r),this},h.translate=function(t,e,n){n=n||{},e=e||0;var r=this.attr("transform")||"",i=l.parseTransformString(r);if(r=i.value,l.isUndefined(t))return i.translate;r=r.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(n.absolute?t:i.translate.tx+t)+","+(n.absolute?e:i.translate.ty+e)+")";return this.attr("transform",(o+" "+r).trim()),this},h.rotate=function(t,e,n,r){r=r||{};var i=this.attr("transform")||"",o=l.parseTransformString(i);if(i=o.value,l.isUndefined(t))return o.rotate;i=i.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(r.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==n?","+e+","+n:"")+")";return this.attr("transform",(i+" "+s).trim()),this},h.scale=function(t,e){e=l.isUndefined(e)?t:e;var n=this.attr("transform")||"",r=l.parseTransformString(n);if(n=r.value,l.isUndefined(t))return r.scale;n=n.replace(/scale\([^)]*\)/g,"").trim();var i="scale("+t+","+e+")";return this.attr("transform",(n+" "+i).trim()),this},h.bbox=function(t,e){var n,r=this.node,i=r.ownerSVGElement;if(!i)return new lt(0,0,0,0);try{n=r.getBBox()}catch(t){n={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(t)return new lt(n);var o=this.getTransformToElement(e||i);return l.transformRect(n,o)},h.getBBox=function(t){var e,n={},r=this.node;if(!r.ownerSVGElement||!l.isSVGGraphicsElement(r))return new lt(0,0,0,0);if(t&&(t.target&&(n.target=l.toNode(t.target)),t.recursive&&(n.recursive=t.recursive)),n.recursive){var i=this.children(),o=i.length;if(0===o)return this.getBBox({target:n.target,recursive:!1});n.target||(n.target=this);for(var s=0;s<o;s++){var a,u=i[s];a=0===u.children().length?u.getBBox({target:n.target,recursive:!1}):u.getBBox({target:n.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=r.getBBox()}catch(t){e={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(n.target){var c=this.getTransformToElement(n.target);return l.transformRect(e,c)}return new lt(e)};var d=/em$/;function p(t,e){var n=parseFloat(t);return d.test(t)?n*e:n}h.text=function(e,n){if(e&&"string"!=typeof e)throw new Error("Vectorizer: text() expects the first argument to be a string.");e=l.sanitizeText(e),n||(n={});var r=n.displayEmpty,i=n.eol,o=n.textPath,s=n.textVerticalAnchor,a="middle"===s||"bottom"===s||"top"===s,u=n.x;void 0===u&&(u=this.attr("x")||0);var c=n.includeAnnotationIndices,h=n.annotations;h&&!l.isArray(h)&&(h=[h]);var g=n.lineHeight,v="auto"===g,m=v?"1.5em":g||"1em";this.empty(),this.attr({"xml:space":"preserve",display:e||r?null:"none"});var y=parseFloat(this.attr("font-size"));y||(y=16,(a||h)&&this.attr("font-size",y));var b,x=document;o?("string"==typeof o&&(o={d:o}),b=function(t,e){t||(t={});var n=l("textPath"),r=t.d;if(r&&void 0===t["xlink:href"]){var i=l("path").attr("d",r).appendTo(e.defs());n.attr("xlink:href","#"+i.id)}return l.isObject(t)&&n.attr(t),n.node}(o,this)):b=x.createDocumentFragment();for(var w,_=0,A=e.split("\n"),S=[],E=0,k=A.length-1;E<=k;E++){var T,P=m,C="v-line",O=x.createElementNS(t.svg,"tspan"),M=A[E];if(M)if(h){var N=l.annotateString(M,h,{offset:-_,includeAnnotationIndices:c}),L=(T=f(O,N,{includeAnnotationIndices:c,eol:E!==k&&i,lineHeight:v?null:m,baseSize:y})).lineHeight;L&&v&&0!==E&&(P=L),0===E&&(w=.8*T.maxFontSize)}else i&&E!==k&&(M+=i),O.textContent=M;else{O.textContent="-",C+=" v-empty-line";var I=O.style;if(I.fillOpacity=0,I.strokeOpacity=0,h){T={};let t=y;for(let e=(N=l.findAnnotationsAtIndex(h,_)).length;e>0;e--){const n=N[e-1].attrs;if(!n||!("font-size"in n))continue;const r=parseFloat(n["font-size"]);if(isFinite(r)){t=r;break}}v&&(E>0?P=1.2*t:w=.8*t),O.setAttribute("font-size",t),T.maxFontSize=t}}T&&S.push(T),E>0&&O.setAttribute("dy",P),(E>0||o)&&O.setAttribute("x",u),O.className.baseVal=C,b.appendChild(O),_+=M.length+1}if(a)if(h)P=function(t,e,n,r){if(!Array.isArray(e))return 0;var i=e.length;if(!i)return 0;for(var o=e[0],s=p(o.maxFontSize,n)||n,a=0,u=p(r,n),c=1;c<i;c++)a+=p((o=e[c]).lineHeight,n)||u;var l,h=p(o.maxFontSize,n)||n;switch(t){case"middle":l=s/2-.15*h-a/2;break;case"bottom":l=-.25*h-a;break;default:l=.8*s}return l}(s,S,y,m);else if("top"===s)P="0.8em";else{var j;switch(k>0?(j=parseFloat(m)||1,j*=k,d.test(m)||(j/=y)):j=0,s){case"middle":P=.3-j/2+"em";break;case"bottom":P=-j-.3+"em"}}else 0===s?P="0em":s?P=s:(P=0,null===this.attr("y")&&this.attr("y",w||"0.8em"));return b.firstChild.setAttribute("dy",P),this.append(b),this},h.removeAttr=function(t){const e=y[t],{ns:n,local:r}=l.qualifyAttr(e),i=this.node;return n?i.hasAttributeNS(n,r)&&i.removeAttributeNS(n,r):i.hasAttribute(e)&&i.removeAttribute(e),this},h.attr=function(t,e){if(l.isUndefined(t)){for(var n=this.node.attributes,r={},i=0;i<n.length;i++)r[n[i].name]=n[i].value;return r}if(l.isString(t)&&l.isUndefined(e))return this.node.getAttribute(y[t]);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},h.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",l.normalizePathData(this.attr("d"))),this},h.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},h.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},h.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},h.append=function(t){l.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.node.appendChild(l.toNode(t[e]));return this},h.prepend=function(t){var e=this.node.firstChild;return e?l(e).before(t):this.append(t)},h.before=function(t){var e=this.node,n=e.parentNode;if(n){l.isArray(t)||(t=[t]);for(var r=0,i=t.length;r<i;r++)n.insertBefore(l.toNode(t[r]),e)}return this},h.appendTo=function(t){return l.toNode(t).appendChild(this.node),this},h.svg=function(){return this.node instanceof window.SVGSVGElement?this:l(this.node.ownerSVGElement)},h.tagName=function(){return this.node.tagName.toUpperCase()},h.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?l(e):l("defs").appendTo(t)},h.clone=function(){var t=l(this.node.cloneNode(!0));return t.node.id=l.uniqueId(),t},h.findOne=function(t){var e=this.node.querySelector(t);return e?l(e):void 0},h.find=function(t){var e=[],n=this.node.querySelectorAll(t);if(n)for(var r=0;r<n.length;r++)e.push(l(n[r]));return e},h.children=function(){for(var t=this.node.childNodes,e=[],n=0;n<t.length;n++)1===t[n].nodeType&&e.push(l(t[n]));return e},h.parent=function(){return l(this.node.parentNode)||null},h.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},h.findParentByClass=function(t,e){for(var n=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==e&&r!==n;){var i=l(r);if(i.hasClass(t))return i;r=r.parentNode}return null},h.contains=function(t){var e=this.node,n=l.toNode(t),r=n&&n.parentNode;return e===r||!!(r&&1===r.nodeType&&16&e.compareDocumentPosition(r))},h.toLocalPoint=function(t,e){var n=this.svg().node,r=n.createSVGPoint();r.x=t,r.y=e;try{var i=r.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(t){return r}return i.matrixTransform(o)},h.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},h.translateAndAutoOrient=function(t,e,n){t=new $(t),e=new $(e),n||(n=this.svg());var r=this.scale();this.attr("transform","");var i=this.getBBox({target:n}).scale(r.sx,r.sy),o=l.createSVGTransform();o.setTranslate(-i.x-i.width/2,-i.y-i.height/2);var s=l.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var u=l.createSVGTransform(),c=t.clone().move(e,i.width/2);u.setTranslate(2*t.x-c.x,2*t.y-c.y);var h=this.getTransformToElement(n),f=l.createSVGTransform();return f.setMatrix(u.matrix.multiply(s.matrix.multiply(o.matrix.multiply(h.scale(r.sx,r.sy))))),this.attr("transform",l.matrixToTransformString(f.matrix)),this},h.animateAlongPath=function(t,e){e=l.toNode(e);var n=l.ensureId(e),r=l("animateMotion",t),i=l("mpath",{"xlink:href":"#"+n});r.append(i),this.append(r);try{r.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=r.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),u=0,c=a.length;u<c;u++){var h=a[u],f=new Animator(o,h,u);animators.push(f),o.animators[u]=f,f.register()}}}return this};const g=/[^\x20\t\r\n\f]+/g;function v(t){return l.isString(t)&&t.trim().match(g)||[]}h.hasClass=function(t){return!!l.isString(t)&&this.node.classList.contains(t.trim())},h.addClass=function(t){return this.node.classList.add(...v(t)),this},h.removeClass=function(t){return this.node.classList.remove(...v(t)),this},h.toggleClass=function(t,e){const n=v(t);for(let t=0;t<n.length;t++)this.node.classList.toggle(n[t],e);return this},h.sample=function(t){t=t||1;for(var e,n=this.node,r=n.getTotalLength(),i=[],o=0;o<r;)e=n.getPointAtLength(o),i.push({x:e.x,y:e.y,distance:o}),o+=t;return i},h.convertToPath=function(){var t=l("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},h.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return l.convertLineToPathData(this.node);case"POLYGON":return l.convertPolygonToPathData(this.node);case"POLYLINE":return l.convertPolylineToPathData(this.node);case"ELLIPSE":return l.convertEllipseToPathData(this.node);case"CIRCLE":return l.convertCircleToPathData(this.node);case"RECT":return l.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},l.prototype.toGeometryShape=function(){var t,e,n,r,i,o,s,a,u,c,h,f,d,p,g;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,n=parseFloat(this.attr("width"))||0,r=parseFloat(this.attr("height"))||0,new lt(t,e,n,r);case"CIRCLE":return i=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new et({x:i,y:o},s,s);case"ELLIPSE":return i=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,u=parseFloat(this.attr("ry"))||0,new et({x:i,y:o},a,u);case"POLYLINE":return c=l.getPointsFromSvgNode(this),new gt(c);case"POLYGON":return(c=l.getPointsFromSvgNode(this)).length>1&&c.push(c[0]),new gt(c);case"PATH":return h=this.attr("d"),At.isDataSupported(h)||(h=l.normalizePathData(h)),new At(h);case"LINE":return f=parseFloat(this.attr("x1"))||0,p=parseFloat(this.attr("y1"))||0,d=parseFloat(this.attr("x2"))||0,g=parseFloat(this.attr("y2"))||0,new J({x:f,y:p},{x:d,y:g})}return this.getBBox()},h.findIntersection=function(t,e){var n=this.svg().node;e=e||n;var r=this.getBBox({target:e}),i=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var o,s=this.tagName();if("RECT"===s){var a=new lt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),u=this.getTransformToElement(e),c=l.decomposeMatrix(u),h=n.createSVGTransform();h.setRotate(-c.rotation,i.x,i.y);var f=l.transformRect(a,h.matrix.multiply(u));o=new lt(f).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var d,p,g,v,m,y=("PATH"===s?this:this.convertToPath()).sample(),b=1/0,x=[];for(d=0;d<y.length;d++)p=y[d],g=(g=l.createSVGPoint(p.x,p.y)).matrixTransform(this.getTransformToElement(e)),(m=(p=new $(g)).distance(i)+(v=1.1*p.distance(t)))<b?(b=m,x=[{sample:p,refDistance:v}]):m<b+1&&x.push({sample:p,refDistance:v});x.sort((function(t,e){return t.refDistance-e.refDistance})),x[0]&&(o=x[0].sample)}return o}},h.setAttribute=function(t,e){const n=this.node;if(null===e)return this.removeAttr(t),this;const r=y[t],{ns:i}=l.qualifyAttr(r);return i?n.setAttributeNS(i,r,e):"id"===r?n.id=e:n.setAttribute(r,e),this},l.createSvgDocument=function(e){if(e){const n=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="1.1">${e}</svg>`,{documentElement:r}=l.parseXML(n,{async:!1});return r}const n=document.createElementNS(t.svg,"svg");return n.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),n.setAttribute("version","1.1"),n},l.createSVGStyle=function(t){const{node:e}=l("style",{type:"text/css"},[l.createCDATASection(t)]);return e},l.createCDATASection=function(t=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(t)},l.idCounter=0,l.uniqueId=function(){return"v-"+ ++l.idCounter},l.toNode=function(t){return l.isV(t)?t.node:t.nodeName&&t||t[0]},l.ensureId=function(t){return(t=l.toNode(t)).id||(t.id=l.uniqueId())},l.sanitizeText=function(t){return(t||"").replace(/ /g," ")},l.isUndefined=function(t){return void 0===t},l.isString=function(t){return"string"==typeof t},l.isObject=function(t){return t&&"object"==typeof t},l.isArray=Array.isArray,l.parseXML=function(t,e){var n;e=e||{};try{var r=new DOMParser;l.isUndefined(e.async)||(r.async=e.async),n=r.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n};const m=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach((t=>m[t]=t));const y=new Proxy(m,{get:(t,e)=>l.supportCamelCaseAttributes?e in t?t[e]:t[e]=e.replace(/[A-Z]/g,"-$&").toLowerCase():e});Object.defineProperty(l,"attributeNames",{value:y,writable:!1}),Object.defineProperty(l,"supportCamelCaseAttributes",{value:!1,writable:!0}),l.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var n=e.split(":");return{ns:t[n[0]],local:n[1]}}return{ns:null,local:e}},l.transformSeparatorRegex=/[ ,]+/,l.transformRegex=/\b\w+\([^()]+\)/g,l.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,l.transformTranslateRegex=/\btranslate\(([^()]+)\)/,l.transformRotateRegex=/\brotate\(([^()]+)\)/,l.transformScaleRegex=/\bscale\(([^()]+)\)/,l.transformStringToMatrix=function(t){let e=l.createSVGMatrix();const n=t&&t.match(l.transformRegex);if(!n)return e;const r=n.length;for(let t=0;t<r;t++){const r=n[t].match(l.transformFunctionRegex);if(r){let t,n,i,o,s,a=l.createSVGMatrix();const u=r[1].toLowerCase(),c=r[2].split(l.transformSeparatorRegex);switch(u){case"scale":t=parseFloat(c[0]),n=void 0===c[1]?t:parseFloat(c[1]),a=a.scaleNonUniform(t,n);break;case"translate":i=parseFloat(c[0]),o=parseFloat(c[1]),a=a.translate(i,o);break;case"rotate":s=parseFloat(c[0]),i=parseFloat(c[1])||0,o=parseFloat(c[2])||0,a=0!==i||0!==o?a.translate(i,o).rotate(s).translate(-i,-o):a.rotate(s);break;case"skewx":s=parseFloat(c[0]),a=a.skewX(s);break;case"skewy":s=parseFloat(c[0]),a=a.skewY(s);break;case"matrix":a.a=parseFloat(c[0]),a.b=parseFloat(c[1]),a.c=parseFloat(c[2]),a.d=parseFloat(c[3]),a.e=parseFloat(c[4]),a.f=parseFloat(c[5]);break;default:continue}e=e.multiply(a)}}return e},l.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},l.parseTransformString=function(t){var e,n,r;if(t){var i=l.transformSeparatorRegex;if(t.trim().indexOf("matrix")>=0){var o=l.transformStringToMatrix(t),s=l.decomposeMatrix(o);e=[s.translateX,s.translateY],r=[s.scaleX,s.scaleY],n=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===r[0]&&1===r[1]||a.push("scale("+r+")"),0!==n[0]&&a.push("rotate("+n+")"),t=a.join(" ")}else{const o=t.match(l.transformTranslateRegex);o&&(e=o[1].split(i));const s=t.match(l.transformRotateRegex);s&&(n=s[1].split(i));const a=t.match(l.transformScaleRegex);a&&(r=a[1].split(i))}}var u=r&&r[0]?parseFloat(r[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:u,sy:r&&r[1]?parseFloat(r[1]):u}}},l.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},l.decomposeMatrix=function(t){var e=l.deltaTransformPoint(t,{x:0,y:1}),o=l.deltaTransformPoint(t,{x:1,y:0}),s=180/n*r(e.y,e.x)-90,a=180/n*r(o.y,o.x);return{translateX:t.e,translateY:t.f,scaleX:i(t.a*t.a+t.b*t.b),scaleY:i(t.c*t.c+t.d*t.d),skewX:s,skewY:a,rotation:s}},l.matrixToScale=function(t){var e,n,r,o;return t?(e=l.isUndefined(t.a)?1:t.a,o=l.isUndefined(t.d)?1:t.d,n=t.b,r=t.c):e=o=1,{sx:n?i(e*e+n*n):e,sy:r?i(r*r+o*o):o}},l.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=l.deltaTransformPoint(t,e)),{angle:S(k(r(e.y,e.x))-90)}},l.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},l.isV=function(t){return t instanceof l},l.isVElement=l.isV,l.isSVGGraphicsElement=function(t){return!!t&&(t=l.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM};var b=l("svg").node;return l.createSVGMatrix=function(t){var e=b.createSVGMatrix();for(var n in t)e[n]=t[n];return e},l.createSVGTransform=function(t){return l.isUndefined(t)?b.createSVGTransform():(t instanceof SVGMatrix||(t=l.createSVGMatrix(t)),b.createSVGTransformFromMatrix(t))},l.createSVGPoint=function(t,e){var n=b.createSVGPoint();return n.x=t,n.y=e,n},l.transformRect=function(t,e){var n=b.createSVGPoint();n.x=t.x,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var o=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var u=n.matrixTransform(e),c=s(r.x,i.x,o.x,u.x),l=a(r.x,i.x,o.x,u.x),h=s(r.y,i.y,o.y,u.y),f=a(r.y,i.y,o.y,u.y);return new lt(c,h,l-c,f-h)},l.transformPoint=function(t,e){return new $(l.createSVGPoint(t.x,t.y).matrixTransform(e))},l.transformLine=function(t,e){return new J(l.transformPoint(t.start,e),l.transformPoint(t.end,e))},l.transformPolyline=function(t,e){var n=t instanceof gt?t.points:t;l.isArray(n)||(n=[]);for(var r=[],i=0,o=n.length;i<o;i++)r[i]=l.transformPoint(n[i],e);return new gt(r)},l.styleToObject=function(t){for(var e={},n=t.split(";"),r=0;r<n.length;r++){var i=n[r].split("=");e[i[0].trim()]=i[1].trim()}return e},l.createSlicePathData=function(t,e,r,i){var o=2*n-1e-6,s=t,a=e,l=r,h=i,f=(h<l&&(f=l,l=h,h=f),h-l),d=f<n?"0":"1",p=u(l),g=c(l),v=u(h),m=c(h);return f>=o?s?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":s?"M"+a*p+","+a*g+"A"+a+","+a+" 0 "+d+",1 "+a*v+","+a*m+"L"+s*v+","+s*m+"A"+s+","+s+" 0 "+d+",0 "+s*p+","+s*g+"Z":"M"+a*p+","+a*g+"A"+a+","+a+" 0 "+d+",1 "+a*v+","+a*m+"L0,0Z"},l.mergeAttrs=function(t,e){for(var n in e)"class"===n?t[n]=t[n]?t[n]+" "+e[n]:e[n]:"style"===n?l.isObject(t[n])&&l.isObject(e[n])?t[n]=l.mergeAttrs(t[n],e[n]):l.isObject(t[n])?t[n]=l.mergeAttrs(t[n],l.styleToObject(e[n])):l.isObject(e[n])?t[n]=l.mergeAttrs(l.styleToObject(t[n]),e[n]):t[n]=l.mergeAttrs(l.styleToObject(t[n]),l.styleToObject(e[n])):t[n]=e[n];return t},l.annotateString=function(t,e,n){e=e||[];for(var r,i,o,s=(n=n||{}).offset||0,a=[],u=[],c=0;c<t.length;c++){i=u[c]=t[c];for(var h=0;h<e.length;h++){var f=e[h],d=f.start+s,p=f.end+s;c>=d&&c<p&&(l.isObject(i)?i.attrs=l.mergeAttrs(l.mergeAttrs({},i.attrs),f.attrs):i=u[c]={t:t[c],attrs:f.attrs},n.includeAnnotationIndices&&(i.annotations||(i.annotations=[])).push(h))}(o=u[c-1])?l.isObject(i)&&l.isObject(o)?JSON.stringify(i.attrs)===JSON.stringify(o.attrs)?r.t+=i.t:(a.push(r),r=i):l.isObject(i)||l.isObject(o)?(a.push(r),r=i):r=(r||"")+i:r=i}return r&&a.push(r),a},l.findAnnotationsAtIndex=function(t,e){var n=[];return t&&t.forEach((function(t){t.start<e&&e<=t.end&&n.push(t)})),n},l.findAnnotationsBetweenIndexes=function(t,e,n){var r=[];return t&&t.forEach((function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&r.push(t)})),r},l.shiftAnnotations=function(t,e,n){return t&&t.forEach((function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)})),t},l.convertLineToPathData=function(t){return["M",(t=l(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},l.convertPolygonToPathData=function(t){var e=l.getPointsFromSvgNode(t);return 0===e.length?null:l.svgPointsToPath(e)+" Z"},l.convertPolylineToPathData=function(t){var e=l.getPointsFromSvgNode(t);return 0===e.length?null:l.svgPointsToPath(e)},l.svgPointsToPath=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},l.getPointsFromSvgNode=function(t){var e=[],n=(t=l.toNode(t)).points;if(n)for(var r=0,i=n.numberOfItems;r<i;r++)e.push(n.getItem(r));return e},l.KAPPA=.551784,l.convertCircleToPathData=function(t){t=l(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),i=r*l.KAPPA;return["M",e,n-r,"C",e+i,n-r,e+r,n-i,e+r,n,"C",e+r,n+i,e+i,n+r,e,n+r,"C",e-i,n+r,e-r,n+i,e-r,n,"C",e-r,n-i,e-i,n-r,e,n-r,"Z"].join(" ")},l.convertEllipseToPathData=function(t){t=l(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),i=parseFloat(t.attr("ry"))||r,o=r*l.KAPPA,s=i*l.KAPPA;return["M",e,n-i,"C",e+o,n-i,e+r,n-s,e+r,n,"C",e+r,n+s,e+o,n+i,e,n+i,"C",e-o,n+i,e-r,n+s,e-r,n,"C",e-r,n-s,e-o,n-i,e,n-i,"Z"].join(" ")},l.convertRectToPathData=function(t){return t=l(t),l.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},l.rectToPath=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=s(t.rx||t["top-rx"]||0,r/2),a=s(t.rx||t["bottom-rx"]||0,r/2),u=s(t.ry||t["top-ry"]||0,i/2),c=s(t.ry||t["bottom-ry"]||0,i/2);return(o||a||u||c?["M",e,n+u,"v",i-u-c,"a",a,c,0,0,0,a,c,"h",r-2*a,"a",a,c,0,0,0,a,-c,"v",-(i-c-u),"a",o,u,0,0,0,-o,-u,"h",-(r-2*o),"a",o,u,0,0,0,-o,u,"Z"]:["M",e,n,"H",e+r,"V",n+i,"H",e,"V",n,"Z"]).join(" ")},l.normalizePathData=function(){var t="\t\n\v\f\r   ᠎             　\u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),r=Math,i=r.PI,o=r.sin,s=r.cos,a=r.tan,u=r.asin,c=r.sqrt,l=r.abs;function h(t,e,n,r,i,o){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*r,s*i+a*n,s*o+a*r,i,o]}function f(t,e,n){return{x:t*s(n)-e*o(n),y:t*o(n)+e*s(n)}}function d(t,e,n,r,h,p,g,v,m,y){var b,x=120*i/180,w=i/180*(+h||0),_=[];if(y)M=y[0],N=y[1],C=y[2],O=y[3];else{t=(b=f(t,e,-w)).x,e=b.y;var A=(t-(v=(b=f(v,m,-w)).x))/2,S=(e-(m=b.y))/2,E=A*A/(n*n)+S*S/(r*r);E>1&&(n*=E=c(E),r*=E);var k=n*n,T=r*r,P=(p==g?-1:1)*c(l((k*T-k*S*S-T*A*A)/(k*S*S+T*A*A))),C=P*n*S/r+(t+v)/2,O=P*-r*A/n+(e+m)/2,M=u(((e-O)/r).toFixed(9)),N=u(((m-O)/r).toFixed(9));(M=t<C?i-M:M)<0&&(M=2*i+M),(N=v<C?i-N:N)<0&&(N=2*i+N),g&&M>N&&(M-=2*i),!g&&N>M&&(N-=2*i)}var L=N-M;if(l(L)>x){var I=N,j=v,B=m;_=d(v=C+n*s(N=M+x*(g&&N>M?1:-1)),m=O+r*o(N),n,r,h,0,g,j,B,[N,I,C,O])}L=N-M;var R=s(M),D=o(M),F=s(N),V=o(N),z=a(L/4),G=4/3*(n*z),U=4/3*(r*z),q=[t,e],H=[t+G*D,e-U*R],$=[v+G*V,m-U*F],W=[v,m];if(H[0]=2*q[0]-H[0],H[1]=2*q[1]-H[1],y)return[H,$,W].concat(_);for(var X=[],Y=(_=[H,$,W].concat(_).join().split(",")).length,J=0;J<Y;J++)X[J]=J%2?f(_[J-1],_[J],w).y:f(_[J],_[J+1],w).x;return X}function p(t){var r=function(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return String(t).replace(e,(function(t,e,o){var s=[],a=e.toLowerCase();for(o.replace(n,(function(t,e){e&&s.push(+e)})),"m"===a&&s.length>2&&(i.push([e].concat(s.splice(0,2))),a="l",e="m"===e?"l":"L");s.length>=r[a]&&(i.push([e].concat(s.splice(0,r[a]))),r[a]););})),i}(t)),!t||!t.length)return[["M",0,0]];for(var r,i=[],o=0,s=0,a=0,u=0,c=t.length,l=0;l<c;l++){var h=[];i.push(h);var f,d,p=t[l];if((r=p[0])!=r.toUpperCase())switch(h[0]=r.toUpperCase(),h[0]){case"A":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+o,h[7]=+p[7]+s;break;case"V":h[1]=+p[1]+s;break;case"H":h[1]=+p[1]+o;break;case"M":for(a=+p[1]+o,u=+p[2]+s,f=p.length,d=1;d<f;d++)h[d]=+p[d]+(d%2?o:s);break;default:for(f=p.length,d=1;d<f;d++)h[d]=+p[d]+(d%2?o:s)}else for(var g=p.length,v=0;v<g;v++)h[v]=p[v];switch(h[0]){case"Z":o=+a,s=+u;break;case"H":o=h[1];break;case"V":s=h[1];break;case"M":a=h[h.length-2],u=h[h.length-1],o=h[h.length-2],s=h[h.length-1];break;default:o=h[h.length-2],s=h[h.length-1]}}return i}(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function o(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(d.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(h(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(h(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function s(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)a[e]="A",t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),l=r.length}}for(var a=[],u="",c="",l=r.length,f=0;f<l;f++){r[f]&&(u=r[f][0]),"C"!==u&&(a[f]=u,f>0&&(c=a[f-1])),r[f]=o(r[f],i,c),"A"!==a[f]&&"C"===u&&(a[f]="C"),s(r,f);var p=r[f],g=p.length;i.x=p[g-2],i.y=p[g-1],i.bx=parseFloat(p[g-4])||i.x,i.by=parseFloat(p[g-3])||i.y}return r[0][0]&&"M"===r[0][0]||r.unshift(["M",0,0]),r}return function(t){return p(t).join(",").split(",").join(" ")}}(),l.namespace=t,l.g=o,l}(),ge=pe,ve="[object Arguments]",me="[object Array]",ye="[object Boolean]",be="[object Date]",xe="[object Error]",we="[object Function]",_e="[object Map]",Ae="[object Number]",Se="[object Object]",Ee="[object RegExp]",ke="[object Set]",Te="[object String]",Pe="[object Symbol]",Ce="[object WeakMap]",Oe="[object ArrayBuffer]",Me="[object DataView]",Ne="[object Float32Array]",Le="[object Float64Array]",Ie="[object Int8Array]",je="[object Int16Array]",Be="[object Int32Array]",Re="[object Uint8Array]",De="[object Uint8ClampedArray]",Fe="[object Uint16Array]",Ve="[object Uint32Array]",ze={[ve]:!0,[me]:!0,[Oe]:!0,[Me]:!0,[ye]:!0,[be]:!0,[Ne]:!0,[Le]:!0,[Ie]:!0,[je]:!0,[Be]:!0,[_e]:!0,[Ae]:!0,[Se]:!0,[Ee]:!0,[ke]:!0,[Te]:!0,[Pe]:!0,[Re]:!0,[De]:!0,[Fe]:!0,[Ve]:!0,[xe]:!1,[we]:!1,[Ce]:!1},Ge="\\ud800-\\udfff",Ue="\\u2700-\\u27bf",qe="a-z\\xdf-\\xf6\\xf8-\\xff",He="A-Z\\xc0-\\xd6\\xd8-\\xde",$e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",We="['’]",Xe=`[${$e}]`,Ye="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",Je=`[${Ue}]`,Ze=`[${qe}]`,Ke=`[^${Ge}${$e+"\\d"+Ue+qe+He}]`,Qe="\\ud83c[\\udffb-\\udfff]",tn=`[^${Ge}]`,en="(?:\\ud83c[\\udde6-\\uddff]){2}",nn="[\\ud800-\\udbff][\\udc00-\\udfff]",rn=`[${He}]`,on=`(?:${Ze}|${Ke})`,sn=`(?:${rn}|${Ke})`,an=`(?:${We}(?:d|ll|m|re|s|t|ve))?`,un=`(?:${We}(?:D|LL|M|RE|S|T|VE))?`,cn=`(?:${Ye}|${Qe})?`,ln="[\\ufe0e\\ufe0f]?",hn=ln+cn+`(?:\\u200d(?:${[tn,en,nn].join("|")})${ln+cn})*`,fn=`(?:${[Je,en,nn].join("|")})${hn}`,dn=RegExp([`${rn}?${Ze}+${an}(?=${[Xe,rn,"$"].join("|")})`,`${sn}+${un}(?=${[Xe,rn+on,"$"].join("|")})`,`${rn}?${on}+${an}`,`${rn}+${un}`,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",fn].join("|"),"g"),pn="__hash_undefined__",gn=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,vn=`(?:${[`${tn}${Ye}?`,Ye,en,nn,`[${Ge}]`].join("|")})`,mn=RegExp(`${Qe}(?=${Qe})|${vn+hn}`,"g"),yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bn=/^\w*$/,xn=".".charCodeAt(0),wn=/\\(\\)?/g,_n=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),An=/^(?:0|[1-9]\d*)$/,Sn=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),En=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kn=t=>mn.test(t),Tn=t=>kn(t)?(t=>t.match(mn)||[])(t):(t=>t.split(""))(t),Pn=t=>null==t?[]:Cn(t).map((e=>t[e])),Cn=t=>Dn(t)?On(t):Object.keys(Object(t)),On=(t,e)=>{const n=Array.isArray(t),r=!n&&Ln(t)&&zn(t)===ve,i=!n&&!r&&$n(t),o=n||r||i,s=t.length,a=new Array(o?s:0);let u=o?-1:s;for(;++u<s;)a[u]=`${u}`;for(const n in t)!e&&!hasOwnProperty.call(t,n)||o&&("length"===n||vr(n,s))||a.push(n);return a},Mn=(t,e)=>{let{length:n}=t;for(;n--;)if(Nn(t[n][0],e))return n;return-1},Nn=(t,e)=>t===e||t!=t&&e!=e,Ln=t=>null!=t&&"object"==typeof t,In=(t,e,n)=>{if(!Wr(n))return!1;const r=typeof e;return!!("number"==r?Dn(n)&&e>-1&&e<n.length:"string"==r&&e in n)&&Nn(n[e],t)},jn=t=>{const e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Object.prototype)},Bn=(t,e,n)=>{const r=t[e];hasOwnProperty.call(t,e)&&Nn(r,n)&&(void 0!==n||e in t)||(t[e]=n)},Rn=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const i=e[r];Bn(n,i,t[i])}return n},Dn=t=>null!=t&&"function"!=typeof t&&"number"==typeof t.length&&t.length>-1&&t.length%1==0,Fn=t=>"symbol"==typeof t||Ln(t)&&zn(t)===Pe,Vn=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},zn=t=>null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t),Gn=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},Un=(t,e)=>{const n=e?Gn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},qn=t=>"function"!=typeof t.constructor||jn(t)?{}:Object.create(Object.getPrototypeOf(t)),Hn=t=>null==t?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter((e=>propertyIsEnumerable.call(t,e)))),$n=t=>Ln(t)&&gn.test(zn(t)),Wn=t=>{const e=Object.keys(t);return Array.isArray(t)||null==t||e.push(...Hn(Object(t))),e},Xn=t=>{const e=[];for(;t;)e.push(...Hn(t)),t=Object.getPrototypeOf(Object(t));return e},Yn=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...Xn(t)),e},Jn=({__data__:t},e)=>{const n=t;return yr(e)?n["string"==typeof e?"string":"hash"]:n.map},Zn=(t,e,n)=>t===e||(null==t||null==e||!Ln(t)&&!Ln(e)?t!=t&&e!=e:Kn(t,e,Zn,n)),Kn=(t,e,n,r)=>{let i=Array.isArray(t);const o=Array.isArray(e);let s=i?me:zn(t),a=o?me:zn(e);s=s==ve?Se:s,a=a==ve?Se:a;let u=s==Se;const c=a==Se,l=s==a;if(l&&!u)return r||(r=new Gr),i||$n(t)?Qn(t,e,!1,n,r):rr(t,e,s,n,r);const h=u&&hasOwnProperty.call(t,"__wrapped__"),f=c&&hasOwnProperty.call(e,"__wrapped__");if(h||f){const i=h?t.value():t,o=f?e.value():e;return r||(r=new Gr),n(i,o,r)}return!!l&&(r||(r=new Gr),((t,e,n,r)=>{const i=Wn(t),o=i.length;if(o!=Wn(e).length)return!1;let s,a=o;for(;a--;)if(s=i[a],!hasOwnProperty.call(e,s))return!1;const u=r.get(t),c=r.get(e);if(u&&c)return u==e&&c==t;let l,h=!0;for(r.set(t,e),r.set(e,t);++a<o;){s=i[a];const o=t[s],u=e[s];if(o!==u&&!n(o,u,r)){h=!1;break}l||(l="constructor"==s)}if(h&&!l){const n=t.constructor,r=e.constructor;n==r||!("constructor"in t)||!("constructor"in e)||"function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r||(h=!1)}return r.delete(t),r.delete(e),h})(t,e,n,r))},Qn=(t,e,n,r,i)=>{const o=t.length;if(o!=e.length)return!1;const s=i.get(t),a=i.get(e);if(s&&a)return s==e&&a==t;let u=-1,c=!0;const l=n?new $r:void 0;for(i.set(t,e),i.set(e,t);++u<o;){let n;const o=t[u],s=e[u];if(void 0!==n){if(n)continue;c=!1;break}if(l){if(!tr(e,((t,e)=>{if(!er(l,e)&&(o===t||r(o,t,i)))return l.push(e)}))){c=!1;break}}else if(o!==s&&!r(o,s,i)){c=!1;break}}return i.delete(t),i.delete(e),c},tr=(t,e)=>{let n=-1;const r=null==t?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},er=(t,e)=>t.has(e),nr=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),rr=(t,e,n,r,i)=>{switch(n){case Me:return t.byteLength==e.byteLength&&t.byteOffset==e.byteOffset&&(t=t.buffer,e=e.buffer,nr(t,e,r,i));case Oe:return nr(t,e,r,i);case ye:case be:case Ae:return Nn(+t,+e);case xe:return t.name==e.name&&t.message==e.message;case Ee:case Te:return t==`${e}`;case _e:let n=ir;case ke:if(n||(n=or),t.size!=e.size)return!1;const o=i.get(t);if(o)return o==e;i.set(t,e);const s=Qn(n(t),n(e),!0,r,i);return i.delete(t),s;case Pe:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},ir=t=>{let e=-1,n=Array(t.size);return t.forEach(((t,r)=>{n[++e]=[r,t]})),n},or=t=>{let e=-1;const n=new Array(t.size);return t.forEach((t=>{n[++e]=t})),n},sr=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return!("number"!==n&&"boolean"!==n&&null!=t&&!Fn(t))||bn.test(t)||!yn.test(t)||null!=e&&t in Object(e)},ar=(t,e)=>Array.isArray(t)?t:sr(t,e)?[t]:(t=>{const e=[];return t.charCodeAt(0)===xn&&e.push(""),t.replace(_n,((t,n,r,i)=>{let o=t;r?o=i.replace(wn,"$1"):n&&(o=n.trim()),e.push(o)})),e})(`${t}`),ur=(t,e)=>{let n=0;const r=(e=ar(e,t)).length;for(;null!=t&&n<r;)t=t[hr(e[n])],n++;return n&&n==r?t:void 0};function cr(t,e){if(t!==e){const n=void 0!==t,r=null===t,i=t==t,o=Fn(t),s=void 0!==e,a=null===e,u=e==e,c=Fn(e);if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}const lr=(t,e)=>{let n=(t,e)=>!(null==t||!t.length)&&t.indexOf(e)>-1,r=!0;const i=[],o=e.length;if(!t.length)return i;e.length>=200&&(n=(t,e)=>t.has(e),r=!1,e=new $r(e));t:for(let s in t){let a=t[s];const u=a;if(a=0!==a?a:0,r&&u==u){let t=o;for(;t--;)if(e[t]===u)continue t;i.push(a)}else n(e,u)||i.push(a)}return i},hr=t=>{if("string"==typeof t||Fn(t))return t;const e=`${t}`;return"0"==e&&1/t==-1/0?"-0":e},fr=(t,e=!1,n=!1,r=!0,i,o,s,a)=>{let u;if(i&&(u=s?i(t,o,s,a):i(t)),void 0!==u)return u;if(!Wr(t))return t;const c=Array.isArray(t),l=zn(t);if(c){if(u=(t=>{const e=t.length;let n=new t.constructor(e);return e&&"string"==typeof t[0]&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n})(t),!e)return Vn(t,u)}else{const r="function"==typeof t;if(l===Se||l===ve||r&&!s){if(u=n||r?{}:qn(t),!e)return n?dr(t,Rn(t,Object.keys(t),u)):((t,e)=>Rn(t,Hn(t),e))(t,Object.assign(u,t))}else{if(r||!ze[l])return s?t:{};u=((t,e,n)=>{const r=t.constructor;switch(e){case Oe:return Gn(t);case ye:case be:return new r(+t);case Me:return function(t,e){const n=e?Gn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case Ne:case Le:case Ie:case je:case Be:case Re:case De:case Fe:case Ve:return Un(t,n);case _e:case Ae:case Te:return new r(t);case Ee:return(t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e})(t);case ke:return new r;case Pe:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}})(t,l,e)}}a||(a=new Gr);const h=a.get(t);if(h)return h;if(a.set(t,u),(t=>Ln(t)&&zn(t)==_e)(t))return t.forEach(((o,s)=>{u.set(s,fr(o,e,n,r,i,s,t,a))})),u;if((t=>Ln(t)&&zn(t)==ke)(t))return t.forEach((o=>{u.add(fr(o,e,n,r,i,o,t,a))})),u;if($n(t))return u;const f=c?void 0:(r?n?Yn:Wn:n?br:Cn)(t);return(f||t).forEach(((o,s)=>{f&&(o=t[s=o]),Bn(u,s,fr(o,e,n,r,i,s,t,a))})),u},dr=(t,e)=>Rn(t,Xn(t),e),pr=(t,e)=>e.length<2?t:ur(t,e.slice(0,-1)),gr=(t,e,n)=>{if(!Wr(t))return t;const r=(e=ar(e,t)).length,i=r-1;let o=-1,s=t;for(;null!=s&&++o<r;){const t=hr(e[o]);let r=n;if(o!=i){const n=s[t];r=void 0,void 0===r&&(r=Wr(n)?n:vr(e[o+1])?[]:{})}Bn(s,t,r),s=s[t]}return t},vr=(t,e)=>{const n=typeof t;return!!(e=null==e?Number.MAX_SAFE_INTEGER:e)&&("number"===n||"symbol"!==n&&An.test(t))&&t>-1&&t%1==0&&t<e},mr=(t,e)=>{e=ar(e,t),t=pr(t,e);const n=e[e.length-1];return null==t||delete t[hr(n)]},yr=t=>{const e=typeof t;return"string"===e||"number"===e||"symbol"===e||"boolean"===e?"__proto__"!==t:null===t},br=t=>{const e=[];for(const n in t)e.push(n);return e},xr=(t,e)=>{if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};function wr(t,e=!1){return(n,...r)=>{let i=-1,o=r.length,s=o>1?r[o-1]:void 0;const a=o>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):e?(t,e)=>{if(Array.isArray(t)&&!Array.isArray(e))return e}:void 0,a&&In(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),n=Object(n);++i<o;){const e=r[i];e&&t(n,e,i,s)}return n}}const _r=(t,e,n,r,i)=>{t!==e&&bi(e,((o,s)=>{if(Wr(o))i||(i=new Gr),Ar(t,e,s,n,_r,r,i);else{let n=r?r(t[s],o,`${s}`,t,e,i):void 0;void 0===n&&(n=o),Sr(t,s,n)}}),br)},Ar=(t,e,n,r,i,o,s)=>{const a=xr(t,n),u=xr(e,n),c=s.get(u);if(c)return void Sr(t,n,c);let l=o?o(a,u,`${n}`,t,e,s):void 0,h=void 0===l;if(h){const t=Array.isArray(u),e=!t&&$n(u);l=u,t||e?Array.isArray(a)?l=a:Ln(a)&&Dn(a)?l=Vn(a):e?(h=!1,l=Un(u,!0)):l=[]:ui(u)||Dr(u)?(l=a,Dr(a)?l=(t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e})(a):"function"!=typeof a&&Wr(a)||(l=qn(u))):h=!1}h&&(s.set(u,l),i(l,u,r,o,s),s.delete(u)),Sr(t,n,l)},Sr=(t,e,n)=>{(void 0!==n&&!Nn(t[e],n)||void 0===n&&!(e in t))&&Bn(t,e,n)},Er=(t,e)=>{if(null==t)return t;if(!Dn(t))return((t,e)=>t&&function(t,e,n){const r=Object(t),i=n(t);let{length:o}=i,s=-1;for(;o--;){const t=i[++s];if(!1===e(r[t],t,r))break}return t}(t,e,Cn))(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&!1!==e(r[i],i,r););return t},kr=Set&&1/or(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function Tr(t,e,n,r,i,o){return Wr(t)&&Wr(e)&&(o.set(e,t),_r(t,e,void 0,Tr,o),o.delete(e)),t}function Pr(t,e,n){e=e.length?e.map((t=>Array.isArray(t)?e=>ur(e,1===t.length?t[0]:t):t)):[t=>t];let r=-1,i=-1;const o=Dn(t)?new Array(t.length):[];return Er(t,(t=>{const n=e.map((e=>e(t)));o[++i]={criteria:n,index:++r,value:t}})),function(t){let{length:e}=t;for(t.sort(((t,e)=>function(t,e,n){let r=-1;const i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){const t=r<a?n[r]:null,e=(t&&"function"==typeof t?t:cr)(i[r],o[r]);if(e)return t&&"function"!=typeof t?e*("desc"==t?-1:1):e}return t.index-e.index}(t,e,n)));e--;)t[e]=t[e].value;return t}(o)}function Cr(t){return t==t&&!Wr(t)}function Or(t,e){return n=>null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}function Mr(t,e){return null!=t&&Vr(t,e,Fr)}function Nr(t){return"function"==typeof t?t:null==t?t=>t:"object"==typeof t?Array.isArray(t)?(e=t[0],n=t[1],sr(e)&&Cr(n)?Or(hr(e),n):t=>{const r=ur(t,e);return void 0===r&&r===n?Mr(t,e):Zn(n,r)}):function(t){const e=function(t){const e=Cn(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,Cr(i)]}return e}(t);return 1===e.length&&e[0][2]?Or(e[0][0],e[0][1]):n=>n===t||function(t,e,n){let r=n.length;const i=r;if(null==t)return!i;let o,s;for(t=Object(t);r--;)if(o=n[r],o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1;for(;++r<i;){o=n[r];const e=o[0],i=t[e],a=o[1];if(o[2]){if(void 0===i&&!(e in t))return!1}else{const t=new Gr;if(!(void 0===s?Zn(a,i,t):s))return!1}}return!0}(n,0,e)}(t):function(t){return sr(t)?(e=hr(t),t=>null==t?void 0:t[e]):function(t){return e=>ur(e,t)}(t);var e}(t);var e,n}function Lr(){const t=Nr;return arguments.length?t(arguments[0],arguments[1]):t}const Ir=(t,e,n,r)=>{let i=-1;const o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},jr=(t,e,n,r,i)=>(i(t,((t,i,o)=>{n=r?(r=!1,t):e(n,t,i,o)})),n),Br=t=>Array.isArray(t)||Dr(t)||!(!t||!t[Symbol.isConcatSpreadable]);function Rr(t,e,n,r,i){let o=-1;const s=t.length;for(n||(n=Br),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Rr(a,e-1,n,r,i):i.push(...a):r||(i[i.length]=a)}return i}const Dr=t=>Ln(t)&&"[object Arguments]"==zn(t),Fr=(t,e)=>null!=t&&e in Object(t),Vr=(t,e,n)=>{for(var r,i=-1,o=(e=ar(e,t)).length,s=!1;++i<o;){var a=hr(e[i]);if(!(s=null!=t&&n(t,a)))break;t=t[a]}return s||++i!=o?s:!!(o=null==t?0:t.length)&&"number"==typeof(r=o)&&r>-1&&r%1==0&&r<=Number.MAX_SAFE_INTEGER&&vr(a,o)&&(Array.isArray(t)||Dr(t))},zr=t=>{if(!t)return"";const e=kn(t)?Tn(t):void 0,n=e?e[0]:t[0],r=e?((t,e,n)=>{const{length:r}=t;return n=void 0===n?r:n,t.slice(1,n)})(e).join(""):t.slice(1);return n.toUpperCase()+r};class Gr{constructor(t){const e=this.__data__=new Ur(t);this.size=e.size}clear(){this.__data__=new Ur,this.size=0}delete(t){const e=this.__data__,n=e.delete(t);return this.size=e.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,e){let n=this.__data__;if(n instanceof Ur){const r=n.__data__;if(r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qr(r)}return n.set(t,e),this.size=n.size,this}}class Ur{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.clear();++e<n;){const n=t[e];this.set(n[0],n[1])}}clear(){this.__data__=[],this.size=0}delete(t){const e=this.__data__,n=Mn(e,t);return!(n<0)&&(n==e.length-1?e.pop():e.splice(n,1),--this.size,!0)}get(t){const e=this.__data__,n=Mn(e,t);return n<0?void 0:e[n][1]}has(t){return Mn(this.__data__,t)>-1}set(t,e){const n=this.__data__,r=Mn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}}class qr{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.clear();++e<n;){const n=t[e];this.set(n[0],n[1])}}clear(){this.size=0,this.__data__={hash:new Hr,map:new Map,string:new Hr}}delete(t){const e=Jn(this,t).delete(t);return this.size-=e?1:0,e}get(t){return Jn(this,t).get(t)}has(t){return Jn(this,t).has(t)}set(t,e){const n=Jn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}}class Hr{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.clear();++e<n;){const n=t[e];this.set(n[0],n[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}get(t){const e=this.__data__[t];return e===pn?void 0:e}has(t){return void 0!==this.__data__[t]}set(t,e){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=void 0===e?pn:e,this}}class $r{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.__data__=new qr;++e<n;)this.add(t[e])}add(t){return this.__data__.set(t,pn),this}has(t){return this.__data__.has(t)}}$r.prototype.push=$r.prototype.add;const Wr=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},Xr=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&e.call(t)===Ae},Yr=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&e.call(t)===Te},Jr=wr(((t,e)=>{if(jn(e)||Dn(e))Rn(e,Cn(e),t);else for(var n in e)hasOwnProperty.call(e,n)&&Bn(t,n,e[n])})),Zr=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&In(e[0],e[1],i)&&(r=1);++n<r;){const r=e[n];if(null==r)continue;const i=Object.keys(r),o=i.length;let s=-1;for(;++s<o;){const e=i[s],n=t[e];(void 0===n||Nn(n,Object.prototype[e])&&!hasOwnProperty.call(t,e))&&(t[e]=r[e])}}return t},Kr=function(...t){return t.push(void 0,Tr),wi.apply(void 0,t)},Qr=(t,e,...n)=>{let r=-1;const i="function"==typeof e,o=Dn(t)?new Array(t.length):[];return Er(t,(t=>{o[++r]=i?e.apply(t,n):ti(t,e,...n)})),o},ti=(t,e,...n)=>{e=ar(e,t);const r=null==(t=pr(t,e))?t:t[hr(function(t){const e=null==t?0:t.length;return e?t[e-1]:void 0}(e))];return null==r?void 0:r.apply(t,n)},ei=(t,e,n)=>{let r=0,i=null==t?0:t.length;if(0==i)return 0;const o=(e=(n=Lr(n,2))(e))!=e,s=null===e,a=Fn(e),u=void 0===e;for(;r<i;){let c;const l=Math.floor((r+i)/2),h=n(t[l]),f=void 0!==h,d=null===h,p=h==h,g=Fn(h);c=o?p:u?p&&f:s?p&&f&&!d:a?p&&f&&!d&&!g:!d&&!g&&h<e,c?r=l+1:i=l}return Math.min(i,4294967294)},ni=(t,e)=>{let n=-1,r=(t,e)=>!(null==t||!t.length)&&t.indexOf(e)>-1;e=Lr(e,2);let i=!0;const{length:o}=t,s=[];let a=s;if(o>=200){const n=e?null:kr(t);if(n)return or(n);i=!1,r=(t,e)=>t.has(e),a=new $r}else a=e?[]:s;t:for(;++n<o;){let o=t[n];const u=e?e(o):o;if(o=0!==o?o:0,i&&u==u){let t=a.length;for(;t--;)if(a[t]===u)continue t;e&&a.push(u),s.push(o)}else r(a,u)||(a!==s&&a.push(u),s.push(o))}return s},ri=t=>fr(t),ii=t=>fr(t,!0),oi=t=>{if(null==t)return!0;if(Dn(t)&&(Array.isArray(t)||"string"==typeof t||"function"==typeof t.splice||$n(t)||Dr(t)))return!t.length;const e=zn(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(jn(t))return!(t=>{if(!jn(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&"constructor"!=n&&e.push(n);return e})(t).length;for(const e in t)if(hasOwnProperty.call(t,e))return!1;return!0},si=(t,e)=>Zn(t,e),ai=t=>"function"==typeof t,ui=t=>{if(!Ln(t)||"[object Object]"!=zn(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ci=t=>{if(!t)return[];if(Dn(t))return Yr(t)?Tn(t):Vn(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const e=t[Symbol.iterator]();let n;const r=[];for(;!(n=e.next()).done;)r.push(n.value);return r}const e=zn(t);return(e==_e?ir:e==ke?or:Pn)(t)},li=(t,e=[])=>{if(null==t)return[];const n=e.length;return n>1&&In(t,e[0],e[1])?e=[]:n>2&&In(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[Lr(e,2)]),Pr(t,e.flat(1),[])},hi=t=>null!=t&&t.length?Rr(t,1/0):[],fi=(t,...e)=>Dn(t)?lr(t,e):[],di=(t,...e)=>Ln(t)&&Dn(t)?lr(t,e.flat(1)):[],pi=(...t)=>{const e=t.flat(1);return ni(e)},gi=(t,e)=>{if(null==t)return!1;"string"==typeof e&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},vi=(t,e,n)=>{let r=-1,i=(e=ar(e,t)).length;for(i||(i=1,t=void 0);++r<i;){let o=null==t?void 0:t[hr(e[r])];void 0===o&&(r=i,o=n),t="function"==typeof o?o.call(t):o}return t},mi=(t,...e)=>{let n={};if(null==t)return n;let r=!1;e=e.flat(1).map((e=>(e=ar(e,t),r||(r=e.length>1),e))),Rn(t,Yn(t),n),r&&(n=fr(n,!0,!0,!0,(t=>ui(t)?void 0:t)));let i=e.length;for(;i--;)mr(n,e[i]);return n},yi=(t,...e)=>null==t?{}:((t,e)=>((t,e,n)=>{let r=-1;const i=e.length,o={};for(;++r<i;){const i=e[r],s=ur(t,i);n(s,i)&&gr(o,ar(i,t),s)}return o})(t,e,((e,n)=>Mr(t,n))))(t,e.flat(1/0)),bi=(t,e=t=>t)=>{let n=-1;const r=Object(t),i=Dn(t)?On(t,!0):br(t);let o=i.length;for(;o--;){const t=i[++n];if(!1===e(r[t],t,r))break}};let xi=0;const wi=wr(((t,e,n,r)=>{_r(t,e,n,r)}),!0);var _i=n(26198);const Ai={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},Si=function(t){return t?t.toString().split(" ").map((function(t){return t.substr(0,Ai.classNamePrefix.length)!==Ai.classNamePrefix&&(t=Ai.classNamePrefix+t),t})).join(" "):t},Ei=function(t){return t?t.toString().split(" ").map((function(t){return t.substr(0,Ai.classNamePrefix.length)===Ai.classNamePrefix&&(t=t.substr(Ai.classNamePrefix.length)),t})).join(" "):t},ki=function(t,e){const n={},r={},i=ge.namespace.svg,o=e||i,s=document.createDocumentFragment(),a=function(t,e,o){for(let s=0;s<t.length;s++){const u=t[s];if("string"==typeof u){const t=document.createTextNode(u);e.appendChild(t);continue}if(!u.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const c=u.tagName;let l;u.hasOwnProperty("namespaceURI")&&(o=u.namespaceURI),l=document.createElementNS(o,c);const h=o===i,f=h?ge:_i,d=u.attributes;d&&f(l).attr(d);const p=u.style;if(p&&_i(l).css(p),u.hasOwnProperty("className")){const t=u.className;h?l.className.baseVal=t:l.className=t}if(u.hasOwnProperty("textContent")&&(l.textContent=u.textContent),u.hasOwnProperty("selector")){const t=u.selector;if(n[t])throw new Error("json-dom-parser: selector must be unique");n[t]=l,f(l).attr("joint-selector",t)}if(u.hasOwnProperty("groupSelector")){let t=u.groupSelector;Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){const n=t[e];let i=r[n];i||(i=r[n]=[]),i.push(l)}}e.appendChild(l);const g=u.children;Array.isArray(g)&&a(g,l,o)}};return a(t,s,o),{fragment:s,selectors:n,groupSelectors:r}},Ti=function(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e},Pi=function(t,e,n){for(var r,i=Array.isArray(e)?e:e.split(n||"/"),o=0,s=i.length;o<s;){if(r=i[o++],Object(t)!==t||!(r in t))return;t=t[r]}return t},Ci=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!==e},Oi=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),o=i.length-1;let s=t,a=0;for(;a<o;a++){const e=i[a];if(!Ci(s,e))return t;s=s[e]||(s[e]={})}return s[i[o]]=n,t},Mi=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),i=r.length-1;let o=t,s=0;for(;s<i;s++){const e=r[s];if(!Ci(o,e))return t;const n=o[e];if(!n)return t;o=n}return delete o[r[i]],t},Ni=function(t){return Ni.id=Ni.id||1,void 0===t?"j_"+Ni.id++:(t.id=void 0===t.id?"j_"+Ni.id++:t.id,t.id)},Li=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let e in r)void 0===t[e]&&(t[e]=r[e]);if(n){const e=n.correspondingUseElement;e&&(t.target=e)}return t.normalized=!0,t},Ii=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=setTimeout((function(){t(n+r)}),r);return e=n+r,i}}return function(e,n,...r){return t(void 0!==n?e.bind(n,...r):e)}}(),ji=((Ri="undefined"!=typeof window)&&(Bi=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),Bi=Bi||clearTimeout,Ri?Bi.bind(window):Bi);var Bi,Ri;const Di=function(t){return Yr(t)&&"%"===t.slice(-1)},Fi=function(t,e){var n=parseFloat(t);if(Number.isNaN(n))return null;var r,i={};if(i.value=n,null==e)r="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;r=e.join("|")}else Yr(e)&&(r=e);var o=function(e){var n=new RegExp("(?:\\d+(?:\\.\\d+)*)("+e+")$").exec(t);return n?n[1]:null}(r);return null===o?null:(i.unit=o,i)};function Vi(t,e){const n=t.split(e);let r=1;for(let t=0,i=n.length-1;t<i;t++){const o=[];(t>0||""!==n[0])&&o.push(0),o.push(e),(t<i-1||""!==n[i])&&o.push(0),n.splice(r,0,...o),r+=o.length+1}return n.filter((t=>""!==t))}function zi(t,e){if(null===t)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const Gi=function(t,e,n={},r={}){var i=e.width,o=e.height,s=r.svgDocument||ge("svg").node,a=ge("tspan").node,u=ge("text").attr(n).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(u),r.svgDocument||document.body.appendChild(s);const l=r.preserveSpaces,h=r.separator||""===r.separator?r.separator:" ",f="string"==typeof h?h:" ";var d=r.eol||"\n",p=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,g=r.maxLineCount;Xr(g)||(g=1/0);var v,m,y,b=t.split(h),x=[],w=[];l&&ge(a).attr("xml:space","preserve");for(var _=0,A=0,S=b.length;_<S;_++){var E=b[_];if((E||l)&&"string"==typeof E){var k=!1;if(d&&E.indexOf(d)>=0){if(E.length>1){const t=Vi(b[_],d);b.splice(_,1,...t),_--,S=b.length;continue}if(l&&"string"==typeof b[_-1]){b.splice(_,0,"",0),S+=2,_--;continue}w[++A]=l&&"string"!=typeof b[_+1]?void 0:"",k=!0}if(!k){let t;if(t=l?void 0!==w[A]?w[A]+f+E:E:w[A]?w[A]+f+E:E,c.data=t,a.getComputedTextLength()<=i)w[A]=t,(v||m)&&(x[A++]=!0,v=0,m=0);else{if(!w[A]||v){var T=!!v;if(v=E.length-1,T||!v){if(!v){if(!w[A]){w=[];break}b.splice(_,2,E+b[_+1]),S--,x[A++]=!0,_--;continue}b[_]=E.substring(0,v);const t=b[_+1];b[_+1]=E.substring(v)+(void 0===t||0===t?"":t)}else{if(m)b.splice(_,2,b[_]+b[_+1]),m=0;else{var P=E.search(p);P>-1&&P!==E.length-1&&0!==P&&(m=P+1,v=0),b.splice(_,1,E.substring(0,m||v),E.substring(m||v)),S++}A&&!x[A-1]&&A--}l&&""===w[A]||_--;continue}A++,_--}}var C=null;if(w.length>g?C=g-1:void 0!==o&&(void 0===y&&""!==c.data&&(y="auto"===n.lineHeight?zi({value:1.5,unit:"em"},u):zi(Fi(n.lineHeight,["em","px",""]),u)),y*w.length>o&&(C=Math.floor(o/y)-1)),null!==C){w.splice(C+1);var O=r.ellipsis;if(!O||C<0)break;"string"!=typeof O&&(O="…");var M=w[C];if(!M&&!k)break;var N,L,I=M.length;do{if(L=M[I],N=M.substring(0,I),L?L.match(h)&&(N+=L):N+=f,N+=O,c.data=N,a.getComputedTextLength()<=i){w[C]=N;break}I--}while(I>=0);break}}}return r.svgDocument?s.removeChild(u):document.body.removeChild(s),w.join(d)},Ui=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,o;return n=r=i=o=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=o=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:n,right:r,bottom:i,left:o}},qi={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Hi={number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var n=Object.keys(t);return function(r){var i,o,s={};for(i=n.length-1;-1!=i;i--)s[o=n[i]]=t[o]+(e[o]-t[o])*r;return s}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=255&n,o=(255&r)-i,s=65280&n,a=(65280&r)-s,u=16711680&n,c=(16711680&r)-u;return function(t){return"#"+(1<<24|i+o*t&255|s+a*t&65280|u+c*t&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i[1].indexOf("."),s=o>0?i[1].length-o-1:0;t=+r[1];var a=+i[1]-t,u=r[2];return function(e){return(t+a*e).toFixed(s)+u}}},$i={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return Wi('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return Wi('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Wi('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Wi(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wi('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wi('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wi('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Wi('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wi('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Wi('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wi('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Wi=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,(function(t){for(var e=Array.from(arguments).slice(1,4).find((function(t){return!!t})).split("."),r=n[e.shift()];void 0!==r&&e.length;)r=r[e.shift()];return void 0!==r?r:""}))}},Xi=function(){};var Yi=n(21391);const Ji={},Zi=Yi.View.extend({options:{},theme:null,themeClassNamePrefix:Si("theme-"),requireSetThemeOverride:!1,defaultTheme:Ai.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Jr({},this.options,t),Yi.View.call(this,t)},initialize:function(){Ji[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return null!==this.el.parentNode},renderChildren:function(t){if(t||(t=vi(this,"children")),t){var e=this.svgElement,n=ge.namespace[e?"svg":"xhtml"],r=ki(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&1===n.nodeType;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(vi(this,"el"));else{var t=vi(this,"tagName"),e=Jr({},vi(this,"attributes")),n=Jr({},vi(this,"style"));this.id&&(e.id=vi(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(ge.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Yi.$?t:Yi.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=ge(this.el))},_ensureElClassName:function(){var t=vi(this,"className");if(t){var e=Si(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ji[this.cid]=null,Yi.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var o=e[i];"function"!=typeof o&&(o=this[o]),o&&_i(t).on(i+r,n,o.bind(this))}return this},undelegateElementEvents:function(t){return _i(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=vi(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return void 0===e?n&&n[r]||{}:(n||(n=t.data={}),n[r]||(n[r]={}),Jr(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Jr({},t[0])||{},n=t[1]&&Jr({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Yi.View.extend.call(this,e,n)}}),Ki="dbltap";if(_i.event&&!(Ki in _i.event.special)){const t=Ai.doubleTapInterval,e=30;_i.event.special[Ki]={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:o}=n,s=_i.data(o),a=(new Date).getTime(),u="lastTouch"in s?a-s.lastTouch:0;u<t&&u>e?(s.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):s.lastTouch=a}}}function Qi(t){return t?Array.isArray(t)?t:[t]:[]}const to=Zi.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let n;if("string"==typeof e)[n]=t.findBySelector(e);else if(ui(e)){const r=t.model.isLink(),{label:i=null,port:o,selector:s}=e;r&&null!==i?n=t.findLabelNode(i,s):!r&&o?n=t.findPortNode(o,s):[n]=t.findBySelector(s)}else e&&(n=ge.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,o=t.getNodeMatrix(e);return i?r?i.contains(e)?o:t.getRootRotateMatrix().inverse().multiply(o):t.getNodeRotateMatrix(e).multiply(o):o},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:o,postponedUpdate:s,nodeSelector:a}=this;if(!t||i)return;if(s)return this.update(e,a),void this.transform();const{vel:u,paper:c}=e,{layer:l}=r;if(l){let t;o?(t=o,this.detachedTransformGroup=null):t=ge("g").addClass("highlight-transform").append(n),this.transformGroup=t,c.getLayerView(l).insertSortedNode(t.node,r.z)}else n.parentNode&&!n.nextSibling||u.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=r.multiply(i);t.attr("transform",ge.matrixToTransformString(o))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=vi(this,"UPDATE_ATTRIBUTES");Array.isArray(e)&&0!==e.length&&this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;vi(this,"UPDATE_ATTRIBUTES").some((t=>e.hasChanged(t)))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(null===e){const t=[];if(!i)return t;for(let e in i){const n=i[e];n instanceof this&&t.push(n)}return t}if(!i)return null;if(e in i){const t=i[e];if(t instanceof this)return t}return null},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=to.get(t,n);i&&i.remove();const o=new this(r);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o.listenToUpdateAttributes(t),o},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let o=i[r];o||(o=i[r]={}),o[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let t in i)return;delete r[n]}},remove(t,e=null){Qi(this.get(t,e)).forEach((t=>{t.remove()}))},removeAll(t,e=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const o=n[r][i];o.cellView.paper===t&&o instanceof this&&(null===e||i===e)&&o.remove()}},update(t,e=null,n=!1){Qi(this.get(t,e)).forEach((t=>{(n||t.UPDATABLE)&&t.update()}))},transform(t,e=null){Qi(this.get(t,e)).forEach((t=>{t.UPDATABLE&&t.transform()}))},unmount(t,e=null){Qi(this.get(t,e)).forEach((t=>t.unmount()))},mount(t,e=null){Qi(this.get(t,e)).forEach((t=>t.mount()))},uniqueId:(t,e="")=>ge.ensureId(t)+JSON.stringify(e)}),eo={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},no=Zi.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach((function(e,n,r){t.push("type-"+r.slice(0,n+1).join("-"))})),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,n,r={},i={},o=0,s=vi(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];for(Array.isArray(u)||(u=[u]),t=0,e=u.length;t<e;t++){var c=r[n=u[t]];c||(c=r[n]=1<<o++),i[a]|=c}}var l=vi(this,"initFlag");for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++)r[n=l[t]]||(r[n]=1<<o++);if(o>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=r,this._presentationAttributes=i},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Ni(this),Zi.call(this,t)},initialize:function(){this.setFlags(),Zi.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);!e.updateHandled&&n&&(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=ki(t),r=n.selectors,i=n.groupSelectors;for(var o in i){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=i[o]}if(e){var s=this.selector;if(r[s])throw new Error("dia.CellView: ambiguous root selector.");r[s]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e,n,r=ai(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Wr(r)&&!1!==r[t]||(e=r,n=Object.prototype.toString,(!0===e||!1===e||!!e&&"object"==typeof e&&n.call(e)===ye)&&!1!==r)},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||"."===t)return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return Ai.useCSSSelectors?_i(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return ge.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():ge.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return ge.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return ge.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=ge.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if([i=r]="string"==typeof e?this.findBySelector(e):this.$(e),n.partial=i!==r,void 0===n.type){let t;switch(!0){case n.embedding:t=eo.EMBEDDING;break;case n.connecting:t=eo.CONNECTING;break;case n.magnetAvailability:t=eo.MAGNET_AVAILABILITY;break;case n.elementAvailability:t=eo.ELEMENT_AVAILABILITY;break;default:t=eo.DEFAULT}n.type=t}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const t=n.getAttribute("magnet"),r=n===e;if((t||r)&&"false"!==t)return n;if(r)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[t]=this.findBySelector(n);if(t)return t}return t},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n="> "+e),n;if(t){var r=ge(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,o=r.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),s={id:r};return null!=o&&(s.magnet=o),null!=i?(s.port=i,n.hasPort(i)||o||(s.selector=this.getSelector(t))):null==o&&this.el!==t&&(s.selector=this.getSelector(t)),this.customizeLinkEnd(s,t,...e)},customizeLinkEnd:function(t,e,n,r,i,o){const{paper:s}=this,{connectionStrategy:a}=s.options;if("function"==typeof a){var u=a.call(s,t,this,e,new $(n,r),i,o,s);if(u)return u}return t},getMagnetFromLinkEnd:function(t){var e,n=this.el,r=t.port,i=t.magnet,o=this.model;return null!=r&&o.isElement()&&o.hasPort(r)?e=this.findPortNode(r,i)||n:(i||(i=t.selector),i||null==r||(i='[port="'+r+'"]'),e=this.findBySelector(i,n,this.selectors)[0]),this.findProxyNode(e,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),u=r.targetMagnet;if("onleave"===s){if(u===a||ge(u).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,u,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t).linkView;r&&(r.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){oi(e)||(t instanceof SVGElement?ge(t).attr(e):_i(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,o,s,a,u,c,l,h,f=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],!(i=this.getAttributeDefinition(n))||ai(i.qualify)&&!i.qualify.call(this,r,t,e,this)?(a||(a={}),a[(h=n,h.replace(/[A-Z]/g,"-$&").toLowerCase())]=r):(Yr(i.set)&&(a||(a={}),a[i.set]=r),null!==r&&f.push(n,i)));for(o=0,s=f.length;o<s;o+=2)n=f[o],i=f[o+1],r=e[n],ai(i.set)&&(u||(u={}),u[n]=r),ai(i.position)&&(c||(c={}),c[n]=r),ai(i.offset)&&(l||(l={}),l[n]=r);return{raw:e,normal:a,set:u,position:c,offset:l}},updateRelativeAttributes:function(t,e,n,r){var i,o;r||(r={});var s=e.raw||{},a=e.normal||{},u=e.set,c=e.position,l=e.offset;for(i in u){o=u[i];var h=this.getAttributeDefinition(i).set.call(this,o,n.clone(),t,s,this);Wr(h)?Jr(a,h):void 0!==h&&(a[i]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var f,d,p,g=a.transform,v=ge.transformStringToMatrix(g),m=$(v.e,v.f);if(g&&(a=mi(a,"transform"),v.e=v.f=0),c||l){var y=this.getNodeScale(t,r.scalableNode);f=y.sx,d=y.sy}var b=!1;for(i in c)o=c[i],(p=this.getAttributeDefinition(i).position.call(this,o,n.clone(),t,s,this))&&(m.offset($(p).scale(f,d)),b||(b=!0));this.setNodeAttributes(t,a);var x=!1;if(l){var w=this.getNodeBoundingRect(t);if(w.width>0&&w.height>0){var _=ge.transformRect(w,v).scale(1/f,1/d);for(i in l)o=l[i],(p=this.getAttributeDefinition(i).offset.call(this,o,_,t,s,this))&&(m.offset($(p).scale(f,d)),x||(x=!0))}}(void 0!==g||b||x)&&(m.round(1),v.e=m.x,v.f=m.y,t.setAttribute("transform",ge.matrixToTransformString(v)))}},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=ge.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=ge(t).getBBox()),new lt(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(void 0===e.magnetMatrix){const{rotatableNode:n,el:r}=this;let i;i=n&&n.contains(t)?n:r,e.magnetMatrix=ge(t).getTransformToElement(i)}return ge.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=ge(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,o,s,a,u={},c=[];for(var l in t)if(t.hasOwnProperty(l)&&(s=t[l],ui(s))){var h=n[l]=this.findBySelector(l,e,r);for(i=0,o=h.length;i<o;i++){var f=h[i];a=ge.ensureId(f);var d=r&&r[l]===f,p=u[a];if(p){p.array||(c.push(a),p.array=!0,p.attributes=[p.attributes],p.selectedLength=[p.selectedLength]);var g=p.attributes,v=p.selectedLength;if(d)g.unshift(s),v.unshift(-1);else{var m=ei(v,o);g.splice(m,0,s),v.splice(m,0,o)}}else u[a]={attributes:s,selectedLength:d?-1:o,node:f,array:!1}}}for(i=0,o=c.length;i<o;i++)(s=u[a=c[i]]).attributes=wi({},...s.attributes.reverse());return u},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=t;return e.fromPoint||"touchmove"===r||"touchend"===r||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=lt()),n.selectors||(n.selectors=this.selectors);var r,i,o,s,a,u={},c={},l=[],h=[],f=n.roAttributes,d=this.findNodesAttributes(f||e,t,u,n.selectors),p=f?this.findNodesAttributes(e,t,u,n.selectors):d;for(var g in d)if(o=(s=d[g]).attributes,i=s.node,(a=this.processNodeAttributes(i,o)).set||a.position||a.offset){var v,m=p[g]&&p[g].attributes,y=m&&void 0===o.ref?m.ref:o.ref;if(y){if(!(v=(u[y]||this.findBySelector(y,t,n.selectors))[0]))throw new Error('dia.CellView: "'+y+'" reference does not exist.')}else v=null;if(r={node:i,refNode:v,processedAttributes:a,allAttributes:m},v){var b=h.findIndex((function(t){return t.refNode===i}));b>-1?h.splice(b,0,r):h.push(r)}else l.push(r)}else this.setNodeAttributes(i,a.normal);l.push(...h);for(let t=0,e=l.length;t<e;t++){r=l[t],i=r.node;const e=(v=r.refNode)?ge.ensureId(v):"";let o=c[e];o||(o=c[e]=v?ge(v).getBBox({target:ro(i,v)}):n.rootBBox),f?(a=this.processNodeAttributes(i,r.allAttributes),this.mergeProcessedAttributes(a,r.processedAttributes)):a=r.processedAttributes,this.updateRelativeAttributes(i,a,o,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Jr(t.set,e.set),Jr(t.position,e.position),Jr(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),to.mount(this))},onDetach(){this.unmountTools(),to.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){to.remove(this)},updateHighlighters:function(t=!1){to.update(this,null,t)},transformHighlighters:function(){to.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const t=n.getSourceElement();if(t){const n=e.findViewByModel(t);n&&(e.dumpView(n),e.checkViewVisibility(n))}const r=n.getTargetElement();if(r){const t=e.findViewByModel(r);t&&(e.dumpView(t),e.checkViewVisibility(t))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:{TOOLS:"TOOLS"},Highlighting:eo,addPresentationAttributes:function(t){return wi({},vi(this.prototype,"presentationAttributes"),t,(function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?ni(t.concat(e)):void 0}))}});function ro(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}function io(t){t=ni(t);const e=ci(t).reduce((function(t,e){return t[e.id]=e.clone(),t}),{});return ci(t).forEach((function(t){const n=e[t.id];if(n.isLink()){const t=n.source(),r=n.target();t.id&&e[t.id]&&n.prop("source/id",e[t.id].id),r.id&&e[r.id]&&n.prop("target/id",e[r.id].id)}const r=t.get("parent");r&&e[r]&&n.set("parent",e[r].id);const i=ci(t.get("embeds")).reduce((function(t,n){return e[n]&&t.push(e[n].id),t}),[]);oi(i)||n.set("embeds",i)})),e}const oo={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},so=Object.keys(oo).map((t=>oo[t])).join(""),ao="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",uo=/\s/g,co=new RegExp(`^(${ao}\\*)?([${so}])(/${ao})?([-+]{1,2}${ao})?$`,"g");function lo(t){throw new Error(`Invalid calc() expression: ${t}`)}function ho(t,e){const n=co.exec(t.replace(uo,""));n||lo(t),co.lastIndex=0;const[,r,i,o,s]=n,{x:a,y:u,width:c,height:l}=e;let h=0;switch(i){case oo.width:h=c;break;case oo.height:h=l;break;case oo.x:h=a;break;case oo.y:h=u;break;case oo.minimum:h=Math.min(l,c);break;case oo.maximum:h=Math.max(l,c);break;case oo.diagonal:h=Math.sqrt(l*l+c*c)}return r&&(h*=parseFloat(r)),o&&(h/=parseFloat(o.slice(1))),s&&(h+=function(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(s)),h}function fo(t){return"string"==typeof t&&t.includes("calc")}function po(t,e){let n=t,r=0;for(;;){let t=n.indexOf("calc(",r);if(-1===t)return n;let i=t+5,o=1;t:for(;;){switch(n[i]){case"(":o++;break;case")":if(o--,0===o)break t;break;case void 0:lo(n)}i++}let s=n.slice(t+5,i);fo(s)&&(s=po(s,e));const a=String(ho(s,e));n=n.slice(0,t)+a+n.slice(i+1),r=t+a.length}}const go=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"].reduce(((t,e)=>(t[e]=!0,t)),{}),vo={qualify:function(t){return ui(t)},set:function(t,e,n){Object.keys(t).forEach((function(e){if(go[e]&&e in n){const r=t[e];"SELECT"===n.tagName&&Array.isArray(r)?Array.from(n.options).forEach((function(t,e){t.selected=r.includes(t.value)})):n[e]=r}}))}};function mo(t,e){return function(n,r){var i=Di(n);n=parseFloat(n),i&&(n/=100);var o={};if(isFinite(n)){var s=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);o[t]=s}return o}}function yo(t,e,n){return function(r,i){var o,s=Di(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var a=i[n]();o=s||r>0&&r<1?a[t]+i[e]*r:a[t]+r}var u=$();return u[t]=o||0,u}}function bo(t,e,n){return function(r,i){var o;o="middle"===r?i[e]/2:r===n?i[e]:isFinite(r)?r>-1&&r<1?-i[e]*r:-r:Di(r)?i[e]*parseFloat(r)/100:0;var s=$();return s[t]=-(i[t]+o),s}}function xo(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(e,i,o){var s=_i(o),a=s.data(n);if(!a||a.value!==e){var u=t(e);a={value:e,shape:u,shapeBBox:u.bbox()},s.data(n,a)}var c=a.shape.clone(),l=a.shapeBBox.clone(),h=l.origin(),f=i.origin();l.x=f.x,l.y=f.y;var d=i.maxRectScaleToFit(l,f),p=0===l.width||0===i.width?1:d.sx,g=0===l.height||0===i.height?1:d.sy;return c.scale(p,g,h),r&&c.translate(-h.x,-h.y),c}}function wo(t){var e=xo((function(t){return new At(ge.normalizePathData(t))}),t);return function(t,n,r){return{d:e(t,n,r).serialize()}}}function _o(t){var e=xo(gt,t);return function(t,n,r){return{points:e(t,n,r).serialize()}}}function Ao(t,e){var n=new $(1,0);return function(r){var i,o,s=this[t](r);return s?(o=e.rotate?s.vector().vectorAngle(n):0,i=s.start):(i=this.path.start,o=0),0===o?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function So(t){return function(e,n,r){const i=ge(r);i.attr(t)!==e&&i.attr(t,e)}}function Eo(t,e,n){return void 0!==n.text}function ko(){return this.model.isLink()}function To(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return void 0===r&&(r=t["stroke-opacity"]),void 0===r&&(r=t.opacity),void 0!==r&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function Po(t){const{paper:e}=this;return`url(#${"pattern"===t.type?e.definePattern(t):e.defineGradient(t)})`}const Co={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:So("href")},xlinkHref:{set:So("xlink:href")},filter:{qualify:ui,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:ui,set:Po},stroke:{qualify:ui,set:Po},sourceMarker:{qualify:ui,set:function(t,e,n,r){return t=Jr(To(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:ui,set:function(t,e,n,r){return t=Jr(To(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:ui,set:function(t,e,n,r){return t=Jr(To(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!ui(n.textWrap)},set:function(t,e,n,r){const i=_i(n),o="joint-text",s=i.data(o),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:l,displayEmpty:h}=r;let f=r.textPath,d=r.x;fo(d)&&(d=po(d,e));let p=r["font-size"]||r.fontSize;fo(p)&&(p=po(p,e));const g=JSON.stringify([t,a,u,c,l,h,f,d,p]);if(void 0===s||s!==g){if(p&&n.setAttribute("font-size",p),Wr(f)){const t=f.selector;if("string"==typeof t){const[e]=this.findBySelector(t);e instanceof SVGPathElement&&(f=Jr({"xlink:href":"#"+e.id},f))}}ge(n).text(""+t,{lineHeight:a,annotations:u,textPath:f,x:d,textVerticalAnchor:c,eol:l,displayEmpty:h}),i.data(o,g)}}},textWrap:{qualify:ui,set:function(t,e,n,r){var i={},o=t.width||0;Di(o)?i.width=e.width*parseFloat(o)/100:fo(o)?i.width=Number(po(o,e)):null===t.width?i.width=1/0:i.width=o<=0?e.width+o:o;var s,a=t.height||0;Di(a)?i.height=e.height*parseFloat(a)/100:fo(a)?i.height=Number(po(a,e)):null===t.height||(i.height=a<=0?e.height+a:a);var u=t.text;if(void 0===u&&(u=r.text),void 0!==u){const n=t.breakText||Gi,o=r["font-size"]||r.fontSize;s=n(""+u,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":fo(o)?po(o,e):o,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else s="";Co.text.set.call(this,s,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=_i(n),i="joint-title",o=r.data(i);if(void 0===o||o!==t){if(r.data(i,t),"title"===n.tagName)return void(n.textContent=t);var s=n.firstElementChild;if(s&&"title"===s.tagName)s.textContent=t;else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=t,n.insertBefore(a,s)}}}},lineHeight:{qualify:Eo},textVerticalAnchor:{qualify:Eo},textPath:{qualify:Eo},annotations:{qualify:Eo},eol:{qualify:Eo},displayEmpty:{qualify:Eo},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:ui,set:function(t,e,n){_i(n).css(t)}},html:{set:function(t,e,n){_i(n).html(t+"")}},props:vo,ref:{},refX:{position:yo("x","width","origin")},refY:{position:yo("y","height","origin")},refDx:{position:yo("x","width","corner")},refDy:{position:yo("y","height","corner")},refWidth:{set:mo("width","width")},refHeight:{set:mo("height","height")},refRx:{set:mo("rx","width")},refRy:{set:mo("ry","height")},refRInscribed:{set:(Oo=mo("r","width"),Mo=mo("r","height"),function(t,e){return(e.height>e.width?Oo:Mo)(t,e)})},refRCircumscribed:{set:function(t,e){var n=Di(t);t=parseFloat(t),n&&(t/=100);var r,i=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(r=n||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r}}},refCx:{set:mo("cx","width")},refCy:{set:mo("cy","height")},xAlignment:{offset:bo("x","width","right")},yAlignment:{offset:bo("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:wo({resetOffset:!0})},refDKeepOffset:{set:wo({resetOffset:!1})},refPointsResetOffset:{set:_o({resetOffset:!0})},refPointsKeepOffset:{set:_o({resetOffset:!1})},connection:{qualify:ko,set:function({stubs:t=0}){let e;if(isFinite(t)&&0!==t){let n;n=t<0?(this.getConnectionLength()+t)/2:t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),o=r.divideAtLength(n,{segmentSubdivisions:i}),s=r.divideAtLength(-n,{segmentSubdivisions:i});o&&s&&(e=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:ko,set:Ao("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:ko,set:Ao("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:ko,set:Ao("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:ko,set:Ao("getTangentAtRatio",{rotate:!1})}};var Oo,Mo;Co["xlink:href"]=Co.xlinkHref,["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach((t=>{Co[t]={qualify:fo,set:function(e,n){return{[t]:po(e,n)}}}})),["width","height","r","rx","ry","font-size","stroke-width"].forEach((t=>{Co[t]={qualify:fo,set:function(e,n){return{[t]:Math.max(0,po(e,n))}}}})),Co.refR=Co.refRInscribed,Co.refD=Co.refDResetOffset,Co.refPoints=Co.refPointsResetOffset,Co.atConnectionLength=Co.atConnectionLengthKeepGradient,Co.atConnectionRatio=Co.atConnectionRatioKeepGradient,Co.fontSize=Co["font-size"],Co.strokeWidth=Co["stroke-width"],Co.refX2=Co.refX,Co.refY2=Co.refY,Co.refWidth2=Co.refWidth,Co.refHeight2=Co.refHeight,Co["ref-x"]=Co.refX,Co["ref-y"]=Co.refY,Co["ref-dy"]=Co.refDy,Co["ref-dx"]=Co.refDx,Co["ref-width"]=Co.refWidth,Co["ref-height"]=Co.refHeight,Co["x-alignment"]=Co.xAlignment,Co["y-alignment"]=Co.yAlignment;const No=Co,Lo=Yi.Model.extend({constructor:function(t,e){var n,r=t||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=((t="")=>`${t}`+ ++xi)("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=vi(this,"defaults"))&&(r=wi({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const t=vi(this.constructor.prototype,"defaults").attrs||{},e=this.attributes.attrs,n={};bi(e,(function(e,r){const i=t[r];bi(e,(function(t,e){Wr(t)&&!Array.isArray(t)?bi(t,(function(t,o){i&&i[e]&&si(i[e][o],t)||(n[r]=n[r]||{},(n[r][e]||(n[r][e]={}))[o]=t)})):i&&si(i[e],t)||(n[r]=n[r]||{},n[r][e]=t)}))}));const r=ii(mi(this.attributes,"attrs"));return r.attrs=n,r},initialize:function(t){const e=this.getIdAttribute();t&&void 0!==t[e]||this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},processPorts:function(){var t=this.ports,e={};bi(this.get("attrs"),(function(t,n){t&&t.port&&(void 0!==t.port.id?e[t.port.id]=t.port:e[t.port]={id:t.port})}));var n={};bi(t,(function(t,r){e[r]||(n[r]=!0)})),this.graph&&!oi(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach((function(t){n[t.get("target").port]&&t.remove()})),this.graph.getConnectedLinks(this,{outbound:!0}).forEach((function(t){n[t.get("source").port]&&t.remove()}))),this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let e=0,n=i.length;e<n;e++){const n=i[e];n&&n.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){let n;(t=Zr(t||{},{foregroundEmbeds:!0})).deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];const r=t.foregroundEmbeds?n:li(n,(t=>t.z()));let i=e.maxZIndex()-n.length+1;const o=e.get("cells");let s=o.indexOf(r[0])!==o.length-n.length;s||(s=r.some((function(t,e){return t.z()!==i+e}))),s&&(this.startBatch("to-front"),i+=n.length,r.forEach((function(e,n){e.set("z",i+n,t)})),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){let n;(t=Zr(t||{},{foregroundEmbeds:!0})).deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];const r=t.foregroundEmbeds?n:li(n,(t=>t.z()));let i=e.minZIndex(),o=0!==e.get("cells").indexOf(r[0]);o||(o=r.some((function(t,e){return t.z()!==i+e}))),o&&(this.startBatch("to-back"),i-=n.length,r.forEach((function(e,n){e.set("z",i+n,t)})),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some((t=>t.isEmbedded()&&this.id!==t.parent())))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every((t=>this!==t&&!this.isEmbeddedIn(t)))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Jr([],this.get("embeds"));t.forEach((t=>{r[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e)})),this.set("embeds",ni(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach((t=>t.unset("parent",e))),this.set("embeds",fi(this.get("embeds"),...t.map((t=>t.id))),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);const e=this.get("embeds");if(oi(e))return[];let n=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(n=li(n,(t=>t.z()))),n},_getEmbeddedCellsBfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.shift();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});n.push(...i)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.pop();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});for(let t=i.length-1;t>=0;--t)n.push(i[t])}return e.shift(),e},isEmbeddedIn:function(t,e){var n=Yr(t)?t:t.id,r=this.parent();if(e=Jr({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return ci(io([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Yi.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r=Yr(t);if(r||Array.isArray(t)){if(arguments.length>1){var i,o;r?o=(i=t).split("/"):(i=t.join("/"),o=t.slice());var s=o[0],a=o.length;const v=n||{};v.propertyPath=i,v.propertyValue=e,v.propertyPathArray=o,"rewrite"in v||(v.rewrite=!1);for(var u={},c=u,l=s,h=1;h<a;h++){var f=o[h],d=Number.isFinite(r?Number(f):f);c=c[l]=d?[]:{},l=f}u=Oi(u,o,e,"/");var p=wi({},this.attributes);v.rewrite&&Mi(p,i,"/");var g=wi(p,u);return this.set(s,g[s],v)}return Pi(this.attributes,t,"/")}const v=e||{};v.propertyPath=null,v.propertyValue=t,v.propertyPathArray=[],"rewrite"in v||(v.rewrite=!1);const m={};for(const e in t){const{changedValue:n}=wi({},{changedValue:this.attributes[e]},{changedValue:t[e]});m[e]=n}return this.set(m,v)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if("attrs"===r&&(e.dirty=!0),1===n.length)return this.unset(t,e);var i=n.slice(1),o=this.get(r);return null==o?this:(o=ii(o),Mi(o,i,"/"),this.set(r,o,e))},attr:function(t,e,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Yr(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/",n=Jr({duration:100,delay:10,timingFunction:qi.linear,valueFunction:Hi.number},n);var i,o=0,s=function(e){var r,a,u;(a=(e-=o=o||e)/n.duration)<1?this._transitionIds[t]=r=Ii(s):(a=1,delete this._transitionIds[t]),u=i(n.timingFunction(a)),n.transitionId=r,this.prop(t,u,n),r||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:a}=this;let u;return u=setTimeout((o=>{a[t]&&(a[t]=fi(a[t],u),0===a[t].length&&delete a[t]),this.stopPendingTransitions(t,r),i=n.valueFunction(Pi(this.attributes,t,r),e),this._transitionIds[t]=Ii(o),this.trigger("transition:start",this,t)}),n.delay,s),a[t]||(a[t]=[]),a[t].push(u),u},getTransitions:function(){return pi(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const n=t.split(e);r=r.filter((t=>si(n,t.split(e).slice(0,n.length))))}return r.forEach((t=>{n[t].forEach((t=>clearTimeout(t))),delete n[t]})),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const n=t.split(e);r=r.filter((t=>si(n,t.split(e).slice(0,n.length))))}r.forEach((t=>{const e=n[t];ji(e),delete n[t],this.trigger("transition:end",this,t)}))},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Jr({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Jr({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&this.hasChanged(n)&&(e|=t[n]);return e},angle:function(){return 0},position:function(){return new $(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new $},getBBox:function(){return new lt(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new $(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=No;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Jr({defaults:Kr({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return"undefined"!=typeof joint&&gi(joint,"shapes")&&Oi(joint.shapes,t,i,"."),i}});function Io(t,e,n){var r=t.toJSON();return r.angle=e||0,Zr({},n,r)}function jo(t,e,n,r){return t.map((function(t,e,n){var i=this.pointAt((e+.5)/n.length);return(t.dx||t.dy)&&i.offset(t.dx||0,t.dy||0),Io(i.round(),0,Ro(r,t))}),Z(e,n))}function Bo(t,e,n,r){var i=e.center(),o=e.width/e.height,s=e.topMiddle(),a=et.fromRect(e);return t.map((function(t,u,c){var l=n+r(u,c.length),h=s.clone().rotate(i,-l).scale(o,1,i),f=t.compensateRotation?-a.tangentTheta(h):0;return(t.dx||t.dy)&&h.offset(t.dx||0,t.dy||0),t.dr&&h.move(i,t.dr),Io(h.round(),f,Ro(e,t))}))}function Ro(t,e){let{x:n,y:r,angle:i}=e;return Di(n)?n=parseFloat(n)/100*t.width:fo(n)&&(n=Number(po(n,t))),Di(r)?r=parseFloat(r)/100*t.height:fo(r)&&(r=Number(po(r,t))),{x:n,y:r,angle:i}}function Do(t,e){const{x:n,y:r}=Ro(t,e);return new $(n||0,r||0)}const Fo=function(t,e){return t.map((t=>{const n=Do(e,t).round().toJSON();return n.angle=t.angle||0,n}))},Vo=function(t,e,n){return n.fn(t,e,n)},zo=function(t,e,n){return jo(t,Do(e,n.start||e.origin()),Do(e,n.end||e.corner()),e)},Go=function(t,e,n){return jo(t,e.origin(),e.bottomLeft(),e)},Uo=function(t,e,n){return jo(t,e.topRight(),e.corner(),e)},qo=function(t,e,n){return jo(t,e.origin(),e.topRight(),e)},Ho=function(t,e,n){return jo(t,e.bottomLeft(),e.corner(),e)},$o=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return Bo(t,e,r,(function(t){return t*i}))},Wo=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return Bo(t,e,r,(function(t,e){return(t+.5-e/2)*i}))};function Xo(t,e){return Kr({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Yo(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner());return[n,e.theta(t.topRight()),i,r]}function Jo(t,e,n,r){r=Zr({},r,{offset:15});var i,o,s,a,u=e.center().theta(t),c=r.offset,l=0;const[h,f,d,p]=Yo(e);u<f||u>d?(s=".3em",i=c,o=0,a="start"):u<h?(i=0,o=-c,n?(l=-90,a="start",s=".3em"):(a="middle",s="0")):u<p?(s=".3em",i=-c,o=0,a="end"):(i=0,o=c,n?(l=90,a="start",s=".3em"):(a="middle",s=".6em"));var g=Math.round;return Xo(r,{x:g(i),y:g(o),angle:l,attrs:{labelText:{y:s,textAnchor:a}}})}function Zo(t,e,n,r){r=Zr({},r,{offset:15});var i,o,s,a,u=e.center().theta(t),c=r.offset,l=0;const[h,f,d,p]=Yo(e);u<f||u>d?(s=".3em",i=-c,o=0,a="end"):u<h?(i=0,o=c,n?(l=90,a="start",s=".3em"):(a="middle",s=".6em")):u<p?(s=".3em",i=c,o=0,a="start"):(i=0,o=-c,n?(l=-90,a="start",s=".3em"):(a="middle",s="0"));var g=Math.round;return Xo(r,{x:g(i),y:g(o),angle:l,attrs:{labelText:{y:s,textAnchor:a}}})}function Ko(t,e,n){n=Zr({},n,{offset:20});var r,i=W(0,0),o=-t.theta(i),s=o,a=t.clone().move(i,n.offset).difference(t).round(),u=".3em";(o+90)%180==0?(r=e?"end":"middle",e||-270!==o||(u="0em")):o>-270&&o<-90?(r="start",s=o-180):r="end";var c=Math.round;return Xo(n,{x:c(a.x),y:c(a.y),angle:e?s:0,attrs:{labelText:{y:u,textAnchor:r}}})}const Qo=function(t,e,n){return Xo(n)},ts=function(t,e,n){return Xo(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},es=function(t,e,n){return Xo(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},ns=function(t,e,n){return Xo(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},rs=function(t,e,n){return Xo(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},is=function(t,e,n){return Jo(t,e,!0,n)},os=function(t,e,n){return Jo(t,e,!1,n)},ss=function(t,e,n){return Zo(t,e,!0,n)},as=function(t,e,n){return Zo(t,e,!1,n)},us=function(t,e,n){return Ko(t.difference(e.center()),!1,n)},cs=function(t,e,n){return Ko(t.difference(e.center()),!0,n)};var ls=function(t){var e=ii(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=s,this.portLabelLayoutNamespace=a,this._init(e)};ls.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter((function(e){return e.group===t}))},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=i.args||{},u=r.map((function(t){return t&&t.position&&t.position.args})),c=s[o](u,e,a),l={ports:r,result:[]};return ci(c).reduce(function(t,n,r){var i=t.ports[r];return t.result.push({portId:i.id,portTransformation:n,labelTransformation:this._getPortLabelLayout(i,$(n),e),portAttrs:i.attrs,portSize:i.size,labelSize:i.label.size}),t}.bind(this),l),l.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(Wr(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=ci(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return wi(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Jr({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=wi({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=wi({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Jr({},n.size,e.size),e},_getZIndex:function(t,e){return Xr(e.z)?e.z:Xr(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return wi({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n,r={};ai(t)?(n="fn",r.fn=t):Yr(t)?n=t:void 0===t?n=e?"left":null:Array.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):Wr(t)&&(n=t.name,Jr(r,t.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const hs={_initializePorts:function(){this._createPortData(),this.on("change:ports",(function(){this._processRemovedPort(),this._createPortData()}),this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};ci(t.items).forEach((function(t){e[t.id]=!0}));var n=this.previous("ports")||{},r={};ci(n.items).forEach((function(t){e[t.id]||(r[t.id]=!0)}));var i=this.graph;i&&!oi(r)&&(i.getConnectedLinks(this,{inbound:!0}).forEach((function(t){r[t.get("target").port]&&t.remove()})),i.getConnectedLinks(this,{outbound:!0}).forEach((function(t){r[t.get("source").port]&&t.remove()})))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return ii(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=ci(this.prop(["ports","items"])).filter((e=>e.group===t));return ii(e)},getPort:function(t){return ii(ci(this.prop("ports/items")).find((function(e){return e.id&&e.id===t})))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,lt(this.size())).reduce((function(t,e){var n=e.portTransformation;return t[e.portId]={x:n.x,y:n.y,angle:n.angle},t}),{})},getPortIndex:function(t){var e=Wr(t)?t.id:t;return this._isValidPortId(e)?ci(this.prop("ports/items")).findIndex((function(t){return t.id===e})):-1},addPort:function(t,e){if(!Wr(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Jr([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r="number"==typeof t?t:this.getPortIndex(t);if(!Wr(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Jr([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(-1===i)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):Yr(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],ui(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=ci((t=t||{}).items);return n.forEach((function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())}),this),ni(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!Wr(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Jr([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(-1!==r){const t=Jr([],this.prop(["ports","items"]));t.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],t,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;r=Jr([],this.prop(["ports","items"])).filter((function(e){return!t.some((function(t){const n=Wr(t)?t.id:t;return e.id===n}))}))}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new ls(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var r=n.filter((function(e){if(!t.find((function(t){return t.id===e.id})))return e})),i=t.filter((function(t){if(!n.find((function(e){return e.id===t.id})))return t}));i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},fs={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i,o,s=(i=this.model._portSettingsData.getPorts(),o=Lr(o="z",2),function(t,e,n){return(Array.isArray(t)?Ir:jr)(t,e,n,arguments.length<3,Er)}(i,((t,e,n)=>(n=o(e),hasOwnProperty.call(t,n)?t[n].push(e):Bn(t,n,[e]),t)),{})),a="auto";ci(s[a]).forEach((function(n){var r=this._getPortElement(n);e.append(r),t.push(r)}),this);for(var u=Object.keys(s),c=0;c<u.length;c++){var l=u[c];if(l!==a){var h=parseInt(l,10);this._appendPorts(s[l],h,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=ci(t).map(this._getPortElement,this);n[e]||e<0?ge(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;if(!e)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[o=null]=this.findBySelector(e,r,i);return o},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Qr(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var o=ge(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var a=this.parseDOMJSON(s,o.node),u=a.fragment;e=u.childNodes.length>1?ge("g").append(u):ge(u.firstChild),i=a.selectors}else e=ge(s),Array.isArray(e)&&(e=ge("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const c=this._getPortLabelMarkup(t.label);if(Array.isArray(c)){const{fragment:t,selectors:e}=this.parseDOMJSON(c,o.node),i=t.childNodes.length;i>0&&(r=e,n=1===i?ge(t.firstChild):ge("g").append(t))}else n=ge(c),Array.isArray(n)&&(n=ge("g").append(n));var l;if(i&&r){for(var h in r)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");l=Jr({},i,r)}else l=i||r||{};const f="portRoot",d="labelRoot",p="labelText";if(f in l||(l[f]=e.node),n){const t=n.node;if(d in l||(l[d]=t),!(p in l)){const e="TEXT"===n.tagName()?t:Array.from(t.querySelectorAll("text"));l[p]=e,r||(r={}),r[p]=e}}return o.append(e.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:n,portSelectors:l,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=lt(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var o=n[r],s=o.portId,a=this._portElementsCache[s]||{},u=o.portTransformation,c=o.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new lt(o.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new lt(o.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(t,e,n){var r=ge.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},ds={TOOLS:no.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},ps="move",gs="magnet",vs=no.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=no.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){no.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[ds.UPDATE],position:[ds.TRANSLATE,ds.TOOLS],size:[ds.RESIZE,ds.PORTS,ds.TOOLS],angle:[ds.ROTATE,ds.TOOLS],markup:[ds.RENDER],ports:[ds.PORTS]},initFlag:[ds.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=Ai;this.hasFlag(t,ds.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,ds.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[ds.RENDER,ds.UPDATE,ds.RESIZE,ds.TRANSLATE,ds.ROTATE,ds.PORTS,ds.TOOLS]);else{let i=!1;this.hasFlag(t,ds.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[ds.RESIZE,ds.UPDATE]),n&&(t=this.removeFlag(t,ds.PORTS))),this.hasFlag(t,ds.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,ds.UPDATE),i=!0,n&&(t=this.removeFlag(t,ds.PORTS))),this.hasFlag(t,ds.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,ds.TRANSLATE),r=!0),this.hasFlag(t,ds.ROTATE)&&(this.rotate(),t=this.removeFlag(t,ds.ROTATE),r=!0),this.hasFlag(t,ds.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,ds.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,ds.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,ds.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=Ai;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new lt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=ge(n[this.rotatableSelector])||null,this.scalableNode=ge(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(ge(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Ai.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var s=i.getBBox({recursive:o}),a=r.width/(s.width||1),u=r.height/(s.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,l=c&&c.attr("transform");if(l){c.attr("transform",l+" rotate("+-n+","+r.width/2+","+r.height/2+")");var h=i.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Jr({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,n=(t.paper||this.paper).model,r=t.initialZIndices={},i=e.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...i,...o].forEach((t=>r[t.id]=t.attributes.z)),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const s=n.getElements().reduce(((t,e)=>Math.max(t,e.attributes.z||0)),0);o.forEach((t=>{t.attributes.z<=s&&t.set("z",s+1,{ui:!0})})),e.stopBatch("to-front");const a=e.parent();a?(n.getCell(a).unembed(e,{ui:!0}),t.initialParentId=a):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,o=t.paper||this.paper,s=o.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=o.options;let l;l=ai(a)?ci(a.call(s,this,e,n,r)):"pointer"===a?ci(s.findModelsFromPoint({x:n,y:r})):s.findModelsUnderElement(i,{searchBy:a}),l=l.filter((t=>t instanceof Lo&&i.id!==t.id&&!t.isEmbeddedIn(i))),u&&(l=l.slice(-1));let h=null;const f=t.candidateEmbedView;for(let t=l.length-1;t>=0;t--){const e=l[t];if(f&&f.model.id==e.id){h=f;break}{const t=e.findView(o);if(!ai(c)||c.call(o,this,t)){h=t;break}}}h&&h!=f&&(this.clearEmbedding(t),t.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&f&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:e}=r.options,{initialParentId:n}=t;if(n&&"function"==typeof e&&!e.call(r,this))return void this._disallowUnembed(t)}r.model.getConnectedLinks(n,{deep:!0}).forEach((t=>{t.reparent({ui:!0})}))},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,i=(t.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:e,initialPosition:n,initialZIndices:o}=t;if(n){const{x:t,y:e}=n;r.position(t,e,{deep:!0,ui:!0})}o&&Object.keys(o).forEach((t=>{const e=i.getCell(t);e&&e.set("z",o[t],{ui:!0})}));const s=i.getCell(e);s&&s.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const e=this.findAttribute("port",t);if(e){const t=this.findPortNode(e,n);if(t)return t}else{const[t]=this.findBySelector(n);if(t)return t}}return t},notifyPointerdown(t,e,n){no.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){no.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),no.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){no.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){no.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){no.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=r;switch(i&&this.magnetpointermove(t,i,e,n),o){case gs:this.dragMagnet(t,e,n);break;case ps:(s||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n)}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=r;switch(i&&this.magnetpointerup(t,i,e,n),o){case gs:this.dragMagnetEnd(t,e,n);break;case ps:(s||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){no.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){no.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){no.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){no.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){no.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:ps,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:o=t.currentTarget}=this.eventData(t);t.stopPropagation(),r.options.validateMagnet.call(r,this,o,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,o,e,n),this.eventData(t,{action:gs})):i?this.dragStart(t,e,n):this.pointerdown(t,e,n)},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,o=this.model,s=this.eventData(t),{pointerOffset:a,restrictedArea:u,embedding:c}=s,l=E(e+a.x,i),h=E(n+a.y,i);o.position(l,h,{restrictedArea:u,deep:!0,ui:!0}),r.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s,t,e,n)),this.eventData(t,{embedding:c})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:ds});Jr(vs.prototype,fs);const ms=Lo.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?ri(this.get("source")):t instanceof Lo?((r=ri(e)||{}).id=t.id,i=n,this.set("source",r,i)):ui(t)?(r=t,i=e,this.set("source",r,i)):((r=ri(e)||{}).x=t.x,r.y=t.y,i=n,this.set("source",r,i));var r,i},target:function(t,e,n){return void 0===t?ri(this.get("target")):t instanceof Lo?((r=ri(e)||{}).id=t.id,i=n,this.set("target",r,i)):ui(t)?(r=t,i=e,this.set("target",r,i)):((r=ri(e)||{}).x=t.x,r.y=t.y,i=n,this.set("target",r,i));var r,i},router:function(t,e,n){if(void 0===t){var r=this.get("router");return r?"object"==typeof r?ri(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i="object"==typeof t||"function"==typeof t,o=i?t:{name:t,args:e},s=i?e:n;return this.set("router",o,s)},connector:function(t,e,n){if(void 0===t){var r=this.get("connector");return r?"object"==typeof r?ri(r):r:this.get("smooth")?{name:"smooth"}:null}var i="object"==typeof t||"function"==typeof t,o=i?t:{name:t,args:e},s=i?e:n;return this.set("connector",o,s)},label:function(t,e,n){var r=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this._normalizeVertex(i);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1);var o=this._normalizeVertex(e);return r.splice(t,0,o),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return ui(t)?t:{x:t.x,y:t.y}},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints((function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}}),n)},scale:function(t,e,n,r){return this.applyToPoints((function(r){return $(r).scale(t,e,n).toJSON()}),r)},applyToPoints:function(t,e){if(!ai(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var o=this.vertices();return o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new $(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new $(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map($),this.getTargetPoint()];return new gt(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(e=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),!i||e&&e.id===i.id||i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();o=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return o},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter((function(t){return!!t}));t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Yr(t)||Xr(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}}),ys=function(t,e,n){return t},bs=function(t,e,n){var r,i,o,s=e.side||"bottom",a=Ui(e.padding||40),u=n.sourceBBox,c=n.targetBBox,l=u.center(),h=c.center();switch(s){case"bottom":o=1,r="y",i="height";break;case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;default:throw new Error("Router: invalid side")}return l[r]+=o*(u[i]/2+a[s]),h[r]+=o*(c[i]/2+a[s]),o*(l[r]-h[r])>0?h[r]=l[r]:l[r]=h[r],[l].concat(t,h)};var xs={N:"S",S:"N",E:"W",W:"E"},ws={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function _s(t,e,n){var r=new $(t.x,e.y);return n.containsPoint(r)&&(r=new $(e.x,t.y)),r}function As(t,e){return t["W"===e||"E"===e?"width":"height"]}function Ss(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Es(t){return new lt(t.x,t.y,0,0)}function ks(t){var e=Ui(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Ts(t,e){return t.sourceBBox.clone().moveAndExpand(ks(e))}function Ps(t,e){return t.targetBBox.clone().moveAndExpand(ks(e))}function Cs(t,e,n){var r=new $(t.x,e.y),i=new $(e.x,t.y),o=Ss(t,r),s=Ss(t,i),a=xs[n],u=o===n||o!==a&&(s===a||s!==n)?r:i;return{points:[u],direction:Ss(u,e)}}function Os(t,e,n){var r=_s(t,e,n);return{points:[r],direction:Ss(r,e)}}function Ms(t,e,n,r){var i,o={},s=[new $(t.x,e.y),new $(e.x,t.y)],a=s.filter((function(t){return!n.containsPoint(t)})),u=a.filter((function(e){return Ss(e,t)!==r}));if(u.length>0)i=(i=u.filter((function(e){return Ss(t,e)===r})).pop())||u[0],o.points=[i],o.direction=Ss(i,e);else{i=di(s,a)[0];var c=new $(e).move(i,-As(n,r)/2),l=_s(c,t,n);o.points=[l,c],o.direction=Ss(c,e)}return o}function Ns(t,e,n,r){var i=Os(e,t,r),o=i.points[0];if(n.containsPoint(o)){var s=(i=Os(t,e,n)).points[0];if(r.containsPoint(s)){var a=new $(t).move(s,-As(n,Ss(t,s))/2),u=new $(e).move(o,-As(r,Ss(e,o))/2),c=new J(a,u).midpoint(),l=Os(t,c,n),h=Cs(c,e,l.direction);i.points=[l.points[0],h.points[0]],i.direction=h.direction}}return i}function Ls(t,e,n,r,i){var o,s,a,u={},c=n.union(r).inflate(1),l=c.center().distance(e)>c.center().distance(t),h=l?e:t,f=l?t:e;return i?(o=$.fromPolar(c.width+c.height,ws[i],h),o=c.pointNearestToPoint(o).move(o,-1)):o=c.pointNearestToPoint(h).move(h,1),s=_s(o,f,c),o.round().equals(s.round())?(s=$.fromPolar(c.width+c.height,T(o.theta(h))+Math.PI/2,f),a=_s(o,s=c.pointNearestToPoint(s).move(f,1).round(),c),u.points=l?[s,a,o]:[o,a,s]):u.points=l?[s,o]:[o,s],u.direction=Ss(l?o:s,e),u}function Is(t,e,n){var r,i=Ts(n,e),o=Ps(n,e),s=function(t,e){return t.sourceAnchor?t.sourceAnchor:Ts(t,e).center()}(n,e),a=function(t,e){return t.targetAnchor?t.targetAnchor:Ps(t,e).center()}(n,e);i=i.union(Es(s)),o=o.union(Es(a)),(t=ci(t).map($)).unshift(s),t.push(a);for(var u=[],c=0,l=t.length-1;c<l;c++){var h=null,f=t[c],d=t[c+1],p=!!Ss(f,d);if(0===c)c+1===l?i.intersect(o.clone().inflate(1))?h=Ls(f,d,i,o):p||(h=Ns(f,d,i,o)):i.containsPoint(d)?h=Ls(f,d,i,Es(d).moveAndExpand(ks(e))):p||(h=Os(f,d,i));else if(c+1===l){var g=p&&Ss(d,f)===r;o.containsPoint(f)||g?h=Ls(f,d,Es(f).moveAndExpand(ks(e)),o,r):p||(h=Ms(f,d,o,r))}else p||(h=Cs(f,d,r));h?(Array.prototype.push.apply(u,h.points),r=h.direction):r=Ss(f,d),c+1<l&&u.push(d)}return u}var js={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!ai(Is))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Is(t,Jr({},js,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function Bs(t){this.map={},this.options=t,this.mapGridSize=100}function Rs(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Ds(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function Fs(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Vs(t,e){return t.sourceAnchor?t.sourceAnchor:Ds(t,e).center()}function zs(t,e,n,r,i){var o=360/n,s=t.theta(function(t,e,n,r){var i=r.step,o=e.x-t.x,s=e.y-t.y,a=o/n.x*i,u=s/n.y*i;return new $(t.x+a,t.y+u)}(t,e,r,i)),a=S(s+o/2);return o*Math.floor(a/o)}function Gs(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function Us(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function qs(t,e){return t.round(e)}function Hs(t,e,n){return qs(function(t,e){var n=e.source,r=E(t.x-n.x,e.x)+n.x,i=E(t.y-n.y,e.y)+n.y;return new $(r,i)}(t.clone(),e),n)}function $s(t){return t.clone().toString()}function Ws(t){return new $(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Xs(t,e,n,r,i,o,s){for(var a,u=[],c=Ws(i.difference(n)),l=$s(n),h=t[l];h;){var f=Ws((a=e[l]).difference(h));f.equals(c)||(u.unshift(a),c=f),h=t[l=$s(h)]}var d=e[l];return Ws(d.difference(r)).equals(c)||u.unshift(d),u}function Ys(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function Js(t,e,n,r,i){var o=i.precision,s=i.directionMap,a=t.difference(e.center()),u=Wr(s)?Object.keys(s):[],c=ci(n),l=u.reduce((function(n,i){if(c.includes(i)){for(var u,l=s[i],h=new $(t.x+l.x*(Math.abs(a.x)+e.width),t.y+l.y*(Math.abs(a.y)+e.height)),f=new J(t,h).intersect(e)||[],d=f.length,p=null,g=0;g<d;g++){var v=f[g],m=t.squaredDistance(v);(void 0===u||m>u)&&(u=m,p=v)}if(p){var y=Hs(p,r,o);e.containsPoint(y)&&(y=Hs(y.offset(l.x*r.x,l.y*r.y),r,o)),n.push(y)}}return n}),[]);return e.containsPoint(t)||l.push(Hs(t,r,o)),l}function Zs(t,e,n,r){var i,o,s=r.precision;i=qs(t instanceof lt?Vs(this,r).clone():t.clone(),s),o=qs(e instanceof lt?function(t,e){return t.targetAnchor?t.targetAnchor:Fs(t,e).center()}(this,r).clone():e.clone(),s);var a,u,c,l,h,f,d,p=(a=r.step,c=o,{source:(u=i).clone(),x:Us(c.x-u.x,a),y:Us(c.y-u.y,a)});if(f=t instanceof lt?Js(l=i,t,r.startDirections,p,r):[l=i],e instanceof lt?(h=o,d=Js(o,e,r.endDirections,p,r)):d=[h=o],f=f.filter((t=>!n(t))),d=d.filter((t=>!n(t))),f.length>0&&d.length>0){for(var g=new Rs,v={},m={},y={},b=0,x=f.length;b<x;b++){var w=f[b],_=$s(w);g.add(_,Ys(w,d)),v[_]=w,y[_]=0}var A,S,E=r.previousDirectionAngle,k=void 0===E,T=r.directions;!function(t,e,n){var r=n.step;ci(n.directions).forEach((function(t){t.gridOffsetX=t.offsetX/r*e.x,t.gridOffsetY=t.offsetY/r*e.y}))}(0,p,r);for(var P=T.length,C=ci(d).reduce((function(t,e){var n=$s(e);return t.push(n),t}),[]),O=r.maximumLoops;!g.isEmpty()&&O>0;){var M,N=g.pop(),L=v[N],I=m[N],j=y[N],B=void 0===I,R=L.equals(l);M=B?k?R?null:zs(l,L,P,p,r):E:zs(I,L,P,p,r);var D=f.length===d.length;if(D)for(var F=0;F<f.length;F++)if(!f[F].equals(d[F])){D=!1;break}if((!B||!D)&&C.indexOf(N)>=0)return r.previousDirectionAngle=M,Xs(m,v,L,l,h);for(b=0;b<P;b++){var V=(A=T[b]).angle;if(S=Gs(M,V),k&&R||!(S>r.maxAllowedDirectionChange)){var z=Hs(L.clone().offset(A.gridOffsetX,A.gridOffsetY),p,s),G=$s(z);if(!g.isClose(G)&&!n(z)){if(C.indexOf(G)>=0&&!z.equals(h)&&Gs(V,zs(z,h,P,p,r))>r.maxAllowedDirectionChange)continue;var U=j+A.cost+(R?0:r.penalties[S]);(!g.isOpen(G)||U<y[G])&&(v[G]=z,m[G]=L,y[G]=U,g.add(G,U+Ys(z,d)))}}}O--}}return r.fallbackRoute.call(this,l,h,r)}Bs.prototype.build=function(t,e){var n=this.options,r=ci(n.excludeEnds).reduce((function(n,r){var i=e.get(r);if(i){var o=t.getCell(i.id);o&&n.push(o)}return n}),[]),i=[],o=t.getCell(e.get("source").id);o&&(i=pi(i,o.getAncestors().map((function(t){return t.id}))));var s=t.getCell(e.get("target").id);s&&(i=pi(i,s.getAncestors().map((function(t){return t.id}))));var a=this.mapGridSize;return t.getElements().reduce((function(t,e){var o=ci(n.excludeTypes).includes(e.get("type")),s=r.find((function(t){return t.id===e.id})),u=i.includes(e.id);if(!(o||s||u))for(var c=e.getBBox().moveAndExpand(n.paddingBox),l=c.origin().snapToGrid(a),h=c.corner().snapToGrid(a),f=l.x;f<=h.x;f+=a)for(var d=l.y;d<=h.y;d+=a){var p=f+"@"+d;t[p]=t[p]||[],t[p].push(c)}return t}),this.map),this},Bs.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return ci(this.map[e]).every((function(e){return!e.containsPoint(t)}))},Rs.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=ei(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(n,0,t)},Rs.prototype.remove=function(t){this.hash[t]=this.CLOSE},Rs.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},Rs.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},Rs.prototype.isEmpty=function(){return 0===this.items.length},Rs.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const Ks=function(t,e,n){return function(t,e,n){!function(t){if(t.directions=vi(t,"directions"),t.penalties=vi(t,"penalties"),t.paddingBox=vi(t,"paddingBox"),t.padding=vi(t,"padding"),t.padding){var e=Ui(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}ci(t.directions).forEach((function(t){var e=new $(0,0),n=new $(t.offsetX,t.offsetY);t.angle=S(e.theta(n))}))}(e),n.options.perpendicular=!!e.perpendicular;var r=Ds(n,e),i=Fs(n,e),o=Vs(n,e);let s;if("function"==typeof e.isPointObstacle)s=e.isPointObstacle;else{const t=new Bs(e);t.build(n.paper.model,n.model),s=e=>!t.isPointAccessible(e)}for(var a,u,c=ci(t).map($),l=[],h=o,f=0,d=c.length;f<=d;f++){var p=null;if(u=a||r,!(a=c[f])&&(a=i,(!n.model.get("source").id||!n.model.get("target").id)&&ai(e.draggingRoute))){var g=u===r?o:u,v=a.origin();p=e.draggingRoute.call(n,g,v,e)}if(null===(p=p||Zs.call(n,u,a,s,e)))return e.fallbackRouter(t,e,n);var m=p[0];m&&m.equals(h)&&p.shift(),h=p[p.length-1]||h,Array.prototype.push.apply(l,p)}return l}(t,Jr({},js,e),n)};var Qs={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(r%180>90){var a=o;o=s,s=a}var u=r%90<45?o:s,c=new J(t,u),l=90*Math.ceil(r/90),h=$.fromPolar(c.squaredLength(),T(l+135),u),f=new J(e,h),d=c.intersection(f),p=d||e,g=d?p:t,v=360/n.directions.length,m=g.theta(e),y=S(m+v/2),b=v*Math.floor(y/v);return n.previousDirectionAngle=b,p&&i.push(p.round()),i.push(e),i}};const ta=function(t,e,n){if(!ai(Ks))throw new Error("Metro requires the manhattan router.");return Ks(t,Jr({},Qs,e),n)},ea={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},na=[ea.LEFT,ea.RIGHT,ea.TOP,ea.BOTTOM],ra={[ea.LEFT]:ea.RIGHT,[ea.RIGHT]:ea.LEFT,[ea.TOP]:ea.BOTTOM,[ea.BOTTOM]:ea.TOP},ia=[ea.TOP,ea.BOTTOM],oa={0:ea.RIGHT,180:ea.LEFT,270:ea.TOP,90:ea.BOTTOM};function sa(t){return t.angle()}function aa(t){return new gt(t).simplify({threshold:1}).points}function ua(t,e){const{point:n,x0:r,y0:i,view:o,bbox:s,direction:a}=t,{point:u,x0:c,y0:l,view:h,bbox:f,direction:d}=e;let p,g;if(o)p=o.model.isLink()?ca(u,n,o):a===ea.ANCHOR_SIDE?s.sideNearestToPoint(n):a===ea.MAGNET_SIDE?o.model.getBBox().sideNearestToPoint(n):a;else{const t=new lt(r,i,0,0);p=na.includes(a)?a:t.sideNearestToPoint(u)}if(h)g=h.model.isLink()?ca(n,u,h):d===ea.ANCHOR_SIDE?f.sideNearestToPoint(u):d===ea.MAGNET_SIDE?h.model.getBBox().sideNearestToPoint(u):d;else{const t=new lt(c,l,0,0);g=na.includes(d)?d:t.sideNearestToPoint(n)}return[p,g]}function ca(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e)),i=90*Math.round(sa(r)/90);if(i%180==0&&t.y===e.y)return t.x<e.x?ea.LEFT:ea.RIGHT;if(t.x===e.x)return t.y<e.y?ea.TOP:ea.BOTTOM;switch(i){case 0:case 180:case 360:return t.y<e.y?ea.TOP:ea.BOTTOM;case 90:case 270:return t.x<e.x?ea.LEFT:ea.RIGHT}}function la(t,e,n,r,i,o,s){r===ea.AUTO&&(r=i?ea.MAGNET_SIDE:ea.ANCHOR_SIDE);const a=t&&t.model.isElement(),{x:u,y:c,width:l=0,height:h=0}=a?lt.fromRectUnion(n,t.model.getBBox()):o;return{point:e,x0:u,y0:c,view:t,bbox:n,width:l,height:h,direction:r,margin:a?s:0}}function ha({x:t,y:e}){const n=new $(t,e);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new lt(t,e,0,0),width:0,height:0,direction:null,margin:0}}function fa(t,e,n){const r=e.point.clone(),{x0:i,y0:o,width:s,height:a}=e;switch(t){case"left":r.x=i-n;break;case"right":r.x=i+s+n;break;case"top":r.y=o-n;break;case"bottom":r.y=o+a+n}return r}function da(t,e){const{point:n,x0:r,y0:i,view:o,width:s,height:a,margin:u}=t,{point:c,x0:l,y0:h,width:f,height:d,margin:p}=e,g=l+f,v=h+d,m=r+s,y=i+a,b=o&&o.model.isElement(),x=r-u,w=m+u,_=i-u,A=y+u,S=l-p,E=g+p,k=h-p,T=v+p,[P,C]=ua(t,e),O=fa(P,{point:n,x0:r,y0:i,width:s,height:a},u),M=fa(C,{point:c,x0:l,y0:h,width:f,height:d},p),{x:N,y:L}=O,{x:I,y:j}=M,B=(h+v)/2,R=((r+m)/2<(l+g)/2?m+l:g+r)/2,D=((i+y)/2<B?y+h:v+i)/2;if("left"===P&&"right"===C){if(x<=E){let t=D;return m<=l&&(v>=_&&j<L?t=Math.min(k,_):h<=A&&j>=L&&(t=Math.max(T,A))),[{x:N,y:L},{x:N,y:t},{x:I,y:t},{x:I,y:j}]}const t=(N+I)/2;return[{x:t,y:L},{x:t,y:j}]}if("right"===P&&"left"===C){if(w>=S){let t=D;return N>g&&(v>=_&&j<L?t=Math.min(k,_):h<=A&&j>=L&&(t=Math.max(T,A))),[{x:N,y:L},{x:N,y:t},{x:I,y:t},{x:I,y:j}]}const t=(N+I)/2;return[{x:t,y:L},{x:t,y:j}]}if("top"===P&&"bottom"===C){if(L<j){let t=R,e=L;return L<h&&(g>=x&&I<N?t=Math.min(S,x):l<=w&&I>=N&&(t=Math.max(E,w))),[{x:N,y:e},{x:t,y:e},{x:t,y:j},{x:I,y:j}]}const t=(L+j)/2;return[{x:N,y:t},{x:I,y:t}]}if("bottom"===P&&"top"===C){if(L-u>j){let t=R,e=L;return L>v&&(g>=x&&I<N?t=Math.min(S,x):l<=w&&I>=N&&(t=Math.max(E,w))),[{x:N,y:e},{x:t,y:e},{x:t,y:j},{x:I,y:j}]}const t=(L+j)/2;return[{x:N,y:t},{x:I,y:t}]}if("top"===P&&"top"===C){let t,e=Math.min((y+h)/2,j),n=Math.min((i+v)/2,L);if(j<L){if(N>=E||N<=S)return[{x:N,y:Math.min(L,j)},{x:I,y:Math.min(L,j)}];t=I>N?Math.min(N,S):Math.max(N,E)}else{if(I>=w||I<=x)return[{x:N,y:Math.min(L,j)},{x:I,y:Math.min(L,j)}];t=I>=N?Math.max(I,w):Math.min(I,x)}return[{x:N,y:n},{x:t,y:n},{x:t,y:e},{x:I,y:e}]}if("bottom"===P&&"bottom"===C){let t,e=Math.max((i+v)/2,j),n=Math.max((y+h)/2,L);if(j>L){if(N>=E||N<=S)return[{x:N,y:Math.max(L,j)},{x:I,y:Math.max(L,j)}];t=I>N?Math.min(N,S):Math.max(N,E)}else{if(I>=w||I<=x)return[{x:N,y:Math.max(L,j)},{x:I,y:Math.max(L,j)}];t=I>=N?Math.max(I,w):Math.min(I,x)}return[{x:N,y:n},{x:t,y:n},{x:t,y:e},{x:I,y:e}]}if("left"===P&&"left"===C){let t,e=Math.min((m+l)/2,I),n=Math.min((r+g)/2,N);return t=I>N?j<=L?Math.min(_,j):Math.max(A,j):j>=L?Math.min(k,L):Math.max(T,L),[{x:n,y:L},{x:n,y:t},{x:e,y:t},{x:e,y:j}]}if("right"===P&&"right"===C){let t,e=Math.max((r+g)/2,I),n=Math.max((m+l)/2,N);return t=I<N?j<=L?Math.min(_,j):Math.max(A,j):j>=L?Math.min(k,L):Math.max(T,L),[{x:n,y:L},{x:n,y:t},{x:e,y:t},{x:e,y:j}]}if("top"===P&&"right"===C){if(L>j){if(N<I){let t=D;return(t>B||!b)&&t<T&&N<l&&(t=k),[{x:N,y:t},{x:I,y:t},{x:I,y:j}]}return[{x:N,y:j}]}const t=Math.max(R,E);if(I<N&&j>i&&j<y)return[{x:N,y:L},{x:t,y:L},{x:t,y:j}];if(t>x&&j>i||l>m){const t=Math.min(i-u,h-p),e=Math.max(m+u,g+p);return[{x:N,y:t},{x:e,y:t},{x:e,y:j}]}return[{x:N,y:L},{x:Math.max(t,I),y:L},{x:Math.max(t,I),y:j}]}if("top"===P&&"left"===C){if(L>j){if(N>I){let t=D;return(t>B||!b)&&t<T&&N>g&&(t=k),[{x:N,y:t},{x:I,y:t},{x:I,y:j}]}return[{x:N,y:j}]}const t=Math.min(S,R);if(N<I&&y>=j)return[{x:N,y:L},{x:t,y:L},{x:t,y:j}];if(t<w&&L<v){const t=Math.min(_,k),e=Math.min(x,S);return[{x:N,y:t},{x:e,y:t},{x:e,y:j}]}return[{x:N,y:L},{x:t,y:L},{x:t,y:j}]}if("bottom"===P&&"right"===C){if(L<j){if(N<I){let t=D;return(t<B||!b)&&t>k&&N<l&&(t=T),[{x:N,y:t},{x:I,y:t},{x:I,y:j}]}return[{x:N,y:j}]}if(r<I){const t=Math.max(A,T),e=Math.max(w,E);return[{x:N,y:t},{x:e,y:t},{x:e,y:j}]}return[{x:N,y:L},{x:R,y:L},{x:R,y:j}]}if("bottom"===P&&"left"===C){if(L<j){if(N>I){let t=D;return(t<B||!b)&&t>k&&N>g&&(t=T),[{x:N,y:t},{x:I,y:t},{x:I,y:j}]}return[{x:N,y:j}]}if(m>I){const t=Math.max(A,T),e=Math.min(x,S);return[{x:N,y:t},{x:e,y:t},{x:e,y:j}]}return[{x:N,y:L},{x:R,y:L},{x:R,y:j}]}if("left"===P&&"bottom"===C){if(N>=I&&L>=T)return[{x:I,y:L}];if(N>=g&&L<j)return[{x:R,y:L},{x:R,y:j},{x:I,y:j}];if(I<m&&v<=i)return[{x:N,y:L},{x:N,y:D},{x:I,y:D}];const t=Math.min(S,N),e=Math.max(A,T);return[{x:t,y:L},{x:t,y:e},{x:I,y:e}]}if("left"===P&&"top"===C){if(N>I&&L<k)return[{x:I,y:L}];if(N>=g&&L>j)return[{x:R,y:L},{x:R,y:j},{x:I,y:j}];if(I<=m&&j>L)return[{x:N,y:L},{x:N,y:D},{x:I,y:D}];const t=j<L?Math.min(x,S):x,e=Math.min(_,k);return[{x:t,y:L},{x:t,y:e},{x:I,y:e}]}if("right"===P&&"top"===C){if(N<=I&&L<k)return[{x:I,y:L}];if(m<l&&L>j)return[{x:R,y:L},{x:R,y:j},{x:I,y:j}];if(I<N&&h>y)return[{x:N,y:L},{x:N,y:D},{x:I,y:D}];const t=Math.max(w,E),e=Math.min(_,k);return[{x:t,y:L},{x:t,y:e},{x:I,y:e}]}if("right"===P&&"bottom"===C){if(N<=I&&L>=T)return[{x:I,y:L}];if(N<=S&&L<j)return[{x:R,y:L},{x:R,y:j},{x:I,y:j}];if(I>r&&v<i)return[{x:N,y:L},{x:N,y:D},{x:I,y:D}];const t=Math.max(E,N),e=Math.max(A,T);return[{x:t,y:L},{x:t,y:e},{x:I,y:e}]}}function pa(t,e,n){const{sourceDirection:r=ea.AUTO,targetDirection:i=ea.AUTO}=e,o=e.margin||20,s=e.useVertices||!1,a=!!n.model.source().port,u=la(n.sourceView,n.sourceAnchor,n.sourceBBox,r,a,n.sourceAnchor,o),c=!!n.model.target().port,l=la(n.targetView,n.targetAnchor,n.targetBBox,i,c,n.targetAnchor,o);let h=[];if(!s||0===t.length)return aa(da(u,l));const f=t.map((t=>ha(t))),[d]=f;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(o).containsPoint(d.point)){const[t]=ua(u,d),e=t,n=ha(u.point);n.margin=o,n.direction=t,d.direction=e,h.push(...da(n,d),d.point)}else{const t=function(t,e,n){const[r]=ua(t,e);switch(r){case ea.TOP:return function(t,e,n){const{x0:r,y0:i,width:o,height:s,point:a,margin:u}=t,c=i+s,l=r-u,h=r+o+u,f=i-u,{x:d}=a,{x0:p,y0:g}=e;return p===d&&g<i?ea.BOTTOM:p<d&&g<f?ea.RIGHT:p>d&&g<f?ea.LEFT:p<l&&g>=i||p>h&&g>=i?ea.TOP:p>=l&&p<=d&&g>c||p<=h&&p>=d&&g>c?n.point.x<p?ea.RIGHT:ea.LEFT:ea.TOP}(t,e,n);case ea.RIGHT:return function(t,e,n){const{y0:r,x0:i,width:o,height:s,point:a,margin:u}=t,c=i+o,l=c+u,h=r-u,f=r+s+u,{x:d,y:p}=a,{x0:g,y0:v}=e;return g>d&&v===p?ea.LEFT:g>=l&&v<p?ea.BOTTOM:g>=l&&v>p?ea.TOP:g<=c&&v<=h||g<=c&&v>=f?ea.RIGHT:g<i&&v>=h&&v<=p||g<i&&v<=f&&v>=p?n.point.y<v?ea.BOTTOM:ea.TOP:ea.RIGHT}(t,e,n);case ea.BOTTOM:return function(t,e,n){const{x0:r,y0:i,width:o,height:s,point:a,margin:u}=t,c=i+s,l=r-u,h=r+o+u,f=c+u,{x:d}=a,{x0:p,y0:g}=e;return p===d&&g>c?ea.TOP:p<d&&g>f?ea.RIGHT:p>d&&g>f?ea.LEFT:p<l&&g<=c||p>h&&g<=c?ea.BOTTOM:p>=l&&p<=d&&g<i||p<=h&&p>=d&&g<i?n.point.x<p?ea.RIGHT:ea.LEFT:ea.BOTTOM}(t,e,n);case ea.LEFT:return function(t,e,n){const{y0:r,x0:i,width:o,height:s,point:a,margin:u}=t,c=i+o,l=i-u,h=r-u,f=r+s+u,{x:d,y:p}=a,{x0:g,y0:v}=e;return g<d&&v===p?ea.RIGHT:g<=l&&v<p?ea.BOTTOM:g<=l&&v>p?ea.TOP:g>=i&&v<=h||g>=i&&v>=f?ea.LEFT:g>c&&v>=h&&v<=p||g>c&&v<=f&&v>=p?n.point.y<v?ea.BOTTOM:ea.TOP:ea.LEFT}(t,e,n)}}(u,d,f[1]||l);d.direction=t,h.push(...da(u,d),d.point)}for(let t=0;t<f.length-1;t++){const e=f[t],n=f[t+1],r=sa(new J(e.point,n.point));if(r%90==0){const t=oa[r],i=ra[t];if(t!==e.direction)h.push(e.point,n.point),n.direction=i;else{const t=S(r-90);let i=0,s=0;90===t?s=-o:180===t?i=-o:270===t?s=o:0===t&&(i=o);const a={x:e.point.x+i,y:e.point.y+s},u={x:n.point.x+i,y:n.point.y+s},c=new J(n.point,u);n.direction=oa[sa(c)],h.push(e.point,a,u,n.point)}continue}const[i,s]=ga(e,n);e.direction=i,n.direction=s,h.push(...da(e,n),n.point)}const p=f[f.length-1];if(l.view&&l.view.model.isElement())if(l.view.model.getBBox().inflate(o).containsPoint(p.point)){const[t]=ga(p,l),e=ha(l.point),[,n]=ua(p,l);e.margin=o,e.direction=n,p.direction=t,h.push(...da(p,e))}else{const t=aa(h),e=new J(t[t.length-2],p.point),n=oa[Math.round(sa(e))];p.direction=n;let r=da(p,l);const[i,s]=aa([...r,l.point]),a=new J(i,s),u=Math.round(sa(a)),c=oa[u];c!==n&&n===ra[c]&&(p.margin=o,r=da(p,l)),h.push(...r)}else{const[t]=ga(p,l);p.direction=t,h.push(...da(p,l))}return aa(h)}function ga(t,e){const n=t.direction,r=ia.includes(n);let i=t.direction,o=e.direction;if(r){const r=t.point.y>e.point.y,s=e.point.x-t.point.x;n===ea.BOTTOM?(i=r?ra[n]:s>=0?ea.RIGHT:ea.LEFT,s>0?o=r?ea.LEFT:ea.TOP:s<0&&(o=r?ea.RIGHT:ea.TOP)):(i=r?s>=0?ea.RIGHT:ea.LEFT:ra[n],s>0?o=r?ea.BOTTOM:ea.LEFT:s<0&&(o=r?ea.BOTTOM:ea.RIGHT))}else{const r=t.point.x>e.point.x,s=e.point.y-t.point.y;n===ea.RIGHT?(i=r?ra[n]:s>=0?ea.BOTTOM:ea.TOP,s>0?o=r?ea.TOP:ea.LEFT:s<0&&(o=r?ea.BOTTOM:ea.LEFT)):(i=r?s>=0?ea.BOTTOM:ea.TOP:ra[n],s>0?o=r?ea.RIGHT:ea.TOP:s<0&&(o=r?ea.RIGHT:ea.BOTTOM))}return[i,o]}pa.Directions=ea;const va=pa,ma={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},ya=Object.values(ma),ba=10,xa=1,wa=function(t,e,n=[],r={}){const{cornerType:i=ma.POINT,cornerRadius:o=ba,cornerPreserveAspectRatio:s=!1,precision:a=xa,raw:u=!1}=r;if(-1===ya.indexOf(i))throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i!==ma.POINT&&o){let r;c=new At,c.appendSegment(At.createSegment("M",t));const u=n.length;for(let l=0;l<u;l++){const u=new $(n[l]),h=n[l-1]||t,f=n[l+1]||e,d=r||u.distance(h)/2;let p,g;r=u.distance(f)/2,s?p=g=-Math.min(o,d,r):(p=-Math.min(o,d),g=-Math.min(o,r));const v=u.clone().move(h,p).round(a),m=u.clone().move(f,g).round(a);switch(c.appendSegment(At.createSegment("L",v)),i){case ma.CUBIC:{const t=1/3,e=2/3,n=new $(t*v.x+e*u.x,e*u.y+t*v.y),r=new $(t*m.x+e*u.x,e*u.y+t*m.y);c.appendSegment(At.createSegment("C",n,r,m));break}case ma.LINE:c.appendSegment(At.createSegment("L",m));break;case ma.GAP:c.appendSegment(At.createSegment("M",m))}}c.appendSegment(At.createSegment("L",e))}else{const r=[t].concat(n).concat([e]),i=new gt(r);c=new At(i)}return u?c:c.serialize()};var _a=["arc","gap","cubic"],Aa=["smooth"],Sa=1/3,Ea=2/3;function ka(t,e){let{x:n,y:r}=t,{x:i,y:o}=e;if(n>i){let t=n;n=i,i=t,t=r,r=o,o=t}if(r>o){let t=n;n=i,i=t,t=r,r=o,o=t}return[new $(n,r),new $(i,o)]}function Ta(t,e,n){var r=[].concat(t,n,e);return r.reduce((function(t,e,n){var i=r[n+1];return null!=i&&(t[n]=Z(e,i)),t}),[])}function Pa(t,e){return Z(t,e).squaredLength()}function Ca(t,e,n,r){var i,o=new At;return i=At.createSegment("M",t[0].start),o.appendSegment(i),ci(t).forEach((function(s,a){if(s.isJump){var u,c,l,h;if("arc"===n){u=-90,c=s.start.difference(s.end);var f=Number(c.x<0||0===c.x&&c.y<0);f&&(u+=180);var d,p=s.midpoint(),g=new J(p,s.end).rotate(p,u);l=(d=new J(s.start,p)).pointAt(2/3).rotate(s.start,u),h=g.pointAt(1/3).rotate(g.end,-u),i=At.createSegment("C",l,h,g.end),o.appendSegment(i),d=new J(p,s.end),l=g.pointAt(1/3).rotate(g.end,u),h=d.pointAt(1/3).rotate(s.end,-u),i=At.createSegment("C",l,h,s.end),o.appendSegment(i)}else if("gap"===n)i=At.createSegment("M",s.end),o.appendSegment(i);else if("cubic"===n){u=s.start.theta(s.end);var v=.6*e,m=1.35*e;c=s.start.difference(s.end),(f=Number(c.x<0||0===c.x&&c.y<0))&&(m*=-1),l=$(s.start.x+v,s.start.y+m).rotate(s.start,u),h=$(s.end.x-v,s.end.y+m).rotate(s.end,u),i=At.createSegment("C",l,h,s.end),o.appendSegment(i)}}else{var y=t[a+1];0==r||!y||y.isJump?(i=At.createSegment("L",s.end),o.appendSegment(i)):function(t,e,n,r,i){var o,s=n.distance(r)/2,a=n.distance(i)/2,u=-Math.min(t,s),c=-Math.min(t,a),l=n.clone().move(r,u).round(),h=n.clone().move(i,c).round(),f=new $(Sa*l.x+Ea*n.x,Ea*n.y+Sa*l.y),d=new $(Sa*h.x+Ea*n.x,Ea*n.y+Sa*h.y);o=At.createSegment("L",l),e.appendSegment(o),o=At.createSegment("C",f,d,h),e.appendSegment(o)}(r,o,s.end,s.start,y.end)}})),o}const Oa=function(t,e,n,r){!function(t){var e=t.paper,n=e._jumpOverUpdateList;if(null==n){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",(function(){this.hasActiveBatch()||function(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const t=e[n],r=t.getFlag(t.constructor.Flags.CONNECTOR);t.requestUpdate(r)}}(e)})),r.on("reset",(function(){n=e._jumpOverUpdateList=[]}))}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",(function(){n.splice(n.indexOf(t),1)})))}(this);var i=r.raw,o=r.size||5,s=r.jump&&(""+r.jump).toLowerCase(),a=r.radius||0,u=r.ignoreConnectors||Aa;-1===_a.indexOf(s)&&(s=_a[0]);var c=this.paper,l=c.model.getLinks();if(1===l.length)return Ca(Ta(t,e,n),o,s,a);var h=this.model,f=l.indexOf(h),d=c.options.defaultConnector||{},p=l.filter((function(t,e){var n=t.get("connector")||d;return!(ci(u).includes(n.name)||e>f&&"jumpover"===n.name)})),g=p.map((function(t){return c.findViewByModel(t)})),v=Ta(t,e,n),m=g.map((function(t){return null==t?[]:t===this?v:Ta(t.sourcePoint,t.targetPoint,t.route)}),this),y=v.reduce((function(t,e){var n=p.reduce((function(t,n,r){if(n!==h){const n=m[r].slice(),i=n.findIndex((t=>function(t,e){const[{x:n,y:r},{x:i,y:o}]=ka(t.start,t.end),[{x:s,y:a},{x:u,y:c}]=ka(e.start,e.end);return n<=u&&s<=i&&r<=c&&a<=o}(e,t)));i>-1&&e.containsPoint(n[i].end)&&n.splice(i+1,1);const o=function(t,e){return ci(e).reduce((function(e,n){var r=t.intersection(n);return r&&e.push(r),e}),[])}(e,n);t.push.apply(t,o)}return t}),[]).sort((function(t,n){return Pa(e.start,t)-Pa(e.start,n)}));return n.length>0?t.push.apply(t,function(t,e,n){return e.reduce((function(r,i,o){if(!0===i.skip)return r;var s=r.pop()||t,a=W(i).move(s.start,-n),u=W(i).move(s.start,+n),c=e[o+1];if(null!=c){var l=u.distance(c);l<=n&&(u=c.move(s.start,l),c.skip=!0)}else if(a.distance(s.end)<2*n+1)return r.push(s),r;if(u.distance(s.start)<2*n+1)return r.push(s),r;var h=Z(a,u);return h.isJump=!0,r.push(Z(s.start,a),h,Z(u,s.end)),r}),[])}(e,n,o)):t.push(e),t}),[]),b=Ca(y,o,s,a);return i?b:b.serialize()},Ma=function(t,e,n=[],r={}){const{raw:i}=r;return wa(t,e,n,{cornerType:"point",raw:i})},Na=10,La=function(t,e,n=[],r={}){const{radius:i=Na,raw:o}=r;return wa(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:0,raw:o})},Ia=function(t,e,n,r){var i,o=r&&r.raw;if(n&&0!==n.length){var s=[t].concat(n).concat([e]),a=wt.throughPoints(s);i=new At(a)}else{var u;if(i=new At,u=At.createSegment("M",t),i.appendSegment(u),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;u=At.createSegment("C",c,t.y,c,e.y,e.x,e.y),i.appendSegment(u)}else{var l=(t.y+e.y)/2;u=At.createSegment("C",t.x,l,e.x,l,e.x,e.y),i.appendSegment(u)}}return o?i:i.serialize()},ja={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ba={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ra=function(t,e,n=[],r={},i){const o=Boolean(r.raw),{direction:s=ja.AUTO,precision:a=3}=r,u={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new $(r.sourceTangent):null,targetTangent:r.targetTangent?new $(r.targetTangent):null,rotate:Boolean(r.rotate)};"string"==typeof r.sourceDirection?u.sourceDirection=r.sourceDirection:"number"==typeof r.sourceDirection?u.sourceDirection=new $(1,0).rotate(null,r.sourceDirection):u.sourceDirection=r.sourceDirection?new $(r.sourceDirection).normalize():null,"string"==typeof r.targetDirection?u.targetDirection=r.targetDirection:"number"==typeof r.targetDirection?u.targetDirection=new $(1,0).rotate(null,r.targetDirection):u.targetDirection=r.targetDirection?new $(r.targetDirection).normalize():null;const c=[t,...n,e].map((t=>new $(t)));let l,h;if(u.sourceTangent)l=u.sourceTangent;else{const t=function(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case Ba.UP:return new $(0,-1);case Ba.DOWN:return new $(0,1);case Ba.LEFT:return new $(-1,0);case Ba.RIGHT:return new $(1,0);case Ba.AUTO:return Da(t,e,r);case Ba.CLOSEST_POINT:return Va(0,e);case Ba.OUTWARDS:return Ga(t,e);default:return r.sourceDirection}switch(n){case ja.HORIZONTAL:return function(t,e,n){const{sourceBBox:r}=t;let i,o,s;if(t.sourceView)if(o=t.sourceView.model.angle(),n.rotate&&o){const n=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[0]);else i=r.x>e[1].x?"right":"left";return s=new $("left"===i?-1:1,0),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case ja.VERTICAL:return function(t,e,n){const{sourceBBox:r}=t;let i,o,s;if(t.sourceView)if(o=t.sourceView.model.angle(),n.rotate&&o){const n=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[0]);else i=r.y>e[1].y?"bottom":"top";return s=new $(0,"top"===i?-1:1),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case ja.CLOSEST_POINT:return Va(0,e);case ja.OUTWARDS:return Ga(t,e);case ja.AUTO:default:return Da(t,e,r)}}(i,c,s,u),e=c[0].distance(c[1])*u.coeff,n=Ha(t,c[1].difference(c[0]).normalize());if(n>Math.PI/4){const r=e+(n-Math.PI/4)*u.angleTangentCoefficient;l=t.clone().scale(r,r)}else l=t.clone().scale(e,e)}if(u.targetTangent)h=u.targetTangent;else{const t=function(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case Ba.UP:return new $(0,-1);case Ba.DOWN:return new $(0,1);case Ba.LEFT:return new $(-1,0);case Ba.RIGHT:return new $(1,0);case Ba.AUTO:return Fa(t,e,r);case Ba.CLOSEST_POINT:return za(0,e);case Ba.OUTWARDS:return Ua(t,e);default:return r.targetDirection}switch(n){case ja.HORIZONTAL:return function(t,e,n){const{targetBBox:r}=t;let i,o,s;if(t.targetView)if(o=t.targetView.model.angle(),n.rotate&&o){const n=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[e.length-1]);else i=r.x>e[e.length-2].x?"left":"right";return s=new $("left"===i?-1:1,0),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case ja.VERTICAL:return function(t,e,n){const{targetBBox:r}=t;let i,o,s;if(t.targetView)if(o=t.targetView.model.angle(),n.rotate&&o){const n=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[e.length-1]);else i=r.y>e[e.length-2].y?"top":"bottom";return s=new $(0,"top"===i?-1:1),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case ja.CLOSEST_POINT:return za(0,e);case ja.OUTWARDS:return Ua(t,e);case ja.AUTO:default:return Fa(t,e,r)}}(i,c,s,u),e=c.length-1,n=c[e-1].distance(c[e])*u.coeff,r=Ha(t,c[e-1].difference(c[e]).normalize());if(r>Math.PI/4){const e=n+(r-Math.PI/4)*u.angleTangentCoefficient;h=t.clone().scale(e,e)}else h=t.clone().scale(n,n)}const f=function(t,e,n,r){const{tau:i,coeff:o}=r,s=[],a=[],u=[],c=t.length-1;for(let e=0;e<c;e++)s[e]=t[e].distance(t[e+1]);a[0]=e,a[c]=n;for(let e=1;e<c;e++){let n,r;n=1===e?t[e-1].clone().offset(a[e-1].x,a[e-1].y):t[e-1].clone(),r=e===c-1?t[e+1].clone().offset(a[e+1].x,a[e+1].y):t[e+1].clone();const i=n.difference(t[e]).normalize(),u=r.difference(t[e]).normalize(),l=Ha(i,u);let h,f=(Math.PI-l)/2;const d=$a(i,u);let p;p=$a(t[e].difference(t[e+1]),t[e].difference(t[e-1])),d<0&&(f=-f),l<Math.PI/2&&(f<0&&p<0||f>0&&p>0)&&(f-=Math.PI),h=u.clone(),qa(h,f);const g=h.clone(),v=h.clone(),m=s[e-1]*o,y=s[e]*o;g.scale(m,m),v.scale(y,y),a[e]=[g,v]}for(let e=0;e<c;e++){let n,r;n=0===e?t[e+1].difference(a[e].x/i,a[e].y/i):t[e+1].difference(a[e][1].x/i,a[e][1].y/i),r=e===c-1?t[e].clone().offset(a[e+1].x/i,a[e+1].y/i):t[e].difference(a[e+1][0].x/i,a[e+1][0].y/i),u[e]=[n,t[e],t[e+1],r]}return u}(c,l,h,u),d=f.map((t=>function(t,e){const{tau:n}=e,r=new $;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new $;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new wt(t[1],r,i,t[2])}(t,u))),p=new At(d).round(a);return o?p:p.serialize()};function Da(t,e,n){const{sourceBBox:r}=t;let i,o,s;if(t.sourceView)if(o=t.sourceView.model.angle(),n.rotate&&o){const n=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[0]);else i=r.sideNearestToPoint(e[1]);switch(i){case"top":s=new $(0,-1);break;case"bottom":s=new $(0,1);break;case"right":s=new $(1,0);break;case"left":s=new $(-1,0)}return n.rotate&&o&&s.rotate(null,-o),s}function Fa(t,e,n){const{targetBBox:r}=t;let i,o,s;if(t.targetView)if(o=t.targetView.model.angle(),n.rotate&&o){const n=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[e.length-1]);else i=r.sideNearestToPoint(e[e.length-2]);switch(i){case"top":s=new $(0,-1);break;case"bottom":s=new $(0,1);break;case"right":s=new $(1,0);break;case"left":s=new $(-1,0)}return n.rotate&&o&&s.rotate(null,-o),s}function Va(t,e,n){return e[1].difference(e[0]).normalize()}function za(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function Ga(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function Ua(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function qa(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,o=r*t.x+n*t.y;t.x=i,t.y=o}function Ha(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function $a(t,e){return t.x*e.y-t.y*e.x}Ra.Directions=ja,Ra.TangentDirections=Ba;const Wa={TOOLS:no.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Xa=no.extend({className:function(){var t=no.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){no.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Wa.RENDER],attrs:[Wa.UPDATE],router:[Wa.UPDATE],connector:[Wa.CONNECTOR],smooth:[Wa.UPDATE],manhattan:[Wa.UPDATE],toolMarkup:[Wa.LEGACY_TOOLS],labels:[Wa.LABELS],labelMarkup:[Wa.LABELS],vertices:[Wa.VERTICES,Wa.UPDATE],vertexMarkup:[Wa.VERTICES],source:[Wa.SOURCE,Wa.UPDATE],target:[Wa.TARGET,Wa.UPDATE]},initFlag:[Wa.RENDER,Wa.SOURCE,Wa.TARGET,Wa.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Wa.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Wa.SOURCE)}if(this.hasFlag(t,Wa.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Wa.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,Wa.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),this.removeFlag(t,[Wa.RENDER,Wa.UPDATE,Wa.VERTICES,Wa.LABELS,Wa.TOOLS,Wa.LEGACY_TOOLS,Wa.CONNECTOR]);let o=!1;this.hasFlag(t,Wa.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Wa.VERTICES));const{model:s}=this,{attributes:a}=s;let u=this.hasFlag(t,Wa.LABELS),c=this.hasFlag(t,Wa.LEGACY_TOOLS);u&&(this.onLabelsChange(s,a.labels,e),t=this.removeFlag(t,Wa.LABELS),o=!0),c&&(this.renderTools(),t=this.removeFlag(t,Wa.LEGACY_TOOLS));const l=this.hasFlag(t,Wa.UPDATE),h=this.hasFlag(t,Wa.CONNECTOR);return(l||h)&&(l?e.translateBy&&s.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[Wa.UPDATE,Wa.TOOLS,Wa.CONNECTOR]),u=!1,c=!1,o=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,Wa.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Wa.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Wa.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1&&e[n[1]]){if(2===r)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=ge(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var o=e[r],s=o.attr("class");s&&(s=Ei(s),n[_i.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=ge(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r].node;n.appendChild(o)}else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,n=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var r=n.childNodes;return(e=r.length>1||"G"!==r[0].nodeName.toUpperCase()?ge("g").append(n):ge(r[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],s=o.length;if(0===s)return e&&e.remove(),this;e?e.empty():(e=t.labels=ge("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(Si(vi(this,"className"))),e.attr("model-id",i.id)));for(var a=0;a<s;a++){var u,c,l=o[a],h=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup));if(h)u=h.node,c=h.selectors;else{var f=i._builtins.defaultLabel,d=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),p=i._getDefaultLabel(),g=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup))||d;u=g.node,c=g.selectors}u.setAttribute("label-idx",a),e.append(u),n[a]=u;var v=this.selector;if(c[v])throw new Error("dia.LinkView: ambiguous label root selector.");c[v]=u,r[a]=c}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:s}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(s,n.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){if(null===e)return null;if(void 0===e){if(null===n)return null;if(void 0===n){if(t)return;return r}return t?n:wi({},r,n)}return t?wi({},n,e):wi({},r,n,e)},_mergeLabelSize:function(t,e){if(null===t)return null;if(void 0===t){if(null===e)return null;if(void 0===e)return;return e}return wi({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel.attrs,i=t._getDefaultLabel(),o=i.markup,s=i.attrs,a=i.size,u=0,c=e.length;u<c;u++){var l=this._labelCache[u];l.setAttribute("cursor",n?"move":"default");var h=this._labelSelectors[u],f=e[u],d=f.markup,p=f.attrs,g=f.size,v=this._mergeLabelAttrs(d||o,p,s,r),m=this._mergeLabelSize(g,a);this.updateDOMSubtreeAttributes(l,v,{rootBBox:new lt(m),selectors:h})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=_i(this._V.linkTools.node).empty(),n=Wi(this.model.get("toolMarkup")||this.model.toolMarkup),r=ge(n());return e.append(r.node),this._toolCache=r,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=Wi(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),t=ge(n())):t=r.clone(),e.append(t.node),this._tool2Cache=t),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=_i(this._V.markerVertices.node).empty(),e=Wi(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach((function(n,r){t.append(ge(e(Jr({idx:r},n))).node)})),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=_i(this._V.markerArrowheads.node);t.empty();var e=Wi(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=ge(e({end:"source"})),this._V.targetArrowhead=ge(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const e=this.model,n=e.vertices(),r=[this.sourceAnchor,...n,this.targetAnchor],i=r.length,o=new gt(r);o.simplify({threshold:.001});const s=o.points.map((t=>t.toJSON())),a=s.length;return i===a?0:(e.vertices(s.slice(1,a-1),t),i-a)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new $(this.sourceAnchor);case"target":return new $(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new $(this.sourcePoint);case"target":return new $(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new gt(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,o=this.findRoute(e);this.route=o;var s=this.findConnectionPoints(o,r,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r,i,o=t[0],s=t[t.length-1],a=this._markerCache;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),r=$(e).move(o||n,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),i=$(n).move(s||e,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=r||e.clone(),a.targetPoint=i||n.clone(),{source:r,target:i}},findAnchorsOrdered:function(t,e,n,r){var i,o,s,a,u=this.model,c=u.get(t),l=u.get(n),h=this.getEndView(t),f=this.getEndView(n),d=this.getEndMagnet(t),p=this.getEndMagnet(n);h?(s=e?new $(e):f?p:new $(l),i=this.getAnchor(c.anchor,h,d,s,t)):i=new $(c),f?(a=new $(r||i),o=this.getAnchor(l.anchor,f,p,a,n)):o=new $(l);var g={};return g[t]=i,g[n]=o,g},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r,i,o,s,a=t[0],u=t[t.length-1],c=this.model,l=c.get("source"),h=c.get("target"),f=this.sourceView,d=this.targetView,p=this.paper.options;if(f&&!f.isNodeConnection(this.sourceMagnet)){r=this.sourceMagnet||f.el;var g=l.connectionPoint||p.defaultConnectionPoint,v=new J(a||n,e);o=this.getConnectionPoint(g,f,r,v,"source")}else o=e;if(d&&!d.isNodeConnection(this.targetMagnet)){i=this.targetMagnet||d.el;var m=h.connectionPoint||p.defaultConnectionPoint,y=new J(u||e,n);s=this.getConnectionPoint(m,d,i,y,"target")}else s=n;return{source:o,target:s}},getAnchor:function(t,e,n,r,i){var o,s=e.isNodeConnection(n),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var u=t.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][u]))throw new Error("Unknown anchor: "+u)}var c=o.call(this,e,n,r,t.args||{},i,this);return c?c.round(this.decimalsRounding):new $},getConnectionPoint:function(t,e,n,r,i){var o,s,a=r.end,u=this.paper.options;if("function"==typeof u.linkConnectionPoint){var c=n===e.el?void 0:n;if(o=u.linkConnectionPoint(this,e,c,r.start,i))return o}if(!t)return a;if("function"==typeof t)s=t;else{var l=t.name;if("function"!=typeof(s=u.connectionPointNamespace[l]))throw new Error("Unknown connection point: "+l)}return(o=s.call(this,r,e,n,t.args||{},i,this))?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel.position,n=t._getDefaultLabel(),r=this._normalizeLabelPosition(n.position);return wi({},e,r)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return null===t?null:void 0===t?null===e?null:e:wi({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model.get("labels")||[];if(!t.length)return this;for(var e=this._getDefaultLabelPositionProperty(),n=0,r=t.length;n<r;n++){var i=this._labelCache[n];if(i){var o=t[n],s=this._normalizeLabelPosition(o.position),a=this._mergeLabelPositionProperty(s,e),u=this._getLabelTransformationMatrix(a);i.setAttribute("transform",ge.matrixToTransformString(u)),this._cleanLabelMatrices(n)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let t in r){const{id:n}=r[t];n&&n in e&&delete e[n].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===_i.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[r]=null,this.updateEndMagnet(t),!0;const s=n.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");const a=s.findView(n);return!!a&&(this[r]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=ci(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){return this._getLabelPositionProperty(t).angle||0},_getLabelPositionArgs:function(t){return this._getLabelPositionProperty(t).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:wi({},e,t)},addLabel:function(t,e,n,r){var i,o,s,a=0;"number"!=typeof t?(i=t.x,o=t.y,"number"==typeof e?(a=e,s=n):s=e):(i=t,o=e,"number"==typeof n?(a=n,s=r):s=n);var u=this._getDefaultLabelPositionArgs(),c=s,l=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,o,a,l)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(t,e,n){var r="number"!=typeof t,i=r?t.x:t,o=r?t.y:e,s=r?e:n,a={x:i,y:o},u=this.getVertexIndex(i,o);return this.model.insertVertex(u,a,s),u},sendToken:function(t,e,n){var r,i,o;Wr(e)?(r=e.duration,i="reverse"===e.direction,o=e.connection):(r=e,i=!1,o=null);var s={dur:(r=r||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};i&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,u=ge(t);if("string"==typeof o)a=this.findBySelector(o,this.el,this.selectors)[0];else{var c=this._V;a=c.connection?c.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout(function(t,e){return function(){t.remove(),"function"==typeof e&&e()}}(u,n),r)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||u,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return t.map($);n=r}var i=ai(n)?n:e[n.name];if(!ai(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{};return i.call(this,t,o,this)||t.map($)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||c,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var s=ai(i)?i:r[i.name];if(!ai(s))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=ri(i.args||{});a.raw=!0;var u=s.call(this,e,n,t,a,this);return"string"==typeof u&&(u=new At(ge.normalizePathData(u))),u},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Di(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i,o={},s=0;"number"==typeof n?(s=n,i=r):i=n,i&&(o.args=i);var a,u,c=!(i&&i.absoluteDistance),l=i&&i.absoluteDistance&&i.reverseDistance,h=i&&i.absoluteOffset,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=new $(t,e),g=f.closestPointT(p,d),v=f.lengthAtT(g,d);if(c&&(v=v/this.getConnectionLength()||0),l&&(v=-1*(this.getConnectionLength()-v)||1),o.distance=v,h||(a=f.tangentAtT(g)),a)u=a.pointOffset(p);else{var m=f.pointAtT(g),y=p.difference(m);u={x:y.x,y:y.y}}return o.offset=u,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");r=t.args||{},e=t.distance,n=t.angle||0}var i=e>0&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var u,c=0!==s.x||0!==s.y||0===o,l=r.keepGradient,h=r.ensureLegibility,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=i?e*this.getConnectionLength():e,g=f.tangentAtLength(p,d),v=n;if(g){if(c)(u=g.start.clone()).offset(s);else{var m=g.clone();m.rotate(g.start,-90),m.setLength(o),u=m.end}l&&(v=g.angle()+n,h&&(v=S((v+90)%180-90)))}else u=f.start.clone(),c&&u.offset(s);return ge.createSVGMatrix().translate(u.x,u.y).rotate(v)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new $(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model.vertices(),r=this.getClosestPointLength(new $(t,e)),i=0,o=n.length;i<o;i++){var s=n[i];if(r<this.getClosestPointLength(s))break}return i},notifyPointerdown(t,e,n){no.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){no.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),no.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){no.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){no.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){no.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){switch(this.notifyPointerdown(t,e,n),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,n);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,n);case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;switch(r&&this.eventData(t,r),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}r&&Jr(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;switch(r&&(this.eventData(t,r),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){no.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){no.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){no.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){no.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){no.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){if(ge(t.target).findParentByClass("link-tool",this.el)){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,n,r)}this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else no.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(s,o),u=this.getLabelCoordinates(a),c=u.x-e,l=u.y-n,h=this._getLabelPositionAngle(i),f=this._getLabelPositionArgs(i),d=this._getDefaultLabelPositionArgs(),p=this._mergeLabelPositionArgs(f,d);this.eventData(t,{action:"label-move",labelIdx:i,dx:c,dy:l,positionAngle:h,positionArgs:p,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target.getAttribute("end"),i=this.startArrowheadMove(r,{ignoreBackwardsCompatibility:!0});this.eventData(t,i)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const o={ui:!0};this.paper.isAsync()&&"touchmove"===t.type&&(o.async=!1),this.model.label(r.labelIdx,i,o)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n);if(i&&!ms.endsEqual(r,i)){var o=this.paper;r.id&&this.notify("link:disconnect",e,o.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,o.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,o=null,s=1/0,a=t.x,u=t.y;for(let n=0;n<e.length;n++){const a=Math.abs(e[n].x-t.x);a<i&&(i=a,r=e[n]);const u=Math.abs(e[n].y-t.y);u<s&&(s=u,o=e[n])}return i<n&&(a=r.x),s<n&&(u=o.y),{x:a,y:u}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:o}=r.options,s=this.eventData(t),a=o.radius||20,u=[this.getEndAnchor("source"===s.arrowhead?"target":"source"),...i.vertices()],c=this._snapToPoints({x:e,y:n},u,a),l=r.localToClientPoint(c);this._connectArrowhead(document.elementFromPoint(l.x,l.y),c.x,c.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:o}=r.options,s=this.eventData(t);let a=!1;var u=i.radius||50,c=r.findViewsInArea({x:e-u,y:n-u,width:2*u,height:2*u}),l=s.closestView||null,h=s.closestMagnet||null,f=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var d,p=Number.MAX_VALUE,g=new $(e,n);c.forEach((function(t){const e=[];"false"!==t.el.getAttribute("magnet")&&e.push({bbox:t.model.getBBox(),magnet:t.el}),t.$("[magnet]").toArray().forEach((n=>{e.push({bbox:t.getNodeBBox(n),magnet:n})})),e.forEach((e=>{const{magnet:n,bbox:i}=e,o=i.center().squaredDistance(g);o<p&&(h===n||r.options.validateConnection.apply(r,s.validateConnectionArgs(t,t.el===n?null:n)))&&(p=o,s.closestView=t,s.closestMagnet=n)}))}),this);var v=null,m=s.closestView,y=s.closestMagnet;y&&(v=s.magnetProxy=m.findProxyNode(y,"highlighter"));var b=s.arrowhead,x=h!==y;if(l&&x&&l.unhighlight(f,{connecting:!0,snapping:!0}),m){const{prevEnd:t,prevX:r,prevY:i}=s;if(s.prevX=e,s.prevY=n,a=!0,!x&&("function"!=typeof o||r===e&&i===n))return a;if(d=m.getLinkEnd(y,e,n,this.model,b),!x&&si(t,d))return a;s.prevEnd=d,x&&m.highlight(v,{connecting:!0,snapping:!0})}else d={x:e,y:n};return this.model.set(b,d||{x:e,y:n},{ui:!0}),l&&this.notify("link:snap:disconnect",t,l,h,b),m&&this.notify("link:snap:connect",t,m,y,b),a},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:o}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const e=r.viewUnderPointer=i.findView(t);if(e){const n=r.magnetUnderPointer=e.findMagnet(t),o=r.magnetProxy=e.findProxyNode(n,"highlighter");n&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(e,n))?o&&e.highlight(o,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,o.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:s,arrowhead:a}=t;if(!o||!s||!i)return;i.unhighlight(s,{connecting:!0});const u=i.getLinkEnd(o,e,n,r,a);r.set(a,u,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,n=[];n[4]=t,n[5]=this;var r=0,i=0;"source"===t?(r=2,e="target"):(i=2,e="source");var o=this.model.get(e);if(o.id){var s=n[r]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),n[r+1]=a}return function(t,e){return n[i]=t,n[i+1]=t.el===e?void 0:e,n}},_markAvailableMagnets:function(t){function e(t,e){var n=t.paper;return n.options.validateConnection.apply(n,this.validateConnectionArgs(t,e))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,o=r.length;i<o;i++){var s=r[i].findView(n);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var u=a.filter(e.bind(t,s));if(u.length>0){for(var c=0,l=u.length;c<l;c++)s.highlight(u[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=u}}}},_unmarkAvailableMagnets:function(t){for(var e,n,r=Object.keys(t.marked),i=0,o=r.length;i<o;i++){e=r[i],n=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,u=n.length;a<u;a++)s.unhighlight(n[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:ri(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n},onMount:function(){no.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){no.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){no.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Wa});Object.defineProperty(Xa.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new lt(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new lt(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(Xa.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new lt(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new lt(this.targetAnchor):t.getNodeBBox(n||t.el)}});const Ya={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Ja(t,e){const n=new lt(t);switch(e){case void 0:throw new Error("Position required");case Ya.LEFT:case"leftMiddle":return n.leftMiddle();case Ya.RIGHT:case"rightMiddle":return n.rightMiddle();case Ya.TOP:case"topMiddle":return n.topMiddle();case Ya.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Ya.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Ya.TOP_RIGHT:case"topRight":return n.topRight();case Ya.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Ya.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Ya.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}const Za=Lo.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Lo.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=Xr(e);n=(r?n:t)||{};const{parentRelative:i,deep:o,restrictedArea:s}=n;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const t=this.getParentCell();t&&!t.isLink()&&(a=t.get("position"))}if(r){if(a&&(t+=a.x,e+=a.y),o||s){const{x:r,y:i}=this.get("position");this.translate(t-r,e-i,n)}else this.set("position",{x:t,y:e},n);return this}{const t=$(this.get("position"));return i?t.difference(a):t}},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if("function"==typeof i){var o=i.call(this,r.x+t,r.y+e,n);t=o.x-r.x,e=o.y-r.y}else{var s=this.getBBox({deep:!0}),a=r.x-s.x,u=r.y-s.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-s.width,r.x+t)),l=Math.max(i.y+u,Math.min(i.y+i.height+u-s.height,r.y+e));t=c-r.x,e=l-r.y}var h={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(Wr(n.transition)||(n.transition={}),this.transition("position",h,Jr({},n.transition,{valueFunction:Hi.object})),Qr(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",h,n),Qr(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(Wr(t)&&(n=e,e=Xr(t.height)?t.height:r.height,t=Xr(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var i,o=S(this.get("angle")||0),s=this.getBBox();if(o){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(a+=Math.floor((o+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=$(u).rotate(s.center(),-o),l=Math.sqrt(t*t+e*e)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?e/t:t/e),h-=T(o);var f=$.fromPolar(l,h,c);i=$(f).offset(t/-2,e/-2)}else switch(i=s.topLeft(),n.direction){case"top":case"top-right":i.offset(0,s.height-e);break;case"left":case"bottom-left":i.offset(s.width-t,0);break;case"top-left":i.offset(s.width-t,s.height-e)}this.set("size",{width:t,height:e},n),this.position(i.x,i.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter((t=>t.isElement()));return 0===n.length||(this.startBatch("fit-embeds",t),t.deep&&Qr(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds")),this},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter((t=>t.isElement()));return 0===r.length||(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent")),this},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:o,width:s,height:a}=e;const{left:u,right:c,top:l,bottom:h}=Ui(t.padding);i-=u,o-=l,s+=u+c,a+=h+l;let f=new lt(i,o,s,a);if(n)f=this.getBBox().union(f);else if(r){const t=this.getBBox().intersect(f);if(!t)return;f=t}this.set({position:{x:f.x,y:f.y},size:{width:f.width,height:f.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),s=this.get("position");i.rotate(n,this.get("angle")-t);var a=i.x-o.width/2-s.x,u=i.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(s.x+a,s.y+u,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return S(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const n=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return n.push(this),e.getCellsBBox(n,t)}const{angle:o=0,position:{x:s,y:a},size:{width:u,height:c}}=n,l=new lt(s,a,u,c);return i&&l.rotateAroundCenter(o),l},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),u=new $(a[o]).offset(n.origin()),c=this.angle();return c&&u.rotate(r,-c),u}});Jr(Za.prototype,hs);const Ka={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof Lo?r=e:r instanceof Lo&&(e.length>1&&e.pop(),r=e)),i instanceof Lo&&(i={}),t.call(this,r,i)}}},Qa=Yi.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&gi(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=new("link"===t.type?ms:Pi(r,t.type,".")||Za)(t,e);return e.dry||(i.graph=n.graph),i},comparator:function(t){return t.get("z")||0}}),tu=Yi.Model.extend({initialize:function(t,e){var n=new Qa([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});Yi.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Yi.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return"object"==typeof t?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=mi(r,"cells")),Yi.Model.prototype.set.call(this,r,n)},clear:function(t){t=Jr({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy((function(t){return t.isLink()?1:2}));do{n.shift().remove(t)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Yi.Model?(n=t.attributes,t.graph||e&&e.dry||(t.graph=this)):n=t,!Yr(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Yi.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=hi(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach((function(t){this.addCell(t,e),e.position--}),this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=ci(t).map((function(t){return this._prepareCell(t,e)}),this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Qr(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter((t=>t.isElement()))},getLinks:function(){return this.get("cells").filter((t=>t.isLink()))},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).indirect,r=e.inbound,i=e.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=[],s={};function a(t,e){if(bi(t.getOutboundEdges(e.id),function(e,c){if(!s[c]){var l=t.getCell(c);o.push(l),s[c]=!0,n&&(r&&u(t,l),i&&a(t,l))}}.bind(t)),n&&e.isLink()){var c=e.getTargetCell();c&&c.isLink()&&(s[c.id]||(o.push(c),a(t,c)))}}function u(t,e){if(bi(t.getInboundEdges(e.id),function(e,c){if(!s[c]){var l=t.getCell(c);o.push(l),s[c]=!0,n&&(r&&u(t,l),i&&a(t,l))}}.bind(t)),n&&e.isLink()){var c=e.getSourceCell();c&&c.isLink()&&(s[c.id]||(o.push(c),u(t,c)))}}if(i&&a(this,t),r&&u(this,t),e.deep){var c=t.getEmbeddedCells({deep:!0}),l={};c.forEach((function(t){t.isElement()&&(l[t.id]=!0)})),c.forEach((function(t){t.isLink()||(i&&bi(this.getOutboundEdges(t.id),function(t,n){if(!s[n]){var r=this.getCell(n),{source:i,target:a}=r.attributes,u=i.id,c=a.id;if(!e.includeEnclosed&&u&&l[u]&&c&&l[c])return;o.push(this.getCell(n)),s[n]=!0}}.bind(this)),r&&bi(this.getInboundEdges(t.id),function(t,n){if(!s[n]){var r=this.getCell(n),{source:i,target:a}=r.attributes,u=i.id,c=a.id;if(!e.includeEnclosed&&u&&l[u]&&c&&l[c])return;o.push(this.getCell(n)),s[n]=!0}}.bind(this)))}),this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce(function(i,o){var{source:s,target:a}=o.attributes,u=o.hasLoop(e);if(n&&gi(s,"id")&&!i[s.id]){var c=this.getCell(s.id);c.isElement()&&(!u&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(i[s.id]=c))}if(r&&gi(a,"id")&&!i[a.id]){var l=this.getCell(a.id);l.isElement()&&(!u&&(!l||l===t||e.deep&&l.isEmbeddedIn(t))||(i[a.id]=l))}return i}.bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(r){var s=t.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return ci(i)},getCommonAncestor:function(){var t=Array.from(arguments).map((function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e}),this);t=t.sort((function(t,e){return t.length-e.length}));var e=ci(t.shift()).find((function(e){return t.every((function(t){return t.includes(e)}))}));return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,(function(e){e!==t&&n.push(e)}),Jr({},e,{outbound:!0})),n},cloneCells:io,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],o=[];return ci(t).forEach((function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t)),e.deep&&t.getEmbeddedCells({deep:!0}).forEach((function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t))}))})),o.forEach((function(t){var{source:e,target:o}=t.attributes;if(e.id&&!r[e.id]){var s=this.getCell(e.id);n.push(s),r[s.id]=s,i.push(s)}if(o.id&&!r[o.id]){var a=this.getCell(o.id);n.push(this.getCell(o.id)),r[a.id]=a,i.push(a)}}),this),i.forEach((function(t){this.getConnectedLinks(t,e).forEach((function(t){var{source:e,target:i}=t.attributes;!r[t.id]&&e.id&&r[e.id]&&i.id&&r[i.id]&&(n.push(t),r[t.id]=t)}))}),this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,(function(e){e!==t&&n.push(e)}),Jr({},e,{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var s=o.shift();if(r[s.id])continue;if(r[s.id]=!0,!1===e.call(this,s,i[s.id]))continue;const t=this.getNeighbors(s,n);for(let e=0,n=t.length;e<n;e++){const n=t[e];i[n.id]=i[s.id]+1,o.push(n)}}},dfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){const t=o.pop();if(r[t.id])continue;if(r[t.id]=!0,!1===e.call(this,t,i[t.id]))continue;const s=this.getNeighbors(t,n),a=o.length;for(let e=0,n=s.length;e<n;e++){const n=s[e];i[n.id]=i[t.id]+1,o.splice(a,0,n)}}},getSources:function(){var t=[];return bi(this._nodes,function(e,n){this._in[n]&&!oi(this._in[n])||t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return bi(this._nodes,function(e,n){this._out[n]&&!oi(this._out[n])||t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||oi(this._in[t.id])},isSink:function(t){return!this._out[t.id]||oi(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,(function(r){if(r===e&&r!==t)return n=!0,!1}),{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,(function(r){if(r===e&&r!==t)return n=!0,!1}),{inbound:!0}),n},isNeighbor:function(t,e,n){var r=(n=n||{}).inbound,i=n.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=!1;return this.getConnectedLinks(t,n).forEach((function(t){var{source:n,target:s}=t.attributes;return r&&gi(n,"id")&&n.id===e.id||i&&gi(s,"id")&&s.id===e.id?(o=!0,!1):void 0})),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach((function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)}))},removeLinks:function(t,e){Qr(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter((e=>e.getBBox({rotate:!0}).containsPoint(t)))},findModelsInArea:function(t,e={}){const n=new lt(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter((t=>n[i](t.getBBox({rotate:!0}))))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===n?this.findModelsInArea(r):this.findModelsFromPoint(Ja(r,n))).filter((e=>t.id!==e.id&&!e.isEmbeddedIn(t)))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return ci(t).reduce((function(t,e){const r=e.getBBox({rotate:n});return r?t?t.union(r):r:t}),null)},translate:function(t,e,n){var r=this.getCells().filter((function(t){return!t.isEmbedded()}));return Qr(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),s=Math.max(e/i.height,0);Qr(n,"scale",o,s,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Jr({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Jr({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return n=0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t],n.some((t=>e[t]>0))}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i&&t.getConnectedLinks(i,{outbound:!0}).filter((function(t){var{source:e,target:i}=t.attributes;return e&&e.id===n.id&&(!e.port||e.port===n.port)&&i&&i.id===r.id&&(!i.port||i.port===r.port)})).length>1)return!1}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});!function(t,e,n){if(Yr(n)){if(!Ka[n])throw new Error('Unknown wrapper: "'+n+'"');n=Ka[n]}if(!ai(n))throw new Error("Wrapper must be a function.");ci(["resetCells","addCells","removeCells"]).forEach((function(e){t[e]=n(t[e])}))}(tu.prototype,0,Ka.cells);const eu={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},nu=Zi.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Si(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;(t=+t)||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let e in n)e=+e,e<t&&e>i&&(i=e);if(i!==-1/0){const t=n[i];e.insertBefore(r,t.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}}),ru=to.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const t=ge(e);if(i=t.convertToPathData().trim(),"PATH"===t.tagName()&&r){const t=i.search(/.M/i)+1;t>0&&(i=i.substr(0,t))}}catch(r){const o=t.getNodeBoundingRect(e);i=ge.rectToPath(Jr({},n,o.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:o}=r;let s=this.getNodeMatrix(t,e);if(i){o||e!==t.el||n.remove();let r=t.getNodeBoundingRect(e);const a=r.x+r.width/2,u=r.y+r.height/2;r=ge.transformRect(r,s);const c=Math.max(r.width,1),l=Math.max(r.height,1),h=(c+i)/c,f=(l+i)/l,d=ge.createSVGMatrix({a:h,b:0,c:0,d:f,e:a-h*a,f:u-f*u});s=s.multiply(d)}n.attr({d:this.getPathData(t,e),transform:ge.matrixToTransformString(s)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),iu=20,ou=to.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:iu,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!ge.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(r.includes(o)){const n=t.vel.findOne(`#${e.id}`);if(n){const{node:r}=n;let i=t.getNodeBoundingRect(r);t.model.isElement()&&(i=ge.transformRect(i,t.getNodeMatrix(r)));const o=ge("rect",i.toJSON()),{x:s,y:a}=i.center(),{angle:u,cx:c=s,cy:l=a}=n.rotate();u&&o.rotate(u,c,l),e.parent().append(o)}return e.remove(),!1}return n.forEach((t=>{"fill"===t&&"none"===e.attr("fill")||e.removeAttr(t)})),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach((t=>{e.removeAttr(t)}))},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,o=e.tagName();let s;if("G"===o){if(!i)return null;s=e.clone(),function(t,e){const n=t.children();for(;n.length>0;){const t=n.shift();e(t)&&n.push(...t.children())}}(s,(e=>this.transformMaskChild(t,e)))}else{if(r.includes(o))return null;s=e.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:o,attrs:s}=i,a="stroke-width"in s?s["stroke-width"]:1,u="none"!==e.attr("fill");let c=parseFloat(e.attr("stroke-width"));isNaN(c)&&(c=1);const l=c+2*o,h=l+2*a;let f=this.getMaskShape(t,e);if(!f){const n=t.getNodeBoundingRect(e.node);n.inflate(n.width?0:.5,n.height?0:.5),f=ge("rect",n.toJSON())}return f.attr(s),ge("mask",{id:this.getMaskId()}).append([f.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":h}),f.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":l})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:o,maskClip:s=iu,layer:a}=n,u="stroke"in o?o.stroke:"#000000";a||e!==t.el||r.remove();const c=t.getNodeBoundingRect(e).inflate(i+s),l=this.getNodeMatrix(t,e),h=this.getMask(t,ge(e));this.addMask(t.paper,h),r.attr(c.toJSON()),r.attr({transform:ge.matrixToTransformString(l),mask:`url(#${h.id})`,fill:u})},unhighlight(t){this.removeMask(t.paper)}}),su=to.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Si("highlight-opacity"),highlight:function(t,e){ge(e).addClass(this.opacityClassName)},unhighlight:function(t,e){ge(e).removeClass(this.opacityClassName)}}),au=Si("highlighted"),uu=to.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:au},highlight:function(t,e){ge(e).addClass(this.options.className)},unhighlight:function(t,e){ge(e).removeClass(this.options.className)}},{className:au}),cu={ROW:"row",COLUMN:"column"},lu=to.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:o=5,direction:s=cu.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const a="number"==typeof i?{width:i,height:i}:i,u=s===cu.ROW,c=u?a.width:a.height;let l=n.get(r);Array.isArray(l)||(l=[]);const h=this._prevItems||[],f=l.map(((t,e)=>si(h[e],l[e])));if(h.length!==l.length||f.some((t=>!t))){const t=this.vel.children(),e=l.map(((e,n)=>{const i=n in t?t[n].node:null;if(f[n])return i;const s=this.createListItem(e,a,i);if(!s)return null;if(!(s instanceof SVGElement))throw new Error("List: item must be an SVGElement");s.dataset.index=n,s.dataset.attribute=r;const l=n*(c+o);return s.setAttribute("transform",u?`translate(${l}, 0)`:`translate(0, ${l})`),s}));this.vel.empty().append(e),this._prevItems=l}const d=l.length,p=0===d?0:d*c+(d-1)*o,g=u?{width:p,height:a.height}:{width:a.width,height:p};this.position(n,g)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:o="top-left"}=r,{width:s,height:a}=t.size(),{left:u,right:c,top:l,bottom:h}=Ui(i),f=new lt(u,l,s-(u+c),a-(l+h));let{x:d,y:p}=Ja(f,o);switch(o){case Ya.CENTER:case Ya.TOP:case Ya.BOTTOM:d-=e.width/2;break;case Ya.RIGHT:case Ya.BOTTOM_RIGHT:case Ya.TOP_RIGHT:d-=e.width}switch(o){case Ya.CENTER:case Ya.RIGHT:case Ya.LEFT:p-=e.height/2;break;case Ya.BOTTOM:case Ya.BOTTOM_RIGHT:case Ya.BOTTOM_LEFT:p-=e.height}n.attr("transform",`translate(${d}, ${p})`)}},{Directions:cu,Positions:Ya});function hu(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function fu(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function du(t){return function(e,n,r,i){if(r instanceof Element){var o,s=this.paper.findView(r);return o=s?s.isNodeConnection(r)?pu(s,"fixedAt"in i?i.fixedAt:"50%"):s.getNodeBBox(r).center():new $,t.call(this,e,n,o,i)}return t.apply(this,arguments)}}function pu(t,e){var n=parseFloat(e);return Di(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const gu=du((function(t,e,n,r){var i=1e6,o=t.getConnection(),s=t.getConnectionSubdivisions(),a=new J(n.clone().offset(0,i),n.clone().offset(0,-i)),u=new J(n.clone().offset(i,0),n.clone().offset(-i,0)),c=a.intersect(o,{segmentSubdivisions:s}),l=u.intersect(o,{segmentSubdivisions:s}),h=[];return c&&Array.prototype.push.apply(h,c),l&&Array.prototype.push.apply(h,l),h.length>0?n.chooseClosest(h):"fallbackAt"in r?pu(t,r.fallbackAt):vu(t,e,n,r)})),vu=du((function(t,e,n,r){return t.getClosestPoint(n)||new $}));function mu(t,e,n){if(ui(n)){const{x:r,y:i}=n;if(isFinite(i)){const n=new J(e,t),{start:r,end:o}=n.parallel(i);e=r,t=o}n=r}if(!isFinite(n))return t;var r=t.distance(e);return 0===n&&r>0?t:t.move(e,-Math.min(n,r-1))}function yu(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function bu(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(yu(n)/2);var o=t.intersect(i);return mu(o?t.start.chooseClosest(o):t.end,t.start,r.offset)}var xu="segmentSubdivisons",wu="shapeBBox";const _u=function(t,e,n,r){let{offset:i,alignOffset:o,align:s}=r;return s&&function(t,e,n=0){let r,i,o,s;const{start:a,end:u}=t;switch(e){case"left":r="x",i=u,o=a,s=-1;break;case"right":r="x",i=a,o=u,s=1;break;case"top":r="y",i=u,o=a,s=-1;break;case"bottom":r="y",i=a,o=u,s=1;break;default:return}a[r]<u[r]?i[r]=o[r]:o[r]=i[r],isFinite(n)&&(i[r]+=s*n,o[r]+=s*n)}(t,s,o),mu(t.end,t.start,i)},Au=bu,Su=function(t,e,n,r){var i=e.model.angle();if(0===i)return bu(t,e,n,r);var o=e.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(yu(n)/2);var s=o.center(),a=t.clone().rotate(s,i),u=a.setLength(1e6).intersect(o);return mu(u?a.start.chooseClosest(u).rotate(s,-i):t.end,t.start,r.offset)},Eu=function(t,e,n,r){var i,o,s=r.selector,a=t.end;if(i="string"==typeof s?e.findBySelector(s)[0]:!1===s?n:Array.isArray(s)?Pi(n,s):function(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!ge.isSVGGraphicsElement(i)){if(i===n||!ge.isSVGGraphicsElement(n))return a;i=n}var u,c=e.getNodeShape(i),l=e.getNodeMatrix(i),h=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),d=h.multiply(f).multiply(l),p=d.inverse(),g=ge.transformLine(t,p),v=g.start.clone(),m=e.getNodeData(i);if(!1===r.insideout&&(m[wu]||(m[wu]=c.bbox()),m[wu].containsPoint(v)))return a;if(c instanceof At){var y=r.precision||2;m[xu]||(m[xu]=c.getSegmentSubdivisions({precision:y})),u={precision:y,segmentSubdivisions:m[xu]}}!0===r.extrapolate&&g.setLength(1e6),(o=g.intersect(c,u))?ge.isArray(o)&&(o=v.chooseClosest(o)):!0===r.sticky&&(o=c instanceof lt?c.pointNearestToPoint(v):c instanceof et?c.intersectionWithLineFromCenterToPoint(v):c.closestPoint(v,u));var b=o?ge.transformPoint(o,d):a,x=r.offset||0;return r.stroke&&(x+=yu(i)/2),mu(b,t.start,x)};function ku(t){return function(e,n,r,i){var o=!!i.rotate,s=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),a=s[t](),u=i.dx;if(u){var c=Di(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=s.width),a.x+=u)}var l=i.dy;if(l){var h=Di(l);l=parseFloat(l),isFinite(l)&&(h&&(l/=100,l*=s.height),a.y+=l)}return o?a.rotate(e.model.getBBox().center(),-e.model.angle()):a}}const Tu=ku("center"),Pu=ku("topMiddle"),Cu=ku("bottomMiddle"),Ou=ku("leftMiddle"),Mu=ku("rightMiddle"),Nu=ku("origin"),Lu=ku("topRight"),Iu=ku("bottomLeft"),ju=ku("corner"),Bu=du((function(t,e,n,r){var i=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),u=o.corner(),c=r.padding;if(isFinite(c)||(c=0),a.y+c<=n.y&&n.y<=u.y-c){var l=n.y-s.y;s.x+=0===i||180===i?0:1*l/Math.tan(T(i)),s.y+=l}else if(a.x+c<=n.x&&n.x<=u.x-c){var h=n.x-s.x;s.y+=90===i||270===i?0:h*Math.tan(T(i)),s.x+=h}return s})),Ru=du((function(t,e,n,r){var i,o,s,a=!!r.rotate;a?(i=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),o=t.model.angle()):i=t.getNodeBBox(e);var u,c=r.padding;switch(isFinite(c)&&i.inflate(c),a&&n.rotate(s,o),i.sideNearestToPoint(n)){case"left":u=i.leftMiddle();break;case"right":u=i.rightMiddle();break;case"top":u=i.topMiddle();break;case"bottom":u=i.bottomMiddle()}return a?u.rotate(s,-o):u})),Du=function(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)},Fu={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Vu=1/0,zu=9007199254740991,Gu=no.Highlighting,Uu={[Gu.DEFAULT]:{name:"stroke",options:{padding:3}},[Gu.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Gu.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},qu=[{name:eu.BACK},{name:eu.CELLS},{name:eu.LABELS},{name:eu.FRONT},{name:eu.TOOLS}],Hu=Zi.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:vs,linkView:Xa,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:Uu,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new ms,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,r,i,o){return("target"===i?n:t)instanceof vs},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Fu.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:l,anchorNamespace:d,linkAnchorNamespace:h,connectionPointNamespace:f,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&gi(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new tu;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=_i(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!Xr(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Fu.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:o,origin:s,highlighting:a,cellViewNamespace:u,interactive:c}=t;!u&&"undefined"!=typeof joint&&gi(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),ai(e)||(t.defaultConnector=ii(e)),ai(n)||(t.defaultRouter=ii(n)),ai(r)||(t.defaultConnectionPoint=ii(r)),ai(i)||(t.defaultAnchor=ii(i)),ai(o)||(t.defaultLinkAnchor=ii(o)),ui(c)&&(t.interactive=Jr({},c)),ui(a)&&(t.highlighting=Kr({},a,Uu)),t.origin=Jr({},s)},children:function(){var t=ge.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Si("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Si("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Si("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:o,grid:s}=t;return n.style.overflow=e.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=_i(o),this.$grid=_i(s),this.renderLayers(),ge.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=qu){this.removeLayers(),t.forEach((({name:t,sorted:e})=>{const n=new nu({name:t});this.layers.appendChild(n.el),this._layers[t]=n}));const e=this.getLayerView(eu.CELLS),n=this.getLayerView(eu.TOOLS),r=this.getLayerView(eu.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(Si("viewport")),r.vel.addClass(Si("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach((e=>{t[e].remove(),delete t[e]}))},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach((e=>{t[e].removePivots()}))},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),ge.createSVGMatrix(t)}t=ge.createSVGMatrix(t);var r=ge.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return ge.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof no)for(var r=t.model,i=this.model.getConnectedLinks(r),o=0,s=i.length;o<s;o++){var a=i[o],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===r&&c.push("TARGET"),a.getSourceCell()===r&&c.push("SOURCE");var l=Math.max(e+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),l,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof no))return!1;var n=t.model;if(n.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,r),t.updateEndMagnet("source"));var s=0,a=this.findViewByModel(n.getTargetCell());if(a&&!this.isViewMounted(a)&&(s=this.dumpView(a,r),t.updateEndMagnet("target")),0===i&&0===s)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(r);i&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=t;let l=i.priorities[n];if(l||(l=i.priorities[n]={}),n>u)for(let t=n-1;t>=u;t--){const e=i.priorities[t];e&&c in e&&(l[c]|=e[c],delete e[c])}let h=l[c]||0;if((h&e)===e)return;h||i.count++,e&s&&h&a?l[c]^=a:e&a&&h&s&&(l[c]^=s),l[c]|=e;const f=o.onViewUpdate;"function"==typeof f&&f.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const n={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(n,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:o,model:s}=t;if(t instanceof no){if(e&r)return this.removeView(s),0;if(e&i){const n=!!(e&o);n&&(e^=o),this.insertView(t,n),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Zr({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){let e;this.notifyBeforeRender(t);let n=0,r=0,i=zu;do{r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i)}while(!e.empty);const o={updated:n,batches:r,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:zu});const{_updates:n,options:r}=this,i=n.id;if(i){ji(i),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const o=this.updateViewsBatch(t),s=Zr({},t,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),a=this.checkViewport(s),u=a.unmounted,c=a.mounted;let l=e.processed;const h=n.count;o.updated>0?(l+=o.updated+o.unmounted,o.processed=l,e.priority=Math.min(o.priority,e.priority),o.empty&&0===c?(o.unmounted+=u,o.mounted+=c,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=zu,n.count=0):e.processed=l):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const f=t.progress;if(h&&"function"==typeof f&&f.call(this,o.empty,l,h,o,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=Ii(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;"function"!=typeof e&&(e=this.options.beforeRender,"function"!=typeof e)||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||Vu,n=this._updates,r=0,i=0,o=0,s=0,a=zu,u=!0,c=this.options,l=n.priorities,h="viewport"in t?t.viewport:c.viewport;"function"!=typeof h&&(h=null);var f=c.onViewPostponed;"function"!=typeof f&&(f=null);var d=Object.keys(l);t:for(var p=0,g=d.length;p<g;p++){var v=+d[p],m=l[v];for(var y in m){if(r>=e){u=!1;break t}var b=Ji[y];if(b){var x=m[y];if(!(x&b.FLAG_REMOVE)){var w=y in n.unmounted;if(b.DETACHABLE&&h&&!h.call(this,b,!w,this)){w||(this.registerUnmountedView(b),this.detachView(b)),n.unmounted[y]|=x,delete m[y],o++;continue}w&&(x|=b.FLAG_INSERT,s++),x|=this.registerMountedView(b)}var _=this.updateView(b,x,t);_>0&&(m[y]=_,!f||!f.call(this,b,_,this)||m[y])?(i++,u=!1):(a>v&&(a=v),r++,delete m[y])}else delete m[y]}}return{priority:a,updated:r,postponed:i,unmounted:o,mounted:s,empty:u}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Ji[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Ji[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var r=("mountBatchSize"in e?e.mountBatchSize:1/0),i=this._updates,o=i.unmountedCids,s=i.unmounted,a=0,u=Math.min(o.length,r);a<u;a++){var c=o[a];if(c in s){var l=Ji[c];if(l)if(l.DETACHABLE&&t&&!t.call(this,l,!1,this))o.push(c);else{n++;var h=this.registerMountedView(l);h&&this.scheduleViewUpdate(l,h,l.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var r=("unmountBatchSize"in e?e.unmountBatchSize:1/0),i=this._updates,o=i.mountedCids,s=i.mounted,a=0,u=Math.min(o.length,r);a<u;a++){var c=o[a];if(c in s){var l=Ji[c];l&&(l.DETACHABLE&&!t.call(this,l,!0,this)?(n++,this.registerUnmountedView(l)&&this.detachView(l)):o.push(c))}}return o.splice(0,a),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;"function"!=typeof n&&(n=null);const r=this._updates,{mounted:i,unmounted:o}=r,s=!t.DETACHABLE||!n||n.call(this,t,!1,this);let a=!1,u=!1;if(t.cid in i&&!s){this.registerUnmountedView(t)&&this.detachView(t);const e=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(e,1),a=!0}if(!a&&t.cid in o&&s){const e=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(e,1);var c=this.registerMountedView(t);c&&this.scheduleViewUpdate(t,c,t.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(t){var e=Zr({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(n,e),unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&ji(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,n&&n===r&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Fu.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return Xr(e)||(e=this.el.clientWidth),Xr(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let o=void 0===t?r:t,s=void 0===e?i:e;if(r===o&&i===s)return;n.width=o,n.height=s,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;Xr(e)&&(e=Math.round(e)),Xr(n)&&(n=Math.round(n)),this.$el.css({width:null===e?"":e,height:null===n?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){r=Wr(t)?t:Jr({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:o,width:s,height:a}=this.getFitToContentArea(r),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-o*c),this.setDimensions(s*u,a*c),new lt(i,o,s,a)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=Ui(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,n),s=t.maxWidth||Number.MAX_VALUE,a=t.maxHeight||Number.MAX_VALUE,u=t.allowNewOrigin,c="contentArea"in t?new lt(t.contentArea):this.getContentArea(t),{sx:l,sy:h}=this.scale();c.x*=l,c.y*=h,c.width*=l,c.height*=h;let f=Math.ceil((c.width+c.x)/e),d=Math.ceil((c.height+c.y)/n);t.allowNegativeBottomRight||(f=Math.max(f,1),d=Math.max(d,1)),f*=e,d*=n;let p=0;("negative"===u&&c.x<0||"positive"===u&&c.x>=0||"any"===u)&&(p=Math.ceil(-c.x/e)*e,p+=r.left,f+=p);let g=0;return("negative"===u&&c.y<0||"positive"===u&&c.y>=0||"any"===u)&&(g=Math.ceil(-c.y/n)*n,g+=r.top,d+=g),f+=r.right,d+=r.bottom,f=Math.max(f,i),d=Math.max(d,o),f=Math.min(f,s),d=Math.min(d,a),new lt(-p/l,-g/h,f/l,d/h)},transformToFitContent:function(t){let e,n;if(t||(t={}),"contentArea"in t){const r=t.contentArea;e=this.localToPaperRect(r),n=new $(r)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;Zr(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=Ui(t.padding),i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,s=t.minScaleY||t.minScale,a=t.maxScaleY||t.maxScale;let u;if(t.fittingBBox)u=t.fittingBBox;else{const t=this.translate(),e=this.getComputedSize();u={x:t.tx,y:t.ty,width:e.width,height:e.height}}u=new lt(u).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const c=this.scale();let l=u.width/e.width*c.sx,h=u.height/e.height*c.sy;if(t.preserveAspectRatio&&(l=h=Math.min(l,h)),t.scaleGrid){const e=t.scaleGrid;l=e*Math.floor(l/e),h=e*Math.floor(h/e)}l=Math.min(o,Math.max(i,l)),h=Math.min(a,Math.max(s,h));const f=l/c.sx,d=h/c.sy,p=this.options.origin;let g=u.x-n.x*l-p.x,v=u.y-n.y*h-p.y;switch(t.verticalAlign){case"middle":v+=(u.height-e.height*d)/2;break;case"bottom":v+=u.height-e.height*d}switch(t.horizontalAlign){case"middle":g+=(u.width-e.width*f)/2;break;case"right":g+=u.width-e.width*f}this.scale(l,h),this.translate(g,v)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new lt:ge(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return n=ai(e)?e.apply(this,t):!0===e?this.getArea():e?new lt(e):null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,o=t.get("type")+"View",s=Pi(i,o,".");return t.isLink()?(n=e.linkView,r=Xa):(n=e.elementView,r=vs),new(n.prototype instanceof Yi.View?s||n:n.call(this,t)||s||r)({model:t,interactive:e.interactive,labelsLayer:!0===e.labelsLayer?eu.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:o}=i;const{mounted:t,unmounted:s}=r;i.remove(),delete n[e],delete t[o],delete s[o]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,o,s=!0;return n in r&&(i=r[n],i.model===t?(o=i.FLAG_INSERT,s=!1):this.removeView(t)),s&&(i=r[n]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(vi(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){Qr(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t,e,n,r=_i(this.cells).children("[model-id]"),i=this.model.get("cells");t=function(t,e){var n=i.get(t.getAttribute("model-id")),r=i.get(e.getAttribute("model-id")),o=n.attributes.z||0,s=r.attributes.z||0;return o===s?0:o<s?-1:1},e=_i(r),n=e.map((function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}})),Array.prototype.sort.call(e,t).each((function(t){n[t].call(this)}))},insertView:function(t,e){const n=this.getLayerView(eu.CELLS),{el:r,model:i}=t;this.options.sorting===Fu.APPROX?n.insertSortedNode(r,i.get("z")):n.insertNode(r),t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,n,r){if(void 0===t)return ge.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var o=i.tx-n*(t-1),s=i.ty-r*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(void 0===t)return ge.matrixToRotate(this.matrix());if(void 0===e){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(void 0===t)return ge.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);const{tx:s,ty:a}=this.translate();return r.x=s,r.y=a,this.trigger("translate",s,a),i&&this.drawGrid(),this},findView:function(t){var e=Yr(t)?this.cells.querySelector(t):t instanceof _i?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Yr(t)||Xr(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new $(t),this.model.getElements().map(this.findViewByModel,this).filter((function(e){return e&&e.vel.getBBox({target:this.cells}).containsPoint(t)}),this)},findViewsInArea:function(t,e){e=Zr(e||{},{strict:!1}),t=new lt(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter((function(e){return e&&t[r](e.vel.getBBox({target:this.cells}))}),this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){"string"==typeof t&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new $(t,e);return ge.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,r){var i=new lt(t,e,n,r);return ge.transformRect(i,this.matrix())},paperToLocalPoint:function(t,e){var n=new $(t,e);return ge.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,r){var i=new lt(t,e,n,r);return ge.transformRect(i,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new $(t,e);return ge.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,r){var i=new lt(t,e,n,r);return ge.transformRect(i,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new $(t,e);return ge.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,r){var i=new lt(t,e,n,r);return ge.transformRect(i,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new $(t,e).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),o=new lt(t,e,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new $(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Xa))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||"function"==typeof n.allowLink&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return ai(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(void 0===e){if(!r)return!1;if(n&&(e=r[n],!1===e))return!1;e||(e=r.default)}if(!e)return!1;Yr(e)&&(e={name:e});const o=e.name,s=i[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=Li(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=Li(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired?this.contextMenuFired=!1:(t=Li(t),this.contextMenuTrigger(t))},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=Li(t);const{target:e,button:n}=t,r=this.findView(e),i=2===n;if(r){if(!i&&this.guard(t,r))return;const n=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!n&&t.preventDefault(),n&&r.preventDefaultInteraction(t);const o=this.customEventTrigger(t,r);if(o){if(o.isPropagationStopped())return;t.data=o.data}const s=e.closest("[magnet]");if(s&&r.el!==s&&r.el.contains(s)){const e=Li(_i.Event(t.originalEvent,{data:t.data,currentTarget:s}));if(this.onmagnet(e),e.isDefaultPrevented()&&t.preventDefault(),e.isPropagationStopped()){if(i)return;return void this.delegateDragEvents(r,e.data)}t.data=e.data}}if(i){this.contextMenuFired=!0;const e=_i.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(e)}else{const e=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,e.x,e.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,e.x,e.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0,this.undelegateEvents()),!(++e.mousemoved<=this.options.moveThreshold)){t=Li(t);var n=this.snapToGrid(t.clientX,t.clientY),r=e.sourceView;r?r.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=Li(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(_i.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=Li(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=Li(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=Li(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);if(i){if(o===i)return;if(i.mouseenter(t),this.el.contains(n))return}o||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=Li(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);if(i){if(o===i)return;if(i.mouseleave(t),this.el.contains(n))return}o||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:function(t,e,n){let r,i,o,s,a,u,c=0,l=!1,h=!1,f=!0;const d=!e&&0!==e&&window&&"function"==typeof window.requestAnimationFrame;function p(e){const n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n),s}function g(t,e){return d?(window.cancelAnimationFrame(a),window.requestAnimationFrame(t)):setTimeout(t,e)}function v(t){const n=t-u;return void 0===u||n>=e||n<0||h&&t-c>=o}function m(){const t=Date.now();if(v(t))return y(t);a=g(m,function(t){const n=t-c,r=e-(t-u);return h?Math.min(r,o-n):r}(t))}function y(t){return a=void 0,f&&r?p(t):(r=i=void 0,s)}function b(...t){const n=Date.now(),o=v(n);if(r=t,i=this,u=n,o){if(void 0===a)return function(t){return c=t,a=g(m,e),l?p(t):s}(u);if(h)return a=g(m,e),p(u)}return void 0===a&&(a=g(m,e)),s}return e=+e||0,Wr(n)&&(l=!!n.leading,h="maxWait"in n,o=h?Math.max(+n.maxWait||0,e):o,f="trailing"in n?!!n.trailing:f),b.cancel=()=>{void 0!==a&&function(t){if(d)return window.cancelAnimationFrame(t);clearTimeout(t)}(a),c=0,r=u=i=a=void 0},b.flush=()=>void 0===a?s:y(Date.now()),b.pending=()=>void 0!==a,b}((function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce(((t,e)=>{return t+((n=e)>50?50:n<-50?-50:n);var n}),0),r=Math.pow(.995,n),{x:i,y:o}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,o,r),this._mw_evt_buffer={event:null,deltas:[]}}),20,{maxWait:20}),mousewheel:function(t){t=Li(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:o}=function(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r="deltaX"in t?t.deltaX:10*e,i="deltaY"in t?t.deltaY:10*n,(r||i)&&t.deltaMode&&(1==t.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),0===t.deltaX&&0!==t.deltaY&&t.shiftKey&&(r=i,i=0,e=n,n=0),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,deltaX:r,deltaY:i}}(n),s=this._events["paper:pinch"];if(t.ctrlKey&&s&&s.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{const s=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,s):this.trigger("blank:mousewheel",t,r.x,r.y,s),this.trigger("paper:pan",t,i,o)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=Li(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var r=this.findView(n);if(r){if(t=Li(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);e.call(this,r,t,n,i.x,i.y)}}},onmagnet:function(t){if(2===t.button){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=_i.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,(function(t,e,n,r,i){t.onmagnet(e,r,i)}))},magnetpointerdblclick:function(t){this.magnetEvent(t,(function(t,e,n,r,i){t.magnetpointerdblclick(e,n,r,i)}))},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired?this.magnetContextMenuFired=!1:this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,(function(t,e,n,r,i){t.magnetcontextmenu(e,n,r,i)}))},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(!n)return;if(t=Li(t),this.guard(t,n))return;const r=this.customEventTrigger(t,n,e);if(r){if(r.isPropagationStopped())return;t.data=r.data}var i=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,i.x,i.y)},getPointerArgs(t){const e=Li(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if("mousedown"===t.type&&2===t.button)return!0;if(this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&void 0!==t.data.guarded)return t.data.guarded;const{target:n}=t;return!!this.GUARDED_TAG_NAMES.includes(n.tagName)||!(e&&e.model&&e.model instanceof Lo)&&this.svg!==n&&this.el!==n&&!_i.contains(this.svg,n)},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:ge("svg",{width:"100%",height:"100%"},ge("defs")),patterns:{},add:function(t,e){ge(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(ge("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach((function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))}),this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Yr(t)&&Array.isArray(e[t]))return e[t].map((function(t){return Jr({},t)}));var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(r||i||n.markup||(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map((function(t){return Jr({},t)})),s=Array.isArray(n.args)?n.args:[n.args||{}];Zr(s[0],mi(t,"args"));for(var a=0;a<s.length;a++)o[a]&&Jr(o[a],s[a]);return o}return r?n:[n]},drawGrid:function(t){const e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach((function(t,o){var s="pattern_"+o,a=wi(t,n[o],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});a.width=e*(r.a||1)*(a.scaleFactor||1),a.height=e*(r.d||1)*(a.scaleFactor||1),i.exist(s)||i.add(s,ge("pattern",{id:s,patternUnits:"userSpaceOnUse"},ge(a.markup)));var u=i.get(s);ai(a.update)&&a.update(u.node.childNodes[0],a);var c=a.ox%a.width;c<0&&(c+=a.width);var l=a.oy%a.height;l<0&&(l+=a.height),u.attr({x:c,y:l,width:a.width,height:a.height})}));var o=(new XMLSerializer).serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();Wr(e)&&(e=i.tx+r.sx*(e.x||0)+"px "+(i.ty+r.sy*(e.y||0))+"px"),Wr(n)&&(n=(n=new lt(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var n,r=(e=e||{}).size,i=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[((t="")=>((t,e)=>{if(void 0===e){const e=Sn(t)?(t=>t.match(dn))(t):(t=>t.match(En))(t);return e||[]}return t.match(e)||[]})(`${t}`.replace(/['\u2019]/g,"")).reduce(((t,e,n)=>(e=e.toLowerCase(),t+(n?zr(e):e))),""))(i)];if(ai(a)){t.width*=s,t.height*=s;var u=a(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=u.toDataURL("image/png"),i="repeat",Wr(r)?(r.width*=u.width/t.width,r.height*=u.height/t.height):void 0===r&&(e.size={width:u.width/s,height:u.height/s})}else n=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=ii(t),Ni(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Qr(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Wr(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+Ti(JSON.stringify(t))),!this.isDefined(e)){var r=$i,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=Jr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});ge(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Wr(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+Ti(JSON.stringify(t)),stops:o,attrs:s={}}=t;if(this.isDefined(i))return i;const a=ci(o).map((({offset:t,color:e,opacity:n})=>ge("stop").attr({offset:t,"stop-color":e,"stop-opacity":Number.isFinite(n)?n:1}))),u=ge(r,s,a);return u.id=i,u.appendTo(n),i},definePattern:function(t){if(!Wr(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+Ti(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const s=ge("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=r,s.attr(o),"string"==typeof i)s.append(ge(i));else{const{fragment:t}=ki(i);s.append(t)}return s.appendTo(n),r},defineMarker:function(t){if(!Wr(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+Ti(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const a=ge("marker",{orient:"auto",overflow:"visible",markerUnits:s});let u;if(a.id=r,a.attr(o),i){let t;if("string"==typeof i)t=ge(i),t=Array.isArray(t)?t:[t];else{const{fragment:e}=ki(i);t=ge(e).children()}u=t.length>1?ge("g").append(t):t[0]}else{const{type:e="path"}=t;u=ge(e)}const c=mi(t,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach((t=>{const e=c[t],n=u.attr(t);null==n?u.attr(t,e):"transform"===t&&u.attr(t,e+" "+n)})),u.appendTo(a),a.appendTo(n),r},customEventTrigger:function(t,e,n=e.el){const r=t.target.closest("[event]");if(r&&n!==r&&e.el.contains(r)){const e=Li(_i.Event(t.originalEvent,{data:t.data,currentTarget:r}));return this.onevent(e),e.isDefaultPrevented()&&t.preventDefault(),e}return null}},{sorting:Fu,Layers:eu,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),s=Xr(e.watermarkAngle)?-e.watermarkAngle:-20,a=T(s),u=i.width/4,c=i.height/4,l=0;l<4;l++)for(var h=0;h<4;h++)(l+h)%2>0&&(o.setTransform(1,0,0,1,(2*l-1)*u,(2*h-1)*c),o.rotate(a),o.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){ge(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;ge(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ge(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ge(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",ge(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),$u={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){const r=this.getCell(e.name),i=n.edge(e),o=i.points||[],s=new gt(o);if(t.setVertices||t.setLinkVertices)if(ai(t.setVertices))t.setVertices(r,o);else{s.simplify({threshold:.001});const t=s.points.map((t=>t.toJSON())),e=t.length;r.set("vertices",t.slice(1,e-1))}if(t.setLabels&&"x"in i&&"y"in i){const e={x:i.x,y:i.y};if(ai(t.setLabels))t.setLabels(r,e,o);else{const t=s.closestPointLength(e),n=s.pointAtLength(t),i=t/s.length(),o=new $(e).difference(n).toJSON();r.label(0,{position:{distance:i,offset:o}})}}},layout:function(t,e){var n;n=t instanceof tu?t:(new tu).resetCells(t,{dry:!0,sort:!1}),t=null;const r=(e=Zr(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===r)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=$u.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),o={},s=e.marginX||0,a=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),s&&(o.marginx=s),a&&(o.marginy=a),i.setGraph(o),r.layout(i,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),$u.fromGraphLib(i,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var u=i.nodes().filter((function(t){return i.children(t).length>0})).map(n.getCell.bind(n)).sort((function(t,e){return e.getAncestors().length-t.getAncestors().length}));Qr(u,"fitToChildren",{padding:e.clusterPadding})}n.stopBatch("layout");var c=i.graph();return new lt(s,a,Math.abs(c.width-2*s),Math.abs(c.height-2*a))},fromGraphLib:function(t,e){var n=(e=e||{}).importNode||Xi,r=e.importEdge||Xi,i=this instanceof tu?this:new tu;return t.nodes().forEach((function(r){n.call(i,r,t,i,e)})),t.edges().forEach((function(n){r.call(i,n,t,i,e)})),i},toGraphLib:function(t,e){const n=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===n)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=yi(e,"directed","compound","multigraph"),i=new n.Graph(r),o=e.setNodeLabel||Xi,s=e.setEdgeLabel||Xi,a=e.setEdgeName||Xi,u=t.get("cells"),c=0,l=u.length;c<l;c++){var h=u.at(c);if(h.isLink()){var f=h.get("source"),d=h.get("target");if(!f.id||!d.id)break;i.setEdge(f.id,d.id,s(h),a(h))}else if(i.setNode(h.id,o(h)),i.isCompound()&&h.has("parent")){var p=h.get("parent");u.has(p)&&i.setParent(h.id,p)}}return i}};tu.prototype.toGraphLib=function(t){return $u.toGraphLib(this,t)},tu.prototype.fromGraphLib=function(t,e){return $u.fromGraphLib.call(this,t,e)};var Wu=n(2543),Xu=n(22313);const Yu={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(void 0!==n)return n;try{n=e()}catch(t){n=!1}return this._results[t]=n,n}},Ju=Za.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),Zu=(Ju.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),vs.extend({presentationAttributes:vs.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=vs.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),Ju.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Ju.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Ju.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),Ju.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Ju.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Ju.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),Ju.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}).define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),Yu.test("svgforeignobject")),Ku=(Ju.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Zu?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Ju.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Jr({},e),div:{style:Jr({},e)}})},updateContent:function(t,e){var n,r;Zu?this.attr({".content":{html:(n=e,r=_i(_i.parseHTML("<div>"+n+"</div>",null,!1)),r.find("*").each((function(){var t=this;_i.each(t.attributes,(function(){var e=this.name,n=this.value;(e.startsWith("on")||n.startsWith("javascript:")||n.startsWith("data:")||n.startsWith("vbscript:"))&&_i(t).removeAttr(e)}))})),r.html())}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),vs.extend({presentationAttributes:Zu?vs.prototype.presentationAttributes:vs.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=vs.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(Zu)vs.prototype.update.call(this,n,e);else{var r=mi(e||n.get("attrs"),".content");vs.prototype.update.call(this,n,r),e&&!gi(e,".content")||this.updateContent(n,e)}},updateContent:function(t,e){var n=wi({},(e||t.get("attrs"))[".content"]);n=mi(n,"text");var r=Gi(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=Oi({},".content",n,"/");i[".content"].text=r,vs.prototype.update.call(this,t,i)}}),Za.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Za.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}));Za.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Za.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Za.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Za.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Za.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Za.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Za.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Za.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Za.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Za.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n={lateralArea:t},r=Di(t)?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:n,top:r},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Di(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,o=e.width,s=e.height,a=o/2,u=n?s*t:t,c=ge.KAPPA,l=c*a,h=c*(n?s*t:t),f=r+o/2,d=r+o,p=i+u,g=p-u,v=i+s-u,m=i+s;return{d:["M",r,p,"L",r,v,"C",r,v+h,f-l,m,f,m,"C",f+l,m,d,v+h,d,v,"L",d,p,"C",d,p-h,f+l,g,f,g,"C",f-l,g,r,p-h,r,p,"Z"].join(" ")}}}}});var Qu=Yu.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Za.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Qu]},{attributes:{text:{set:function(t,e,n,r){if(!(n instanceof HTMLElement)){var i=r.style||{},o={text:t,width:-5,height:"100%"},s=Jr({textVerticalAnchor:"middle"},i);return No.textWrap.set.call(this,o,e,n,s),{fill:i.color||null}}n.textContent=t},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}});const tc=ms.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),ec=(ms.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),ms.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]}),Zi.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n||e.guard(t,n)}})),nc=Zi.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){var e=(t=Jr(this.options,t)).tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof no))return this;for(var r=this.tools=[],i=0,o=e.length;i<o;i++){var s=e[i];s instanceof ec&&(s.configure(n,this),this.vel.append(s.el),r.push(s))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,i=e.length;r<i;r++){var o=e[r];n?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i===t||i.isVisible()||(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=eu.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}});var rc=Zi.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){const{vel:n,options:r}=this,{scale:i}=r;let o=ge.createSVGMatrix().translate(t,e);i&&(o=o.scale(i)),n.transform(o,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const ic=ec.extend({name:"vertices",options:{handleClass:rc,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var r=t[e],i=new this.options.handleClass({index:e,paper:this.paper,scale:this.options.scale,guard:t=>this.guard(t)});i.render(),i.position(r.x,r.y),this.simulateRelatedView(i.el),i.vel.appendTo(this.el),this.handles.push(i),this.startHandleListening(i)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var r=t[e],i=this.handles[e];if(!i)return;i.position(r.x,r.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new $(r),next:new $(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[o,s,a]=r.paper.getPointerArgs(e),u={x:s,y:a};this.snapVertex(u,i),r.model.vertex(i,u,{ui:!0,tool:this.cid}),t.position(u.x,u.y),n.stopPropagation||r.notifyPointermove(o,s,a)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),n.redundancyRemoval){r.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[i,o,s]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(i,o,s),r.checkMouseleave(i)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(Li(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=Li(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var o=this.handles[i];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:rc}),oc=ec.extend({tagName:"path",xAxisVector:new $(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var t,e,n=this.ratio,r=this.relatedView,i=r.getTangentAtRatio(n);if(i?(t=i.start,e=i.vector().vectorAngle(this.xAxisVector)||0):(t=r.getPointAtRatio(n),e=0),!t)return this;var o=ge.createSVGMatrix().translate(t.x,t.y).rotate(e);const{scale:s}=this.options;return s&&(o=o.scale(s)),this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=Li(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,r=Li(t),i=n.snapToGrid(r.clientX,r.clientY);e.pointerup(r,i.x,i.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),sc=oc.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),ac=oc.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),uc=ec.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:o,rotate:s,scale:a}=e,u=function(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}(t,o);const c=t.model.angle();s||(u=u.bbox(c));const{x:l=0,y:h=0}=i;Di(n)?n=parseFloat(n)/100*u.width:fo(n)&&(n=Number(po(n,u))),Di(r)?r=parseFloat(r)/100*u.height:fo(r)&&(r=Number(po(r,u)));let f=ge.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return s&&(f=f.rotate(c)),f=f.translate(n+l-u.width/2,r+h-u.height/2),a&&(f=f.scale(a)),f},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i,scale:o}=e;let s,a,u;s=Di(r)?t.getTangentAtRatio(parseFloat(r)/100):t.getTangentAtLength(r),s?(a=s.start,u=s.vector().vectorAngle(new $(1,0))||0):(a=t.getConnection().start,u=0);let c=ge.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,n);return i||(c=c.rotate(-u)),o&&(c=c.scale(o)),c},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),cc=uc.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}}),lc={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},hc=ac.extend(Wu.merge({},lc)),fc=sc.extend(Wu.merge({},lc)),dc=uc.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,uc.prototype.update.apply(this,arguments)}}),pc=dc.extend({name:"remove",children:cc.prototype.children,options:cc.prototype.options}),gc=dc.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(t){this.notify("link:monitor")}}}),vc={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},mc=Ju.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:Wu.merge({},vc,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:Wu.merge({},vc,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation:()=>({}),initialize(){const t=this.get("ports");t.items&&this._preprocessPorts(t.items),Ju.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map((t=>"change:"+t)).join(" "),((t,e,n)=>{if(n.init)return;const r=Wu.intersection(Object.keys(this.changed),this._unsupportedPropChanges);r.forEach((t=>{this.set(t,this.previous(t),{init:!0})})),console.warn('Beta property change support: "'+r+'" changes on '+this.get("type")+" are (currently) not supported.")}))},prepare(){},bindAttrToProp(t,e){this.attr(t,this.get(e)),this.on("change:"+e,((e,n)=>this.attr(t,n)))},_changeOutputSignals(t){Wu.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy((t=>t.get("source").port)).forEach(((e,n)=>e.forEach((e=>e.set("signal",t[n]))))).value()},_setInput(t,e){const n=Wu.clone(this.get("inputSignals"));n[e]=t,this.set("inputSignals",n)},_clearInput(t){const e=this.getPort(t).bits;this._setInput(Xu.Vector3vl.xes(e),t)},_preprocessPorts(t){this._resetPortsSignals(t);for(const e of t){if(e.attrs={},e.attrs.bits={text:this._getBitsText(e.bits)},e.labelled){const t={text:"portlabel"in e?e.portlabel:e.id};!1===e.polarity&&(t["text-decoration"]="overline"),e.decor&&(console.assert("in"==e.group),t.refX=10),e.attrs.iolabel=t}e.decor&&(e.attrs.decor={d:e.decor})}},_setPortsBits(t){const e=Wu.cloneDeep(this.get("ports")),n=[];for(const r in t){const i=t[r],o=e.items.find((function(t){return t.id&&t.id===r}));o.bits=i,o.attrs.bits.text=this._getBitsText(i),n.push(o)}this._resetPortsSignals(n),this.set("ports",e),this.graph.getConnectedLinks(this,{outbound:!0}).filter((e=>e.get("source").port in t)).forEach((t=>t._changeSource(t.get("source")))),this.graph.getConnectedLinks(this,{inbound:!0}).filter((e=>e.get("target").port in t)).forEach((t=>t._changeTarget(t.get("target"))))},_getBitsText:t=>t>1?t:"",_resetPortValue:t=>Xu.Vector3vl.xes(t.bits),_resetPortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)console.assert(n.bits>=0),e[n.dir][n.id]=this._resetPortValue(n);this.set("inputSignals",e.in),this.set("outputSignals",e.out)},_removePortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)delete e[n.dir][n.id];this.set("inputSignals",e.in),this.set("outputSignals",e.out)},addPort(t){this.addPorts([t])},addPorts(t){this._preprocessPorts(t),Ju.prototype.addPorts.apply(this,arguments)},removePort(t,e){this.removePorts([t])},removePorts(t,e){this._removePortsSignals(t),Ju.prototype.removePorts.apply(this,arguments)},_getStackedPosition:t=>function(e,n){const r=t.side||"left",i=t.step||16,o=t.offset||12,s="left"==r?n.topLeft().x:"right"==r?n.topRight().x:void 0,a="top"==r?n.topLeft().y:"bottom"==r?n.bottomRight().y:void 0;return void 0!==s?Wu.map(e,(function(t,e){return e+=t.idxOffset||0,$({x:s,y:e*i+o})})):Wu.map(e,(function(t,e){return e+=t.idxOffset||0,$({x:e*i+o,y:a})}))},getLayoutSize(){return this.size()},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(t){return Wu.cloneDeep(Wu.pick(this.attributes,this._gateParams.concat(t?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),yc=vs.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:vs.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(t){t.stopPropagation()},confirmUpdate(t){this.hasFlag(t,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(t,"SIGNAL2")&&this._updatePortSignals("out"),vs.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(t){const e="in"===t?this.model.get("inputSignals"):"out"===t?this.model.get("outputSignals"):Wu.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const t in e){const n=e[t],r=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(t,r)}},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},_applyPortAttrs(t,e){if(t in this._portElementsCache)for(const n in e){const r=this._portElementsCache[t].portSelectors[n];this.setNodeAttributes(r,e[n])}},_updatePorts(){vs.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),bc=tc.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:Xu.Vector3vl.xes(1),bits:1,warning:!1,z:0},{initialize(){tc.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const t=this.get("target"),e=this.graph.getCell(t.id);e&&"port"in t&&e._clearInput(t.port),tc.prototype.remove.apply(this,arguments)},_propagateSignal(t,e){const n=this.getTargetElement();n&&(this.get("warning")?n._clearInput(t.port):n._setInput(e,t.port))},_changeSignal(t){this._propagateSignal(this.get("target"),t)},_changeSource(t){const e=this.getSourceElement();e&&"port"in t?(this.set("bits",e.getPort(t.port).bits),this._checkConnection(),this.set("signal",e.get("outputSignals")[t.port])):this.set("signal",Xu.Vector3vl.xes(this.get("bits")))},_changeTarget(t){if(this._checkConnection(),"port"in t&&this._propagateSignal(t,this.get("signal")),!this.hasChanged("target"))return;const e=this.previous("target"),n=this.graph.getCell(e.id);n&&"port"in e&&n._clearInput(e.port)},_checkConnection(){const t=this.get("target"),e=this.graph.getCell(t.id);this.set("warning",e&&e.getPort(t.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(t){const e={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(e.name=this.get("netname")),t&&this.has("vertices")&&this.get("vertices").length>0&&(e.vertices=Wu.cloneDeep(this.get("vertices"))),e},getWirePath(){const t=[];for(let e=this.graph.get("subcircuit");null!=e;e=e.graph.get("subcircuit")){if(!e.has("label"))return null;t.push(e.get("label"))}return t.reverse()}}),xc=Xa.extend({initFlag:Xa.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:"undefined"!=typeof window?new nc({tools:[new ic({focusOpacity:.5}),new hc,new fc,new pc({distanceShort:"75%",distanceLong:"50"}),new pc({distance:"-50",secondary:!0}),new gc({distanceShort:"25%",distanceLong:"30"}),new gc({distance:"-30",secondary:!0})]}):null,presentationAttributes:Xa.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){Xa.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(t){Xa.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateSignal(),this.hasFlag(t,"BITS")&&this._updateBits(),this.hasFlag(t,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const t=this.model.get("signal"),e=this.attrs.signal[t.isDefined?t.isHigh?"high":t.isLow?"low":"def":"undef"];this._applyAttrs(e)},_updateBits(){const t=this.model.get("bits"),e=this.attrs.bits[t>1?"bus":"single"];this._applyAttrs(e)},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},update(){Xa.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){Xa.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(t){Xa.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:t.clientX+5,y:t.clientY+5})},mouseleave(t){Xa.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(t){1!=this.model.get("bits")&&(this.wire_hover||(this.wire_hover=_i('<div class="wire_hover">').css("left",t.x).css("top",t.y).appendTo(_i(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const t=this.model.get("signal"),e=this.model.graph._display3vl,n=["Hex: "+e.show("hex",t)+"<br>","Dec: "+e.show("dec",t)+"<br>","Oct: "+e.show("oct",t)+"<br>","Bin: "+e.show("bin",t)].join("");this.wire_hover.html(n)},onEndModelChange(t,e,n){"object"==typeof e&&null!=e&&e==this.prevModels[t]&&Object.keys(e.changed).length>0&&!("position"in e.changed)||(Xa.prototype.onEndModelChange.apply(this,arguments),this.prevModels[t]=e)}}),wc=mc.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){mc.prototype.initialize.apply(this,arguments),this.on("change:size",((t,e)=>{e.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})})),this.trigger("change:size",this,this.prop("size"))},markup:mc.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"🔍",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map((t=>t.join(" "))).join(" L")}),_c=yc.extend({_autoResizeBox:!1,render(){yc.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const t=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),e=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),n=Math.max(...t.map((t=>t.getBBox().width))),r=Math.max(...e.map((t=>t.getBBox().width))),i=t=>t==-1/0?-5:t;return i(n)+i(r)+25}}),Ac=wc.define("NumBase",{numbase:"hex",bits:1},{initialize(){wc.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")}))},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:wc.prototype._gateParams.concat(["numbase"])}),Sc=_c.extend({presentationAttributes:_c.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(t){this.model.set("numbase",t.target.value||"bin")},_calculateBoxWidth(){const t=document.createElementNS("http://www.w3.org/2000/svg","text");_i(t).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const e=t.getBBox().width+20;return t.remove(),e},confirmUpdate(t){_c.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"BITS")||this.hasFlag(t,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(t,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const t=this.model.get("numbase"),e=this.model.graph._display3vl;for(const n of e.usableDisplays(this.model.numbaseType,this.model.get("bits")))_i("<option>").attr("value",n).prop("selected",n==t).text(n).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),Ec=Ac.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:t}],Ac.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{const n={};n[this._portDirection]=e,this._setPortsBits(n),0!=this.get("mode")&&this._checkMode()})),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const t=this.graph&&this.graph.has("subcircuit"),e=this.get("bits"),n=t?0:1==e?1:2;return this.set("mode",n),this.set("box_resized",!1),this.set("markup",0==n?this.markupInSubcircuit:1==n?this.markupSingle:this.markupBus),n},_setPortsBits(t){if(Ac.prototype._setPortsBits.apply(this,arguments),0!=this.get("mode"))return;const e=this.graph.get("subcircuit");console.assert(null!=e);const n={};n[this.get("net")]=t[this._portDirection],e._setPortsBits(n)},markupSingle:Ac.prototype.markup,markupBus:Ac.prototype.markup.concat(Ac.prototype.markupTooltip),markupInSubcircuit:Ac.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:Ac.prototype._gateParams.concat(["bits","net","order"])}),kc=Sc.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const t=this.selectors.ioname;return"none"!==t.getAttribute("display")?t.getBBox().width+10:20;case 1:return 30;case 2:return Sc.prototype._calculateBoxWidth.call(this)}}}),Tc=Ec.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(t){if("out"==t.id&&"out"==t.dir){const t=this.get("bits");return 1==this.get("mode")?Xu.Vector3vl.zeros(t):Xu.Vector3vl.xes(t)}return Ec.prototype._resetPortValue.call(this,t)},_checkMode(){Ec.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(t){this._setInput(t),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(t){if(t.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:t})},markupSingle:Ec.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:Ec.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),Pc=kc.extend({attrs:Wu.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},kc.prototype.attrs),confirmUpdate(t){kc.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL2")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry()}},_updateButton(){const t=this.model.get("outputSignals").out,e=this.attrs.button[t.isHigh?"high":"low"];this._applyAttrs(e)},_updateNumEntry(){const t=this.model.graph._display3vl;this.$("input").val(t.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){kc.prototype.render.apply(this,arguments),this._updateView()},events:Wu.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},Sc.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(t){const e=this.model.get("numbase"),n=this.model.get("bits"),r=this.model.graph._display3vl;if(r.validate(e,t.target.value,n)){const i=r.read(e,t.target.value,n);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),Cc=Tc,Oc=Pc,Mc=Tc,Nc=Pc,Lc=Ec.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:Ec.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:Ec.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),Ic=kc.extend({attrs:Wu.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},kc.prototype.attrs),confirmUpdate(t){kc.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay()}},_updateLamp(){const t=this.model.get("inputSignals").in,e=this.attrs.lamp[t.isHigh?"high":t.isLow?"low":"undef"];this._applyAttrs(e)},_updateNumDisplay(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){kc.prototype.render.apply(this,arguments),this._updateView()}}),jc=Lc,Bc=Ic,Rc=Lc,Dc=Ic,Fc=Ac.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],Ac.prototype.initialize.apply(this,arguments),this.on("change:constant",((t,e)=>{const n=e.length;this._setPortsBits({out:n}),this.set("bits",n),this.set("constantCache",Xu.Vector3vl.fromBin(e,n))}))},prepare(){const t=this.get("constant"),e=t.length;this.set("constantCache",Xu.Vector3vl.fromBin(t,e))},operation(){return{out:this.get("constantCache")}},markup:Ac.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:Ac.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),Vc=Sc.extend({presentationAttributes:Sc.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(t){Sc.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"CONSTANT")||this.hasFlag(t,"NUMBASE"))&&this._showText()},_showText(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){Sc.prototype.update.apply(this,arguments),this._showText()}}),zc=wc.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue:t=>"out"==t.id&&"out"==t.dir?Xu.Vector3vl.zero:wc.prototype._resetPortValue(t),operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:wc.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:wc.prototype._unsupportedPropChanges.concat(["bits"])}),Gc=_c.extend({presentationAttributes:_c.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(t){_c.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(t){_c.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this.updatePropagation()},_changePropagation(t){const e=t.target.value,n=String(e)==String(Number(e));n&&this.model.set("propagation",Number(e)||1),this.$("input").toggleClass("invalid",!n)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),Uc=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL"];class qc extends Xu.Display3vlWithRegex{constructor(){super("[ -~ -ÿ�␀-␡]|"+Uc.join("|"))}get name(){return"ascii"}get sort(){return 1}can(t,e){return 7==e||8==e}read(t,e){if(1==t.length){const n=t.charCodeAt(0);return 65533==n?Xu.Vector3vl.xes(e):9249==n?Xu.Vector3vl.fromHex("7f",e):n>=9216&&n<=9248?Xu.Vector3vl.fromHex((n-9216).toString(16),e):Xu.Vector3vl.fromHex(n.toString(16),e)}{const n=Uc.indexOf(t);return n<0?Xu.Vector3vl.xes(e):33==n?Xu.Vector3vl.fromHex("7f",e):Xu.Vector3vl.fromHex(n.toString(16),e)}}show(t){if(!t.isFullyDefined)return"�";const e=parseInt(t.toHex(),16);return e<=32?String.fromCharCode(9216+e):127==e?"␡":e>127&&e<160?"�":String.fromCharCode(e)}size(t){return 1}}function Hc(t,e,n){return'<select name="base">'+t.usableDisplays("read",e).map((t=>'<option value="'+t+'"'+(t==n?' selected="selected"':"")+">"+t+"</option>")).join("")+"</select>"}function $c(t,e){for(const n in e)if(!t[n].eq(e[n]))return!1;return!0}const Wc="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",Xc="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",Yc="M18-2v36l2-1 32-17h0L20-1z",Jc={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:"M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z"}},Zc={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Kc(t=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(t)}}const Qc=mc.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:mc.prototype.markup.concat([Kc()]),_gateParams:mc.prototype._gateParams.concat(["bits"])}),tl=Qc.define("Gate11",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:t}],Qc.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits({in:e,out:e})}))}}),el=Qc.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const t=this.get("bits"),e=this.get("inputs"),n=[];for(let r=1;r<=e;r++)n.push({id:"in"+r,group:"in",dir:"in",bits:t});n.push({id:"out",group:"out",dir:"out",bits:t}),this.get("ports").items=n;const r=e/2;this.set("size",{width:60*r,height:32*r}),this.attr("body/transform","translate(-4, 0) scale("+r+")"),this.prop("ports/groups/in/position/args/dx",30*r),this.prop("ports/groups/in/attrs/wire/x2",-30*r-20),this.prop("ports/groups/in/attrs/port/refX",-30*r-20),this.prop("ports/groups/out/position/args/dx",-30*r),this.prop("ports/groups/out/attrs/wire/x2",30*r+20),this.prop("ports/groups/out/attrs/port/refX",30*r+20),Qc.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{const n=this.get("inputs"),r={out:e};for(let t=1;t<=n;t++)r["in"+t]=e;this._setPortsBits(r)}))},operation(t){let e=t.in1;for(let n=2;n<=this.get("inputs");n++)e=this.binoperation(e,t["in"+n]);return{out:this.finoperation(e)}},finoperation:t=>t,_gateParams:Qc.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:Qc.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:Qc.prototype._operationHelpers.concat(["binoperation","finoperation"])}),nl=Qc.define("GateReduce",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:1}],Qc.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits({in:e})}))}}),rl=tl.define("Repeater",{attrs:{gate:{d:Yc}}},{operation:t=>({out:t.in})}),il=yc,ol=tl.define("Not",{attrs:{gate:{d:Yc}}},{operation:t=>({out:t.in.not()}),markup:mc.prototype.markup.concat([Kc([Zc])])}),sl=yc,al=el.define("Or",{attrs:{gate:{d:Xc}}},{binoperation:(t,e)=>t.or(e)}),ul=yc,cl=el.define("And",{attrs:{gate:{d:Wc}}},{binoperation:(t,e)=>t.and(e)}),ll=yc,hl=el.define("Nor",{attrs:{gate:{d:Xc}}},{binoperation:(t,e)=>t.or(e),finoperation:t=>t.not(),markup:mc.prototype.markup.concat([Kc([Zc])])}),fl=yc,dl=el.define("Nand",{attrs:{gate:{d:Wc}}},{binoperation:(t,e)=>t.and(e),finoperation:t=>t.not(),markup:mc.prototype.markup.concat([Kc([Zc])])}),pl=yc,gl=el.define("Xor",{attrs:{gate:{d:Xc}}},{binoperation:(t,e)=>t.xor(e),markup:mc.prototype.markup.concat([Kc([Jc])])}),vl=yc,ml=el.define("Xnor",{attrs:{gate:{d:Xc}}},{binoperation:(t,e)=>t.xor(e),finoperation:t=>t.not(),markup:mc.prototype.markup.concat([Kc([Jc,Zc])])}),yl=yc,bl=nl.define("OrReduce",{attrs:{gate:{d:Xc}}},{operation:t=>({out:t.in.reduceOr()})}),xl=yc,wl=nl.define("NorReduce",{attrs:{gate:{d:Xc}}},{operation:t=>({out:t.in.reduceNor()}),markup:nl.prototype.markup.concat([Zc])}),_l=yc,Al=nl.define("AndReduce",{attrs:{gate:{d:Wc}}},{operation:t=>({out:t.in.reduceAnd()})}),Sl=yc,El=nl.define("NandReduce",{attrs:{gate:{d:Wc}}},{operation:t=>({out:t.in.reduceNand()}),markup:mc.prototype.markup.concat([Kc([Zc])])}),kl=yc,Tl=nl.define("XorReduce",{attrs:{gate:{d:Xc}}},{operation:t=>({out:t.in.reduceXor()}),markup:mc.prototype.markup.concat([Kc([Jc])])}),Pl=yc,Cl=nl.define("XnorReduce",{attrs:{gate:{d:Xc}}},{operation:t=>({out:t.in.reduceXnor()}),markup:mc.prototype.markup.concat([Kc([Jc,Zc])])}),Ol=yc;function Ml(t){return t<=Number.MAX_SAFE_INTEGER&&t>=-Number.MAX_SAFE_INTEGER}const Nl=mc.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:mc.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:mc.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:mc.prototype._unsupportedPropChanges.concat(["signed"])}),Ll=Nl.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],Nl.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits");return t.in.isFullyDefined?{out:Xu.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(this.get("signed"))),e.out)}:{out:Xu.Vector3vl.xes(e.out)}},_operationHelpers:Nl.prototype._operationHelpers.concat(["arithop"])}),Il=Nl.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],Nl.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits"),n=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:Xu.Vector3vl.fromNumber(this.arithop(t.in1.toBigInt(n.in1&&n.in2),t.in2.toBigInt(n.in1&&n.in2)),e.out)}:{out:Xu.Vector3vl.xes(e.out)}},_operationHelpers:Nl.prototype._operationHelpers.concat(["arithop"])});function jl(t,e,n,r,i,o,s){const a=t.get(t.bits-1),u=Xu.Vector3vl.make(Math.max(0,r-n),s?0:i?a:-1),c=t.concat(u);return(e<0?Xu.Vector3vl.make(-e,s?0:-1).concat(c):c.slice(e).concat(Xu.Vector3vl.make(e,s?0:o?c.get(c.bits-1):-1))).slice(0,r)}const Bl=Nl.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],Nl.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx");if(!t.in2.isFullyDefined)return{out:Xu.Vector3vl.xes(e.out)};const i=t.in2.toNumber(n.in2)*this.shiftdir;return{out:jl(t.in1,i,e.in1,e.out,n.in1,n.out,r)}},_gateParams:Nl.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:Nl.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:Nl.prototype._operationHelpers.concat(["shiftdir"])}),Rl=Nl.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:1}],Nl.prototype.initialize.apply(this,arguments),this.on("change:bits",((t,e)=>{this._setPortsBits(e)}))}}),Dl=Rl.define("Compare",{},{operation(t){this.get("bits");const e=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:Xu.Vector3vl.fromBool(this.arithcomp(t.in1.toBigInt(e.in1&&e.in2),t.in2.toBigInt(e.in1&&e.in2)))}:{out:Xu.Vector3vl.xes(1)}},_operationHelpers:Rl.prototype._operationHelpers.concat(["arithcomp"])}),Fl=Rl.define("EqCompare",{},{operation(t){const e=this.get("bits"),n=this.get("signed"),r=e.in1>=e.in2?t.in1:t.in1.concat(Xu.Vector3vl.make(e.in2-e.in1,n.in1&&n.in2?t.in1.msb:-1)),i=e.in2>=e.in1?t.in2:t.in2.concat(Xu.Vector3vl.make(e.in1-e.in2,n.in1&&n.in2?t.in2.msb:-1));return{out:this.bincomp(r,i)}},_operationHelpers:Rl.prototype._operationHelpers.concat(["bincomp"])}),Vl=Ll.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:t=>-t}),zl=yc,Gl=Ll.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:t=>t}),Ul=yc,ql=Il.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(t,e)=>t+e}),Hl=yc,$l=Il.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(t,e)=>t-e}),Wl=yc,Xl=Il.define("Multiplication",{attrs:{oper:{text:"×"}}},{arithop:(t,e)=>t*e}),Yl=yc,Jl=Il.define("Division",{attrs:{oper:{text:"÷"}}},{arithop:(t,e)=>0n==e?t:t/e}),Zl=yc,Kl=Il.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(t,e)=>0n==e?t:t%e}),Ql=yc,th=Il.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),eh=yc,nh=Bl.define("ShiftLeft",{attrs:{oper:{text:"≪"}}},{shiftdir:-1}),rh=yc,ih=Bl.define("ShiftRight",{attrs:{oper:{text:"≫"}}},{shiftdir:1}),oh=yc,sh=Dl.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(t,e)=>t<e}),ah=yc,uh=Dl.define("Le",{attrs:{oper:{text:"≤"}}},{arithcomp:(t,e)=>t<=e}),ch=yc,lh=Dl.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(t,e)=>t>e}),hh=yc,fh=Dl.define("Ge",{attrs:{oper:{text:"≥"}}},{arithcomp:(t,e)=>t>=e}),dh=yc,ph=Fl.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(t,e)=>t.xnor(e).reduceAnd()}),gh=yc,vh=Fl.define("Ne",{attrs:{oper:{text:"≠"}}},{bincomp:(t,e)=>t.xor(e).reduceOr()}),mh=yc,yh=Nl.define("OpConst",{leftOp:!1,constant:0},{initialize(){Nl.prototype.initialize.apply(this,arguments);let t=this.get("constant");("string"==typeof t||t instanceof String)&&(t=BigInt(t),Ml(t)&&(t=Number(t)),this.set("constant",t));const e=()=>{const t=30+10*String(this.get("constant")).length;this.prop("size",{width:t,height:t}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};e(),this.on("change:bits",((t,e)=>{this._setPortsBits(e)})),this.on("change:constant",(()=>e())),this.on("change:leftOp",(()=>e()))},getGateParams(){const t=Nl.prototype.getGateParams.apply(this,arguments);return"bigint"==typeof t.constant&&(Ml(t.constant)?t.constant=Number(t.constant):t.constant=String(t.constant)),t},_gateParams:Nl.prototype._gateParams.concat(["leftOp","constant"])}),bh=yh.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],yh.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:Xu.Vector3vl.fromNumber(this.arithop(BigInt(r),t.in.toBigInt(n.in)),e.out)}:{out:Xu.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(n.in),BigInt(r)),e.out)}:{out:Xu.Vector3vl.xes(e.out)}},_operationHelpers:yh.prototype._operationHelpers.concat(["arithop"])}),xh=yh.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],yh.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!t.in.isFullyDefined)return{out:Xu.Vector3vl.xes(e.out)};const o=t.in.toNumber(n.in),s=Xu.Vector3vl.fromNumber(i);return{out:jl(s,o*this.shiftdir,s.bits,e.out,i<0,n.out,r)}}return console.assert(Ml(i)),{out:jl(t.in,Number(i)*this.shiftdir,e.in,e.out,n.in,n.out,r)}},_gateParams:yh.prototype._gateParams.concat(["fillx"]),_operationHelpers:yh.prototype._operationHelpers.concat(["shiftdir"])}),wh=yh.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:1}],yh.prototype.initialize.apply(this,arguments)}}),_h=wh.define("CompareConst",{},{operation(t){this.get("bits");const e=this.get("signed"),n=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:Xu.Vector3vl.fromBool(this.arithcomp(BigInt(n),t.in.toBigInt(e.in)))}:{out:Xu.Vector3vl.fromBool(this.arithcomp(t.in.toBigInt(e.in),BigInt(n)))}:{out:Xu.Vector3vl.x}},_operationHelpers:wh.prototype._operationHelpers.concat(["arithcomp"])}),Ah=wh.define("EqCompareConst",{},{operation(t){const e=this.get("bits"),n=(this.get("signed"),this.get("constant"));return this.get("leftOp")?{out:this.bincomp(Xu.Vector3vl.fromNumber(n,e.in),t.in)}:{out:this.bincomp(t.in,Xu.Vector3vl.fromNumber(n,e.in))}},_operationHelpers:wh.prototype._operationHelpers.concat(["bincomp"])}),Sh=bh.define("AdditionConst",{},{operSymbol:"+",arithop:(t,e)=>t+e}),Eh=yc,kh=bh.define("SubtractionConst",{},{operSymbol:"-",arithop:(t,e)=>t-e}),Th=yc,Ph=bh.define("MultiplicationConst",{},{operSymbol:"×",arithop:(t,e)=>t*e}),Ch=yc,Oh=bh.define("DivisionConst",{},{operSymbol:"÷",arithop:(t,e)=>0n==e?t:t/e}),Mh=yc,Nh=bh.define("ModuloConst",{},{operSymbol:"%",arithop:(t,e)=>0n==e?t:t%e}),Lh=yc,Ih=bh.define("PowerConst",{},{operSymbol:"^",arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),jh=yc,Bh=xh.define("ShiftLeftConst",{},{operSymbol:"≪",shiftdir:-1}),Rh=yc,Dh=xh.define("ShiftRightConst",{},{operSymbol:"≫",shiftdir:1}),Fh=yc,Vh=_h.define("LtConst",{},{operSymbol:"<",arithcomp:(t,e)=>t<e}),zh=yc,Gh=_h.define("LeConst",{},{operSymbol:"≤",arithcomp:(t,e)=>t<=e}),Uh=yc,qh=_h.define("GtConst",{},{operSymbol:">",arithcomp:(t,e)=>t>e}),Hh=yc,$h=_h.define("GeConst",{},{operSymbol:"≥",arithcomp:(t,e)=>t>=e}),Wh=yc,Xh=Ah.define("EqConst",{},{operSymbol:"=",bincomp:(t,e)=>t.xnor(e).reduceAnd()}),Yh=yc,Jh=Ah.define("NeConst",{},{operSymbol:"≠",bincomp:(t,e)=>t.xor(e).reduceOr()}),Zh=yc,Kh=wc.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const t=this.get("extend");console.assert(t.input<=t.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.input},{id:"out",group:"out",dir:"out",bits:t.output}],wc.prototype.initialize.apply(this,arguments),this.on("change:extend",((t,e)=>{this._setPortsBits({in:e.input,out:e.output})}))},operation(t){const e=this.get("extend");return{out:t.in.concat(Xu.Vector3vl.make(e.output-e.input,this._extBit(t.in)))}},markup:wc.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:wc.prototype._gateParams.concat(["extend"]),_operationHelpers:wc.prototype._operationHelpers.concat(["_extBit"])}),Qh=_c.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),tf=Kh.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit:t=>-1}),ef=Qh,nf=Kh.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit:t=>t.get(t.bits-1)}),rf=Qh,of=wc.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const t=this.get("slice"),e=1==t.count?t.first:t.first+"-"+(t.first+t.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.total},{id:"out",group:"out",dir:"out",bits:t.count,portlabel:e,labelled:!0}],wc.prototype.initialize.apply(this,arguments),this.on("change:slice",((t,e)=>{this._setPortsBits({in:e.total,out:e.count})}))},operation(t){const e=this.get("slice");return{out:t.in.slice(e.first,e.first+e.count)}},_gateParams:wc.prototype._gateParams.concat(["slice"])}),sf=_c.extend({_autoResizeBox:!0}),af=wc.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var t=0;const e=[],n=this.get("groups");this.get("size").height=16*n.length+8;for(const[r,i]of n.entries()){const n=t+(i>1?"-"+(t+i-1):"");t+=i,e.push({id:this.group_dir+r,group:this.group_dir,dir:this.group_dir,bits:i,portlabel:n,labelled:!0})}this.set("bits",t);const r="out"==this.group_dir?"in":"out";e.push({id:r,group:r,dir:r,bits:t}),this.get("ports").items=e,wc.prototype.initialize.apply(this,arguments)},_gateParams:wc.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:wc.prototype._unsupportedPropChanges.concat(["groups"])}),uf=_c.extend({_autoResizeBox:!0}),cf=af.define("BusGroup",{},{group_dir:"in",operation(t){const e=[];for(const n of this.get("groups").keys())e.push(t["in"+n]);return{out:Xu.Vector3vl.concat(...e)}}}),lf=uf,hf=af.define("BusUngroup",{},{group_dir:"out",operation(t){const e={};let n=0;for(const[r,i]of this.get("groups").entries())e["out"+r]=t.in.slice(n,n+i),n+=i;return e}}),ff=uf,df=wc.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const t=this.get("graph");console.assert(t instanceof tu),t.set("subcircuit",this);const e=t.getCells().filter((t=>t instanceof Ec)),n=e.filter((t=>t instanceof Tc)),r=e.filter((t=>t instanceof Lc));function i(t,e){return t.has("order")||e.has("order")?t.get("order")-e.get("order"):t.get("net").localeCompare(e.get("net"))}n.sort(i),r.sort(i);const o={width:80,height:16*Math.max(n.length,r.length)+8},s=[],a={};for(const[t,e]of n.entries())s.push({id:e.get("net"),group:"in",dir:"in",bits:e.get("bits"),labelled:!0});for(const[t,e]of r.entries())s.push({id:e.get("net"),group:"out",dir:"out",bits:e.get("bits"),labelled:!0});for(const t of e)a[t.get("net")]=t.get("id");this.set("size",o),this.set("circuitIOmap",a),this.get("ports").items=s,this.set("warning",t._warnings>0),wc.prototype.initialize.apply(this,arguments)},_resetPortValue(t){const e=this.get("circuitIOmap"),n=this.get("graph");return"in"==t.dir?n.getCell(e[t.id]).get("outputSignals").out:"out"==t.dir?n.getCell(e[t.id]).get("inputSignals").in:wc.prototype._resetPortValue.call(this,t)},getLayoutSize(){const t=this.size();return t.height+=10,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+10})},getPortsPositions(){const t=wc.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+10;return e},markup:[{tagName:"rect",selector:"wrapper"}].concat(wc.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],wc.prototype.markupZoom),_gateParams:wc.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:wc.prototype._unsupportedPropChanges.concat(["celltype"])}),pf=_c.extend({attrs:Wu.merge({},_c.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:_c.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(t){_c.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"WARNING")&&this._updateWarning()},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},update(){_c.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(t){return t.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),gf=mc.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:Wu.merge({},vc,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const t=this.get("bits"),e=[{id:"sel",group:"in2",dir:"in",bits:t.sel},{id:"out",group:"out",dir:"out",bits:t.in}],n=this.muxInputs(t.sel);this.get("size").height=16*n.length+8;const r="M"+[[2,0],[5,5],[10,-5]].map((t=>t.join(" "))).join(" L");for(const[i,o]of n.entries()){const n={id:"in"+i,group:"in",dir:"in",bits:t.in,decor:r};o&&(n.portlabel=String(o),n.labelled=!0),e.push(n)}this.get("ports").items=e,mc.prototype.initialize.apply(this,arguments);const i=t=>this.attr(["body","points"],[[0,-5],[t.width,5],[t.width,t.height-5],[0,t.height+5]].map((t=>t.join(","))).join(" "));i(this.get("size")),this.on("change:size",((t,e)=>i(e)))},operation(t){const e=this.muxInput(t.sel);return void 0===e?{out:Xu.Vector3vl.xes(this.get("bits").in)}:{out:t["in"+e]}},getLayoutSize(){const t=this.size();return t.height+=30,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+20})},getPortsPositions(){const t=mc.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+20;return e},markup:mc.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:mc.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:mc.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:mc.prototype._operationHelpers.concat(["muxInput"])}),vf=yc.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),yc.prototype.initialize.apply(this,arguments)},confirmUpdate(t){yc.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){yc.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(t){const e=this.model.muxInput(t.sel);for(const t of this.ins.keys())this.$("[port=in"+t+"] path.decor").css("visibility",e==t?"visible":"hidden")}}),mf=gf.define("Mux",{},{muxInputs:t=>Array(1<<t),muxInput:t=>t.isFullyDefined?t.toBigInt().toString():void 0}),yf=vf,bf=gf.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:gf.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:t=>Array(t+1),muxInput:t=>{const e=t.toArray();return t.isFullyDefined&&e.filter((t=>1==t)).length<=1?String(e.indexOf(1)+1):void 0}}),xf=vf,wf=gf.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const t=this.get("inputs");for(let e=0;e<t.length;e++)"bigint"!=typeof t[e]&&(t[e]=BigInt(t[e]));gf.prototype.initialize.apply(this,arguments)},muxInputs(t){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(t){const e=this.get("default_input");if(!t.isFullyDefined)return;const n=this.get("inputs").indexOf(t.toBigInt());return n<0?e?0:void 0:e?n+1:n},_gateParams:gf.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:gf.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),_f=vf,Af=wc.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:wc.prototype._getStackedPosition({side:"left"})},out:{position:wc.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=(this.get("initial"),this.get("polarity")||{}),n=[];this.get("no_data")||n.push({id:"in",group:"in",dir:"in",bits:t,portlabel:"D",labelled:!0}),n.push({id:"out",group:"out",dir:"out",bits:t,portlabel:"Q",labelled:!0}),"arst"in e&&!this.get("arst_value")&&this.set("arst_value",Array(t).fill("0").join("")),"srst"in e&&!this.get("srst_value")&&this.set("srst_value",Array(t).fill("0").join(""));let r=1;"aload"in e&&(r+=2,n.push({id:"ain",group:"in",dir:"in",bits:t,portlabel:"AD",labelled:!0}),n.push({id:"aload",group:"in",dir:"in",bits:1,polarity:e.aload,labelled:!0})),"clock"in e&&(r++,n.push({id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:wc.prototype.decorClock,labelled:!0})),"set"in e&&(r++,n.push({id:"set",group:"in",dir:"in",bits:t,polarity:e.set,portlabel:"S",labelled:!0})),"clr"in e&&(r++,n.push({id:"clr",group:"in",dir:"in",bits:t,polarity:e.clr,portlabel:"R",labelled:!0})),"srst"in e&&(r++,n.push({id:"srst",group:"in",dir:"in",bits:1,polarity:e.srst,labelled:!0})),"arst"in e&&(r++,n.push({id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0})),"enable"in e&&(r++,n.push({id:"en",group:"in",dir:"in",bits:1,polarity:e.enable,labelled:!0})),this.get("size").height=16*r+8,this.get("ports").items=n,this.last_clk=0,wc.prototype.initialize.apply(this,arguments)},_resetPortValue(t){return"out"==t.id&&"out"==t.dir?Xu.Vector3vl.fromBin(this.get("initial"),t.bits):wc.prototype._resetPortValue.call(this,t)},operation(t){const e=this.get("polarity"),n=t=>e[t]?1:-1;let r,i,o;const s=t=>({out:i?t.and(o).or(i):t});if("clock"in e&&(r=this.last_clk,this.last_clk=t.clk.get(0)),"arst"in e&&t.arst.get(0)==n("arst"))return{out:Xu.Vector3vl.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in e&&t.aload.get(0)==n("aload"))return{out:t.ain};if("set"in e&&(i=e.set?t.set:t.set.not(),o=e.set?t.set.not():t.set),"clr"in e){i=i||Xu.Vector3vl.zeros(this.get("bits"));const n=e.clr?t.clr.not():t.clr;o=o?n.and(o):n}return"enable"in e&&t.en.get(0)!=n("enable")&&this.get("enable_srst")?s(this.get("outputSignals").out):!("clock"in e)||t.clk.get(0)==n("clock")&&r==-n("clock")?"srst"in e&&t.srst.get(0)==n("srst")?s(Xu.Vector3vl.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in e&&t.en.get(0)!=n("enable")&&!this.get("enable_srst")||this.get("no_data")?s(this.get("outputSignals").out):s(t.in):s(this.get("outputSignals").out)},_gateParams:wc.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:wc.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Sf=_c.extend({_autoResizeBox:!0}),Ef=wc.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:wc.prototype._getStackedPosition({side:"left"})},out:{position:wc.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("abits");this.get("rdports"),this.get("wrports");let n=0,r=0;const i=[],o=[];for(const[s,a]of this._memrdports())i.push({id:s+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0},{id:s+"data",group:"out",dir:"out",bits:t,portlabel:"data",labelled:!0,args:{idxOffset:r}}),n+=1,"srst_polarity"in a&&(n++,r++,i.push({id:s+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(n++,r++,i.push({id:s+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(n++,r++,i.push({id:s+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(n++,r++,i.push({id:s+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:wc.prototype.decorClock,labelled:!0})),o.push(n);for(const[r,s]of this._memwrports())n+=2,i.push({id:r+"data",group:"in",dir:"in",bits:t,portlabel:"data",labelled:!0},{id:r+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0}),"enable_polarity"in s&&(n++,i.push({id:r+"en",group:"in",dir:"in",bits:s.no_bit_enable?1:t,portlabel:"en",polarity:s.enable_polarity,labelled:!0})),"clock_polarity"in s&&(n++,i.push({id:r+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:s.clock_polarity,decor:wc.prototype.decorClock,labelled:!0})),o.push(n);o.pop(),this.get("size").height=16*n+8,this.get("ports").items=i,wc.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",((t,e)=>{const n=[];for(const t of o)n.push([[0,16*t+4],[e.width,16*t+4]].map((t=>t.join(" "))).join(" L "));this.attr("path.portsplit/d","M "+n.join(" M "))}))},_resetPortValue(t){if("out"==t.dir){const e=/^rd([0-9]+)data$/.exec(t.id),n=e?this.get("rdports")[e[1]]:{};if("init_value"in n)return Xu.Vector3vl.fromBin(n.init_value,t.bits)}return wc.prototype._resetPortValue.call(this,t)},prepare(){const t=this.get("bits");var e=this.get("words");const n=this.get("memdata");e||(e=1<<this.get("abits"),this.prop("words",e,{init:!0})),this.memdata=n?Xu.Mem3vl.fromJSON(t,n):new Xu.Mem3vl(t,e),console.assert(this.memdata.words==e),this.last_clk={};for(const[t,e]of this._memports())"clock_polarity"in e&&(this.last_clk[t+"clk"]=0)},operation(t){const e=this.get("bits"),n={},r=(t,e)=>t[e+"_polarity"]?1:-1,i=(e,n)=>!("enable_polarity"in n&&!t[e+"en"].toArray().some((t=>t==r(n,"enable")))),o=(e,n)=>{const i=e+"clk";return!("clock_polarity"in n)||t[i].get(0)==r(n,"clock")&&this.last_clk[i]==-r(n,"clock")},s=t=>t>=0&&t<this.get("words"),a=(r,i)=>{const o=this._calcaddr(t[r+"addr"]);s(o)?n[r+"data"]=this.memdata.get(o):n[r+"data"]=Xu.Vector3vl.xes(e)},u=(e,n,r,i)=>{if(n.no_bit_enable||!("enable_polarity"in n))return i;const o=n.enable_polarity?t[e+"en"]:t[e+"en"].not();return i.and(o).or(r.and(o.not()))},c=(r,s)=>{a(r);for(const[a,c]of this.get("wrports").entries()){const l="wr"+a,h=(t,e)=>"boolean"==typeof t?t:t[e];"transparent"in s&&h(s.transparent,a)&&o(l,c)&&i(l,c)&&t[r+"addr"]==t[l+"addr"]&&(n[r+"data"]=u(l,c,n[r+"data"],t[l+"data"])),"collision"in s&&h(s.collision,a)&&o(l,c)&&i(l,c)&&t[r+"addr"]==t[l+"addr"]&&(n[r+"data"]=u(l,c,n[r+"data"],Xu.Vector3vl.xes(e)))}},l=(e,n)=>{const r=this._calcaddr(t[e+"addr"]);if(s(r)){const i=this.memdata.get(r),o=u(e,n,i,t[e+"data"]),s=!i.eq(o);this.memdata.set(r,o),s&&this.trigger("memChange",r,o)}},h=(i,o)=>{t[i+"srst"].get(0)==r(o,"srst")&&(n[i+"data"]="srst_value"in o?Xu.Vector3vl.fromBin(o.srst_value,e):Xu.Vector3vl.zeros(e))},f=(i,o)=>{t[i+"arst"].get(0)==r(o,"arst")&&(n[i+"data"]="arst_value"in o?Xu.Vector3vl.fromBin(o.arst_value,e):Xu.Vector3vl.zeros(e))},d=(e,n)=>{if("clock_polarity"in n){const n=e+"clk";this.last_clk[n]=t[n].get(0)}};for(const[t,e]of this._memrdports())n[t+"data"]=this.get("outputSignals")[t+"data"],"clock_polarity"in e&&i(t,e)&&o(t,e)&&c(t,e);for(const[t,e]of this._memwrports())i(t,e)&&o(t,e)&&l(t,e);for(const[t,e]of this._memrdports())!("clock_polarity"in e)&&i(t,e)&&a(t);for(const[t,e]of this._memrdports())"srst_polarity"in e&&(i(t,e)||!("enable_srst"in e))&&o(t,e)&&h(t,e),"arst_polarity"in e&&f(t,e);for(const[t,e]of this._memrdports())d(t,e);for(const[t,e]of this._memwrports())d(t,e);return n},_calcaddr(t){return t.isFullyDefined?t.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[t,e]of this.get("rdports").entries())yield["rd"+t,e]},*_memwrports(){for(const[t,e]of this.get("wrports").entries())yield["wr"+t,e]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:wc.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],wc.prototype.markupZoom),getGateParams(){const t=wc.prototype.getGateParams.apply(this,arguments);return t.memdata=this.memdata.toJSON(),t},_gateParams:wc.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:wc.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:wc.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),kf=_c.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=this.model,n=e.graph._display3vl,r=_i("<div>",{title:"Memory contents: "+e.get("label")}).appendTo("html > body");r.append(_i('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">←</button><button name="next" type="button" class="btn btn-secondary" title="Next page">→</button></div><div class="input-group">'+Hc(n,e.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=e.get("words"),o=e.memdata,s=Math.ceil(e.get("abits")/4);let a,u=0;const c=()=>r.find("select[name=base]").val(),l=t=>{const e=Math.floor((t-u)/a),n=t-u-e*a;return r.find("table tr:nth-child("+(e+1)+") td:nth-child("+(n+2)+") input")},h=t=>{for(const[n,r]of e._memrdports())l(e._calcaddr(t[n+"addr"])).removeClass("isread");for(const[n,r]of e._memwrports())l(e._calcaddr(t[n+"addr"])).removeClass("iswrite")},f=t=>{for(const[n,r]of e._memrdports())l(e._calcaddr(t[n+"addr"])).addClass("isread");for(const[n,r]of e._memwrports())l(e._calcaddr(t[n+"addr"])).addClass("iswrite")},d=()=>{const t=c();r.find("button[name=prev]").prop("disabled",u<=0),r.find("button[name=next]").prop("disabled",u+8*a>=i);let o=r.find("table tr:first-child");const l=e.memdata;for(let e=0;e<8&&!(u+e*a>=i);e++,o=o.next()){const r=(u+e*a).toString(16);let c=o.find("td:first-child");c.text("0".repeat(s-r.length)+r),c=c.next();for(let r=0;r<a&&!(u+e*a+r>=i);r++,c=c.next())c.find("input").val(n.show(t,l.get(u+e*a+r))).removeClass("invalid")}f(e.get("inputSignals"))},p=()=>{const t=c(),o=n.pattern(t),s=n.size(t,e.get("bits"));a=Math.min(i,16,Math.ceil(32/s)),u=Math.max(0,Math.min(i-8*a,u));const l=r.find("table");l.empty();for(let t=0;t<8&&!(u+t*a>=i);t++){const e=_i("<tr>");_i("<td>").appendTo(e);for(let n=0;n<a&&!(u+t*a+n>=i);n++){const t=_i("<td>");_i('<input type="text">').attr("size",s).attr("maxlength",s).attr("pattern",o).appendTo(t),t.appendTo(e)}e.appendTo(l)}d()};p(),r.find("select[name=base]").on("change",p),r.find("button[name=prev]").on("click",(()=>{h(e.get("inputSignals")),u=Math.max(0,u-8*a),d()})),r.find("button[name=next]").on("click",(()=>{h(e.get("inputSignals")),u=Math.min(i-8*a,u+8*a),d()})),r.on("change","input",(t=>{const r=c(),i=_i(t.target),s=i.closest("td").index()-1,l=i.closest("tr").index(),h=u+l*a+s,f=e.get("bits");if(n.validate(r,t.target.value,f)){const s=n.read(r,t.target.value,f);o.set(h,s),e.trigger("manualMemChange",e,h,s),i.removeClass("invalid")}else i.addClass("invalid")}));const g=(t,e)=>{if(t<u||t>u+8*a)return;const r=c(),i=l(t).val(n.show(r,o.get(t))).removeClass("invalid").removeClass("flash");setTimeout((()=>{i.addClass("flash")}),10)},v=(t,n)=>{h(e.previous("inputSignals")),f(n)};return e.on("memChange",g),e.on("change:inputSignals",v),this.paper.trigger("open:memorycontent",r,(()=>{r.remove(),e.off("memChange",g),e.off("change:inputSignals",v)})),!1}}),Tf=wc.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:56},ports:{groups:{in:{position:wc.prototype._getStackedPosition({side:"left"})},out:{position:wc.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("polarity"),n=this.get("init_state"),r=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:wc.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:t.out,labelled:!0}],wc.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new tu;const o=[];for(let t=0;t<r;t++){const e=new Ku({stateNo:t,id:"state"+t,isInit:t==n});e.attr("label/text",String(t)),e.resize(100,50),t==n&&e.attr("body/strokeWidth",3),t==i&&e.attr("body/class","current_state"),e.addTo(this.fsmgraph),o.push(e)}for(const[t,e]of this.transitions)for(const n of e){const e=new tc({id:n.id,ctrlIn:n.ctrlIn,ctrlOut:n.ctrlOut});e.appendLabel({attrs:{text:{text:e.get("ctrlIn").toBin()+"/"+e.get("ctrlOut").toBin()}}}),e.source({id:"state"+t}),e.target({id:"state"+n.stateOut}),e.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",((t,e)=>{const n=t.previous("current_state");this.fsmgraph.getCell("state"+n).removeAttr("body/class"),this.fsmgraph.getCell("state"+e).attr("body/class","current_state")})),this.listenTo(this,"change:next_trans",((t,e)=>{const n=t.previous("next_trans");if(n){const t=this.fsmgraph.getCell(n);t.removeAttr("line/class"),t.removeAttr("line/targetMarker/class")}e&&this.fsmgraph.getCell(e).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})}))},prepare(){const t=this.get("bits");this.transitions=new Map;var e=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+e,stateOut:n.state_out,ctrlIn:Xu.Vector3vl.fromBin(n.ctrl_in,t.in),ctrlOut:Xu.Vector3vl.fromBin(n.ctrl_out,t.out)}),e++;var n=this.get("current_state");void 0===n&&(n=this.get("init_state"),this.set("current_state",n)),this.last_clk=0},operation(t){const e=this.get("bits"),n=this.get("polarity"),r=()=>{const e=this.transitions.get(this.get("current_state"))||[];for(const n of e){const e=n.ctrlIn,r=e.xmask();if(t.in.or(r).eq(e.or(r)))return n}},i=t=>n[t]?1:-1;if(t.arst.get(0)==i("arst"))this.set("current_state",this.get("init_state"));else{const e=this.last_clk;if(t.clk.get(0)==i("clock")&&e==-i("clock")){const t=r();this.set("current_state",t?t.stateOut:this.get("init_state"))}}this.last_clk=t.clk.get(0);const o=r();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:(()=>{const n=this.transitions.get(this.get("current_state"))||[],r=t.in.xmask(),i=[];for(const e of n){const n=e.ctrlIn,o=n.xmask().or(r);t.in.or(o).eq(n.or(o))&&i.push(e.ctrlOut)}const o=Xu.Vector3vl.xes(e.out);if(0==i.length)return o;for(;i.length>1;){const t=i.pop(),e=i[0].xnor(t).or(o);i[0]=i[0].and(e).or(o.and(e.xmask()))}return i[0]})()}},markup:wc.prototype.markup.concat(wc.prototype.markupZoom),_gateParams:wc.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:wc.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:wc.prototype._presentationParams.concat(["current_state","next_trans"])}),Pf=_c.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=_i("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),n=_i("<div>").appendTo(e),r=this.model.fsmgraph,i=new Hu({el:n,model:r});return r.resetCells(r.getCells()),r.get("laid_out")||($u.layout(r,{dagre:y,graphlib:b}),r.set("laid_out",!0)),i.listenTo(r,"change:position",(t=>{i.fitToContent({padding:30,allowNewOrigin:"any"})})),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",e,(()=>{i.remove(),e.remove()})),!1}}),Cf="#03c03c",Of="#3c3c3c",Mf=Ec.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:Of,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:Ac.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),Nf=kc.extend({_autoResizeBox:!1,confirmUpdate(t){_c.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const t=this.model.getOutput(),e={dp:{fill:1===t.get(7)?Cf:Of},a:{fill:1===t.get(6)?Cf:Of},b:{fill:1===t.get(5)?Cf:Of},c:{fill:1===t.get(4)?Cf:Of},d:{fill:1===t.get(3)?Cf:Of},e:{fill:1===t.get(2)?Cf:Of},f:{fill:1===t.get(1)?Cf:Of},g:{fill:1===t.get(0)?Cf:Of}};this._applyAttrs(e)}});var Lf=n(71451);class If{constructor(t){this._graph=t}_addGate(t,e){"Subcircuit"==e.get("type")&&this._addGraph(e.get("graph"))}_addLink(t,e){}_addGraph(t){this.listenTo(t,"add",(e=>{e.isLink()?this._addLink(t,e):this._addGate(t,e)})),this.listenTo(t,"remove",(e=>{e.isLink()?this._removeLink(t,e):this._removeGate(t,e)})),this.listenTo(t,"change:source",((e,n)=>{this._changeLinkSource(t,e,n,e.previous("source"))})),this.listenTo(t,"change:target",((e,n)=>{this._changeLinkTarget(t,e,n,e.previous("target"))})),this.listenTo(t,"change:warning",((e,n)=>{this._changeLinkWarning(t,e,n,e.previous("warning"))}));for(const e of t.getElements())this._addGate(t,e);for(const e of t.getLinks())this._addLink(t,e)}_removeGate(t,e){}_removeLink(t,e){}_changeLinkSource(t,e,n,r){}_changeLinkTarget(t,e,n,r){}_changeLinkWarning(t,e,n,r){}}Wu.extend(If.prototype,Yi.Events);class jf extends If{constructor(t,{cells:e}){super(t),this._queue=new Map,this._pq=new Lf,this._tick=0,this._cells=e,this._monitorChecks=new Map,this._alarms=new Map,this._alarmQueue=new Map,this._addGraph(t)}get hasPendingEvents(){return this._queue.size>0}get tick(){return this._tick}shutdown(){this.stopListening()}_updateSubcircuit(t,e,n={}){e||(e=t.get("inputSignals"));const r=t.get("circuitIOmap");for(const[i,o]of Object.entries(e)){if(n[i]&&o.eq(n[i]))continue;const e=t.get("graph").getCell(r[i]);console.assert(e.isInput),e._setInput(o)}}_addGate(t,e){super._addGate(t,e),this._enqueue(e),e instanceof this._cells.Subcircuit&&this._updateSubcircuit(e)}_addGraph(t){this.listenTo(t,"manualMemChange",(t=>{this._enqueue(t)})),this.listenTo(t,"change:constantCache",(t=>{this._enqueue(t)})),this.listenTo(t,"change:inputSignals",((t,e)=>{const n=t.previous("inputSignals");if(!$c(e,n)){if(t instanceof this._cells.Subcircuit&&this._updateSubcircuit(t,e,n),t instanceof this._cells.Output&&0==t.get("mode")){const e=t.graph.get("subcircuit");if(1!=e){console.assert(null!=e);const n=t.get("net"),r=Wu.clone(e.get("outputSignals"));r[n]=t.getOutput(),e.set("outputSignals",r)}}this._enqueue(t)}})),super._addGraph(t)}_enqueue(t){const e=this._tick+t.get("propagation")|0;(()=>{const t=this._queue.get(e);if(void 0!==t)return t;const n=new Map;return this._queue.set(e,n),this._pq.add(e),n})().set(t,t.get("inputSignals"))}updateGatesNext(){const t=0|this._pq.poll();console.assert(t>=this._tick),this._tick=t;const e=this._queue.get(t);let n=0;for(;e.size;){const[t,r]=e.entries().next().value;if(e.delete(t),t instanceof this._cells.Subcircuit)continue;if(t instanceof this._cells.Input)continue;if(t instanceof this._cells.Output)continue;if(!t.graph)continue;const i=t.operation(r);"_clock_hack"in i&&(delete i._clock_hack,this._enqueue(t)),t.set("outputSignals",i),n++}return this._queue.delete(t),this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,n),Promise.resolve(n)}updateGates(){if(this._pq.peek()==this._tick)return this.updateGatesNext();{const t=0|this._tick;return this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,0),Promise.resolve(0)}}synchronize(){return Promise.resolve()}start(){throw new Error("start() not supported")}startFast(){throw new Error("startFast() not supported")}stop(){return Promise.resolve()}get interval(){throw new Error("interval not supported")}set interval(t){throw new Error("interval not supported")}get running(){return!1}observeGraph(t){}unobserveGraph(t){}monitor(t,e,n,{triggerValues:r,stopOnTrigger:i,oneShot:o}){const s=(t,a)=>{const u=a[e];this._monitorChecks.set(s,{gate:t,sig:u,cb:s,callback:n,triggerValues:r,stopOnTrigger:i,oneShot:o})};return t.on("change:outputSignals",s),null==r&&n(this._tick,t.get("outputSignals")[e]),{gate:t,callback:s}}unmonitor(t){t.gate.off("change:outputSignals",t.callback)}alarm(t,e,{stopOnAlarm:n}){console.assert(t>this._tick);const r=()=>{this.unalarm(r),e()};return this._alarms.set(r,{tick:t,stopOnAlarm:n}),this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(r),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map),r}unalarm(t){const{tick:e}=this._alarms.get(t);this._alarmQueue.get(e).delete(t),0==this._alarmQueue.get(e).size&&this._alarmQueue.delete(e),this._alarms.delete(t)}_checkMonitors(){for(const{gate:t,sig:e,cb:n,callback:r,triggerValues:i,stopOnTrigger:o,oneShot:s}of this._monitorChecks.values()){let a=!0;null!=i&&(a=i.some((t=>e.eq(t)))),a&&(s&&t.off("change:outputSignals",n),r(this._tick,e)&&o&&this.stop())}if(this._monitorChecks=new Map,this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:e}=this._alarms.get(t);t()&&e&&this.stop()}this._alarmQueue.delete(this._tick)}}}class Bf extends jf{constructor(t,e){super(t,e),this._interval_ms=10,this._interval=null,this._idle=null}start(){this._interval=setInterval((()=>{this.updateGates(),this._checkMonitors()}),this._interval_ms),this.trigger("changeRunning")}startFast(){const t=()=>{this._idle=requestIdleCallback((e=>{for(;e.timeRemaining()>0&&this.hasPendingEvents&&null!==this._idle;)this.updateGatesNext(),this._checkMonitors();null!==this._idle&&t()}),{timeout:20})};t(),this.trigger("changeRunning")}stop(){return this._interval&&(clearInterval(this._interval),this._interval=null),this._idle&&(cancelIdleCallback(this._idle),this._idle=null),this.trigger("changeRunning"),Promise.resolve()}get interval(){return this._interval_ms}set interval(t){console.assert(t>0),this._interval_ms=t}get running(){return null!==this._interval||null!==this._idle}}const Rf="undefined"!=typeof Worker?Worker:void 0;class Df extends If{constructor(t,{workerURL:e}){super(t),this._running=!1,this._tickCache=0,this._pendingEventsCache=!1,this._observers=Object.create(null),this._graphs=Object.create(null),this._monitors=Object.create(null),this._promises=Object.create(null),this._alarms=Object.create(null),this._uniqueCounter=0,this._worker=e?new Rf(e):new Rf(new URL(n.p+n.u(821),n.b),{type:"module"}),this._worker.onmessage=t=>this._handleMessage(t.data),this.interval=10,this._addGraph(this._graph)}_addGate(t,e){const n=e.getGateParams(),r=e.getPorts().map((({id:t,dir:e,bits:n})=>({id:t,dir:e,bits:n})));this._worker.postMessage({type:"addGate",args:[t.cid,e.id,n,r,e.get("inputSignals"),e.get("outputSignals")]}),super._addGate(t,e),e instanceof df&&this._worker.postMessage({type:"addSubcircuit",args:[t.cid,e.id,e.get("graph").cid,e.get("circuitIOmap")]}),e instanceof Tc&&0!=e.get("mode")&&this.listenTo(e,"change:outputSignals",((e,n)=>{e.previous("outputSignals").out.eq(n.out)||this._worker.postMessage({type:"changeInput",args:[t.cid,e.id,n.out]})})),e instanceof Ef&&(this.listenTo(e,"memChange",((t,n)=>{e.memdata.set(t,n)})),this.listenTo(e,"manualMemChange",((t,e,n)=>{this._worker.postMessage({type:"manualMemChange",args:[t.graph.cid,t.id,e,n]})})));for(const n of e._gateParams)e._unsupportedPropChanges.includes(n)||e._presentationParams.includes(n)||this.listenTo(e,"change:"+n,((e,r)=>{this._worker.postMessage({type:"changeParam",args:[t.cid,e.id,n,r]})}))}_addLink(t,e){!e.get("warning")&&e.get("source").id&&e.get("target").id&&this._worker.postMessage({type:"addLink",args:[t.cid,e.id,e.get("source"),e.get("target")]}),super._addLink(t,e)}_addGraph(t){this._observers[t.cid]=0,this._graphs[t.cid]=t,this._worker.postMessage({type:"addGraph",args:[t.cid]}),super._addGraph(t)}_removeGate(t,e){this._worker.postMessage({type:"removeGate",args:[t.cid,e.id]}),super._removeGate(t,link),this.stopListening(e)}_removeLink(t,e){!e.get("warning")&&e.get("source").id&&e.get("target").id&&this._worker.postMessage({type:"removeLink",args:[t.cid,e.id]}),super._removeLink(t,e)}_changeLinkSource(t,e,n,r){super._changeLinkSource(t,e,n,r),!e.get("warning")&&e.get("target").id&&(n.id&&!r.id&&this._worker.postMessage({type:"addLink",args:[t.cid,e.id,e.get("source"),e.get("target")]}),r.id&&!n.id&&this._worker.postMessage({type:"removeLink",args:[t.cid,e.id]}))}_changeLinkTarget(t,e,n,r){super._changeLinkTarget(t,e,n,r),!e.get("warning")&&e.get("source").id&&(n.id&&!r.id&&this._worker.postMessage({type:"addLink",args:[t.cid,e.id,e.get("source"),e.get("target")]}),r.id&&!n.id&&this._worker.postMessage({type:"removeLink",args:[t.cid,e.id]}))}_changeLinkWarning(t,e,n,r){super._changeLinkWarning(t,e,n,r),e.get("source").id&&e.get("target").id&&(!n&&r&&this._worker.postMessage({type:"addLink",args:[t.cid,e.id,e.get("source"),e.get("target")]}),!r&&n&&this._worker.postMessage({type:"removeLink",args:[t.cid,e.id]}))}get hasPendingEvents(){return this._pendingEventsCache}get tick(){return this._tickCache}shutdown(){this._worker.terminate()}synchronize(){const[t,e]=this._generatePromise();return this._worker.postMessage({type:"ping",args:[t,!0]}),e}updateGatesNext({synchronous:t=!1}={}){if(this._running)throw new Error("updateGatesNext while running");const[e,n]=this._generatePromise();return this._worker.postMessage({type:"updateGatesNext",args:[e,t]}),n}updateGates({synchronous:t=!1}={}){if(this._running)throw new Error("updateGates while running");const[e,n]=this._generatePromise();return this._worker.postMessage({type:"updateGates",args:[e,t]}),n}start(){if(this.running)throw new Error("start while running");this._worker.postMessage({type:"start"}),this._running=!0,this.trigger("changeRunning")}startFast(){if(this.running)throw new Error("startFast while running");this._worker.postMessage({type:"startFast"}),this._running="fast",this.trigger("changeRunning")}stop({synchronous:t=!1}={}){if(!this._running)return;const[e,n]=this._generatePromise();return this._worker.postMessage({type:"stop",args:[e,t]}),this._running=!1,this.trigger("changeRunning"),n}get interval(){return this._interval}set interval(t){this._interval=t,this._worker.postMessage({type:"interval",arg:t})}get running(){return 0!=this._running}observeGraph(t){this._observers[t.cid]+=1,1==this._observers[t.cid]&&this._worker.postMessage({type:"observeGraph",arg:t.cid})}unobserveGraph(t){this._observers[t.cid]-=1,0==this._observers[t.cid]&&this._worker.postMessage({type:"unobserveGraph",arg:t.cid})}monitor(t,e,n,r){const i=this._generateUniqueId();return this._monitors[i]=n,this._worker.postMessage({type:"monitor",args:[t.graph.cid,t.id,e,i,r]}),i}unmonitor(t){t in this._monitors&&(this._worker.postMessage({type:"unmonitor",arg:t}),delete this._monitors[t])}alarm(t,e,n){console.assert(t>this._tickCache);const r=this._generateUniqueId();return this._alarms[r]=e,this._worker.postMessage({type:"alarm",args:[t,r,n]}),r}unalarm(t){t in this._alarms&&(this._worker.postMessage({type:"unalarm",arg:t}),delete this._alarms[t])}_handleMessage(t){const e="_handle_"+t.type;"arg"in t?this[e](t.arg):"args"in t?this[e].apply(this,t.args):this[e]()}_handle_update(t,e,n){let r=this._pendingEventsCache!=e;this._tickCache=t,this._pendingEventsCache=e;for(const[t,e,r]of n){const n=this._findGateByIds(t,e);if(void 0===n)continue;const i={};for(const[t,e]of Object.entries(r))i[t]=Xu.Vector3vl.fromClonable(e);Wu.defaults(i,n.get("outputSignals")),n.set("outputSignals",i)}this.trigger("postUpdateGates",t),r&&this.trigger("changeRunning")}_handle_stopped(t){this._running=!1,this._pendingEventsCache=!1,this._tickCache=t,this.trigger("changeRunning")}_handle_gateTrigger(t,e,n,r){"memChange"==n&&(r[1]=Xu.Vector3vl.fromClonable(r[1]));const i=this._findGateByIds(t,e);void 0!==i&&i.trigger(n,...r)}_handle_gateSet(t,e,n,r){const i=this._findGateByIds(t,e);void 0!==i&&i.set(n,r)}_handle_monitorValue(t,e,n,r,i){const o=this._monitors[t];if(null==o)return;i&&delete this._monitors[t];const s=o(e,Xu.Vector3vl.fromClonable(n));r&&(s?(this._running=!1,this.trigger("changeRunning")):this._running&&this._worker.postMessage({type:"fast"==this._running?"startFast":"start"}))}_handle_alarmReached(t,e,n){const r=this._alarms[t];if(null==r)return;delete this._alarms[t];const i=r();n&&(i?(this._running=!1,this.trigger("changeRunning")):this._running&&this._worker.postMessage({type:"fast"==this._running?"startFast":"start"}))}_handle_ack(t,e){this._resolvePromise(t,e)}_findGateByIds(t,e){const n=this._graphs[t];if(void 0!==n)return n.getCell(e)}_generateUniqueId(){return this._uniqueCounter++}_generatePromise(){const t=this._generateUniqueId();return[t,new Promise((e=>{this._promises[t]=e}))]}_resolvePromise(t,e){this._promises[t]?(this._promises[t](e),delete this._promises[t]):console.warn("Missing promise",t)}}function Ff(t,e,n){if("Repeater"!=e.type)return!1;const r=t.outputPortConnectors(n,"out"),i=t.inputPortConnectors(n,"in");t.removeDevice(n);for(const e of Object.values(i))if(e.from.id!=n)for(const i of Object.values(r)){if(i.to.id==n)continue;const r={from:e.from,to:i.to};t.addConnector(r,[e,i])}return!0}const Vf=new Map([["And","Nand"],["Nand","And"],["Nor","Or"],["Or","Nor"],["Xor","Xnor"],["Xnor","Xor"],["AndReduce","NandReduce"],["NandReduce","AndReduce"],["NorReduce","OrReduce"],["OrReduce","NorReduce"],["XorReduce","XnorReduce"],["XnorReduce","XorReduce"]]);function zf(t,e,n){if(!Vf.has(e.type))return!1;const r=t.outputPortConnectors(n,"out"),i=Object.values(r);if(1!=i.length)return!1;if(i[0].to.id==n)return!1;if("Not"!=t.getDevice(i[0].to.id).type)return!1;e.type=Vf.get(e.type);const o=t.outputPortConnectors(i[0].to.id,"out");t.removeDevice(i[0].to.id);for(const e of Object.values(o)){const n={from:i[0].from,to:e.to};t.addConnector(n,[e,i[0]])}return!0}const Gf=new Map([["Addition","AdditionConst"],["Subtraction","SubtractionConst"],["Multiplication","MultiplicationConst"],["Division","DivisionConst"],["Modulo","ModuloConst"],["Power","PowerConst"],["ShiftLeft","ShiftLeftConst"],["ShiftRight","ShiftRightConst"],["Lt","LtConst"],["Le","LeConst"],["Gt","GtConst"],["Ge","GeConst"],["Eq","EqConst"],["Ne","NeConst"]]);function Uf(t,e,n){if(!Gf.has(e.type))return!1;function r(r,i,o,s,a,u){if(1!=r.length)return!1;const c=r[0].from.id,l=t.getDevice(c);if("Constant"!=l.type)return!1;const h=Xu.Vector3vl.fromBin(l.constant,l.constant.length);if(!h.isFullyDefined)return!1;const f=h.toBigInt(s);if(f>999||f<-99)return!1;const d=Wu.cloneDeep(e);d.bits&&(d.bits.in=d.bits[u]||1,delete d.bits[a],delete d.bits[u]),d.signed&&(d.signed.in=d.signed[a]&&d.signed[u]||!1,delete d.signed[a],delete d.signed[u]),d.leftOp="in1"==a,d.type=Gf.get(d.type),d.constant=Number(f),t.removeDevice(n),0==Object.values(t.outputPortConnectors(c,"out")).length&&t.removeDevice(c),t.addDevice(d,n);for(const e of o)t.addConnector(e);for(const e of i){const n=Wu.cloneDeep(e);n.to.port="in",t.addConnector(n)}return!0}const i=Object.values(t.outputPortConnectors(n,"out")),o=Object.values(t.inputPortConnectors(n,"in1")),s=Object.values(t.inputPortConnectors(n,"in2"));return r(o,s,i,e.signed.in1,"in1","in2")||r(s,o,i,e.signed.in2,"in2","in1")}const qf=new Map([["And","And"],["Or","Or"],["Xor","Xor"],["Nand","And"],["Nor","Or"],["Xnor","Xor"]]);function Hf(t,e,n){function r(t){return Number(t.match(/^in([0-9]+)$/)[1])}if(!qf.has(e.type))return!1;const i=e.inputs||2,o=Object.values(t.inputConnectors(n)),s=Object.values(t.outputPortConnectors(n,"out"));for(const a of o){const u=a.from.id;if(t.getDevice(u).type!=qf.get(e.type))continue;const c=Object.values(t.outputConnectors(u));if(1!=c.length)continue;if(c[0].to.id!=n)continue;const l=Object.values(t.inputConnectors(u)),h=r(a.to.port);t.removeDevice(u),t.removeDevice(n);const f=Wu.cloneDeep(e);f.inputs=i+l.length-1,t.addDevice(f,n);for(const e of s)t.addConnector(e);for(const e of o){const n=r(e.to.port);if(n==h)continue;const i=Wu.cloneDeep(e);n>h&&(i.to.port="in"+(n+l.length-1)),t.addConnector(i)}for(const e of l){const i=r(e.to.port),o=Wu.cloneDeep(e);o.to.id=n,o.to.port="in"+(i+h-1),t.addConnector(o)}return!0}return!1}function $f(t,e,n){if("Mux1Hot"!=e.type)return!1;const r=Object.values(t.inputPortConnectors(n,"sel"));if(1!=r.length)return!1;const i=[],o={};let s,a=-1,u=!1;if(!function e(n,r){i.push(n);const u=t.getDevice(n);function c(t,e,n){if(t<0)return!1;if(t in o)return!1;const i=n;if(1!=i.length)return!1;if(null==s&&(s=i[0]),s.from.id!=i[0].from.id||s.from.port!=i[0].from.port)return!1;const u=e||1;return-1==a&&(a=u),a==u&&(o[t]=r,!0)}if("BusGroup"==u.type){let i=0;for(const[o,s]of(u.groups||[1]).entries()){const a=Object.values(t.inputPortConnectors(n,"in"+o));if(1!=a.length)return!1;if(!e(a[0].from.id,r+i))return!1;i+=s}return!0}if("EqConst"==u.type)return c(u.constant,(u.bits||{}).in,Object.values(t.inputConnectors(n)));if("NorReduce"==u.type)return c(0,u.bits,Object.values(t.inputPortConnectors(n,"in")));if("OrReduce"==u.type){const o=Object.values(t.inputPortConnectors(n,"in"));if(1!=o.length)return!1;const s=o[0].from.id;if("BusGroup"!=t.getDevice(s).type)return!1;if(i.push(s),!(u.groups||[]).every((t=>1==t)))return!1;for(const n of Object.values(t.inputConnectors(s)))if(!e(n.from.id,r))return!1;return!0}return!1}(r[0].from.id,1))return!1;const c={};for(let r=0;r<=e.bits.sel;r++)c[r]=Object.values(t.inputPortConnectors(n,"in"+r));if(null==s)return!1;if(a>9)return!1;(a>6||Object.entries(o).length<2**(e.bits-1))&&(u=!0);const l=Object.values(t.outputPortConnectors(n,"out"));t.removeDevice(n);for(const e of i)0==Object.values(t.outputConnectors(e)).length&&t.removeDevice(e);const h=Wu.cloneDeep(e);h.bits=h.bits||{},h.bits.sel=a,h.type=u?"MuxSparse":"Mux",u&&(h.inputs=Object.keys(o).map((t=>BigInt(t))).sort(((t,e)=>t>e||-(t<e))),h.default_input=!c[0].every((e=>{const n=t.getDevice(e.from.id);return"Constant"==n.type&&Xu.Vector3vl.fromBin(n.constant,a).xmask().isHigh}))),t.addDevice(h,n),t.addConnector({from:s.from,to:r[0].to},[s,r[0]]);for(const e of l)t.addConnector(e);if(u){for(const[e,r]of Object.entries(h.inputs)){const i=h.default_input?Number(e)+1:e;for(const e of c[o[r]])t.addConnector({from:e.from,to:{id:n,port:"in"+i}},[e])}if(h.default_input)for(const e of c[0])t.addConnector({from:e.from,to:{id:n,port:"in0"}},[e])}else for(let e=0;e<2**a;e++){const r=e in o?o[e]:0;for(const i of c[r])t.addConnector({from:i.from,to:{id:n,port:"in"+e}},[i])}for(const e of c[0])0==Object.values(t.outputConnectors(e.from.id)).length&&t.removeDevice(e.from.id);return!0}function Wf(t,e,n){if("Dff"!=e.type)return!1;if("enable"in(e.polarity||{}))return!1;const r=Object.values(t.inputPortConnectors(n,"in"));if(1!=r.length)return!1;const i=r[0].from.id,o=t.getDevice(i);if("Mux"!=o.type)return!1;if(1!=(o.bits||{sel:1}).sel)return!1;if(1!=Object.values(t.outputPortConnectors(i,"out")).length)return!1;const s=Object.values(t.inputPortConnectors(i,"in0")),a=Object.values(t.inputPortConnectors(i,"in1"));function u(r,o,s){if(1!=r.length)return!1;if(r[0].from.id!=n)return!1;if("out"!=r[0].from.port)return!1;"polarity"in e||(e.polarity={}),e.polarity.enable=s;const a=Object.values(t.inputPortConnectors(i,"sel"));t.removeDevice(i);for(const e of o)t.addConnector({from:e.from,to:{id:n,port:"in"}},[e]);for(const e of a)t.addConnector({from:e.from,to:{id:n,port:"en"}},[e]);return!0}return u(s,a,!0)||u(a,s,!1)}const Xf=[Ff,zf,Uf,Hf,$f,Wf];class Yf{constructor(t){this._devices={},this._connectors={},this._forward={},this._backward={},this._connCount=0;for(const[e,n]of Object.entries(t.devices))this.addDevice(n,e);for(const e of Object.values(t.connectors))this.addConnector(e)}_freshConnectorId(){return this._connCount+=1,this._connCount}addDevice(t,e){console.assert(!(e in this._devices)),this._devices[e]=Wu.cloneDeep(t),this._forward[e]={},this._backward[e]={}}getDevice(t){return this._devices[t]}removeDevice(t){console.assert(t in this._devices),delete this._devices[t];const e={};for(const n of Object.values(this._forward[t]))for(const t of Object.keys(n))e[t]=!0;for(const n of Object.values(this._backward[t]))for(const t of Object.keys(n))e[t]=!0;for(const t of Object.keys(e))this.removeConnector(t)}addConnector(t,e=[]){if(console.assert(t.from.id in this._devices),console.assert(t.to.id in this._devices),!("name"in t))for(const n of e)if("name"in n){t.name=n.name;break}if(!t.source_positions){t.source_positions=[];for(const n of e)n.source_positions&&t.source_positions.push(...n.source_positions)}const n=this._freshConnectorId();function r(t,e){e.port in t[e.id]||(t[e.id][e.port]={}),t[e.id][e.port][n]=!0}return this._connectors[n]=Wu.cloneDeep(t),r(this._forward,t.from),r(this._backward,t.to),n}removeConnector(t){const e=this._connectors[t];delete this._forward[e.from.id][e.from.port][t],delete this._backward[e.to.id][e.to.port][t],delete this._connectors[t]}outputPortConnectors(t,e){const n={};if(e in this._forward[t])for(const r of Object.keys(this._forward[t][e]))n[r]=this._connectors[r];return n}inputPortConnectors(t,e){const n={};if(e in this._backward[t])for(const r of Object.keys(this._backward[t][e]))n[r]=this._connectors[r];return n}outputConnectors(t){const e={};for(const n of Object.values(this._forward[t]))for(const t of Object.keys(n))e[t]=this._connectors[t];return e}inputConnectors(t){const e={};for(const n of Object.values(this._backward[t]))for(const t of Object.keys(n))e[t]=this._connectors[t];return e}toJSON(){return{devices:this._devices,connectors:Object.values(this._connectors)}}transform(t){let e=!0,n=!1;for(;e;){e=!1;for(const[n,r]of Object.entries(this._devices))n in this._devices&&(e=e||t(this,r,n));n=n||e}return n}transformMany(t){let e=!1;for(const n of t)e=this.transform(n)||e;return e}}function Jf(t,e){function n(t){const n=new Yf(t);return n.transformMany(e),n.toJSON()}e=e||Xf;const r=n(t);if("subcircuits"in t){r.subcircuits={};for(const[e,i]of Object.entries(t.subcircuits))r.subcircuits[e]=n(i)}return r}function Zf(t){const e={$not:ol,$and:cl,$nand:dl,$or:al,$nor:hl,$xor:gl,$xnor:ml,$reduce_and:Al,$reduce_nand:El,$reduce_or:bl,$reduce_nor:wl,$reduce_xor:Tl,$reduce_xnor:Cl,$reduce_bool:bl,$logic_not:wl,$repeater:rl,$shl:nh,$shr:ih,$lt:sh,$le:uh,$eq:ph,$ne:vh,$gt:lh,$ge:fh,$constant:Fc,$neg:Vl,$pos:Gl,$add:ql,$sub:$l,$mul:Xl,$div:Jl,$mod:Kl,$pow:th,$mux:mf,$pmux:bf,$dff:Af,$mem:Ef,$fsm:Tf,$clock:zc,$button:Cc,$lamp:jc,$numdisplay:Rc,$numentry:Mc,$input:Tc,$output:Lc,$busgroup:cf,$busungroup:hf,$busslice:of,$zeroextend:tf,$signextend:nf,$display7:Mf};return t in e?e[t]:df}class Kf{constructor(t,{cellsNamespace:e={},engine:n=jf,engineOptions:r={}}={}){this._cells=Object.assign(g,e),this._display3vl=new Xu.Display3vl,this._display3vl.addDisplay(new qc),this._graph=this._makeGraph(t,t.subcircuits),r.cells=this._cells,this._engine=new n(this._graph,r),this.makeLabelIndex(),this.listenTo(this._engine,"postUpdateGates",((t,e)=>{this.trigger("postUpdateGates",t,e)}))}addDisplay(t){this._display3vl.addDisplay(t),this.trigger("display:add",t)}shutdown(){this.trigger("shutdown"),this.stop(),this._engine.shutdown(),this.stopListening()}hasWarnings(){return this._graph._warnings>0}_makeGraph(t,e,n){n=n||{};const r=new tu;r._display3vl=this._display3vl,r._warnings=0,n.nested&&r.set("subcircuit",!0);const i=t=>{r._warnings+=t,console.assert(r._warnings>=0),r._warnings>0&&this.running&&this.stop();const e=r.get("subcircuit");null!=e&&1!=e&&e.set("warning",r._warnings>0)};this.listenTo(r,"userChange",(t=>{this.trigger("userChange",t)})),this.listenTo(r,"change:inputSignals",((t,e)=>{$c(e,t.previous("inputSignals"))||t._changeInputSignals&&t._changeInputSignals(e)})),this.listenTo(r,"change:outputSignals",((t,e)=>{$c(e,t.previous("outputSignals"))||t._changeOutputSignals(e)})),this.listenTo(r,"change:signal",((t,e)=>{t._changeSignal(e)})),this.listenTo(r,"change:source",((t,e)=>{this._labelIndex=null,t._changeSource(e)})),this.listenTo(r,"change:target",((t,e)=>{this._labelIndex=null,t._changeTarget(e)})),this.listenTo(r,"change:warning",((t,e)=>{t.previous("warning")!==e&&i(e?1:-1)})),this.listenTo(r,"add",((t,e,n)=>{this._labelIndex=null,t.onAdd&&t.onAdd(),t.get("warning")&&i(1)})),this.listenTo(r,"remove",((t,e,n)=>{this._labelIndex=null,t.get("warning")&&i(-1)}));let o=!1;for(const n in t.devices){const i=t.devices[n];i.position&&(o=!0);const s=i.type in this._cells?this._cells[i.type]:Zf(i.celltype),a=Wu.clone(i);a.id=n,s==this._cells.Subcircuit&&(a.graph=this._makeGraph(e[i.celltype],e,{nested:!0}));const u=new s(a);r.addCell(u)}for(const e of t.connectors)r.addCell(new this._cells.Wire({source:{id:e.from.id,port:e.from.port,magnet:"port"},target:{id:e.to.id,port:e.to.port,magnet:"port"},netname:e.name,vertices:e.vertices||[],source_positions:e.source_positions||[]}));return o&&r.set("laid_out",!0),r}updateGatesNext(t){return this._engine.updateGatesNext(t)}updateGates(t){return this._engine.updateGates(t)}synchronize(){return this._engine.synchronize()}get hasPendingEvents(){return this._engine.hasPendingEvents}get tick(){return this._engine.tick}start(){if(!this.hasWarnings())return this._engine.start()}startFast(){if(!this.hasWarnings())return this._engine.startFast()}stop(t){return this._engine.stop(t)}get interval(){return this._engine.interval}set interval(t){this._engine.interval=t}get running(){return this._engine.running}getInputCells(){return this._graph.getElements().filter((t=>t.isInput))}getOutputCells(){return this._graph.getElements().filter((t=>t.isOutput))}setInput(t,e){const n=this._graph.getCell(t);if(!n.isInput)throw new Error("Invalid call to setInput");n.setInput(e)}getOutput(t){const e=this._graph.getCell(t);if(e.isOutput)return e.getOutput();throw new Error("Invalid call to getOutput")}makeLabelIndex(){if(this._labelIndex)return this._labelIndex;const t=e=>{const n={wires:{},devices:{},subcircuits:{},inputs:{},outputs:{},graph:e};for(const r of e.getElements()){if(r.has("net")&&(r.isInput&&(n.inputs[r.get("net")]=r),r.isOutput&&(n.outputs[r.get("net")]=r)),!r.has("label"))continue;const e=r.get("label");n.devices[e]=r,r instanceof this._cells.Subcircuit&&(n.subcircuits[e]=t(r.get("graph")))}for(const t of e.getLinks())t.has("netname")&&(n.wires[t.get("netname")]=t);return n};return this._labelIndex=t(this._graph)}getLabelIndex(t=[]){const e=(n,r)=>{if(n==t.length)return r;{const i=r.subcircuits[t[n]];if(i)return e(n+1,i)}};return e(0,this.makeLabelIndex())}findWireByLabel(t,e=[]){return this.getLabelIndex(e).wires[t]}findDeviceByLabel(t,e=[]){return this.getLabelIndex(e).devices[t]}findInputByNet(t){return this.getLabelIndex([]).inputs[t]}findOutputByNet(t){return this.getLabelIndex([]).outputs[t]}toJSON(t=!0){const e={},n=r=>{const i={devices:{},connectors:[]},o=r.get("laid_out");for(const s of r.getElements()){const r=i.devices[s.get("id")]=s.getGateParams(t);o||delete r.position,s instanceof this._cells.Subcircuit&&!e[s.get("celltype")]&&(e[s.get("celltype")]=n(s.get("graph")))}for(const e of r.getLinks())i.connectors.push(e.getWireParams(t));return i},r=n(this._graph);return r.subcircuits=e,r}waitForWire(t,e){return e instanceof Xu.Vector3vl&&(e=[e]),new Promise((n=>{this.monitorWire(t,((t,e)=>{n(t)}),{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:e})}))}waitFor(t,e,n){return n instanceof Xu.Vector3vl&&(n=[n]),new Promise((r=>{this.monitor(t,e,((t,e)=>{r(t)}),{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:n})}))}monitorWire(t,e,n={}){const r=t.get("source"),i=t.getSourceElement();return null==i?null:this.monitor(i,r.port,e,n)}monitor(t,e,n,r={}){return this._engine.monitor(t,e,n,r)}unmonitor(t){this._engine.unmonitor(t)}observeGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}unobserveGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}alarm(t,e,n={}){return this._engine.alarm(t,e,n)}unalarm(t){this._engine.unalarm(t)}}Wu.extend(Kf.prototype,Yi.Events);var Qf=n(25113),td=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),ed="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,nd=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),rd="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(nd):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},id=["top","right","bottom","left","width","height","size","weight"],od="undefined"!=typeof MutationObserver,sd=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t){var e=!1,n=!1,r=0;function i(){e&&(e=!1,t()),n&&s()}function o(){rd(i)}function s(){var t=Date.now();if(e){if(t-r<2)return;n=!0}else e=!0,n=!1,setTimeout(o,20);r=t}return s}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){ed&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),od?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){ed&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;id.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ad=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},ud=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||nd},cd=pd(0,0,0,0);function ld(t){return parseFloat(t)||0}function hd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+ld(t["border-"+n+"-width"])}),0)}var fd="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof ud(t).SVGGraphicsElement}:function(t){return t instanceof ud(t).SVGElement&&"function"==typeof t.getBBox};function dd(t){return ed?fd(t)?function(t){var e=t.getBBox();return pd(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return cd;var r=ud(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=ld(o)}return e}(r),o=i.left+i.right,s=i.top+i.bottom,a=ld(r.width),u=ld(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==e&&(a-=hd(r,"left","right")+o),Math.round(u+s)!==n&&(u-=hd(r,"top","bottom")+s)),!function(t){return t===ud(t).document.documentElement}(t)){var c=Math.round(a+o)-e,l=Math.round(u+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(l)&&(u-=l)}return pd(i.left,i.top,a,u)}(t):cd}function pd(t,e,n,r){return{x:t,y:e,width:n,height:r}}var gd=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=pd(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=dd(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),vd=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return ad(s,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),s}(e);ad(this,{target:t,contentRect:n})},md=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new td,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ud(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new gd(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ud(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new vd(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),yd="undefined"!=typeof WeakMap?new WeakMap:new td,bd=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=sd.getInstance(),r=new md(e,n,this);yd.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){bd.prototype[t]=function(){var e;return(e=yd.get(this))[t].apply(e,arguments)}}));const xd=void 0!==nd.ResizeObserver?nd.ResizeObserver:bd;function wd(t){const e=[t.cid];for(let n=t.graph.get("subcircuit");null!=n;n=n.graph.get("subcircuit"))e.push(n.cid);return e.reverse(),e.join(".")}class _d{constructor(t){this._circuit=t,this._wires=new Map,this.listenTo(this._circuit,"new:paper",(t=>this.attachTo(t)))}attachTo(t){this.listenTo(t,"link:monitor",(t=>{this.addWire(t.model)}))}addWire(t){const e=wd(t);if(this._wires.has(e))return;const n=new Qf.C$(t.get("bits")),r={wire:t,waveform:n,monitorId:void 0};this._wires.set(e,r),this.trigger("add",t),r.monitorId=this._circuit.monitorWire(t,((e,n)=>{this._handleChange(e,t,n)}))}removeWire(t){"string"==typeof t&&(t=this._wires.get(t).wire),this.trigger("remove",t);const e=wd(t);this._circuit.unmonitor(this._wires.get(e).monitorId),this._wires.delete(e)}getWires(){const t=[];for(const e of this._wires.values())t.push(e.wire);return t}getWiresDesc(){return this.getWires().map((t=>{if(t.has("netname"))return{name:t.get("netname"),path:t.getWirePath(),bits:t.get("bits")}})).filter((t=>void 0!==t))}loadWiresDesc(t){for(const e of t){const t=this._circuit.findWireByLabel(e.name,e.path);t&&t.get("bits")==e.bits&&this.addWire(t)}}_handleChange(t,e,n){this._wires.get(wd(e)).waveform.push(t,n),this.trigger("change",e,n)}}Wu.extend(_d.prototype,Yi.Events);class Ad extends Yi.View{initialize(t){function e(t){return _i(t.target).closest("tr").attr("wireid")}this._width=800,this._settings=(0,Qf.on)(Qf.L6,{start:0,pixelsPerTick:5,gridStep:1}),this._settingsFor=new Map,this._live=!0,this._autoredraw=!1,this._idle=null,this._removeButtonMarkup=t.removeButtonMarkup||'<button type="button" name="remove">✖</button>',this._baseSelectorMarkup=t.baseSelectorMarkup||Hc,this._bitTriggerMarkup=t.bitTriggerMarkup||'<select name="trigger" title="Trigger"><option value="none"></option><option value="rising">↑</option><option value="falling">↓</option><option value="risefall">↕</option><option value="undef">x</option></select>',this._busTriggerMarkup=t.busTriggerMarkup||'<input type="text" name="trigger" title="Trigger" placeholder="trigger" pattern="[0-9a-fx]*">',this.listenTo(this.model,"add",this._handleAdd),this.listenTo(this.model,"remove",this._handleRemove),this.listenTo(this.model._circuit,"display:add",(()=>{this.render()})),this.listenTo(this.model._circuit,"postUpdateGates",(t=>{this._live&&(this.start=t-this._width/this._settings.pixelsPerTick),this._settings.present=t,this._idle||(this._idle=requestIdleCallback((()=>{this._drawAll(),this._idle=null}),{timeout:100}))})),this.render(),this._resizeObserver=new xd((()=>{this._canvasResize()})),this._resizeObserver.observe(this.el);const n=this.model._circuit._display3vl;this.$el.on("click","button[name=remove]",(t=>{this.model.removeWire(e(t))})),this.$el.on("input","select[name=base]",(t=>{const r=t.target.value,i=this._settingsFor.get(e(t));i.base=r;const o=_i(t.target).closest("tr").find("input[name=trigger]");o.attr("pattern",n.pattern(r)),i.trigger.length&&o.val(n.show(r,i.trigger[0])),this.trigger("change")}));const r=()=>!0,i=(t,e)=>{const n=this._settingsFor.get(t);if(n.triggerId&&(this.model._circuit.unmonitor(n.triggerId),n.triggerId=null),e.length>0){const i=this.model._wires.get(t).wire;n.triggerId=this.model._circuit.monitorWire(i,r,{triggerValues:e,stopOnTrigger:!0})}n.trigger=e};this.$el.on("input","select[name=trigger]",(t=>{const n=e(t);switch(t.target.value){case"rising":i(n,[Xu.Vector3vl.one]);break;case"falling":i(n,[Xu.Vector3vl.zero]);break;case"risefall":i(n,[Xu.Vector3vl.one,Xu.Vector3vl.zero]);break;case"undef":i(n,[Xu.Vector3vl.x]);break;default:i(n,[])}})),this.$el.on("change","input[name=trigger]",(t=>{const r=e(t),o=this._settingsFor.get(r).base,s=this.model._wires.get(r).waveform.bits;if(""==t.target.value)i(r,[]);else if(n.validate(o,t.target.value,s)){const e=n.read(o,t.target.value,s);i(r,[e]),t.target.value=n.show(o,e)}else i(r,[])})),this.listenTo(this,"change",(()=>{this._autoredraw&&this._drawAll()}));const o=new Image(0,0);let s,a;o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";const u=t=>{const e=t.originalEvent.screenX-s;this.start=a-e/this._settings.pixelsPerTick};this.$el.on("dragstart","canvas",(t=>{const e=t.originalEvent.dataTransfer;e.setData("text/plain","dragging"),e.setDragImage(o,0,0),s=t.originalEvent.screenX,a=this._settings.start,this.live=!1,_i(document).on("dragover",u)})),this.$el.on("dragend","canvas",(t=>{_i(document).off("dragover",u)})),this.$el.on("wheel","canvas",(t=>{t.preventDefault();const e=2**Math.sign(t.originalEvent.deltaY);this.start+=t.originalEvent.offsetX/this._settings.pixelsPerTick*(1-1/e),this.pixelsPerTick*=e}))}render(){this.$el.html('<table class="monitor"></table>');for(const t of this.model._wires.values())this.$("table").append(this._handleAdd(t.wire));return this._canvasResize(),this}shutdown(){this.$el.off(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.stopListening()}get gridStep(){return(0,Qf.KT)(this._settings)}get autoredraw(){return this._autoredraw}set autoredraw(t){this._autoredraw=t,t&&this._drawAll()}get width(){return this._width}get live(){return this._live}set live(t){this.live!=t&&(this._live=t,this.trigger("change:live",t),this.trigger("change"))}get start(){return this._settings.start}set start(t){this._settings.start!=t&&(this._settings.start=t,this.trigger("change:start",t),this.trigger("change"))}get pixelsPerTick(){return this._settings.pixelsPerTick}set pixelsPerTick(t){this._settings.pixelsPerTick!=t&&(this._settings.pixelsPerTick=t,this.trigger("change:pixelsPerTick",t),this.trigger("change"))}_canvasResize(){this._width=Math.max(this.$el.width()-300,100),this.$("canvas").attr("width",this._width),this.trigger("change:width",this._width),this.trigger("change")}_drawAll(){for(const t of this.model._wires.keys())this._draw(t)}_draw(t){const e=this.model._circuit._display3vl,n=this.$('tr[wireid="'+t+'"]').find("canvas"),r=this.model._wires.get(t).waveform;(0,Qf._0)(r,n[0].getContext("2d"),this._settingsFor.get(t),e)}_handleAdd(t){const e=wd(t);this._settingsFor.set(e,(0,Qf.on)(this._settings,{base:"hex",trigger:[],triggerId:null})),this.$("table").append(this._createRow(t))}_handleRemove(t){const e=wd(t);this.$('tr[wireid="'+e+'"]').remove();const n=this._settingsFor.get(e);n.triggerId&&this.model._circuit.unmonitor(n.triggerId),this._settingsFor.delete(e)}_createRow(t){const e=wd(t),n=this._settingsFor.get(e),r=this.model._circuit._display3vl,i=t.get("bits")>1?this._baseSelectorMarkup instanceof Function?this._baseSelectorMarkup(r,t.get("bits"),n.base):this._baseSelectorMarkup:"",o=t.get("bits")>1?this._busTriggerMarkup:this._bitTriggerMarkup,s=_i('<tr><td class="name"></td><td>'+i+"</td><td>"+o+"</td><td>"+this._removeButtonMarkup+'</td><td><canvas class="wavecanvas" height="30" draggable="true"></canvas></td></tr>');return s.attr("wireid",e),s.children("td").first().text(function(t){const e=[];if(t.has("netname"))e.push(t.get("netname"));else{const n=t.source();e.push(n.port);const r=t.graph.getCell(n.id);r.has("label")?e.push(r.get("label")):e.push(n.id)}for(let n=t.graph.get("subcircuit");null!=n;n=n.graph.get("subcircuit"))n.has("label")?e.push(n.get("label")):e.push(n.id);return e.reverse(),e.join(".")}(t)),s}}let Sd=0;class Ed extends Yi.View{initialize(t){this._idnum=Sd++,this._inputPanelMarkup=t.inputPanelMarkup||'<div data-iopanel="input"></div>',this._outputPanelMarkup=t.outputPanelMarkup||'<div data-iopanel="output"></div>',this._baseSelectorMarkup=t.baseSelectorMarkup||Hc,this._labelMarkup=t.labelMarkup||"<label></label>",this._buttonMarkup=t.buttonMarkup||'<input type="checkbox">',this._lampMarkup=t.lampMarkup||'<input type="checkbox">',this._rowMarkup=t.rowMarkup||"<div></div>",this._colMarkup=t.colMarkup||"<div></div>",this._inputMarkup=t.inputMarkup||'<input type="text">',this.render(),this.listenTo(this.model._graph,"add",this._handleAdd),this.listenTo(this.model._graph,"remove",this._handleRemove),this.listenTo(this.model,"display:add",(()=>{this.render()}))}render(){this.$el.html('<form onsubmit="return false">'+this._inputPanelMarkup+this._outputPanelMarkup+"</form>");for(const t of this.model.getInputCells())this._handleAddInput(t);for(const t of this.model.getOutputCells())this._handleAddOutput(t)}shutdown(){this.$el.off(),this.stopListening()}_id(t){return"iopanel-"+t+"-"+this._idnum}_handleAdd(t){t.isInput?this._handleAddInput(t):t.isOutput&&this._handleAddOutput(t)}_addLabel(t,e){return _i(this._labelMarkup).appendTo(t).find("label").addBack("label").text(e.get("net")||e.get("label"))}_addLabelFor(t,e){return this._addLabel(t,e).attr("for",this._id(e.id))}_handleAddInput(t){const e=this.model._display3vl,n=_i(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabelFor(n,t);const r=_i(this._colMarkup).appendTo(n);if(1==t.get("mode")){const e=_i(this._buttonMarkup).appendTo(r).find("input").addBack("input").attr("id",this._id(t.id)).on("click",(e=>{t.setInput(Xu.Vector3vl.fromBool(e.target.checked))})),n=(t,n)=>{e.prop("checked",n.out.isHigh)};this.listenTo(t,"change:outputSignals",n),n(t,t.get("outputSignals"))}else{const i=_i(this._inputMarkup).appendTo(r);let o="hex";_i(this._baseSelectorMarkup(e,t.get("bits"),o)).appendTo(r);let s=e.size(o,t.get("bits"));const a=t.get("bits"),u=i.find("input").addBack("input").prop("size",s).prop("maxlength",s).prop("pattern",e.pattern(o)).on("change",(n=>{e.validate(o,n.target.value,a)&&t.setInput(e.read(o,n.target.value,a))})),c=(t,n)=>{i.val(e.show(o,n.out))};this.listenTo(t,"change:outputSignals",c),c(t,t.get("outputSignals")),n.on("input","select[name=base]",(n=>{o=n.target.value,s=e.size(o,t.get("bits")),u.prop("size",s).prop("maxlength",s).prop("pattern",e.pattern(o)),c(t,t.get("outputSignals"))}))}}_handleAddOutput(t){const e=this.model._display3vl,n=_i(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabel(n,t);const r=_i(this._colMarkup).appendTo(n);if(1==t.get("bits")){const e=_i(this._lampMarkup).appendTo(r).find("input").addBack("input").prop("disabled",!0),n=(t,n)=>{const r=t.getOutput();e.prop("checked",r.isHigh),e.prop("indeterminate",!r.isDefined)};this.listenTo(t,"change:inputSignals",n),n(t,t.get("inputSignals"))}else{const i=_i(this._inputMarkup).appendTo(r);let o="hex";_i(this._baseSelectorMarkup(e,t.get("bits"),o)).appendTo(r);const s=e.size(o,t.get("bits")),a=i.find("input").addBack("input").prop("disabled",!0).prop("size",s),u=(t,n)=>{const r=t.getOutput();i.val(e.show(o,r))};this.listenTo(t,"change:inputSignals",u),u(t,t.get("inputSignals")),n.on("input","select[name=base]",(n=>{o=n.target.value,a.prop("size",e.size(o,t.get("bits"))),u(t,t.get("inputSignals"))}))}}_handleRemove(t){this.stopListening(t)}}var kd=n(85072),Td=n.n(kd),Pd=n(97825),Cd=n.n(Pd),Od=n(77659),Md=n.n(Od),Nd=n(55056),Ld=n.n(Nd),Id=n(10540),jd=n.n(Id),Bd=n(41113),Rd=n.n(Bd),Dd=n(41208),Fd={};Fd.styleTagTransform=Rd(),Fd.setAttributes=Ld(),Fd.insert=Md().bind(null,"head"),Fd.domAPI=Cd(),Fd.insertStyleElement=jd(),Td()(Dd.A,Fd),Dd.A&&Dd.A.locals&&Dd.A.locals;const Vd={async:!0,sorting:Hu.sorting.APPROX,width:100,height:100,gridSize:5,magnetThreshold:"onleave",snapLinks:!0,linkPinning:!1,markAvailable:!0,defaultLink:new bc,defaultConnectionPoint:{name:"anchor"},defaultRouter:{name:"metro",args:{startDirections:["right"],endDirections:["left"],maximumLoops:200,step:2.5}},defaultConnector:{name:"rounded",args:{radius:10}},cellViewNamespace:g,validateConnection(t,e,n,r,i,o){if("target"===i){if(!r)return!1;const t=n.model.getPort(n.findAttribute("port",r));return"object"==typeof t&&"in"===t.dir&&t.bits===o.model.get("bits")&&!this.model.getConnectedLinks(n.model).find((t=>t.id!==o.model.id&&t.get("target").id===n.model.id&&t.get("target").port===n.findAttribute("port",r)))}if("source"===i){if(!e)return!1;const n=t.model.getPort(t.findAttribute("port",e));return"object"==typeof n&&"out"===n.dir&&n.bits===o.model.get("bits")}}},zd=[{id:"zoomOut",hidden:!1,buttonText:"–",callback:({circuit:t,model:e,paper:n})=>{const r=e.get("zoomLevel")-1;t.scaleAndRefreshPaper(n,r),e.set("zoomLevel",r)}},{id:"zoomIn",hidden:!1,buttonText:"+",callback:({circuit:t,model:e,paper:n})=>{const r=e.get("zoomLevel")+1;t.scaleAndRefreshPaper(n,r),e.set("zoomLevel",r)}}];class Gd extends Kf{constructor(t,{windowCallback:e=Gd.prototype._defaultWindowCallback,layoutEngine:n="dagre",subcircuitButtons:r=[],...i}={}){i.engine||(i.engine=Bf),super(t,i),this._layoutEngine=n,this._windowCallback=e,this._subcircuitButtons=this._mergeSubcircuitButtons(r),this.listenTo(this._engine,"changeRunning",(()=>{this.trigger("changeRunning")}))}_mergeSubcircuitButtons(t=[]){const e=new Map;for(const n of zd.concat(t))n?.hidden?e.delete(n.id):e.set(n.id,n);return Array.from(e.values())}_defaultWindowCallback(t,e,n){const r=()=>.9*_i(window).width(),i=()=>.9*_i(window).height(),o=new xd((function(){e.width()>r()&&e.dialog("option","width",r()),e.height()>i()&&e.dialog("option","height",i())}));o.observe(e.get(0));const s=()=>{e.dialog("close")};this.listenToOnce(this,"shutdown",s),e.dialog({width:"auto",height:"auto",maxWidth:.9*_i(window).width(),maxHeight:.9*_i(window).height(),resizable:"Memory"!==t,close:()=>{this.stopListening(this,"shutdown",s),n(),o.disconnect()}})}displayOn(t){return this._makePaper(t,this._graph)}scaleAndRefreshPaper(t,e){t.scale(Math.pow(1.1,e));const n=t.model;t.freeze(),n.resetCells(n.getCells()),t.unfreeze()}_makePaper(t,e){this._engine.observeGraph(e);const n=Wu.merge({el:t,model:e},Vd),r=new Hu(n);r.$el.addClass("djs"),r.freeze(),e.resetCells(e.getCells()),e.get("laid_out")||("dagre"==this._layoutEngine&&$u.layout(e,{nodeSep:20,edgeSep:0,rankSep:110,rankDir:"LR",setPosition:(t,e)=>{t.setLayoutPosition({x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height})},exportElement:t=>t.getLayoutSize(),dagre:y,graphlib:b}),e.set("laid_out",!0)),r.listenTo(this,"display:add",(()=>{r.freeze(),e.resetCells(e.getCells()),r.unfreeze()})),this.listenTo(r,"render:done",(()=>{r.fitToContent({padding:30,allowNewOrigin:"any"})})),r.unfreeze();const i=this;return this.listenTo(r,"open:subcircuit",(t=>{const e=_i("<div>",{title:t.get("celltype")+" "+t.get("label")}).appendTo("html > body"),n=_i("<div>").appendTo(e),r=t.get("graph"),o=this._makePaper(n,r);o.once("render:done",(()=>{this._windowCallback("Subcircuit",e,(()=>{this._engine.unobserveGraph(r),o.remove(),e.remove()}))})),t.set("zoomLevel",0);const s=_i('<div class="btn-group"></div>');for(const e of this._subcircuitButtons)_i('<button class="btn btn-secondary"></button>').append(_i("<strong></strong>").text(e.buttonText)).on("click",{circuit:i,model:t,paper:o},(t=>e.callback(t.data))).appendTo(s);s.prependTo(e)})),this.listenTo(r,"open:memorycontent",((t,e)=>{this._windowCallback("Memory",t,e)})),this.listenTo(r,"open:fsm",((t,e)=>{this._windowCallback("FSM",t,e)})),r.fixed=function(t){this.setInteractivity(!t),this.$el.toggleClass("fixed",t)},this.trigger("new:paper",r),r}}var Ud=r.uu,qd=r.hM,Hd=r.UH,$d=r.VA,Wd=r.m4,Xd=r.Yo,Yd=r.sP,Jd=r.r0,Zd=r.xc,Kd=r.Yl,Qd=r.pd;export{Ud as Circuit,qd as HeadlessCircuit,Hd as IOPanelView,$d as Monitor,Wd as MonitorView,Xd as cells,Yd as engines,Jd as getCellType,Zd as paperOptions,Kd as tools,Qd as transform};
//# sourceMappingURL=main.mjs.map